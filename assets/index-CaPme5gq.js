const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D76M5LjM.js","assets/graph_model-BT4_5o5z.js","assets/face-landmarks-detection.esm-8WZU6KHf.js"])))=>i.map(i=>d[i]);
var ym=Object.defineProperty;var vm=(e,t,n)=>t in e?ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Nt=(e,t,n)=>vm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var xf={exports:{}},es={},wf={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=Symbol.for("react.element"),wm=Symbol.for("react.portal"),bm=Symbol.for("react.fragment"),km=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Nm=Symbol.for("react.forward_ref"),Em=Symbol.for("react.suspense"),Tm=Symbol.for("react.memo"),_m=Symbol.for("react.lazy"),Zc=Symbol.iterator;function Pm(e){return e===null||typeof e!="object"?null:(e=Zc&&e[Zc]||e["@@iterator"],typeof e=="function"?e:null)}var bf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kf=Object.assign,jf={};function fi(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||bf}fi.prototype.isReactComponent={};fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sf(){}Sf.prototype=fi.prototype;function bu(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||bf}var ku=bu.prototype=new Sf;ku.constructor=bu;kf(ku,fi.prototype);ku.isPureReactComponent=!0;var Jc=Array.isArray,Cf=Object.prototype.hasOwnProperty,ju={current:null},Nf={key:!0,ref:!0,__self:!0,__source:!0};function Ef(e,t,n){var r,o={},a=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)Cf.call(t,r)&&!Nf.hasOwnProperty(r)&&(o[r]=t[r]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var p=Array(f),y=0;y<f;y++)p[y]=arguments[y+2];o.children=p}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)o[r]===void 0&&(o[r]=f[r]);return{$$typeof:mo,type:e,key:a,ref:u,props:o,_owner:ju.current}}function Am(e,t){return{$$typeof:mo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Su(e){return typeof e=="object"&&e!==null&&e.$$typeof===mo}function Rm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ed=/\/+/g;function Xs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Rm(""+e.key):t.toString(36)}function ma(e,t,n,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case mo:case wm:u=!0}}if(u)return u=e,o=o(u),e=r===""?"."+Xs(u,0):r,Jc(o)?(n="",e!=null&&(n=e.replace(ed,"$&/")+"/"),ma(o,t,n,"",function(y){return y})):o!=null&&(Su(o)&&(o=Am(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(ed,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=r===""?".":r+":",Jc(e))for(var f=0;f<e.length;f++){a=e[f];var p=r+Xs(a,f);u+=ma(a,t,n,p,o)}else if(p=Pm(e),typeof p=="function")for(e=p.call(e),f=0;!(a=e.next()).done;)a=a.value,p=r+Xs(a,f++),u+=ma(a,t,n,p,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Ho(e,t,n){if(e==null)return e;var r=[],o=0;return ma(e,r,"","",function(a){return t.call(n,a,o++)}),r}function Fm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},ga={transition:null},Dm={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:ga,ReactCurrentOwner:ju};function Tf(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Ho,forEach:function(e,t,n){Ho(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ho(e,function(){t++}),t},toArray:function(e){return Ho(e,function(t){return t})||[]},only:function(e){if(!Su(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=fi;Te.Fragment=bm;Te.Profiler=jm;Te.PureComponent=bu;Te.StrictMode=km;Te.Suspense=Em;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dm;Te.act=Tf;Te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kf({},e.props),o=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=ju.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(p in t)Cf.call(t,p)&&!Nf.hasOwnProperty(p)&&(r[p]=t[p]===void 0&&f!==void 0?f[p]:t[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){f=Array(p);for(var y=0;y<p;y++)f[y]=arguments[y+2];r.children=f}return{$$typeof:mo,type:e.type,key:o,ref:a,props:r,_owner:u}};Te.createContext=function(e){return e={$$typeof:Cm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sm,_context:e},e.Consumer=e};Te.createElement=Ef;Te.createFactory=function(e){var t=Ef.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:Nm,render:e}};Te.isValidElement=Su;Te.lazy=function(e){return{$$typeof:_m,_payload:{_status:-1,_result:e},_init:Fm}};Te.memo=function(e,t){return{$$typeof:Tm,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=ga.transition;ga.transition={};try{e()}finally{ga.transition=t}};Te.unstable_act=Tf;Te.useCallback=function(e,t){return _t.current.useCallback(e,t)};Te.useContext=function(e){return _t.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};Te.useEffect=function(e,t){return _t.current.useEffect(e,t)};Te.useId=function(){return _t.current.useId()};Te.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};Te.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return _t.current.useMemo(e,t)};Te.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};Te.useRef=function(e){return _t.current.useRef(e)};Te.useState=function(e){return _t.current.useState(e)};Te.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};Te.useTransition=function(){return _t.current.useTransition()};Te.version="18.3.1";wf.exports=Te;var j=wf.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=j,Im=Symbol.for("react.element"),Om=Symbol.for("react.fragment"),Bm=Object.prototype.hasOwnProperty,zm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lm={key:!0,ref:!0,__self:!0,__source:!0};function _f(e,t,n){var r,o={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)Bm.call(t,r)&&!Lm.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Im,type:e,key:a,ref:u,props:o,_owner:zm.current}}es.Fragment=Om;es.jsx=_f;es.jsxs=_f;xf.exports=es;var l=xf.exports,Pf={exports:{}},Ut={},Af={exports:{}},Rf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,J){var oe=q.length;q.push(J);e:for(;0<oe;){var Se=oe-1>>>1,je=q[Se];if(0<o(je,J))q[Se]=J,q[oe]=je,oe=Se;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var J=q[0],oe=q.pop();if(oe!==J){q[0]=oe;e:for(var Se=0,je=q.length,Ie=je>>>1;Se<Ie;){var Ae=2*(Se+1)-1,ze=q[Ae],Ue=Ae+1,We=q[Ue];if(0>o(ze,oe))Ue<je&&0>o(We,ze)?(q[Se]=We,q[Ue]=oe,Se=Ue):(q[Se]=ze,q[Ae]=oe,Se=Ae);else if(Ue<je&&0>o(We,oe))q[Se]=We,q[Ue]=oe,Se=Ue;else break e}}return J}function o(q,J){var oe=q.sortIndex-J.sortIndex;return oe!==0?oe:q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var p=[],y=[],S=1,C=null,N=3,K=!1,G=!1,M=!1,ee=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var J=n(y);J!==null;){if(J.callback===null)r(y);else if(J.startTime<=q)r(y),J.sortIndex=J.expirationTime,t(p,J);else break;J=n(y)}}function L(q){if(M=!1,b(q),!G)if(n(p)!==null)G=!0,ue(I);else{var J=n(y);J!==null&&he(L,J.startTime-q)}}function I(q,J){G=!1,M&&(M=!1,k(O),O=-1),K=!0;var oe=N;try{for(b(J),C=n(p);C!==null&&(!(C.expirationTime>J)||q&&!R());){var Se=C.callback;if(typeof Se=="function"){C.callback=null,N=C.priorityLevel;var je=Se(C.expirationTime<=J);J=e.unstable_now(),typeof je=="function"?C.callback=je:C===n(p)&&r(p),b(J)}else r(p);C=n(p)}if(C!==null)var Ie=!0;else{var Ae=n(y);Ae!==null&&he(L,Ae.startTime-J),Ie=!1}return Ie}finally{C=null,N=oe,K=!1}}var H=!1,$=null,O=-1,Q=5,B=-1;function R(){return!(e.unstable_now()-B<Q)}function ie(){if($!==null){var q=e.unstable_now();B=q;var J=!0;try{J=$(!0,q)}finally{J?Z():(H=!1,$=null)}}else H=!1}var Z;if(typeof v=="function")Z=function(){v(ie)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,de=ce.port2;ce.port1.onmessage=ie,Z=function(){de.postMessage(null)}}else Z=function(){ee(ie,0)};function ue(q){$=q,H||(H=!0,Z())}function he(q,J){O=ee(function(){q(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){G||K||(G=!0,ue(I))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(q){switch(N){case 1:case 2:case 3:var J=3;break;default:J=N}var oe=N;N=J;try{return q()}finally{N=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var oe=N;N=q;try{return J()}finally{N=oe}},e.unstable_scheduleCallback=function(q,J,oe){var Se=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Se+oe:Se):oe=Se,q){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=oe+je,q={id:S++,callback:J,priorityLevel:q,startTime:oe,expirationTime:je,sortIndex:-1},oe>Se?(q.sortIndex=oe,t(y,q),n(p)===null&&q===n(y)&&(M?(k(O),O=-1):M=!0,he(L,oe-Se))):(q.sortIndex=je,t(p,q),G||K||(G=!0,ue(I))),q},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(q){var J=N;return function(){var oe=N;N=J;try{return q.apply(this,arguments)}finally{N=oe}}}})(Rf);Af.exports=Rf;var $m=Af.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=j,Vt=$m;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ff=new Set,Xi={};function Cr(e,t){oi(e,t),oi(e+"Capture",t)}function oi(e,t){for(Xi[e]=t,e=0;e<t.length;e++)Ff.add(t[e])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),El=Object.prototype.hasOwnProperty,Um=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,td={},nd={};function Wm(e){return El.call(nd,e)?!0:El.call(td,e)?!1:Um.test(e)?nd[e]=!0:(td[e]=!0,!1)}function Km(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hm(e,t,n,r){if(t===null||typeof t>"u"||Km(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pt(e,t,n,r,o,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cu=/[\-:]([a-z])/g;function Nu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cu,Nu);yt[t]=new Pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cu,Nu);yt[t]=new Pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cu,Nu);yt[t]=new Pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Pt(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Eu(e,t,n,r){var o=yt.hasOwnProperty(t)?yt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hm(t,n,o,r)&&(n=null),r||o===null?Wm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Tn=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qo=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),Tu=Symbol.for("react.strict_mode"),Tl=Symbol.for("react.profiler"),Df=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),_u=Symbol.for("react.forward_ref"),_l=Symbol.for("react.suspense"),Pl=Symbol.for("react.suspense_list"),Pu=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),If=Symbol.for("react.offscreen"),rd=Symbol.iterator;function Ti(e){return e===null||typeof e!="object"?null:(e=rd&&e[rd]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Zs;function Bi(e){if(Zs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zs=t&&t[1]||""}return`
`+Zs+e}var Js=!1;function el(e,t){if(!e||Js)return"";Js=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),a=r.stack.split(`
`),u=o.length-1,f=a.length-1;1<=u&&0<=f&&o[u]!==a[f];)f--;for(;1<=u&&0<=f;u--,f--)if(o[u]!==a[f]){if(u!==1||f!==1)do if(u--,f--,0>f||o[u]!==a[f]){var p=`
`+o[u].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=u&&0<=f);break}}}finally{Js=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bi(e):""}function qm(e){switch(e.tag){case 5:return Bi(e.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return e=el(e.type,!1),e;case 11:return e=el(e.type.render,!1),e;case 1:return e=el(e.type,!0),e;default:return""}}function Al(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $r:return"Fragment";case Lr:return"Portal";case Tl:return"Profiler";case Tu:return"StrictMode";case _l:return"Suspense";case Pl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mf:return(e.displayName||"Context")+".Consumer";case Df:return(e._context.displayName||"Context")+".Provider";case _u:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pu:return t=e.displayName||null,t!==null?t:Al(e.type)||"Memo";case On:t=e._payload,e=e._init;try{return Al(e(t))}catch{}}return null}function Gm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Al(t);case 8:return t===Tu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Of(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ym(e){var t=Of(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Go(e){e._valueTracker||(e._valueTracker=Ym(e))}function Bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Of(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rl(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function id(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zf(e,t){t=t.checked,t!=null&&Eu(e,"checked",t,!1)}function Fl(e,t){zf(e,t);var n=Xn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dl(e,t.type,Xn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function od(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dl(e,t,n){(t!=="number"||_a(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zi=Array.isArray;function Zr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ml(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ad(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(re(92));if(zi(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xn(n)}}function Lf(e,t){var n=Xn(t.value),r=Xn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $f(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Il(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$f(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yo,Vf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yo=Yo||document.createElement("div"),Yo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qm=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(e){Qm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vi[t]=Vi[e]})});function Uf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vi.hasOwnProperty(e)&&Vi[e]?(""+t).trim():t+"px"}function Wf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Uf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Xm=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ol(e,t){if(t){if(Xm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function Bl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=null;function Au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ll=null,Jr=null,ei=null;function ld(e){if(e=vo(e)){if(typeof Ll!="function")throw Error(re(280));var t=e.stateNode;t&&(t=os(t),Ll(e.stateNode,e.type,t))}}function Kf(e){Jr?ei?ei.push(e):ei=[e]:Jr=e}function Hf(){if(Jr){var e=Jr,t=ei;if(ei=Jr=null,ld(e),t)for(e=0;e<t.length;e++)ld(t[e])}}function qf(e,t){return e(t)}function Gf(){}var tl=!1;function Yf(e,t,n){if(tl)return e(t,n);tl=!0;try{return qf(e,t,n)}finally{tl=!1,(Jr!==null||ei!==null)&&(Gf(),Hf())}}function Ji(e,t){var n=e.stateNode;if(n===null)return null;var r=os(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(re(231,t,typeof n));return n}var $l=!1;if(Sn)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){$l=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{$l=!1}function Zm(e,t,n,r,o,a,u,f,p){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(S){this.onError(S)}}var Ui=!1,Pa=null,Aa=!1,Vl=null,Jm={onError:function(e){Ui=!0,Pa=e}};function e0(e,t,n,r,o,a,u,f,p){Ui=!1,Pa=null,Zm.apply(Jm,arguments)}function t0(e,t,n,r,o,a,u,f,p){if(e0.apply(this,arguments),Ui){if(Ui){var y=Pa;Ui=!1,Pa=null}else throw Error(re(198));Aa||(Aa=!0,Vl=y)}}function Nr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Qf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ud(e){if(Nr(e)!==e)throw Error(re(188))}function n0(e){var t=e.alternate;if(!t){if(t=Nr(e),t===null)throw Error(re(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return ud(o),e;if(a===r)return ud(o),t;a=a.sibling}throw Error(re(188))}if(n.return!==r.return)n=o,r=a;else{for(var u=!1,f=o.child;f;){if(f===n){u=!0,n=o,r=a;break}if(f===r){u=!0,r=o,n=a;break}f=f.sibling}if(!u){for(f=a.child;f;){if(f===n){u=!0,n=a,r=o;break}if(f===r){u=!0,r=a,n=o;break}f=f.sibling}if(!u)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?e:t}function Xf(e){return e=n0(e),e!==null?Zf(e):null}function Zf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zf(e);if(t!==null)return t;e=e.sibling}return null}var Jf=Vt.unstable_scheduleCallback,cd=Vt.unstable_cancelCallback,r0=Vt.unstable_shouldYield,i0=Vt.unstable_requestPaint,rt=Vt.unstable_now,o0=Vt.unstable_getCurrentPriorityLevel,Ru=Vt.unstable_ImmediatePriority,eh=Vt.unstable_UserBlockingPriority,Ra=Vt.unstable_NormalPriority,a0=Vt.unstable_LowPriority,th=Vt.unstable_IdlePriority,ts=null,pn=null;function s0(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ts,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:c0,l0=Math.log,u0=Math.LN2;function c0(e){return e>>>=0,e===0?32:31-(l0(e)/u0|0)|0}var Qo=64,Xo=4194304;function Li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,u=n&268435455;if(u!==0){var f=u&~o;f!==0?r=Li(f):(a&=u,a!==0&&(r=Li(a)))}else u=n&~o,u!==0?r=Li(u):a!==0&&(r=Li(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-on(t),o=1<<n,r|=e[n],t&=~o;return r}function d0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-on(a),f=1<<u,p=o[u];p===-1?(!(f&n)||f&r)&&(o[u]=d0(f,t)):p<=t&&(e.expiredLanes|=f),a&=~f}}function Ul(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nh(){var e=Qo;return Qo<<=1,!(Qo&4194240)&&(Qo=64),e}function nl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function go(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=n}function h0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-on(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function Fu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Oe=0;function rh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ih,Du,oh,ah,sh,Wl=!1,Zo=[],Un=null,Wn=null,Kn=null,eo=new Map,to=new Map,zn=[],p0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dd(e,t){switch(e){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":eo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(t.pointerId)}}function Pi(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=vo(t),t!==null&&Du(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function m0(e,t,n,r,o){switch(t){case"focusin":return Un=Pi(Un,e,t,n,r,o),!0;case"dragenter":return Wn=Pi(Wn,e,t,n,r,o),!0;case"mouseover":return Kn=Pi(Kn,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return eo.set(a,Pi(eo.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,to.set(a,Pi(to.get(a)||null,e,t,n,r,o)),!0}return!1}function lh(e){var t=mr(e.target);if(t!==null){var n=Nr(t);if(n!==null){if(t=n.tag,t===13){if(t=Qf(n),t!==null){e.blockedOn=t,sh(e.priority,function(){oh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zl=r,n.target.dispatchEvent(r),zl=null}else return t=vo(n),t!==null&&Du(t),e.blockedOn=n,!1;t.shift()}return!0}function fd(e,t,n){ya(e)&&n.delete(t)}function g0(){Wl=!1,Un!==null&&ya(Un)&&(Un=null),Wn!==null&&ya(Wn)&&(Wn=null),Kn!==null&&ya(Kn)&&(Kn=null),eo.forEach(fd),to.forEach(fd)}function Ai(e,t){e.blockedOn===t&&(e.blockedOn=null,Wl||(Wl=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,g0)))}function no(e){function t(o){return Ai(o,e)}if(0<Zo.length){Ai(Zo[0],e);for(var n=1;n<Zo.length;n++){var r=Zo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Un!==null&&Ai(Un,e),Wn!==null&&Ai(Wn,e),Kn!==null&&Ai(Kn,e),eo.forEach(t),to.forEach(t),n=0;n<zn.length;n++)r=zn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zn.length&&(n=zn[0],n.blockedOn===null);)lh(n),n.blockedOn===null&&zn.shift()}var ti=Tn.ReactCurrentBatchConfig,Da=!0;function y0(e,t,n,r){var o=Oe,a=ti.transition;ti.transition=null;try{Oe=1,Mu(e,t,n,r)}finally{Oe=o,ti.transition=a}}function v0(e,t,n,r){var o=Oe,a=ti.transition;ti.transition=null;try{Oe=4,Mu(e,t,n,r)}finally{Oe=o,ti.transition=a}}function Mu(e,t,n,r){if(Da){var o=Kl(e,t,n,r);if(o===null)fl(e,t,r,Ma,n),dd(e,r);else if(m0(o,e,t,n,r))r.stopPropagation();else if(dd(e,r),t&4&&-1<p0.indexOf(e)){for(;o!==null;){var a=vo(o);if(a!==null&&ih(a),a=Kl(e,t,n,r),a===null&&fl(e,t,r,Ma,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else fl(e,t,r,null,n)}}var Ma=null;function Kl(e,t,n,r){if(Ma=null,e=Au(r),e=mr(e),e!==null)if(t=Nr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Qf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ma=e,null}function uh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Ru:return 1;case eh:return 4;case Ra:case a0:return 16;case th:return 536870912;default:return 16}default:return 16}}var $n=null,Iu=null,va=null;function ch(){if(va)return va;var e,t=Iu,n=t.length,r,o="value"in $n?$n.value:$n.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===o[a-r];r++);return va=o.slice(e,1<r?1-r:void 0)}function xa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jo(){return!0}function hd(){return!1}function Wt(e){function t(n,r,o,a,u){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(a):a[f]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Jo:hd,this.isPropagationStopped=hd,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),t}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=Wt(hi),yo=Ze({},hi,{view:0,detail:0}),x0=Wt(yo),rl,il,Ri,ns=Ze({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(rl=e.screenX-Ri.screenX,il=e.screenY-Ri.screenY):il=rl=0,Ri=e),rl)},movementY:function(e){return"movementY"in e?e.movementY:il}}),pd=Wt(ns),w0=Ze({},ns,{dataTransfer:0}),b0=Wt(w0),k0=Ze({},yo,{relatedTarget:0}),ol=Wt(k0),j0=Ze({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),S0=Wt(j0),C0=Ze({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N0=Wt(C0),E0=Ze({},hi,{data:0}),md=Wt(E0),T0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=P0[e])?!!t[e]:!1}function Bu(){return A0}var R0=Ze({},yo,{key:function(e){if(e.key){var t=T0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bu,charCode:function(e){return e.type==="keypress"?xa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F0=Wt(R0),D0=Ze({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gd=Wt(D0),M0=Ze({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bu}),I0=Wt(M0),O0=Ze({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=Wt(O0),z0=Ze({},ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),L0=Wt(z0),$0=[9,13,27,32],zu=Sn&&"CompositionEvent"in window,Wi=null;Sn&&"documentMode"in document&&(Wi=document.documentMode);var V0=Sn&&"TextEvent"in window&&!Wi,dh=Sn&&(!zu||Wi&&8<Wi&&11>=Wi),yd=" ",vd=!1;function fh(e,t){switch(e){case"keyup":return $0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function U0(e,t){switch(e){case"compositionend":return hh(t);case"keypress":return t.which!==32?null:(vd=!0,yd);case"textInput":return e=t.data,e===yd&&vd?null:e;default:return null}}function W0(e,t){if(Vr)return e==="compositionend"||!zu&&fh(e,t)?(e=ch(),va=Iu=$n=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dh&&t.locale!=="ko"?null:t.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K0[e.type]:t==="textarea"}function ph(e,t,n,r){Kf(r),t=Ia(t,"onChange"),0<t.length&&(n=new Ou("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ki=null,ro=null;function H0(e){Ch(e,0)}function rs(e){var t=Kr(e);if(Bf(t))return e}function q0(e,t){if(e==="change")return t}var mh=!1;if(Sn){var al;if(Sn){var sl="oninput"in document;if(!sl){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),sl=typeof wd.oninput=="function"}al=sl}else al=!1;mh=al&&(!document.documentMode||9<document.documentMode)}function bd(){Ki&&(Ki.detachEvent("onpropertychange",gh),ro=Ki=null)}function gh(e){if(e.propertyName==="value"&&rs(ro)){var t=[];ph(t,ro,e,Au(e)),Yf(H0,t)}}function G0(e,t,n){e==="focusin"?(bd(),Ki=t,ro=n,Ki.attachEvent("onpropertychange",gh)):e==="focusout"&&bd()}function Y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rs(ro)}function Q0(e,t){if(e==="click")return rs(t)}function X0(e,t){if(e==="input"||e==="change")return rs(t)}function Z0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:Z0;function io(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!El.call(t,o)||!sn(e[o],t[o]))return!1}return!0}function kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jd(e,t){var n=kd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kd(n)}}function yh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vh(){for(var e=window,t=_a();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_a(e.document)}return t}function Lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function J0(e){var t=vh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yh(n.ownerDocument.documentElement,n)){if(r!==null&&Lu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=jd(n,a);var u=jd(n,r);o&&u&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eg=Sn&&"documentMode"in document&&11>=document.documentMode,Ur=null,Hl=null,Hi=null,ql=!1;function Sd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ql||Ur==null||Ur!==_a(r)||(r=Ur,"selectionStart"in r&&Lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hi&&io(Hi,r)||(Hi=r,r=Ia(Hl,"onSelect"),0<r.length&&(t=new Ou("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ur)))}function ea(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wr={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},ll={},xh={};Sn&&(xh=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function is(e){if(ll[e])return ll[e];if(!Wr[e])return e;var t=Wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xh)return ll[e]=t[n];return e}var wh=is("animationend"),bh=is("animationiteration"),kh=is("animationstart"),jh=is("transitionend"),Sh=new Map,Cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,t){Sh.set(e,t),Cr(t,[e])}for(var ul=0;ul<Cd.length;ul++){var cl=Cd[ul],tg=cl.toLowerCase(),ng=cl[0].toUpperCase()+cl.slice(1);Jn(tg,"on"+ng)}Jn(wh,"onAnimationEnd");Jn(bh,"onAnimationIteration");Jn(kh,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(jh,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Nd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,t0(r,t,void 0,e),e.currentTarget=null}function Ch(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var u=r.length-1;0<=u;u--){var f=r[u],p=f.instance,y=f.currentTarget;if(f=f.listener,p!==a&&o.isPropagationStopped())break e;Nd(o,f,y),a=p}else for(u=0;u<r.length;u++){if(f=r[u],p=f.instance,y=f.currentTarget,f=f.listener,p!==a&&o.isPropagationStopped())break e;Nd(o,f,y),a=p}}}if(Aa)throw e=Vl,Aa=!1,Vl=null,e}function Ke(e,t){var n=t[Zl];n===void 0&&(n=t[Zl]=new Set);var r=e+"__bubble";n.has(r)||(Nh(t,e,2,!1),n.add(r))}function dl(e,t,n){var r=0;t&&(r|=4),Nh(n,e,r,t)}var ta="_reactListening"+Math.random().toString(36).slice(2);function oo(e){if(!e[ta]){e[ta]=!0,Ff.forEach(function(n){n!=="selectionchange"&&(rg.has(n)||dl(n,!1,e),dl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ta]||(t[ta]=!0,dl("selectionchange",!1,t))}}function Nh(e,t,n,r){switch(uh(t)){case 1:var o=y0;break;case 4:o=v0;break;default:o=Mu}n=o.bind(null,t,n,e),o=void 0,!$l||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function fl(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var f=r.stateNode.containerInfo;if(f===o||f.nodeType===8&&f.parentNode===o)break;if(u===4)for(u=r.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===o||p.nodeType===8&&p.parentNode===o))return;u=u.return}for(;f!==null;){if(u=mr(f),u===null)return;if(p=u.tag,p===5||p===6){r=a=u;continue e}f=f.parentNode}}r=r.return}Yf(function(){var y=a,S=Au(n),C=[];e:{var N=Sh.get(e);if(N!==void 0){var K=Ou,G=e;switch(e){case"keypress":if(xa(n)===0)break e;case"keydown":case"keyup":K=F0;break;case"focusin":G="focus",K=ol;break;case"focusout":G="blur",K=ol;break;case"beforeblur":case"afterblur":K=ol;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=b0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=I0;break;case wh:case bh:case kh:K=S0;break;case jh:K=B0;break;case"scroll":K=x0;break;case"wheel":K=L0;break;case"copy":case"cut":case"paste":K=N0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=gd}var M=(t&4)!==0,ee=!M&&e==="scroll",k=M?N!==null?N+"Capture":null:N;M=[];for(var v=y,b;v!==null;){b=v;var L=b.stateNode;if(b.tag===5&&L!==null&&(b=L,k!==null&&(L=Ji(v,k),L!=null&&M.push(ao(v,L,b)))),ee)break;v=v.return}0<M.length&&(N=new K(N,G,null,n,S),C.push({event:N,listeners:M}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",N&&n!==zl&&(G=n.relatedTarget||n.fromElement)&&(mr(G)||G[Cn]))break e;if((K||N)&&(N=S.window===S?S:(N=S.ownerDocument)?N.defaultView||N.parentWindow:window,K?(G=n.relatedTarget||n.toElement,K=y,G=G?mr(G):null,G!==null&&(ee=Nr(G),G!==ee||G.tag!==5&&G.tag!==6)&&(G=null)):(K=null,G=y),K!==G)){if(M=pd,L="onMouseLeave",k="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(M=gd,L="onPointerLeave",k="onPointerEnter",v="pointer"),ee=K==null?N:Kr(K),b=G==null?N:Kr(G),N=new M(L,v+"leave",K,n,S),N.target=ee,N.relatedTarget=b,L=null,mr(S)===y&&(M=new M(k,v+"enter",G,n,S),M.target=b,M.relatedTarget=ee,L=M),ee=L,K&&G)t:{for(M=K,k=G,v=0,b=M;b;b=Ir(b))v++;for(b=0,L=k;L;L=Ir(L))b++;for(;0<v-b;)M=Ir(M),v--;for(;0<b-v;)k=Ir(k),b--;for(;v--;){if(M===k||k!==null&&M===k.alternate)break t;M=Ir(M),k=Ir(k)}M=null}else M=null;K!==null&&Ed(C,N,K,M,!1),G!==null&&ee!==null&&Ed(C,ee,G,M,!0)}}e:{if(N=y?Kr(y):window,K=N.nodeName&&N.nodeName.toLowerCase(),K==="select"||K==="input"&&N.type==="file")var I=q0;else if(xd(N))if(mh)I=X0;else{I=Y0;var H=G0}else(K=N.nodeName)&&K.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(I=Q0);if(I&&(I=I(e,y))){ph(C,I,n,S);break e}H&&H(e,N,y),e==="focusout"&&(H=N._wrapperState)&&H.controlled&&N.type==="number"&&Dl(N,"number",N.value)}switch(H=y?Kr(y):window,e){case"focusin":(xd(H)||H.contentEditable==="true")&&(Ur=H,Hl=y,Hi=null);break;case"focusout":Hi=Hl=Ur=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,Sd(C,n,S);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":Sd(C,n,S)}var $;if(zu)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Vr?fh(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(dh&&n.locale!=="ko"&&(Vr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Vr&&($=ch()):($n=S,Iu="value"in $n?$n.value:$n.textContent,Vr=!0)),H=Ia(y,O),0<H.length&&(O=new md(O,e,null,n,S),C.push({event:O,listeners:H}),$?O.data=$:($=hh(n),$!==null&&(O.data=$)))),($=V0?U0(e,n):W0(e,n))&&(y=Ia(y,"onBeforeInput"),0<y.length&&(S=new md("onBeforeInput","beforeinput",null,n,S),C.push({event:S,listeners:y}),S.data=$))}Ch(C,t)})}function ao(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ia(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Ji(e,n),a!=null&&r.unshift(ao(e,a,o)),a=Ji(e,t),a!=null&&r.push(ao(e,a,o))),e=e.return}return r}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ed(e,t,n,r,o){for(var a=t._reactName,u=[];n!==null&&n!==r;){var f=n,p=f.alternate,y=f.stateNode;if(p!==null&&p===r)break;f.tag===5&&y!==null&&(f=y,o?(p=Ji(n,a),p!=null&&u.unshift(ao(n,p,f))):o||(p=Ji(n,a),p!=null&&u.push(ao(n,p,f)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var ig=/\r\n?/g,og=/\u0000|\uFFFD/g;function Td(e){return(typeof e=="string"?e:""+e).replace(ig,`
`).replace(og,"")}function na(e,t,n){if(t=Td(t),Td(e)!==t&&n)throw Error(re(425))}function Oa(){}var Gl=null,Yl=null;function Ql(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xl=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,_d=typeof Promise=="function"?Promise:void 0,sg=typeof queueMicrotask=="function"?queueMicrotask:typeof _d<"u"?function(e){return _d.resolve(null).then(e).catch(lg)}:Xl;function lg(e){setTimeout(function(){throw e})}function hl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),no(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);no(t)}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),hn="__reactFiber$"+pi,so="__reactProps$"+pi,Cn="__reactContainer$"+pi,Zl="__reactEvents$"+pi,ug="__reactListeners$"+pi,cg="__reactHandles$"+pi;function mr(e){var t=e[hn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cn]||n[hn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pd(e);e!==null;){if(n=e[hn])return n;e=Pd(e)}return t}e=n,n=e.parentNode}return null}function vo(e){return e=e[hn]||e[Cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function os(e){return e[so]||null}var Jl=[],Hr=-1;function er(e){return{current:e}}function He(e){0>Hr||(e.current=Jl[Hr],Jl[Hr]=null,Hr--)}function Ve(e,t){Hr++,Jl[Hr]=e.current,e.current=t}var Zn={},St=er(Zn),Dt=er(!1),wr=Zn;function ai(e,t){var n=e.type.contextTypes;if(!n)return Zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mt(e){return e=e.childContextTypes,e!=null}function Ba(){He(Dt),He(St)}function Ad(e,t,n){if(St.current!==Zn)throw Error(re(168));Ve(St,t),Ve(Dt,n)}function Eh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(re(108,Gm(e)||"Unknown",o));return Ze({},n,r)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zn,wr=St.current,Ve(St,e),Ve(Dt,Dt.current),!0}function Rd(e,t,n){var r=e.stateNode;if(!r)throw Error(re(169));n?(e=Eh(e,t,wr),r.__reactInternalMemoizedMergedChildContext=e,He(Dt),He(St),Ve(St,e)):He(Dt),Ve(Dt,n)}var wn=null,as=!1,pl=!1;function Th(e){wn===null?wn=[e]:wn.push(e)}function dg(e){as=!0,Th(e)}function tr(){if(!pl&&wn!==null){pl=!0;var e=0,t=Oe;try{var n=wn;for(Oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wn=null,as=!1}catch(o){throw wn!==null&&(wn=wn.slice(e+1)),Jf(Ru,tr),o}finally{Oe=t,pl=!1}}return null}var qr=[],Gr=0,La=null,$a=0,Ht=[],qt=0,br=null,bn=1,kn="";function fr(e,t){qr[Gr++]=$a,qr[Gr++]=La,La=e,$a=t}function _h(e,t,n){Ht[qt++]=bn,Ht[qt++]=kn,Ht[qt++]=br,br=e;var r=bn;e=kn;var o=32-on(r)-1;r&=~(1<<o),n+=1;var a=32-on(t)+o;if(30<a){var u=o-o%5;a=(r&(1<<u)-1).toString(32),r>>=u,o-=u,bn=1<<32-on(t)+o|n<<o|r,kn=a+e}else bn=1<<a|n<<o|r,kn=e}function $u(e){e.return!==null&&(fr(e,1),_h(e,1,0))}function Vu(e){for(;e===La;)La=qr[--Gr],qr[Gr]=null,$a=qr[--Gr],qr[Gr]=null;for(;e===br;)br=Ht[--qt],Ht[qt]=null,kn=Ht[--qt],Ht[qt]=null,bn=Ht[--qt],Ht[qt]=null}var $t=null,Lt=null,Ge=!1,nn=null;function Ph(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$t=e,Lt=Hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$t=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=br!==null?{id:bn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$t=e,Lt=null,!0):!1;default:return!1}}function eu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tu(e){if(Ge){var t=Lt;if(t){var n=t;if(!Fd(e,t)){if(eu(e))throw Error(re(418));t=Hn(n.nextSibling);var r=$t;t&&Fd(e,t)?Ph(r,n):(e.flags=e.flags&-4097|2,Ge=!1,$t=e)}}else{if(eu(e))throw Error(re(418));e.flags=e.flags&-4097|2,Ge=!1,$t=e}}}function Dd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function ra(e){if(e!==$t)return!1;if(!Ge)return Dd(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ql(e.type,e.memoizedProps)),t&&(t=Lt)){if(eu(e))throw Ah(),Error(re(418));for(;t;)Ph(e,t),t=Hn(t.nextSibling)}if(Dd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=$t?Hn(e.stateNode.nextSibling):null;return!0}function Ah(){for(var e=Lt;e;)e=Hn(e.nextSibling)}function si(){Lt=$t=null,Ge=!1}function Uu(e){nn===null?nn=[e]:nn.push(e)}var fg=Tn.ReactCurrentBatchConfig;function Fi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var f=o.refs;u===null?delete f[a]:f[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function ia(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Md(e){var t=e._init;return t(e._payload)}function Rh(e){function t(k,v){if(e){var b=k.deletions;b===null?(k.deletions=[v],k.flags|=16):b.push(v)}}function n(k,v){if(!e)return null;for(;v!==null;)t(k,v),v=v.sibling;return null}function r(k,v){for(k=new Map;v!==null;)v.key!==null?k.set(v.key,v):k.set(v.index,v),v=v.sibling;return k}function o(k,v){return k=Qn(k,v),k.index=0,k.sibling=null,k}function a(k,v,b){return k.index=b,e?(b=k.alternate,b!==null?(b=b.index,b<v?(k.flags|=2,v):b):(k.flags|=2,v)):(k.flags|=1048576,v)}function u(k){return e&&k.alternate===null&&(k.flags|=2),k}function f(k,v,b,L){return v===null||v.tag!==6?(v=bl(b,k.mode,L),v.return=k,v):(v=o(v,b),v.return=k,v)}function p(k,v,b,L){var I=b.type;return I===$r?S(k,v,b.props.children,L,b.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===On&&Md(I)===v.type)?(L=o(v,b.props),L.ref=Fi(k,v,b),L.return=k,L):(L=Na(b.type,b.key,b.props,null,k.mode,L),L.ref=Fi(k,v,b),L.return=k,L)}function y(k,v,b,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=kl(b,k.mode,L),v.return=k,v):(v=o(v,b.children||[]),v.return=k,v)}function S(k,v,b,L,I){return v===null||v.tag!==7?(v=xr(b,k.mode,L,I),v.return=k,v):(v=o(v,b),v.return=k,v)}function C(k,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bl(""+v,k.mode,b),v.return=k,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qo:return b=Na(v.type,v.key,v.props,null,k.mode,b),b.ref=Fi(k,null,v),b.return=k,b;case Lr:return v=kl(v,k.mode,b),v.return=k,v;case On:var L=v._init;return C(k,L(v._payload),b)}if(zi(v)||Ti(v))return v=xr(v,k.mode,b,null),v.return=k,v;ia(k,v)}return null}function N(k,v,b,L){var I=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return I!==null?null:f(k,v,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:return b.key===I?p(k,v,b,L):null;case Lr:return b.key===I?y(k,v,b,L):null;case On:return I=b._init,N(k,v,I(b._payload),L)}if(zi(b)||Ti(b))return I!==null?null:S(k,v,b,L,null);ia(k,b)}return null}function K(k,v,b,L,I){if(typeof L=="string"&&L!==""||typeof L=="number")return k=k.get(b)||null,f(v,k,""+L,I);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case qo:return k=k.get(L.key===null?b:L.key)||null,p(v,k,L,I);case Lr:return k=k.get(L.key===null?b:L.key)||null,y(v,k,L,I);case On:var H=L._init;return K(k,v,b,H(L._payload),I)}if(zi(L)||Ti(L))return k=k.get(b)||null,S(v,k,L,I,null);ia(v,L)}return null}function G(k,v,b,L){for(var I=null,H=null,$=v,O=v=0,Q=null;$!==null&&O<b.length;O++){$.index>O?(Q=$,$=null):Q=$.sibling;var B=N(k,$,b[O],L);if(B===null){$===null&&($=Q);break}e&&$&&B.alternate===null&&t(k,$),v=a(B,v,O),H===null?I=B:H.sibling=B,H=B,$=Q}if(O===b.length)return n(k,$),Ge&&fr(k,O),I;if($===null){for(;O<b.length;O++)$=C(k,b[O],L),$!==null&&(v=a($,v,O),H===null?I=$:H.sibling=$,H=$);return Ge&&fr(k,O),I}for($=r(k,$);O<b.length;O++)Q=K($,k,O,b[O],L),Q!==null&&(e&&Q.alternate!==null&&$.delete(Q.key===null?O:Q.key),v=a(Q,v,O),H===null?I=Q:H.sibling=Q,H=Q);return e&&$.forEach(function(R){return t(k,R)}),Ge&&fr(k,O),I}function M(k,v,b,L){var I=Ti(b);if(typeof I!="function")throw Error(re(150));if(b=I.call(b),b==null)throw Error(re(151));for(var H=I=null,$=v,O=v=0,Q=null,B=b.next();$!==null&&!B.done;O++,B=b.next()){$.index>O?(Q=$,$=null):Q=$.sibling;var R=N(k,$,B.value,L);if(R===null){$===null&&($=Q);break}e&&$&&R.alternate===null&&t(k,$),v=a(R,v,O),H===null?I=R:H.sibling=R,H=R,$=Q}if(B.done)return n(k,$),Ge&&fr(k,O),I;if($===null){for(;!B.done;O++,B=b.next())B=C(k,B.value,L),B!==null&&(v=a(B,v,O),H===null?I=B:H.sibling=B,H=B);return Ge&&fr(k,O),I}for($=r(k,$);!B.done;O++,B=b.next())B=K($,k,O,B.value,L),B!==null&&(e&&B.alternate!==null&&$.delete(B.key===null?O:B.key),v=a(B,v,O),H===null?I=B:H.sibling=B,H=B);return e&&$.forEach(function(ie){return t(k,ie)}),Ge&&fr(k,O),I}function ee(k,v,b,L){if(typeof b=="object"&&b!==null&&b.type===$r&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:e:{for(var I=b.key,H=v;H!==null;){if(H.key===I){if(I=b.type,I===$r){if(H.tag===7){n(k,H.sibling),v=o(H,b.props.children),v.return=k,k=v;break e}}else if(H.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===On&&Md(I)===H.type){n(k,H.sibling),v=o(H,b.props),v.ref=Fi(k,H,b),v.return=k,k=v;break e}n(k,H);break}else t(k,H);H=H.sibling}b.type===$r?(v=xr(b.props.children,k.mode,L,b.key),v.return=k,k=v):(L=Na(b.type,b.key,b.props,null,k.mode,L),L.ref=Fi(k,v,b),L.return=k,k=L)}return u(k);case Lr:e:{for(H=b.key;v!==null;){if(v.key===H)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(k,v.sibling),v=o(v,b.children||[]),v.return=k,k=v;break e}else{n(k,v);break}else t(k,v);v=v.sibling}v=kl(b,k.mode,L),v.return=k,k=v}return u(k);case On:return H=b._init,ee(k,v,H(b._payload),L)}if(zi(b))return G(k,v,b,L);if(Ti(b))return M(k,v,b,L);ia(k,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(k,v.sibling),v=o(v,b),v.return=k,k=v):(n(k,v),v=bl(b,k.mode,L),v.return=k,k=v),u(k)):n(k,v)}return ee}var li=Rh(!0),Fh=Rh(!1),Va=er(null),Ua=null,Yr=null,Wu=null;function Ku(){Wu=Yr=Ua=null}function Hu(e){var t=Va.current;He(Va),e._currentValue=t}function nu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ni(e,t){Ua=e,Wu=Yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ft=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Wu!==e)if(e={context:e,memoizedValue:t,next:null},Yr===null){if(Ua===null)throw Error(re(308));Yr=e,Ua.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return t}var gr=null;function qu(e){gr===null?gr=[e]:gr.push(e)}function Dh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,qu(t)):(n.next=o.next,o.next=n),t.interleaved=n,Nn(e,r)}function Nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Gu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Nn(e,n)}return o=r.interleaved,o===null?(t.next=t,qu(r)):(t.next=o.next,o.next=t),r.interleaved=t,Nn(e,n)}function wa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fu(e,n)}}function Id(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wa(e,t,n,r){var o=e.updateQueue;Bn=!1;var a=o.firstBaseUpdate,u=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var p=f,y=p.next;p.next=null,u===null?a=y:u.next=y,u=p;var S=e.alternate;S!==null&&(S=S.updateQueue,f=S.lastBaseUpdate,f!==u&&(f===null?S.firstBaseUpdate=y:f.next=y,S.lastBaseUpdate=p))}if(a!==null){var C=o.baseState;u=0,S=y=p=null,f=a;do{var N=f.lane,K=f.eventTime;if((r&N)===N){S!==null&&(S=S.next={eventTime:K,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var G=e,M=f;switch(N=t,K=n,M.tag){case 1:if(G=M.payload,typeof G=="function"){C=G.call(K,C,N);break e}C=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=M.payload,N=typeof G=="function"?G.call(K,C,N):G,N==null)break e;C=Ze({},C,N);break e;case 2:Bn=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,N=o.effects,N===null?o.effects=[f]:N.push(f))}else K={eventTime:K,lane:N,tag:f.tag,payload:f.payload,callback:f.callback,next:null},S===null?(y=S=K,p=C):S=S.next=K,u|=N;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;N=f,f=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(!0);if(S===null&&(p=C),o.baseState=p,o.firstBaseUpdate=y,o.lastBaseUpdate=S,t=o.shared.interleaved,t!==null){o=t;do u|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);jr|=u,e.lanes=u,e.memoizedState=C}}function Od(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(re(191,o));o.call(r)}}}var xo={},mn=er(xo),lo=er(xo),uo=er(xo);function yr(e){if(e===xo)throw Error(re(174));return e}function Yu(e,t){switch(Ve(uo,t),Ve(lo,e),Ve(mn,xo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Il(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Il(t,e)}He(mn),Ve(mn,t)}function ui(){He(mn),He(lo),He(uo)}function Ih(e){yr(uo.current);var t=yr(mn.current),n=Il(t,e.type);t!==n&&(Ve(lo,e),Ve(mn,n))}function Qu(e){lo.current===e&&(He(mn),He(lo))}var Qe=er(0);function Ka(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ml=[];function Xu(){for(var e=0;e<ml.length;e++)ml[e]._workInProgressVersionPrimary=null;ml.length=0}var ba=Tn.ReactCurrentDispatcher,gl=Tn.ReactCurrentBatchConfig,kr=0,Xe=null,ot=null,ct=null,Ha=!1,qi=!1,co=0,hg=0;function bt(){throw Error(re(321))}function Zu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function Ju(e,t,n,r,o,a){if(kr=a,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ba.current=e===null||e.memoizedState===null?yg:vg,e=n(r,o),qi){a=0;do{if(qi=!1,co=0,25<=a)throw Error(re(301));a+=1,ct=ot=null,t.updateQueue=null,ba.current=xg,e=n(r,o)}while(qi)}if(ba.current=qa,t=ot!==null&&ot.next!==null,kr=0,ct=ot=Xe=null,Ha=!1,t)throw Error(re(300));return e}function ec(){var e=co!==0;return co=0,e}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Xe.memoizedState=ct=e:ct=ct.next=e,ct}function Zt(){if(ot===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=ct===null?Xe.memoizedState:ct.next;if(t!==null)ct=t,ot=e;else{if(e===null)throw Error(re(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ct===null?Xe.memoizedState=ct=e:ct=ct.next=e}return ct}function fo(e,t){return typeof t=="function"?t(e):t}function yl(e){var t=Zt(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var r=ot,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var u=o.next;o.next=a.next,a.next=u}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var f=u=null,p=null,y=a;do{var S=y.lane;if((kr&S)===S)p!==null&&(p=p.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var C={lane:S,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};p===null?(f=p=C,u=r):p=p.next=C,Xe.lanes|=S,jr|=S}y=y.next}while(y!==null&&y!==a);p===null?u=r:p.next=f,sn(r,t.memoizedState)||(Ft=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=p,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,Xe.lanes|=a,jr|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vl(e){var t=Zt(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var u=o=o.next;do a=e(a,u.action),u=u.next;while(u!==o);sn(a,t.memoizedState)||(Ft=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Oh(){}function Bh(e,t){var n=Xe,r=Zt(),o=t(),a=!sn(r.memoizedState,o);if(a&&(r.memoizedState=o,Ft=!0),r=r.queue,tc($h.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,ho(9,Lh.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(re(349));kr&30||zh(n,t,o)}return o}function zh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lh(e,t,n,r){t.value=n,t.getSnapshot=r,Vh(t)&&Uh(e)}function $h(e,t,n){return n(function(){Vh(t)&&Uh(e)})}function Vh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function Uh(e){var t=Nn(e,1);t!==null&&an(t,e,1,-1)}function Bd(e){var t=fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t.queue=e,e=e.dispatch=gg.bind(null,Xe,e),[t.memoizedState,e]}function ho(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Wh(){return Zt().memoizedState}function ka(e,t,n,r){var o=fn();Xe.flags|=e,o.memoizedState=ho(1|t,n,void 0,r===void 0?null:r)}function ss(e,t,n,r){var o=Zt();r=r===void 0?null:r;var a=void 0;if(ot!==null){var u=ot.memoizedState;if(a=u.destroy,r!==null&&Zu(r,u.deps)){o.memoizedState=ho(t,n,a,r);return}}Xe.flags|=e,o.memoizedState=ho(1|t,n,a,r)}function zd(e,t){return ka(8390656,8,e,t)}function tc(e,t){return ss(2048,8,e,t)}function Kh(e,t){return ss(4,2,e,t)}function Hh(e,t){return ss(4,4,e,t)}function qh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gh(e,t,n){return n=n!=null?n.concat([e]):null,ss(4,4,qh.bind(null,t,e),n)}function nc(){}function Yh(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qh(e,t){var n=Zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xh(e,t,n){return kr&21?(sn(n,t)||(n=nh(),Xe.lanes|=n,jr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ft=!0),e.memoizedState=n)}function pg(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var r=gl.transition;gl.transition={};try{e(!1),t()}finally{Oe=n,gl.transition=r}}function Zh(){return Zt().memoizedState}function mg(e,t,n){var r=Yn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jh(e))ep(t,n);else if(n=Dh(e,t,n,r),n!==null){var o=Tt();an(n,e,r,o),tp(n,t,r)}}function gg(e,t,n){var r=Yn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jh(e))ep(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,f=a(u,n);if(o.hasEagerState=!0,o.eagerState=f,sn(f,u)){var p=t.interleaved;p===null?(o.next=o,qu(t)):(o.next=p.next,p.next=o),t.interleaved=o;return}}catch{}finally{}n=Dh(e,t,o,r),n!==null&&(o=Tt(),an(n,e,r,o),tp(n,t,r))}}function Jh(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function ep(e,t){qi=Ha=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fu(e,n)}}var qa={readContext:Xt,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},yg={readContext:Xt,useCallback:function(e,t){return fn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:zd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ka(4194308,4,qh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var n=fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mg.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=fn();return e={current:e},t.memoizedState=e},useState:Bd,useDebugValue:nc,useDeferredValue:function(e){return fn().memoizedState=e},useTransition:function(){var e=Bd(!1),t=e[0];return e=pg.bind(null,e[1]),fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,o=fn();if(Ge){if(n===void 0)throw Error(re(407));n=n()}else{if(n=t(),dt===null)throw Error(re(349));kr&30||zh(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,zd($h.bind(null,r,a,e),[e]),r.flags|=2048,ho(9,Lh.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=fn(),t=dt.identifierPrefix;if(Ge){var n=kn,r=bn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=co++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vg={readContext:Xt,useCallback:Yh,useContext:Xt,useEffect:tc,useImperativeHandle:Gh,useInsertionEffect:Kh,useLayoutEffect:Hh,useMemo:Qh,useReducer:yl,useRef:Wh,useState:function(){return yl(fo)},useDebugValue:nc,useDeferredValue:function(e){var t=Zt();return Xh(t,ot.memoizedState,e)},useTransition:function(){var e=yl(fo)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:Oh,useSyncExternalStore:Bh,useId:Zh,unstable_isNewReconciler:!1},xg={readContext:Xt,useCallback:Yh,useContext:Xt,useEffect:tc,useImperativeHandle:Gh,useInsertionEffect:Kh,useLayoutEffect:Hh,useMemo:Qh,useReducer:vl,useRef:Wh,useState:function(){return vl(fo)},useDebugValue:nc,useDeferredValue:function(e){var t=Zt();return ot===null?t.memoizedState=e:Xh(t,ot.memoizedState,e)},useTransition:function(){var e=vl(fo)[0],t=Zt().memoizedState;return[e,t]},useMutableSource:Oh,useSyncExternalStore:Bh,useId:Zh,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ru(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ls={isMounted:function(e){return(e=e._reactInternals)?Nr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tt(),o=Yn(e),a=jn(r,o);a.payload=t,n!=null&&(a.callback=n),t=qn(e,a,o),t!==null&&(an(t,e,o,r),wa(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tt(),o=Yn(e),a=jn(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=qn(e,a,o),t!==null&&(an(t,e,o,r),wa(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),r=Yn(e),o=jn(n,r);o.tag=2,t!=null&&(o.callback=t),t=qn(e,o,r),t!==null&&(an(t,e,r,n),wa(t,e,r))}};function Ld(e,t,n,r,o,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,u):t.prototype&&t.prototype.isPureReactComponent?!io(n,r)||!io(o,a):!0}function np(e,t,n){var r=!1,o=Zn,a=t.contextType;return typeof a=="object"&&a!==null?a=Xt(a):(o=Mt(t)?wr:St.current,r=t.contextTypes,a=(r=r!=null)?ai(e,o):Zn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ls,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function $d(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ls.enqueueReplaceState(t,t.state,null)}function iu(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Gu(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=Xt(a):(a=Mt(t)?wr:St.current,o.context=ai(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ru(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ls.enqueueReplaceState(o,o.state,null),Wa(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do n+=qm(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function xl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ou(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wg=typeof WeakMap=="function"?WeakMap:Map;function rp(e,t,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ya||(Ya=!0,mu=r),ou(e,t)},n}function ip(e,t,n){n=jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ou(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ou(e,t),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Vd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wg;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Dg.bind(null,e,t,n),t.then(e,e))}function Ud(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jn(-1,1),t.tag=2,qn(n,t,1))),n.lanes|=1),e)}var bg=Tn.ReactCurrentOwner,Ft=!1;function Et(e,t,n,r){t.child=e===null?Fh(t,null,n,r):li(t,e.child,n,r)}function Kd(e,t,n,r,o){n=n.render;var a=t.ref;return ni(t,o),r=Ju(e,t,n,r,a,o),n=ec(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(Ge&&n&&$u(t),t.flags|=1,Et(e,t,r,o),t.child)}function Hd(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!cc(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,op(e,t,a,r,o)):(e=Na(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:io,n(u,r)&&e.ref===t.ref)return En(e,t,o)}return t.flags|=1,e=Qn(a,r),e.ref=t.ref,e.return=t,t.child=e}function op(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(io(a,r)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(Ft=!0);else return t.lanes=e.lanes,En(e,t,o)}return au(e,t,n,r,o)}function ap(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Xr,zt),zt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(Xr,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ve(Xr,zt),zt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ve(Xr,zt),zt|=r;return Et(e,t,o,n),t.child}function sp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function au(e,t,n,r,o){var a=Mt(n)?wr:St.current;return a=ai(t,a),ni(t,o),n=Ju(e,t,n,r,a,o),r=ec(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,En(e,t,o)):(Ge&&r&&$u(t),t.flags|=1,Et(e,t,n,o),t.child)}function qd(e,t,n,r,o){if(Mt(n)){var a=!0;za(t)}else a=!1;if(ni(t,o),t.stateNode===null)ja(e,t),np(t,n,r),iu(t,n,r,o),r=!0;else if(e===null){var u=t.stateNode,f=t.memoizedProps;u.props=f;var p=u.context,y=n.contextType;typeof y=="object"&&y!==null?y=Xt(y):(y=Mt(n)?wr:St.current,y=ai(t,y));var S=n.getDerivedStateFromProps,C=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function";C||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==r||p!==y)&&$d(t,u,r,y),Bn=!1;var N=t.memoizedState;u.state=N,Wa(t,r,u,o),p=t.memoizedState,f!==r||N!==p||Dt.current||Bn?(typeof S=="function"&&(ru(t,n,S,r),p=t.memoizedState),(f=Bn||Ld(t,n,f,r,N,p,y))?(C||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=p),u.props=r,u.state=p,u.context=y,r=f):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Mh(e,t),f=t.memoizedProps,y=t.type===t.elementType?f:en(t.type,f),u.props=y,C=t.pendingProps,N=u.context,p=n.contextType,typeof p=="object"&&p!==null?p=Xt(p):(p=Mt(n)?wr:St.current,p=ai(t,p));var K=n.getDerivedStateFromProps;(S=typeof K=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==C||N!==p)&&$d(t,u,r,p),Bn=!1,N=t.memoizedState,u.state=N,Wa(t,r,u,o);var G=t.memoizedState;f!==C||N!==G||Dt.current||Bn?(typeof K=="function"&&(ru(t,n,K,r),G=t.memoizedState),(y=Bn||Ld(t,n,y,r,N,G,p)||!1)?(S||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,G,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,G,p)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=G),u.props=r,u.state=G,u.context=p,r=y):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return su(e,t,n,r,a,o)}function su(e,t,n,r,o,a){sp(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return o&&Rd(t,n,!1),En(e,t,a);r=t.stateNode,bg.current=t;var f=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=li(t,e.child,null,a),t.child=li(t,null,f,a)):Et(e,t,f,a),t.memoizedState=r.state,o&&Rd(t,n,!0),t.child}function lp(e){var t=e.stateNode;t.pendingContext?Ad(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ad(e,t.context,!1),Yu(e,t.containerInfo)}function Gd(e,t,n,r,o){return si(),Uu(o),t.flags|=256,Et(e,t,n,r),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function up(e,t,n){var r=t.pendingProps,o=Qe.current,a=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(o&2)!==0),f?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ve(Qe,o&1),e===null)return tu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,a?(r=t.mode,a=t.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=ds(u,r,0,null),e=xr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=uu(n),t.memoizedState=lu,e):rc(t,u));if(o=e.memoizedState,o!==null&&(f=o.dehydrated,f!==null))return kg(e,t,u,r,f,o,n);if(a){a=r.fallback,u=t.mode,o=e.child,f=o.sibling;var p={mode:"hidden",children:r.children};return!(u&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=p,t.deletions=null):(r=Qn(o,p),r.subtreeFlags=o.subtreeFlags&14680064),f!==null?a=Qn(f,a):(a=xr(a,u,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,u=e.child.memoizedState,u=u===null?uu(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=lu,r}return a=e.child,e=a.sibling,r=Qn(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rc(e,t){return t=ds({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oa(e,t,n,r){return r!==null&&Uu(r),li(t,e.child,null,n),e=rc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kg(e,t,n,r,o,a,u){if(n)return t.flags&256?(t.flags&=-257,r=xl(Error(re(422))),oa(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=ds({mode:"visible",children:r.children},o,0,null),a=xr(a,o,u,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&li(t,e.child,null,u),t.child.memoizedState=uu(u),t.memoizedState=lu,a);if(!(t.mode&1))return oa(e,t,u,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var f=r.dgst;return r=f,a=Error(re(419)),r=xl(a,r,void 0),oa(e,t,u,r)}if(f=(u&e.childLanes)!==0,Ft||f){if(r=dt,r!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|u)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Nn(e,o),an(r,e,o,-1))}return uc(),r=xl(Error(re(421))),oa(e,t,u,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Mg.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,Lt=Hn(o.nextSibling),$t=t,Ge=!0,nn=null,e!==null&&(Ht[qt++]=bn,Ht[qt++]=kn,Ht[qt++]=br,bn=e.id,kn=e.overflow,br=t),t=rc(t,r.children),t.flags|=4096,t)}function Yd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nu(e.return,t,n)}function wl(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function cp(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Et(e,t,r.children,n),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yd(e,n,t);else if(e.tag===19)Yd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ve(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Ka(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),wl(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ka(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}wl(t,!0,n,null,a);break;case"together":wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function En(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,n=Qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jg(e,t,n){switch(t.tag){case 3:lp(t),si();break;case 5:Ih(t);break;case 1:Mt(t.type)&&za(t);break;case 4:Yu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ve(Va,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?up(e,t,n):(Ve(Qe,Qe.current&1),e=En(e,t,n),e!==null?e.sibling:null);Ve(Qe,Qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return cp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ve(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,ap(e,t,n)}return En(e,t,n)}var dp,cu,fp,hp;dp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cu=function(){};fp=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,yr(mn.current);var a=null;switch(n){case"input":o=Rl(e,o),r=Rl(e,r),a=[];break;case"select":o=Ze({},o,{value:void 0}),r=Ze({},r,{value:void 0}),a=[];break;case"textarea":o=Ml(e,o),r=Ml(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Oa)}Ol(n,r);var u;n=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var f=o[y];for(u in f)f.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Xi.hasOwnProperty(y)?a||(a=[]):(a=a||[]).push(y,null));for(y in r){var p=r[y];if(f=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&p!==f&&(p!=null||f!=null))if(y==="style")if(f){for(u in f)!f.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in p)p.hasOwnProperty(u)&&f[u]!==p[u]&&(n||(n={}),n[u]=p[u])}else n||(a||(a=[]),a.push(y,n)),n=p;else y==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(a=a||[]).push(y,p)):y==="children"?typeof p!="string"&&typeof p!="number"||(a=a||[]).push(y,""+p):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Xi.hasOwnProperty(y)?(p!=null&&y==="onScroll"&&Ke("scroll",e),a||f===p||(a=[])):(a=a||[]).push(y,p))}n&&(a=a||[]).push("style",n);var y=a;(t.updateQueue=y)&&(t.flags|=4)}};hp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Di(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Sg(e,t,n){var r=t.pendingProps;switch(Vu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return Mt(t.type)&&Ba(),kt(t),null;case 3:return r=t.stateNode,ui(),He(Dt),He(St),Xu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(vu(nn),nn=null))),cu(e,t),kt(t),null;case 5:Qu(t);var o=yr(uo.current);if(n=t.type,e!==null&&t.stateNode!=null)fp(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(re(166));return kt(t),null}if(e=yr(mn.current),ra(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hn]=t,r[so]=a,e=(t.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(o=0;o<$i.length;o++)Ke($i[o],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":id(r,a),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ke("invalid",r);break;case"textarea":ad(r,a),Ke("invalid",r)}Ol(n,a),o=null;for(var u in a)if(a.hasOwnProperty(u)){var f=a[u];u==="children"?typeof f=="string"?r.textContent!==f&&(a.suppressHydrationWarning!==!0&&na(r.textContent,f,e),o=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(a.suppressHydrationWarning!==!0&&na(r.textContent,f,e),o=["children",""+f]):Xi.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&Ke("scroll",r)}switch(n){case"input":Go(r),od(r,a,!0);break;case"textarea":Go(r),sd(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Oa)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$f(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hn]=t,e[so]=r,dp(e,t,!1,!1),t.stateNode=e;e:{switch(u=Bl(n,r),n){case"dialog":Ke("cancel",e),Ke("close",e),o=r;break;case"iframe":case"object":case"embed":Ke("load",e),o=r;break;case"video":case"audio":for(o=0;o<$i.length;o++)Ke($i[o],e);o=r;break;case"source":Ke("error",e),o=r;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),o=r;break;case"details":Ke("toggle",e),o=r;break;case"input":id(e,r),o=Rl(e,r),Ke("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ze({},r,{value:void 0}),Ke("invalid",e);break;case"textarea":ad(e,r),o=Ml(e,r),Ke("invalid",e);break;default:o=r}Ol(n,o),f=o;for(a in f)if(f.hasOwnProperty(a)){var p=f[a];a==="style"?Wf(e,p):a==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Vf(e,p)):a==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&Zi(e,p):typeof p=="number"&&Zi(e,""+p):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Xi.hasOwnProperty(a)?p!=null&&a==="onScroll"&&Ke("scroll",e):p!=null&&Eu(e,a,p,u))}switch(n){case"input":Go(e),od(e,r,!1);break;case"textarea":Go(e),sd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xn(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Zr(e,!!r.multiple,a,!1):r.defaultValue!=null&&Zr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Oa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)hp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(re(166));if(n=yr(uo.current),yr(mn.current),ra(t)){if(r=t.stateNode,n=t.memoizedProps,r[hn]=t,(a=r.nodeValue!==n)&&(e=$t,e!==null))switch(e.tag){case 3:na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&na(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=t,t.stateNode=r}return kt(t),null;case 13:if(He(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Lt!==null&&t.mode&1&&!(t.flags&128))Ah(),si(),t.flags|=98560,a=!1;else if(a=ra(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(re(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(re(317));a[hn]=t}else si(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),a=!1}else nn!==null&&(vu(nn),nn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?at===0&&(at=3):uc())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return ui(),cu(e,t),e===null&&oo(t.stateNode.containerInfo),kt(t),null;case 10:return Hu(t.type._context),kt(t),null;case 17:return Mt(t.type)&&Ba(),kt(t),null;case 19:if(He(Qe),a=t.memoizedState,a===null)return kt(t),null;if(r=(t.flags&128)!==0,u=a.rendering,u===null)if(r)Di(a,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Ka(e),u!==null){for(t.flags|=128,Di(a,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ve(Qe,Qe.current&1|2),t.child}e=e.sibling}a.tail!==null&&rt()>di&&(t.flags|=128,r=!0,Di(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ka(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Di(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Ge)return kt(t),null}else 2*rt()-a.renderingStartTime>di&&n!==1073741824&&(t.flags|=128,r=!0,Di(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(n=a.last,n!==null?n.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=rt(),t.sibling=null,n=Qe.current,Ve(Qe,r?n&1|2:n&1),t):(kt(t),null);case 22:case 23:return lc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function Cg(e,t){switch(Vu(t),t.tag){case 1:return Mt(t.type)&&Ba(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ui(),He(Dt),He(St),Xu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qu(t),null;case 13:if(He(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));si()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Qe),null;case 4:return ui(),null;case 10:return Hu(t.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var aa=!1,jt=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Qr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function du(e,t,n){try{n()}catch(r){et(e,t,r)}}var Qd=!1;function Eg(e,t){if(Gl=Da,e=vh(),Lu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var u=0,f=-1,p=-1,y=0,S=0,C=e,N=null;t:for(;;){for(var K;C!==n||o!==0&&C.nodeType!==3||(f=u+o),C!==a||r!==0&&C.nodeType!==3||(p=u+r),C.nodeType===3&&(u+=C.nodeValue.length),(K=C.firstChild)!==null;)N=C,C=K;for(;;){if(C===e)break t;if(N===n&&++y===o&&(f=u),N===a&&++S===r&&(p=u),(K=C.nextSibling)!==null)break;C=N,N=C.parentNode}C=K}n=f===-1||p===-1?null:{start:f,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yl={focusedElem:e,selectionRange:n},Da=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var G=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var M=G.memoizedProps,ee=G.memoizedState,k=t.stateNode,v=k.getSnapshotBeforeUpdate(t.elementType===t.type?M:en(t.type,M),ee);k.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(L){et(t,t.return,L)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return G=Qd,Qd=!1,G}function Gi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&du(t,n,a)}o=o.next}while(o!==r)}}function us(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pp(e){var t=e.alternate;t!==null&&(e.alternate=null,pp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hn],delete t[so],delete t[Zl],delete t[ug],delete t[cg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mp(e){return e.tag===5||e.tag===3||e.tag===4}function Xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Oa));else if(r!==4&&(e=e.child,e!==null))for(hu(e,t,n),e=e.sibling;e!==null;)hu(e,t,n),e=e.sibling}function pu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pu(e,t,n),e=e.sibling;e!==null;)pu(e,t,n),e=e.sibling}var pt=null,tn=!1;function In(e,t,n){for(n=n.child;n!==null;)gp(e,t,n),n=n.sibling}function gp(e,t,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ts,n)}catch{}switch(n.tag){case 5:jt||Qr(n,t);case 6:var r=pt,o=tn;pt=null,In(e,t,n),pt=r,tn=o,pt!==null&&(tn?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(tn?(e=pt,n=n.stateNode,e.nodeType===8?hl(e.parentNode,n):e.nodeType===1&&hl(e,n),no(e)):hl(pt,n.stateNode));break;case 4:r=pt,o=tn,pt=n.stateNode.containerInfo,tn=!0,In(e,t,n),pt=r,tn=o;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&du(n,t,u),o=o.next}while(o!==r)}In(e,t,n);break;case 1:if(!jt&&(Qr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){et(n,t,f)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,In(e,t,n),jt=r):In(e,t,n);break;default:In(e,t,n)}}function Zd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ng),t.forEach(function(r){var o=Ig.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,u=t,f=u;e:for(;f!==null;){switch(f.tag){case 5:pt=f.stateNode,tn=!1;break e;case 3:pt=f.stateNode.containerInfo,tn=!0;break e;case 4:pt=f.stateNode.containerInfo,tn=!0;break e}f=f.return}if(pt===null)throw Error(re(160));gp(a,u,o),pt=null,tn=!1;var p=o.alternate;p!==null&&(p.return=null),o.return=null}catch(y){et(o,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yp(t,e),t=t.sibling}function yp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),cn(e),r&4){try{Gi(3,e,e.return),us(3,e)}catch(M){et(e,e.return,M)}try{Gi(5,e,e.return)}catch(M){et(e,e.return,M)}}break;case 1:Jt(t,e),cn(e),r&512&&n!==null&&Qr(n,n.return);break;case 5:if(Jt(t,e),cn(e),r&512&&n!==null&&Qr(n,n.return),e.flags&32){var o=e.stateNode;try{Zi(o,"")}catch(M){et(e,e.return,M)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,u=n!==null?n.memoizedProps:a,f=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{f==="input"&&a.type==="radio"&&a.name!=null&&zf(o,a),Bl(f,u);var y=Bl(f,a);for(u=0;u<p.length;u+=2){var S=p[u],C=p[u+1];S==="style"?Wf(o,C):S==="dangerouslySetInnerHTML"?Vf(o,C):S==="children"?Zi(o,C):Eu(o,S,C,y)}switch(f){case"input":Fl(o,a);break;case"textarea":Lf(o,a);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var K=a.value;K!=null?Zr(o,!!a.multiple,K,!1):N!==!!a.multiple&&(a.defaultValue!=null?Zr(o,!!a.multiple,a.defaultValue,!0):Zr(o,!!a.multiple,a.multiple?[]:"",!1))}o[so]=a}catch(M){et(e,e.return,M)}}break;case 6:if(Jt(t,e),cn(e),r&4){if(e.stateNode===null)throw Error(re(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(M){et(e,e.return,M)}}break;case 3:if(Jt(t,e),cn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{no(t.containerInfo)}catch(M){et(e,e.return,M)}break;case 4:Jt(t,e),cn(e);break;case 13:Jt(t,e),cn(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(ac=rt())),r&4&&Zd(e);break;case 22:if(S=n!==null&&n.memoizedState!==null,e.mode&1?(jt=(y=jt)||S,Jt(t,e),jt=y):Jt(t,e),cn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!S&&e.mode&1)for(ve=e,S=e.child;S!==null;){for(C=ve=S;ve!==null;){switch(N=ve,K=N.child,N.tag){case 0:case 11:case 14:case 15:Gi(4,N,N.return);break;case 1:Qr(N,N.return);var G=N.stateNode;if(typeof G.componentWillUnmount=="function"){r=N,n=N.return;try{t=r,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(M){et(r,n,M)}}break;case 5:Qr(N,N.return);break;case 22:if(N.memoizedState!==null){ef(C);continue}}K!==null?(K.return=N,ve=K):ef(C)}S=S.sibling}e:for(S=null,C=e;;){if(C.tag===5){if(S===null){S=C;try{o=C.stateNode,y?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(f=C.stateNode,p=C.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=Uf("display",u))}catch(M){et(e,e.return,M)}}}else if(C.tag===6){if(S===null)try{C.stateNode.nodeValue=y?"":C.memoizedProps}catch(M){et(e,e.return,M)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;S===C&&(S=null),C=C.return}S===C&&(S=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Jt(t,e),cn(e),r&4&&Zd(e);break;case 21:break;default:Jt(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mp(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Zi(o,""),r.flags&=-33);var a=Xd(e);pu(e,a,o);break;case 3:case 4:var u=r.stateNode.containerInfo,f=Xd(e);hu(e,f,u);break;default:throw Error(re(161))}}catch(p){et(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tg(e,t,n){ve=e,vp(e)}function vp(e,t,n){for(var r=(e.mode&1)!==0;ve!==null;){var o=ve,a=o.child;if(o.tag===22&&r){var u=o.memoizedState!==null||aa;if(!u){var f=o.alternate,p=f!==null&&f.memoizedState!==null||jt;f=aa;var y=jt;if(aa=u,(jt=p)&&!y)for(ve=o;ve!==null;)u=ve,p=u.child,u.tag===22&&u.memoizedState!==null?tf(o):p!==null?(p.return=u,ve=p):tf(o);for(;a!==null;)ve=a,vp(a),a=a.sibling;ve=o,aa=f,jt=y}Jd(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,ve=a):Jd(e)}}function Jd(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jt||us(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!jt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Od(t,a,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Od(t,u,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var S=y.memoizedState;if(S!==null){var C=S.dehydrated;C!==null&&no(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}jt||t.flags&512&&fu(t)}catch(N){et(t,t.return,N)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function ef(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function tf(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{us(4,t)}catch(p){et(t,n,p)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(p){et(t,o,p)}}var a=t.return;try{fu(t)}catch(p){et(t,a,p)}break;case 5:var u=t.return;try{fu(t)}catch(p){et(t,u,p)}}}catch(p){et(t,t.return,p)}if(t===e){ve=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ve=f;break}ve=t.return}}var _g=Math.ceil,Ga=Tn.ReactCurrentDispatcher,ic=Tn.ReactCurrentOwner,Yt=Tn.ReactCurrentBatchConfig,Re=0,dt=null,it=null,gt=0,zt=0,Xr=er(0),at=0,po=null,jr=0,cs=0,oc=0,Yi=null,Rt=null,ac=0,di=1/0,xn=null,Ya=!1,mu=null,Gn=null,sa=!1,Vn=null,Qa=0,Qi=0,gu=null,Sa=-1,Ca=0;function Tt(){return Re&6?rt():Sa!==-1?Sa:Sa=rt()}function Yn(e){return e.mode&1?Re&2&&gt!==0?gt&-gt:fg.transition!==null?(Ca===0&&(Ca=nh()),Ca):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:uh(e.type)),e):1}function an(e,t,n,r){if(50<Qi)throw Qi=0,gu=null,Error(re(185));go(e,n,r),(!(Re&2)||e!==dt)&&(e===dt&&(!(Re&2)&&(cs|=n),at===4&&Ln(e,gt)),It(e,r),n===1&&Re===0&&!(t.mode&1)&&(di=rt()+500,as&&tr()))}function It(e,t){var n=e.callbackNode;f0(e,t);var r=Fa(e,e===dt?gt:0);if(r===0)n!==null&&cd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cd(n),t===1)e.tag===0?dg(nf.bind(null,e)):Th(nf.bind(null,e)),sg(function(){!(Re&6)&&tr()}),n=null;else{switch(rh(r)){case 1:n=Ru;break;case 4:n=eh;break;case 16:n=Ra;break;case 536870912:n=th;break;default:n=Ra}n=Np(n,xp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xp(e,t){if(Sa=-1,Ca=0,Re&6)throw Error(re(327));var n=e.callbackNode;if(ri()&&e.callbackNode!==n)return null;var r=Fa(e,e===dt?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xa(e,r);else{t=r;var o=Re;Re|=2;var a=bp();(dt!==e||gt!==t)&&(xn=null,di=rt()+500,vr(e,t));do try{Rg();break}catch(f){wp(e,f)}while(!0);Ku(),Ga.current=a,Re=o,it!==null?t=0:(dt=null,gt=0,t=at)}if(t!==0){if(t===2&&(o=Ul(e),o!==0&&(r=o,t=yu(e,o))),t===1)throw n=po,vr(e,0),Ln(e,r),It(e,rt()),n;if(t===6)Ln(e,r);else{if(o=e.current.alternate,!(r&30)&&!Pg(o)&&(t=Xa(e,r),t===2&&(a=Ul(e),a!==0&&(r=a,t=yu(e,a))),t===1))throw n=po,vr(e,0),Ln(e,r),It(e,rt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(re(345));case 2:hr(e,Rt,xn);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=ac+500-rt(),10<t)){if(Fa(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Tt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Xl(hr.bind(null,e,Rt,xn),t);break}hr(e,Rt,xn);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var u=31-on(r);a=1<<u,u=t[u],u>o&&(o=u),r&=~a}if(r=o,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_g(r/1960))-r,10<r){e.timeoutHandle=Xl(hr.bind(null,e,Rt,xn),r);break}hr(e,Rt,xn);break;case 5:hr(e,Rt,xn);break;default:throw Error(re(329))}}}return It(e,rt()),e.callbackNode===n?xp.bind(null,e):null}function yu(e,t){var n=Yi;return e.current.memoizedState.isDehydrated&&(vr(e,t).flags|=256),e=Xa(e,t),e!==2&&(t=Rt,Rt=n,t!==null&&vu(t)),e}function vu(e){Rt===null?Rt=e:Rt.push.apply(Rt,e)}function Pg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sn(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~oc,t&=~cs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function nf(e){if(Re&6)throw Error(re(327));ri();var t=Fa(e,0);if(!(t&1))return It(e,rt()),null;var n=Xa(e,t);if(e.tag!==0&&n===2){var r=Ul(e);r!==0&&(t=r,n=yu(e,r))}if(n===1)throw n=po,vr(e,0),Ln(e,t),It(e,rt()),n;if(n===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hr(e,Rt,xn),It(e,rt()),null}function sc(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(di=rt()+500,as&&tr())}}function Sr(e){Vn!==null&&Vn.tag===0&&!(Re&6)&&ri();var t=Re;Re|=1;var n=Yt.transition,r=Oe;try{if(Yt.transition=null,Oe=1,e)return e()}finally{Oe=r,Yt.transition=n,Re=t,!(Re&6)&&tr()}}function lc(){zt=Xr.current,He(Xr)}function vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ag(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Vu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ba();break;case 3:ui(),He(Dt),He(St),Xu();break;case 5:Qu(r);break;case 4:ui();break;case 13:He(Qe);break;case 19:He(Qe);break;case 10:Hu(r.type._context);break;case 22:case 23:lc()}n=n.return}if(dt=e,it=e=Qn(e.current,null),gt=zt=t,at=0,po=null,oc=cs=jr=0,Rt=Yi=null,gr!==null){for(t=0;t<gr.length;t++)if(n=gr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=o,r.next=u}n.pending=r}gr=null}return e}function wp(e,t){do{var n=it;try{if(Ku(),ba.current=qa,Ha){for(var r=Xe.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ha=!1}if(kr=0,ct=ot=Xe=null,qi=!1,co=0,ic.current=null,n===null||n.return===null){at=1,po=t,it=null;break}e:{var a=e,u=n.return,f=n,p=t;if(t=gt,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var y=p,S=f,C=S.tag;if(!(S.mode&1)&&(C===0||C===11||C===15)){var N=S.alternate;N?(S.updateQueue=N.updateQueue,S.memoizedState=N.memoizedState,S.lanes=N.lanes):(S.updateQueue=null,S.memoizedState=null)}var K=Ud(u);if(K!==null){K.flags&=-257,Wd(K,u,f,a,t),K.mode&1&&Vd(a,y,t),t=K,p=y;var G=t.updateQueue;if(G===null){var M=new Set;M.add(p),t.updateQueue=M}else G.add(p);break e}else{if(!(t&1)){Vd(a,y,t),uc();break e}p=Error(re(426))}}else if(Ge&&f.mode&1){var ee=Ud(u);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),Wd(ee,u,f,a,t),Uu(ci(p,f));break e}}a=p=ci(p,f),at!==4&&(at=2),Yi===null?Yi=[a]:Yi.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var k=rp(a,p,t);Id(a,k);break e;case 1:f=p;var v=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Gn===null||!Gn.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var L=ip(a,f,t);Id(a,L);break e}}a=a.return}while(a!==null)}jp(n)}catch(I){t=I,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function bp(){var e=Ga.current;return Ga.current=qa,e===null?qa:e}function uc(){(at===0||at===3||at===2)&&(at=4),dt===null||!(jr&268435455)&&!(cs&268435455)||Ln(dt,gt)}function Xa(e,t){var n=Re;Re|=2;var r=bp();(dt!==e||gt!==t)&&(xn=null,vr(e,t));do try{Ag();break}catch(o){wp(e,o)}while(!0);if(Ku(),Re=n,Ga.current=r,it!==null)throw Error(re(261));return dt=null,gt=0,at}function Ag(){for(;it!==null;)kp(it)}function Rg(){for(;it!==null&&!r0();)kp(it)}function kp(e){var t=Cp(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?jp(e):it=t,ic.current=null}function jp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Cg(n,t),n!==null){n.flags&=32767,it=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,it=null;return}}else if(n=Sg(n,t,zt),n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);at===0&&(at=5)}function hr(e,t,n){var r=Oe,o=Yt.transition;try{Yt.transition=null,Oe=1,Fg(e,t,n,r)}finally{Yt.transition=o,Oe=r}return null}function Fg(e,t,n,r){do ri();while(Vn!==null);if(Re&6)throw Error(re(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(h0(e,a),e===dt&&(it=dt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,Np(Ra,function(){return ri(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Yt.transition,Yt.transition=null;var u=Oe;Oe=1;var f=Re;Re|=4,ic.current=null,Eg(e,n),yp(n,e),J0(Yl),Da=!!Gl,Yl=Gl=null,e.current=n,Tg(n),i0(),Re=f,Oe=u,Yt.transition=a}else e.current=n;if(sa&&(sa=!1,Vn=e,Qa=o),a=e.pendingLanes,a===0&&(Gn=null),s0(n.stateNode),It(e,rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ya)throw Ya=!1,e=mu,mu=null,e;return Qa&1&&e.tag!==0&&ri(),a=e.pendingLanes,a&1?e===gu?Qi++:(Qi=0,gu=e):Qi=0,tr(),null}function ri(){if(Vn!==null){var e=rh(Qa),t=Yt.transition,n=Oe;try{if(Yt.transition=null,Oe=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,Qa=0,Re&6)throw Error(re(331));var o=Re;for(Re|=4,ve=e.current;ve!==null;){var a=ve,u=a.child;if(ve.flags&16){var f=a.deletions;if(f!==null){for(var p=0;p<f.length;p++){var y=f[p];for(ve=y;ve!==null;){var S=ve;switch(S.tag){case 0:case 11:case 15:Gi(8,S,a)}var C=S.child;if(C!==null)C.return=S,ve=C;else for(;ve!==null;){S=ve;var N=S.sibling,K=S.return;if(pp(S),S===y){ve=null;break}if(N!==null){N.return=K,ve=N;break}ve=K}}}var G=a.alternate;if(G!==null){var M=G.child;if(M!==null){G.child=null;do{var ee=M.sibling;M.sibling=null,M=ee}while(M!==null)}}ve=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,ve=u;else e:for(;ve!==null;){if(a=ve,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gi(9,a,a.return)}var k=a.sibling;if(k!==null){k.return=a.return,ve=k;break e}ve=a.return}}var v=e.current;for(ve=v;ve!==null;){u=ve;var b=u.child;if(u.subtreeFlags&2064&&b!==null)b.return=u,ve=b;else e:for(u=v;ve!==null;){if(f=ve,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:us(9,f)}}catch(I){et(f,f.return,I)}if(f===u){ve=null;break e}var L=f.sibling;if(L!==null){L.return=f.return,ve=L;break e}ve=f.return}}if(Re=o,tr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ts,e)}catch{}r=!0}return r}finally{Oe=n,Yt.transition=t}}return!1}function rf(e,t,n){t=ci(n,t),t=rp(e,t,1),e=qn(e,t,1),t=Tt(),e!==null&&(go(e,1,t),It(e,t))}function et(e,t,n){if(e.tag===3)rf(e,e,n);else for(;t!==null;){if(t.tag===3){rf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){e=ci(n,e),e=ip(t,e,1),t=qn(t,e,1),e=Tt(),t!==null&&(go(t,1,e),It(t,e));break}}t=t.return}}function Dg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(gt&n)===n&&(at===4||at===3&&(gt&130023424)===gt&&500>rt()-ac?vr(e,0):oc|=n),It(e,t)}function Sp(e,t){t===0&&(e.mode&1?(t=Xo,Xo<<=1,!(Xo&130023424)&&(Xo=4194304)):t=1);var n=Tt();e=Nn(e,t),e!==null&&(go(e,t,n),It(e,n))}function Mg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sp(e,n)}function Ig(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(t),Sp(e,n)}var Cp;Cp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)Ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ft=!1,jg(e,t,n);Ft=!!(e.flags&131072)}else Ft=!1,Ge&&t.flags&1048576&&_h(t,$a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ja(e,t),e=t.pendingProps;var o=ai(t,St.current);ni(t,n),o=Ju(null,t,r,e,o,n);var a=ec();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(a=!0,za(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Gu(t),o.updater=ls,t.stateNode=o,o._reactInternals=t,iu(t,r,e,n),t=su(null,t,r,!0,a,n)):(t.tag=0,Ge&&a&&$u(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Bg(r),e=en(r,e),o){case 0:t=au(null,t,r,e,n);break e;case 1:t=qd(null,t,r,e,n);break e;case 11:t=Kd(null,t,r,e,n);break e;case 14:t=Hd(null,t,r,en(r.type,e),n);break e}throw Error(re(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),au(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),qd(e,t,r,o,n);case 3:e:{if(lp(t),e===null)throw Error(re(387));r=t.pendingProps,a=t.memoizedState,o=a.element,Mh(e,t),Wa(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=ci(Error(re(423)),t),t=Gd(e,t,r,n,o);break e}else if(r!==o){o=ci(Error(re(424)),t),t=Gd(e,t,r,n,o);break e}else for(Lt=Hn(t.stateNode.containerInfo.firstChild),$t=t,Ge=!0,nn=null,n=Fh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(si(),r===o){t=En(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return Ih(t),e===null&&tu(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,u=o.children,Ql(r,o)?u=null:a!==null&&Ql(r,a)&&(t.flags|=32),sp(e,t),Et(e,t,u,n),t.child;case 6:return e===null&&tu(t),null;case 13:return up(e,t,n);case 4:return Yu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=li(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),Kd(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,u=o.value,Ve(Va,r._currentValue),r._currentValue=u,a!==null)if(sn(a.value,u)){if(a.children===o.children&&!Dt.current){t=En(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var f=a.dependencies;if(f!==null){u=a.child;for(var p=f.firstContext;p!==null;){if(p.context===r){if(a.tag===1){p=jn(-1,n&-n),p.tag=2;var y=a.updateQueue;if(y!==null){y=y.shared;var S=y.pending;S===null?p.next=p:(p.next=S.next,S.next=p),y.pending=p}}a.lanes|=n,p=a.alternate,p!==null&&(p.lanes|=n),nu(a.return,n,t),f.lanes|=n;break}p=p.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(re(341));u.lanes|=n,f=u.alternate,f!==null&&(f.lanes|=n),nu(u,n,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ni(t,n),o=Xt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=en(r,t.pendingProps),o=en(r.type,o),Hd(e,t,r,o,n);case 15:return op(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),ja(e,t),t.tag=1,Mt(r)?(e=!0,za(t)):e=!1,ni(t,n),np(t,r,o),iu(t,r,o,n),su(null,t,r,!0,e,n);case 19:return cp(e,t,n);case 22:return ap(e,t,n)}throw Error(re(156,t.tag))};function Np(e,t){return Jf(e,t)}function Og(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new Og(e,t,n,r)}function cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bg(e){if(typeof e=="function")return cc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_u)return 11;if(e===Pu)return 14}return 2}function Qn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Na(e,t,n,r,o,a){var u=2;if(r=e,typeof e=="function")cc(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case $r:return xr(n.children,o,a,t);case Tu:u=8,o|=8;break;case Tl:return e=Gt(12,n,t,o|2),e.elementType=Tl,e.lanes=a,e;case _l:return e=Gt(13,n,t,o),e.elementType=_l,e.lanes=a,e;case Pl:return e=Gt(19,n,t,o),e.elementType=Pl,e.lanes=a,e;case If:return ds(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Df:u=10;break e;case Mf:u=9;break e;case _u:u=11;break e;case Pu:u=14;break e;case On:u=16,r=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=Gt(u,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function xr(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function ds(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=If,e.lanes=n,e.stateNode={isHidden:!1},e}function bl(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function kl(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function dc(e,t,n,r,o,a,u,f,p){return e=new zg(e,t,n,f,p),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Gt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gu(a),e}function Lg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ep(e){if(!e)return Zn;e=e._reactInternals;e:{if(Nr(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var n=e.type;if(Mt(n))return Eh(e,n,t)}return t}function Tp(e,t,n,r,o,a,u,f,p){return e=dc(n,r,!0,e,o,a,u,f,p),e.context=Ep(null),n=e.current,r=Tt(),o=Yn(n),a=jn(r,o),a.callback=t??null,qn(n,a,o),e.current.lanes=o,go(e,o,r),It(e,r),e}function fs(e,t,n,r){var o=t.current,a=Tt(),u=Yn(o);return n=Ep(n),t.context===null?t.context=n:t.pendingContext=n,t=jn(a,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qn(o,t,u),e!==null&&(an(e,o,u,a),wa(e,o,u)),u}function Za(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function of(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fc(e,t){of(e,t),(e=e.alternate)&&of(e,t)}function $g(){return null}var _p=typeof reportError=="function"?reportError:function(e){console.error(e)};function hc(e){this._internalRoot=e}hs.prototype.render=hc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));fs(e,t,null,null)};hs.prototype.unmount=hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sr(function(){fs(null,e,null,null)}),t[Cn]=null}};function hs(e){this._internalRoot=e}hs.prototype.unstable_scheduleHydration=function(e){if(e){var t=ah();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zn.length&&t!==0&&t<zn[n].priority;n++);zn.splice(n,0,e),n===0&&lh(e)}};function pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ps(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function af(){}function Vg(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var y=Za(u);a.call(y)}}var u=Tp(t,r,e,0,null,!1,!1,"",af);return e._reactRootContainer=u,e[Cn]=u.current,oo(e.nodeType===8?e.parentNode:e),Sr(),u}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var f=r;r=function(){var y=Za(p);f.call(y)}}var p=dc(e,0,!1,null,null,!1,!1,"",af);return e._reactRootContainer=p,e[Cn]=p.current,oo(e.nodeType===8?e.parentNode:e),Sr(function(){fs(t,p,n,r)}),p}function ms(e,t,n,r,o){var a=n._reactRootContainer;if(a){var u=a;if(typeof o=="function"){var f=o;o=function(){var p=Za(u);f.call(p)}}fs(t,u,e,o)}else u=Vg(n,t,e,o,r);return Za(u)}ih=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Li(t.pendingLanes);n!==0&&(Fu(t,n|1),It(t,rt()),!(Re&6)&&(di=rt()+500,tr()))}break;case 13:Sr(function(){var r=Nn(e,1);if(r!==null){var o=Tt();an(r,e,1,o)}}),fc(e,1)}};Du=function(e){if(e.tag===13){var t=Nn(e,134217728);if(t!==null){var n=Tt();an(t,e,134217728,n)}fc(e,134217728)}};oh=function(e){if(e.tag===13){var t=Yn(e),n=Nn(e,t);if(n!==null){var r=Tt();an(n,e,t,r)}fc(e,t)}};ah=function(){return Oe};sh=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}};Ll=function(e,t,n){switch(t){case"input":if(Fl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=os(r);if(!o)throw Error(re(90));Bf(r),Fl(r,o)}}}break;case"textarea":Lf(e,n);break;case"select":t=n.value,t!=null&&Zr(e,!!n.multiple,t,!1)}};qf=sc;Gf=Sr;var Ug={usingClientEntryPoint:!1,Events:[vo,Kr,os,Kf,Hf,sc]},Mi={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wg={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xf(e),e===null?null:e.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||$g,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{ts=la.inject(Wg),pn=la}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ug;Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(t))throw Error(re(200));return Lg(e,t,null,n)};Ut.createRoot=function(e,t){if(!pc(e))throw Error(re(299));var n=!1,r="",o=_p;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=dc(e,1,!1,null,null,n,!1,r,o),e[Cn]=t.current,oo(e.nodeType===8?e.parentNode:e),new hc(t)};Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=Xf(t),e=e===null?null:e.stateNode,e};Ut.flushSync=function(e){return Sr(e)};Ut.hydrate=function(e,t,n){if(!ps(t))throw Error(re(200));return ms(null,e,t,!0,n)};Ut.hydrateRoot=function(e,t,n){if(!pc(e))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",u=_p;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=Tp(t,null,e,1,n??null,o,!1,a,u),e[Cn]=t.current,oo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new hs(t)};Ut.render=function(e,t,n){if(!ps(t))throw Error(re(200));return ms(null,e,t,!1,n)};Ut.unmountComponentAtNode=function(e){if(!ps(e))throw Error(re(40));return e._reactRootContainer?(Sr(function(){ms(null,null,e,!1,function(){e._reactRootContainer=null,e[Cn]=null})}),!0):!1};Ut.unstable_batchedUpdates=sc;Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ps(n))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return ms(e,t,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function Pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pp)}catch(e){console.error(e)}}Pp(),Pf.exports=Ut;var Kg=Pf.exports,Ap,sf=Kg;Ap=sf.createRoot,sf.hydrateRoot;function Hg({userProgress:e,currentProfile:t,onStartBrushing:n,onViewCollection:r,onViewSettings:o,onSwitchProfile:a}){return l.jsxs("div",{className:"flex flex-col items-center justify-between h-full p-6 text-center",children:[l.jsxs("div",{className:"w-full flex justify-between items-center",children:[l.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-purple-800/50 hover:bg-purple-700/50 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:t.avatarColor},children:t.name.charAt(0).toUpperCase()}),l.jsx("span",{className:"text-white font-medium",children:t.name}),l.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]}),l.jsx("button",{onClick:o,className:"p-2 text-2xl text-purple-300 hover:text-white transition-colors","aria-label":"Settings",children:""})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[l.jsx("div",{className:"animate-bounce-gentle",children:l.jsx("div",{className:"text-8xl mb-4",children:""})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-500 bg-clip-text text-transparent",children:"Sparkle Brush!"}),l.jsx("p",{className:"text-xl text-purple-200 max-w-xs",children:"Make your teeth sparkle and catch amazing creatures!"}),l.jsxs("div",{className:"flex gap-4 mt-4 text-lg",children:[l.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),l.jsx("div",{className:"text-sm text-purple-300",children:"Day Streak"})]}),l.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.capturedCreatures.length}),l.jsx("div",{className:"text-sm text-purple-300",children:"Creatures"})]}),l.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[l.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.totalSessions}),l.jsx("div",{className:"text-sm text-purple-300",children:"Sessions"})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs pb-8",children:[l.jsx("button",{onClick:n,className:"w-full py-5 px-8 text-2xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg animate-button-glow active:scale-95 transition-transform",children:"Start Brushing! "}),l.jsx("button",{onClick:r,className:"w-full py-3 px-6 text-lg font-semibold text-purple-200 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"My Collection "})]})]})}const Rp=j.createContext(null);function qg({children:e}){const t=j.useRef(null),n=j.useRef(null),r=j.useRef(null),o=j.useRef(!1),a=j.useRef(null),[u,f]=j.useState(null),[p,y]=j.useState(!1),[S,C]=j.useState(null),N=j.useCallback(v=>{const b=v||t.current,L=r.current;if(console.log("[CameraContext] attachStreamToVideo called:",{hasVideo:!!b,hasStream:!!L,videoId:b==null?void 0:b.id,streamActive:L==null?void 0:L.active,streamTracks:L==null?void 0:L.getTracks().map(I=>({kind:I.kind,enabled:I.enabled,readyState:I.readyState})),isSameAsLastAttached:b===a.current}),!b||!L)return console.warn("[CameraContext] Video or stream not available"),!1;if(b.srcObject===L&&b===a.current)return console.log("[CameraContext] Stream already attached to this video element"),b.readyState>=2&&!b.paused&&y(!0),!0;try{console.log("[CameraContext] Attaching stream to video element..."),b.srcObject=L,a.current=b;const I=()=>{console.log("[CameraContext] Video can play, attempting to play..."),b.play().then(()=>{console.log("[CameraContext] Video playing successfully"),y(!0)}).catch(H=>{console.error("[CameraContext] Error playing video:",H)})};return b.oncanplay=I,b.onloadeddata=I,b.readyState>=3?I():b.load(),b.onerror=()=>{console.error("[CameraContext] Video element error"),C("Video element error")},!0}catch(I){return console.error("[CameraContext] Error attaching stream:",I),!1}},[]),K=j.useCallback(async()=>{if(o.current){console.log("startCamera already in progress, skipping...");return}if(r.current&&p){console.log("Camera already running and ready");return}if(r.current&&t.current){console.log("Stream exists, reattaching..."),N();return}if(r.current&&!t.current){console.log("Stream exists but no video element, waiting...");return}o.current=!0;try{C(null),y(!1),console.log("Requesting camera access...");const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("Camera access granted, tracks:",v.getVideoTracks().length),r.current=v,f(v),setTimeout(()=>{N(),o.current=!1},100)}catch(v){o.current=!1;let b="Failed to access camera";v instanceof Error&&(v.name==="NotAllowedError"?b="Camera permission denied. Please allow camera access.":v.name==="NotFoundError"?b="No camera found on this device.":v.name==="NotReadableError"?b="Camera is being used by another app.":b=v.message),C(b),console.error("Camera error:",v)}},[p,N]);j.useEffect(()=>{var v;console.log("[CameraContext] Stream/video effect:",{hasStream:!!u,hasVideoRef:!!t.current,videoSrcObject:!!((v=t.current)!=null&&v.srcObject),isReady:p}),!(!u||!t.current)&&(t.current.srcObject||(console.log("[CameraContext] Effect: video element needs stream attached"),N()))},[u,N,p]),j.useEffect(()=>{if(!u||p)return;const v=t.current;if(!v)return;const b=()=>v.readyState>=2&&v.videoWidth>0&&!v.paused?(console.log("Polling detected video is ready"),y(!0),!0):!1;if(b())return;const L=setInterval(()=>{b()&&clearInterval(L)},200),I=setTimeout(()=>{clearInterval(L)},5e3);return()=>{clearInterval(L),clearTimeout(I)}},[u,p]);const G=j.useCallback(()=>{console.log("Stopping camera..."),o.current=!1,r.current&&(r.current.getTracks().forEach(v=>{v.stop()}),r.current=null),f(null),y(!1),t.current&&(t.current.srcObject=null)},[]),M=j.useCallback(v=>{console.log("[CameraContext] registerVideoElement called:",{hasVideo:!!v,hasStream:!!r.current,isDifferentElement:v!==a.current}),v&&(t.current=v,r.current&&v!==a.current&&(console.log("[CameraContext] New video element detected, re-attaching stream..."),y(!1),N(v)))},[N]),ee=j.useCallback(()=>{if(!t.current)return null;const v=t.current;if(v.videoWidth===0||v.videoHeight===0)return null;n.current||(n.current=document.createElement("canvas"));const b=n.current;b.width=v.videoWidth,b.height=v.videoHeight;const L=b.getContext("2d");return L?(L.drawImage(v,0,0),b.toDataURL("image/jpeg",.8)):null},[]),k=j.useCallback(async v=>{if(!t.current)return null;const b=t.current;if(b.videoWidth===0||b.videoHeight===0)return null;const L=document.createElement("canvas");L.width=b.videoWidth,L.height=b.videoHeight;const I=L.getContext("2d");if(!I)return null;if(I.save(),I.translate(L.width,0),I.scale(-1,1),I.drawImage(b,0,0),I.restore(),v&&v.imageUrl)try{const H=new Image;H.crossOrigin="anonymous",await new Promise((q,J)=>{H.onload=()=>q(),H.onerror=J,H.src=v.imageUrl});const $=b.videoWidth,O=b.videoHeight,{containerWidth:Q,containerHeight:B,facePosition:R}=v,ie=Q/$,Z=B/O;let ce,de,ue;if(R&&Q>0&&B>0){const q=50/ie,J=Q*.25/ie,oe=R.width;ce=Math.max(q,Math.min(J,oe*.5)),de=$/2;const Se=R.y,je=ce*.55;ue=Math.max(5/Z,Se-je)}else ce=$*.2,de=$/2,ue=O*.1;const he=ce*(H.height/H.width);I.drawImage(H,de-ce/2,ue,ce,he)}catch(H){console.error("Failed to load hat image for capture:",H)}return L.toDataURL("image/jpeg",.8)},[]);return j.useEffect(()=>()=>{r.current&&r.current.getTracks().forEach(v=>v.stop())},[]),l.jsx(Rp.Provider,{value:{videoRef:t,stream:u,isReady:p,error:S,startCamera:K,stopCamera:G,captureFrame:ee,captureFrameWithHat:k,registerVideoElement:M},children:e})}function gs(){const e=j.useContext(Rp);if(!e)throw new Error("useSharedCamera must be used within a CameraProvider");return e}function Gg({onConfirm:e,onCancel:t}){const{isReady:n,error:r,startCamera:o,stopCamera:a,registerVideoElement:u}=gs(),[f,p]=j.useState(!1),[y,S]=j.useState(!1),C=j.useRef(!1),N=j.useRef(null),K=j.useCallback(k=>{console.log("[CameraCheck] Video ref callback:",{hasElement:!!k}),N.current=k,k&&u(k)},[u]);j.useEffect(()=>{C.current||(C.current=!0,o())},[o]),j.useEffect(()=>{const k=setTimeout(()=>{p(!0)},3e3);return()=>clearTimeout(k)},[]),j.useEffect(()=>{const k=()=>{const b=N.current;b&&b.videoWidth>0&&b.videoHeight>0&&!b.paused&&S(!0)},v=setInterval(k,200);return k(),()=>clearInterval(v)},[]);const G=()=>{a(),t()},M=()=>{C.current=!1,a(),setTimeout(()=>{C.current=!0,o()},500)},ee=n||y;return l.jsxs("div",{className:"flex flex-col h-full p-6",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Camera Check! "}),l.jsx("p",{className:"text-purple-200",children:"Make sure you can see yourself below"})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-purple-900/50 rounded-2xl overflow-hidden mb-4",children:[l.jsx("video",{ref:K,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),!ee&&!r&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-purple-900/80",children:[l.jsx("div",{className:"text-4xl mb-4 animate-bounce-gentle",children:""}),l.jsx("div",{className:"text-lg text-purple-200 animate-pulse",children:"Starting camera..."}),l.jsx("div",{className:"text-sm text-purple-300 mt-2",children:"Please allow camera access when prompted"})]}),r&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/80 p-4",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("div",{className:"text-lg font-bold text-white mb-2",children:"Camera Error"}),l.jsx("div",{className:"text-sm text-red-200 text-center mb-4",children:r}),l.jsxs("div",{className:"text-xs text-red-300 text-center",children:["Please check that:",l.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[l.jsx("li",{children:"Camera permissions are enabled"}),l.jsx("li",{children:"No other app is using the camera"}),l.jsx("li",{children:"Your browser supports camera access"})]})]})]}),ee&&l.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:l.jsxs("div",{className:"bg-green-600/90 rounded-full px-4 py-2 text-sm text-white flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Camera is working!"]})})]}),ee&&l.jsx("div",{className:"text-center text-purple-200 text-sm mb-4",children:"Can you see yourself? "})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[ee&&l.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Yes, I can see myself! "}),f&&!ee&&!r&&l.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Continue Anyway "}),r&&l.jsx("button",{onClick:M,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Try Again "}),l.jsx("button",{onClick:G,className:"w-full py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"Go Back"})]})]})}const dn="/vibe-brushing/",ii=[{id:"crown",name:"Royal Crown",imageUrl:`${dn}creatures/hat-crown.png`,unlockCondition:"starter"},{id:"party",name:"Party Hat",imageUrl:`${dn}creatures/hat-party.png`,unlockCondition:"starter"},{id:"wizard",name:"Wizard Hat",imageUrl:`${dn}creatures/hat-wizard.png`,unlockCondition:"sessions",unlockThreshold:10},{id:"cowboy",name:"Cowboy Hat",imageUrl:`${dn}creatures/hat-cowboy.png`,unlockCondition:"sessions",unlockThreshold:25},{id:"chef",name:"Chef Hat",imageUrl:`${dn}creatures/hat-chef.png`,unlockCondition:"sessions",unlockThreshold:50},{id:"astronaut",name:"Space Helmet",imageUrl:`${dn}creatures/hat-astronaut.png`,unlockCondition:"sessions",unlockThreshold:100},{id:"pirate",name:"Pirate Hat",imageUrl:`${dn}creatures/hat-pirate.png`,unlockCondition:"streak",unlockThreshold:7},{id:"princess",name:"Princess Tiara",imageUrl:`${dn}creatures/hat-princess.png`,unlockCondition:"streak",unlockThreshold:30},{id:"unicorn-horn",name:"Unicorn Horn",imageUrl:`${dn}creatures/hat-unicorn-horn.png`,unlockCondition:"creature",unlockThreshold:5},{id:"dragon-horns",name:"Dragon Horns",imageUrl:`${dn}creatures/hat-dragon-horns.png`,unlockCondition:"creature",unlockThreshold:10}];function Yg(e,t,n){return ii.filter(r=>{switch(r.unlockCondition){case"starter":return!0;case"sessions":return e>=(r.unlockThreshold||0);case"streak":return t>=(r.unlockThreshold||0);case"creature":return n>=(r.unlockThreshold||0);default:return!1}})}function Fp({hatId:e,size:t}){const n=ii.find(r=>r.id===e);return n?l.jsx("img",{src:n.imageUrl,alt:n.name,width:t,height:t,style:{objectFit:"contain",imageRendering:"auto"}}):null}function Qg({userProgress:e,onSelect:t,onBack:n}){const r=Yg(e.totalSessions,e.currentStreak,e.capturedCreatures.length),o=new Set(r.map(a=>a.id));return l.jsxs("div",{className:"flex flex-col h-full p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("button",{onClick:n,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),l.jsx("h1",{className:"text-xl font-bold",children:"Choose Your Hat!"}),l.jsx("div",{className:"w-16"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[l.jsxs("button",{onClick:()=>t(null),className:"aspect-square bg-purple-800/30 rounded-2xl flex flex-col items-center justify-center border-2 border-dashed border-purple-500/50 active:scale-95 transition-transform",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-xs text-purple-300",children:"No Hat"})]}),ii.map(a=>{const u=o.has(a.id);return l.jsxs("button",{onClick:()=>u&&t(a),disabled:!u,className:`aspect-square rounded-2xl flex flex-col items-center justify-center transition-all p-2 ${u?"bg-purple-800/50 active:scale-95":"bg-purple-900/30 opacity-50 cursor-not-allowed"}`,children:[l.jsx("div",{className:`flex-1 flex items-center justify-center w-full ${u?"":"grayscale"}`,children:u?l.jsx(Fp,{hatId:a.id,size:60}):l.jsx("span",{className:"text-4xl",children:""})}),l.jsx("div",{className:"text-xs text-center px-1 truncate w-full mt-1",children:u?a.name:Xg(a)})]},a.id)})]})}),l.jsx("button",{onClick:()=>t(null),className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Start Without Hat"})]})}function Xg(e){switch(e.unlockCondition){case"sessions":return`${e.unlockThreshold} sessions`;case"streak":return`${e.unlockThreshold} day streak`;case"creature":return`${e.unlockThreshold} creatures`;default:return"Locked"}}const Dp={id:"faceZone",label:"Face",x:.3,y:.25,w:.4,h:.5},Ii=[Dp];class Zg{constructor(){Nt(this,"canvas");Nt(this,"ctx");Nt(this,"previousFrame",null);Nt(this,"pixelThreshold",20);Nt(this,"motionThresholdPercent",2.5);Nt(this,"frameCount",0);Nt(this,"debugMode",!1);Nt(this,"lastDebugInfo",null);Nt(this,"smoothedFaceCenter",null);Nt(this,"smoothingFactor",.15);this.canvas=document.createElement("canvas");const t=this.canvas.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Could not get canvas context");this.ctx=t}getZonesForFace(t,n,r){if(!t||n===0||r===0)return[Dp];const o=t.x/n,a=t.y/r,u=t.width/n,f=t.height/r,p={x:o,y:a+f*.5,w:u,h:f};this.smoothedFaceCenter?this.smoothedFaceCenter={x:this.smoothedFaceCenter.x+(p.x-this.smoothedFaceCenter.x)*this.smoothingFactor,y:this.smoothedFaceCenter.y+(p.y-this.smoothedFaceCenter.y)*this.smoothingFactor,w:this.smoothedFaceCenter.w+(p.w-this.smoothedFaceCenter.w)*this.smoothingFactor,h:this.smoothedFaceCenter.h+(p.h-this.smoothedFaceCenter.h)*this.smoothingFactor}:this.smoothedFaceCenter=p;const y=this.smoothedFaceCenter,S=Math.max(.3,Math.min(.5,y.w*1.4)),C=Math.max(.35,Math.min(.55,y.h*1.2)),N=y.x-S/2,K=y.y-C/2,G=(k,v,b)=>Math.max(v,Math.min(b,k)),M=G(N,.02,1-S-.02),ee=G(K,.05,1-C-.05);return[{id:"faceZone",label:"Face",x:M,y:ee,w:S,h:C}]}setDebugMode(t){this.debugMode=t}getDebugInfo(){return this.lastDebugInfo}getCurrentZones(t,n,r){return this.getZonesForFace(t,n,r)}getFaceRegionNormalized(t,n,r){if(!t)return null;const o=.25,a=(t.x-t.width/2)/(n/o),u=t.y/(r/o),f=t.width/(n/o),p=t.height/(r/o);return{x:a,y:u,w:f,h:p}}isInFaceCore(t,n,r,o,a){const u=this.getFaceRegionNormalized(r,o,a);if(!u)return!1;const f=u.x+u.w*.15,p=u.y+u.h*.1,y=u.w*.7,S=u.h*.5;return t>=f&&t<=f+y&&n>=p&&n<=p+S}isInBrushingRegion(t,n,r,o,a){const u=this.getFaceRegionNormalized(r,o,a);if(!u)return n>.2;const f=u.x-u.w*1,p=u.y-u.h*.1,y=u.w*3,S=u.h*2.5;return t>=f&&t<=f+y&&n>=p&&n<=p+S}getBrushingRegion(t,n,r){const a=n*.25,u=r*.25,f=this.getFaceRegionNormalized(t,a,u);if(!f)return{x:0,y:.2*r,width:n,height:.8*r};const p=f.x-f.w*1,y=f.y-f.h*.1,S=f.w*3,C=f.h*2.5;return{x:Math.max(0,p*n),y:Math.max(0,y*r),width:Math.min(S*n,n),height:Math.min(C*r,r)}}detectMotion(t,n=null){this.frameCount++;const r=this.getZonesForFace(n,t.videoWidth,t.videoHeight);if(!t.videoWidth||!t.videoHeight)return r.map(N=>({zoneId:N.id,motionLevel:0,hasMotion:!1}));const o=.25,a=Math.floor(t.videoWidth*o),u=Math.floor(t.videoHeight*o);(this.canvas.width!==a||this.canvas.height!==u)&&(this.canvas.width=a,this.canvas.height=u,this.previousFrame=null);try{this.ctx.drawImage(t,0,0,a,u)}catch(N){return console.error("[MotionDetector] Failed to draw video frame:",N),r.map(K=>({zoneId:K.id,motionLevel:0,hasMotion:!1}))}const f=this.ctx.getImageData(0,0,a,u);if(!this.previousFrame)return this.previousFrame=f,r.map(N=>({zoneId:N.id,motionLevel:0,hasMotion:!1}));let p=0,y=!1;const S=[],C=r.map(N=>{const K=Math.floor(N.x*a),G=Math.floor(N.y*u),M=Math.floor(N.w*a),ee=Math.floor(N.h*u);let k=0,v=0;for(let I=G;I<G+ee&&I<u;I++)for(let H=K;H<K+M&&H<a;H++){const $=H/a,O=I/u;if(this.isInFaceCore($,O,n,a,u)||!this.isInBrushingRegion($,O,n,a,u))continue;const Q=(I*a+H)*4,B=Math.abs(f.data[Q]-this.previousFrame.data[Q]),R=Math.abs(f.data[Q+1]-this.previousFrame.data[Q+1]),ie=Math.abs(f.data[Q+2]-this.previousFrame.data[Q+2]),Z=(B+R+ie)/3;Z>this.pixelThreshold&&(k++,p+=Z),v++}const b=v>0?k/v*100:0,L=b>this.motionThresholdPercent;return L&&(y=!0),this.debugMode&&S.push({id:N.id,bounds:{x:N.x,y:N.y,width:N.w,height:N.h},motionLevel:Math.min(b*2,100),hasMotion:L,motionPixels:k,totalPixels:v}),{zoneId:N.id,motionLevel:Math.min(b*2,100),hasMotion:L}});if(this.debugMode){const N=this.getBrushingRegion(n,a/.25,u/.25);this.lastDebugInfo={faceRegion:n,brushingRegion:N,zones:S,frameMotionTotal:p,handMotionDetected:y}}if(this.previousFrame=f,this.frameCount%20===0){const N=C.filter(K=>K.hasMotion).length;console.log("[MotionDetector] Frame",this.frameCount,"- Active zones:",N,"- Hand motion:",y,"- Total motion:",p.toFixed(0))}return C}reset(){this.previousFrame=null,this.frameCount=0,this.smoothedFaceCenter=null}}function Mp(e={}){const{targetCleaningTime:t=20,detectionInterval:n=100,decayRate:r=.4,debugMode:o=!1}=e,a=j.useRef(null),u=j.useRef(null),f=j.useRef(null),p=j.useRef({}),y=j.useRef({}),S=j.useRef(null),C=j.useRef(o),[N,K]=j.useState(()=>Ii.map(B=>({zoneId:B.id,cleaningProgress:0,isComplete:!1}))),[G,M]=j.useState(()=>Ii.map(B=>({zoneId:B.id,motionLevel:0,hasMotion:!1}))),ee=j.useCallback(B=>{S.current=B},[]),k=j.useCallback(B=>{C.current=B,a.current&&a.current.setDebugMode(B)},[]),v=j.useCallback(()=>{var B;return((B=a.current)==null?void 0:B.getDebugInfo())??null},[]),b=j.useCallback(()=>{const B=Ii.map(R=>{const Z=(p.current[R.id]||0)/t*100,ce=Math.min(Z,100);return{zoneId:R.id,cleaningProgress:ce,isComplete:ce>=100}});K(B)},[t]),L=j.useCallback(()=>{if(!a.current||!u.current)return;const B=u.current;if(B.paused&&B.srcObject&&B.play().catch(()=>{}),B.readyState<2||B.videoWidth===0)return;const R=a.current.detectMotion(B,S.current);M(R),R.forEach(ie=>{const Z=p.current[ie.zoneId]||0;if(ie.hasMotion){y.current[ie.zoneId]=0;const ce=n/1e3*(ie.motionLevel/60);p.current[ie.zoneId]=Z+ce}else{const ce=(y.current[ie.zoneId]||0)+1;if(y.current[ie.zoneId]=ce,ce>5){const de=n/1e3*r;p.current[ie.zoneId]=Math.max(0,Z-de)}}}),b()},[n,b,r]),I=j.useCallback(B=>{console.log("[MotionDetection] startDetection called:",{videoReadyState:B.readyState,videoWidth:B.videoWidth,videoHeight:B.videoHeight,srcObject:!!B.srcObject,paused:B.paused}),B.paused&&(console.log("[MotionDetection] Video is paused, attempting to play..."),B.play().then(()=>{console.log("[MotionDetection] Video now playing")}).catch(R=>{console.error("[MotionDetection] Failed to play video:",R)})),a.current||(a.current=new Zg),a.current.setDebugMode(C.current),u.current=B,f.current&&clearInterval(f.current),f.current=window.setInterval(L,n),console.log("[MotionDetection] Detection interval started")},[L,n]),H=j.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null)},[]),$=j.useCallback(()=>{var B;p.current={},y.current={},(B=a.current)==null||B.reset(),K(Ii.map(R=>({zoneId:R.id,cleaningProgress:0,isComplete:!1}))),M(Ii.map(R=>({zoneId:R.id,motionLevel:0,hasMotion:!1})))},[]);j.useEffect(()=>()=>{f.current&&clearInterval(f.current)},[]);const O=N.reduce((B,R)=>B+R.cleaningProgress,0)/N.length,Q=N.every(B=>B.isComplete);return{zoneProgress:N,motionResults:G,overallProgress:O,isComplete:Q,startDetection:I,stopDetection:H,reset:$,setFaceRegion:ee,setDebugMode:k,getDebugInfo:v}}const Jg="modulepreload",ey=function(e){return"/vibe-brushing/"+e},lf={},uf=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=ey(p),p in lf)return;lf[p]=!0;const y=p.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const C=document.createElement("link");if(C.rel=y?"stylesheet":Jg,y||(C.as="script"),C.crossOrigin="",C.href=p,f&&C.setAttribute("nonce",f),document.head.appendChild(C),y)return new Promise((N,K)=>{C.addEventListener("load",N),C.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return t().catch(a)})};function Ip(){const[e,t]=j.useState(null),[n,r]=j.useState(!1),[o,a]=j.useState(!0),u=j.useRef(null),f=j.useRef(null),p=j.useRef(null),y=j.useRef("fallback"),S=j.useRef(null),C=j.useRef(null),N=j.useRef(null),K=j.useRef(null),G=j.useRef(!1),M=j.useRef(!1),ee=j.useRef(null),k=j.useCallback(async()=>{if(ee.current)return ee.current;const $=async()=>{if(r(!0),console.log("[FaceTracking] Initializing detector..."),"FaceDetector"in window&&window.FaceDetector)try{const O=new window.FaceDetector({maxDetectedFaces:1,fastMode:!0});return await O.detect(document.createElement("video")),f.current=O,y.current="native",r(!1),console.log("[FaceTracking] Using native FaceDetector API"),!0}catch(O){console.warn("[FaceTracking] Native FaceDetector not available:",O)}try{console.log("[FaceTracking] Loading TensorFlow.js...");const O=await uf(()=>import("./index-D76M5LjM.js"),__vite__mapDeps([0,1]));await O.ready();try{await O.setBackend("webgl"),console.log("[FaceTracking] Using WebGL backend")}catch{console.log("[FaceTracking] WebGL failed, trying CPU backend"),await O.setBackend("cpu")}console.log("[FaceTracking] Loading face detection model...");const Q=await uf(()=>import("./face-landmarks-detection.esm-8WZU6KHf.js"),__vite__mapDeps([2,1])),B=Q.SupportedModels.MediaPipeFaceMesh,R=await Q.createDetector(B,{runtime:"tfjs",refineLandmarks:!1,maxFaces:1});return p.current=R,y.current="tfjs",r(!1),console.log("[FaceTracking] Using TensorFlow.js FaceMesh"),!0}catch(O){return console.warn("[FaceTracking] TensorFlow.js face tracking failed:",O),y.current="fallback",r(!1),a(!1),console.log("[FaceTracking] Using center-of-frame fallback"),!0}};return ee.current=$(),ee.current},[]),v=j.useCallback($=>{const O=K.current;if(!O)return K.current=$,$;const Q=Math.abs($.x-O.x),B=Math.abs($.y-O.y),R=Q+B;if(R<15)return O;const ie=R>50?.7:R>25?.4:.2,Z={x:O.x+($.x-O.x)*ie,y:O.y+($.y-O.y)*ie,width:O.width+($.width-O.width)*.2,height:O.height+($.height-O.height)*.2,rotation:$.rotation};return K.current=Z,Z},[]),b=j.useCallback($=>{var vt;C.current||(C.current=document.createElement("canvas"));const O=C.current,Q=.2,B=Math.floor($.videoWidth*Q),R=Math.floor($.videoHeight*Q);O.width!==B&&(O.width=B),O.height!==R&&(O.height=R);const ie=O.getContext("2d",{willReadFrequently:!0});if(!ie)return null;ie.drawImage($,0,0,B,R);const Z=ie.getImageData(0,0,B,R),ce=Z.data;let de=0,ue=0,he=0;const q=new Array(B).fill(0);let J=0,oe=0;const Se=(vt=N.current)==null?void 0:vt.data,je=Math.floor(R*.6);for(let Be=0;Be<je;Be++)for(let me=0;me<B;me++){const xt=(Be*B+me)*4,X=ce[xt],be=ce[xt+1],Ce=ce[xt+2];if(X+be+Ce>200){const st=1+(1-Be/je);oe+=st,J+=Be*st}if(Se){const st=Se[xt],Le=Se[xt+1],At=Se[xt+2],ft=Math.abs(X-st)+Math.abs(be-Le)+Math.abs(Ce-At);if(ft>40){const xe=ft*(1+(1-Be/je));he+=xe,de+=me*xe,ue+=Be*xe,q[me]+=ft}}}N.current=Z;const Ie=K.current;let Ae;if(he>2e4){const Be=Math.floor(de/he),xt=Math.max(...q)*.15;let X=Be,be=Be;for(let Le=Be;Le>=0&&Be-Le<B*.4;Le--)if(q[Le]>=xt)X=Le;else if(Le<Be-5)break;for(let Le=Be;Le<B&&Le-Be<B*.4;Le++)if(q[Le]>=xt)be=Le;else if(Le>Be+5)break;const Ce=(be-X)/Q,Me=$.videoWidth*.1,st=$.videoWidth*.4;Ae=Math.max(Me,Math.min(st,Ce*1.5)),console.log(`[FaceTracking] Motion: center=${Be}, span=${Ce.toFixed(0)}px  faceW: ${Ae.toFixed(0)}`)}else Ie?Ae=Ie.width:Ae=$.videoWidth*.2;const ze=$.videoWidth/2;let Ue;he>2e4?Ue="motion":oe>100?Ue="skin":Ue="center";let We;if(he>2e4){const Be=ue/he/Q;We=Math.max($.videoHeight*.05,Be*.6)}else if(oe>100){const Be=J/oe/Q;We=Math.max($.videoHeight*.05,Be*.5)}else We=$.videoHeight*.15;return console.log(`[FaceTracking] Fallback (${Ue}): x=${ze.toFixed(0)}, y=${We.toFixed(0)}, w=${Ae.toFixed(0)}`),{x:ze,y:We,width:Ae,height:Ae*1.2,rotation:0}},[]),L=j.useCallback(async()=>{if(!u.current||G.current)return;const $=u.current;if(!($.readyState<2||$.videoWidth===0)){G.current=!0;try{let O=null;if(y.current==="native"&&f.current)try{const Q=await f.current.detect($);if(Q.length>0){const B=Q[0].boundingBox;O={x:B.x+B.width/2,y:B.y,width:B.width,height:B.height,rotation:0}}}catch(Q){console.warn("[FaceTracking] Native detection error:",Q)}else if(y.current==="tfjs"&&p.current)try{const Q=await p.current.estimateFaces($);if(Q.length!==0){console.log("[FaceTracking] TFJS found",Q.length,"face(s)");const B=Q[0];console.log("[FaceTracking] TFJS face keys:",Object.keys(B));const R=B.box||B.boundingBox;if(R){const ie=R.xMin??0,Z=R.yMin??0,ce=R.width??(R.xMax?R.xMax-ie:100),de=R.height??(R.yMax?R.yMax-Z:100);console.log("[FaceTracking] TFJS box:",{xMin:ie,yMin:Z,w:ce,h:de}),O={x:ie+ce/2,y:Z,width:Math.min(ce,$.videoWidth*.8),height:Math.min(de,$.videoHeight*.8),rotation:0}}}}catch(Q){console.warn("[FaceTracking] TFJS detection error:",Q)}if(O||(O=b($)),O){const Q=v(O);t(Q)}else K.current&&t(K.current)}catch(O){console.warn("[FaceTracking] Detection error:",O)}finally{G.current=!1}}},[b,v]),I=j.useCallback(async $=>{console.log("[FaceTracking] Starting tracking"),u.current=$,M.current=!0,await k();const O=async()=>{if(M.current&&(await L(),M.current)){const Q=y.current==="tfjs"?150:100;S.current=window.setTimeout(()=>{requestAnimationFrame(O)},Q)}};O()},[k,L]),H=j.useCallback(()=>{console.log("[FaceTracking] Stopping tracking"),M.current=!1,S.current&&(clearTimeout(S.current),S.current=null),K.current=null,t(null)},[]);return j.useEffect(()=>()=>{M.current=!1,S.current&&clearTimeout(S.current)},[]),{facePosition:e,isLoading:n,isSupported:o,startTracking:I,stopTracking:H}}const m={D2:73.42,E2:82.41,F2:87.31,G2:98,A2:110,B2:123.47,C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,D5:587.33,E5:659.25,F5:698.46,G5:783.99,A5:880,B5:987.77,C6:1046.5,D6:1174.66,E6:1318.51,F6:1396.91,G6:1567.98,Eb2:77.78,Ab2:103.83,Bb2:116.54,Bb3:233.08,Eb4:311.13,Ab4:415.3,Bb4:466.16,Eb5:622.25,Ab5:830.61,Bb5:932.33,Eb6:1244.51,"F#2":92.5,"F#3":185,"F#4":369.99,"F#5":739.99,"F#6":1479.98,"G#5":830.61},ty={grassland:{tempo:{calm:100,excited:128},melodyCalm:[[m.G4,m.A4,m.B4,m.D5,m.B4,m.A4,m.G4,m.E4],[m.E4,m.G4,m.A4,m.B4,m.A4,m.G4,m.E4,m.D4],[m.D4,m.E4,m.G4,m.A4,m.G4,m.E4,m.G4,m.A4],[m.B4,m.A4,m.G4,m.E4,m.D4,m.E4,m.G4,m.B4]],melodyExcited:[[m.G5,m.A5,m.B5,m.D6,m.B5,m.G5,m.A5,m.B5],[m.E5,m.G5,m.A5,m.B5,m.D6,m.B5,m.A5,m.G5],[m.D5,m.E5,m.G5,m.A5,m.B5,m.A5,m.G5,m.E5]],bassCalm:[[m.G2,0,m.D3,0,m.G2,0,m.B2,0],[m.E2,0,m.B2,0,m.E2,0,m.G2,0]],bassExcited:[[m.G2,m.G2,m.D3,m.D3,m.B2,m.B2,m.D3,m.G2]],arpCalm:[[0,4,7,11,12]],arpExcited:[[0,4,7,11,14,11,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:3e3,filterType:"lowpass",attackTime:.01,releaseTime:.3,arpSpeed:1},coastal:{tempo:{calm:88,excited:116},melodyCalm:[[m.D4,m.E4,m.A4,0,m.B4,m.A4,m.E4,0],[m.E4,m["F#4"],m.A4,m.B4,0,m.A4,m["F#4"],m.E4],[m["F#4"],m.A4,m.B4,m.D5,m.B4,0,m.A4,m["F#4"]],[m.A4,0,m.E4,m["F#4"],m.A4,0,m.D4,m.E4]],melodyExcited:[[m.D5,m.E5,m["F#5"],m.A5,m.B5,m.A5,m["F#5"],m.E5],[m.A5,m.B5,m.D6,m.E6,m.D6,m.B5,m.A5,m["F#5"]],[m.E5,m["F#5"],m.A5,m.B5,m.A5,m["F#5"],m.E5,m.D5]],bassCalm:[[m.D2,0,0,m.A2,0,0,m.D2,0],[m.E2,0,0,m.B2,0,0,m.E2,0]],bassExcited:[[m.D2,0,m.A2,0,m.D2,m.E2,m["F#2"],0]],arpCalm:[[0,4,9,12,16,12,9,4]],arpExcited:[[0,2,4,7,9,12,9,7,4,2]],pulseWidth:.3,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3,vibratoDepth:.008,filterFreq:2500,filterType:"lowpass",attackTime:.05,releaseTime:.5,arpSpeed:1.3},lava:{tempo:{calm:135,excited:170},melodyCalm:[[m.A3,m.A3,m.C4,m.E4,m.A4,m.E4,m.C4,m.A3],[m.G3,m.G3,m.Bb3,m.D4,m.G4,m.D4,m.Bb3,m.G3],[m.F3,m.F3,m.A3,m.C4,m.F4,m.A4,m.C5,m.A4],[m.E4,m.E4,m.G4,m.A4,m.C5,m.A4,m.G4,m.E4]],melodyExcited:[[m.A4,m.C5,m.E5,m.A5,m.A5,m.E5,m.C5,m.A4],[m.G4,m.Bb4,m.D5,m.G5,m.G5,m.D5,m.Bb4,m.G4],[m.F4,m.A4,m.C5,m.F5,m.A5,m.F5,m.C5,m.A4],[m.E4,m.G4,m.A4,m.C5,m.E5,m.G5,m.E5,m.C5]],bassCalm:[[m.A2,m.A2,m.A2,m.E2,m.A2,m.A2,m.G2,m.E2],[m.G2,m.G2,m.G2,m.D2,m.G2,m.G2,m.F2,m.D2]],bassExcited:[[m.A2,m.A2,m.A2,m.A2,m.E2,m.E2,m.G2,m.G2],[m.F2,m.F2,m.F2,m.F2,m.E2,m.E2,m.E2,m.E2]],arpCalm:[[0,3,7,10,12,10,7,3]],arpExcited:[[0,3,7,12,15,19,15,12,7,3,0,3]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:6,vibratoDepth:.002,filterFreq:4500,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.7},city:{tempo:{calm:115,excited:145},melodyCalm:[[m.Eb4,m.G4,m.Bb4,0,m.Eb5,0,m.Bb4,m.G4],[m.F4,m.Ab4,m.C5,0,m.F5,0,m.C5,m.Ab4],[m.G4,m.Bb4,m.D5,m.F5,0,m.D5,m.Bb4,0],[m.Ab4,m.C5,m.Eb5,m.G5,m.Eb5,m.C5,m.Ab4,0]],melodyExcited:[[m.Eb5,m.G5,m.Bb5,m.Eb6,m.Bb5,m.G5,m.Bb5,m.Eb6],[m.F5,m.Ab5,m.C6,m.F6,m.C6,m.Ab5,m.C6,m.F6],[m.G5,m.Bb5,m.D6,m.G6,m.D6,m.Bb5,m.G5,m.D6]],bassCalm:[[m.Eb2,0,m.Bb2,0,m.Eb2,0,m.G2,0],[m.F2,0,m.C3,0,m.F2,0,m.Ab2,0]],bassExcited:[[m.Eb2,m.Eb2,m.Bb2,m.Bb2,m.G2,m.G2,m.Bb2,m.Eb2]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,19,22,19,15,12,10,7,3]],pulseWidth:.5,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.2,arpSpeed:.5},sky:{tempo:{calm:72,excited:100},melodyCalm:[[m.C5,0,m.G5,0,m.E5,0,m.G5,0],[m.D5,0,m.A5,0,m["F#5"],0,m.A5,0],[m.E5,0,m.B5,0,m["G#5"],0,m.B5,0],[m.G5,0,m.D6,0,m.B5,0,m.G5,0]],melodyExcited:[[m.C5,m.E5,m.G5,m.C6,m.E6,m.C6,m.G5,m.E5],[m.D5,m["F#5"],m.A5,m.D6,m["F#6"],m.D6,m.A5,m["F#5"]],[m.E5,m["G#5"],m.B5,m.E6,m.B5,m["G#5"],m.E5,m.B4]],bassCalm:[[m.C3,0,0,0,m.G3,0,0,0],[m.D3,0,0,0,m.A3,0,0,0],[m.E3,0,0,0,m.B3,0,0,0]],bassExcited:[[m.C3,0,m.G3,0,m.C3,0,m.E3,0]],arpCalm:[[0,7,12,19,24,19,12,7]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.25,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"sine",vibratoRate:2,vibratoDepth:.015,filterFreq:2e3,filterType:"lowpass",attackTime:.1,releaseTime:.8,arpSpeed:1.8}},ny={tempo:{calm:140,excited:175},melodyCalm:[[m.D4,m["F#4"],m.A4,m.D5,m.A4,m["F#4"],m.A4,m.D5],[m.E4,m.G4,m.B4,m.E5,m.B4,m.G4,m.B4,m.E5],[m["F#4"],m.A4,m.D5,m["F#5"],m.D5,m.A4,m.D5,m["F#5"]]],melodyExcited:[[m.D5,m["F#5"],m.A5,m.D6,m.A5,m["F#5"],m.A5,m.D6],[m.E5,m.G5,m.B5,m.E6,m.B5,m.G5,m.B5,m.E6],[m["F#5"],m.A5,m.D6,m.E6,m.D6,m.A5,m.D6,m["F#5"]]],bassCalm:[[m.D2,m.D2,m.A2,m.A2,m.D2,m.D2,m.E2,m["F#3"]]],bassExcited:[[m.D2,m.D2,m.D2,m.A2,m.D2,m.D2,m.D2,m.E2]],arpCalm:[[0,4,7,12,16,19]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:7,vibratoDepth:.003,filterFreq:5e3,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.6};function ry(e,t=!1){const n=j.useRef(null),r=j.useRef(!1),o=j.useRef("calm"),a=j.useRef(null),u=j.useRef(0),f=j.useRef(0),p=j.useRef(0),y=j.useRef(0),S=j.useRef(e),C=j.useRef(t);j.useEffect(()=>{S.current=e,C.current=t},[e,t]);const N=j.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),K=j.useCallback((I,H,$,O,Q)=>{const B=N(),R=B.createOscillator(),ie=B.createOscillator(),Z=B.createGain(),ce=B.createBiquadFilter(),de=B.createGain();R.type=Q.melodyWave,ie.type=Q.melodyWave,R.frequency.setValueAtTime(I,H),ie.frequency.setValueAtTime(I*1.003,H),R.frequency.setValueAtTime(I*1.02,H),R.frequency.exponentialRampToValueAtTime(I,H+.02);const ue=B.createOscillator(),he=B.createGain();ue.type="sine",ue.frequency.value=Q.vibratoRate,he.gain.value=I*Q.vibratoDepth,ue.connect(he),he.connect(R.frequency),ce.type=Q.filterType,ce.frequency.setValueAtTime(Q.filterFreq,H),ce.Q.value=1,R.connect(Z),ie.connect(Z),Z.connect(ce),ce.connect(de),de.connect(B.destination);const q=H+Q.attackTime;Z.gain.setValueAtTime(0,H),Z.gain.linearRampToValueAtTime(O,q),Z.gain.setValueAtTime(O*.7,q+.005),Z.gain.setValueAtTime(O*.6,H+$*.3),Z.gain.linearRampToValueAtTime(0,H+$+Q.releaseTime*.5),de.gain.value=.5;const J=H+$+Q.releaseTime;R.start(H),ie.start(H),ue.start(H),R.stop(J),ie.stop(J),ue.stop(J)},[N]),G=j.useCallback((I,H,$,O,Q)=>{const B=N(),R=B.createOscillator(),ie=B.createOscillator(),Z=B.createGain(),ce=B.createBiquadFilter();R.type=Q.bassWave,ie.type=Q.bassWave,R.frequency.setValueAtTime(I*1.5,H),R.frequency.exponentialRampToValueAtTime(I,H+.03),ie.frequency.setValueAtTime(I*.5,H),ce.type="lowpass",ce.frequency.value=Math.min(Q.filterFreq*.5,800),R.connect(Z),ie.connect(Z),Z.connect(ce),ce.connect(B.destination),Z.gain.setValueAtTime(0,H),Z.gain.linearRampToValueAtTime(O,H+Q.attackTime*.5),Z.gain.setValueAtTime(O*.8,H+.02),Z.gain.linearRampToValueAtTime(0,H+$),R.start(H),ie.start(H),R.stop(H+$),ie.stop(H+$)},[N]),M=j.useCallback((I,H,$)=>{const O=N(),Q=$==="heavy"?1.3:$==="airy"?.5:1;if(H==="kick"){const B=O.createOscillator(),R=O.createGain();B.connect(R),R.connect(O.destination),B.type="square";const ie=$==="heavy"?200:150;B.frequency.setValueAtTime(ie,I),B.frequency.exponentialRampToValueAtTime(40,I+.08),B.frequency.exponentialRampToValueAtTime(20,I+.12),R.gain.setValueAtTime(0,I),R.gain.linearRampToValueAtTime(.3*Q,I+.002),R.gain.exponentialRampToValueAtTime(.01,I+.12),B.start(I),B.stop(I+.12)}else if(H==="snare"){const B=O.createOscillator(),R=O.createGain();B.connect(R),R.connect(O.destination),B.type="square",B.frequency.setValueAtTime(180,I),B.frequency.exponentialRampToValueAtTime(100,I+.04),R.gain.setValueAtTime(0,I),R.gain.linearRampToValueAtTime(.15*Q,I+.001),R.gain.exponentialRampToValueAtTime(.01,I+.06),B.start(I),B.stop(I+.06);const ie=.08,Z=Math.floor(O.sampleRate*ie),ce=O.createBuffer(1,Z,O.sampleRate),de=ce.getChannelData(0);let ue=0;for(let oe=0;oe<Z;oe++)oe%4===0&&(ue=Math.random()>.5?1:-1),de[oe]=ue;const he=O.createBufferSource();he.buffer=ce;const q=O.createGain(),J=O.createBiquadFilter();J.type="highpass",J.frequency.value=$==="electronic"?5e3:3500,he.connect(J),J.connect(q),q.connect(O.destination),q.gain.setValueAtTime(0,I),q.gain.linearRampToValueAtTime(.12*Q,I+.001),q.gain.exponentialRampToValueAtTime(.01,I+ie),he.start(I),he.stop(I+ie)}else{const B=$==="airy"?.04:.025,R=Math.floor(O.sampleRate*B),ie=O.createBuffer(1,R,O.sampleRate),Z=ie.getChannelData(0);let ce=0;for(let q=0;q<R;q++)q%2===0&&(ce=Math.random()>.5?1:-1),Z[q]=ce;const de=O.createBufferSource();de.buffer=ie;const ue=O.createBiquadFilter();ue.type="highpass",ue.frequency.value=$==="electronic"?1e4:8e3;const he=O.createGain();de.connect(ue),ue.connect(he),he.connect(O.destination),he.gain.setValueAtTime(0,I),he.gain.linearRampToValueAtTime(.06*Q,I+.001),he.gain.exponentialRampToValueAtTime(.01,I+B),de.start(I),de.stop(I+B)}},[N]),ee=j.useCallback((I,H,$,O,Q,B)=>{const R=N(),Z=O*B.arpSpeed/H.length,ce=R.createBiquadFilter();ce.type="highpass",ce.frequency.value=400,ce.connect(R.destination),H.forEach((de,ue)=>{const he=I*Math.pow(2,de/12),q=$+ue*Z,J=R.createOscillator(),oe=R.createGain();J.type=B.arpWave,J.frequency.setValueAtTime(he,q),J.connect(oe),oe.connect(ce),oe.gain.setValueAtTime(0,q),oe.gain.linearRampToValueAtTime(Q,q+B.attackTime*.3),oe.gain.setValueAtTime(Q*.7,q+.005),oe.gain.linearRampToValueAtTime(0,q+Z*.9),J.start(q),J.stop(q+Z+.01)})},[N]),k=j.useCallback(()=>{const I=N(),H=.1,$=o.current==="excited",O=C.current?ny:ty[S.current],B=60/($?O.tempo.excited:O.tempo.calm),R=$?O.melodyExcited:O.melodyCalm,ie=$?O.bassExcited:O.bassCalm,Z=$?O.arpExcited:O.arpCalm;for(;u.current<I.currentTime+H;){const ce=f.current%8,de=p.current%R.length,ue=p.current%ie.length,he=p.current%Z.length,q=R[de],J=ie[ue],oe=Z[he];ce===0&&M(u.current,"kick",O.drumStyle),ce===4&&M(u.current,$||C.current?"snare":"kick",O.drumStyle),$||C.current?(ce%2===0&&M(u.current,"hihat",O.drumStyle),M(u.current+B/2,"hihat",O.drumStyle)):ce%2===0&&M(u.current+B/2,"hihat",O.drumStyle);const Se=q[ce];if(Se>0){const Ie=C.current?.08:.06;K(Se,u.current,B*.8,Ie,O)}const je=J[ce];if(je>0){const Ie=C.current?.1:.08;G(je,u.current,B*.9,Ie,O)}if(ce%4===0){const Ie=m.C4,Ae=C.current?.04:.03;ee(Ie,oe,u.current,B*2,Ae,O)}ce===7&&(y.current++,y.current%2===0&&p.current++),u.current+=B,f.current++}},[N,K,G,M,ee]),v=j.useCallback(()=>{if(r.current)return;const I=N();I.state==="suspended"&&I.resume(),r.current=!0,o.current="calm",u.current=I.currentTime,f.current=0,p.current=0,y.current=0,a.current=window.setInterval(k,25)},[N,k]),b=j.useCallback(()=>{a.current&&(clearInterval(a.current),a.current=null),r.current=!1},[]),L=j.useCallback(I=>{o.current!==I&&(o.current=I,p.current=0)},[]);return j.useEffect(()=>()=>{b(),n.current&&(n.current.close(),n.current=null)},[b]),{start:v,stop:b,setIntensity:L}}function pr(e){var n;const t={success:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[m.C5,m.E5,m.G5,m.C6].forEach((a,u)=>{const f=r.createOscillator(),p=r.createGain();f.connect(p),p.connect(r.destination),f.type="square",f.frequency.setValueAtTime(a,r.currentTime+u*.08),p.gain.setValueAtTime(0,r.currentTime+u*.08),p.gain.linearRampToValueAtTime(.2,r.currentTime+u*.08+.002),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+u*.08+.15),f.start(r.currentTime+u*.08),f.stop(r.currentTime+u*.08+.15)})},fail:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[m.G4,m.E4,m.C4].forEach((f,p)=>{const y=r.createOscillator(),S=r.createGain();y.connect(S),S.connect(r.destination),y.type="square",y.frequency.setValueAtTime(f,r.currentTime+p*.12),S.gain.setValueAtTime(0,r.currentTime+p*.12),S.gain.linearRampToValueAtTime(.15,r.currentTime+p*.12+.002),S.gain.exponentialRampToValueAtTime(.01,r.currentTime+p*.12+.15),y.start(r.currentTime+p*.12),y.stop(r.currentTime+p*.12+.15)});const a=r.createOscillator(),u=r.createGain();a.connect(u),u.connect(r.destination),a.type="square",a.frequency.setValueAtTime(1e3,r.currentTime+.4),a.frequency.exponentialRampToValueAtTime(1500,r.currentTime+.45),u.gain.setValueAtTime(0,r.currentTime+.4),u.gain.linearRampToValueAtTime(.08,r.currentTime+.402),u.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),a.start(r.currentTime+.4),a.stop(r.currentTime+.5)},sparkle:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),a=r.createGain();o.connect(a),a.connect(r.destination),o.type="square",o.frequency.setValueAtTime(1200,r.currentTime),o.frequency.exponentialRampToValueAtTime(2400,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(1800,r.currentTime+.1),a.gain.setValueAtTime(0,r.currentTime),a.gain.linearRampToValueAtTime(.1,r.currentTime+.002),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),o.start(r.currentTime),o.stop(r.currentTime+.1)},brush:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=Math.floor(r.sampleRate*.08),a=r.createBuffer(1,o,r.sampleRate),u=a.getChannelData(0);let f=0;for(let C=0;C<o;C++)C%4===0&&(f=Math.random()>.5?1:-1),u[C]=f;const p=r.createBufferSource();p.buffer=a;const y=r.createGain(),S=r.createBiquadFilter();S.type="bandpass",S.frequency.value=1500,p.connect(S),S.connect(y),y.connect(r.destination),y.gain.setValueAtTime(0,r.currentTime),y.gain.linearRampToValueAtTime(.05,r.currentTime+.002),y.gain.exponentialRampToValueAtTime(.01,r.currentTime+.08),p.start(r.currentTime),p.stop(r.currentTime+.08)},capture:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),a=r.createGain();o.connect(a),a.connect(r.destination),o.type="square",o.frequency.setValueAtTime(300,r.currentTime),o.frequency.exponentialRampToValueAtTime(600,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(400,r.currentTime+.1),o.frequency.exponentialRampToValueAtTime(800,r.currentTime+.15),a.gain.setValueAtTime(0,r.currentTime),a.gain.linearRampToValueAtTime(.2,r.currentTime+.002),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),o.start(r.currentTime),o.stop(r.currentTime+.2)},"legendary-intro":()=>{const r=new(window.AudioContext||window.webkitAudioContext);[m.D3,m.A3,m.D4,m["F#4"]].forEach((a,u)=>{const f=r.createOscillator(),p=r.createGain();f.connect(p),p.connect(r.destination),f.type="square",f.frequency.setValueAtTime(a*.5,r.currentTime+u*.2),f.frequency.exponentialRampToValueAtTime(a,r.currentTime+u*.2+.05),p.gain.setValueAtTime(0,r.currentTime+u*.2),p.gain.linearRampToValueAtTime(.25,r.currentTime+u*.2+.002),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+u*.2+.25),f.start(r.currentTime+u*.2),f.stop(r.currentTime+u*.2+.25)}),setTimeout(()=>{[m.D4,m["F#4"],m.A4,m.D5].forEach(u=>{const f=r.createOscillator(),p=r.createGain();f.connect(p),p.connect(r.destination),f.type="square",f.frequency.setValueAtTime(u,r.currentTime),p.gain.setValueAtTime(0,r.currentTime),p.gain.linearRampToValueAtTime(.15,r.currentTime+.002),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),f.start(r.currentTime),f.stop(r.currentTime+.5)})},900)},wobble:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),a=r.createGain();o.connect(a),a.connect(r.destination),o.type="square",o.frequency.setValueAtTime(180,r.currentTime),o.frequency.exponentialRampToValueAtTime(120,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(200,r.currentTime+.1),o.frequency.exponentialRampToValueAtTime(100,r.currentTime+.15),a.gain.setValueAtTime(0,r.currentTime),a.gain.linearRampToValueAtTime(.15,r.currentTime+.005),a.gain.setValueAtTime(.12,r.currentTime+.05),a.gain.linearRampToValueAtTime(.15,r.currentTime+.1),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),o.start(r.currentTime),o.stop(r.currentTime+.2)},click:()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume();const o=r.createOscillator(),a=r.createGain();o.connect(a),a.connect(r.destination),o.type="square",o.frequency.setValueAtTime(800,r.currentTime),o.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.03),a.gain.setValueAtTime(0,r.currentTime),a.gain.linearRampToValueAtTime(.4,r.currentTime+.005),a.gain.setValueAtTime(.35,r.currentTime+.02),a.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),o.start(r.currentTime),o.stop(r.currentTime+.1);const u=r.createOscillator(),f=r.createGain();u.connect(f),f.connect(r.destination),u.type="square",u.frequency.setValueAtTime(1600,r.currentTime+.05),u.frequency.exponentialRampToValueAtTime(2e3,r.currentTime+.08),f.gain.setValueAtTime(0,r.currentTime+.05),f.gain.linearRampToValueAtTime(.3,r.currentTime+.055),f.gain.exponentialRampToValueAtTime(.01,r.currentTime+.12),u.start(r.currentTime+.05),u.stop(r.currentTime+.12)}};try{(n=t[e])==null||n.call(t)}catch(r){console.warn("Sound playback failed:",r)}}const Op={grassland:{id:"grassland",name:"Sparkle Meadows",description:"A peaceful meadow filled with wildflowers and friendly creatures",colors:{primary:"#22C55E",secondary:"#86EFAC",accent:"#FDE047",background:"#ECFDF5"},particles:["","","",""]},coastal:{id:"coastal",name:"Crystal Shores",description:"Sandy beaches and sparkling waves hide aquatic robot friends",colors:{primary:"#0EA5E9",secondary:"#7DD3FC",accent:"#FCD34D",background:"#F0F9FF"},particles:["","","",""]},lava:{id:"lava",name:"Ember Peaks",description:"Volcanic mountains where fire-forged creatures dwell",colors:{primary:"#EF4444",secondary:"#FB923C",accent:"#FBBF24",background:"#1C1917"},particles:["","","",""]},city:{id:"city",name:"Neon District",description:"A futuristic city where digital creatures roam the streets",colors:{primary:"#A855F7",secondary:"#E879F9",accent:"#22D3EE",background:"#0F0B1A"},particles:["","","",""]},sky:{id:"sky",name:"Cloud Kingdom",description:"Floating islands high above where sky creatures soar",colors:{primary:"#F8FAFC",secondary:"#BAE6FD",accent:"#FDE68A",background:"#E0F2FE"},particles:["","","",""]}},cf=["grassland","coastal","lava","city","sky"];function iy(){return cf[Math.floor(Math.random()*cf.length)]}function oy(e){return Op[e]}function ay(e){return{grassland:"Nature",coastal:"Water",lava:"Fire",city:"Electric",sky:"Air",all:"Cosmic"}[e]}const mt=[{id:"gear-bunny",name:"Cogbun",region:"grassland",rarity:"common",description:"A clockwork rabbit that hops with perfectly timed gear movements!",robotParts:["gear-ears","spring-legs","wind-up-tail"],monsterType:"rabbit",height:35,weight:2.5},{id:"mecha-moth",name:"Solarmoth",region:"grassland",rarity:"common",description:"Solar-powered wings let this moth fly day and night!",robotParts:["solar-wings","LED-antennae","sensor-eyes"],monsterType:"moth",height:15,weight:.3},{id:"vine-droid",name:"Circufern",region:"grassland",rarity:"common",description:"A plant monster with circuit-board leaves and fiber-optic vines!",robotParts:["circuit-leaves","fiber-vines","solar-flower"],monsterType:"plant",height:45,weight:3.2},{id:"robo-squirrel",name:"Nutronaut",region:"grassland",rarity:"common",description:"Stores acorns in its battery compartment for winter energy!",robotParts:["battery-cheeks","propeller-tail","scanner-eyes"],monsterType:"squirrel",height:25,weight:1.8},{id:"buzzer-bee",name:"Hexabuzz",region:"grassland",rarity:"common",description:"Makes digital honey that tastes like electricity!",robotParts:["helicopter-wings","stinger-USB","hexagon-body"],monsterType:"bee",height:12,weight:.4},{id:"pixel-fawn",name:"Emojidoe",region:"grassland",rarity:"common",description:"A young deer with spots that display different emojis!",robotParts:["LED-spots","antenna-ears","spring-hooves"],monsterType:"deer",height:85,weight:28},{id:"sprocket-snail",name:"Gearshell",region:"grassland",rarity:"common",description:"Slow but steady, leaves a trail of sparkly oil!",robotParts:["gear-shell","slime-coolant","eye-stalks"],monsterType:"snail",height:18,weight:1.2},{id:"flutter-bot",name:"Chromafly",region:"grassland",rarity:"common",description:"A butterfly with holographic wings that change colors!",robotParts:["holo-wings","nectar-scanner","micro-jets"],monsterType:"butterfly",height:20,weight:.5},{id:"thunder-stag",name:"Voltantler",region:"grassland",rarity:"rare",description:"Lightning crackles between its magnificent antenna-antlers!",robotParts:["tesla-antlers","chrome-hooves","capacitor-heart"],monsterType:"stag",height:180,weight:220},{id:"bloom-guardian",name:"Floratron",region:"grassland",rarity:"rare",description:"A gentle giant that protects the digital forest!",robotParts:["flower-sensors","bark-armor","root-cables"],monsterType:"treant",height:350,weight:800},{id:"prism-fox",name:"Spectravix",region:"grassland",rarity:"rare",description:"Its rainbow tail can split light into data streams!",robotParts:["prism-tail","laser-eyes","stealth-paws"],monsterType:"fox",height:65,weight:12},{id:"echo-owl",name:"Sonarhoot",region:"grassland",rarity:"rare",description:"Uses sonar to navigate and sing beautiful digital songs!",robotParts:["radar-dish-face","silent-rotors","night-vision"],monsterType:"owl",height:55,weight:4.5},{id:"natura-prime",name:"Seedatron",region:"grassland",rarity:"legendary",description:"The ancient guardian of all grassland creatures, born from the first seed and the first circuit!",robotParts:["world-tree-core","season-modulators","life-generators"],monsterType:"nature-titan",height:450,weight:1200},{id:"leaf-kong",name:"Foliape",region:"grassland",rarity:"legendary",description:"The mightiest grass-type warrior! His autumn leaf crown channels the power of all seasons, and his leaf armor is impenetrable!",robotParts:["autumn-crown","leaf-armor","vine-muscles","photosynthesis-core"],monsterType:"gorilla",height:280,weight:450},{id:"turbo-turtle",name:"Rocketoise",region:"coastal",rarity:"common",description:"Jet engines on its shell make this turtle surprisingly fast!",robotParts:["jet-shell","flipper-props","periscope-head"],monsterType:"turtle",height:75,weight:45},{id:"crank-crab",name:"Clawdraulic",region:"coastal",rarity:"common",description:"Hydraulic claws that can crush anything... gently!",robotParts:["hydraulic-claws","tank-treads","bubble-blaster"],monsterType:"crab",height:30,weight:5.5},{id:"wave-bot",name:"Sonafin",region:"coastal",rarity:"common",description:"A friendly fish with sonar that finds lost treasures!",robotParts:["sonar-array","propeller-tail","depth-gauge"],monsterType:"fish",height:40,weight:3.8},{id:"pearl-pup",name:"Shimmerseal",region:"coastal",rarity:"common",description:"A seal pup that produces synthetic pearls from its nose!",robotParts:["pearl-maker","flipper-jets","whisker-sensors"],monsterType:"seal",height:95,weight:38},{id:"coral-crawler",name:"Printopus",region:"coastal",rarity:"common",description:"Helps rebuild reefs with its 3D-printing tentacles!",robotParts:["printer-tentacles","mineral-scanner","glow-tips"],monsterType:"octopus",height:60,weight:18},{id:"shell-shock",name:"Voltcrab",region:"coastal",rarity:"common",description:"An electric hermit crab in a high-tech shell home!",robotParts:["smart-shell","shock-claws","wifi-antenna"],monsterType:"hermit-crab",height:22,weight:2.8},{id:"foam-flounder",name:"Hoverflat",region:"coastal",rarity:"common",description:"Flat as a pancake but full of bubbly personality!",robotParts:["hover-fins","camo-skin","sand-jets"],monsterType:"flounder",height:35,weight:4.2},{id:"anchor-pony",name:"Magnetail",region:"coastal",rarity:"common",description:"A seahorse that can anchor itself in any current!",robotParts:["magnetic-tail","stabilizer-fins","compass-snout"],monsterType:"seahorse",height:28,weight:1.5},{id:"storm-ray",name:"Voltamanta",region:"coastal",rarity:"rare",description:"Glides through storms and channels lightning through its wings!",robotParts:["wing-capacitors","storm-sensors","electric-tail"],monsterType:"manta-ray",height:120,weight:85},{id:"kraken-kit",name:"Tentabot",region:"coastal",rarity:"rare",description:"A baby kraken with adorable mechanical tentacles!",robotParts:["grapple-tentacles","ink-jets","depth-crusher"],monsterType:"kraken",height:200,weight:350},{id:"siren-synth",name:"Melodine",region:"coastal",rarity:"rare",description:"Sings synthesized songs that dolphins love!",robotParts:["voice-modulator","scale-LEDs","sonic-fins"],monsterType:"mermaid",height:165,weight:55},{id:"tide-titan",name:"Wavezilla",region:"coastal",rarity:"rare",description:"Controls the waves with its hydraulic arms!",robotParts:["wave-generators","pressure-suit","current-jets"],monsterType:"water-elemental",height:250,weight:420},{id:"ocean-emperor",name:"Leviatron",region:"coastal",rarity:"legendary",description:"The majestic ruler of all digital seas, part whale, part submarine, all awesome!",robotParts:["sonar-crown","reactor-heart","tidal-thrusters"],monsterType:"leviathan",height:1500,weight:8500},{id:"magma-core",name:"Molite",region:"lava",rarity:"common",description:"A golem with a nuclear reactor heart that glows orange!",robotParts:["reactor-core","heat-vents","lava-veins"],monsterType:"golem",height:150,weight:380},{id:"pyro-gecko",name:"Ignecko",region:"lava",rarity:"common",description:"Scurries across lava like it tickles its feet!",robotParts:["heat-pads","flame-tongue","thermal-tail"],monsterType:"gecko",height:22,weight:.8},{id:"ember-mech",name:"Rebootnix",region:"lava",rarity:"common",description:"A tiny phoenix robot that reboots instead of dying!",robotParts:["ignition-wings","ash-jets","rebirth-core"],monsterType:"phoenix",height:45,weight:4.5},{id:"forge-hound",name:"Smeltpup",region:"lava",rarity:"common",description:"A loyal dog that was born in a volcano factory!",robotParts:["furnace-belly","metal-fangs","smoke-tail"],monsterType:"hound",height:70,weight:32},{id:"cinder-snake",name:"Laviper",region:"lava",rarity:"common",description:"Slithers through magma tubes delivering messages!",robotParts:["heat-scales","drill-head","exhaust-rattle"],monsterType:"snake",height:180,weight:15},{id:"slag-slime",name:"Slagoo",region:"lava",rarity:"common",description:"A metallic slime that eats volcanic rocks for breakfast!",robotParts:["molten-body","mineral-detector","heat-sink"],monsterType:"slime",height:35,weight:8.5},{id:"coal-critter",name:"Embrite",region:"lava",rarity:"common",description:"Glows brighter the happier it gets!",robotParts:["ember-eyes","carbon-shell","spark-plugs"],monsterType:"coal-creature",height:28,weight:3.2},{id:"blast-bat",name:"Thermowing",region:"lava",rarity:"common",description:"Navigates cave systems using thermal imaging!",robotParts:["thermal-sonar","jet-wings","heat-shield"],monsterType:"bat",height:38,weight:2.1},{id:"volcano-drake",name:"Rocketdrake",region:"lava",rarity:"rare",description:"A young dragon with rocket boosters for wings!",robotParts:["rocket-wings","plasma-breath","armored-scales"],monsterType:"dragon",height:220,weight:380},{id:"obsidian-knight",name:"Glasslord",region:"lava",rarity:"rare",description:"A warrior forged from volcanic glass and steel!",robotParts:["glass-armor","magma-sword","heat-shield"],monsterType:"knight",height:195,weight:180},{id:"inferno-djinn",name:"Blazenie",region:"lava",rarity:"rare",description:"Grants wishes... if they involve fire or explosions!",robotParts:["flame-core","smoke-generator","wish-processor"],monsterType:"djinn",height:175,weight:65},{id:"molten-mammoth",name:"Magmamoth",region:"lava",rarity:"rare",description:"An ancient beast awakened by volcanic activity!",robotParts:["lava-tusks","furnace-trunk","magma-hooves"],monsterType:"mammoth",height:380,weight:2800},{id:"infernal-titan",name:"Eruptor",region:"lava",rarity:"legendary",description:"Born from the planets core, this titan IS the volcano! Speaks in eruptions!",robotParts:["planetary-core","tectonic-arms","eruption-crown"],monsterType:"fire-titan",height:850,weight:12e3},{id:"neon-rat",name:"Glowrat",region:"city",rarity:"common",description:"Covered in LED strips, the coolest rat in the city!",robotParts:["LED-fur","wire-tail","hacker-teeth"],monsterType:"rat",height:25,weight:1.2},{id:"holo-hound",name:"Projepup",region:"city",rarity:"common",description:"A loyal dog that can project holograms from its collar!",robotParts:["holo-projector","cyber-snout","data-collar"],monsterType:"dog",height:65,weight:22},{id:"glitch-cat",name:"Errorkat",region:"city",rarity:"common",description:"Sometimes its face displays error messages when confused!",robotParts:["screen-face","static-fur","USB-tail"],monsterType:"cat",height:35,weight:5.5},{id:"drone-pigeon",name:"Copteroo",region:"city",rarity:"common",description:"Delivers packages and breadcrumbs across the city!",robotParts:["rotor-wings","GPS-beak","cargo-feet"],monsterType:"pigeon",height:32,weight:1.8},{id:"trash-panda-bot",name:"Recycloon",region:"city",rarity:"common",description:"A raccoon that sorts recycling with perfect efficiency!",robotParts:["scanner-mask","grabber-paws","compactor-tail"],monsterType:"raccoon",height:55,weight:12},{id:"pixel-roach",name:"Survibug",region:"city",rarity:"common",description:"Unkillable, adorable, and surprisingly helpful!",robotParts:["hardened-shell","antenna-wifi","survival-core"],monsterType:"cockroach",height:8,weight:.15},{id:"subway-worm",name:"Metrorm",region:"city",rarity:"common",description:"Lives in the tunnels and knows every shortcut!",robotParts:["tunnel-drill","track-wheels","light-segments"],monsterType:"worm",height:250,weight:85},{id:"vending-mimic",name:"Snackritter",region:"city",rarity:"common",description:"Looks like a vending machine, gives out free snacks!",robotParts:["dispenser-mouth","coin-eyes","snack-storage"],monsterType:"mimic",height:185,weight:120},{id:"cyber-sphinx",name:"Riddletron",region:"city",rarity:"rare",description:"Asks riddles that require programming knowledge!",robotParts:["riddle-processor","sphinx-sensors","data-wings"],monsterType:"sphinx",height:180,weight:250},{id:"neon-dragon",name:"Glodragon",region:"city",rarity:"rare",description:"A serpentine dragon made of pure light and code!",robotParts:["light-body","firework-breath","parade-float"],monsterType:"dragon",height:300,weight:150},{id:"billboard-beast",name:"Adzilla",region:"city",rarity:"rare",description:"A giant creature covered in animated advertisements!",robotParts:["screen-skin","speaker-roar","spotlight-eyes"],monsterType:"kaiju",height:450,weight:3500},{id:"data-phantom",name:"Bytespook",region:"city",rarity:"rare",description:"A ghost in the machine, literally!",robotParts:["hologram-body","virus-touch","firewall-cloak"],monsterType:"ghost",height:165,weight:.01},{id:"metro-mind",name:"Urbatron",region:"city",rarity:"legendary",description:"The consciousness of the entire city! Knows everyones favorite pizza topping!",robotParts:["city-brain","infrastructure-body","network-soul"],monsterType:"city-spirit",height:500,weight:.1},{id:"propeller-pup",name:"Copterpup",region:"sky",rarity:"common",description:"An adorable puppy with helicopter ears!",robotParts:["rotor-ears","fluffy-jets","tail-rudder"],monsterType:"puppy",height:40,weight:6.5},{id:"cloud-crawler",name:"Nimbusweb",region:"sky",rarity:"common",description:"A spider that weaves webs between clouds!",robotParts:["balloon-body","silk-cables","weather-sensors"],monsterType:"spider",height:25,weight:.8},{id:"zephyr-bunny",name:"Breezebun",region:"sky",rarity:"common",description:"Hops on air currents like invisible stairs!",robotParts:["air-jets","wind-ears","bounce-stabilizers"],monsterType:"bunny",height:30,weight:2.2},{id:"nimbus-kitten",name:"Thunderpurr",region:"sky",rarity:"common",description:"A fluffy cloud cat that purrs like thunder!",robotParts:["cloud-fur","lightning-whiskers","rain-paws"],monsterType:"kitten",height:28,weight:3.5},{id:"glider-squirrel",name:"Parasquir",region:"sky",rarity:"common",description:"Has built-in parachutes for safe landings!",robotParts:["wing-membranes","acorn-radar","air-brakes"],monsterType:"flying-squirrel",height:22,weight:1.4},{id:"breeze-bird",name:"Synthrobin",region:"sky",rarity:"common",description:"A songbird with voice synthesizers!",robotParts:["speaker-beak","antenna-crest","solar-feathers"],monsterType:"songbird",height:18,weight:.6},{id:"balloon-jellyfish",name:"Zeppling",region:"sky",rarity:"common",description:"Floats serenely and glows at night!",robotParts:["helium-bell","LED-tentacles","altitude-sensors"],monsterType:"jellyfish",height:55,weight:2.8},{id:"kite-ray",name:"Windmanta",region:"sky",rarity:"common",description:"Rides wind currents like a living kite!",robotParts:["sail-wings","string-tail","wind-reader"],monsterType:"ray",height:85,weight:12},{id:"thunder-hawk",name:"Teslagle",region:"sky",rarity:"rare",description:"An eagle with tesla coils for feathers!",robotParts:["tesla-feathers","storm-eyes","lightning-talons"],monsterType:"eagle",height:95,weight:8.5},{id:"aurora-serpent",name:"Prismdrake",region:"sky",rarity:"rare",description:"A sky snake that paints the northern lights!",robotParts:["prism-scales","light-projectors","aurora-core"],monsterType:"serpent",height:450,weight:85},{id:"star-whale",name:"Cosmolub",region:"sky",rarity:"rare",description:"Swims through clouds and sings to satellites!",robotParts:["cosmic-blubber","satellite-song","nebula-spout"],monsterType:"whale",height:1200,weight:4500},{id:"wind-djinn",name:"Gustenie",region:"sky",rarity:"rare",description:"Controls the winds and grants flight wishes!",robotParts:["vortex-body","gust-generators","wish-turbine"],monsterType:"djinn",height:185,weight:35},{id:"celestial-phoenix",name:"Solarnix",region:"sky",rarity:"legendary",description:"A magnificent bird made of starlight and solar winds! Said to grant eternal good dental hygiene!",robotParts:["solar-sail-wings","fusion-heart","cosmic-tail"],monsterType:"cosmic-phoenix",height:320,weight:125},{id:"binsters-claymars",name:"Binsters Claymars",region:"all",rarity:"mythic",description:"The legendary six-headed dragon of perfect dental hygiene! Each head represents a different brushing zone. Only reveals itself to true masters who have befriended every creature!",robotParts:["six-dragon-heads","clay-body","rainbow-belly","golden-horns","ultimate-core"],monsterType:"hydra-dragon",height:2500,weight:18e3,requiresAllCreatures:!0}];function Or(e){return mt.filter(t=>t.rarity===e)}function Bp(e,t,n){let r=[];const o=C=>n?C.filter(N=>N.region===n||N.region==="all"):C,a=mt.filter(C=>C.rarity!=="mythic"),u=mt.find(C=>C.rarity==="mythic"),f=a.every(C=>t.includes(C.id)),p=u&&t.includes(u.id),y=f&&p;if(f&&!p&&e>=95&&u)return u;if(e>=90?r=[...o(Or("legendary")),...o(Or("rare")),...o(Or("common"))]:e>=70?r=[...o(Or("rare")),...o(Or("common"))]:r=o(Or("common")),r=r.filter(C=>C.rarity!=="mythic"),y)return r.length===0?null:r[Math.floor(Math.random()*r.length)];let S=r.filter(C=>!t.includes(C.id));return S.length===0&&(S=o(a).filter(C=>!t.includes(C.id))),S.length===0&&(S=a.filter(C=>!t.includes(C.id))),S.length===0?null:S[Math.floor(Math.random()*S.length)]}function sy(e,t){return t==="mythic"?e>=98?1:e>=95?.75:.5:e>=90?1:e>=76?.85:e>=51?.7:e>=31?.55:.4}function ly(e){return e>=90?"master":e>=76?"white":e>=51?"bee":e>=31?"blue":"red"}const zp="sparkle-app-settings",df={sessionDurationMinutes:2};function Lp(){try{const e=localStorage.getItem(zp);if(e)return{...df,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings:",e)}return df}function uy(e){try{localStorage.setItem(zp,JSON.stringify(e))}catch(t){console.warn("Failed to save settings:",t)}}function $p(){return Lp().sessionDurationMinutes*60}function Vp({hat:e,facePosition:t,containerWidth:n,containerHeight:r,videoWidth:o,videoHeight:a,isBrushing:u=!1}){const[f,p]=j.useState(0),[y,S]=j.useState(!1),C=Math.min(n*.3,80);j.useEffect(()=>{if(!u){p(0);return}const O=setInterval(()=>{p(Q=>(Q+1)%4)},300);return()=>clearInterval(O)},[u]),j.useEffect(()=>{S(!1);const O=new Image;O.src=e.imageUrl,O.onload=()=>S(!0)},[e.imageUrl]);const N=u?Math.sin(f*Math.PI/2)*3:0,K=u?1+Math.sin(f*Math.PI/2)*.03:1;if(!t||n===0||r===0||o===0||a===0)return l.jsx("div",{className:"absolute animate-float",style:{left:"50%",top:"10%",transform:"translateX(-50%)",opacity:y?1:0,transition:"opacity 0.3s ease"},children:l.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:C,height:C,objectFit:"contain",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"}})});const G=n/o,M=r/a,ee=50,k=n*.25,v=t.width*G,b=Math.max(ee,Math.min(k,v*.5)),L=n/2,I=t.y*M,H=b*.55,$=Math.max(5,I-H+N);return l.jsxs("div",{className:"absolute",style:{left:`${L}px`,top:`${$}px`,transform:`translateX(-50%) scale(${K})`,filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))",transition:"left 80ms ease-out, top 80ms ease-out, transform 150ms ease-out",opacity:y?1:0},children:[l.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:b,height:b,objectFit:"contain"}}),u&&l.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3) 0%, transparent 50%)",animation:"pulse 1s ease-in-out infinite"}})]})}function Up({getDebugInfo:e,containerWidth:t,containerHeight:n,videoWidth:r,videoHeight:o}){const[a,u]=j.useState(null);j.useEffect(()=>{const ee=setInterval(()=>{const k=e();u(k)},50);return()=>clearInterval(ee)},[e]);const f=t/r,p=n/o,y=Math.min(f,p),S=r*y,C=o*y,N=(t-S)/2,K=(n-C)/2,G=ee=>{const k=r-ee;return N+k*y},M=ee=>K+ee*y;return a?l.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50",children:[l.jsxs("svg",{className:"w-full h-full",style:{overflow:"visible"},children:[a.brushingRegion&&l.jsx("rect",{x:G(a.brushingRegion.x+a.brushingRegion.width),y:M(a.brushingRegion.y),width:a.brushingRegion.width*y,height:a.brushingRegion.height*y,fill:"rgba(0, 255, 0, 0.1)",stroke:"#00ff00",strokeWidth:"2",strokeDasharray:"8,4"}),a.faceRegion&&l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:G(a.faceRegion.x+a.faceRegion.width/2),y:M(a.faceRegion.y),width:a.faceRegion.width*y,height:a.faceRegion.height*y,fill:"none",stroke:"#ff6600",strokeWidth:"2"}),l.jsx("rect",{x:G(a.faceRegion.x+a.faceRegion.width*.35),y:M(a.faceRegion.y+a.faceRegion.height*.1),width:a.faceRegion.width*.7*y,height:a.faceRegion.height*.5*y,fill:"rgba(255, 0, 0, 0.3)",stroke:"#ff0000",strokeWidth:"1"})]}),a.zones.map(ee=>{const k=ee.bounds.x*r,v=ee.bounds.y*o,b=ee.bounds.width*r,L=ee.bounds.height*o;return l.jsxs("g",{children:[l.jsx("rect",{x:G(k+b),y:M(v),width:b*y,height:L*y,fill:ee.hasMotion?"rgba(0, 255, 0, 0.35)":"rgba(100, 200, 255, 0.15)",stroke:ee.hasMotion?"#00ff00":"#66ccff",strokeWidth:ee.hasMotion?3:2,rx:8}),l.jsx("text",{x:G(k+b/2),y:M(v+L/2),fill:ee.hasMotion?"#00ff00":"#ffffff",fontSize:"14",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{textShadow:"0 0 4px black, 0 0 2px black"},children:ee.hasMotion?`BRUSHING ${ee.motionLevel.toFixed(0)}%`:"Move toothbrush here"})]},ee.id)})]}),l.jsxs("div",{className:"absolute top-2 left-2 bg-black/90 text-white text-xs p-2 rounded font-mono max-w-[220px]",children:[l.jsx("div",{className:"font-bold mb-1 text-yellow-400",children:"DEBUG MODE"}),l.jsx("div",{className:a.handMotionDetected?"text-green-400 font-bold text-sm":"text-gray-400",children:a.handMotionDetected?" BRUSHING DETECTED":" No motion"}),l.jsxs("div",{className:"text-gray-300",children:["Motion level: ",a.frameMotionTotal.toFixed(0)]}),a.zones[0]&&l.jsxs("div",{className:"text-gray-300",children:["Zone motion: ",a.zones[0].motionLevel.toFixed(1),"%"]}),l.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-600 text-[10px] text-gray-400",children:[l.jsx("span",{className:"text-cyan-400",children:"Blue box"})," = detection zone",l.jsx("br",{}),l.jsx("span",{className:"text-orange-400",children:"Orange"})," = face | ",l.jsx("span",{className:"text-red-400",children:"Red"})," = ignored"]})]})]}):l.jsx("div",{className:"absolute inset-0 pointer-events-none z-50",children:l.jsxs("div",{className:"absolute top-2 left-2 bg-black/80 text-white text-xs p-2 rounded font-mono",children:[l.jsx("div",{className:"font-bold text-yellow-400",children:"DEBUG MODE"}),l.jsx("div",{className:"text-gray-400",children:"Waiting for data..."})]})})}function cy({selectedHat:e,facePosition:t,onVideoReady:n,onContainerSize:r,isBrushing:o=!1,debugMode:a=!1,getDebugInfo:u}){const{isReady:f,error:p,registerVideoElement:y}=gs(),S=j.useRef(null),C=j.useRef(null),N=j.useRef(!1),[K,G]=j.useState({width:0,height:0}),[M,ee]=j.useState({width:640,height:480}),k=j.useCallback(v=>{console.log("[CameraView] Video ref callback:",{hasElement:!!v}),S.current=v,v&&y(v)},[y]);return j.useEffect(()=>{const v=S.current;!v||!f||N.current||v.readyState>=2&&v.videoWidth>0&&(console.log("[CameraView] Video ready, calling onVideoReady"),N.current=!0,ee({width:v.videoWidth,height:v.videoHeight}),n==null||n(v))},[f,n]),j.useEffect(()=>{const v=S.current;if(!v||N.current)return;const b=()=>{v.readyState>=2&&v.videoWidth>0&&!N.current&&(console.log("[CameraView] Video ready (from polling), calling onVideoReady"),N.current=!0,ee({width:v.videoWidth,height:v.videoHeight}),n==null||n(v))},L=setInterval(b,100);return b(),()=>clearInterval(L)},[n]),j.useEffect(()=>{const v=C.current;if(!v)return;const b=()=>{const I=v.clientWidth,H=v.clientHeight;G({width:I,height:H}),r==null||r(I,H)};b();const L=new ResizeObserver(b);return L.observe(v),()=>L.disconnect()},[r]),j.useEffect(()=>{var v,b,L,I,H;console.log("[CameraView] Mounted/Updated",{hasVideoRef:!!S.current,isReady:f,error:p,videoReadyState:(v=S.current)==null?void 0:v.readyState,videoPaused:(b=S.current)==null?void 0:b.paused,videoWidth:(L=S.current)==null?void 0:L.videoWidth,videoHeight:(I=S.current)==null?void 0:I.videoHeight,srcObject:!!((H=S.current)!=null&&H.srcObject)})}),l.jsxs("div",{ref:C,className:"relative w-full h-full bg-purple-900/30 rounded-2xl overflow-hidden",children:[l.jsx("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!f&&!p&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/50",children:l.jsx("div",{className:"text-lg text-purple-300 animate-pulse",children:"Connecting..."})}),p&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/50 p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("div",{className:"text-red-300",children:p})]})}),e&&f&&K.width>0&&l.jsx(Vp,{hat:e,facePosition:t||null,containerWidth:K.width,containerHeight:K.height,videoWidth:M.width,videoHeight:M.height,isBrushing:o}),a&&u&&K.width>0&&l.jsx(Up,{getDebugInfo:u,containerWidth:K.width,containerHeight:K.height,videoWidth:M.width,videoHeight:M.height}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2 flex justify-center",children:l.jsx("div",{className:"bg-black/50 rounded-full px-3 py-1 text-xs text-white",children:"Move your brush to clean!"})})]})}const ff={},dy=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],fy=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function rn({creature:e,size:t=200,showGunk:n=!1,gunkLevel:r=0,animated:o=!0,className:a=""}){const[u,f]=j.useState(!1),[p,y]=j.useState(!1),S=dy.includes(e.id)&&!u,C=fy.includes(e.id)&&!p,N=e.id in ff,K=n&&r>=90&&C,G=e.rarity==="mythic",M=e.rarity==="legendary",ee=e.rarity==="rare",k=G?30:M?20:ee?10:0,v=G?"#F97316":M?"#FFD700":"#60A5FA",b=n?Math.max(0,100-r)/100:1,L=n&&!K?Math.min(.8,r/100):0,I=n&&!K?Math.min(100,r*1.5):0,H=n&&!K?Math.max(0,(r-40)/60):0,$={width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},O={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",filter:k>0&&b>.5?`drop-shadow(0 0 ${k*b}px ${v})`:void 0,transition:"filter 0.3s ease"},Q={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:I>0?`hue-rotate(${I}deg) saturate(${1+I/100}) brightness(${1-I/300})`:void 0,transition:"filter 0.3s ease"},B={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/vibe-brushing/creatures/gunk-overlay.png)",backgroundSize:"cover",backgroundPosition:"center top",opacity:L,pointerEvents:"none",mixBlendMode:"multiply",transition:"opacity 0.3s ease"},R={position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"20%",background:"radial-gradient(ellipse at 35% 50%, rgba(255,0,0,0.8) 0%, transparent 40%), radial-gradient(ellipse at 65% 50%, rgba(255,0,0,0.8) 0%, transparent 40%)",opacity:H,pointerEvents:"none",filter:"blur(2px)",transition:"opacity 0.3s ease"};if(S){const ie={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:"drop-shadow(0 0 15px rgba(0, 255, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 0, 0, 0.3))"};if(K)return l.jsx("div",{style:$,className:a,children:l.jsx("div",{style:{...O,filter:"drop-shadow(0 0 20px rgba(0, 100, 0, 0.8))"},className:o?"animate-creature-idle":"",children:l.jsx("img",{src:`/vibe-brushing/creatures/${e.id}-possessed.png`,alt:`${e.name} (Possessed)`,style:ie,onError:()=>y(!0)})})});if(N){const Z=ff[e.id],ce=Z.frameWidth/Z.frameHeight;let de,ue;ce>=1?(de=t,ue=t/ce):(ue=t,de=t*ce);const he={width:t,height:t,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},q=`spritesheet-grid-${Z.cols}x${Z.rows}`,J={width:de,height:ue,backgroundImage:`url(/vibe-brushing/creatures/${e.id}-spritesheet.png)`,backgroundSize:`${Z.cols*100}% ${Z.rows*100}%`,backgroundPosition:"0% 0%",backgroundRepeat:"no-repeat",filter:I>0?`hue-rotate(${I}deg) saturate(${1+I/100}) brightness(${1-I/300})`:void 0,animation:o?`${q} ${Z.animationDuration}s linear infinite`:void 0};return l.jsxs("div",{style:$,className:a,children:[l.jsx("div",{style:O,children:l.jsx("div",{style:he,children:l.jsx("div",{style:J,"aria-label":e.name})})}),n&&r>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:B,className:"animate-gunk-drip"}),H>0&&l.jsx("div",{style:R,className:"animate-pulse-glow"})]})]})}return l.jsxs("div",{style:$,className:a,children:[l.jsx("div",{style:O,className:o?"animate-creature-idle":"",children:l.jsx("img",{src:`/vibe-brushing/creatures/${e.id}.png`,alt:e.name,style:Q,onError:()=>f(!0)})}),n&&r>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:B,className:o?"animate-gunk-drip":""}),H>0&&l.jsx("div",{style:R,className:o?"animate-pulse-glow":""})]})]})}return l.jsx("div",{style:$,className:a,children:l.jsx(hy,{creature:e,size:t,animated:o,cleanProgress:b,gunkOpacity:L,redEyeOpacity:H,glowAmount:k,glowColor:v})})}function hy({creature:e,size:t,animated:n,cleanProgress:r,gunkOpacity:o,redEyeOpacity:a,glowAmount:u,glowColor:f}){const p={grassland:{primary:"#7FD858",secondary:"#FFB6C1",accent:"#FFD700"},coastal:{primary:"#4FC3F7",secondary:"#FFE082",accent:"#FF7043"},lava:{primary:"#FF7043",secondary:"#FFD54F",accent:"#F44336"},city:{primary:"#BA68C8",secondary:"#64B5F6",accent:"#FF4081"},sky:{primary:"#81D4FA",secondary:"#FFF59D",accent:"#FFFFFF"},all:{primary:"#F97316",secondary:"#FBBF24",accent:"#EF4444"}},y=p[e.region]||p.grassland,S=e.rarity==="legendary";return l.jsxs("svg",{viewBox:"0 0 100 100",width:t,height:t,style:{filter:u>0&&r>.5?`drop-shadow(0 0 ${u*r}px ${f})`:void 0},className:n?"animate-creature-idle":"",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:`fallback-body-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:y.primary,stopOpacity:"1"}),l.jsx("stop",{offset:"100%",stopColor:y.primary,stopOpacity:"0.7"})]}),l.jsxs("radialGradient",{id:`fallback-highlight-${e.id}`,cx:"30%",cy:"30%",r:"60%",children:[l.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.6"}),l.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})]}),l.jsx("ellipse",{cx:"50",cy:"55",rx:S?35:28,ry:S?32:26,fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"2"}),l.jsx("ellipse",{cx:"50",cy:"55",rx:S?35:28,ry:S?32:26,fill:`url(#fallback-highlight-${e.id})`}),l.jsx("ellipse",{cx:"40",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),l.jsx("ellipse",{cx:"60",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),l.jsx("ellipse",{cx:"42",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),l.jsx("ellipse",{cx:"62",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),l.jsx("ellipse",{cx:"43",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),l.jsx("ellipse",{cx:"63",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),l.jsx("path",{d:"M 44 65 Q 50 70 56 65",fill:"none",stroke:"#1A1A1A",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("ellipse",{cx:"32",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),l.jsx("ellipse",{cx:"68",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),e.monsterType.includes("bunny")||e.monsterType.includes("rabbit")?l.jsxs(l.Fragment,{children:[l.jsx("ellipse",{cx:"35",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),l.jsx("ellipse",{cx:"65",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("cat")||e.monsterType.includes("kitten")?l.jsxs(l.Fragment,{children:[l.jsx("path",{d:"M 30 40 L 25 20 L 40 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),l.jsx("path",{d:"M 70 40 L 75 20 L 60 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("dog")||e.monsterType.includes("pup")?l.jsxs(l.Fragment,{children:[l.jsx("ellipse",{cx:"28",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(-15 28 42)"}),l.jsx("ellipse",{cx:"72",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(15 72 42)"})]}):S?l.jsxs(l.Fragment,{children:[l.jsx("path",{d:"M 35 30 L 25 10 L 40 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),l.jsx("path",{d:"M 65 30 L 75 10 L 60 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),l.jsx("path",{d:"M 50 28 L 50 8",stroke:y.accent,strokeWidth:"3",strokeLinecap:"round"})]}):null,S&&l.jsx("g",{children:l.jsx("path",{d:"M 35 18 L 35 5 L 42 12 L 50 0 L 58 12 L 65 5 L 65 18",fill:"#FFD700",stroke:"#B8860B",strokeWidth:"1"})}),o>0&&l.jsxs("g",{opacity:o,children:[l.jsx("ellipse",{cx:"50",cy:"50",rx:"30",ry:"28",fill:"#32CD32",opacity:"0.5"}),l.jsx("path",{d:"M 25 35 Q 30 45 25 55 Q 20 65 30 70",fill:"#228B22",opacity:"0.6"}),l.jsx("path",{d:"M 75 35 Q 70 45 75 55 Q 80 65 70 70",fill:"#228B22",opacity:"0.6"}),l.jsx("circle",{cx:"35",cy:"42",r:"4",fill:"#32CD32"}),l.jsx("circle",{cx:"62",cy:"65",r:"5",fill:"#228B22"}),l.jsx("circle",{cx:"55",cy:"38",r:"3",fill:"#2E8B2E"})]}),a>0&&l.jsxs("g",{opacity:a,children:[l.jsx("ellipse",{cx:"40",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&l.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite"})}),l.jsx("ellipse",{cx:"60",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&l.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite",begin:"0.2s"})})]})]})}function py({creature:e,activeZones:t,overallProgress:n,compact:r=!1}){const o=e.region==="all"?"grassland":e.region,a=Op[o],u=Math.max(0,100-n),f=j.useMemo(()=>n>=100?"sparkling":n>=75?"happy":n>=50?"hopeful":n>=25?"waking":"gunked",[n]),p={gunked:"",waking:"",hopeful:"",happy:"",sparkling:""}[f];return r?l.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 bg-purple-900/40 rounded-xl backdrop-blur-sm",children:[l.jsxs("div",{className:`relative shrink-0 ${t.length>0?"animate-wiggle":""}`,style:{width:60,height:60},children:[l.jsx(rn,{creature:e,size:60,showGunk:!0,gunkLevel:u,animated:!0}),n>=100&&l.jsx("div",{className:"absolute -top-1 -right-1 text-lg",children:""})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-sm",children:p}),l.jsx("span",{className:"text-sm font-medium text-white truncate",children:e.name}),e.rarity!=="common"&&l.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),l.jsx("div",{className:"h-2 w-full rounded-full bg-purple-900/50 overflow-hidden",children:l.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":a.colors.primary}})}),l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsx("span",{className:"text-[10px] text-purple-300",children:n>=100?" Clean!":"Keep brushing"}),l.jsxs("span",{className:"text-[10px] text-purple-300",children:[Math.round(n),"%"]})]})]})]}):l.jsxs("div",{className:"relative h-full flex flex-col",children:[l.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${a.colors.background}80, ${a.colors.primary}40)`,boxShadow:e.rarity==="mythic"?"0 0 40px #F97316, 0 0 60px #F9731680":e.rarity==="legendary"?`0 0 30px ${a.colors.accent}60`:e.rarity==="rare"?`0 0 20px ${a.colors.primary}40`:"none"},children:[t.length>0&&l.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((y,S)=>l.jsx("div",{className:"absolute w-2 h-2 rounded-full animate-ping",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*70}%`,backgroundColor:a.colors.accent,animationDelay:`${S*.1}s`,animationDuration:"1s"}},S))}),l.jsxs("div",{className:`relative ${t.length>0?"animate-wiggle":""}`,children:[l.jsx(rn,{creature:e,size:140,showGunk:!0,gunkLevel:u,animated:!0}),n>=100&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((y,S)=>l.jsx("div",{className:"absolute text-xl animate-sparkle-float",style:{left:`${10+S%4*25}%`,top:`${10+Math.floor(S/4)*40}%`,animationDelay:`${S*.15}s`},children:""},S))})]}),l.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1.5 px-2 py-1 rounded-full text-white text-sm",style:{backgroundColor:`${a.colors.primary}CC`},children:[l.jsx("span",{className:"text-base",children:p}),l.jsx("span",{className:"font-medium",children:e.name}),e.rarity!=="common"&&l.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),l.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-white text-sm font-bold bg-black/40 backdrop-blur-sm",children:[Math.round(n),"%"]}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:l.jsxs("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden backdrop-blur-sm relative",children:[l.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":a.colors.accent}}),t.length>0&&n<100&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow animate-pulse",children:"Brushing..."})}),n>=100&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow",children:" Clean! "})})]})})]}),l.jsx("style",{children:`
        @keyframes sparkle-float {
          0%, 100% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          50% {
            transform: translateY(-10px) scale(1.2);
            opacity: 0.8;
          }
        }
        .animate-sparkle-float {
          animation: sparkle-float 1.5s ease-in-out infinite;
        }
      `})]})}const my=e=>{const t="/vibe-brushing/";return{grassland:`${t}creatures/bg-grassland.png`,coastal:`${t}creatures/bg-coastal.png`,lava:`${t}creatures/bg-lava.png`,city:`${t}creatures/bg-city.png`,sky:`${t}creatures/bg-sky.png`}[e]};function Ea({region:e}){const t=oy(e),[n,r]=j.useState([]),[o,a]=j.useState(!1),u=my(e),f=j.useMemo(()=>{const{colors:p}=t;switch(e){case"grassland":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            #98D8C8 30%, 
            ${p.secondary} 60%, 
            ${p.primary} 100%)`};case"coastal":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            ${p.secondary} 40%, 
            ${p.primary} 70%, 
            #1E3A5F 100%)`};case"lava":return{background:`linear-gradient(180deg, 
            #1C1917 0%, 
            #292524 30%, 
            ${p.secondary} 70%, 
            ${p.primary} 100%)`};case"city":return{background:`linear-gradient(180deg, 
            #0F0B1A 0%, 
            #1E1433 30%, 
            ${p.primary}40 70%, 
            ${p.secondary}60 100%)`};case"sky":return{background:`linear-gradient(180deg, 
            #1E3A5F 0%, 
            ${p.secondary} 30%, 
            ${p.primary} 60%, 
            #FEF9C3 100%)`};default:return{background:p.background}}},[e,t]);return j.useEffect(()=>{a(!1);const p=new Image;p.src=u,p.onload=()=>a(!0)},[u]),j.useEffect(()=>{const p=[];for(let S=0;S<12;S++)p.push({id:S,emoji:t.particles[S%t.particles.length],x:Math.random()*100,y:Math.random()*100,size:.8+Math.random()*.8,speed:15+Math.random()*20,delay:Math.random()*10,drift:(Math.random()-.5)*30});r(p)},[e,t.particles]),l.jsxs("div",{className:"absolute inset-0 overflow-hidden transition-all duration-1000",style:f,children:[l.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{backgroundImage:`url(${u})`,backgroundSize:"cover",backgroundPosition:"center",opacity:o?1:0}}),l.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.3) 100%)"}}),e==="lava"&&l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 opacity-60",style:{background:"linear-gradient(180deg, transparent 0%, #EF4444 50%, #FCD34D 100%)",animation:"pulse 2s ease-in-out infinite"}}),l.jsx("div",{className:"absolute bottom-0 left-1/4 w-1/2 h-1/4 opacity-40 rounded-t-full",style:{background:"radial-gradient(ellipse at bottom, #FBBF24 0%, transparent 70%)",animation:"pulse 3s ease-in-out infinite"}})]}),e==="city"&&l.jsx("div",{className:"absolute inset-0",children:[...Array(8)].map((p,y)=>l.jsx("div",{className:"absolute bottom-0 bg-gradient-to-t from-purple-900 to-transparent",style:{left:`${y*14+Math.random()*5}%`,width:`${3+Math.random()*4}%`,height:`${20+Math.random()*40}%`,opacity:.6},children:[...Array(Math.floor(Math.random()*5)+2)].map((S,C)=>l.jsx("div",{className:"absolute w-1 h-1 rounded-full",style:{left:`${20+Math.random()*60}%`,top:`${10+C*15+Math.random()*10}%`,backgroundColor:["#22D3EE","#E879F9","#FBBF24"][Math.floor(Math.random()*3)],animation:`pulse ${1+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},C))},y))}),e==="sky"&&l.jsx("div",{className:"absolute inset-0",children:[...Array(5)].map((p,y)=>l.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${y*25-10+Math.random()*20}%`,top:`${60+Math.random()*30}%`,width:`${15+Math.random()*20}%`,height:`${8+Math.random()*8}%`,animation:`float ${8+Math.random()*4}s ease-in-out infinite`,animationDelay:`${Math.random()*4}s`}},y))}),e==="coastal"&&l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-1/4",children:[l.jsx("div",{className:"absolute inset-0 opacity-50",style:{background:"linear-gradient(180deg, transparent 0%, #0EA5E9 100%)"}}),[...Array(3)].map((p,y)=>l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-white/30 rounded-full",style:{transform:`translateY(${y*-8}px)`,animation:`wave ${3+y*.5}s ease-in-out infinite`,animationDelay:`${y*.3}s`}},y))]}),e==="grassland"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/6",children:l.jsxs("svg",{viewBox:"0 0 100 20",className:"w-full h-full",preserveAspectRatio:"none",children:[l.jsx("path",{d:"M0 20 Q 10 10, 20 15 T 40 12 T 60 16 T 80 10 T 100 14 L 100 20 Z",fill:"#22C55E",opacity:"0.8"}),l.jsx("path",{d:"M0 20 Q 15 15, 25 18 T 50 14 T 75 17 T 100 12 L 100 20 Z",fill:"#16A34A",opacity:"0.6"})]})}),n.map(p=>l.jsx("div",{className:"absolute pointer-events-none select-none",style:{left:`${p.x}%`,fontSize:`${p.size}rem`,animation:`floatParticle ${p.speed}s linear infinite`,animationDelay:`${p.delay}s`,"--drift":`${p.drift}px`},children:p.emoji},p.id)),l.jsx("style",{children:`
        @keyframes floatParticle {
          0% {
            transform: translateY(100vh) translateX(0);
            opacity: 0;
          }
          10% {
            opacity: 0.8;
          }
          90% {
            opacity: 0.8;
          }
          100% {
            transform: translateY(-20vh) translateX(var(--drift));
            opacity: 0;
          }
        }
        
        @keyframes wave {
          0%, 100% {
            transform: translateX(-5%) scaleY(1);
          }
          50% {
            transform: translateX(5%) scaleY(1.2);
          }
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0) translateX(0);
          }
          50% {
            transform: translateY(-10px) translateX(10px);
          }
        }
      `})]})}function gy({zoneProgress:e,overallProgress:t}){const n=t>=100;return l.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"text-purple-300",children:"Brushing Progress"}),l.jsxs("span",{className:"text-white font-bold",children:[Math.round(t),"%"]})]}),l.jsxs("div",{className:"h-6 bg-purple-900/50 rounded-full overflow-hidden relative",children:[l.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${n?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${t}%`}}),n&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-bold text-white drop-shadow animate-pulse",children:" Complete! Keep brushing! "})})]})]}),l.jsx("div",{className:"text-center text-sm text-purple-300",children:n?l.jsx("span",{className:"text-green-400",children:"Great job! Keep it up to stay clean!"}):t>0?l.jsx("span",{children:"Keep brushing to fill the bar!"}):l.jsx("span",{children:"Start brushing to see progress"})})]})}function yy({timeRemaining:e,totalTime:t}){const n=Math.floor(e/60),r=e%60,o=(t-e)/t*100,a=e<=30;return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{className:"w-full h-full -rotate-90",children:[l.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:"rgba(139, 92, 246, 0.3)",strokeWidth:"8"}),l.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:a?"#F59E0B":"#8B5CF6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-o/100)}`,className:"transition-all duration-1000"})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("span",{className:`text-2xl font-bold ${a?"text-amber-400 animate-pulse":"text-white"}`,children:[n,":",r.toString().padStart(2,"0")]})})]}),l.jsx("div",{className:"mt-2 text-sm text-purple-300",children:a?"Almost done!":"Keep brushing!"})]})}const vy=3e3;function xy(e){return e<=60?[20,40]:e<=120?[30,60,90]:[45,90,135]}function wy({selectedHat:e,capturedCreatureIds:t,onComplete:n,onCancel:r}){const o=j.useMemo(()=>$p(),[]),a=j.useMemo(()=>xy(o),[o]),[u,f]=j.useState("countdown"),[p,y]=j.useState(3),[S,C]=j.useState(o),[N,K]=j.useState([]),[G,M]=j.useState(""),[ee]=j.useState(()=>iy()),[k,v]=j.useState(null),b=j.useRef(new Set),L=j.useRef(Date.now()),I=j.useRef(null),{startCamera:H,captureFrameWithHat:$,stopCamera:O,registerVideoElement:Q}=gs(),B=j.useRef(null),R=j.useRef({width:0,height:0}),ie=(k==null?void 0:k.rarity)==="legendary"||(k==null?void 0:k.rarity)==="mythic",Z=ry(ee,ie),ce=j.useCallback(xe=>{B.current=xe,xe&&Q(xe)},[Q]),[de,ue]=j.useState(!1),{zoneProgress:he,motionResults:q,overallProgress:J,startDetection:oe,stopDetection:Se,setFaceRegion:je,setDebugMode:Ie,getDebugInfo:Ae}=Mp({targetCleaningTime:25}),{facePosition:ze,startTracking:Ue,stopTracking:We}=Ip(),vt=j.useRef(new Set),Be=j.useRef(!1),me=j.useRef(!1);j.useEffect(()=>{je(ze?{x:ze.x,y:ze.y,width:ze.width,height:ze.height}:null)},[ze,je]),j.useEffect(()=>{const xe=Bp(85,t,ee);v(xe),((xe==null?void 0:xe.rarity)==="legendary"||(xe==null?void 0:xe.rarity)==="mythic")&&pr("legendary-intro")},[ee,t]),j.useEffect(()=>(Be.current||(Be.current=!0,H()),()=>{Se(),We(),I.current&&clearInterval(I.current)}),[H,Se,We]),j.useEffect(()=>{he.forEach(xe=>{xe.isComplete&&!vt.current.has(xe.zoneId)&&(vt.current.add(xe.zoneId),pr("sparkle"))})},[he]),j.useEffect(()=>{q.some(Ne=>Ne.hasMotion)&&(L.current=Date.now())},[q]),j.useEffect(()=>{if(u==="brushing")return I.current=window.setInterval(()=>{Date.now()-L.current>vy&&(M("Can't see you brushing! Move closer to the camera."),f("paused"))},500),()=>{I.current&&clearInterval(I.current)}},[u]);const xt=j.useCallback(xe=>{oe(xe),Ue(xe),L.current=Date.now()},[oe,Ue]),X=j.useCallback((xe,Ne)=>{R.current={width:xe,height:Ne}},[]),be=j.useCallback(async()=>{const xe=e?{imageUrl:e.imageUrl,facePosition:ze||null,containerWidth:R.current.width,containerHeight:R.current.height}:null;return $(xe)},[e,ze,$]),Ce=j.useCallback(()=>{ue(xe=>{const Ne=!xe;return Ie(Ne),Ne})},[Ie]);j.useEffect(()=>{if(u!=="countdown")return;if(p<=0){f("brushing"),L.current=Date.now();return}const xe=setTimeout(()=>{y(Ne=>Ne-1)},1e3);return()=>clearTimeout(xe)},[p,u]),j.useEffect(()=>{if(u!=="brushing")return;if(S<=0){Me();return}const xe=setInterval(()=>{C(Ne=>Ne-1)},1e3);return()=>clearInterval(xe)},[S,u]),j.useEffect(()=>{if(u!=="brushing")return;const xe=o-S;a.forEach(Ne=>{xe>=Ne&&!b.current.has(Ne)&&(b.current.add(Ne),be().then(gn=>{gn&&K(Ct=>[...Ct,gn])}))})},[S,u,be,a,o]),j.useEffect(()=>{u==="brushing"&&!me.current?(me.current=!0,Z.start()):u==="paused"?(Z.stop(),me.current=!1):u==="complete"&&Z.stop()},[u,Z]),j.useEffect(()=>{if(u!=="brushing")return;const xe=o-S,Ne=o/2;xe>=Ne?Z.setIntensity("excited"):Z.setIntensity("calm")},[S,u,Z]);const Me=j.useCallback(async()=>{f("complete"),Z.stop(),Se(),We();const xe=await be(),Ne=xe?[...N,xe]:N;setTimeout(()=>{O(),n({cleaningPercentage:J,zoneProgress:he,photos:Ne,region:ee,creature:k})},500)},[Se,We,be,N,J,he,n,O,Z,ee,k]),st=j.useCallback(()=>{L.current=Date.now(),f("brushing"),M("")},[]),Le=j.useCallback(async()=>{const xe=await be();xe&&K(Ne=>[...Ne,xe])},[be]),At=j.useCallback(()=>{Z.stop(),O(),r()},[O,r,Z]),ft=q.filter(xe=>xe.hasMotion).map(xe=>xe.zoneId);return u==="countdown"?l.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0",children:l.jsx(Ea,{region:ee})}),l.jsxs("div",{className:"relative z-10 text-center",children:[l.jsx("div",{className:"text-6xl font-bold text-white animate-bounce-gentle drop-shadow-lg",children:p>0?p:"GO!"}),l.jsx("div",{className:"text-xl text-white/80 mt-4 drop-shadow",children:"Get ready to brush!"}),k&&l.jsxs("div",{className:"mt-6 text-center",children:[l.jsx("div",{className:"text-lg text-white/70",children:"Today's creature:"}),l.jsx("div",{className:`text-2xl font-bold ${k.rarity==="mythic"?"text-orange-400 animate-pulse":k.rarity==="legendary"?"text-yellow-400 animate-pulse":k.rarity==="rare"?"text-purple-400":"text-white"}`,children:k.name})]}),l.jsx("button",{onClick:At,className:"mt-8 px-6 py-2 text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Cancel"})]})]}):u==="paused"?l.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full p-6 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0",children:l.jsx(Ea,{region:ee})}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[l.jsx("div",{className:"text-6xl mb-6",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-yellow-400 mb-4 drop-shadow-lg",children:"Paused!"}),l.jsx("p",{className:"text-xl text-white text-center mb-6 max-w-xs drop-shadow",children:G}),l.jsx("div",{className:"w-full max-w-xs aspect-video bg-black/30 rounded-2xl overflow-hidden mb-6 backdrop-blur-sm",children:l.jsx("video",{ref:ce,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"})}),l.jsxs("div",{className:"text-sm text-white/80 mb-4",children:["Time remaining: ",Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]}),l.jsx("button",{onClick:st,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform mb-3",children:"I'm Ready! "}),l.jsx("button",{onClick:At,className:"w-full max-w-xs py-3 text-lg text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Stop Session"})]})]}):l.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0",children:l.jsx(Ea,{region:ee})}),l.jsxs("div",{className:"relative z-10 flex flex-col h-full p-2 gap-2",children:[l.jsxs("div",{className:"h-2/3 relative overflow-hidden",children:[l.jsx(cy,{selectedHat:e,facePosition:ze,onVideoReady:xt,onContainerSize:X,isBrushing:q.some(xe=>xe.hasMotion),debugMode:de,getDebugInfo:Ae}),l.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start pointer-events-auto z-20",children:[l.jsx("button",{onClick:At,className:"px-3 py-1.5 text-sm text-white/80 bg-black/50 rounded-xl backdrop-blur-sm pointer-events-auto",children:""}),l.jsx(yy,{timeRemaining:S,totalTime:o}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:Ce,className:`px-2 py-1.5 text-sm rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto ${de?"text-yellow-400 bg-yellow-900/80":"text-white/60 bg-black/50"}`,children:""}),l.jsx("button",{onClick:Le,className:"px-2 py-1.5 text-sm text-white bg-pink-600/80 rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto",children:""})]})]})]}),l.jsx("div",{className:"h-1/3 overflow-auto",children:k?l.jsx(py,{creature:k,activeZones:ft,overallProgress:J}):l.jsx(gy,{zoneProgress:he,overallProgress:J})}),N.length>0&&l.jsxs("div",{className:"flex justify-center gap-2",children:[N.slice(-3).map((xe,Ne)=>l.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-sparkle"},Ne)),l.jsxs("span",{className:"text-xs text-white/70 ml-2",children:[N.length," photos"]})]})]})]})}function by({cleaningPercentage:e,onContinue:t}){const n=ky(e),r=e>=100;return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[l.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:n.emoji}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.title}),l.jsxs("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent mb-4",children:[Math.round(e),"%"]}),l.jsx("p",{className:"text-lg text-purple-200 mb-6 max-w-xs",children:n.message}),l.jsx("div",{className:"w-full max-w-xs mb-8",children:l.jsxs("div",{className:`p-4 rounded-xl ${r?"bg-green-900/50":"bg-purple-900/50"}`,children:[l.jsx("div",{className:"text-4xl mb-2",children:r?"":""}),l.jsx("div",{className:"text-sm text-purple-300 mb-2",children:"Brushing Score"}),l.jsx("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${r?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${e}%`}})}),l.jsx("div",{className:`text-lg font-bold mt-2 ${r?"text-green-400":"text-purple-400"}`,children:r?"Complete!":"Keep practicing!"})]})}),l.jsx("button",{onClick:t,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl animate-button-glow",children:"Catch a Creature! "})]})}function ky(e){return e>=95?{emoji:"",title:"LEGENDARY!",message:"Your teeth are sparkling like diamonds! Amazing job!"}:e>=80?{emoji:"",title:"Super Clean!",message:"Wow! Your teeth are super sparkly! Great brushing!"}:e>=60?{emoji:"",title:"Good Job!",message:"Nice work! A little more brushing next time!"}:e>=40?{emoji:"",title:"Keep Trying!",message:"You can do better! Brush all areas next time!"}:{emoji:"",title:"Try Again!",message:"Don't give up! Brush longer next time!"}}var Wp={exports:{}};(function(e,t){((n,r)=>{e.exports=r()})(Xc,function(){var n=function(i,s){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,d){c.__proto__=d}:function(c,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(c[h]=d[h])}))(i,s)},r=function(){return(r=Object.assign||function(i){for(var s,c=1,d=arguments.length;c<d;c++)for(var h in s=arguments[c])Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h]);return i}).apply(this,arguments)};function o(i,s,c){for(var d,h=0,g=s.length;h<g;h++)!d&&h in s||((d=d||Array.prototype.slice.call(s,0,h))[h]=s[h]);return i.concat(d||Array.prototype.slice.call(s))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Xc,u=Object.keys,f=Array.isArray;function p(i,s){return typeof s=="object"&&u(s).forEach(function(c){i[c]=s[c]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var y=Object.getPrototypeOf,S={}.hasOwnProperty;function C(i,s){return S.call(i,s)}function N(i,s){typeof s=="function"&&(s=s(y(i))),(typeof Reflect>"u"?u:Reflect.ownKeys)(s).forEach(function(c){G(i,c,s[c])})}var K=Object.defineProperty;function G(i,s,c,d){K(i,s,p(c&&C(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function M(i){return{from:function(s){return i.prototype=Object.create(s.prototype),G(i.prototype,"constructor",i),{extend:N.bind(null,i.prototype)}}}}var ee=Object.getOwnPropertyDescriptor,k=[].slice;function v(i,s,c){return k.call(i,s,c)}function b(i,s){return s(i)}function L(i){if(!i)throw new Error("Assertion Failed")}function I(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function H(i,s){if(typeof s=="string"&&C(i,s))return i[s];if(!s)return i;if(typeof s!="string"){for(var c=[],d=0,h=s.length;d<h;++d){var g=H(i,s[d]);c.push(g)}return c}var x,w=s.indexOf(".");return w===-1||(x=i[s.substr(0,w)])==null?void 0:H(x,s.substr(w+1))}function $(i,s,c){if(i&&s!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof s!="string"&&"length"in s){L(typeof c!="string"&&"length"in c);for(var d=0,h=s.length;d<h;++d)$(i,s[d],c[d])}else{var g,x,w=s.indexOf(".");w!==-1?(g=s.substr(0,w),(w=s.substr(w+1))===""?c===void 0?f(i)&&!isNaN(parseInt(g))?i.splice(g,1):delete i[g]:i[g]=c:$(x=(x=i[g])&&C(i,g)?x:i[g]={},w,c)):c===void 0?f(i)&&!isNaN(parseInt(s))?i.splice(s,1):delete i[s]:i[s]=c}}function O(i){var s,c={};for(s in i)C(i,s)&&(c[s]=i[s]);return c}var Q=[].concat;function B(i){return Q.apply([],i)}var je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(s){return s+i+"Array"})}))).filter(function(i){return a[i]}),R=new Set(je.map(function(i){return a[i]})),ie=null;function Z(i){return ie=new WeakMap,i=function s(c){if(!c||typeof c!="object")return c;var d=ie.get(c);if(d)return d;if(f(c)){d=[],ie.set(c,d);for(var h=0,g=c.length;h<g;++h)d.push(s(c[h]))}else if(R.has(c.constructor))d=c;else{var x,w=y(c);for(x in d=w===Object.prototype?{}:Object.create(w),ie.set(c,d),c)C(c,x)&&(d[x]=s(c[x]))}return d}(i),ie=null,i}var ce={}.toString;function de(i){return ce.call(i).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",he=typeof ue=="symbol"?function(i){var s;return i!=null&&(s=i[ue])&&s.apply(i)}:function(){return null};function q(i,s){s=i.indexOf(s),0<=s&&i.splice(s,1)}var J={};function oe(i){var s,c,d,h;if(arguments.length===1){if(f(i))return i.slice();if(this===J&&typeof i=="string")return[i];if(h=he(i))for(c=[];!(d=h.next()).done;)c.push(d.value);else{if(i==null)return[i];if(typeof(s=i.length)!="number")return[i];for(c=new Array(s);s--;)c[s]=i[s]}}else for(s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return c}var Se=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ot=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(je),Ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(i,s){this.name=i,this.message=s}function ze(i,s){return i+". Errors: "+Object.keys(s).map(function(c){return s[c].toString()}).filter(function(c,d,h){return h.indexOf(c)===d}).join(`
`)}function Ue(i,s,c,d){this.failures=s,this.failedKeys=d,this.successCount=c,this.message=ze(i,s)}function We(i,s){this.name="BulkError",this.failures=Object.keys(s).map(function(c){return s[c]}),this.failuresByPos=s,this.message=ze(i,this.failures)}M(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(Ue).from(Ae),M(We).from(Ae);var vt=Ot.reduce(function(i,s){return i[s]=s+"Error",i},{}),Be=Ae,me=Ot.reduce(function(i,s){var c=s+"Error";function d(h,g){this.name=c,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Ie[s]||c,this.inner=null)}return M(d).from(Be),i[s]=d,i},{}),xt=(me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError,je.reduce(function(i,s){return i[s+"Error"]=me[s],i},{}));je=Ot.reduce(function(i,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(i[s+"Error"]=me[s]),i},{});function X(){}function be(i){return i}function Ce(i,s){return i==null||i===be?s:function(c){return s(i(c))}}function Me(i,s){return function(){i.apply(this,arguments),s.apply(this,arguments)}}function st(i,s){return i===X?s:function(){var c=i.apply(this,arguments),d=(c!==void 0&&(arguments[0]=c),this.onsuccess),h=this.onerror,g=(this.onsuccess=null,this.onerror=null,s.apply(this,arguments));return d&&(this.onsuccess=this.onsuccess?Me(d,this.onsuccess):d),h&&(this.onerror=this.onerror?Me(h,this.onerror):h),g!==void 0?g:c}}function Le(i,s){return i===X?s:function(){i.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Me(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Me(d,this.onerror):d)}}function At(i,s){return i===X?s:function(h){var d=i.apply(this,arguments),h=(p(h,d),this.onsuccess),g=this.onerror,x=(this.onsuccess=null,this.onerror=null,s.apply(this,arguments));return h&&(this.onsuccess=this.onsuccess?Me(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Me(g,this.onerror):g),d===void 0?x===void 0?void 0:x:p(d,x)}}function ft(i,s){return i===X?s:function(){return s.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function xe(i,s){return i===X?s:function(){var c=i.apply(this,arguments);if(c&&typeof c.then=="function"){for(var d=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return c.then(function(){return s.apply(d,g)})}return s.apply(this,arguments)}}je.ModifyError=Ue,je.DexieError=Ae,je.BulkError=We;var Ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gn(i){Ne=i}var Ct={},nr=100,gi=typeof Promise>"u"?[]:(Ot=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[gi=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(gi),Ot]:[Ot,y(Ot),Ot]),Ot=gi[0],Dr=gi[1],Dr=Dr&&Dr.then,rr=Ot&&Ot.constructor,ys=!!gi[2],yi=function(i,s){vi.push([i,s]),bo&&(queueMicrotask(qp),bo=!1)},vs=!0,bo=!0,ir=[],ko=[],xs=be,_n={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:X,pgp:!1,env:{},finalize:X},we=_n,vi=[],or=0,jo=[];function fe(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=we;if(typeof i!="function"){if(i!==Ct)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&bs(this,this._value)}else this._state=null,this._value=null,++s.ref,function c(d,h){try{h(function(g){if(d._state===null){if(g===d)throw new TypeError("A promise cannot be resolved with itself.");var x=d._lib&&Er();g&&typeof g.then=="function"?c(d,function(w,_){g instanceof fe?g._then(w,_):g.then(w,_)}):(d._state=!0,d._value=g,xc(d)),x&&Tr()}},bs.bind(null,d))}catch(g){bs(d,g)}}(this,i)}var ws={get:function(){var i=we,s=Eo;function c(d,h){var g=this,x=!i.global&&(i!==we||s!==Eo),w=x&&!An(),_=new fe(function(V,P){ks(g,new vc(bc(d,i,x,w),bc(h,i,x,w),V,P,i))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return c.prototype=Ct,c},set:function(i){G(this,"then",i&&i.prototype===Ct?ws:{get:function(){return i},set:ws.set})}};function vc(i,s,c,d,h){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof s=="function"?s:null,this.resolve=c,this.reject=d,this.psd=h}function bs(i,s){var c,d;ko.push(s),i._state===null&&(c=i._lib&&Er(),s=xs(s),i._state=!1,i._value=s,d=i,ir.some(function(h){return h._value===d._value})||ir.push(d),xc(i),c)&&Tr()}function xc(i){var s=i._listeners;i._listeners=[];for(var c=0,d=s.length;c<d;++c)ks(i,s[c]);var h=i._PSD;--h.ref||h.finalize(),or===0&&(++or,yi(function(){--or==0&&js()},[]))}function ks(i,s){if(i._state===null)i._listeners.push(s);else{var c=i._state?s.onFulfilled:s.onRejected;if(c===null)return(i._state?s.resolve:s.reject)(i._value);++s.psd.ref,++or,yi(Hp,[c,i,s])}}function Hp(i,s,c){try{var d,h=s._value;!s._state&&ko.length&&(ko=[]),d=Ne&&s._consoleTask?s._consoleTask.run(function(){return i(h)}):i(h),s._state||ko.indexOf(h)!==-1||(g=>{for(var x=ir.length;x;)if(ir[--x]._value===g._value)return ir.splice(x,1)})(s),c.resolve(d)}catch(g){c.reject(g)}finally{--or==0&&js(),--c.psd.ref||c.psd.finalize()}}function qp(){ar(_n,function(){Er()&&Tr()})}function Er(){var i=vs;return bo=vs=!1,i}function Tr(){var i,s,c;do for(;0<vi.length;)for(i=vi,vi=[],c=i.length,s=0;s<c;++s){var d=i[s];d[0].apply(null,d[1])}while(0<vi.length);bo=vs=!0}function js(){for(var i=ir,s=(ir=[],i.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)}),jo.slice(0)),c=s.length;c;)s[--c]()}function So(i){return new fe(Ct,!1,i)}function qe(i,s){var c=we;return function(){var d=Er(),h=we;try{return Rn(c,!0),i.apply(this,arguments)}catch(g){s&&s(g)}finally{Rn(h,!1),d&&Tr()}}}N(fe.prototype,{then:ws,_then:function(i,s){ks(this,new vc(null,null,i,s,we))},catch:function(i){var s,c;return arguments.length===1?this.then(null,i):(s=i,c=arguments[1],typeof s=="function"?this.then(null,function(d){return(d instanceof s?c:So)(d)}):this.then(null,function(d){return(d&&d.name===s?c:So)(d)}))},finally:function(i){return this.then(function(s){return fe.resolve(i()).then(function(){return s})},function(s){return fe.resolve(i()).then(function(){return So(s)})})},timeout:function(i,s){var c=this;return i<1/0?new fe(function(d,h){var g=setTimeout(function(){return h(new me.Timeout(s))},i);c.then(d,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&G(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),_n.env=wc(),N(fe,{all:function(){var i=oe.apply(null,arguments).map(To);return new fe(function(s,c){i.length===0&&s([]);var d=i.length;i.forEach(function(h,g){return fe.resolve(h).then(function(x){i[g]=x,--d||s(i)},c)})})},resolve:function(i){return i instanceof fe?i:i&&typeof i.then=="function"?new fe(function(s,c){i.then(s,c)}):new fe(Ct,!0,i)},reject:So,race:function(){var i=oe.apply(null,arguments).map(To);return new fe(function(s,c){i.map(function(d){return fe.resolve(d).then(s,c)})})},PSD:{get:function(){return we},set:function(i){return we=i}},totalEchoes:{get:function(){return Eo}},newPSD:Pn,usePSD:ar,scheduler:{get:function(){return yi},set:function(i){yi=i}},rejectionMapper:{get:function(){return xs},set:function(i){xs=i}},follow:function(i,s){return new fe(function(c,d){return Pn(function(h,g){var x=we;x.unhandleds=[],x.onunhandled=g,x.finalize=Me(function(){var w,_=this;w=function(){_.unhandleds.length===0?h():g(_.unhandleds[0])},jo.push(function V(){w(),jo.splice(jo.indexOf(V),1)}),++or,yi(function(){--or==0&&js()},[])},x.finalize),i()},s,c,d)})}}),rr&&(rr.allSettled&&G(fe,"allSettled",function(){var i=oe.apply(null,arguments).map(To);return new fe(function(s){i.length===0&&s([]);var c=i.length,d=new Array(c);i.forEach(function(h,g){return fe.resolve(h).then(function(x){return d[g]={status:"fulfilled",value:x}},function(x){return d[g]={status:"rejected",reason:x}}).then(function(){return--c||s(d)})})})}),rr.any&&typeof AggregateError<"u"&&G(fe,"any",function(){var i=oe.apply(null,arguments).map(To);return new fe(function(s,c){i.length===0&&c(new AggregateError([]));var d=i.length,h=new Array(d);i.forEach(function(g,x){return fe.resolve(g).then(function(w){return s(w)},function(w){h[x]=w,--d||c(new AggregateError(h))})})})}),rr.withResolvers)&&(fe.withResolvers=rr.withResolvers);var lt={awaits:0,echoes:0,id:0},Gp=0,Co=[],No=0,Eo=0,Yp=0;function Pn(i,x,c,d){var h=we,g=Object.create(h),x=(g.parent=h,g.ref=0,g.global=!1,g.id=++Yp,_n.env,g.env=ys?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject}:{},x&&p(g,x),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},ar(g,i,c,d));return g.ref===0&&g.finalize(),x}function _r(){return lt.id||(lt.id=++Gp),++lt.awaits,lt.echoes+=nr,lt.id}function An(){return!!lt.awaits&&(--lt.awaits==0&&(lt.id=0),lt.echoes=lt.awaits*nr,!0)}function To(i){return lt.echoes&&i&&i.constructor===rr?(_r(),i.then(function(s){return An(),s},function(s){return An(),tt(s)})):i}function Qp(){var i=Co[Co.length-1];Co.pop(),Rn(i,!1)}function Rn(i,s){var c,d,h=we;(s?!lt.echoes||No++&&i===we:!No||--No&&i===we)||queueMicrotask(s?(function(g){++Eo,lt.echoes&&--lt.echoes!=0||(lt.echoes=lt.awaits=lt.id=0),Co.push(we),Rn(g,!0)}).bind(null,i):Qp),i!==we&&(we=i,h===_n&&(_n.env=wc()),ys)&&(c=_n.env.Promise,d=i.env,h.global||i.global)&&(Object.defineProperty(a,"Promise",d.PromiseProp),c.all=d.all,c.race=d.race,c.resolve=d.resolve,c.reject=d.reject,d.allSettled&&(c.allSettled=d.allSettled),d.any)&&(c.any=d.any)}function wc(){var i=a.Promise;return ys?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function ar(i,s,c,d,h){var g=we;try{return Rn(i,!0),s(c,d,h)}finally{Rn(g,!1)}}function bc(i,s,c,d){return typeof i!="function"?i:function(){var h=we;c&&_r(),Rn(s,!0);try{return i.apply(this,arguments)}finally{Rn(h,!1),d&&queueMicrotask(An)}}}function Ss(i){Promise===rr&&lt.echoes===0?No===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Dr).indexOf("[native code]")===-1&&(_r=An=X);var tt=fe.reject,sr="",yn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kc="String expected.",Pr=[],_o="__dbnames",Cs="readonly",Ns="readwrite";function lr(i,s){return i?s?function(){return i.apply(this,arguments)&&s.apply(this,arguments)}:i:s}var jc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Po(i){return typeof i!="string"||/\./.test(i)?function(s){return s}:function(s){return s[i]===void 0&&i in s&&delete(s=Z(s))[i],s}}function Sc(){throw me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function _e(i,s){try{var c=Cc(i),d=Cc(s);if(c!==d)return c==="Array"?1:d==="Array"?-1:c==="binary"?1:d==="binary"?-1:c==="string"?1:d==="string"?-1:c==="Date"?1:d!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return s<i?1:i<s?-1:0;case"binary":for(var h=Nc(i),g=Nc(s),x=h.length,w=g.length,_=x<w?x:w,V=0;V<_;++V)if(h[V]!==g[V])return h[V]<g[V]?-1:1;return x===w?0:x<w?-1:1;case"Array":for(var P=i,E=s,F=P.length,D=E.length,A=F<D?F:D,T=0;T<A;++T){var U=_e(P[T],E[T]);if(U!==0)return U}return F===D?0:F<D?-1:1}}catch{}return NaN}function Cc(i){var s=typeof i;return s=="object"&&(ArrayBuffer.isView(i)||(s=de(i))==="ArrayBuffer")?"binary":s}function Nc(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}function Ao(i,s,c){var d=i.schema.yProps;return d?(s&&0<c.numFailures&&(s=s.filter(function(h,g){return!c.failures[g]})),Promise.all(d.map(function(h){return h=h.updatesTable,s?i.db.table(h).where("k").anyOf(s).delete():i.db.table(h).clear()})).then(function(){return c})):c}Ec.prototype.execute=function(i){var s=this["@@propmod"];if(s.add!==void 0){var c=s.add;if(f(c))return o(o([],f(i)?i:[],!0),c).sort();if(typeof c=="number")return(Number(i)||0)+c;if(typeof c=="bigint")try{return BigInt(i)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(s.remove!==void 0){var d=s.remove;if(f(d))return f(i)?i.filter(function(h){return!d.includes(h)}).sort():[];if(typeof d=="number")return Number(i)-d;if(typeof d=="bigint")try{return BigInt(i)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}return c=(c=s.replacePrefix)==null?void 0:c[0],c&&typeof i=="string"&&i.startsWith(c)?s.replacePrefix[1]+i.substring(c.length):i};var xi=Ec;function Ec(i){this["@@propmod"]=i}function Tc(i,s){for(var c=u(s),d=c.length,h=!1,g=0;g<d;++g){var x=c[g],w=s[x],_=H(i,x);w instanceof xi?($(i,x,w.execute(_)),h=!0):_!==w&&($(i,x,w),h=!0)}return h}$e.prototype._trans=function(i,s,c){var d=this._tx||we.trans,h=this.name,g=Ne&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function x(V,P,E){if(E.schema[h])return s(E.idbtrans,E);throw new me.NotFound("Table "+h+" not part of transaction")}var w=Er();try{var _=d&&d.db._novip===this.db._novip?d===we.trans?d._promise(i,x,c):Pn(function(){return d._promise(i,x,c)},{trans:d,transless:we.transless||we}):function V(P,E,F,D){if(P.idbdb&&(P._state.openComplete||we.letThrough||P._vip)){var A=P._createTransaction(E,F,P._dbSchema);try{A.create(),P._state.PR1398_maxLoop=3}catch(T){return T.name===vt.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return V(P,E,F,D)})):tt(T)}return A._promise(E,function(T,U){return Pn(function(){return we.trans=A,D(T,U,A)})}).then(function(T){if(E==="readwrite")try{A.idbtrans.commit()}catch{}return E==="readonly"?T:A._completion.then(function(){return T})})}if(P._state.openComplete)return tt(new me.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return tt(new me.DatabaseClosed);P.open().catch(X)}return P._state.dbReadyPromise.then(function(){return V(P,E,F,D)})}(this.db,i,[this.name],x);return g&&(_._consoleTask=g,_=_.catch(function(V){return console.trace(V),tt(V)})),_}finally{w&&Tr()}},$e.prototype.get=function(i,s){var c=this;return i&&i.constructor===Object?this.where(i).first(s):i==null?tt(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(d){return c.core.get({trans:d,key:i}).then(function(h){return c.hook.reading.fire(h)})}).then(s)},$e.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(f(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var s=u(i);if(s.length===1)return this.where(s[0]).equals(i[s[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&s.every(function(V){return 0<=w.keyPath.indexOf(V)})){for(var _=0;_<s.length;++_)if(s.indexOf(w.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(w,_){return w.keyPath.length-_.keyPath.length})[0];if(c&&this.db._maxKey!==sr)return x=c.keyPath.slice(0,s.length),this.where(x).equals(x.map(function(w){return i[w]}));!c&&Ne&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(s.join("+"),"]"));var d=this.schema.idxByName;function h(w,_){return _e(w,_)===0}var x=s.reduce(function(P,_){var V=P[0],P=P[1],E=d[_],F=i[_];return[V||E,V||!E?lr(P,E&&E.multi?function(D){return D=H(D,_),f(D)&&D.some(function(A){return h(F,A)})}:function(D){return h(F,H(D,_))}):P]},[null,null]),g=x[0],x=x[1];return g?this.where(g.name).equals(i[g.keyPath]).filter(x):c?this.filter(x):this.where(s).equals("")},$e.prototype.filter=function(i){return this.toCollection().and(i)},$e.prototype.count=function(i){return this.toCollection().count(i)},$e.prototype.offset=function(i){return this.toCollection().offset(i)},$e.prototype.limit=function(i){return this.toCollection().limit(i)},$e.prototype.each=function(i){return this.toCollection().each(i)},$e.prototype.toArray=function(i){return this.toCollection().toArray(i)},$e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$e.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,f(i)?"[".concat(i.join("+"),"]"):i))},$e.prototype.reverse=function(){return this.toCollection().reverse()},$e.prototype.mapToClass=function(i){for(var s=this.db,c=this.name,d=((this.schema.mappedClass=i).prototype instanceof Sc&&(i=(x=>{var w=P,_=x;if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function V(){this.constructor=w}function P(){return x!==null&&x.apply(this,arguments)||this}return n(w,_),w.prototype=_===null?Object.create(_):(V.prototype=_.prototype,new V),Object.defineProperty(P.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),P.prototype.table=function(){return c},P})(i)),new Set),h=i.prototype;h;h=y(h))Object.getOwnPropertyNames(h).forEach(function(x){return d.add(x)});function g(x){if(!x)return x;var w,_=Object.create(i.prototype);for(w in x)if(!d.has(w))try{_[w]=x[w]}catch{}return _}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),i},$e.prototype.defineClass=function(){return this.mapToClass(function(i){p(this,i)})},$e.prototype.add=function(i,s){var c=this,d=this.schema.primKey,h=d.auto,g=d.keyPath,x=i;return g&&h&&(x=Po(g)(i)),this._trans("readwrite",function(w){return c.core.mutate({trans:w,type:"add",keys:s!=null?[s]:null,values:[x]})}).then(function(w){return w.numFailures?fe.reject(w.failures[0]):w.lastResult}).then(function(w){if(g)try{$(i,g,w)}catch{}return w})},$e.prototype.upsert=function(i,s){var c=this,d=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return c.core.get({trans:h,key:i}).then(function(g){var x=g??{};return Tc(x,s),d&&$(x,d,i),c.core.mutate({trans:h,type:"put",values:[x],keys:[i],upsert:!0,updates:{keys:[i],changeSpecs:[s]}}).then(function(w){return w.numFailures?fe.reject(w.failures[0]):!!g})})})},$e.prototype.update=function(i,s){return typeof i!="object"||f(i)?this.where(":id").equals(i).modify(s):(i=H(i,this.schema.primKey.keyPath))===void 0?tt(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(s)},$e.prototype.put=function(i,s){var c=this,d=this.schema.primKey,h=d.auto,g=d.keyPath,x=i;return g&&h&&(x=Po(g)(i)),this._trans("readwrite",function(w){return c.core.mutate({trans:w,type:"put",values:[x],keys:s!=null?[s]:null})}).then(function(w){return w.numFailures?fe.reject(w.failures[0]):w.lastResult}).then(function(w){if(g)try{$(i,g,w)}catch{}return w})},$e.prototype.delete=function(i){var s=this;return this._trans("readwrite",function(c){return s.core.mutate({trans:c,type:"delete",keys:[i]}).then(function(d){return Ao(s,[i],d)}).then(function(d){return d.numFailures?fe.reject(d.failures[0]):void 0})})},$e.prototype.clear=function(){var i=this;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"deleteRange",range:jc}).then(function(c){return Ao(i,null,c)})}).then(function(s){return s.numFailures?fe.reject(s.failures[0]):void 0})},$e.prototype.bulkGet=function(i){var s=this;return this._trans("readonly",function(c){return s.core.getMany({keys:i,trans:c}).then(function(d){return d.map(function(h){return s.hook.reading.fire(h)})})})},$e.prototype.bulkAdd=function(i,s,c){var d=this,h=Array.isArray(s)?s:void 0,g=(c=c||(h?void 0:s))?c.allKeys:void 0;return this._trans("readwrite",function(x){var w=d.schema.primKey,V=w.auto,w=w.keyPath;if(w&&h)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var _=i.length,V=w&&V?i.map(Po(w)):i;return d.core.mutate({trans:x,type:"add",keys:h,values:V,wantResults:g}).then(function(P){var E=P.numFailures,F=P.failures;if(E===0)return g?P.results:P.lastResult;throw new We("".concat(d.name,".bulkAdd(): ").concat(E," of ").concat(_," operations failed"),F)})})},$e.prototype.bulkPut=function(i,s,c){var d=this,h=Array.isArray(s)?s:void 0,g=(c=c||(h?void 0:s))?c.allKeys:void 0;return this._trans("readwrite",function(x){var w=d.schema.primKey,V=w.auto,w=w.keyPath;if(w&&h)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var _=i.length,V=w&&V?i.map(Po(w)):i;return d.core.mutate({trans:x,type:"put",keys:h,values:V,wantResults:g}).then(function(P){var E=P.numFailures,F=P.failures;if(E===0)return g?P.results:P.lastResult;throw new We("".concat(d.name,".bulkPut(): ").concat(E," of ").concat(_," operations failed"),F)})})},$e.prototype.bulkUpdate=function(i){var s=this,c=this.core,d=i.map(function(x){return x.key}),h=i.map(function(x){return x.changes}),g=[];return this._trans("readwrite",function(x){return c.getMany({trans:x,keys:d,cache:"clone"}).then(function(w){var _=[],V=[],P=(i.forEach(function(E,F){var D=E.key,A=E.changes,T=w[F];if(T){for(var U=0,W=Object.keys(A);U<W.length;U++){var z=W[U],Y=A[z];if(z===s.schema.primKey.keyPath){if(_e(Y,D)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else $(T,z,Y)}g.push(F),_.push(D),V.push(T)}}),_.length);return c.mutate({trans:x,type:"put",keys:_,values:V,updates:{keys:d,changeSpecs:h}}).then(function(E){var F=E.numFailures,D=E.failures;if(F===0)return P;for(var A=0,T=Object.keys(D);A<T.length;A++){var U,W=T[A],z=g[Number(W)];z!=null&&(U=D[W],delete D[W],D[z]=U)}throw new We("".concat(s.name,".bulkUpdate(): ").concat(F," of ").concat(P," operations failed"),D)})})})},$e.prototype.bulkDelete=function(i){var s=this,c=i.length;return this._trans("readwrite",function(d){return s.core.mutate({trans:d,type:"delete",keys:i}).then(function(h){return Ao(s,i,h)})}).then(function(d){var h=d.numFailures,g=d.failures;if(h===0)return d.lastResult;throw new We("".concat(s.name,".bulkDelete(): ").concat(h," of ").concat(c," operations failed"),g)})};var _c=$e;function $e(){}function wi(i){function s(x,w){if(w){for(var _=arguments.length,V=new Array(_-1);--_;)V[_-1]=arguments[_];return c[x].subscribe.apply(null,V),i}if(typeof x=="string")return c[x]}var c={};s.addEventType=g;for(var d=1,h=arguments.length;d<h;++d)g(arguments[d]);return s;function g(x,w,_){var V,P;if(typeof x!="object")return w=w||ft,P={subscribers:[],fire:_=_||X,subscribe:function(E){P.subscribers.indexOf(E)===-1&&(P.subscribers.push(E),P.fire=w(P.fire,E))},unsubscribe:function(E){P.subscribers=P.subscribers.filter(function(F){return F!==E}),P.fire=P.subscribers.reduce(w,_)}},c[x]=s[x]=P;u(V=x).forEach(function(E){var F=V[E];if(f(F))g(E,V[E][0],V[E][1]);else{if(F!=="asap")throw new me.InvalidArgument("Invalid event config");var D=g(E,be,function(){for(var A=arguments.length,T=new Array(A);A--;)T[A]=arguments[A];D.subscribers.forEach(function(U){I(function(){U.apply(null,T)})})})}})}}function bi(i,s){return M(s).from({prototype:i}),s}function Ar(i,s){return!(i.filter||i.algorithm||i.or)&&(s?i.justLimit:!i.replayFilter)}function Es(i,s){i.filter=lr(i.filter,s)}function Ts(i,s,c){var d=i.replayFilter;i.replayFilter=d?function(){return lr(d(),s())}:s,i.justLimit=c&&!d}function Ro(i,s){if(i.isPrimKey)return s.primaryKey;var c=s.getIndexByKeyPath(i.index);if(c)return c;throw new me.Schema("KeyPath "+i.index+" on object store "+s.name+" is not indexed")}function Pc(i,s,c){var d=Ro(i,s.schema);return s.openCursor({trans:c,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:d,range:i.range}})}function Fo(i,s,c,d){var h,g,x=i.replayFilter?lr(i.filter,i.replayFilter()):i.filter;return i.or?(h={},g=function(w,_,V){var P,E;x&&!x(_,V,function(F){return _.stop(F)},function(F){return _.fail(F)})||((E=""+(P=_.primaryKey))=="[object ArrayBuffer]"&&(E=""+new Uint8Array(P)),C(h,E))||(h[E]=!0,s(w,_,V))},Promise.all([i.or._iterate(g,c),Ac(Pc(i,d,c),i.algorithm,g,!i.keysOnly&&i.valueMapper)])):Ac(Pc(i,d,c),lr(i.algorithm,x),s,!i.keysOnly&&i.valueMapper)}function Ac(i,s,c,d){var h=qe(d?function(g,x,w){return c(d(g),x,w)}:c);return i.then(function(g){if(g)return g.start(function(){var x=function(){return g.continue()};s&&!s(g,function(w){return x=w},function(w){g.stop(w),x=X},function(w){g.fail(w),x=X})||h(g.value,g,function(w){return x=w}),x()})})}Fe.prototype._read=function(i,s){var c=this._ctx;return c.error?c.table._trans(null,tt.bind(null,c.error)):c.table._trans("readonly",i).then(s)},Fe.prototype._write=function(i){var s=this._ctx;return s.error?s.table._trans(null,tt.bind(null,s.error)):s.table._trans("readwrite",i,"locked")},Fe.prototype._addAlgorithm=function(i){var s=this._ctx;s.algorithm=lr(s.algorithm,i)},Fe.prototype._iterate=function(i,s){return Fo(this._ctx,i,s,this._ctx.table.core)},Fe.prototype.clone=function(i){var s=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return i&&p(c,i),s._ctx=c,s},Fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fe.prototype.each=function(i){var s=this._ctx;return this._read(function(c){return Fo(s,i,c,s.table.core)})},Fe.prototype.count=function(i){var s=this;return this._read(function(c){var d,h=s._ctx,g=h.table.core;return Ar(h,!0)?g.count({trans:c,query:{index:Ro(h,g.schema),range:h.range}}).then(function(x){return Math.min(x,h.limit)}):(d=0,Fo(h,function(){return++d,!1},c,g).then(function(){return d}))}).then(i)},Fe.prototype.sortBy=function(i,s){var c=i.split(".").reverse(),d=c[0],h=c.length-1;function g(_,V){return V?g(_[c[V]],V-1):_[d]}var x=this._ctx.dir==="next"?1:-1;function w(_,V){return _e(g(_,h),g(V,h))*x}return this.toArray(function(_){return _.sort(w)}).then(s)},Fe.prototype.toArray=function(i){var s=this;return this._read(function(c){var d,h,g,x=s._ctx;return x.dir==="next"&&Ar(x,!0)&&0<x.limit?(d=x.valueMapper,h=Ro(x,x.table.core.schema),x.table.core.query({trans:c,limit:x.limit,values:!0,query:{index:h,range:x.range}}).then(function(w){return w=w.result,d?w.map(d):w})):(g=[],Fo(x,function(w){return g.push(w)},c,x.table.core).then(function(){return g}))},i)},Fe.prototype.offset=function(i){var s=this._ctx;return i<=0||(s.offset+=i,Ar(s)?Ts(s,function(){var c=i;return function(d,h){return c===0||(c===1?--c:h(function(){d.advance(c),c=0}),!1)}}):Ts(s,function(){var c=i;return function(){return--c<0}})),this},Fe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),Ts(this._ctx,function(){var s=i;return function(c,d,h){return--s<=0&&d(h),0<=s}},!0),this},Fe.prototype.until=function(i,s){return Es(this._ctx,function(c,d,h){return!i(c.value)||(d(h),s)}),this},Fe.prototype.first=function(i){return this.limit(1).toArray(function(s){return s[0]}).then(i)},Fe.prototype.last=function(i){return this.reverse().first(i)},Fe.prototype.filter=function(i){var s;return Es(this._ctx,function(c){return i(c.value)}),(s=this._ctx).isMatch=lr(s.isMatch,i),this},Fe.prototype.and=function(i){return this.filter(i)},Fe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},Fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fe.prototype.desc=function(){return this.reverse()},Fe.prototype.eachKey=function(i){var s=this._ctx;return s.keysOnly=!s.isMatch,this.each(function(c,d){i(d.key,d)})},Fe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},Fe.prototype.eachPrimaryKey=function(i){var s=this._ctx;return s.keysOnly=!s.isMatch,this.each(function(c,d){i(d.primaryKey,d)})},Fe.prototype.keys=function(i){var s=this._ctx,c=(s.keysOnly=!s.isMatch,[]);return this.each(function(d,h){c.push(h.key)}).then(function(){return c}).then(i)},Fe.prototype.primaryKeys=function(i){var s=this._ctx;if(s.dir==="next"&&Ar(s,!0)&&0<s.limit)return this._read(function(d){var h=Ro(s,s.table.core.schema);return s.table.core.query({trans:d,values:!1,limit:s.limit,query:{index:h,range:s.range}})}).then(function(d){return d.result}).then(i);s.keysOnly=!s.isMatch;var c=[];return this.each(function(d,h){c.push(h.primaryKey)}).then(function(){return c}).then(i)},Fe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},Fe.prototype.firstKey=function(i){return this.limit(1).keys(function(s){return s[0]}).then(i)},Fe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},Fe.prototype.distinct=function(){var i,s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];return s&&s.multi&&(i={},Es(this._ctx,function(d){var d=d.primaryKey.toString(),h=C(i,d);return i[d]=!0,!h})),this},Fe.prototype.modify=function(i){var s=this,c=this._ctx;return this._write(function(d){function h(T,U){var W=U.failures;F+=T-U.numFailures;for(var z=0,Y=u(W);z<Y.length;z++){var te=Y[z];E.push(W[te])}}var g=typeof i=="function"?i:function(T){return Tc(T,i)},x=c.table.core,P=x.schema.primaryKey,w=P.outbound,_=P.extractKey,V=200,P=s.db._options.modifyChunkSize,E=(P&&(V=typeof P=="object"?P[x.name]||P["*"]||200:P),[]),F=0,D=[],A=i===Rc;return s.clone().primaryKeys().then(function(T){function U(z){var Y=Math.min(V,T.length-z),te=T.slice(z,z+Y);return(A?Promise.resolve([]):x.getMany({trans:d,keys:te,cache:"immutable"})).then(function(se){var le=[],ne=[],ge=w?[]:null,pe=A?te:[];if(!A)for(var ae=0;ae<Y;++ae){var ye=se[ae],Pe={value:Z(ye),primKey:T[z+ae]};g.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?pe.push(T[z+ae]):w||_e(_(ye),_(Pe.value))===0?(ne.push(Pe.value),w&&ge.push(T[z+ae])):(pe.push(T[z+ae]),le.push(Pe.value)))}return Promise.resolve(0<le.length&&x.mutate({trans:d,type:"add",values:le}).then(function(De){for(var ke in De.failures)pe.splice(parseInt(ke),1);h(le.length,De)})).then(function(){return(0<ne.length||W&&typeof i=="object")&&x.mutate({trans:d,type:"put",keys:ge,values:ne,criteria:W,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<z}).then(function(De){return h(ne.length,De)})}).then(function(){return(0<pe.length||W&&A)&&x.mutate({trans:d,type:"delete",keys:pe,criteria:W,isAdditionalChunk:0<z}).then(function(De){return Ao(c.table,pe,De)}).then(function(De){return h(pe.length,De)})}).then(function(){return T.length>z+Y&&U(z+V)})})}var W=Ar(c)&&c.limit===1/0&&(typeof i!="function"||A)&&{index:c.index,range:c.range};return U(0).then(function(){if(0<E.length)throw new Ue("Error modifying one or more objects",E,F,D);return T.length})})})},Fe.prototype.delete=function(){var i=this._ctx,s=i.range;return!Ar(i)||i.table.schema.yProps||!i.isPrimKey&&s.type!==3?this.modify(Rc):this._write(function(c){var d=i.table.core.schema.primaryKey,h=s;return i.table.core.count({trans:c,query:{index:d,range:h}}).then(function(g){return i.table.core.mutate({trans:c,type:"deleteRange",range:h}).then(function(_){var w=_.failures,_=_.numFailures;if(_)throw new Ue("Could not delete some values",Object.keys(w).map(function(V){return w[V]}),g-_);return g-_})})})};var Xp=Fe;function Fe(){}var Rc=function(i,s){return s.value=null};function Zp(i,s){return i<s?-1:i===s?0:1}function Jp(i,s){return s<i?-1:i===s?0:1}function Bt(i,s,c){return i=i instanceof Dc?new i.Collection(i):i,i._ctx.error=new(c||TypeError)(s),i}function Rr(i){return new i.Collection(i,function(){return Fc("")}).limit(0)}function Do(D,s,c,d){var h,g,x,w,_,V,P,E=c.length;if(!c.every(function(T){return typeof T=="string"}))return Bt(D,kc);function F(T){h=T==="next"?function(W){return W.toUpperCase()}:function(W){return W.toLowerCase()},g=T==="next"?function(W){return W.toLowerCase()}:function(W){return W.toUpperCase()},x=T==="next"?Zp:Jp;var U=c.map(function(W){return{lower:g(W),upper:h(W)}}).sort(function(W,z){return x(W.lower,z.lower)});w=U.map(function(W){return W.upper}),_=U.map(function(W){return W.lower}),P=(V=T)==="next"?"":d}F("next");var D=new D.Collection(D,function(){return Fn(w[0],_[E-1]+d)}),A=(D._ondirectionchange=function(T){F(T)},0);return D._addAlgorithm(function(T,U,W){var z=T.key;if(typeof z=="string"){var Y=g(z);if(s(Y,_,A))return!0;for(var te=null,se=A;se<E;++se){var le=((ne,ge,pe,ae,ye,Pe)=>{for(var De=Math.min(ne.length,ae.length),ke=-1,Ee=0;Ee<De;++Ee){var Ye=ge[Ee];if(Ye!==ae[Ee])return ye(ne[Ee],pe[Ee])<0?ne.substr(0,Ee)+pe[Ee]+pe.substr(Ee+1):ye(ne[Ee],ae[Ee])<0?ne.substr(0,Ee)+ae[Ee]+pe.substr(Ee+1):0<=ke?ne.substr(0,ke)+ge[ke]+pe.substr(ke+1):null;ye(ne[Ee],Ye)<0&&(ke=Ee)}return De<ae.length&&Pe==="next"?ne+pe.substr(ne.length):De<ne.length&&Pe==="prev"?ne.substr(0,pe.length):ke<0?null:ne.substr(0,ke)+ae[ke]+pe.substr(ke+1)})(z,Y,w[se],_[se],x,V);le===null&&te===null?A=se+1:(te===null||0<x(te,le))&&(te=le)}U(te!==null?function(){T.continue(te+P)}:W)}return!1}),D}function Fn(i,s,c,d){return{type:2,lower:i,upper:s,lowerOpen:c,upperOpen:d}}function Fc(i){return{type:1,lower:i,upper:i}}Object.defineProperty(ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ut.prototype.between=function(i,s,c,d){c=c!==!1,d=d===!0;try{return 0<this._cmp(i,s)||this._cmp(i,s)===0&&(c||d)&&(!c||!d)?Rr(this):new this.Collection(this,function(){return Fn(i,s,!c,!d)})}catch{return Bt(this,yn)}},ut.prototype.equals=function(i){return i==null?Bt(this,yn):new this.Collection(this,function(){return Fc(i)})},ut.prototype.above=function(i){return i==null?Bt(this,yn):new this.Collection(this,function(){return Fn(i,void 0,!0)})},ut.prototype.aboveOrEqual=function(i){return i==null?Bt(this,yn):new this.Collection(this,function(){return Fn(i,void 0,!1)})},ut.prototype.below=function(i){return i==null?Bt(this,yn):new this.Collection(this,function(){return Fn(void 0,i,!1,!0)})},ut.prototype.belowOrEqual=function(i){return i==null?Bt(this,yn):new this.Collection(this,function(){return Fn(void 0,i)})},ut.prototype.startsWith=function(i){return typeof i!="string"?Bt(this,kc):this.between(i,i+sr,!0,!0)},ut.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):Do(this,function(s,c){return s.indexOf(c[0])===0},[i],sr)},ut.prototype.equalsIgnoreCase=function(i){return Do(this,function(s,c){return s===c[0]},[i],"")},ut.prototype.anyOfIgnoreCase=function(){var i=oe.apply(J,arguments);return i.length===0?Rr(this):Do(this,function(s,c){return c.indexOf(s)!==-1},i,"")},ut.prototype.startsWithAnyOfIgnoreCase=function(){var i=oe.apply(J,arguments);return i.length===0?Rr(this):Do(this,function(s,c){return c.some(function(d){return s.indexOf(d)===0})},i,sr)},ut.prototype.anyOf=function(){var i,s,c=this,d=oe.apply(J,arguments),h=this._cmp;try{d.sort(h)}catch{return Bt(this,yn)}return d.length===0?Rr(this):((i=new this.Collection(this,function(){return Fn(d[0],d[d.length-1])}))._ondirectionchange=function(g){h=g==="next"?c._ascending:c._descending,d.sort(h)},s=0,i._addAlgorithm(function(g,x,w){for(var _=g.key;0<h(_,d[s]);)if(++s===d.length)return x(w),!1;return h(_,d[s])===0||(x(function(){g.continue(d[s])}),!1)}),i)},ut.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ut.prototype.noneOf=function(){var i=oe.apply(J,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Bt(this,yn)}var s=i.reduce(function(c,d){return c?c.concat([[c[c.length-1][1],d]]):[[-1/0,d]]},null);return s.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(s,{includeLowers:!1,includeUppers:!1})},ut.prototype.inAnyRange=function(i,W){var c=this,d=this._cmp,h=this._ascending,g=this._descending,x=this._min,w=this._max;if(i.length===0)return Rr(this);if(!i.every(function(z){return z[0]!==void 0&&z[1]!==void 0&&h(z[0],z[1])<=0}))return Bt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var _=!W||W.includeLowers!==!1,V=W&&W.includeUppers===!0,P,E=h;function F(z,Y){return E(z[0],Y[0])}try{(P=i.reduce(function(z,Y){for(var te=0,se=z.length;te<se;++te){var le=z[te];if(d(Y[0],le[1])<0&&0<d(Y[1],le[0])){le[0]=x(le[0],Y[0]),le[1]=w(le[1],Y[1]);break}}return te===se&&z.push(Y),z},[])).sort(F)}catch{return Bt(this,yn)}var D=0,A=V?function(z){return 0<h(z,P[D][1])}:function(z){return 0<=h(z,P[D][1])},T=_?function(z){return 0<g(z,P[D][0])}:function(z){return 0<=g(z,P[D][0])},U=A,W=new this.Collection(this,function(){return Fn(P[0][0],P[P.length-1][1],!_,!V)});return W._ondirectionchange=function(z){E=z==="next"?(U=A,h):(U=T,g),P.sort(F)},W._addAlgorithm(function(z,Y,te){for(var se,le=z.key;U(le);)if(++D===P.length)return Y(te),!1;return!A(se=le)&&!T(se)||(c._cmp(le,P[D][1])===0||c._cmp(le,P[D][0])===0||Y(function(){E===h?z.continue(P[D][0]):z.continue(P[D][1])}),!1)}),W},ut.prototype.startsWithAnyOf=function(){var i=oe.apply(J,arguments);return i.every(function(s){return typeof s=="string"})?i.length===0?Rr(this):this.inAnyRange(i.map(function(s){return[s,s+sr]})):Bt(this,"startsWithAnyOf() only works with strings")};var Dc=ut;function ut(){}function ln(i){return qe(function(s){return ki(s),i(s.target.error),!1})}function ki(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var ji="storagemutated",_s="x-storagemutated-1",Dn=wi(null,ji),em=(un.prototype._lock=function(){return L(!we.global),++this._reculock,this._reculock!==1||we.global||(we.lockOwnerFor=this),this},un.prototype._unlock=function(){if(L(!we.global),--this._reculock==0)for(we.global||(we.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{ar(i[1],i[0])}catch{}}return this},un.prototype._locked=function(){return this._reculock&&we.lockOwnerFor!==this},un.prototype.create=function(i){var s=this;if(this.mode){var c=this.db.idbdb,d=this.db._state.dbOpenError;if(L(!this.idbtrans),!i&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new me.DatabaseClosed(d);case"MissingAPIError":throw new me.MissingAPI(d.message,d);default:throw new me.OpenFailed(d)}if(!this.active)throw new me.TransactionInactive;L(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=qe(function(h){ki(h),s._reject(i.error)}),i.onabort=qe(function(h){ki(h),s.active&&s._reject(new me.Abort(i.error)),s.active=!1,s.on("abort").fire(h)}),i.oncomplete=qe(function(){s.active=!1,s._resolve(),"mutatedParts"in i&&Dn.storagemutated.fire(i.mutatedParts)})}return this},un.prototype._promise=function(i,s,c){var d,h=this;return i==="readwrite"&&this.mode!=="readwrite"?tt(new me.ReadOnly("Transaction is readonly")):this.active?this._locked()?new fe(function(g,x){h._blockedFuncs.push([function(){h._promise(i,s,c).then(g,x)},we])}):c?Pn(function(){var g=new fe(function(x,w){h._lock();var _=s(x,w,h);_&&_.then&&_.then(x,w)});return g.finally(function(){return h._unlock()}),g._lib=!0,g}):((d=new fe(function(g,x){var w=s(g,x,h);w&&w.then&&w.then(g,x)}))._lib=!0,d):tt(new me.TransactionInactive)},un.prototype._root=function(){return this.parent?this.parent._root():this},un.prototype.waitFor=function(i){var s,c=this._root(),d=fe.resolve(i),h=(c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return d}):(c._waitingFor=d,c._waitingQueue=[],s=c.idbtrans.objectStore(c.storeNames[0]),function g(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(s.get(-1/0).onsuccess=g)}()),c._waitingFor);return new fe(function(g,x){d.then(function(w){return c._waitingQueue.push(qe(g.bind(null,w)))},function(w){return c._waitingQueue.push(qe(x.bind(null,w)))}).finally(function(){c._waitingFor===h&&(c._waitingFor=null)})})},un.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},un.prototype.table=function(i){var s=this._memoizedTables||(this._memoizedTables={});if(C(s,i))return s[i];var c=this.schema[i];if(c)return(c=new this.db.Table(i,c,this)).core=this.db.core.table(i),s[i]=c;throw new me.NotFound("Table "+i+" not part of transaction")},un);function un(){}function Ps(i,s,c,d,h,g,x,w){return{name:i,keyPath:s,unique:c,multi:d,auto:h,compound:g,src:(c&&!x?"&":"")+(d?"*":"")+(h?"++":"")+Mc(s),type:w}}function Mc(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function As(i,s,c){return{name:i,primKey:s,indexes:c,mappedClass:null,idxByName:(d=function(h){return[h.name,h]},c.reduce(function(h,g,x){return g=d(g,x),g&&(h[g[0]]=g[1]),h},{}))};var d}var Si=function(i){try{return i.only([[]]),Si=function(){return[[]]},[[]]}catch{return Si=function(){return sr},sr}};function Rs(i){return i==null?function(){}:typeof i=="string"?(s=i).split(".").length===1?function(c){return c[s]}:function(c){return H(c,s)}:function(c){return H(c,i)};var s}function Ic(i){return[].slice.call(i)}var tm=0;function Ci(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function nm(i,s,_){function d(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var E=A.lower,F=A.upper,D=A.lowerOpen,A=A.upperOpen;return E===void 0?F===void 0?null:s.upperBound(F,!!A):F===void 0?s.lowerBound(E,!!D):s.bound(E,F,!!D,!!A)}function h(P){var E,F=P.name;return{name:F,schema:P,mutate:function(D){var A=D.trans,T=D.type,U=D.keys,W=D.values,z=D.range;return new Promise(function(Y,te){Y=qe(Y);var se=A.objectStore(F),le=se.keyPath==null,ne=T==="put"||T==="add";if(!ne&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var ge,pe=(U||W||{length:1}).length;if(U&&W&&U.length!==W.length)throw new Error("Given keys array must have same length as given values array.");if(pe===0)return Y({numFailures:0,failures:{},results:[],lastResult:void 0});function ae(Je){++De,ki(Je)}var ye=[],Pe=[],De=0;if(T==="deleteRange"){if(z.type===4)return Y({numFailures:De,failures:Pe,results:[],lastResult:void 0});z.type===3?ye.push(ge=se.clear()):ye.push(ge=se.delete(d(z)))}else{var le=ne?le?[W,U]:[W,null]:[U,null],ke=le[0],Ee=le[1];if(ne)for(var Ye=0;Ye<pe;++Ye)ye.push(ge=Ee&&Ee[Ye]!==void 0?se[T](ke[Ye],Ee[Ye]):se[T](ke[Ye])),ge.onerror=ae;else for(Ye=0;Ye<pe;++Ye)ye.push(ge=se[T](ke[Ye])),ge.onerror=ae}function Kt(Je){Je=Je.target.result,ye.forEach(function(dr,Qs){return dr.error!=null&&(Pe[Qs]=dr.error)}),Y({numFailures:De,failures:Pe,results:T==="delete"?U:ye.map(function(dr){return dr.result}),lastResult:Je})}ge.onerror=function(Je){ae(Je),Kt(Je)},ge.onsuccess=Kt})},getMany:function(D){var A=D.trans,T=D.keys;return new Promise(function(U,W){U=qe(U);for(var z,Y=A.objectStore(F),te=T.length,se=new Array(te),le=0,ne=0,ge=function(ye){ye=ye.target,se[ye._pos]=ye.result,++ne===le&&U(se)},pe=ln(W),ae=0;ae<te;++ae)T[ae]!=null&&((z=Y.get(T[ae]))._pos=ae,z.onsuccess=ge,z.onerror=pe,++le);le===0&&U(se)})},get:function(D){var A=D.trans,T=D.key;return new Promise(function(U,W){U=qe(U);var z=A.objectStore(F).get(T);z.onsuccess=function(Y){return U(Y.target.result)},z.onerror=ln(W)})},query:(E=w,function(D){return new Promise(function(A,T){A=qe(A);var U,W,z,ne=D.trans,Y=D.values,te=D.limit,le=D.query,se=te===1/0?void 0:te,ge=le.index,le=le.range,ne=ne.objectStore(F),ne=ge.isPrimaryKey?ne:ne.index(ge.name),ge=d(le);if(te===0)return A({result:[]});E?((le=Y?ne.getAll(ge,se):ne.getAllKeys(ge,se)).onsuccess=function(pe){return A({result:pe.target.result})},le.onerror=ln(T)):(U=0,W=!Y&&"openKeyCursor"in ne?ne.openKeyCursor(ge):ne.openCursor(ge),z=[],W.onsuccess=function(pe){var ae=W.result;return!ae||(z.push(Y?ae.value:ae.primaryKey),++U===te)?A({result:z}):void ae.continue()},W.onerror=ln(T))})}),openCursor:function(D){var A=D.trans,T=D.values,U=D.query,W=D.reverse,z=D.unique;return new Promise(function(Y,te){Y=qe(Y);var ne=U.index,se=U.range,le=A.objectStore(F),le=ne.isPrimaryKey?le:le.index(ne.name),ne=W?z?"prevunique":"prev":z?"nextunique":"next",ge=!T&&"openKeyCursor"in le?le.openKeyCursor(d(se),ne):le.openCursor(d(se),ne);ge.onerror=ln(te),ge.onsuccess=qe(function(pe){var ae,ye,Pe,De,ke=ge.result;ke?(ke.___id=++tm,ke.done=!1,ae=ke.continue.bind(ke),ye=(ye=ke.continuePrimaryKey)&&ye.bind(ke),Pe=ke.advance.bind(ke),De=function(){throw new Error("Cursor not stopped")},ke.trans=A,ke.stop=ke.continue=ke.continuePrimaryKey=ke.advance=function(){throw new Error("Cursor not started")},ke.fail=qe(te),ke.next=function(){var Ee=this,Ye=1;return this.start(function(){return Ye--?Ee.continue():Ee.stop()}).then(function(){return Ee})},ke.start=function(Ee){function Ye(){if(ge.result)try{Ee()}catch(Je){ke.fail(Je)}else ke.done=!0,ke.start=function(){throw new Error("Cursor behind last entry")},ke.stop()}var Kt=new Promise(function(Je,dr){Je=qe(Je),ge.onerror=ln(dr),ke.fail=dr,ke.stop=function(Qs){ke.stop=ke.continue=ke.continuePrimaryKey=ke.advance=De,Je(Qs)}});return ge.onsuccess=qe(function(Je){ge.onsuccess=Ye,Ye()}),ke.continue=ae,ke.continuePrimaryKey=ye,ke.advance=Pe,Ye(),Kt},Y(ke)):Y(null)},te)})},count:function(D){var A=D.query,T=D.trans,U=A.index,W=A.range;return new Promise(function(z,Y){var te=T.objectStore(F),te=U.isPrimaryKey?te:te.index(U.name),se=d(W),se=se?te.count(se):te.count();se.onsuccess=qe(function(le){return z(le.target.result)}),se.onerror=ln(Y)})}}}g=_,x=Ic((_=i).objectStoreNames);var g,_={schema:{name:_.name,tables:x.map(function(P){return g.objectStore(P)}).map(function(P){var E=P.keyPath,F=P.autoIncrement,A=f(E),D={},A={name:P.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:E==null,compound:A,keyPath:E,autoIncrement:F,unique:!0,extractKey:Rs(E)},indexes:Ic(P.indexNames).map(function(T){return P.index(T)}).map(function(z){var Y=z.name,U=z.unique,W=z.multiEntry,z=z.keyPath,Y={name:Y,compound:f(z),keyPath:z,unique:U,multiEntry:W,extractKey:Rs(z)};return D[Ci(z)]=Y}),getIndexByKeyPath:function(T){return D[Ci(T)]}};return D[":id"]=A.primaryKey,E!=null&&(D[Ci(E)]=A.primaryKey),A})},hasGetAll:0<x.length&&"getAll"in g.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},x=_.schema,w=_.hasGetAll,_=x.tables.map(h),V={};return _.forEach(function(P){return V[P.name]=P}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(P){if(V[P])return V[P];throw new Error("Table '".concat(P,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Si(s),schema:x}}function rm(i,s,c,d){return c=c.IDBKeyRange,s=nm(s,c,d),{dbcore:i.dbcore.reduce(function(h,g){return g=g.create,r(r({},h),g(h))},s)}}function Mo(i,s){var c=s.db,c=rm(i._middlewares,c,i._deps,s);i.core=c.dbcore,i.tables.forEach(function(d){var h=d.name;i.core.schema.tables.some(function(g){return g.name===h})&&(d.core=i.core.table(h),i[h]instanceof i.Table)&&(i[h].core=d.core)})}function Io(i,s,c,d){c.forEach(function(h){var g=d[h];s.forEach(function(x){var w=function _(V,P){return ee(V,P)||(V=y(V))&&_(V,P)}(x,h);(!w||"value"in w&&w.value===void 0)&&(x===i.Transaction.prototype||x instanceof i.Transaction?G(x,h,{get:function(){return this.table(h)},set:function(_){K(this,h,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):x[h]=new i.Table(h,g))})})}function Fs(i,s){s.forEach(function(c){for(var d in c)c[d]instanceof i.Table&&delete c[d]})}function im(i,s){return i._cfg.version-s._cfg.version}function om(i,s,c,d){var h=i._dbSchema,g=(c.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=As("$meta",Bc("")[0],[]),i._storeNames.push("$meta")),i._createTransaction("readwrite",i._storeNames,h)),x=(g.create(c),g._completion.catch(d),g._reject.bind(g)),w=we.transless||we;Pn(function(){if(we.trans=g,we.transless=w,s!==0)return Mo(i,c),V=s,((_=g).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(P){return P??V}):fe.resolve(V)).then(function(U){var E=i,F=U,D=g,A=c,T=[],U=E._versions,W=E._dbSchema=Bo(0,E.idbdb,A);return(U=U.filter(function(z){return z._cfg.version>=F})).length===0?fe.resolve():(U.forEach(function(z){T.push(function(){var Y,te,se,le=W,ne=z._cfg.dbschema,ge=(zo(E,le,A),zo(E,ne,A),W=E._dbSchema=ne,Ds(le,ne)),pe=(ge.add.forEach(function(ae){Ms(A,ae[0],ae[1].primKey,ae[1].indexes)}),ge.change.forEach(function(ae){if(ae.recreate)throw new me.Upgrade("Not yet support for changing primary key");var ye=A.objectStore(ae.name);ae.add.forEach(function(Pe){return Oo(ye,Pe)}),ae.change.forEach(function(Pe){ye.deleteIndex(Pe.name),Oo(ye,Pe)}),ae.del.forEach(function(Pe){return ye.deleteIndex(Pe)})}),z._cfg.contentUpgrade);if(pe&&z._cfg.version>F)return Mo(E,A),D._memoizedTables={},Y=O(ne),ge.del.forEach(function(ae){Y[ae]=le[ae]}),Fs(E,[E.Transaction.prototype]),Io(E,[E.Transaction.prototype],u(Y),Y),D.schema=Y,(te=Se(pe))&&_r(),ne=fe.follow(function(){var ae;(se=pe(D))&&te&&(ae=An.bind(null,null),se.then(ae,ae))}),se&&typeof se.then=="function"?fe.resolve(se):ne.then(function(){return se})}),T.push(function(Y){var te,se,le=z._cfg.dbschema;te=le,se=Y,[].slice.call(se.db.objectStoreNames).forEach(function(ne){return te[ne]==null&&se.db.deleteObjectStore(ne)}),Fs(E,[E.Transaction.prototype]),Io(E,[E.Transaction.prototype],E._storeNames,E._dbSchema),D.schema=E._dbSchema}),T.push(function(Y){E.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(E.idbdb.version/10)===z._cfg.version?(E.idbdb.deleteObjectStore("$meta"),delete E._dbSchema.$meta,E._storeNames=E._storeNames.filter(function(te){return te!=="$meta"})):Y.objectStore("$meta").put(z._cfg.version,"version"))})}),function z(){return T.length?fe.resolve(T.shift()(D.idbtrans)).then(z):fe.resolve()}().then(function(){Oc(W,A)}))}).catch(x);var _,V;u(h).forEach(function(P){Ms(c,P,h[P].primKey,h[P].indexes)}),Mo(i,c),fe.follow(function(){return i.on.populate.fire(g)}).catch(x)})}function am(i,s){Oc(i._dbSchema,s),s.db.version%10!=0||s.objectStoreNames.contains("$meta")||s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var c=Bo(0,i.idbdb,s);zo(i,i._dbSchema,s);for(var d=0,h=Ds(c,i._dbSchema).change;d<h.length;d++){var g=(x=>{if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var w=s.objectStore(x.name);x.add.forEach(function(_){Ne&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(_.src)),Oo(w,_)})})(h[d]);if(typeof g=="object")return g.value}}function Ds(i,s){var c,d={del:[],add:[],change:[]};for(c in i)s[c]||d.del.push(c);for(c in s){var h=i[c],g=s[c];if(h){var x={name:c,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)x.recreate=!0,d.change.push(x);else{var w=h.idxByName,_=g.idxByName,V=void 0;for(V in w)_[V]||x.del.push(V);for(V in _){var P=w[V],E=_[V];P?P.src!==E.src&&x.change.push(E):x.add.push(E)}(0<x.del.length||0<x.add.length||0<x.change.length)&&d.change.push(x)}}else d.add.push([c,g])}return d}function Ms(i,s,c,d){var h=i.db.createObjectStore(s,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(g){return Oo(h,g)})}function Oc(i,s){u(i).forEach(function(c){s.db.objectStoreNames.contains(c)||(Ne&&console.debug("Dexie: Creating missing table",c),Ms(s,c,i[c].primKey,i[c].indexes))})}function Oo(i,s){i.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function Bo(i,s,c){var d={};return v(s.objectStoreNames,0).forEach(function(h){for(var g=c.objectStore(h),x=Ps(Mc(V=g.keyPath),V||"",!0,!1,!!g.autoIncrement,V&&typeof V!="string",!0),w=[],_=0;_<g.indexNames.length;++_){var P=g.index(g.indexNames[_]),V=P.keyPath,P=Ps(P.name,V,!!P.unique,!!P.multiEntry,!1,V&&typeof V!="string",!1);w.push(P)}d[h]=As(h,x,w)}),d}function zo(i,s,c){for(var d=c.db.objectStoreNames,h=0;h<d.length;++h){var g=d[h],x=c.objectStore(g);i._hasGetAll="getAll"in x;for(var w=0;w<x.indexNames.length;++w){var _,V=x.indexNames[w],P=x.index(V).keyPath,P=typeof P=="string"?P:"["+v(P).join("+")+"]";s[g]&&(_=s[g].idxByName[P])&&(_.name=V,delete s[g].idxByName[P],s[g].idxByName[V]=_)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Bc(i){return i.split(",").map(function(s,c){var h=s.split(":"),d=(d=h[1])==null?void 0:d.trim(),h=(s=h[0].trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return Ps(h,g||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),f(g),c===0,d)})}Fr.prototype._createTableSchema=As,Fr.prototype._parseIndexSyntax=Bc,Fr.prototype._parseStoresSpec=function(i,s){var c=this;u(i).forEach(function(d){if(i[d]!==null){var h=c._parseIndexSyntax(i[d]),g=h.shift();if(!g)throw new me.Schema("Invalid schema for table "+d+": "+i[d]);if(g.unique=!0,g.multi)throw new me.Schema("Primary key cannot be multiEntry*");h.forEach(function(x){if(x.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),g=c._createTableSchema(d,g,h),s[d]=g}})},Fr.prototype.stores=function(c){var s=this.db,c=(this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,c):c,s._versions),d={},h={};return c.forEach(function(g){p(d,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(d,h)}),s._dbSchema=h,Fs(s,[s._allTables,s,s.Transaction.prototype]),Io(s,[s._allTables,s,s.Transaction.prototype,this._cfg.tables],u(h),h),s._storeNames=u(h),this},Fr.prototype.upgrade=function(i){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||X,i),this};var sm=Fr;function Fr(){}function Is(i,s){var c=i._dbNamesDB;return c||(c=i._dbNamesDB=new vn(_o,{addons:[],indexedDB:i,IDBKeyRange:s})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function Os(i){return i&&typeof i.databases=="function"}function Bs(i){return Pn(function(){return we.letThrough=!0,i()})}function zs(i){return!("from"in i)}var wt=function(i,s){var c;if(!this)return c=new wt,i&&"d"in i&&p(c,i),c;p(this,arguments.length?{d:1,from:i,to:1<arguments.length?s:i}:{d:0})};function Ni(i,s,c){var d=_e(s,c);if(!isNaN(d)){if(0<d)throw RangeError();if(zs(i))return p(i,{from:s,to:c,d:1});var d=i.l,h=i.r;if(_e(c,i.from)<0)return d?Ni(d,s,c):i.l={from:s,to:c,d:1,l:null,r:null},Lc(i);if(0<_e(s,i.to))return h?Ni(h,s,c):i.r={from:s,to:c,d:1,l:null,r:null},Lc(i);_e(s,i.from)<0&&(i.from=s,i.l=null,i.d=h?h.d+1:1),0<_e(c,i.to)&&(i.to=c,i.r=null,i.d=i.l?i.l.d+1:1),s=!i.r,d&&!i.l&&Ei(i,d),h&&s&&Ei(i,h)}}function Ei(i,s){zs(s)||function c(d,h){var g=h.from,x=h.l,w=h.r;Ni(d,g,h.to),x&&c(d,x),w&&c(d,w)}(i,s)}function zc(i,s){var c=Lo(s),d=c.next();if(!d.done)for(var h=d.value,g=Lo(i),x=g.next(h.from),w=x.value;!d.done&&!x.done;){if(_e(w.from,h.to)<=0&&0<=_e(w.to,h.from))return!0;_e(h.from,w.from)<0?h=(d=c.next(w.from)).value:w=(x=g.next(h.from)).value}return!1}function Lo(i){var s=zs(i)?null:{s:0,n:i};return{next:function(c){for(var d=0<arguments.length;s;)switch(s.s){case 0:if(s.s=1,d)for(;s.n.l&&_e(c,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!d||_e(c,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function Lc(i){var s,c,d,h=(((h=i.r)==null?void 0:h.d)||0)-(((h=i.l)==null?void 0:h.d)||0),h=1<h?"r":h<-1?"l":"";h&&(s=h=="r"?"l":"r",c=r({},i),d=i[h],i.from=d.from,i.to=d.to,i[h]=d[h],c[h]=d[s],(i[s]=c).d=$c(c)),i.d=$c(i)}function $c(c){var s=c.r,c=c.l;return(s?c?Math.max(s.d,c.d):s.d:c?c.d:0)+1}function $o(i,s){return u(s).forEach(function(c){i[c]?Ei(i[c],s[c]):i[c]=function d(h){var g,x,w={};for(g in h)C(h,g)&&(x=h[g],w[g]=!x||typeof x!="object"||R.has(x.constructor)?x:d(x));return w}(s[c])}),i}function Ls(i,s){return i.all||s.all||Object.keys(i).some(function(c){return s[c]&&zc(s[c],i[c])})}N(wt.prototype,((Ot={add:function(i){return Ei(this,i),this},addKey:function(i){return Ni(this,i,i),this},addKeys:function(i){var s=this;return i.forEach(function(c){return Ni(s,c,c)}),this},hasKey:function(i){var s=Lo(this).next(i).value;return s&&_e(s.from,i)<=0&&0<=_e(s.to,i)}})[ue]=function(){return Lo(this)},Ot));var ur={},$s={},Vs=!1;function Vo(i){$o($s,i),Vs||(Vs=!0,setTimeout(function(){Vs=!1,Us($s,!($s={}))},0))}function Us(i,s){s===void 0&&(s=!1);var c=new Set;if(i.all)for(var d=0,h=Object.values(ur);d<h.length;d++)Vc(w=h[d],i,c,s);else for(var g in i){var x,w,g=/^idb\:\/\/(.*)\/(.*)\//.exec(g);g&&(x=g[1],g=g[2],w=ur["idb://".concat(x,"/").concat(g)])&&Vc(w,i,c,s)}c.forEach(function(_){return _()})}function Vc(i,s,c,d){for(var h=[],g=0,x=Object.entries(i.queries.query);g<x.length;g++){for(var w=x[g],_=w[0],V=[],P=0,E=w[1];P<E.length;P++){var F=E[P];Ls(s,F.obsSet)?F.subscribers.forEach(function(U){return c.add(U)}):d&&V.push(F)}d&&h.push([_,V])}if(d)for(var D=0,A=h;D<A.length;D++){var T=A[D],_=T[0],V=T[1];i.queries.query[_]=V}}function lm(i){var s=i._state,c=i._deps.indexedDB;if(s.isBeingOpened||i.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?tt(s.dbOpenError):i});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var d=s.openCanceller,h=Math.round(10*i.verno),g=!1;function x(){if(s.openCanceller!==d)throw new me.DatabaseClosed("db.open() was cancelled")}function w(){return new fe(function(F,D){if(x(),!c)throw new me.MissingAPI;var A=i.name,T=s.autoSchema||!h?c.open(A):c.open(A,h);if(!T)throw new me.MissingAPI;T.onerror=ln(D),T.onblocked=qe(i._fireOnBlocked),T.onupgradeneeded=qe(function(U){var W;P=T.transaction,s.autoSchema&&!i._options.allowEmptyDB?(T.onerror=ki,P.abort(),T.result.close(),(W=c.deleteDatabase(A)).onsuccess=W.onerror=qe(function(){D(new me.NoSuchDatabase("Database ".concat(A," doesnt exist")))})):(P.onerror=ln(D),W=U.oldVersion>Math.pow(2,62)?0:U.oldVersion,E=W<1,i.idbdb=T.result,g&&am(i,P),om(i,W/10,P,D))},D),T.onsuccess=qe(function(){P=null;var U,W,z,Y,te,se,le=i.idbdb=T.result,ne=v(le.objectStoreNames);if(0<ne.length)try{var ge=le.transaction((te=ne).length===1?te[0]:te,"readonly");if(s.autoSchema)se=le,Y=ge,(z=i).verno=se.version/10,Y=z._dbSchema=Bo(0,se,Y),z._storeNames=v(se.objectStoreNames,0),Io(z,[z._allTables],u(Y),Y);else if(zo(i,i._dbSchema,ge),W=ge,((W=Ds(Bo(0,(U=i).idbdb,W),U._dbSchema)).add.length||W.change.some(function(pe){return pe.add.length||pe.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),le.close(),h=le.version+1,g=!0,F(w());Mo(i,ge)}catch{}Pr.push(i),le.onversionchange=qe(function(pe){s.vcFired=!0,i.on("versionchange").fire(pe)}),le.onclose=qe(function(){i.close({disableAutoOpen:!1})}),E&&(ne=i._deps,te=A,Os(se=ne.indexedDB)||te===_o||Is(se,ne.IDBKeyRange).put({name:te}).catch(X)),F()},D)}).catch(function(F){switch(F==null?void 0:F.name){case"UnknownError":if(0<s.PR1398_maxLoop)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),w();break;case"VersionError":if(0<h)return h=0,w()}return fe.reject(F)})}var _,V=s.dbReadyResolve,P=null,E=!1;return fe.race([d,(typeof navigator>"u"?fe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(F){function D(){return indexedDB.databases().finally(F)}_=setInterval(D,100),D()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(w)]).then(function(){return x(),s.onReadyBeingFired=[],fe.resolve(Bs(function(){return i.on.ready.fire(i.vip)})).then(function F(){var D;if(0<s.onReadyBeingFired.length)return D=s.onReadyBeingFired.reduce(xe,X),s.onReadyBeingFired=[],fe.resolve(Bs(function(){return D(i.vip)})).then(F)})}).finally(function(){s.openCanceller===d&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(F){s.dbOpenError=F;try{P&&P.abort()}catch{}return d===s.openCanceller&&i._close(),tt(F)}).finally(function(){s.openComplete=!0,V()}).then(function(){var F;return E&&(F={},i.tables.forEach(function(D){D.schema.indexes.forEach(function(A){A.name&&(F["idb://".concat(i.name,"/").concat(D.name,"/").concat(A.name)]=new wt(-1/0,[[[]]]))}),F["idb://".concat(i.name,"/").concat(D.name,"/")]=F["idb://".concat(i.name,"/").concat(D.name,"/:dels")]=new wt(-1/0,[[[]]])}),Dn(ji).fire(F),Us(F,!0)),i})}function Ws(i){function s(g){return i.next(g)}var c=h(s),d=h(function(g){return i.throw(g)});function h(g){return function(w){var w=g(w),_=w.value;return w.done?_:_&&typeof _.then=="function"?_.then(c,d):f(_)?Promise.all(_).then(c,d):c(_)}}return h(s)()}function Uo(i,s,c){for(var d=f(i)?i.slice():[i],h=0;h<c;++h)d.push(s);return d}var um={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(d){var c=i.table(d),d=c.schema,h={},g=[];function x(F,D,A){var z=Ci(F),T=h[z]=h[z]||[],U=F==null?0:typeof F=="string"?1:F.length,W=0<D,z=r(r({},A),{name:W?"".concat(z,"(virtual-from:").concat(A.name,")"):A.name,lowLevelIndex:A,isVirtual:W,keyTail:D,keyLength:U,extractKey:Rs(F),unique:!W&&A.unique});return T.push(z),z.isPrimaryKey||g.push(z),1<U&&x(U===2?F[0]:F.slice(0,U-1),D+1,A),T.sort(function(Y,te){return Y.keyTail-te.keyTail}),z}var w=x(d.primaryKey.keyPath,0,d.primaryKey);h[":id"]=[w];for(var _=0,V=d.indexes;_<V.length;_++){var P=V[_];x(P.keyPath,0,P)}function E(F){var D,A=F.query.index;return A.isVirtual?r(r({},F),{query:{index:A.lowLevelIndex,range:(D=F.query.range,A=A.keyTail,{type:D.type===1?2:D.type,lower:Uo(D.lower,D.lowerOpen?i.MAX_KEY:i.MIN_KEY,A),lowerOpen:!0,upper:Uo(D.upper,D.upperOpen?i.MIN_KEY:i.MAX_KEY,A),upperOpen:!0})}}):F}return r(r({},c),{schema:r(r({},d),{primaryKey:w,indexes:g,getIndexByKeyPath:function(F){return(F=h[Ci(F)])&&F[0]}}),count:function(F){return c.count(E(F))},query:function(F){return c.query(E(F))},openCursor:function(F){var D=F.query.index,A=D.keyTail,T=D.keyLength;return D.isVirtual?c.openCursor(E(F)).then(function(W){return W&&U(W)}):c.openCursor(F);function U(W){return Object.create(W,{continue:{value:function(z){z!=null?W.continue(Uo(z,F.reverse?i.MAX_KEY:i.MIN_KEY,A)):F.unique?W.continue(W.key.slice(0,T).concat(F.reverse?i.MIN_KEY:i.MAX_KEY,A)):W.continue()}},continuePrimaryKey:{value:function(z,Y){W.continuePrimaryKey(Uo(z,i.MAX_KEY,A),Y)}},primaryKey:{get:function(){return W.primaryKey}},key:{get:function(){var z=W.key;return T===1?z[0]:z.slice(0,T)}},value:{get:function(){return W.value}}})}}})}})}};function Ks(i,s,c,d){return c=c||{},d=d||"",u(i).forEach(function(h){var g,x,w;C(s,h)?(g=i[h],x=s[h],typeof g=="object"&&typeof x=="object"&&g&&x?(w=de(g))!==de(x)?c[d+h]=s[h]:w==="Object"?Ks(g,x,c,d+h+"."):g!==x&&(c[d+h]=s[h]):g!==x&&(c[d+h]=s[h])):c[d+h]=void 0}),u(s).forEach(function(h){C(i,h)||(c[d+h]=s[h])}),c}function Hs(i,s){return s.type==="delete"?s.keys:s.keys||s.values.map(i.extractKey)}var cm={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(s){var c=i.table(s),d=c.schema.primaryKey;return r(r({},c),{mutate:function(h){var g=we.trans,x=g.table(s).hook,w=x.deleting,_=x.creating,V=x.updating;switch(h.type){case"add":if(_.fire===X)break;return g._promise("readwrite",function(){return P(h)},!0);case"put":if(_.fire===X&&V.fire===X)break;return g._promise("readwrite",function(){return P(h)},!0);case"delete":if(w.fire===X)break;return g._promise("readwrite",function(){return P(h)},!0);case"deleteRange":if(w.fire===X)break;return g._promise("readwrite",function(){return function E(F,D,A){return c.query({trans:F,values:!1,query:{index:d,range:D},limit:A}).then(function(T){var U=T.result;return P({type:"delete",keys:U,trans:F}).then(function(W){return 0<W.numFailures?Promise.reject(W.failures[0]):U.length<A?{failures:[],numFailures:0,lastResult:void 0}:E(F,r(r({},D),{lower:U[U.length-1],lowerOpen:!0}),A)})})}(h.trans,h.range,1e4)},!0)}return c.mutate(h);function P(E){var F,D,A,T=we.trans,U=E.keys||Hs(d,E);if(U)return(E=E.type==="add"||E.type==="put"?r(r({},E),{keys:U}):r({},E)).type!=="delete"&&(E.values=o([],E.values)),E.keys&&(E.keys=o([],E.keys)),F=c,A=U,((D=E).type==="add"?Promise.resolve([]):F.getMany({trans:D.trans,keys:A,cache:"immutable"})).then(function(W){var z=U.map(function(Y,te){var se,le,ne,ge=W[te],pe={onerror:null,onsuccess:null};return E.type==="delete"?w.fire.call(pe,Y,ge,T):E.type==="add"||ge===void 0?(se=_.fire.call(pe,Y,E.values[te],T),Y==null&&se!=null&&(E.keys[te]=Y=se,d.outbound||$(E.values[te],d.keyPath,Y))):(se=Ks(ge,E.values[te]),(le=V.fire.call(pe,se,Y,ge,T))&&(ne=E.values[te],Object.keys(le).forEach(function(ae){C(ne,ae)?ne[ae]=le[ae]:$(ne,ae,le[ae])}))),pe});return c.mutate(E).then(function(Y){for(var te=Y.failures,se=Y.results,le=Y.numFailures,Y=Y.lastResult,ne=0;ne<U.length;++ne){var ge=(se||U)[ne],pe=z[ne];ge==null?pe.onerror&&pe.onerror(te[ne]):pe.onsuccess&&pe.onsuccess(E.type==="put"&&W[ne]?E.values[ne]:ge)}return{failures:te,results:se,numFailures:le,lastResult:Y}}).catch(function(Y){return z.forEach(function(te){return te.onerror&&te.onerror(Y)}),Promise.reject(Y)})});throw new Error("Keys missing")}}})}})}};function Uc(i,s,c){try{if(!s||s.keys.length<i.length)return null;for(var d=[],h=0,g=0;h<s.keys.length&&g<i.length;++h)_e(s.keys[h],i[g])===0&&(d.push(c?Z(s.values[h]):s.values[h]),++g);return d.length===i.length?d:null}catch{return null}}var dm={stack:"dbcore",level:-1,create:function(i){return{table:function(s){var c=i.table(s);return r(r({},c),{getMany:function(d){var h;return d.cache?(h=Uc(d.keys,d.trans._cache,d.cache==="clone"))?fe.resolve(h):c.getMany(d).then(function(g){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?Z(g):g},g}):c.getMany(d)},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),c.mutate(d)}})}}}};function Wc(i,s){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function Kc(i,s){switch(i){case"query":return s.values&&!s.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var fm={stack:"dbcore",level:0,name:"Observability",create:function(i){var s=i.schema.name,c=new wt(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(d,h,g){if(we.subscr&&h!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(we.querier));return i.transaction(d,h,g)},table:function(d){function h(U){var T,U=U.query;return[T=U.index,new wt((T=(U=U.range).lower)!=null?T:i.MIN_KEY,(T=U.upper)!=null?T:i.MAX_KEY)]}var g=i.table(d),x=g.schema,w=x.primaryKey,_=x.indexes,V=w.extractKey,P=w.outbound,E=w.autoIncrement&&_.filter(function(A){return A.compound&&A.keyPath.includes(w.keyPath)}),F=r(r({},g),{mutate:function(A){function T(ye){return ye="idb://".concat(s,"/").concat(d,"/").concat(ye),te[ye]||(te[ye]=new wt)}var U,W,z,Y=A.trans,te=A.mutatedParts||(A.mutatedParts={}),se=T(""),le=T(":dels"),ne=A.type,pe=A.type==="deleteRange"?[A.range]:A.type==="delete"?[A.keys]:A.values.length<50?[Hs(w,A).filter(function(ye){return ye}),A.values]:[],ge=pe[0],pe=pe[1],ae=A.trans._cache;return f(ge)?(se.addKeys(ge),(ne=ne==="delete"||ge.length===pe.length?Uc(ge,ae):null)||le.addKeys(ge),(ne||pe)&&(U=T,W=ne,z=pe,x.indexes.forEach(function(ye){var Pe=U(ye.name||"");function De(Ee){return Ee!=null?ye.extractKey(Ee):null}function ke(Ee){ye.multiEntry&&f(Ee)?Ee.forEach(function(Ye){return Pe.addKey(Ye)}):Pe.addKey(Ee)}(W||z).forEach(function(Ee,Je){var Kt=W&&De(W[Je]),Je=z&&De(z[Je]);_e(Kt,Je)!==0&&(Kt!=null&&ke(Kt),Je!=null)&&ke(Je)})}))):ge?(pe={from:(ae=ge.lower)!=null?ae:i.MIN_KEY,to:(ne=ge.upper)!=null?ne:i.MAX_KEY},le.add(pe),se.add(pe)):(se.add(c),le.add(c),x.indexes.forEach(function(ye){return T(ye.name).add(c)})),g.mutate(A).then(function(ye){return!ge||A.type!=="add"&&A.type!=="put"||(se.addKeys(ye.results),E&&E.forEach(function(Pe){for(var De=A.values.map(function(Kt){return Pe.extractKey(Kt)}),ke=Pe.keyPath.findIndex(function(Kt){return Kt===w.keyPath}),Ee=0,Ye=ye.results.length;Ee<Ye;++Ee)De[Ee][ke]=ye.results[Ee];T(Pe.name).addKeys(De)})),Y.mutatedParts=$o(Y.mutatedParts||{},te),ye})}}),D={get:function(A){return[w,new wt(A.key)]},getMany:function(A){return[w,new wt().addKeys(A.keys)]},count:h,query:h,openCursor:h};return u(D).forEach(function(A){F[A]=function(T){var U=we.subscr,W=!!U,z=Wc(we,g)&&Kc(A,T)?T.obsSet={}:U;if(W){var Y,U=function(pe){return pe="idb://".concat(s,"/").concat(d,"/").concat(pe),z[pe]||(z[pe]=new wt)},te=U(""),se=U(":dels"),W=D[A](T),le=W[0],W=W[1];if((A==="query"&&le.isPrimaryKey&&!T.values?se:U(le.name||"")).add(W),!le.isPrimaryKey){if(A!=="count")return Y=A==="query"&&P&&T.values&&g.query(r(r({},T),{values:!1})),g[A].apply(this,arguments).then(function(pe){if(A==="query"){if(P&&T.values)return Y.then(function(De){return De=De.result,te.addKeys(De),pe});var ae=T.values?pe.result.map(V):pe.result;(T.values?te:se).addKeys(ae)}else{var ye,Pe;if(A==="openCursor")return Pe=T.values,(ye=pe)&&Object.create(ye,{key:{get:function(){return se.addKey(ye.primaryKey),ye.key}},primaryKey:{get:function(){var De=ye.primaryKey;return se.addKey(De),De}},value:{get:function(){return Pe&&te.addKey(ye.primaryKey),ye.value}}})}return pe});se.add(c)}}return g[A].apply(this,arguments)}}),F}})}};function Hc(i,s,c){var d;return c.numFailures===0?s:s.type==="deleteRange"||(d=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1,c.numFailures===d)?null:(d=r({},s),f(d.keys)&&(d.keys=d.keys.filter(function(h,g){return!(g in c.failures)})),"values"in d&&f(d.values)&&(d.values=d.values.filter(function(h,g){return!(g in c.failures)})),d)}function qs(i,s){return c=i,((d=s).lower===void 0||(d.lowerOpen?0<_e(c,d.lower):0<=_e(c,d.lower)))&&(c=i,(d=s).upper===void 0||(d.upperOpen?_e(c,d.upper)<0:_e(c,d.upper)<=0));var c,d}function qc(i,s,c,d,h,g){var x,w,_,V,P,E;return!c||c.length===0||(x=s.query.index,w=x.multiEntry,_=s.query.range,V=d.schema.primaryKey.extractKey,P=x.extractKey,E=(x.lowLevelIndex||x).extractKey,(d=c.reduce(function(F,D){var A=F,T=[];if(D.type==="add"||D.type==="put")for(var U=new wt,W=D.values.length-1;0<=W;--W){var z,Y=D.values[W],te=V(Y);!U.hasKey(te)&&(z=P(Y),w&&f(z)?z.some(function(pe){return qs(pe,_)}):qs(z,_))&&(U.addKey(te),T.push(Y))}switch(D.type){case"add":var se=new wt().addKeys(s.values?F.map(function(ae){return V(ae)}):F),A=F.concat(s.values?T.filter(function(ae){return ae=V(ae),!se.hasKey(ae)&&(se.addKey(ae),!0)}):T.map(function(ae){return V(ae)}).filter(function(ae){return!se.hasKey(ae)&&(se.addKey(ae),!0)}));break;case"put":var le=new wt().addKeys(D.values.map(function(ae){return V(ae)}));A=F.filter(function(ae){return!le.hasKey(s.values?V(ae):ae)}).concat(s.values?T:T.map(function(ae){return V(ae)}));break;case"delete":var ne=new wt().addKeys(D.keys);A=F.filter(function(ae){return!ne.hasKey(s.values?V(ae):ae)});break;case"deleteRange":var ge=D.range;A=F.filter(function(ae){return!qs(V(ae),ge)})}return A},i))===i)?i:(d.sort(function(F,D){return _e(E(F),E(D))||_e(V(F),V(D))}),s.limit&&s.limit<1/0&&(d.length>s.limit?d.length=s.limit:i.length===s.limit&&d.length<s.limit&&(h.dirty=!0)),g?Object.freeze(d):d)}function Gc(i,s){return _e(i.lower,s.lower)===0&&_e(i.upper,s.upper)===0&&!!i.lowerOpen==!!s.lowerOpen&&!!i.upperOpen==!!s.upperOpen}function hm(i,s){return((c,d,h,g)=>{if(c===void 0)return d!==void 0?-1:0;if(d===void 0)return 1;if((c=_e(c,d))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return c})(i.lower,s.lower,i.lowerOpen,s.lowerOpen)<=0&&0<=((c,d,h,g)=>{if(c===void 0)return d!==void 0?1:0;if(d===void 0)return-1;if((c=_e(c,d))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return c})(i.upper,s.upper,i.upperOpen,s.upperOpen)}function pm(i,s,c,d){i.subscribers.add(c),d.addEventListener("abort",function(){var h,g;i.subscribers.delete(c),i.subscribers.size===0&&(h=i,g=s,setTimeout(function(){h.subscribers.size===0&&q(g,h)},3e3))})}var mm={stack:"dbcore",level:0,name:"Cache",create:function(i){var s=i.schema.name;return r(r({},i),{transaction:function(c,d,h){var g,x,w=i.transaction(c,d,h);return d==="readwrite"&&(h=(g=new AbortController).signal,w.addEventListener("abort",(x=function(_){return function(){if(g.abort(),d==="readwrite"){for(var V=new Set,P=0,E=c;P<E.length;P++){var F=E[P],D=ur["idb://".concat(s,"/").concat(F)];if(D){var A=i.table(F),T=D.optimisticOps.filter(function(ye){return ye.trans===w});if(w._explicit&&_&&w.mutatedParts)for(var U=0,W=Object.values(D.queries.query);U<W.length;U++)for(var z=0,Y=(le=W[U]).slice();z<Y.length;z++)Ls((ne=Y[z]).obsSet,w.mutatedParts)&&(q(le,ne),ne.subscribers.forEach(function(ye){return V.add(ye)}));else if(0<T.length){D.optimisticOps=D.optimisticOps.filter(function(ye){return ye.trans!==w});for(var te=0,se=Object.values(D.queries.query);te<se.length;te++)for(var le,ne,ge,pe=0,ae=(le=se[te]).slice();pe<ae.length;pe++)(ne=ae[pe]).res!=null&&w.mutatedParts&&(_&&!ne.dirty?(ge=Object.isFrozen(ne.res),ge=qc(ne.res,ne.req,T,A,ne,ge),ne.dirty?(q(le,ne),ne.subscribers.forEach(function(ye){return V.add(ye)})):ge!==ne.res&&(ne.res=ge,ne.promise=fe.resolve({result:ge}))):(ne.dirty&&q(le,ne),ne.subscribers.forEach(function(ye){return V.add(ye)})))}}}V.forEach(function(ye){return ye()})}}})(!1),{signal:h}),w.addEventListener("error",x(!1),{signal:h}),w.addEventListener("complete",x(!0),{signal:h})),w},table:function(c){var d=i.table(c),h=d.schema.primaryKey;return r(r({},d),{mutate:function(g){var x,w=we.trans;return!h.outbound&&w.db._options.cache!=="disabled"&&!w.explicit&&w.idbtrans.mode==="readwrite"&&(x=ur["idb://".concat(s,"/").concat(c)])?(w=d.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Hs(h,g).some(function(_){return _==null}))?(x.optimisticOps.push(g),g.mutatedParts&&Vo(g.mutatedParts),w.then(function(_){0<_.numFailures&&(q(x.optimisticOps,g),(_=Hc(0,g,_))&&x.optimisticOps.push(_),g.mutatedParts)&&Vo(g.mutatedParts)}),w.catch(function(){q(x.optimisticOps,g),g.mutatedParts&&Vo(g.mutatedParts)})):w.then(function(_){var V=Hc(0,r(r({},g),{values:g.values.map(function(P,E){var F;return _.failures[E]?P:($(F=(F=h.keyPath)!=null&&F.includes(".")?Z(P):r({},P),h.keyPath,_.results[E]),F)})}),_);x.optimisticOps.push(V),queueMicrotask(function(){return g.mutatedParts&&Vo(g.mutatedParts)})}),w):d.mutate(g)},query:function(g){var x,w,_,V,P,E,F;return Wc(we,d)&&Kc("query",g)?(x=((_=we.trans)==null?void 0:_.db._options.cache)==="immutable",w=(_=we).requery,_=_.signal,E=((D,A,T,U)=>{var W=ur["idb://".concat(D,"/").concat(A)];if(!W)return[];if(!(D=W.queries[T]))return[null,!1,W,null];var z=D[(U.query?U.query.index.name:null)||""];if(!z)return[null,!1,W,null];switch(T){case"query":var Y=z.find(function(te){return te.req.limit===U.limit&&te.req.values===U.values&&Gc(te.req.query.range,U.query.range)});return Y?[Y,!0,W,z]:[z.find(function(te){return("limit"in te.req?te.req.limit:1/0)>=U.limit&&(!U.values||te.req.values)&&hm(te.req.query.range,U.query.range)}),!1,W,z];case"count":return Y=z.find(function(te){return Gc(te.req.query.range,U.query.range)}),[Y,!!Y,W,z]}})(s,c,"query",g),F=E[0],V=E[2],P=E[3],F&&E[1]?F.obsSet=g.obsSet:(E=d.query(g).then(function(D){var A=D.result;if(F&&(F.res=A),x){for(var T=0,U=A.length;T<U;++T)Object.freeze(A[T]);Object.freeze(A)}else D.result=Z(A);return D}).catch(function(D){return P&&F&&q(P,F),Promise.reject(D)}),F={obsSet:g.obsSet,promise:E,subscribers:new Set,type:"query",req:g,dirty:!1},P?P.push(F):(P=[F],(V=V||(ur["idb://".concat(s,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=P)),pm(F,P,w,_),F.promise.then(function(D){return{result:qc(D.result,g,V==null?void 0:V.optimisticOps,d,F,x)}})):d.query(g)}})}})}};function Wo(i,s){return new Proxy(i,{get:function(c,d,h){return d==="db"?s:Reflect.get(c,d,h)}})}nt.prototype.version=function(i){if(isNaN(i)||i<.1)throw new me.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var s=this._versions,c=s.filter(function(d){return d._cfg.version===i})[0];return c||(c=new this.Version(i),s.push(c),s.sort(im),c.stores({}),this._state.autoSchema=!1),c},nt.prototype._whenReady=function(i){var s=this;return this.idbdb&&(this._state.openComplete||we.letThrough||this._vip)?i():new fe(function(c,d){if(s._state.openComplete)return d(new me.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return void d(new me.DatabaseClosed);s.open().catch(X)}s._state.dbReadyPromise.then(c,d)}).then(i)},nt.prototype.use=function(h){var s=h.stack,c=h.create,d=h.level,h=h.name,g=(h&&this.unuse({stack:s,name:h}),this._middlewares[s]||(this._middlewares[s]=[]));return g.push({stack:s,create:c,level:d??10,name:h}),g.sort(function(x,w){return x.level-w.level}),this},nt.prototype.unuse=function(i){var s=i.stack,c=i.name,d=i.create;return s&&this._middlewares[s]&&(this._middlewares[s]=this._middlewares[s].filter(function(h){return d?h.create!==d:!!c&&h.name!==c})),this},nt.prototype.open=function(){var i=this;return ar(_n,function(){return lm(i)})},nt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,s=Pr.indexOf(this);if(0<=s&&Pr.splice(s,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new fe(function(c){i.dbReadyResolve=c}),i.openCanceller=new fe(function(c,d){i.cancelOpen=d}))},nt.prototype.close=function(s){var s=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,c=this._state;s?(c.isBeingOpened&&c.cancelOpen(new me.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new me.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},nt.prototype.delete=function(i){var s=this,c=(i===void 0&&(i={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),d=this._state;return new fe(function(h,g){function x(){s.close(i);var w=s._deps.indexedDB.deleteDatabase(s.name);w.onsuccess=qe(function(){var _,V,P;_=s._deps,V=s.name,Os(P=_.indexedDB)||V===_o||Is(P,_.IDBKeyRange).delete(V).catch(X),h()}),w.onerror=ln(g),w.onblocked=s._fireOnBlocked}if(c)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(x):x()})},nt.prototype.backendDB=function(){return this.idbdb},nt.prototype.isOpen=function(){return this.idbdb!==null},nt.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},nt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},nt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nt.prototype,"tables",{get:function(){var i=this;return u(this._allTables).map(function(s){return i._allTables[s]})},enumerable:!1,configurable:!0}),nt.prototype.transaction=function(){var i=(function(s,c,d){var h=arguments.length;if(h<2)throw new me.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return d=g.pop(),[s,B(g),d]}).apply(this,arguments);return this._transaction.apply(this,i)},nt.prototype._transaction=function(i,s,c){var d,h,g=this,x=we.trans,w=(x&&x.db===this&&i.indexOf("!")===-1||(x=null),i.indexOf("?")!==-1);i=i.replace("!","").replace("?","");try{if(h=s.map(function(V){if(V=V instanceof g.Table?V.name:V,typeof V!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return V}),i=="r"||i===Cs)d=Cs;else{if(i!="rw"&&i!=Ns)throw new me.InvalidArgument("Invalid transaction mode: "+i);d=Ns}if(x){if(x.mode===Cs&&d===Ns){if(!w)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&h.forEach(function(V){if(x&&x.storeNames.indexOf(V)===-1){if(!w)throw new me.SubTransaction("Table "+V+" not included in parent transaction.");x=null}}),w&&x&&!x.active&&(x=null)}}catch(V){return x?x._promise(null,function(P,E){E(V)}):tt(V)}var _=(function V(P,E,F,D,A){return fe.resolve().then(function(){var z=we.transless||we,T=P._createTransaction(E,F,P._dbSchema,D),z=(T.explicit=!0,{trans:T,transless:z});if(D)T.idbtrans=D.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,P._state.PR1398_maxLoop=3}catch(Y){return Y.name===vt.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return V(P,E,F,null,A)})):tt(Y)}var U,W=Se(A),z=(W&&_r(),fe.follow(function(){var Y;(U=A.call(T,T))&&(W?(Y=An.bind(null,null),U.then(Y,Y)):typeof U.next=="function"&&typeof U.throw=="function"&&(U=Ws(U)))},z));return(U&&typeof U.then=="function"?fe.resolve(U).then(function(Y){return T.active?Y:tt(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):z.then(function(){return U})).then(function(Y){return D&&T._resolve(),T._completion.then(function(){return Y})}).catch(function(Y){return T._reject(Y),tt(Y)})})}).bind(null,this,d,h,x,c);return x?x._promise(d,_,"lock"):we.trans?ar(we.transless,function(){return g._whenReady(_)}):this._whenReady(_)},nt.prototype.table=function(i){if(C(this._allTables,i))return this._allTables[i];throw new me.InvalidTable("Table ".concat(i," does not exist"))};var vn=nt;function nt(i,s){var c,d,h,g,x,w=this,_=(this._middlewares={},this.verno=0,nt.dependencies),_=(this._options=s=r({addons:nt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},s),this._deps={indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange},s.addons),V=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:X,dbReadyPromise:null,cancelOpen:X,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:s.autoOpen}),P=(V.dbReadyPromise=new fe(function(E){V.dbReadyResolve=E}),V.openCanceller=new fe(function(E,F){V.cancelOpen=F}),this._state=V,this.name=i,this.on=wi(this,"populate","blocked","versionchange","close",{ready:[xe,X]}),this.once=function(E,F){var D=function(){for(var A=[],T=0;T<arguments.length;T++)A[T]=arguments[T];w.on(E).unsubscribe(D),F.apply(w,A)};return w.on(E,D)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(E){return function(F,D){nt.vip(function(){var A,T=w._state;T.openComplete?(T.dbOpenError||fe.resolve().then(F),D&&E(F)):T.onReadyBeingFired?(T.onReadyBeingFired.push(F),D&&E(F)):(E(F),A=w,D||E(function U(){A.on.ready.unsubscribe(F),A.on.ready.unsubscribe(U)}))})}}),this.Collection=(c=this,bi(Xp.prototype,function(U,T){this.db=c;var D=jc,A=null;if(T)try{D=T()}catch(z){A=z}var T=U._ctx,U=T.table,W=U.hook.reading.fire;this._ctx={table:U,index:T.index,isPrimKey:!T.index||U.schema.primKey.keyPath&&T.index===U.schema.primKey.name,range:D,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:A,or:T.or,valueMapper:W!==be?W:null}})),this.Table=(d=this,bi(_c.prototype,function(E,F,D){this.db=d,this._tx=D,this.name=E,this.schema=F,this.hook=d._allTables[E]?d._allTables[E].hook:wi(null,{creating:[st,X],reading:[Ce,be],updating:[At,X],deleting:[Le,X]})})),this.Transaction=(h=this,bi(em.prototype,function(E,F,D,A,T){var U=this;E!=="readonly"&&F.forEach(function(W){W=(W=D[W])==null?void 0:W.yProps,W&&(F=F.concat(W.map(function(z){return z.updatesTable})))}),this.db=h,this.mode=E,this.storeNames=F,this.schema=D,this.chromeTransactionDurability=A,this.idbtrans=null,this.on=wi(this,"complete","error","abort"),this.parent=T||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe(function(W,z){U._resolve=W,U._reject=z}),this._completion.then(function(){U.active=!1,U.on.complete.fire()},function(W){var z=U.active;return U.active=!1,U.on.error.fire(W),U.parent?U.parent._reject(W):z&&U.idbtrans&&U.idbtrans.abort(),tt(W)})})),this.Version=(g=this,bi(sm.prototype,function(E){this.db=g,this._cfg={version:E,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,bi(Dc.prototype,function(E,F,D){if(this.db=x,this._ctx={table:E,index:F===":id"?null:F,or:D},this._cmp=this._ascending=_e,this._descending=function(A,T){return _e(T,A)},this._max=function(A,T){return 0<_e(A,T)?A:T},this._min=function(A,T){return _e(A,T)<0?A:T},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(E){0<E.newVersion?console.warn("Another connection wants to upgrade database '".concat(w.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(w.name,"'. Closing db now to resume the delete request.")),w.close({disableAutoOpen:!1})}),this.on("blocked",function(E){!E.newVersion||E.newVersion<E.oldVersion?console.warn("Dexie.delete('".concat(w.name,"') was blocked")):console.warn("Upgrade '".concat(w.name,"' blocked by other connection holding version ").concat(E.oldVersion/10))}),this._maxKey=Si(s.IDBKeyRange),this._createTransaction=function(E,F,D,A){return new w.Transaction(E,F,D,w._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(E){w.on("blocked").fire(E),Pr.filter(function(F){return F.name===w.name&&F!==w&&!F._state.vcFired}).map(function(F){return F.on("versionchange").fire(E)})},this.use(dm),this.use(mm),this.use(fm),this.use(um),this.use(cm),new Proxy(this,{get:function(E,F,D){var A;return F==="_vip"||(F==="table"?function(T){return Wo(w.table(T),P)}:(A=Reflect.get(E,F,D))instanceof _c?Wo(A,P):F==="tables"?A.map(function(T){return Wo(T,P)}):F==="_createTransaction"?function(){return Wo(A.apply(this,arguments),P)}:A)}}));this.vip=P,_.forEach(function(E){return E(w)})}var Ko,Dr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",gm=(Gs.prototype.subscribe=function(i,s,c){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:s,complete:c})},Gs.prototype[Dr]=function(){return this},Gs);function Gs(i){this._subscribe=i}try{Ko={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Ko={indexedDB:null,IDBKeyRange:null}}function Yc(i){var s,c=!1,d=new gm(function(h){var g=Se(i),x,w=!1,_={},V={},P={get closed(){return w},unsubscribe:function(){w||(w=!0,x&&x.abort(),E&&Dn.storagemutated.unsubscribe(D))}},E=(h.start&&h.start(P),!1),F=function(){return Ss(A)},D=function(T){$o(_,T),Ls(V,_)&&F()},A=function(){var T,U,W;!w&&Ko.indexedDB&&(_={},T={},x&&x.abort(),x=new AbortController,W=(z=>{var Y=Er();try{g&&_r();var te=Pn(i,z);return te=g?te.finally(An):te}finally{Y&&Tr()}})(U={subscr:T,signal:x.signal,requery:F,querier:i,trans:null}),Promise.resolve(W).then(function(z){c=!0,s=z,w||U.signal.aborted||(_={},(Y=>{for(var te in Y)if(C(Y,te))return;return 1})(V=T)||E||(Dn(ji,D),E=!0),Ss(function(){return!w&&h.next&&h.next(z)}))},function(z){c=!1,["DatabaseClosedError","AbortError"].includes(z==null?void 0:z.name)||w||Ss(function(){w||h.error&&h.error(z)})}))};return setTimeout(F,0),P});return d.hasValue=function(){return c},d.getValue=function(){return s},d}var cr=vn;function Ys(i){var s=Mn;try{Mn=!0,Dn.storagemutated.fire(i),Us(i,!0)}finally{Mn=s}}N(cr,r(r({},je),{delete:function(i){return new cr(i,{addons:[]}).delete()},exists:function(i){return new cr(i,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return s=cr.dependencies,c=s.indexedDB,s=s.IDBKeyRange,(Os(c)?Promise.resolve(c.databases()).then(function(d){return d.map(function(h){return h.name}).filter(function(h){return h!==_o})}):Is(c,s).toCollection().primaryKeys()).then(i)}catch{return tt(new me.MissingAPI)}var s,c},defineClass:function(){return function(i){p(this,i)}},ignoreTransaction:function(i){return we.trans?ar(we.transless,i):i()},vip:Bs,async:function(i){return function(){try{var s=Ws(i.apply(this,arguments));return s&&typeof s.then=="function"?s:fe.resolve(s)}catch(c){return tt(c)}}},spawn:function(i,s,c){try{var d=Ws(i.apply(c,s||[]));return d&&typeof d.then=="function"?d:fe.resolve(d)}catch(h){return tt(h)}},currentTransaction:{get:function(){return we.trans||null}},waitFor:function(i,s){return i=fe.resolve(typeof i=="function"?cr.ignoreTransaction(i):i).timeout(s||6e4),we.trans?we.trans.waitFor(i):i},Promise:fe,debug:{get:function(){return Ne},set:function(i){gn(i)}},derive:M,extend:p,props:N,override:b,Events:wi,on:Dn,liveQuery:Yc,extendObservabilitySet:$o,getByKeyPath:H,setByKeyPath:$,delByKeyPath:function(i,s){typeof s=="string"?$(i,s,void 0):"length"in s&&[].map.call(s,function(c){$(i,c,void 0)})},shallowClone:O,deepClone:Z,getObjectDiff:Ks,cmp:_e,asap:I,minKey:-1/0,addons:[],connections:Pr,errnames:vt,dependencies:Ko,cache:ur,semVer:"4.3.0",version:"4.3.0".split(".").map(function(i){return parseInt(i)}).reduce(function(i,s,c){return i+s/Math.pow(10,2*c)})})),cr.maxKey=Si(cr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Dn(ji,function(i){Mn||(i=new CustomEvent(_s,{detail:i}),Mn=!0,dispatchEvent(i),Mn=!1)}),addEventListener(_s,function(i){i=i.detail,Mn||Ys(i)}));var Mr,Mn=!1,Qc=function(){};return typeof BroadcastChannel<"u"&&((Qc=function(){(Mr=new BroadcastChannel(_s)).onmessage=function(i){return i.data&&Ys(i.data)}})(),typeof Mr.unref=="function"&&Mr.unref(),Dn(ji,function(i){Mn||Mr.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!vn.disableBfCache&&i.persisted){Ne&&console.debug("Dexie: handling persisted pagehide"),Mr!=null&&Mr.close();for(var s=0,c=Pr;s<c.length;s++)c[s].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!vn.disableBfCache&&i.persisted&&(Ne&&console.debug("Dexie: handling persisted pageshow"),Qc(),Ys({all:new wt(-1/0,[[]])}))})),fe.rejectionMapper=function(i,s){return!i||i instanceof Ae||i instanceof TypeError||i instanceof SyntaxError||!i.name||!xt[i.name]?i:(s=new xt[i.name](s||i.message,i),"stack"in i&&G(s,"stack",{get:function(){return this.inner.stack}}),s)},gn(Ne),r(vn,Object.freeze({__proto__:null,Dexie:vn,Entity:Sc,PropModification:xi,RangeSet:wt,add:function(i){return new xi({add:i})},cmp:_e,default:vn,liveQuery:Yc,mergeRanges:Ei,rangesOverlap:zc,remove:function(i){return new xi({remove:i})},replacePrefix:function(i,s){return new xi({replacePrefix:[i,s]})}}),{default:vn}),vn})})(Wp);var jy=Wp.exports;const xu=xm(jy),hf=Symbol.for("Dexie"),Ja=globalThis[hf]||(globalThis[hf]=xu);if(xu.semVer!==Ja.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${xu.semVer} and ${Ja.semVer}`);const{liveQuery:Qy,mergeRanges:Xy,rangesOverlap:Zy,RangeSet:Jy,cmp:ev,Entity:tv,PropModification:nv,replacePrefix:rv,add:iv,remove:ov,DexieYProvider:av}=Ja,wu="sparkle-brush-current-profile";class Sy extends Ja{constructor(){super("SparkleBrushDB");Nt(this,"sessions");Nt(this,"userProgress");Nt(this,"photos");Nt(this,"profiles");this.version(2).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"})}}const Qt=new Sy,jl=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];let Ta=null;function mi(){if(Ta)return Ta;const e=localStorage.getItem(wu);return Ta=e,e}function mc(e){Ta=e,e?localStorage.setItem(wu,e):localStorage.removeItem(wu)}async function gc(){return Qt.profiles.orderBy("createdAt").toArray()}async function Cy(e){return Qt.profiles.get(e)}async function Kp(e){const t=await gc(),n=new Set(t.map(u=>u.avatarColor)),r=jl.find(u=>!n.has(u))||jl[Math.floor(Math.random()*jl.length)],o={id:`profile-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),avatarColor:r,createdAt:new Date};await Qt.profiles.add(o);const a={id:`progress-${o.id}`,profileId:o.id,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedHats:[]};return await Qt.userProgress.add(a),o}async function Ny(e){await Qt.profiles.delete(e),await Qt.userProgress.where("profileId").equals(e).delete(),await Qt.sessions.where("profileId").equals(e).delete(),mi()===e&&mc(null)}async function wo(e){const t=e||mi();if(!t)throw new Error("No profile selected");let n=await Qt.userProgress.where("profileId").equals(t).first();return n||(n={id:`progress-${t}`,profileId:t,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedHats:[]},await Qt.userProgress.add(n)),n}async function yc(e,t){const n=t||mi();if(!n)throw new Error("No profile selected");const r=await wo(n);await Qt.userProgress.update(r.id,e)}async function Ey(e){const t=mi();if(!t)throw new Error("No profile selected");const n={...e,profileId:t};await Qt.sessions.add(n);const r=await wo(t),o=new Date;o.setHours(0,0,0,0);let a=r.currentStreak;if(r.lastSessionDate){const u=new Date(r.lastSessionDate);u.setHours(0,0,0,0);const f=Math.floor((o.getTime()-u.getTime())/(1e3*60*60*24));f===1?a+=1:f>1&&(a=1)}else a=1;await yc({totalSessions:r.totalSessions+1,currentStreak:a,longestStreak:Math.max(r.longestStreak,a),lastSessionDate:new Date},t)}async function Ty(e){const t=mi();if(!t)throw new Error("No profile selected");const n=await wo(t);n.capturedCreatures.some(o=>o.id===e.id)||await yc({capturedCreatures:[...n.capturedCreatures,e]},t)}async function _y(){if((await gc()).length>0)return;const t=await Qt.userProgress.get("default-user");if(t&&(t.totalSessions>0||t.capturedCreatures.length>0)){const n=await Kp("Player 1");await yc({totalSessions:t.totalSessions,currentStreak:t.currentStreak,longestStreak:t.longestStreak,lastSessionDate:t.lastSessionDate,capturedCreatures:t.capturedCreatures,unlockedHats:t.unlockedHats,selectedHatId:t.selectedHatId},n.id),mc(n.id)}}const Py={red:{gradient:"from-red-500 to-red-700",border:"border-white",stripe:"bg-white",center:"bg-red-500",centerBorder:"border-white"},blue:{gradient:"from-blue-500 to-blue-700",border:"border-red-500",stripe:"bg-red-500",center:"bg-blue-500",centerBorder:"border-red-400"},bee:{gradient:"from-yellow-400 to-yellow-500",border:"border-black",stripe:"bg-black",center:"bg-yellow-400",centerBorder:"border-black"},white:{gradient:"from-white to-gray-200",border:"border-red-500",stripe:"bg-red-500",center:"bg-white",centerBorder:"border-red-400"},master:{gradient:"from-purple-500 via-purple-600 to-purple-800",border:"border-yellow-400",stripe:"bg-yellow-400",center:"bg-purple-400",centerBorder:"border-yellow-300",glow:"shadow-[0_0_20px_rgba(168,85,247,0.7)]"}};function Sl({type:e,size:t,showSparkle:n=!1,className:r=""}){const o=Py[e],a={small:"w-12 h-12",medium:"w-16 h-16",large:"w-20 h-20"},u={small:"w-2 h-2",medium:"w-3 h-3",large:"w-4 h-4"},f={small:"h-0.5",medium:"h-1",large:"h-1"},p=e==="bee";return l.jsxs("div",{className:`relative ${r}`,children:[l.jsxs("div",{className:`
        ${a[t]} rounded-full bg-gradient-to-br ${o.gradient}
        border-4 ${o.border} shadow-xl
        flex items-center justify-center
        ${o.glow||""}
      `,children:[p?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`w-full ${f[t]} bg-black absolute`,style:{top:"30%"}}),l.jsx("div",{className:`w-full ${f[t]} bg-black absolute`,style:{top:"50%"}}),l.jsx("div",{className:`w-full ${f[t]} bg-black absolute`,style:{top:"70%"}})]}):l.jsx("div",{className:`w-full ${f[t]} ${o.stripe} absolute`}),l.jsx("div",{className:`${u[t]} rounded-full ${o.center} border-2 ${o.centerBorder} absolute`})]}),n&&l.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-sparkle",children:""}),e==="master"&&l.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-yellow-400/20"})]})}function Ay({cleaningPercentage:e,userProgress:t,region:n,preSelectedCreature:r,onComplete:o}){const[a,u]=j.useState("intro"),[f,p]=j.useState(r||null),[y,S]=j.useState(0),[C,N]=j.useState("red"),[K,G]=j.useState(!1),[M,ee]=j.useState({x:50,y:85,scale:1,rotation:0}),[k,v]=j.useState({count:0,maxWobbles:3,currentWobble:0,direction:1}),[b,L]=j.useState(!1),[I,H]=j.useState(!1),[$,O]=j.useState(0),Q=j.useRef(null),B=j.useRef(y),R=j.useRef(f);B.current=y,R.current=f,j.useEffect(()=>{if(!r){const he=t.capturedCreatures.map(J=>J.id),q=Bp(e,he,n);p(q)}return()=>{Q.current&&cancelAnimationFrame(Q.current)}},[e,t.capturedCreatures,n,r]),j.useEffect(()=>{if(f){const he=sy(e,f.rarity);S(he),N(ly(e));const q=f.rarity==="mythic"?6+Math.floor(Math.random()*2):f.rarity==="legendary"?4+Math.floor(Math.random()*2):f.rarity==="rare"?3+Math.floor(Math.random()*2):2+Math.floor(Math.random()*2);v(oe=>({...oe,maxWobbles:q}));const J=setTimeout(()=>u("ready"),2e3);return()=>clearTimeout(J)}},[f,e]);const ie=j.useCallback(()=>{let he=0;const q=40,J=()=>{he++;const oe=he/q,Se=1-Math.pow(1-oe,3),je=Math.sin(oe*Math.PI)*30;ee({x:50,y:85-Se*55-je,scale:1-oe*.3,rotation:oe*720}),he<q?Q.current=requestAnimationFrame(J):(u("impact"),H(!0),((f==null?void 0:f.rarity)==="legendary"||(f==null?void 0:f.rarity)==="mythic")&&L(!0),pr("capture"),setTimeout(()=>{H(!1),L(!1),Z()},300))};Q.current=requestAnimationFrame(J)},[f]),Z=j.useCallback(()=>{u("wobble");let he=0;const q=k.maxWobbles,J=()=>{he++,v(Ie=>({...Ie,currentWobble:he})),pr("wobble");let oe=0;const Se=30,je=()=>{oe++;const Ie=oe/Se,Ae=Math.sin(Ie*Math.PI*4)*(1-Ie)*15;if(ee(ze=>({...ze,x:50+Ae,rotation:Ae*2})),oe<Se)Q.current=requestAnimationFrame(je);else{ee(Ue=>({...Ue,x:50,rotation:0}));const ze=400+Math.random()*400;he<q?setTimeout(J,ze):setTimeout(()=>{u("suspense"),ce()},ze)}};Q.current=requestAnimationFrame(je)};setTimeout(J,500)},[k.maxWobbles]),ce=j.useCallback(()=>{let he=0;const q=()=>{he+=.02,O(Math.min(he,.5)),he<.5&&(Q.current=requestAnimationFrame(q))};Q.current=requestAnimationFrame(q);const J=R.current,oe=B.current,Se=(J==null?void 0:J.rarity)==="mythic"?3500:(J==null?void 0:J.rarity)==="legendary"?2500:(J==null?void 0:J.rarity)==="rare"?1800:1200;console.log("[CaptureGame] Starting suspense with capture rate:",oe),setTimeout(()=>{const je=Math.random(),Ie=je<oe;if(console.log("[CaptureGame] Capture roll:",je,"rate:",oe,"success:",Ie),G(Ie),O(0),u("result"),Ie){if(pr("click"),setTimeout(()=>pr("success"),250),J){const Ae={...J,capturedAt:new Date};Ty(Ae)}}else pr("fail")},Se)},[]),de=j.useCallback(()=>{a!=="ready"||!f||(u("throwing"),ie())},[a,f,ie]),ue=j.useCallback(()=>{o(K?f:null)},[K,f,o]);return f?l.jsxs("div",{className:`relative flex flex-col h-full overflow-hidden ${b?"animate-shake":""}`,children:[l.jsx("div",{className:"absolute inset-0",children:l.jsx(Ea,{region:n})}),I&&l.jsx("div",{className:"absolute inset-0 bg-white z-50 animate-flash"}),$>0&&l.jsx("div",{className:"absolute inset-0 bg-black z-20 pointer-events-none transition-opacity",style:{opacity:$}}),l.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-center p-6 z-10",children:[a==="intro"&&l.jsxs("div",{className:"text-center animate-bounce-gentle",children:[l.jsx("div",{className:"text-xl text-white mb-2 drop-shadow-lg",children:"A wild creature appeared!"}),l.jsxs("div",{className:"relative inline-block",children:[l.jsx(rn,{creature:f,size:150,animated:!0}),(f.rarity==="legendary"||f.rarity==="mythic")&&l.jsx("div",{className:"absolute inset-0 animate-pulse",children:l.jsx("div",{className:`absolute inset-0 ${f.rarity==="mythic"?"bg-orange-400/30":"bg-yellow-400/20"} rounded-full blur-xl`})})]}),l.jsx("div",{className:"text-2xl font-bold text-white mt-3 drop-shadow-lg",children:f.name}),l.jsx("div",{className:`text-lg mt-1 font-semibold ${f.rarity==="mythic"?"text-orange-400 animate-pulse":f.rarity==="legendary"?"text-yellow-400 animate-pulse":f.rarity==="rare"?"text-purple-400":"text-gray-300"}`,children:f.rarity.toUpperCase()}),l.jsx("div",{className:"text-sm text-purple-200 mt-2 max-w-xs mx-auto",children:f.description})]}),(a==="ready"||a==="throwing"||a==="impact"||a==="wobble"||a==="suspense")&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`absolute top-1/4 left-1/2 -translate-x-1/2 ${a==="impact"?"animate-shake":"animate-float"}`,children:a!=="impact"&&a!=="wobble"&&a!=="suspense"?l.jsx(rn,{creature:f,size:120,animated:!0}):l.jsxs("div",{className:"relative",children:[l.jsx("div",{style:{transform:`translateX(${M.x-50}px) rotate(${M.rotation}deg)`},children:l.jsx(Sl,{type:C,size:"large"})}),a==="wobble"&&l.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 flex gap-1",children:[...Array(k.maxWobbles)].map((he,q)=>l.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${q<k.currentWobble?"bg-yellow-400 scale-100":"bg-gray-600 scale-75"}`},q))}),a==="suspense"&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-yellow-400/50 animate-ping"})})]})}),a==="ready"&&l.jsx("div",{className:"absolute transition-all duration-100 animate-bounce-gentle",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:l.jsx(Sl,{type:C,size:"medium",showSparkle:!0})}),a==="throwing"&&l.jsx("div",{className:"absolute transition-none",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:l.jsx(Sl,{type:C,size:"medium"})}),a==="ready"&&l.jsxs("div",{className:"absolute bottom-24 text-center",children:[l.jsxs("div",{className:"text-lg text-white mb-2 drop-shadow-lg",children:["Capture chance: ",l.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round(y*100),"%"]})]}),l.jsx("button",{onClick:de,className:"px-8 py-4 text-2xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform animate-button-glow",children:"Throw Sparkle Ball! "})]}),(a==="wobble"||a==="suspense")&&l.jsx("div",{className:"absolute bottom-24 text-center",children:l.jsx("div",{className:"text-xl text-white animate-pulse drop-shadow-lg",children:a==="wobble"?"...":"Please work..."})})]}),a==="result"&&l.jsx("div",{className:"text-center z-30 bg-purple-900/90 backdrop-blur-sm rounded-3xl p-6 mx-4 border border-purple-500/30 shadow-2xl",children:K?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-4xl text-yellow-400 font-bold mb-4 animate-bounce-gentle drop-shadow-lg",children:"CAUGHT!"}),l.jsxs("div",{className:"relative inline-block",children:[l.jsx(rn,{creature:f,size:150,animated:!0}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((he,q)=>l.jsx("div",{className:"absolute text-3xl animate-sparkle",style:{left:`${20+q%4*20}%`,top:`${20+Math.floor(q/4)*40}%`,animationDelay:`${q*.1}s`},children:""},q))})]}),l.jsx("div",{className:"text-2xl font-bold text-white mt-4",children:f.name}),l.jsx("div",{className:"text-purple-200 mt-2 max-w-xs mx-auto",children:f.description}),l.jsx("div",{className:"text-4xl mt-4",children:""})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-3xl text-red-400 font-bold mb-4",children:"Oh no! It escaped!"}),l.jsx("div",{className:"opacity-50 inline-block",children:l.jsx(rn,{creature:f,size:120,animated:!1})}),l.jsx("div",{className:"text-xl text-purple-200 mt-4 max-w-xs mx-auto",children:"Keep brushing well and try again tomorrow!"}),l.jsx("div",{className:"text-4xl mt-4",children:""})]})})]}),a==="result"&&l.jsx("div",{className:"relative z-30 p-6",children:l.jsx("button",{onClick:ue,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg",children:"Continue"})}),l.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
        @keyframes flash {
          0% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-flash {
          animation: flash 0.3s ease-out forwards;
        }
      `})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("div",{className:"text-xl text-center text-purple-200",children:"You've caught all the creatures in this region!"}),l.jsx("button",{onClick:()=>o(null),className:"mt-8 px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Continue"})]})}function Ry({photos:e,capturedCreature:t,onSelectPhoto:n,onSkip:r}){return e.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"No Photos"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"No photos were captured during this session."}),l.jsx("button",{onClick:r,className:"px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Go Home"})]}):l.jsxs("div",{className:"flex flex-col h-full p-4",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Your Photos!"}),l.jsx("p",{className:"text-purple-200 text-sm",children:"Tap a photo to decorate it with stickers!"}),t&&l.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-yellow-900/30 px-3 py-1 rounded-full",children:[l.jsx(rn,{creature:t,size:24,animated:!1}),l.jsx("span",{className:"text-sm text-yellow-300",children:"New sticker unlocked!"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map((o,a)=>l.jsx("button",{onClick:()=>n(o),className:"aspect-[3/4] rounded-2xl overflow-hidden bg-purple-900/50 active:scale-95 transition-transform shadow-lg",children:l.jsx("img",{src:o,alt:`Photo ${a+1}`,className:"w-full h-full object-cover"})},a))})}),l.jsx("button",{onClick:r,className:"w-full mt-4 py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl",children:"Skip for now"})]})}const ua=[{id:"none",name:"Squeaky Clean",imageUrl:""},{id:"rainbow",name:"Unicorn Burp",imageUrl:"linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff)"},{id:"purple",name:"Grape Soda Pop",imageUrl:"linear-gradient(135deg, #667eea, #764ba2)"},{id:"sunset",name:"Peachy Keen",imageUrl:"linear-gradient(135deg, #fa709a, #fee140)"},{id:"ocean",name:"Mermaid Splash",imageUrl:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{id:"forest",name:"Froggy Pond",imageUrl:"linear-gradient(135deg, #11998e, #38ef7d)"},{id:"candy",name:"Bubblegum Blast",imageUrl:"linear-gradient(135deg, #f093fb, #f5576c)"},{id:"night",name:"Sleepy Time",imageUrl:"linear-gradient(135deg, #0f0c29, #302b63, #24243e)"},{id:"gold",name:"Cheesy Grin",imageUrl:"linear-gradient(135deg, #f7971e, #ffd200)"},{id:"mint",name:"Mint Fresh",imageUrl:"linear-gradient(135deg, #00b09b, #96c93d)"}];var ht=[];for(var Cl=0;Cl<256;++Cl)ht.push((Cl+256).toString(16).slice(1));function Fy(e,t=0){return(ht[e[t+0]]+ht[e[t+1]]+ht[e[t+2]]+ht[e[t+3]]+"-"+ht[e[t+4]]+ht[e[t+5]]+"-"+ht[e[t+6]]+ht[e[t+7]]+"-"+ht[e[t+8]]+ht[e[t+9]]+"-"+ht[e[t+10]]+ht[e[t+11]]+ht[e[t+12]]+ht[e[t+13]]+ht[e[t+14]]+ht[e[t+15]]).toLowerCase()}var ca,Dy=new Uint8Array(16);function My(){if(!ca&&(ca=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ca))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ca(Dy)}var Iy=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const pf={randomUUID:Iy};function Oy(e,t,n){if(pf.randomUUID&&!e)return pf.randomUUID();e=e||{};var r=e.random||(e.rng||My)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Fy(r)}const Nl=[{label:"XS",scale:.5},{label:"S",scale:.75},{label:"M",scale:1},{label:"L",scale:1.5}],mf=80,gf=2e3,da=30,fa=5;function By({photo:e,capturedCreatures:t,onDone:n,onBack:r}){const[o,a]=j.useState([]),[u,f]=j.useState(ua[0]),[p,y]=j.useState(null),[S,C]=j.useState(null),[N,K]=j.useState(!1),[G,M]=j.useState(null),[ee,k]=j.useState(0),[v,b]=j.useState(!1),[L,I]=j.useState(!1),[H,$]=j.useState([]),O=j.useRef(null),[Q,B]=j.useState(!1),[R,ie]=j.useState(!1),Z=j.useRef(null),ce=j.useRef(0),de=j.useCallback(X=>{if(o.length>=da)return;const be=o.length%10,Ce=50+be*fa-5*fa/2,Me=50+be*fa-5*fa/2,st=Math.max(10,Math.min(90,Ce)),Le=Math.max(10,Math.min(90,Me)),At={id:Oy(),stickerId:X.id,creatureId:X.id,imageUrl:`/vibe-brushing/creatures/${X.id}.png`,x:st,y:Le,scale:1,rotation:0};a(ft=>[...ft,At]),M(X.id),K(!1),C(At.id)},[o.length]),ue=j.useCallback((X,be)=>{be.stopPropagation(),y(X),C(X)},[]),he=j.useCallback(X=>{if(!p||!O.current)return;const be=O.current.getBoundingClientRect();let Ce,Me;"touches"in X?(Ce=X.touches[0].clientX,Me=X.touches[0].clientY):(Ce=X.clientX,Me=X.clientY);const st=(Ce-be.left)/be.width*100,Le=(Me-be.top)/be.height*100;a(At=>At.map(ft=>ft.id===p?{...ft,x:Math.max(0,Math.min(100,st)),y:Math.max(0,Math.min(100,Le))}:ft))},[p]),q=j.useCallback(X=>{a(be=>be.filter(Ce=>Ce.id!==X)),S===X&&C(null)},[S]),J=j.useCallback(X=>{a(be=>be.map(Ce=>{if(Ce.id!==X)return Ce;const st=(Nl.findIndex(Le=>Math.abs(Le.scale-Ce.scale)<.01)+1)%Nl.length;return{...Ce,scale:Nl[st].scale}}))},[]),oe=j.useCallback((X,be)=>{be.stopPropagation(),C(X)},[]),Se=j.useCallback(()=>{C(null)},[]),je=j.useCallback(()=>{const be=(ua.findIndex(Ce=>Ce.id===u.id)+1)%ua.length;f(ua[be])},[u]),Ie=j.useCallback(()=>{S&&q(S)},[S,q]),Ae=j.useCallback(()=>{S&&J(S)},[S,J]),ze=j.useCallback(()=>{I(!0),k(0),b(!1);const X=["","","","","","",""],be=Array.from({length:16},(Ce,Me)=>({id:Me,x:50,y:50,angle:Me*360/16,emoji:X[Math.floor(Math.random()*X.length)]}));$(be),setTimeout(()=>{a([]),C(null),I(!1),$([])},600)},[]),Ue=j.useCallback(()=>{ze()},[ze]),We=j.useCallback(()=>{b(!0),ce.current=Date.now();const X=()=>{const be=Date.now()-ce.current,Ce=Math.min(be/gf,1);k(Ce),Ce>=1?Ue():Z.current=requestAnimationFrame(X)};Z.current=requestAnimationFrame(X)},[Ue]),vt=j.useCallback(()=>{b(!1),k(0),Z.current&&(cancelAnimationFrame(Z.current),Z.current=null)},[]),Be=j.useCallback(async()=>{B(!0);try{const X=document.createElement("canvas"),be=X.getContext("2d");if(!be)return;const Ce=new Image;Ce.crossOrigin="anonymous",await new Promise((xe,Ne)=>{Ce.onload=()=>xe(),Ce.onerror=Ne,Ce.src=e}),X.width=Ce.width,X.height=Ce.height,u.imageUrl&&(be.fillStyle="#000",be.fillRect(0,0,X.width,X.height)),be.drawImage(Ce,0,0);const Me=Math.min(X.width,X.height)/4,st=o.map(xe=>new Promise((Ne,gn)=>{const Ct=new Image;Ct.crossOrigin="anonymous",Ct.onload=()=>Ne({sticker:xe,img:Ct}),Ct.onerror=gn,Ct.src=xe.imageUrl}));(await Promise.all(st)).forEach(({sticker:xe,img:Ne})=>{const gn=xe.x/100*X.width,Ct=xe.y/100*X.height,nr=Me*xe.scale;be.save(),be.translate(gn,Ct),be.rotate(xe.rotation*Math.PI/180),be.drawImage(Ne,-nr/2,-nr/2,nr,nr),be.restore()});const At=X.toDataURL("image/png"),ft=document.createElement("a");ft.download=`sparkle-brush-${Date.now()}.png`,ft.href=At,ft.click(),setTimeout(n,500)}catch(X){console.error("Failed to save image:",X),B(!1)}},[e,o,u,n]);j.useEffect(()=>{const X=()=>{y(null),vt()},be=()=>{y(null),vt()};return window.addEventListener("mouseup",X),window.addEventListener("touchend",be),()=>{window.removeEventListener("mouseup",X),window.removeEventListener("touchend",be),Z.current&&cancelAnimationFrame(Z.current)}},[vt]);const me=t.find(X=>X.id===G),xt=j.useCallback(()=>{me&&de(me)},[me,de]);return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-900/50",children:[l.jsx("button",{onClick:r,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg",children:" Back"}),l.jsx("h1",{className:"text-lg font-bold",children:"Decorate!"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ie(!0),disabled:Q,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg disabled:opacity-50",children:"Skip"}),l.jsx("button",{onClick:Be,disabled:Q,className:"px-4 py-1 text-white bg-green-600 rounded-lg disabled:opacity-50",children:Q?"...":"Save"})]})]}),l.jsxs("div",{ref:O,className:"flex-1 relative overflow-hidden m-3 rounded-2xl",style:{background:u.imageUrl||"transparent"},onMouseMove:he,onTouchMove:he,onClick:Se,children:[l.jsx("img",{src:e,alt:"Your photo",className:"w-full h-full object-contain",draggable:!1}),o.map(X=>{const be=S===X.id,Ce=p===X.id;return l.jsx("div",{className:`absolute cursor-move select-none ${Ce?"z-20":be?"z-10":""}`,style:{left:`${X.x}%`,top:`${X.y}%`,transform:"translate(-50%, -50%)",transition:Ce?"none":"transform 0.1s"},onMouseDown:Me=>ue(X.id,Me),onTouchStart:Me=>ue(X.id,Me),onClick:Me=>oe(X.id,Me),children:l.jsx("div",{className:`relative ${be?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-transparent rounded-lg":""}`,style:{transform:`scale(${X.scale}) rotate(${X.rotation}deg)`,transition:Ce?"none":"transform 0.15s"},children:l.jsx("img",{src:X.imageUrl,alt:"Sticker",className:"pointer-events-none",style:{width:mf,height:mf,objectFit:"contain"},draggable:!1})})},X.id)}),o.length===0&&!N&&!L&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("div",{className:"bg-black/50 rounded-xl px-4 py-2 text-sm text-white text-center",children:"Tap the + button to add creature stickers!"})}),L&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 bg-orange-500/30 animate-explosion-flash pointer-events-none z-30"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-40",children:l.jsx("div",{className:"text-8xl animate-explosion-center",children:""})}),H.map(X=>l.jsx("div",{className:"absolute text-3xl pointer-events-none z-40 animate-explosion-particle",style:{left:"50%",top:"50%","--particle-angle":`${X.angle}deg`},children:X.emoji},X.id))]})]}),l.jsx("div",{className:"bg-purple-900/50 p-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>K(!0),disabled:o.length>=da,className:`w-12 h-12 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl active:scale-95 transition-transform shadow-lg ${o.length>=da?"bg-gray-600 opacity-50 cursor-not-allowed":"bg-purple-600"}`,children:"+"}),l.jsxs("button",{onClick:je,className:"h-12 flex-shrink-0 bg-purple-800/50 rounded-xl flex items-center gap-2 px-3 active:scale-95 transition-transform",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-white/30",style:{background:u.imageUrl||"#1E1B4B"}}),l.jsx("span",{className:"text-xs text-purple-200",children:u.name})]}),me&&o.length<da&&l.jsxs("button",{onClick:xt,className:"h-12 flex-shrink-0 bg-green-700/50 rounded-xl flex items-center gap-2 px-3 active:scale-95 transition-transform hover:bg-green-600/50",children:[l.jsx("img",{src:`/vibe-brushing/creatures/${me.id}.png`,alt:me.name,className:"w-8 h-8 object-contain"}),l.jsx("span",{className:"text-xs text-green-200",children:"+ Add"})]}),l.jsx("div",{className:"flex-1"}),S&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:Ae,className:"w-12 h-12 flex-shrink-0 bg-blue-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:l.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),l.jsx("button",{onClick:Ie,className:"w-12 h-12 flex-shrink-0 bg-red-600 rounded-xl flex items-center justify-center text-xl text-white active:scale-95 transition-transform shadow-lg",children:""})]}),l.jsx("div",{className:"flex-1"}),o.length>0&&l.jsxs("button",{onMouseDown:We,onTouchStart:We,onMouseUp:vt,onTouchEnd:vt,onMouseLeave:vt,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl transition-all relative overflow-hidden ${v?"bg-red-600 scale-105":"bg-red-900/70"}`,style:{animation:v?"bomb-shake 0.1s infinite":"none"},children:[l.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"4"}),l.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"#fbbf24",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${ee*94.2} 94.2`,style:{filter:"drop-shadow(0 0 4px #fbbf24)"}})]}),v&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-lg drop-shadow-lg",children:Math.ceil((1-ee)*(gf/1e3))})}),l.jsx("span",{className:`relative z-10 transition-all ${v?"scale-75 opacity-50":""}`,children:""}),l.jsx("style",{children:`
                @keyframes bomb-shake {
                  0%, 100% { transform: translateX(0); }
                  25% { transform: translateX(-2px) rotate(-2deg); }
                  75% { transform: translateX(2px) rotate(2deg); }
                }
                @keyframes explosion-flash {
                  0% { opacity: 0; }
                  20% { opacity: 1; }
                  100% { opacity: 0; }
                }
                @keyframes explosion-center {
                  0% { transform: scale(0) rotate(0deg); opacity: 1; }
                  50% { transform: scale(2) rotate(180deg); opacity: 1; }
                  100% { transform: scale(3) rotate(360deg); opacity: 0; }
                }
                @keyframes explosion-particle {
                  0% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(0) scale(1);
                    opacity: 1;
                  }
                  100% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(150px) scale(0);
                    opacity: 0;
                  }
                }
                .animate-explosion-flash {
                  animation: explosion-flash 0.6s ease-out forwards;
                }
                .animate-explosion-center {
                  animation: explosion-center 0.6s ease-out forwards;
                }
                .animate-explosion-particle {
                  animation: explosion-particle 0.6s ease-out forwards;
                }
              `})]})]})}),N&&l.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>K(!1),children:l.jsxs("div",{className:"bg-purple-900 rounded-2xl p-4 m-4 max-w-md max-h-[80vh] overflow-auto",onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Add Creature Sticker"}),l.jsx("button",{onClick:()=>K(!1),className:"w-8 h-8 bg-purple-800 rounded-full flex items-center justify-center text-purple-300 hover:bg-purple-700",children:""})]}),t.length===0?l.jsxs("div",{className:"text-center py-8 text-purple-300",children:[l.jsx("p",{children:"No creatures captured yet!"}),l.jsx("p",{className:"text-sm mt-2",children:"Complete brushing sessions to catch creatures."})]}):l.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(X=>l.jsxs("button",{onClick:()=>de(X),className:"aspect-square bg-purple-800/50 rounded-xl p-2 flex flex-col items-center justify-center gap-1 hover:bg-purple-700/50 active:scale-95 transition-all",children:[l.jsx("img",{src:`/vibe-brushing/creatures/${X.id}.png`,alt:X.name,className:"w-16 h-16 object-contain"}),l.jsx("span",{className:"text-xs text-purple-200 truncate w-full text-center",children:X.name})]},X.id))})]})}),R&&l.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>ie(!1),children:l.jsxs("div",{className:"bg-purple-900 rounded-2xl p-6 m-4 max-w-sm text-center",onClick:X=>X.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold mb-2",children:"Skip Decorating?"}),l.jsx("p",{className:"text-purple-300 mb-6",children:"Your photo won't be saved. Are you sure you want to skip?"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>ie(!1),className:"flex-1 py-3 bg-purple-800 rounded-xl font-semibold hover:bg-purple-700 active:scale-95 transition-all",children:"Cancel"}),l.jsx("button",{onClick:()=>{ie(!1),n()},className:"flex-1 py-3 bg-red-600 rounded-xl font-semibold hover:bg-red-500 active:scale-95 transition-all",children:"Skip"})]})]})})]})}function zy({userProgress:e,onBack:t}){const[n,r]=j.useState(null),o=new Set(e.capturedCreatures.map(f=>f.id)),a={mythic:mt.filter(f=>f.rarity==="mythic"),legendary:mt.filter(f=>f.rarity==="legendary"),rare:mt.filter(f=>f.rarity==="rare"),common:mt.filter(f=>f.rarity==="common")},u=f=>{o.has(f.id)&&r(f)};return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),l.jsx("h1",{className:"text-xl font-bold",children:"My Collection"}),l.jsxs("div",{className:"text-sm text-purple-300",children:[o.size,"/",mt.length]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l.jsx(ha,{title:" Mythic",creatures:a.mythic,capturedIds:o,color:"rainbow",onCreatureClick:u}),l.jsx(ha,{title:" Legendary",creatures:a.legendary,capturedIds:o,color:"yellow",onCreatureClick:u}),l.jsx(ha,{title:" Rare",creatures:a.rare,capturedIds:o,color:"purple",onCreatureClick:u}),l.jsx(ha,{title:" Common",creatures:a.common,capturedIds:o,color:"gray",onCreatureClick:u})]}),l.jsx("div",{className:"p-4 bg-purple-900/50",children:l.jsxs("div",{className:"flex justify-around text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),l.jsx("div",{className:"text-xs text-purple-300",children:"Day Streak"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.totalSessions}),l.jsx("div",{className:"text-xs text-purple-300",children:"Total Sessions"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.longestStreak}),l.jsx("div",{className:"text-xs text-purple-300",children:"Best Streak"})]})]})}),n&&l.jsx(Ly,{creature:n,capturedCreatures:e.capturedCreatures,onClose:()=>r(null)})]})}function ha({title:e,creatures:t,capturedIds:n,color:r,onCreatureClick:o}){const a=t.filter(f=>n.has(f.id)).length,u={rainbow:"border-orange-500/50 bg-gradient-to-r from-orange-900/20 via-red-900/20 to-yellow-900/20",yellow:"border-yellow-500/30 bg-yellow-900/10",purple:"border-purple-500/30 bg-purple-900/10",gray:"border-gray-500/30 bg-gray-900/10"};return l.jsxs("div",{className:`mb-6 p-4 rounded-2xl border ${u[r]}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h2",{className:"text-lg font-bold",children:e}),l.jsxs("span",{className:"text-sm text-purple-300",children:[a,"/",t.length]})]}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(f=>{const p=n.has(f.id);return l.jsxs("button",{onClick:()=>o(f),disabled:!p,className:`aspect-square rounded-xl flex flex-col items-center justify-center p-2 transition-all ${p?"bg-purple-800/50 hover:bg-purple-700/50 cursor-pointer active:scale-95":"bg-purple-900/30 opacity-50 cursor-default"}`,children:[l.jsx("div",{className:`${p?"animate-float":"grayscale opacity-50"}`,children:p?l.jsx(rn,{creature:f,size:48,animated:!1}):l.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-2xl",children:""})}),l.jsx("div",{className:"text-xs text-center mt-1 truncate w-full",children:p?f.name:"???"})]},f.id)})})]})}function Ly({creature:e,capturedCreatures:t,onClose:n}){const r=t.filter(y=>y.id===e.id).length,o=ay(e.region),a={Nature:"bg-green-600",Water:"bg-blue-600",Fire:"bg-orange-600",Electric:"bg-yellow-500",Air:"bg-cyan-500",Cosmic:"bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500"},u={common:"text-gray-300",rare:"text-purple-400",legendary:"text-yellow-400",mythic:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-400 to-yellow-400"},f=y=>y>=100?`${(y/100).toFixed(1)}m`:`${y}cm`,p=y=>y>=1e3?`${(y/1e3).toFixed(1)}t`:y<1?`${(y*1e3).toFixed(0)}g`:`${y}kg`;return l.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:n,children:l.jsxs("div",{className:"bg-purple-900/95 rounded-3xl max-w-sm w-full overflow-hidden shadow-2xl border border-purple-500/30",onClick:y=>y.stopPropagation(),children:[l.jsxs("div",{className:"relative bg-gradient-to-b from-purple-800/50 to-transparent p-6 flex flex-col items-center",children:[l.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-purple-800/80 flex items-center justify-center text-purple-300 hover:bg-purple-700/80 transition-colors",children:""}),l.jsx("div",{className:"animate-float",children:l.jsx(rn,{creature:e,size:120,animated:!0})}),l.jsx("h2",{className:`text-2xl font-bold mt-4 ${u[e.rarity]}`,children:e.name}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium text-white ${a[o]}`,children:o}),l.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-700/60 text-purple-200 capitalize",children:e.rarity})]})]}),l.jsxs("div",{className:"px-6 pb-6",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-white",children:f(e.height)}),l.jsx("div",{className:"text-xs text-purple-300",children:"Height"})]}),l.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-white",children:p(e.weight)}),l.jsx("div",{className:"text-xs text-purple-300",children:"Weight"})]}),l.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:["",r]}),l.jsx("div",{className:"text-xs text-purple-300",children:"Caught"})]})]}),l.jsx("div",{className:"bg-purple-800/30 rounded-xl p-4",children:l.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:e.description})})]})]})})}function $y({onBack:e,onHatDebug:t,onGraphicsDebug:n}){const[r,o]=j.useState(Lp);j.useEffect(()=>{uy(r)},[r]);const a=f=>{o(p=>({...p,sessionDurationMinutes:f}))},u=[{value:1,label:"1 Minute",description:"Quick brush"},{value:2,label:"2 Minutes",description:"Recommended"},{value:3,label:"3 Minutes",description:"Extra thorough"}];return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),l.jsx("h1",{className:"text-xl font-bold",children:"Settings"}),l.jsx("div",{className:"w-20"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[l.jsx("h2",{className:"text-lg font-bold mb-1",children:"Brushing Duration"}),l.jsx("p",{className:"text-sm text-purple-300 mb-4",children:"How long should each brushing session last?"}),l.jsx("div",{className:"space-y-2",children:u.map(f=>l.jsxs("button",{onClick:()=>a(f.value),className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${r.sessionDurationMinutes===f.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${r.sessionDurationMinutes===f.value?"border-white bg-white":"border-purple-400"}`,children:r.sessionDurationMinutes===f.value&&l.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold",children:f.label}),l.jsx("div",{className:`text-xs ${r.sessionDurationMinutes===f.value?"text-white/80":"text-purple-400"}`,children:f.description})]})]}),f.value===2&&l.jsx("span",{className:"text-xs bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full font-bold",children:" Best"})]},f.value))})]}),l.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[l.jsx("h2",{className:"text-lg font-bold mb-2",children:"About Sparkle"}),l.jsx("p",{className:"text-sm text-purple-300",children:"Sparkle makes tooth brushing fun! Brush your teeth to clean creatures, catch them, and build your collection."}),l.jsx("div",{className:"mt-4 text-center text-xs text-purple-500",children:"Version 1.0.0"})]}),(t||n)&&l.jsxs("div",{className:"bg-gray-900/50 rounded-2xl p-4 border border-gray-700",children:[l.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-300",children:"Developer Tools"}),l.jsxs("div",{className:"space-y-2",children:[n&&l.jsxs("button",{onClick:n,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[l.jsx("div",{className:"font-bold text-purple-400",children:"Graphics Debug Menu"}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Preview all creatures and hat graphics in a gallery view"})]}),t&&l.jsxs("button",{onClick:t,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[l.jsx("div",{className:"font-bold text-green-400",children:"Hat Debug Mode"}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test face tracking with debug overlay showing detected face rectangle"})]})]})]})]})]})}function Vy({onProfileSelected:e}){const[t,n]=j.useState([]),[r,o]=j.useState(!0),[a,u]=j.useState(!1),[f,p]=j.useState(""),[y,S]=j.useState(null);j.useEffect(()=>{C()},[]);async function C(){o(!0);try{await _y();const M=await gc(),ee=await Promise.all(M.map(async k=>{try{const v=await wo(k.id);return{...k,progress:v}}catch{return k}}));n(ee)}catch(M){console.error("Failed to load profiles:",M)}o(!1)}async function N(){if(f.trim())try{const M=await Kp(f);p(""),u(!1),await C(),K(M)}catch(M){console.error("Failed to create profile:",M)}}function K(M){mc(M.id),e(M)}async function G(M){try{await Ny(M),S(null),await C()}catch(ee){console.error("Failed to delete profile:",ee)}}return r?l.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 flex items-center justify-center",children:l.jsx("div",{className:"text-white text-xl",children:"Loading profiles..."})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 p-6",children:l.jsxs("div",{className:"max-w-md mx-auto",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sparkle Brush"}),l.jsx("p",{className:"text-purple-200",children:"Who's brushing today?"})]}),l.jsx("div",{className:"space-y-4 mb-8",children:t.map(M=>l.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:y===M.id?l.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[l.jsxs("p",{className:"text-white text-center",children:["Delete ",M.name,"'s profile?"]}),l.jsx("p",{className:"text-red-300 text-sm text-center",children:"This will delete all their creatures and progress!"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>G(M.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold",children:"Delete"}),l.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-bold",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>K(M),className:"flex-1 flex items-center gap-4",children:[l.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg",style:{backgroundColor:M.avatarColor},children:M.name.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1 text-left",children:[l.jsx("div",{className:"text-white font-bold text-lg",children:M.name}),M.progress&&l.jsxs("div",{className:"text-purple-200 text-sm flex gap-3",children:[l.jsxs("span",{children:[" ",M.progress.currentStreak," streak"]}),l.jsxs("span",{children:[" ",M.progress.capturedCreatures.length," creatures"]})]})]})]}),l.jsx("button",{onClick:ee=>{ee.stopPropagation(),S(M.id)},className:"p-2 text-red-400 hover:text-red-300 transition-colors","aria-label":"Delete profile",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},M.id))}),a?l.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-purple-200 text-sm mb-2",children:"Profile Name"}),l.jsx("input",{type:"text",value:f,onChange:M=>p(M.target.value),placeholder:"Enter name...",className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0,maxLength:20,onKeyDown:M=>{M.key==="Enter"&&N(),M.key==="Escape"&&u(!1)}})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:N,disabled:!f.trim(),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Profile"}),l.jsx("button",{onClick:()=>{u(!1),p("")},className:"px-4 py-3 bg-gray-500/50 text-white rounded-xl font-bold",children:"Cancel"})]})]}):l.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-lg shadow-lg flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:"+"}),l.jsx("span",{children:"Add New Profile"})]}),t.length===0&&!a&&l.jsxs("div",{className:"text-center mt-8 text-purple-200",children:[l.jsx("p",{children:"No profiles yet!"}),l.jsx("p",{className:"text-sm mt-1",children:"Create a profile to start brushing"})]})]})})}const yf=[{id:"cowboy",name:"Cowboy Hat",imageUrl:"",unlockCondition:"starter"},{id:"crown",name:"Royal Crown",imageUrl:"",unlockCondition:"streak",unlockThreshold:7},{id:"tophat",name:"Top Hat",imageUrl:"",unlockCondition:"sessions",unlockThreshold:10},{id:"wizard",name:"Wizard Hat",imageUrl:"",unlockCondition:"creature"},{id:"cap",name:"Baseball Cap",imageUrl:"",unlockCondition:"starter"}];function Uy({onBack:e}){const{isReady:t,error:n,registerVideoElement:r,startCamera:o}=gs(),{facePosition:a,isLoading:u,startTracking:f,stopTracking:p}=Ip(),{motionResults:y,startDetection:S,stopDetection:C,setFaceRegion:N,setDebugMode:K,getDebugInfo:G}=Mp({targetCleaningTime:25}),M=j.useRef(null),ee=j.useRef(null),[k,v]=j.useState(yf[0]),[b,L]=j.useState({width:0,height:0}),[I,H]=j.useState({width:640,height:480}),[$,O]=j.useState(!0),[Q,B]=j.useState(!1);j.useEffect(()=>{o()},[o]),j.useEffect(()=>{N(a?{x:a.x,y:a.y,width:a.width,height:a.height}:null)},[a,N]);const R=j.useCallback(()=>{B(ue=>{const he=!ue;return K(he),he})},[K]),ie=j.useCallback(ue=>{M.current=ue,ue&&r(ue)},[r]);j.useEffect(()=>{const ue=M.current;if(!ue||!t)return;const he=()=>{ue.readyState>=2&&ue.videoWidth>0&&(H({width:ue.videoWidth,height:ue.videoHeight}),f(ue),S(ue))},q=setInterval(he,100);return he(),()=>{clearInterval(q),p(),C()}},[t,f,p,S,C]),j.useEffect(()=>{const ue=ee.current;if(!ue)return;const he=()=>{L({width:ue.clientWidth,height:ue.clientHeight})};he();const q=new ResizeObserver(he);return q.observe(ue),()=>q.disconnect()},[]);const Z=b.width/I.width,ce=b.height/I.height,de=a?{x:(b.width-a.width*Z)/2,y:a.y*ce,width:a.width*Z,height:a.height*ce}:null;return l.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-indigo-900 to-purple-800 p-4",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg text-white",children:" Back"}),l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Hat Debug Mode"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:R,className:`px-4 py-2 rounded-lg text-white ${Q?"bg-yellow-600":"bg-gray-600"}`,children:" Brush"}),l.jsx("button",{onClick:()=>O(!$),className:`px-4 py-2 rounded-lg text-white ${$?"bg-green-600":"bg-gray-600"}`,children:$?"Hat ON":"Hat OFF"})]})]}),l.jsxs("div",{ref:ee,className:"relative w-full aspect-[4/3] bg-black rounded-2xl overflow-hidden mb-4",children:[l.jsx("video",{ref:ie,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!t&&!n&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/70",children:l.jsx("div",{className:"text-purple-200 text-center p-4 animate-pulse",children:"Connecting to camera..."})}),n&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/70",children:l.jsx("div",{className:"text-red-200 text-center p-4",children:n})}),u&&l.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500/80 px-3 py-1 rounded text-sm",children:"Loading face detection..."}),$&&de&&l.jsx("div",{className:"absolute border-2 border-green-400 pointer-events-none",style:{left:`${de.x}px`,top:`${de.y}px`,width:`${de.width}px`,height:`${de.height}px`},children:l.jsxs("div",{className:"absolute -top-6 left-0 bg-green-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:["Face: ",a==null?void 0:a.x.toFixed(0),", ",a==null?void 0:a.y.toFixed(0)," | ",a==null?void 0:a.width.toFixed(0),"x",a==null?void 0:a.height.toFixed(0)]})}),$&&a&&l.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full border-2 border-white pointer-events-none",style:{left:`${b.width/2}px`,top:`${a.y*ce}px`,transform:"translate(-50%, -50%)"}}),k&&t&&b.width>0&&l.jsx(Vp,{hat:k,facePosition:a||null,containerWidth:b.width,containerHeight:b.height,videoWidth:I.width,videoHeight:I.height}),Q&&b.width>0&&l.jsx(Up,{getDebugInfo:G,containerWidth:b.width,containerHeight:b.height,videoWidth:I.width,videoHeight:I.height}),Q&&l.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:l.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${y.some(ue=>ue.hasMotion)?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:y.some(ue=>ue.hasMotion)?" BRUSHING DETECTED":" No brushing motion"})})]}),l.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[l.jsx("h2",{className:"text-white font-semibold mb-3",children:"Select Hat"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:yf.map(ue=>l.jsx("button",{onClick:()=>v(ue),className:`px-4 py-2 rounded-lg transition-all ${k.id===ue.id?"bg-yellow-500 text-black font-bold":"bg-purple-600 text-white hover:bg-purple-500"}`,children:ue.name},ue.id))})]}),$&&l.jsxs("div",{className:"bg-gray-900/80 rounded-xl p-4 font-mono text-sm text-green-400",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400 mb-1",children:"Video Size:"}),l.jsxs("div",{children:[I.width," x ",I.height]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400 mb-1",children:"Container Size:"}),l.jsxs("div",{children:[b.width.toFixed(0)," x ",b.height.toFixed(0)]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400 mb-1",children:"Face Position (video coords):"}),l.jsx("div",{children:a?`x: ${a.x.toFixed(1)}, y: ${a.y.toFixed(1)}`:"Not detected"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400 mb-1",children:"Face Size:"}),l.jsx("div",{children:a?`${a.width.toFixed(1)} x ${a.height.toFixed(1)}`:"-"})]})]}),Q&&l.jsx(l.Fragment,{children:l.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4",children:[l.jsx("div",{className:"text-gray-400 mb-2",children:"Motion Detection Zones:"}),l.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs",children:y.map(ue=>l.jsxs("div",{className:`px-2 py-1 rounded ${ue.hasMotion?"bg-green-600":"bg-gray-700"}`,children:[ue.zoneId,": ",ue.motionLevel.toFixed(0),"%"]},ue.zoneId))})]})}),l.jsxs("div",{className:"mt-4 text-gray-500 text-xs",children:["Green rectangle = detected face area | Red dot = hat anchor point",Q&&" | Green dashed = brushing region | Red shaded = face core (ignored)"]})]})]})})}const vf=["grassland","coastal","lava","city","sky"];function pa(e){const t=e.monsterType.toLowerCase(),n=e.id.toLowerCase();return t.includes("slime")||t.includes("blob")||t.includes("jelly")||t.includes("ghost")?"slime":t.includes("cat")||t.includes("fox")||t.includes("raccoon")||t.includes("tanuki")||t.includes("spirit")||t.includes("kappa")||t.includes("owl")||n.includes("yokai")||n.includes("spirit")?"yokai":t.includes("dragon")||t.includes("drake")||t.includes("mecha")||t.includes("robo")||t.includes("cyber")||t.includes("dino")||n.includes("gear")||n.includes("mecha")||n.includes("cyber")||n.includes("robo")||n.includes("volt")||n.includes("data")?"digimon":"pokemon"}const Oi={pokemon:{label:"Pokemon",icon:"",color:"bg-yellow-500",description:"Clean, elemental, iconic"},digimon:{label:"Digimon",icon:"",color:"bg-blue-600",description:"Digital, robotic, tech"},yokai:{label:"Yokai",icon:"",color:"bg-purple-600",description:"Spiritual, mystical, Japanese"},slime:{label:"Slime",icon:"",color:"bg-lime-500",description:"Bouncy, happy, DQ style"}},Br={grassland:{bg:"bg-green-600",text:"text-green-100",border:"border-green-400"},coastal:{bg:"bg-blue-600",text:"text-blue-100",border:"border-blue-400"},lava:{bg:"bg-orange-600",text:"text-orange-100",border:"border-orange-400"},city:{bg:"bg-purple-600",text:"text-purple-100",border:"border-purple-400"},sky:{bg:"bg-cyan-600",text:"text-cyan-100",border:"border-cyan-400"},all:{bg:"bg-gradient-to-r from-orange-500 to-red-500",text:"text-white",border:"border-orange-400"}},zr={common:{bg:"bg-gray-700",text:"text-gray-200",glow:""},rare:{bg:"bg-blue-800",text:"text-blue-200",glow:"shadow-blue-500/50 shadow-lg"},legendary:{bg:"bg-gradient-to-br from-amber-800 via-amber-700 to-orange-900",text:"text-amber-100",glow:"shadow-amber-400/70 shadow-2xl ring-2 ring-amber-500/50"},mythic:{bg:"bg-gradient-to-br from-orange-600 via-red-600 to-orange-700",text:"text-orange-100",glow:"shadow-orange-400/80 shadow-2xl ring-4 ring-orange-500/60 animate-pulse"}},Wy=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],Ky=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function Hy({onBack:e}){const[t,n]=j.useState("creatures"),[r,o]=j.useState("all"),[a,u]=j.useState("all"),[f,p]=j.useState("all"),[y,S]=j.useState(!0),[C,N]=j.useState(!1),[K,G]=j.useState(50),[M,ee]=j.useState(null),[k,v]=j.useState(120),[b,L]=j.useState(100),[I,H]=j.useState(!0),$=mt.filter(R=>!(r!=="all"&&R.region!==r||a!=="all"&&R.rarity!==a||f!=="all"&&pa(R)!==f)),O=["pokemon","digimon","yokai","slime"],Q=O.reduce((R,ie)=>(R[ie]=mt.filter(Z=>pa(Z)===ie).length,R),{}),B={byRegion:vf.reduce((R,ie)=>({...R,[ie]:mt.filter(Z=>Z.region===ie).length}),{}),byRarity:{common:mt.filter(R=>R.rarity==="common").length,rare:mt.filter(R=>R.rarity==="rare").length,legendary:mt.filter(R=>R.rarity==="legendary").length,mythic:mt.filter(R=>R.rarity==="mythic").length}};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900",children:[l.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur border-b border-slate-700",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white flex items-center gap-2",children:" Back"}),l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Graphics Debug Menu"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>n("creatures"),className:`px-4 py-2 rounded-lg transition-all ${t==="creatures"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Creatures (",mt.length,")"]}),l.jsxs("button",{onClick:()=>n("hats"),className:`px-4 py-2 rounded-lg transition-all ${t==="hats"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Hats (",ii.length,")"]})]})]})})}),t==="creatures"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Region:"}),l.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 rounded text-sm ${r==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),vf.map(R=>l.jsxs("button",{onClick:()=>o(R),className:`px-3 py-1 rounded text-sm capitalize ${r===R?`${Br[R].bg} ${Br[R].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[R," (",B.byRegion[R],")"]},R))]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Rarity:"}),l.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1 rounded text-sm ${a==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),["common","rare","legendary","mythic"].map(R=>l.jsxs("button",{onClick:()=>u(R),className:`px-3 py-1 rounded text-sm capitalize ${a===R?`${zr[R].bg} ${zr[R].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[R," (",B.byRarity[R],")"]},R))]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Style:"}),l.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded text-sm ${f==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),O.map(R=>l.jsxs("button",{onClick:()=>p(R),className:`px-3 py-1 rounded text-sm flex items-center gap-1 ${f===R?`${Oi[R].color} text-white font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[l.jsx("span",{children:Oi[R].icon}),Oi[R].label," (",Q[R],")"]},R))]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:R=>S(R.target.checked),className:"w-4 h-4"}),"Animated"]}),l.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[l.jsx("input",{type:"checkbox",checked:I,onChange:R=>H(R.target.checked),className:"w-4 h-4"}),"Show Style"]}),l.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:R=>N(R.target.checked),className:"w-4 h-4"}),"Show Gunk"]}),C&&l.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Gunk Level:",l.jsx("input",{type:"range",min:"0",max:"100",value:K,onChange:R=>G(Number(R.target.value)),className:"w-24"}),l.jsxs("span",{className:"w-8",children:[K,"%"]})]}),l.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",l.jsx("input",{type:"range",min:"60",max:"200",value:k,onChange:R=>v(Number(R.target.value)),className:"w-24"}),l.jsxs("span",{className:"w-10",children:[k,"px"]})]})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[l.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing ",$.length," of ",mt.length," creatures"]}),l.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${k+40}px, 1fr))`},children:$.map(R=>l.jsxs("div",{onClick:()=>ee((M==null?void 0:M.id)===R.id?null:R),className:`relative flex flex-col items-center p-3 rounded-xl cursor-pointer transition-all ${zr[R.rarity].bg} ${zr[R.rarity].glow} ${(M==null?void 0:M.id)===R.id?"ring-2 ring-white scale-105":"hover:scale-102"}`,children:[l.jsx("div",{className:`absolute top-1 left-1 px-2 py-0.5 rounded text-xs ${Br[R.region].bg} ${Br[R.region].text}`,children:R.region}),R.rarity==="mythic"&&l.jsx("div",{className:"absolute top-1 right-1 text-orange-300 text-xl animate-pulse",title:"Mythic - Ultimate Boss",children:""}),R.rarity==="legendary"&&l.jsx("div",{className:"absolute top-1 right-1 text-amber-300 text-lg",title:"Legendary Dragon",children:""}),Wy.includes(R.id)&&l.jsxs("div",{className:"absolute bottom-1 right-1 flex gap-0.5",children:[l.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-green-500 text-white font-bold",title:"HD Raster Image",children:"HD"}),Ky.includes(R.id)&&l.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-red-600 text-white font-bold",title:"Has Possessed Variant",children:""})]}),l.jsx(rn,{creature:R,size:k,animated:y,showGunk:C,gunkLevel:K}),l.jsxs("div",{className:"mt-2 text-center",children:[l.jsx("div",{className:"text-white font-medium text-sm truncate max-w-full",children:R.name}),l.jsxs("div",{className:"text-slate-400 text-xs capitalize mb-1",children:[R.rarity,"  ",R.monsterType]}),I&&(()=>{if(R.rarity==="mythic")return l.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:l.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold animate-pulse",children:" MYTHIC ULTIMATE"})});if(R.rarity==="legendary")return l.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:l.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold",children:" LEGENDARY DRAGON"})});const ie=pa(R),Z=Oi[ie];return l.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:l.jsxs("span",{className:`px-2 py-0.5 rounded text-[9px] text-white ${Z.color} font-medium`,children:[Z.icon," ",Z.label]})})})()]})]},R.id))})]}),M&&l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur border-t border-slate-700 p-4",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-6",children:[l.jsx(rn,{creature:M,size:100,animated:y,showGunk:C,gunkLevel:K}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:M.name}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Br[M.region].bg} ${Br[M.region].text}`,children:M.region}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${zr[M.rarity].bg} ${zr[M.rarity].text}`,children:M.rarity})]}),l.jsx("p",{className:"text-slate-400 text-sm mb-2",children:M.description}),(()=>{if(M.rarity==="mythic")return l.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[l.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold flex items-center gap-2 animate-pulse",children:" MYTHIC ULTIMATE BOSS"}),l.jsx("span",{className:"text-orange-400 text-xs",children:"The five-headed dragon of perfect dental hygiene - only appears after catching all other creatures!"})]});if(M.rarity==="legendary")return l.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[l.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold flex items-center gap-2",children:" LEGENDARY DRAGON FORM"}),l.jsx("span",{className:"text-amber-400 text-xs",children:"Unique dragon-style graphics with wings, horns, and magical aura"})]});const R=pa(M),ie=Oi[R];return l.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[l.jsxs("span",{className:`px-3 py-1 rounded text-sm text-white ${ie.color} font-medium flex items-center gap-2`,children:[ie.icon," ",ie.label," Style"]}),l.jsx("span",{className:"text-slate-400 text-xs",children:ie.description})]})})(),l.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[l.jsxs("span",{children:["ID: ",M.id]}),l.jsxs("span",{children:["Type: ",M.monsterType]})]})]}),l.jsx("button",{onClick:()=>ee(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white",children:"Close"})]})})]}),t==="hats"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:l.jsx("div",{className:"flex flex-wrap items-center gap-4",children:l.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",l.jsx("input",{type:"range",min:"60",max:"200",value:b,onChange:R=>L(Number(R.target.value)),className:"w-24"}),l.jsxs("span",{className:"w-10",children:[b,"px"]})]})})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[l.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing all ",ii.length," hats"]}),l.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${b+60}px, 1fr))`},children:ii.map(R=>l.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-gradient-to-b from-purple-800 to-purple-900 hover:from-purple-700 hover:to-purple-800 transition-all",children:[l.jsx("div",{className:"bg-purple-950/50 rounded-lg p-2 mb-2",children:l.jsx(Fp,{hatId:R.id,size:b})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white font-medium text-sm",children:R.name}),l.jsxs("div",{className:"text-purple-300 text-xs capitalize",children:[R.unlockCondition,R.unlockThreshold&&` (${R.unlockThreshold})`]}),l.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["ID: ",R.id]})]})]},R.id))})]})]})]})}function qy(){const[e,t]=j.useState("profile-select"),[n,r]=j.useState(null),[o,a]=j.useState(null),[u,f]=j.useState(null),[p,y]=j.useState(null),[S,C]=j.useState(null),[N,K]=j.useState(null);j.useEffect(()=>{G()},[]);async function G(){const de=mi();if(de){const ue=await Cy(de);if(ue){r(ue),await k(),t("home");return}}t("profile-select")}async function M(de){r(de),await k(),t("home")}function ee(){t("profile-select"),a(null),r(null)}async function k(){try{const de=await wo();a(de)}catch(de){console.error("Failed to load user progress:",de),t("profile-select")}}function v(){t("camera-check")}function b(){t("hat-select")}function L(de){f(de),t("brushing")}async function I(de){y(de),t("results");const ue={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:new Date,duration:$p(),cleaningPercentage:de.cleaningPercentage,zoneProgress:de.zoneProgress,photos:de.photos};try{await Ey(ue),await k()}catch(he){console.error("Failed to save session:",he)}}function H(){t("capture")}function $(de){C(de),t("photos")}function O(de){K(de),t("editor")}function Q(){K(null),t("home"),k()}function B(){t("home"),y(null),C(null),K(null),k()}function R(){t("collection")}function ie(){t("settings")}function Z(){t("hat-debug")}function ce(){t("graphics-debug")}return e==="profile-select"?l.jsx("div",{className:"h-full w-full overflow-hidden",children:l.jsx(Vy,{onProfileSelected:M})}):!o||!n?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("div",{className:"text-2xl animate-pulse",children:"Loading..."})}):l.jsxs("div",{className:"h-full w-full overflow-hidden",children:[e==="home"&&l.jsx(Hg,{userProgress:o,currentProfile:n,onStartBrushing:v,onViewCollection:R,onViewSettings:ie,onSwitchProfile:ee}),e==="settings"&&l.jsx($y,{onBack:B,onHatDebug:Z,onGraphicsDebug:ce}),e==="camera-check"&&l.jsx(Gg,{onConfirm:b,onCancel:B}),e==="hat-select"&&l.jsx(Qg,{userProgress:o,onSelect:L,onBack:B}),e==="brushing"&&l.jsx(wy,{selectedHat:u,capturedCreatureIds:o.capturedCreatures.map(de=>de.id),onComplete:I,onCancel:B}),e==="results"&&p&&l.jsx(by,{cleaningPercentage:p.cleaningPercentage,zoneProgress:p.zoneProgress,onContinue:H}),e==="capture"&&p&&l.jsx(Ay,{cleaningPercentage:p.cleaningPercentage,userProgress:o,region:p.region,preSelectedCreature:p.creature,onComplete:$}),e==="photos"&&p&&l.jsx(Ry,{photos:p.photos,capturedCreature:S,onSelectPhoto:O,onSkip:B}),e==="editor"&&N&&l.jsx(By,{photo:N,capturedCreatures:S&&!o.capturedCreatures.some(de=>de.id===S.id)?[{...S,capturedAt:new Date},...o.capturedCreatures]:o.capturedCreatures,onDone:Q,onBack:()=>t("photos")}),e==="collection"&&l.jsx(zy,{userProgress:o,onBack:B}),e==="hat-debug"&&l.jsx(Uy,{onBack:B}),e==="graphics-debug"&&l.jsx(Hy,{onBack:B})]})}Ap(document.getElementById("root")).render(l.jsx(j.StrictMode,{children:l.jsx(qg,{children:l.jsx(qy,{})})}));export{Yy as a,Xc as c,xm as g};
