const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-FC6HHMNL.js","assets/graph_model-DnmzDz13.js","assets/face-landmarks-detection.esm-DJkdRMTC.js"])))=>i.map(i=>d[i]);
var vm=Object.defineProperty;var xm=(e,t,n)=>t in e?vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var St=(e,t,n)=>xm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var xf={exports:{}},es={},wf={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=Symbol.for("react.element"),bm=Symbol.for("react.portal"),km=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Em=Symbol.for("react.context"),Nm=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),_m=Symbol.for("react.memo"),Am=Symbol.for("react.lazy"),Xc=Symbol.iterator;function Fm(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var bf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kf=Object.assign,Cf={};function mi(e,t,n){this.props=e,this.context=t,this.refs=Cf,this.updater=n||bf}mi.prototype.isReactComponent={};mi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jf(){}jf.prototype=mi.prototype;function wu(e,t,n){this.props=e,this.context=t,this.refs=Cf,this.updater=n||bf}var bu=wu.prototype=new jf;bu.constructor=wu;kf(bu,mi.prototype);bu.isPureReactComponent=!0;var Zc=Array.isArray,Sf=Object.prototype.hasOwnProperty,ku={current:null},Ef={key:!0,ref:!0,__self:!0,__source:!0};function Nf(e,t,n){var r,o={},s=null,c=null;if(t!=null)for(r in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(s=""+t.key),t)Sf.call(t,r)&&!Ef.hasOwnProperty(r)&&(o[r]=t[r]);var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){for(var m=Array(p),y=0;y<p;y++)m[y]=arguments[y+2];o.children=m}if(e&&e.defaultProps)for(r in p=e.defaultProps,p)o[r]===void 0&&(o[r]=p[r]);return{$$typeof:ma,type:e,key:s,ref:c,props:o,_owner:ku.current}}function Dm(e,t){return{$$typeof:ma,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ma}function Pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jc=/\/+/g;function Qs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pm(""+e.key):t.toString(36)}function mo(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case ma:case bm:c=!0}}if(c)return c=e,o=o(c),e=r===""?"."+Qs(c,0):r,Zc(o)?(n="",e!=null&&(n=e.replace(Jc,"$&/")+"/"),mo(o,t,n,"",function(y){return y})):o!=null&&(Cu(o)&&(o=Dm(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(Jc,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=r===""?".":r+":",Zc(e))for(var p=0;p<e.length;p++){s=e[p];var m=r+Qs(s,p);c+=mo(s,t,n,m,o)}else if(m=Fm(e),typeof m=="function")for(e=m.call(e),p=0;!(s=e.next()).done;)s=s.value,m=r+Qs(s,p++),c+=mo(s,t,n,m,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function Ka(e,t,n){if(e==null)return e;var r=[],o=0;return mo(e,r,"","",function(s){return t.call(n,s,o++)}),r}function Rm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tt={current:null},go={transition:null},Mm={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:go,ReactCurrentOwner:ku};function Tf(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Ka,forEach:function(e,t,n){Ka(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ka(e,function(){t++}),t},toArray:function(e){return Ka(e,function(t){return t})||[]},only:function(e){if(!Cu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=mi;_e.Fragment=km;_e.Profiler=jm;_e.PureComponent=wu;_e.StrictMode=Cm;_e.Suspense=Tm;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm;_e.act=Tf;_e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kf({},e.props),o=e.key,s=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,c=ku.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(m in t)Sf.call(t,m)&&!Ef.hasOwnProperty(m)&&(r[m]=t[m]===void 0&&p!==void 0?p[m]:t[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){p=Array(m);for(var y=0;y<m;y++)p[y]=arguments[y+2];r.children=p}return{$$typeof:ma,type:e.type,key:o,ref:s,props:r,_owner:c}};_e.createContext=function(e){return e={$$typeof:Em,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sm,_context:e},e.Consumer=e};_e.createElement=Nf;_e.createFactory=function(e){var t=Nf.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:Nm,render:e}};_e.isValidElement=Cu;_e.lazy=function(e){return{$$typeof:Am,_payload:{_status:-1,_result:e},_init:Rm}};_e.memo=function(e,t){return{$$typeof:_m,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=go.transition;go.transition={};try{e()}finally{go.transition=t}};_e.unstable_act=Tf;_e.useCallback=function(e,t){return Tt.current.useCallback(e,t)};_e.useContext=function(e){return Tt.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return Tt.current.useDeferredValue(e)};_e.useEffect=function(e,t){return Tt.current.useEffect(e,t)};_e.useId=function(){return Tt.current.useId()};_e.useImperativeHandle=function(e,t,n){return Tt.current.useImperativeHandle(e,t,n)};_e.useInsertionEffect=function(e,t){return Tt.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return Tt.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return Tt.current.useMemo(e,t)};_e.useReducer=function(e,t,n){return Tt.current.useReducer(e,t,n)};_e.useRef=function(e){return Tt.current.useRef(e)};_e.useState=function(e){return Tt.current.useState(e)};_e.useSyncExternalStore=function(e,t,n){return Tt.current.useSyncExternalStore(e,t,n)};_e.useTransition=function(){return Tt.current.useTransition()};_e.version="18.3.1";wf.exports=_e;var k=wf.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=k,Im=Symbol.for("react.element"),Om=Symbol.for("react.fragment"),zm=Object.prototype.hasOwnProperty,Lm=Bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$m={key:!0,ref:!0,__self:!0,__source:!0};function _f(e,t,n){var r,o={},s=null,c=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)zm.call(t,r)&&!$m.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Im,type:e,key:s,ref:c,props:o,_owner:Lm.current}}es.Fragment=Om;es.jsx=_f;es.jsxs=_f;xf.exports=es;var u=xf.exports,Af={exports:{}},Gt={},Ff={exports:{}},Df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,X){var oe=H.length;H.push(X);e:for(;0<oe;){var we=oe-1>>>1,Ce=H[we];if(0<o(Ce,X))H[we]=X,H[oe]=Ce,oe=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],oe=H.pop();if(oe!==X){H[0]=oe;e:for(var we=0,Ce=H.length,ze=Ce>>>1;we<ze;){var Ae=2*(we+1)-1,Re=H[Ae],Le=Ae+1,Ue=H[Le];if(0>o(Re,oe))Le<Ce&&0>o(Ue,Re)?(H[we]=Ue,H[Le]=oe,we=Le):(H[we]=Re,H[Ae]=oe,we=Ae);else if(Le<Ce&&0>o(Ue,oe))H[we]=Ue,H[Le]=oe,we=Le;else break e}}return X}function o(H,X){var oe=H.sortIndex-X.sortIndex;return oe!==0?oe:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,p=c.now();e.unstable_now=function(){return c.now()-p}}var m=[],y=[],j=1,S=null,E=3,G=!1,Y=!1,M=!1,ee=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var X=n(y);X!==null;){if(X.callback===null)r(y);else if(X.startTime<=H)r(y),X.sortIndex=X.expirationTime,t(m,X);else break;X=n(y)}}function I(H){if(M=!1,b(H),!Y)if(n(m)!==null)Y=!0,Z(K);else{var X=n(y);X!==null&&de(I,X.startTime-H)}}function K(H,X){Y=!1,M&&(M=!1,C(V),V=-1),G=!0;var oe=E;try{for(b(X),S=n(m);S!==null&&(!(S.expirationTime>X)||H&&!D());){var we=S.callback;if(typeof we=="function"){S.callback=null,E=S.priorityLevel;var Ce=we(S.expirationTime<=X);X=e.unstable_now(),typeof Ce=="function"?S.callback=Ce:S===n(m)&&r(m),b(X)}else r(m);S=n(m)}if(S!==null)var ze=!0;else{var Ae=n(y);Ae!==null&&de(I,Ae.startTime-X),ze=!1}return ze}finally{S=null,E=oe,G=!1}}var L=!1,B=null,V=-1,q=5,$=-1;function D(){return!(e.unstable_now()-$<q)}function J(){if(B!==null){var H=e.unstable_now();$=H;var X=!0;try{X=B(!0,H)}finally{X?ne():(L=!1,B=null)}}else L=!1}var ne;if(typeof v=="function")ne=function(){v(J)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,xe=pe.port2;pe.port1.onmessage=J,ne=function(){xe.postMessage(null)}}else ne=function(){ee(J,0)};function Z(H){B=H,L||(L=!0,ne())}function de(H,X){V=ee(function(){H(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){Y||G||(Y=!0,Z(K))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(H){switch(E){case 1:case 2:case 3:var X=3;break;default:X=E}var oe=E;E=X;try{return H()}finally{E=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var oe=E;E=H;try{return X()}finally{E=oe}},e.unstable_scheduleCallback=function(H,X,oe){var we=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?we+oe:we):oe=we,H){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=oe+Ce,H={id:j++,callback:X,priorityLevel:H,startTime:oe,expirationTime:Ce,sortIndex:-1},oe>we?(H.sortIndex=oe,t(y,H),n(m)===null&&H===n(y)&&(M?(C(V),V=-1):M=!0,de(I,oe-we))):(H.sortIndex=Ce,t(m,H),Y||G||(Y=!0,Z(K))),H},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(H){var X=E;return function(){var oe=E;E=X;try{return H.apply(this,arguments)}finally{E=oe}}}})(Df);Ff.exports=Df;var Wm=Ff.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm=k,Wt=Wm;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pf=new Set,Zi={};function Tr(e,t){li(e,t),li(e+"Capture",t)}function li(e,t){for(Zi[e]=t,e=0;e<t.length;e++)Pf.add(t[e])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),El=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ed={},td={};function Um(e){return El.call(td,e)?!0:El.call(ed,e)?!1:Vm.test(e)?td[e]=!0:(ed[e]=!0,!1)}function Km(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qm(e,t,n,r){if(t===null||typeof t>"u"||Km(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _t(e,t,n,r,o,s,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=c}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new _t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new _t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new _t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new _t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new _t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new _t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new _t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new _t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new _t(e,5,!1,e.toLowerCase(),null,!1,!1)});var ju=/[\-:]([a-z])/g;function Su(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ju,Su);yt[t]=new _t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ju,Su);yt[t]=new _t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ju,Su);yt[t]=new _t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new _t(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new _t(e,1,!1,e.toLowerCase(),null,!0,!0)});function Eu(e,t,n,r){var o=yt.hasOwnProperty(t)?yt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qm(t,n,o,r)&&(n=null),r||o===null?Um(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Pn=Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qa=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),Nu=Symbol.for("react.strict_mode"),Nl=Symbol.for("react.profiler"),Rf=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),Tu=Symbol.for("react.forward_ref"),Tl=Symbol.for("react.suspense"),_l=Symbol.for("react.suspense_list"),_u=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Bf=Symbol.for("react.offscreen"),nd=Symbol.iterator;function _i(e){return e===null||typeof e!="object"?null:(e=nd&&e[nd]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Xs;function zi(e){if(Xs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xs=t&&t[1]||""}return`
`+Xs+e}var Zs=!1;function Js(e,t){if(!e||Zs)return"";Zs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),s=r.stack.split(`
`),c=o.length-1,p=s.length-1;1<=c&&0<=p&&o[c]!==s[p];)p--;for(;1<=c&&0<=p;c--,p--)if(o[c]!==s[p]){if(c!==1||p!==1)do if(c--,p--,0>p||o[c]!==s[p]){var m=`
`+o[c].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=c&&0<=p);break}}}finally{Zs=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zi(e):""}function Hm(e){switch(e.tag){case 5:return zi(e.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return e=Js(e.type,!1),e;case 11:return e=Js(e.type.render,!1),e;case 1:return e=Js(e.type,!0),e;default:return""}}function Al(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vr:return"Fragment";case Gr:return"Portal";case Nl:return"Profiler";case Nu:return"StrictMode";case Tl:return"Suspense";case _l:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mf:return(e.displayName||"Context")+".Consumer";case Rf:return(e._context.displayName||"Context")+".Provider";case Tu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _u:return t=e.displayName||null,t!==null?t:Al(e.type)||"Memo";case Wn:t=e._payload,e=e._init;try{return Al(e(t))}catch{}}return null}function Ym(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Al(t);case 8:return t===Nu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function If(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qm(e){var t=If(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){r=""+c,s.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ha(e){e._valueTracker||(e._valueTracker=Qm(e))}function Of(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=If(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _o(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fl(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=nr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zf(e,t){t=t.checked,t!=null&&Eu(e,"checked",t,!1)}function Dl(e,t){zf(e,t);var n=nr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pl(e,t.type,nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function id(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pl(e,t,n){(t!=="number"||_o(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Li=Array.isArray;function ti(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Rl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ad(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(Li(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nr(n)}}function Lf(e,t){var n=nr(t.value),r=nr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function od(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $f(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ml(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$f(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ya,Wf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ya=Ya||document.createElement("div"),Ya.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ya.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ji(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xm=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(e){Xm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gi[t]=Gi[e]})});function Gf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Gi.hasOwnProperty(e)&&Gi[e]?(""+t).trim():t+"px"}function Vf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Gf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Zm=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(e,t){if(t){if(Zm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Il(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ol=null;function Au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zl=null,ni=null,ri=null;function sd(e){if(e=va(e)){if(typeof zl!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=as(t),zl(e.stateNode,e.type,t))}}function Uf(e){ni?ri?ri.push(e):ri=[e]:ni=e}function Kf(){if(ni){var e=ni,t=ri;if(ri=ni=null,sd(e),t)for(e=0;e<t.length;e++)sd(t[e])}}function qf(e,t){return e(t)}function Hf(){}var el=!1;function Yf(e,t,n){if(el)return e(t,n);el=!0;try{return qf(e,t,n)}finally{el=!1,(ni!==null||ri!==null)&&(Hf(),Kf())}}function ea(e,t){var n=e.stateNode;if(n===null)return null;var r=as(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var Ll=!1;if(_n)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{Ll=!1}function Jm(e,t,n,r,o,s,c,p,m){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(j){this.onError(j)}}var Vi=!1,Ao=null,Fo=!1,$l=null,e0={onError:function(e){Vi=!0,Ao=e}};function t0(e,t,n,r,o,s,c,p,m){Vi=!1,Ao=null,Jm.apply(e0,arguments)}function n0(e,t,n,r,o,s,c,p,m){if(t0.apply(this,arguments),Vi){if(Vi){var y=Ao;Vi=!1,Ao=null}else throw Error(ae(198));Fo||(Fo=!0,$l=y)}}function _r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Qf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ld(e){if(_r(e)!==e)throw Error(ae(188))}function r0(e){var t=e.alternate;if(!t){if(t=_r(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return ld(o),e;if(s===r)return ld(o),t;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=o,r=s;else{for(var c=!1,p=o.child;p;){if(p===n){c=!0,n=o,r=s;break}if(p===r){c=!0,r=o,n=s;break}p=p.sibling}if(!c){for(p=s.child;p;){if(p===n){c=!0,n=s,r=o;break}if(p===r){c=!0,r=s,n=o;break}p=p.sibling}if(!c)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function Xf(e){return e=r0(e),e!==null?Zf(e):null}function Zf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zf(e);if(t!==null)return t;e=e.sibling}return null}var Jf=Wt.unstable_scheduleCallback,ud=Wt.unstable_cancelCallback,i0=Wt.unstable_shouldYield,a0=Wt.unstable_requestPaint,rt=Wt.unstable_now,o0=Wt.unstable_getCurrentPriorityLevel,Fu=Wt.unstable_ImmediatePriority,ep=Wt.unstable_UserBlockingPriority,Do=Wt.unstable_NormalPriority,s0=Wt.unstable_LowPriority,tp=Wt.unstable_IdlePriority,ts=null,wn=null;function l0(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(ts,e,void 0,(e.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:d0,u0=Math.log,c0=Math.LN2;function d0(e){return e>>>=0,e===0?32:31-(u0(e)/c0|0)|0}var Qa=64,Xa=4194304;function $i(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Po(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,c=n&268435455;if(c!==0){var p=c&~o;p!==0?r=$i(p):(s&=c,s!==0&&(r=$i(s)))}else c=n&~o,c!==0?r=$i(c):s!==0&&(r=$i(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-cn(t),o=1<<n,r|=e[n],t&=~o;return r}function f0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-cn(s),p=1<<c,m=o[c];m===-1?(!(p&n)||p&r)&&(o[c]=f0(p,t)):m<=t&&(e.expiredLanes|=p),s&=~p}}function Wl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function np(){var e=Qa;return Qa<<=1,!(Qa&4194240)&&(Qa=64),e}function tl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ga(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cn(t),e[t]=n}function h0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-cn(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Du(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-cn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Oe=0;function rp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ip,Pu,ap,op,sp,Gl=!1,Za=[],Hn=null,Yn=null,Qn=null,ta=new Map,na=new Map,Vn=[],m0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cd(e,t){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(t.pointerId)}}function Fi(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=va(t),t!==null&&Pu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function g0(e,t,n,r,o){switch(t){case"focusin":return Hn=Fi(Hn,e,t,n,r,o),!0;case"dragenter":return Yn=Fi(Yn,e,t,n,r,o),!0;case"mouseover":return Qn=Fi(Qn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return ta.set(s,Fi(ta.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,na.set(s,Fi(na.get(s)||null,e,t,n,r,o)),!0}return!1}function lp(e){var t=vr(e.target);if(t!==null){var n=_r(t);if(n!==null){if(t=n.tag,t===13){if(t=Qf(n),t!==null){e.blockedOn=t,sp(e.priority,function(){ap(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ol=r,n.target.dispatchEvent(r),Ol=null}else return t=va(n),t!==null&&Pu(t),e.blockedOn=n,!1;t.shift()}return!0}function dd(e,t,n){yo(e)&&n.delete(t)}function y0(){Gl=!1,Hn!==null&&yo(Hn)&&(Hn=null),Yn!==null&&yo(Yn)&&(Yn=null),Qn!==null&&yo(Qn)&&(Qn=null),ta.forEach(dd),na.forEach(dd)}function Di(e,t){e.blockedOn===t&&(e.blockedOn=null,Gl||(Gl=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,y0)))}function ra(e){function t(o){return Di(o,e)}if(0<Za.length){Di(Za[0],e);for(var n=1;n<Za.length;n++){var r=Za[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hn!==null&&Di(Hn,e),Yn!==null&&Di(Yn,e),Qn!==null&&Di(Qn,e),ta.forEach(t),na.forEach(t),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)lp(n),n.blockedOn===null&&Vn.shift()}var ii=Pn.ReactCurrentBatchConfig,Ro=!0;function v0(e,t,n,r){var o=Oe,s=ii.transition;ii.transition=null;try{Oe=1,Ru(e,t,n,r)}finally{Oe=o,ii.transition=s}}function x0(e,t,n,r){var o=Oe,s=ii.transition;ii.transition=null;try{Oe=4,Ru(e,t,n,r)}finally{Oe=o,ii.transition=s}}function Ru(e,t,n,r){if(Ro){var o=Vl(e,t,n,r);if(o===null)dl(e,t,r,Mo,n),cd(e,r);else if(g0(o,e,t,n,r))r.stopPropagation();else if(cd(e,r),t&4&&-1<m0.indexOf(e)){for(;o!==null;){var s=va(o);if(s!==null&&ip(s),s=Vl(e,t,n,r),s===null&&dl(e,t,r,Mo,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else dl(e,t,r,null,n)}}var Mo=null;function Vl(e,t,n,r){if(Mo=null,e=Au(r),e=vr(e),e!==null)if(t=_r(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Qf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mo=e,null}function up(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Fu:return 1;case ep:return 4;case Do:case s0:return 16;case tp:return 536870912;default:return 16}default:return 16}}var Kn=null,Mu=null,vo=null;function cp(){if(vo)return vo;var e,t=Mu,n=t.length,r,o="value"in Kn?Kn.value:Kn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(r=1;r<=c&&t[n-r]===o[s-r];r++);return vo=o.slice(e,1<r?1-r:void 0)}function xo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ja(){return!0}function fd(){return!1}function Vt(e){function t(n,r,o,s,c){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=c,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(s):s[p]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ja:fd,this.isPropagationStopped=fd,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),t}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=Vt(gi),ya=Xe({},gi,{view:0,detail:0}),w0=Vt(ya),nl,rl,Pi,ns=Xe({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pi&&(Pi&&e.type==="mousemove"?(nl=e.screenX-Pi.screenX,rl=e.screenY-Pi.screenY):rl=nl=0,Pi=e),nl)},movementY:function(e){return"movementY"in e?e.movementY:rl}}),pd=Vt(ns),b0=Xe({},ns,{dataTransfer:0}),k0=Vt(b0),C0=Xe({},ya,{relatedTarget:0}),il=Vt(C0),j0=Xe({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),S0=Vt(j0),E0=Xe({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N0=Vt(E0),T0=Xe({},gi,{data:0}),hd=Vt(T0),_0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F0[e])?!!t[e]:!1}function Iu(){return D0}var P0=Xe({},ya,{key:function(e){if(e.key){var t=_0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(e){return e.type==="keypress"?xo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),R0=Vt(P0),M0=Xe({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=Vt(M0),B0=Xe({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),I0=Vt(B0),O0=Xe({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=Vt(O0),L0=Xe({},ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$0=Vt(L0),W0=[9,13,27,32],Ou=_n&&"CompositionEvent"in window,Ui=null;_n&&"documentMode"in document&&(Ui=document.documentMode);var G0=_n&&"TextEvent"in window&&!Ui,dp=_n&&(!Ou||Ui&&8<Ui&&11>=Ui),gd=" ",yd=!1;function fp(e,t){switch(e){case"keyup":return W0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function V0(e,t){switch(e){case"compositionend":return pp(t);case"keypress":return t.which!==32?null:(yd=!0,gd);case"textInput":return e=t.data,e===gd&&yd?null:e;default:return null}}function U0(e,t){if(Ur)return e==="compositionend"||!Ou&&fp(e,t)?(e=cp(),vo=Mu=Kn=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dp&&t.locale!=="ko"?null:t.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K0[e.type]:t==="textarea"}function hp(e,t,n,r){Uf(r),t=Bo(t,"onChange"),0<t.length&&(n=new Bu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ki=null,ia=null;function q0(e){Sp(e,0)}function rs(e){var t=Hr(e);if(Of(t))return e}function H0(e,t){if(e==="change")return t}var mp=!1;if(_n){var al;if(_n){var ol="oninput"in document;if(!ol){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),ol=typeof xd.oninput=="function"}al=ol}else al=!1;mp=al&&(!document.documentMode||9<document.documentMode)}function wd(){Ki&&(Ki.detachEvent("onpropertychange",gp),ia=Ki=null)}function gp(e){if(e.propertyName==="value"&&rs(ia)){var t=[];hp(t,ia,e,Au(e)),Yf(q0,t)}}function Y0(e,t,n){e==="focusin"?(wd(),Ki=t,ia=n,Ki.attachEvent("onpropertychange",gp)):e==="focusout"&&wd()}function Q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rs(ia)}function X0(e,t){if(e==="click")return rs(t)}function Z0(e,t){if(e==="input"||e==="change")return rs(t)}function J0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fn=typeof Object.is=="function"?Object.is:J0;function aa(e,t){if(fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!El.call(t,o)||!fn(e[o],t[o]))return!1}return!0}function bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kd(e,t){var n=bd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bd(n)}}function yp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vp(){for(var e=window,t=_o();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_o(e.document)}return t}function zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eg(e){var t=vp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yp(n.ownerDocument.documentElement,n)){if(r!==null&&zu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=kd(n,s);var c=kd(n,r);o&&c&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tg=_n&&"documentMode"in document&&11>=document.documentMode,Kr=null,Ul=null,qi=null,Kl=!1;function Cd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kl||Kr==null||Kr!==_o(r)||(r=Kr,"selectionStart"in r&&zu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qi&&aa(qi,r)||(qi=r,r=Bo(Ul,"onSelect"),0<r.length&&(t=new Bu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kr)))}function eo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qr={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionend:eo("Transition","TransitionEnd")},sl={},xp={};_n&&(xp=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function is(e){if(sl[e])return sl[e];if(!qr[e])return e;var t=qr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xp)return sl[e]=t[n];return e}var wp=is("animationend"),bp=is("animationiteration"),kp=is("animationstart"),Cp=is("transitionend"),jp=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){jp.set(e,t),Tr(t,[e])}for(var ll=0;ll<jd.length;ll++){var ul=jd[ll],ng=ul.toLowerCase(),rg=ul[0].toUpperCase()+ul.slice(1);ir(ng,"on"+rg)}ir(wp,"onAnimationEnd");ir(bp,"onAnimationIteration");ir(kp,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(Cp,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ig=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function Sd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,n0(r,t,void 0,e),e.currentTarget=null}function Sp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var c=r.length-1;0<=c;c--){var p=r[c],m=p.instance,y=p.currentTarget;if(p=p.listener,m!==s&&o.isPropagationStopped())break e;Sd(o,p,y),s=m}else for(c=0;c<r.length;c++){if(p=r[c],m=p.instance,y=p.currentTarget,p=p.listener,m!==s&&o.isPropagationStopped())break e;Sd(o,p,y),s=m}}}if(Fo)throw e=$l,Fo=!1,$l=null,e}function Ge(e,t){var n=t[Xl];n===void 0&&(n=t[Xl]=new Set);var r=e+"__bubble";n.has(r)||(Ep(t,e,2,!1),n.add(r))}function cl(e,t,n){var r=0;t&&(r|=4),Ep(n,e,r,t)}var to="_reactListening"+Math.random().toString(36).slice(2);function oa(e){if(!e[to]){e[to]=!0,Pf.forEach(function(n){n!=="selectionchange"&&(ig.has(n)||cl(n,!1,e),cl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[to]||(t[to]=!0,cl("selectionchange",!1,t))}}function Ep(e,t,n,r){switch(up(t)){case 1:var o=v0;break;case 4:o=x0;break;default:o=Ru}n=o.bind(null,t,n,e),o=void 0,!Ll||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function dl(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var p=r.stateNode.containerInfo;if(p===o||p.nodeType===8&&p.parentNode===o)break;if(c===4)for(c=r.return;c!==null;){var m=c.tag;if((m===3||m===4)&&(m=c.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;c=c.return}for(;p!==null;){if(c=vr(p),c===null)return;if(m=c.tag,m===5||m===6){r=s=c;continue e}p=p.parentNode}}r=r.return}Yf(function(){var y=s,j=Au(n),S=[];e:{var E=jp.get(e);if(E!==void 0){var G=Bu,Y=e;switch(e){case"keypress":if(xo(n)===0)break e;case"keydown":case"keyup":G=R0;break;case"focusin":Y="focus",G=il;break;case"focusout":Y="blur",G=il;break;case"beforeblur":case"afterblur":G=il;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=k0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=I0;break;case wp:case bp:case kp:G=S0;break;case Cp:G=z0;break;case"scroll":G=w0;break;case"wheel":G=$0;break;case"copy":case"cut":case"paste":G=N0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=md}var M=(t&4)!==0,ee=!M&&e==="scroll",C=M?E!==null?E+"Capture":null:E;M=[];for(var v=y,b;v!==null;){b=v;var I=b.stateNode;if(b.tag===5&&I!==null&&(b=I,C!==null&&(I=ea(v,C),I!=null&&M.push(sa(v,I,b)))),ee)break;v=v.return}0<M.length&&(E=new G(E,Y,null,n,j),S.push({event:E,listeners:M}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",E&&n!==Ol&&(Y=n.relatedTarget||n.fromElement)&&(vr(Y)||Y[An]))break e;if((G||E)&&(E=j.window===j?j:(E=j.ownerDocument)?E.defaultView||E.parentWindow:window,G?(Y=n.relatedTarget||n.toElement,G=y,Y=Y?vr(Y):null,Y!==null&&(ee=_r(Y),Y!==ee||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(G=null,Y=y),G!==Y)){if(M=pd,I="onMouseLeave",C="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(M=md,I="onPointerLeave",C="onPointerEnter",v="pointer"),ee=G==null?E:Hr(G),b=Y==null?E:Hr(Y),E=new M(I,v+"leave",G,n,j),E.target=ee,E.relatedTarget=b,I=null,vr(j)===y&&(M=new M(C,v+"enter",Y,n,j),M.target=b,M.relatedTarget=ee,I=M),ee=I,G&&Y)t:{for(M=G,C=Y,v=0,b=M;b;b=zr(b))v++;for(b=0,I=C;I;I=zr(I))b++;for(;0<v-b;)M=zr(M),v--;for(;0<b-v;)C=zr(C),b--;for(;v--;){if(M===C||C!==null&&M===C.alternate)break t;M=zr(M),C=zr(C)}M=null}else M=null;G!==null&&Ed(S,E,G,M,!1),Y!==null&&ee!==null&&Ed(S,ee,Y,M,!0)}}e:{if(E=y?Hr(y):window,G=E.nodeName&&E.nodeName.toLowerCase(),G==="select"||G==="input"&&E.type==="file")var K=H0;else if(vd(E))if(mp)K=Z0;else{K=Q0;var L=Y0}else(G=E.nodeName)&&G.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(K=X0);if(K&&(K=K(e,y))){hp(S,K,n,j);break e}L&&L(e,E,y),e==="focusout"&&(L=E._wrapperState)&&L.controlled&&E.type==="number"&&Pl(E,"number",E.value)}switch(L=y?Hr(y):window,e){case"focusin":(vd(L)||L.contentEditable==="true")&&(Kr=L,Ul=y,qi=null);break;case"focusout":qi=Ul=Kr=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,Cd(S,n,j);break;case"selectionchange":if(tg)break;case"keydown":case"keyup":Cd(S,n,j)}var B;if(Ou)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Ur?fp(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(dp&&n.locale!=="ko"&&(Ur||V!=="onCompositionStart"?V==="onCompositionEnd"&&Ur&&(B=cp()):(Kn=j,Mu="value"in Kn?Kn.value:Kn.textContent,Ur=!0)),L=Bo(y,V),0<L.length&&(V=new hd(V,e,null,n,j),S.push({event:V,listeners:L}),B?V.data=B:(B=pp(n),B!==null&&(V.data=B)))),(B=G0?V0(e,n):U0(e,n))&&(y=Bo(y,"onBeforeInput"),0<y.length&&(j=new hd("onBeforeInput","beforeinput",null,n,j),S.push({event:j,listeners:y}),j.data=B))}Sp(S,t)})}function sa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=ea(e,n),s!=null&&r.unshift(sa(e,s,o)),s=ea(e,t),s!=null&&r.push(sa(e,s,o))),e=e.return}return r}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ed(e,t,n,r,o){for(var s=t._reactName,c=[];n!==null&&n!==r;){var p=n,m=p.alternate,y=p.stateNode;if(m!==null&&m===r)break;p.tag===5&&y!==null&&(p=y,o?(m=ea(n,s),m!=null&&c.unshift(sa(n,m,p))):o||(m=ea(n,s),m!=null&&c.push(sa(n,m,p)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var ag=/\r\n?/g,og=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(ag,`
`).replace(og,"")}function no(e,t,n){if(t=Nd(t),Nd(e)!==t&&n)throw Error(ae(425))}function Io(){}var ql=null,Hl=null;function Yl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,sg=typeof clearTimeout=="function"?clearTimeout:void 0,Td=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof Td<"u"?function(e){return Td.resolve(null).then(e).catch(ug)}:Ql;function ug(e){setTimeout(function(){throw e})}function fl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ra(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ra(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _d(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yi=Math.random().toString(36).slice(2),xn="__reactFiber$"+yi,la="__reactProps$"+yi,An="__reactContainer$"+yi,Xl="__reactEvents$"+yi,cg="__reactListeners$"+yi,dg="__reactHandles$"+yi;function vr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_d(e);e!==null;){if(n=e[xn])return n;e=_d(e)}return t}e=n,n=e.parentNode}return null}function va(e){return e=e[xn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function as(e){return e[la]||null}var Zl=[],Yr=-1;function ar(e){return{current:e}}function Ve(e){0>Yr||(e.current=Zl[Yr],Zl[Yr]=null,Yr--)}function We(e,t){Yr++,Zl[Yr]=e.current,e.current=t}var rr={},Ct=ar(rr),Mt=ar(!1),Cr=rr;function ui(e,t){var n=e.type.contextTypes;if(!n)return rr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Bt(e){return e=e.childContextTypes,e!=null}function Oo(){Ve(Mt),Ve(Ct)}function Ad(e,t,n){if(Ct.current!==rr)throw Error(ae(168));We(Ct,t),We(Mt,n)}function Np(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ae(108,Ym(e)||"Unknown",o));return Xe({},n,r)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rr,Cr=Ct.current,We(Ct,e),We(Mt,Mt.current),!0}function Fd(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=Np(e,t,Cr),r.__reactInternalMemoizedMergedChildContext=e,Ve(Mt),Ve(Ct),We(Ct,e)):Ve(Mt),We(Mt,n)}var Sn=null,os=!1,pl=!1;function Tp(e){Sn===null?Sn=[e]:Sn.push(e)}function fg(e){os=!0,Tp(e)}function or(){if(!pl&&Sn!==null){pl=!0;var e=0,t=Oe;try{var n=Sn;for(Oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Sn=null,os=!1}catch(o){throw Sn!==null&&(Sn=Sn.slice(e+1)),Jf(Fu,or),o}finally{Oe=t,pl=!1}}return null}var Qr=[],Xr=0,Lo=null,$o=0,Ht=[],Yt=0,jr=null,En=1,Nn="";function mr(e,t){Qr[Xr++]=$o,Qr[Xr++]=Lo,Lo=e,$o=t}function _p(e,t,n){Ht[Yt++]=En,Ht[Yt++]=Nn,Ht[Yt++]=jr,jr=e;var r=En;e=Nn;var o=32-cn(r)-1;r&=~(1<<o),n+=1;var s=32-cn(t)+o;if(30<s){var c=o-o%5;s=(r&(1<<c)-1).toString(32),r>>=c,o-=c,En=1<<32-cn(t)+o|n<<o|r,Nn=s+e}else En=1<<s|n<<o|r,Nn=e}function Lu(e){e.return!==null&&(mr(e,1),_p(e,1,0))}function $u(e){for(;e===Lo;)Lo=Qr[--Xr],Qr[Xr]=null,$o=Qr[--Xr],Qr[Xr]=null;for(;e===jr;)jr=Ht[--Yt],Ht[Yt]=null,Nn=Ht[--Yt],Ht[Yt]=null,En=Ht[--Yt],Ht[Yt]=null}var $t=null,Lt=null,qe=!1,ln=null;function Ap(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Dd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$t=e,Lt=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$t=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jr!==null?{id:En,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$t=e,Lt=null,!0):!1;default:return!1}}function Jl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eu(e){if(qe){var t=Lt;if(t){var n=t;if(!Dd(e,t)){if(Jl(e))throw Error(ae(418));t=Xn(n.nextSibling);var r=$t;t&&Dd(e,t)?Ap(r,n):(e.flags=e.flags&-4097|2,qe=!1,$t=e)}}else{if(Jl(e))throw Error(ae(418));e.flags=e.flags&-4097|2,qe=!1,$t=e}}}function Pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function ro(e){if(e!==$t)return!1;if(!qe)return Pd(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yl(e.type,e.memoizedProps)),t&&(t=Lt)){if(Jl(e))throw Fp(),Error(ae(418));for(;t;)Ap(e,t),t=Xn(t.nextSibling)}if(Pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=$t?Xn(e.stateNode.nextSibling):null;return!0}function Fp(){for(var e=Lt;e;)e=Xn(e.nextSibling)}function ci(){Lt=$t=null,qe=!1}function Wu(e){ln===null?ln=[e]:ln.push(e)}var pg=Pn.ReactCurrentBatchConfig;function Ri(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(c){var p=o.refs;c===null?delete p[s]:p[s]=c},t._stringRef=s,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function io(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rd(e){var t=e._init;return t(e._payload)}function Dp(e){function t(C,v){if(e){var b=C.deletions;b===null?(C.deletions=[v],C.flags|=16):b.push(v)}}function n(C,v){if(!e)return null;for(;v!==null;)t(C,v),v=v.sibling;return null}function r(C,v){for(C=new Map;v!==null;)v.key!==null?C.set(v.key,v):C.set(v.index,v),v=v.sibling;return C}function o(C,v){return C=tr(C,v),C.index=0,C.sibling=null,C}function s(C,v,b){return C.index=b,e?(b=C.alternate,b!==null?(b=b.index,b<v?(C.flags|=2,v):b):(C.flags|=2,v)):(C.flags|=1048576,v)}function c(C){return e&&C.alternate===null&&(C.flags|=2),C}function p(C,v,b,I){return v===null||v.tag!==6?(v=wl(b,C.mode,I),v.return=C,v):(v=o(v,b),v.return=C,v)}function m(C,v,b,I){var K=b.type;return K===Vr?j(C,v,b.props.children,I,b.key):v!==null&&(v.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Wn&&Rd(K)===v.type)?(I=o(v,b.props),I.ref=Ri(C,v,b),I.return=C,I):(I=Eo(b.type,b.key,b.props,null,C.mode,I),I.ref=Ri(C,v,b),I.return=C,I)}function y(C,v,b,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=bl(b,C.mode,I),v.return=C,v):(v=o(v,b.children||[]),v.return=C,v)}function j(C,v,b,I,K){return v===null||v.tag!==7?(v=kr(b,C.mode,I,K),v.return=C,v):(v=o(v,b),v.return=C,v)}function S(C,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wl(""+v,C.mode,b),v.return=C,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qa:return b=Eo(v.type,v.key,v.props,null,C.mode,b),b.ref=Ri(C,null,v),b.return=C,b;case Gr:return v=bl(v,C.mode,b),v.return=C,v;case Wn:var I=v._init;return S(C,I(v._payload),b)}if(Li(v)||_i(v))return v=kr(v,C.mode,b,null),v.return=C,v;io(C,v)}return null}function E(C,v,b,I){var K=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return K!==null?null:p(C,v,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qa:return b.key===K?m(C,v,b,I):null;case Gr:return b.key===K?y(C,v,b,I):null;case Wn:return K=b._init,E(C,v,K(b._payload),I)}if(Li(b)||_i(b))return K!==null?null:j(C,v,b,I,null);io(C,b)}return null}function G(C,v,b,I,K){if(typeof I=="string"&&I!==""||typeof I=="number")return C=C.get(b)||null,p(v,C,""+I,K);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case qa:return C=C.get(I.key===null?b:I.key)||null,m(v,C,I,K);case Gr:return C=C.get(I.key===null?b:I.key)||null,y(v,C,I,K);case Wn:var L=I._init;return G(C,v,b,L(I._payload),K)}if(Li(I)||_i(I))return C=C.get(b)||null,j(v,C,I,K,null);io(v,I)}return null}function Y(C,v,b,I){for(var K=null,L=null,B=v,V=v=0,q=null;B!==null&&V<b.length;V++){B.index>V?(q=B,B=null):q=B.sibling;var $=E(C,B,b[V],I);if($===null){B===null&&(B=q);break}e&&B&&$.alternate===null&&t(C,B),v=s($,v,V),L===null?K=$:L.sibling=$,L=$,B=q}if(V===b.length)return n(C,B),qe&&mr(C,V),K;if(B===null){for(;V<b.length;V++)B=S(C,b[V],I),B!==null&&(v=s(B,v,V),L===null?K=B:L.sibling=B,L=B);return qe&&mr(C,V),K}for(B=r(C,B);V<b.length;V++)q=G(B,C,V,b[V],I),q!==null&&(e&&q.alternate!==null&&B.delete(q.key===null?V:q.key),v=s(q,v,V),L===null?K=q:L.sibling=q,L=q);return e&&B.forEach(function(D){return t(C,D)}),qe&&mr(C,V),K}function M(C,v,b,I){var K=_i(b);if(typeof K!="function")throw Error(ae(150));if(b=K.call(b),b==null)throw Error(ae(151));for(var L=K=null,B=v,V=v=0,q=null,$=b.next();B!==null&&!$.done;V++,$=b.next()){B.index>V?(q=B,B=null):q=B.sibling;var D=E(C,B,$.value,I);if(D===null){B===null&&(B=q);break}e&&B&&D.alternate===null&&t(C,B),v=s(D,v,V),L===null?K=D:L.sibling=D,L=D,B=q}if($.done)return n(C,B),qe&&mr(C,V),K;if(B===null){for(;!$.done;V++,$=b.next())$=S(C,$.value,I),$!==null&&(v=s($,v,V),L===null?K=$:L.sibling=$,L=$);return qe&&mr(C,V),K}for(B=r(C,B);!$.done;V++,$=b.next())$=G(B,C,V,$.value,I),$!==null&&(e&&$.alternate!==null&&B.delete($.key===null?V:$.key),v=s($,v,V),L===null?K=$:L.sibling=$,L=$);return e&&B.forEach(function(J){return t(C,J)}),qe&&mr(C,V),K}function ee(C,v,b,I){if(typeof b=="object"&&b!==null&&b.type===Vr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case qa:e:{for(var K=b.key,L=v;L!==null;){if(L.key===K){if(K=b.type,K===Vr){if(L.tag===7){n(C,L.sibling),v=o(L,b.props.children),v.return=C,C=v;break e}}else if(L.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Wn&&Rd(K)===L.type){n(C,L.sibling),v=o(L,b.props),v.ref=Ri(C,L,b),v.return=C,C=v;break e}n(C,L);break}else t(C,L);L=L.sibling}b.type===Vr?(v=kr(b.props.children,C.mode,I,b.key),v.return=C,C=v):(I=Eo(b.type,b.key,b.props,null,C.mode,I),I.ref=Ri(C,v,b),I.return=C,C=I)}return c(C);case Gr:e:{for(L=b.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(C,v.sibling),v=o(v,b.children||[]),v.return=C,C=v;break e}else{n(C,v);break}else t(C,v);v=v.sibling}v=bl(b,C.mode,I),v.return=C,C=v}return c(C);case Wn:return L=b._init,ee(C,v,L(b._payload),I)}if(Li(b))return Y(C,v,b,I);if(_i(b))return M(C,v,b,I);io(C,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(C,v.sibling),v=o(v,b),v.return=C,C=v):(n(C,v),v=wl(b,C.mode,I),v.return=C,C=v),c(C)):n(C,v)}return ee}var di=Dp(!0),Pp=Dp(!1),Wo=ar(null),Go=null,Zr=null,Gu=null;function Vu(){Gu=Zr=Go=null}function Uu(e){var t=Wo.current;Ve(Wo),e._currentValue=t}function tu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ai(e,t){Go=e,Gu=Zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function Jt(e){var t=e._currentValue;if(Gu!==e)if(e={context:e,memoizedValue:t,next:null},Zr===null){if(Go===null)throw Error(ae(308));Zr=e,Go.dependencies={lanes:0,firstContext:e}}else Zr=Zr.next=e;return t}var xr=null;function Ku(e){xr===null?xr=[e]:xr.push(e)}function Rp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ku(t)):(n.next=o.next,o.next=n),t.interleaved=n,Fn(e,r)}function Fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function qu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Fn(e,n)}return o=r.interleaved,o===null?(t.next=t,Ku(r)):(t.next=o.next,o.next=t),r.interleaved=t,Fn(e,n)}function wo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Du(e,n)}}function Md(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=c:s=s.next=c,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var o=e.updateQueue;Gn=!1;var s=o.firstBaseUpdate,c=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var m=p,y=m.next;m.next=null,c===null?s=y:c.next=y,c=m;var j=e.alternate;j!==null&&(j=j.updateQueue,p=j.lastBaseUpdate,p!==c&&(p===null?j.firstBaseUpdate=y:p.next=y,j.lastBaseUpdate=m))}if(s!==null){var S=o.baseState;c=0,j=y=m=null,p=s;do{var E=p.lane,G=p.eventTime;if((r&E)===E){j!==null&&(j=j.next={eventTime:G,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var Y=e,M=p;switch(E=t,G=n,M.tag){case 1:if(Y=M.payload,typeof Y=="function"){S=Y.call(G,S,E);break e}S=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=M.payload,E=typeof Y=="function"?Y.call(G,S,E):Y,E==null)break e;S=Xe({},S,E);break e;case 2:Gn=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,E=o.effects,E===null?o.effects=[p]:E.push(p))}else G={eventTime:G,lane:E,tag:p.tag,payload:p.payload,callback:p.callback,next:null},j===null?(y=j=G,m=S):j=j.next=G,c|=E;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;E=p,p=E.next,E.next=null,o.lastBaseUpdate=E,o.shared.pending=null}}while(!0);if(j===null&&(m=S),o.baseState=m,o.firstBaseUpdate=y,o.lastBaseUpdate=j,t=o.shared.interleaved,t!==null){o=t;do c|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Er|=c,e.lanes=c,e.memoizedState=S}}function Bd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ae(191,o));o.call(r)}}}var xa={},bn=ar(xa),ua=ar(xa),ca=ar(xa);function wr(e){if(e===xa)throw Error(ae(174));return e}function Hu(e,t){switch(We(ca,t),We(ua,e),We(bn,xa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ml(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ml(t,e)}Ve(bn),We(bn,t)}function fi(){Ve(bn),Ve(ua),Ve(ca)}function Bp(e){wr(ca.current);var t=wr(bn.current),n=Ml(t,e.type);t!==n&&(We(ua,e),We(bn,n))}function Yu(e){ua.current===e&&(Ve(bn),Ve(ua))}var Ye=ar(0);function Uo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hl=[];function Qu(){for(var e=0;e<hl.length;e++)hl[e]._workInProgressVersionPrimary=null;hl.length=0}var bo=Pn.ReactCurrentDispatcher,ml=Pn.ReactCurrentBatchConfig,Sr=0,Qe=null,st=null,dt=null,Ko=!1,Hi=!1,da=0,hg=0;function wt(){throw Error(ae(321))}function Xu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fn(e[n],t[n]))return!1;return!0}function Zu(e,t,n,r,o,s){if(Sr=s,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bo.current=e===null||e.memoizedState===null?vg:xg,e=n(r,o),Hi){s=0;do{if(Hi=!1,da=0,25<=s)throw Error(ae(301));s+=1,dt=st=null,t.updateQueue=null,bo.current=wg,e=n(r,o)}while(Hi)}if(bo.current=qo,t=st!==null&&st.next!==null,Sr=0,dt=st=Qe=null,Ko=!1,t)throw Error(ae(300));return e}function Ju(){var e=da!==0;return da=0,e}function vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Qe.memoizedState=dt=e:dt=dt.next=e,dt}function en(){if(st===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=dt===null?Qe.memoizedState:dt.next;if(t!==null)dt=t,st=e;else{if(e===null)throw Error(ae(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dt===null?Qe.memoizedState=dt=e:dt=dt.next=e}return dt}function fa(e,t){return typeof t=="function"?t(e):t}function gl(e){var t=en(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=st,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var c=o.next;o.next=s.next,s.next=c}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var p=c=null,m=null,y=s;do{var j=y.lane;if((Sr&j)===j)m!==null&&(m=m.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var S={lane:j,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};m===null?(p=m=S,c=r):m=m.next=S,Qe.lanes|=j,Er|=j}y=y.next}while(y!==null&&y!==s);m===null?c=r:m.next=p,fn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=c,t.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Qe.lanes|=s,Er|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function yl(e){var t=en(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do s=e(s,c.action),c=c.next;while(c!==o);fn(s,t.memoizedState)||(Rt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ip(){}function Op(e,t){var n=Qe,r=en(),o=t(),s=!fn(r.memoizedState,o);if(s&&(r.memoizedState=o,Rt=!0),r=r.queue,ec($p.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,pa(9,Lp.bind(null,n,r,o,t),void 0,null),ft===null)throw Error(ae(349));Sr&30||zp(n,t,o)}return o}function zp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lp(e,t,n,r){t.value=n,t.getSnapshot=r,Wp(t)&&Gp(e)}function $p(e,t,n){return n(function(){Wp(t)&&Gp(e)})}function Wp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fn(e,n)}catch{return!0}}function Gp(e){var t=Fn(e,1);t!==null&&dn(t,e,1,-1)}function Id(e){var t=vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t.queue=e,e=e.dispatch=yg.bind(null,Qe,e),[t.memoizedState,e]}function pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Vp(){return en().memoizedState}function ko(e,t,n,r){var o=vn();Qe.flags|=e,o.memoizedState=pa(1|t,n,void 0,r===void 0?null:r)}function ss(e,t,n,r){var o=en();r=r===void 0?null:r;var s=void 0;if(st!==null){var c=st.memoizedState;if(s=c.destroy,r!==null&&Xu(r,c.deps)){o.memoizedState=pa(t,n,s,r);return}}Qe.flags|=e,o.memoizedState=pa(1|t,n,s,r)}function Od(e,t){return ko(8390656,8,e,t)}function ec(e,t){return ss(2048,8,e,t)}function Up(e,t){return ss(4,2,e,t)}function Kp(e,t){return ss(4,4,e,t)}function qp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hp(e,t,n){return n=n!=null?n.concat([e]):null,ss(4,4,qp.bind(null,t,e),n)}function tc(){}function Yp(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qp(e,t){var n=en();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xp(e,t,n){return Sr&21?(fn(n,t)||(n=np(),Qe.lanes|=n,Er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n)}function mg(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var r=ml.transition;ml.transition={};try{e(!1),t()}finally{Oe=n,ml.transition=r}}function Zp(){return en().memoizedState}function gg(e,t,n){var r=er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jp(e))eh(t,n);else if(n=Rp(e,t,n,r),n!==null){var o=Nt();dn(n,e,r,o),th(n,t,r)}}function yg(e,t,n){var r=er(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jp(e))eh(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var c=t.lastRenderedState,p=s(c,n);if(o.hasEagerState=!0,o.eagerState=p,fn(p,c)){var m=t.interleaved;m===null?(o.next=o,Ku(t)):(o.next=m.next,m.next=o),t.interleaved=o;return}}catch{}finally{}n=Rp(e,t,o,r),n!==null&&(o=Nt(),dn(n,e,r,o),th(n,t,r))}}function Jp(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function eh(e,t){Hi=Ko=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function th(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Du(e,n)}}var qo={readContext:Jt,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},vg={readContext:Jt,useCallback:function(e,t){return vn().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Od,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ko(4194308,4,qp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=vn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gg.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=vn();return e={current:e},t.memoizedState=e},useState:Id,useDebugValue:tc,useDeferredValue:function(e){return vn().memoizedState=e},useTransition:function(){var e=Id(!1),t=e[0];return e=mg.bind(null,e[1]),vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qe,o=vn();if(qe){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),ft===null)throw Error(ae(349));Sr&30||zp(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Od($p.bind(null,r,s,e),[e]),r.flags|=2048,pa(9,Lp.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vn(),t=ft.identifierPrefix;if(qe){var n=Nn,r=En;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=da++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xg={readContext:Jt,useCallback:Yp,useContext:Jt,useEffect:ec,useImperativeHandle:Hp,useInsertionEffect:Up,useLayoutEffect:Kp,useMemo:Qp,useReducer:gl,useRef:Vp,useState:function(){return gl(fa)},useDebugValue:tc,useDeferredValue:function(e){var t=en();return Xp(t,st.memoizedState,e)},useTransition:function(){var e=gl(fa)[0],t=en().memoizedState;return[e,t]},useMutableSource:Ip,useSyncExternalStore:Op,useId:Zp,unstable_isNewReconciler:!1},wg={readContext:Jt,useCallback:Yp,useContext:Jt,useEffect:ec,useImperativeHandle:Hp,useInsertionEffect:Up,useLayoutEffect:Kp,useMemo:Qp,useReducer:yl,useRef:Vp,useState:function(){return yl(fa)},useDebugValue:tc,useDeferredValue:function(e){var t=en();return st===null?t.memoizedState=e:Xp(t,st.memoizedState,e)},useTransition:function(){var e=yl(fa)[0],t=en().memoizedState;return[e,t]},useMutableSource:Ip,useSyncExternalStore:Op,useId:Zp,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ls={isMounted:function(e){return(e=e._reactInternals)?_r(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nt(),o=er(e),s=Tn(r,o);s.payload=t,n!=null&&(s.callback=n),t=Zn(e,s,o),t!==null&&(dn(t,e,o,r),wo(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nt(),o=er(e),s=Tn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Zn(e,s,o),t!==null&&(dn(t,e,o,r),wo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nt(),r=er(e),o=Tn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Zn(e,o,r),t!==null&&(dn(t,e,r,n),wo(t,e,r))}};function zd(e,t,n,r,o,s,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,c):t.prototype&&t.prototype.isPureReactComponent?!aa(n,r)||!aa(o,s):!0}function nh(e,t,n){var r=!1,o=rr,s=t.contextType;return typeof s=="object"&&s!==null?s=Jt(s):(o=Bt(t)?Cr:Ct.current,r=t.contextTypes,s=(r=r!=null)?ui(e,o):rr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ls,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ld(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ls.enqueueReplaceState(t,t.state,null)}function ru(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},qu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Jt(s):(s=Bt(t)?Cr:Ct.current,o.context=ui(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(nu(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ls.enqueueReplaceState(o,o.state,null),Vo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function pi(e,t){try{var n="",r=t;do n+=Hm(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function vl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function iu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bg=typeof WeakMap=="function"?WeakMap:Map;function rh(e,t,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yo||(Yo=!0,hu=r),iu(e,t)},n}function ih(e,t,n){n=Tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){iu(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){iu(e,t),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function $d(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bg;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Mg.bind(null,e,t,n),t.then(e,e))}function Wd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Tn(-1,1),t.tag=2,Zn(n,t,1))),n.lanes|=1),e)}var kg=Pn.ReactCurrentOwner,Rt=!1;function Et(e,t,n,r){t.child=e===null?Pp(t,null,n,r):di(t,e.child,n,r)}function Vd(e,t,n,r,o){n=n.render;var s=t.ref;return ai(t,o),r=Zu(e,t,n,r,s,o),n=Ju(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Dn(e,t,o)):(qe&&n&&Lu(t),t.flags|=1,Et(e,t,r,o),t.child)}function Ud(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!uc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ah(e,t,s,r,o)):(e=Eo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var c=s.memoizedProps;if(n=n.compare,n=n!==null?n:aa,n(c,r)&&e.ref===t.ref)return Dn(e,t,o)}return t.flags|=1,e=tr(s,r),e.ref=t.ref,e.return=t,t.child=e}function ah(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(aa(s,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Dn(e,t,o)}return au(e,t,n,r,o)}function oh(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ei,zt),zt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(ei,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(ei,zt),zt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,We(ei,zt),zt|=r;return Et(e,t,o,n),t.child}function sh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function au(e,t,n,r,o){var s=Bt(n)?Cr:Ct.current;return s=ui(t,s),ai(t,o),n=Zu(e,t,n,r,s,o),r=Ju(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Dn(e,t,o)):(qe&&r&&Lu(t),t.flags|=1,Et(e,t,n,o),t.child)}function Kd(e,t,n,r,o){if(Bt(n)){var s=!0;zo(t)}else s=!1;if(ai(t,o),t.stateNode===null)Co(e,t),nh(t,n,r),ru(t,n,r,o),r=!0;else if(e===null){var c=t.stateNode,p=t.memoizedProps;c.props=p;var m=c.context,y=n.contextType;typeof y=="object"&&y!==null?y=Jt(y):(y=Bt(n)?Cr:Ct.current,y=ui(t,y));var j=n.getDerivedStateFromProps,S=typeof j=="function"||typeof c.getSnapshotBeforeUpdate=="function";S||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==r||m!==y)&&Ld(t,c,r,y),Gn=!1;var E=t.memoizedState;c.state=E,Vo(t,r,c,o),m=t.memoizedState,p!==r||E!==m||Mt.current||Gn?(typeof j=="function"&&(nu(t,n,j,r),m=t.memoizedState),(p=Gn||zd(t,n,p,r,E,m,y))?(S||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=m),c.props=r,c.state=m,c.context=y,r=p):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,Mp(e,t),p=t.memoizedProps,y=t.type===t.elementType?p:on(t.type,p),c.props=y,S=t.pendingProps,E=c.context,m=n.contextType,typeof m=="object"&&m!==null?m=Jt(m):(m=Bt(n)?Cr:Ct.current,m=ui(t,m));var G=n.getDerivedStateFromProps;(j=typeof G=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==S||E!==m)&&Ld(t,c,r,m),Gn=!1,E=t.memoizedState,c.state=E,Vo(t,r,c,o);var Y=t.memoizedState;p!==S||E!==Y||Mt.current||Gn?(typeof G=="function"&&(nu(t,n,G,r),Y=t.memoizedState),(y=Gn||zd(t,n,y,r,E,Y,m)||!1)?(j||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,Y,m),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,Y,m)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=Y),c.props=r,c.state=Y,c.context=m,r=y):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return ou(e,t,n,r,s,o)}function ou(e,t,n,r,o,s){sh(e,t);var c=(t.flags&128)!==0;if(!r&&!c)return o&&Fd(t,n,!1),Dn(e,t,s);r=t.stateNode,kg.current=t;var p=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&c?(t.child=di(t,e.child,null,s),t.child=di(t,null,p,s)):Et(e,t,p,s),t.memoizedState=r.state,o&&Fd(t,n,!0),t.child}function lh(e){var t=e.stateNode;t.pendingContext?Ad(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ad(e,t.context,!1),Hu(e,t.containerInfo)}function qd(e,t,n,r,o){return ci(),Wu(o),t.flags|=256,Et(e,t,n,r),t.child}var su={dehydrated:null,treeContext:null,retryLane:0};function lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function uh(e,t,n){var r=t.pendingProps,o=Ye.current,s=!1,c=(t.flags&128)!==0,p;if((p=c)||(p=e!==null&&e.memoizedState===null?!1:(o&2)!==0),p?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),We(Ye,o&1),e===null)return eu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=r.children,e=r.fallback,s?(r=t.mode,s=t.child,c={mode:"hidden",children:c},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=c):s=ds(c,r,0,null),e=kr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=lu(n),t.memoizedState=su,e):nc(t,c));if(o=e.memoizedState,o!==null&&(p=o.dehydrated,p!==null))return Cg(e,t,c,r,p,o,n);if(s){s=r.fallback,c=t.mode,o=e.child,p=o.sibling;var m={mode:"hidden",children:r.children};return!(c&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=m,t.deletions=null):(r=tr(o,m),r.subtreeFlags=o.subtreeFlags&14680064),p!==null?s=tr(p,s):(s=kr(s,c,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,c=e.child.memoizedState,c=c===null?lu(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=su,r}return s=e.child,e=s.sibling,r=tr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nc(e,t){return t=ds({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ao(e,t,n,r){return r!==null&&Wu(r),di(t,e.child,null,n),e=nc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cg(e,t,n,r,o,s,c){if(n)return t.flags&256?(t.flags&=-257,r=vl(Error(ae(422))),ao(e,t,c,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ds({mode:"visible",children:r.children},o,0,null),s=kr(s,o,c,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&di(t,e.child,null,c),t.child.memoizedState=lu(c),t.memoizedState=su,s);if(!(t.mode&1))return ao(e,t,c,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var p=r.dgst;return r=p,s=Error(ae(419)),r=vl(s,r,void 0),ao(e,t,c,r)}if(p=(c&e.childLanes)!==0,Rt||p){if(r=ft,r!==null){switch(c&-c){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|c)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Fn(e,o),dn(r,e,o,-1))}return lc(),r=vl(Error(ae(421))),ao(e,t,c,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Bg.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Lt=Xn(o.nextSibling),$t=t,qe=!0,ln=null,e!==null&&(Ht[Yt++]=En,Ht[Yt++]=Nn,Ht[Yt++]=jr,En=e.id,Nn=e.overflow,jr=t),t=nc(t,r.children),t.flags|=4096,t)}function Hd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tu(e.return,t,n)}function xl(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function ch(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(Et(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hd(e,n,t);else if(e.tag===19)Hd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Uo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),xl(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Uo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}xl(t,!0,n,null,s);break;case"together":xl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Co(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jg(e,t,n){switch(t.tag){case 3:lh(t),ci();break;case 5:Bp(t);break;case 1:Bt(t.type)&&zo(t);break;case 4:Hu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;We(Wo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?uh(e,t,n):(We(Ye,Ye.current&1),e=Dn(e,t,n),e!==null?e.sibling:null);We(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ch(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),We(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,oh(e,t,n)}return Dn(e,t,n)}var dh,uu,fh,ph;dh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uu=function(){};fh=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,wr(bn.current);var s=null;switch(n){case"input":o=Fl(e,o),r=Fl(e,r),s=[];break;case"select":o=Xe({},o,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":o=Rl(e,o),r=Rl(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Io)}Bl(n,r);var c;n=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var p=o[y];for(c in p)p.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Zi.hasOwnProperty(y)?s||(s=[]):(s=s||[]).push(y,null));for(y in r){var m=r[y];if(p=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&m!==p&&(m!=null||p!=null))if(y==="style")if(p){for(c in p)!p.hasOwnProperty(c)||m&&m.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in m)m.hasOwnProperty(c)&&p[c]!==m[c]&&(n||(n={}),n[c]=m[c])}else n||(s||(s=[]),s.push(y,n)),n=m;else y==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,p=p?p.__html:void 0,m!=null&&p!==m&&(s=s||[]).push(y,m)):y==="children"?typeof m!="string"&&typeof m!="number"||(s=s||[]).push(y,""+m):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Zi.hasOwnProperty(y)?(m!=null&&y==="onScroll"&&Ge("scroll",e),s||p===m||(s=[])):(s=s||[]).push(y,m))}n&&(s=s||[]).push("style",n);var y=s;(t.updateQueue=y)&&(t.flags|=4)}};ph=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Sg(e,t,n){var r=t.pendingProps;switch($u(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return Bt(t.type)&&Oo(),bt(t),null;case 3:return r=t.stateNode,fi(),Ve(Mt),Ve(Ct),Qu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(yu(ln),ln=null))),uu(e,t),bt(t),null;case 5:Yu(t);var o=wr(ca.current);if(n=t.type,e!==null&&t.stateNode!=null)fh(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ae(166));return bt(t),null}if(e=wr(bn.current),ro(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[xn]=t,r[la]=s,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<Wi.length;o++)Ge(Wi[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":rd(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":ad(r,s),Ge("invalid",r)}Bl(n,s),o=null;for(var c in s)if(s.hasOwnProperty(c)){var p=s[c];c==="children"?typeof p=="string"?r.textContent!==p&&(s.suppressHydrationWarning!==!0&&no(r.textContent,p,e),o=["children",p]):typeof p=="number"&&r.textContent!==""+p&&(s.suppressHydrationWarning!==!0&&no(r.textContent,p,e),o=["children",""+p]):Zi.hasOwnProperty(c)&&p!=null&&c==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Ha(r),id(r,s,!0);break;case"textarea":Ha(r),od(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Io)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{c=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$f(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),n==="select"&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[xn]=t,e[la]=r,dh(e,t,!1,!1),t.stateNode=e;e:{switch(c=Il(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),o=r;break;case"iframe":case"object":case"embed":Ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<Wi.length;o++)Ge(Wi[o],e);o=r;break;case"source":Ge("error",e),o=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=r;break;case"details":Ge("toggle",e),o=r;break;case"input":rd(e,r),o=Fl(e,r),Ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Xe({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":ad(e,r),o=Rl(e,r),Ge("invalid",e);break;default:o=r}Bl(n,o),p=o;for(s in p)if(p.hasOwnProperty(s)){var m=p[s];s==="style"?Vf(e,m):s==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Wf(e,m)):s==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&Ji(e,m):typeof m=="number"&&Ji(e,""+m):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zi.hasOwnProperty(s)?m!=null&&s==="onScroll"&&Ge("scroll",e):m!=null&&Eu(e,s,m,c))}switch(n){case"input":Ha(e),id(e,r,!1);break;case"textarea":Ha(e),od(e);break;case"option":r.value!=null&&e.setAttribute("value",""+nr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ti(e,!!r.multiple,s,!1):r.defaultValue!=null&&ti(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(e&&t.stateNode!=null)ph(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ae(166));if(n=wr(ca.current),wr(bn.current),ro(t)){if(r=t.stateNode,n=t.memoizedProps,r[xn]=t,(s=r.nodeValue!==n)&&(e=$t,e!==null))switch(e.tag){case 3:no(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&no(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=t,t.stateNode=r}return bt(t),null;case 13:if(Ve(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Lt!==null&&t.mode&1&&!(t.flags&128))Fp(),ci(),t.flags|=98560,s=!1;else if(s=ro(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ae(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[xn]=t}else ci(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bt(t),s=!1}else ln!==null&&(yu(ln),ln=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?lt===0&&(lt=3):lc())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return fi(),uu(e,t),e===null&&oa(t.stateNode.containerInfo),bt(t),null;case 10:return Uu(t.type._context),bt(t),null;case 17:return Bt(t.type)&&Oo(),bt(t),null;case 19:if(Ve(Ye),s=t.memoizedState,s===null)return bt(t),null;if(r=(t.flags&128)!==0,c=s.rendering,c===null)if(r)Mi(s,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Uo(e),c!==null){for(t.flags|=128,Mi(s,!1),r=c.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,c=s.alternate,c===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Ye,Ye.current&1|2),t.child}e=e.sibling}s.tail!==null&&rt()>hi&&(t.flags|=128,r=!0,Mi(s,!1),t.lanes=4194304)}else{if(!r)if(e=Uo(c),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!qe)return bt(t),null}else 2*rt()-s.renderingStartTime>hi&&n!==1073741824&&(t.flags|=128,r=!0,Mi(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(n=s.last,n!==null?n.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rt(),t.sibling=null,n=Ye.current,We(Ye,r?n&1|2:n&1),t):(bt(t),null);case 22:case 23:return sc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function Eg(e,t){switch($u(t),t.tag){case 1:return Bt(t.type)&&Oo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fi(),Ve(Mt),Ve(Ct),Qu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yu(t),null;case 13:if(Ve(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Ye),null;case 4:return fi(),null;case 10:return Uu(t.type._context),null;case 22:case 23:return sc(),null;case 24:return null;default:return null}}var oo=!1,kt=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Jr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(e,t,r)}else n.current=null}function cu(e,t,n){try{n()}catch(r){Je(e,t,r)}}var Yd=!1;function Tg(e,t){if(ql=Ro,e=vp(),zu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var c=0,p=-1,m=-1,y=0,j=0,S=e,E=null;t:for(;;){for(var G;S!==n||o!==0&&S.nodeType!==3||(p=c+o),S!==s||r!==0&&S.nodeType!==3||(m=c+r),S.nodeType===3&&(c+=S.nodeValue.length),(G=S.firstChild)!==null;)E=S,S=G;for(;;){if(S===e)break t;if(E===n&&++y===o&&(p=c),E===s&&++j===r&&(m=c),(G=S.nextSibling)!==null)break;S=E,E=S.parentNode}S=G}n=p===-1||m===-1?null:{start:p,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hl={focusedElem:e,selectionRange:n},Ro=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var Y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var M=Y.memoizedProps,ee=Y.memoizedState,C=t.stateNode,v=C.getSnapshotBeforeUpdate(t.elementType===t.type?M:on(t.type,M),ee);C.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(I){Je(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return Y=Yd,Yd=!1,Y}function Yi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&cu(t,n,s)}o=o.next}while(o!==r)}}function us(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function du(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hh(e){var t=e.alternate;t!==null&&(e.alternate=null,hh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[la],delete t[Xl],delete t[cg],delete t[dg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mh(e){return e.tag===5||e.tag===3||e.tag===4}function Qd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Io));else if(r!==4&&(e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}function pu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pu(e,t,n),e=e.sibling;e!==null;)pu(e,t,n),e=e.sibling}var mt=null,sn=!1;function $n(e,t,n){for(n=n.child;n!==null;)gh(e,t,n),n=n.sibling}function gh(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(ts,n)}catch{}switch(n.tag){case 5:kt||Jr(n,t);case 6:var r=mt,o=sn;mt=null,$n(e,t,n),mt=r,sn=o,mt!==null&&(sn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(sn?(e=mt,n=n.stateNode,e.nodeType===8?fl(e.parentNode,n):e.nodeType===1&&fl(e,n),ra(e)):fl(mt,n.stateNode));break;case 4:r=mt,o=sn,mt=n.stateNode.containerInfo,sn=!0,$n(e,t,n),mt=r,sn=o;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,c=s.destroy;s=s.tag,c!==void 0&&(s&2||s&4)&&cu(n,t,c),o=o.next}while(o!==r)}$n(e,t,n);break;case 1:if(!kt&&(Jr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(p){Je(n,t,p)}$n(e,t,n);break;case 21:$n(e,t,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,$n(e,t,n),kt=r):$n(e,t,n);break;default:$n(e,t,n)}}function Xd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ng),t.forEach(function(r){var o=Ig.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function an(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,c=t,p=c;e:for(;p!==null;){switch(p.tag){case 5:mt=p.stateNode,sn=!1;break e;case 3:mt=p.stateNode.containerInfo,sn=!0;break e;case 4:mt=p.stateNode.containerInfo,sn=!0;break e}p=p.return}if(mt===null)throw Error(ae(160));gh(s,c,o),mt=null,sn=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(y){Je(o,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yh(t,e),t=t.sibling}function yh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(an(t,e),gn(e),r&4){try{Yi(3,e,e.return),us(3,e)}catch(M){Je(e,e.return,M)}try{Yi(5,e,e.return)}catch(M){Je(e,e.return,M)}}break;case 1:an(t,e),gn(e),r&512&&n!==null&&Jr(n,n.return);break;case 5:if(an(t,e),gn(e),r&512&&n!==null&&Jr(n,n.return),e.flags&32){var o=e.stateNode;try{Ji(o,"")}catch(M){Je(e,e.return,M)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,c=n!==null?n.memoizedProps:s,p=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{p==="input"&&s.type==="radio"&&s.name!=null&&zf(o,s),Il(p,c);var y=Il(p,s);for(c=0;c<m.length;c+=2){var j=m[c],S=m[c+1];j==="style"?Vf(o,S):j==="dangerouslySetInnerHTML"?Wf(o,S):j==="children"?Ji(o,S):Eu(o,j,S,y)}switch(p){case"input":Dl(o,s);break;case"textarea":Lf(o,s);break;case"select":var E=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var G=s.value;G!=null?ti(o,!!s.multiple,G,!1):E!==!!s.multiple&&(s.defaultValue!=null?ti(o,!!s.multiple,s.defaultValue,!0):ti(o,!!s.multiple,s.multiple?[]:"",!1))}o[la]=s}catch(M){Je(e,e.return,M)}}break;case 6:if(an(t,e),gn(e),r&4){if(e.stateNode===null)throw Error(ae(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(M){Je(e,e.return,M)}}break;case 3:if(an(t,e),gn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ra(t.containerInfo)}catch(M){Je(e,e.return,M)}break;case 4:an(t,e),gn(e);break;case 13:an(t,e),gn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(ac=rt())),r&4&&Xd(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(kt=(y=kt)||j,an(t,e),kt=y):an(t,e),gn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!j&&e.mode&1)for(ve=e,j=e.child;j!==null;){for(S=ve=j;ve!==null;){switch(E=ve,G=E.child,E.tag){case 0:case 11:case 14:case 15:Yi(4,E,E.return);break;case 1:Jr(E,E.return);var Y=E.stateNode;if(typeof Y.componentWillUnmount=="function"){r=E,n=E.return;try{t=r,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(M){Je(r,n,M)}}break;case 5:Jr(E,E.return);break;case 22:if(E.memoizedState!==null){Jd(S);continue}}G!==null?(G.return=E,ve=G):Jd(S)}j=j.sibling}e:for(j=null,S=e;;){if(S.tag===5){if(j===null){j=S;try{o=S.stateNode,y?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(p=S.stateNode,m=S.memoizedProps.style,c=m!=null&&m.hasOwnProperty("display")?m.display:null,p.style.display=Gf("display",c))}catch(M){Je(e,e.return,M)}}}else if(S.tag===6){if(j===null)try{S.stateNode.nodeValue=y?"":S.memoizedProps}catch(M){Je(e,e.return,M)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;j===S&&(j=null),S=S.return}j===S&&(j=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:an(t,e),gn(e),r&4&&Xd(e);break;case 21:break;default:an(t,e),gn(e)}}function gn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mh(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ji(o,""),r.flags&=-33);var s=Qd(e);pu(e,s,o);break;case 3:case 4:var c=r.stateNode.containerInfo,p=Qd(e);fu(e,p,c);break;default:throw Error(ae(161))}}catch(m){Je(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _g(e,t,n){ve=e,vh(e)}function vh(e,t,n){for(var r=(e.mode&1)!==0;ve!==null;){var o=ve,s=o.child;if(o.tag===22&&r){var c=o.memoizedState!==null||oo;if(!c){var p=o.alternate,m=p!==null&&p.memoizedState!==null||kt;p=oo;var y=kt;if(oo=c,(kt=m)&&!y)for(ve=o;ve!==null;)c=ve,m=c.child,c.tag===22&&c.memoizedState!==null?ef(o):m!==null?(m.return=c,ve=m):ef(o);for(;s!==null;)ve=s,vh(s),s=s.sibling;ve=o,oo=p,kt=y}Zd(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ve=s):Zd(e)}}function Zd(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kt||us(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!kt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Bd(t,s,r);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Bd(t,c,n)}break;case 5:var p=t.stateNode;if(n===null&&t.flags&4){n=p;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var j=y.memoizedState;if(j!==null){var S=j.dehydrated;S!==null&&ra(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}kt||t.flags&512&&du(t)}catch(E){Je(t,t.return,E)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function Jd(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function ef(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{us(4,t)}catch(m){Je(t,n,m)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(m){Je(t,o,m)}}var s=t.return;try{du(t)}catch(m){Je(t,s,m)}break;case 5:var c=t.return;try{du(t)}catch(m){Je(t,c,m)}}}catch(m){Je(t,t.return,m)}if(t===e){ve=null;break}var p=t.sibling;if(p!==null){p.return=t.return,ve=p;break}ve=t.return}}var Ag=Math.ceil,Ho=Pn.ReactCurrentDispatcher,rc=Pn.ReactCurrentOwner,Xt=Pn.ReactCurrentBatchConfig,Pe=0,ft=null,it=null,gt=0,zt=0,ei=ar(0),lt=0,ha=null,Er=0,cs=0,ic=0,Qi=null,Pt=null,ac=0,hi=1/0,jn=null,Yo=!1,hu=null,Jn=null,so=!1,qn=null,Qo=0,Xi=0,mu=null,jo=-1,So=0;function Nt(){return Pe&6?rt():jo!==-1?jo:jo=rt()}function er(e){return e.mode&1?Pe&2&&gt!==0?gt&-gt:pg.transition!==null?(So===0&&(So=np()),So):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:up(e.type)),e):1}function dn(e,t,n,r){if(50<Xi)throw Xi=0,mu=null,Error(ae(185));ga(e,n,r),(!(Pe&2)||e!==ft)&&(e===ft&&(!(Pe&2)&&(cs|=n),lt===4&&Un(e,gt)),It(e,r),n===1&&Pe===0&&!(t.mode&1)&&(hi=rt()+500,os&&or()))}function It(e,t){var n=e.callbackNode;p0(e,t);var r=Po(e,e===ft?gt:0);if(r===0)n!==null&&ud(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ud(n),t===1)e.tag===0?fg(tf.bind(null,e)):Tp(tf.bind(null,e)),lg(function(){!(Pe&6)&&or()}),n=null;else{switch(rp(r)){case 1:n=Fu;break;case 4:n=ep;break;case 16:n=Do;break;case 536870912:n=tp;break;default:n=Do}n=Eh(n,xh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xh(e,t){if(jo=-1,So=0,Pe&6)throw Error(ae(327));var n=e.callbackNode;if(oi()&&e.callbackNode!==n)return null;var r=Po(e,e===ft?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xo(e,r);else{t=r;var o=Pe;Pe|=2;var s=bh();(ft!==e||gt!==t)&&(jn=null,hi=rt()+500,br(e,t));do try{Pg();break}catch(p){wh(e,p)}while(!0);Vu(),Ho.current=s,Pe=o,it!==null?t=0:(ft=null,gt=0,t=lt)}if(t!==0){if(t===2&&(o=Wl(e),o!==0&&(r=o,t=gu(e,o))),t===1)throw n=ha,br(e,0),Un(e,r),It(e,rt()),n;if(t===6)Un(e,r);else{if(o=e.current.alternate,!(r&30)&&!Fg(o)&&(t=Xo(e,r),t===2&&(s=Wl(e),s!==0&&(r=s,t=gu(e,s))),t===1))throw n=ha,br(e,0),Un(e,r),It(e,rt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:gr(e,Pt,jn);break;case 3:if(Un(e,r),(r&130023424)===r&&(t=ac+500-rt(),10<t)){if(Po(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Nt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ql(gr.bind(null,e,Pt,jn),t);break}gr(e,Pt,jn);break;case 4:if(Un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var c=31-cn(r);s=1<<c,c=t[c],c>o&&(o=c),r&=~s}if(r=o,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ag(r/1960))-r,10<r){e.timeoutHandle=Ql(gr.bind(null,e,Pt,jn),r);break}gr(e,Pt,jn);break;case 5:gr(e,Pt,jn);break;default:throw Error(ae(329))}}}return It(e,rt()),e.callbackNode===n?xh.bind(null,e):null}function gu(e,t){var n=Qi;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=Xo(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&yu(t)),e}function yu(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Fg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!fn(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Un(e,t){for(t&=~ic,t&=~cs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-cn(t),r=1<<n;e[n]=-1,t&=~r}}function tf(e){if(Pe&6)throw Error(ae(327));oi();var t=Po(e,0);if(!(t&1))return It(e,rt()),null;var n=Xo(e,t);if(e.tag!==0&&n===2){var r=Wl(e);r!==0&&(t=r,n=gu(e,r))}if(n===1)throw n=ha,br(e,0),Un(e,t),It(e,rt()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,Pt,jn),It(e,rt()),null}function oc(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(hi=rt()+500,os&&or())}}function Nr(e){qn!==null&&qn.tag===0&&!(Pe&6)&&oi();var t=Pe;Pe|=1;var n=Xt.transition,r=Oe;try{if(Xt.transition=null,Oe=1,e)return e()}finally{Oe=r,Xt.transition=n,Pe=t,!(Pe&6)&&or()}}function sc(){zt=ei.current,Ve(ei)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sg(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch($u(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oo();break;case 3:fi(),Ve(Mt),Ve(Ct),Qu();break;case 5:Yu(r);break;case 4:fi();break;case 13:Ve(Ye);break;case 19:Ve(Ye);break;case 10:Uu(r.type._context);break;case 22:case 23:sc()}n=n.return}if(ft=e,it=e=tr(e.current,null),gt=zt=t,lt=0,ha=null,ic=cs=Er=0,Pt=Qi=null,xr!==null){for(t=0;t<xr.length;t++)if(n=xr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var c=s.next;s.next=o,r.next=c}n.pending=r}xr=null}return e}function wh(e,t){do{var n=it;try{if(Vu(),bo.current=qo,Ko){for(var r=Qe.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ko=!1}if(Sr=0,dt=st=Qe=null,Hi=!1,da=0,rc.current=null,n===null||n.return===null){lt=1,ha=t,it=null;break}e:{var s=e,c=n.return,p=n,m=t;if(t=gt,p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var y=m,j=p,S=j.tag;if(!(j.mode&1)&&(S===0||S===11||S===15)){var E=j.alternate;E?(j.updateQueue=E.updateQueue,j.memoizedState=E.memoizedState,j.lanes=E.lanes):(j.updateQueue=null,j.memoizedState=null)}var G=Wd(c);if(G!==null){G.flags&=-257,Gd(G,c,p,s,t),G.mode&1&&$d(s,y,t),t=G,m=y;var Y=t.updateQueue;if(Y===null){var M=new Set;M.add(m),t.updateQueue=M}else Y.add(m);break e}else{if(!(t&1)){$d(s,y,t),lc();break e}m=Error(ae(426))}}else if(qe&&p.mode&1){var ee=Wd(c);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),Gd(ee,c,p,s,t),Wu(pi(m,p));break e}}s=m=pi(m,p),lt!==4&&(lt=2),Qi===null?Qi=[s]:Qi.push(s),s=c;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var C=rh(s,m,t);Md(s,C);break e;case 1:p=m;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Jn===null||!Jn.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var I=ih(s,p,t);Md(s,I);break e}}s=s.return}while(s!==null)}Ch(n)}catch(K){t=K,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function bh(){var e=Ho.current;return Ho.current=qo,e===null?qo:e}function lc(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(Er&268435455)&&!(cs&268435455)||Un(ft,gt)}function Xo(e,t){var n=Pe;Pe|=2;var r=bh();(ft!==e||gt!==t)&&(jn=null,br(e,t));do try{Dg();break}catch(o){wh(e,o)}while(!0);if(Vu(),Pe=n,Ho.current=r,it!==null)throw Error(ae(261));return ft=null,gt=0,lt}function Dg(){for(;it!==null;)kh(it)}function Pg(){for(;it!==null&&!i0();)kh(it)}function kh(e){var t=Sh(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?Ch(e):it=t,rc.current=null}function Ch(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Eg(n,t),n!==null){n.flags&=32767,it=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,it=null;return}}else if(n=Sg(n,t,zt),n!==null){it=n;return}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);lt===0&&(lt=5)}function gr(e,t,n){var r=Oe,o=Xt.transition;try{Xt.transition=null,Oe=1,Rg(e,t,n,r)}finally{Xt.transition=o,Oe=r}return null}function Rg(e,t,n,r){do oi();while(qn!==null);if(Pe&6)throw Error(ae(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(h0(e,s),e===ft&&(it=ft=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||so||(so=!0,Eh(Do,function(){return oi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var c=Oe;Oe=1;var p=Pe;Pe|=4,rc.current=null,Tg(e,n),yh(n,e),eg(Hl),Ro=!!ql,Hl=ql=null,e.current=n,_g(n),a0(),Pe=p,Oe=c,Xt.transition=s}else e.current=n;if(so&&(so=!1,qn=e,Qo=o),s=e.pendingLanes,s===0&&(Jn=null),l0(n.stateNode),It(e,rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Yo)throw Yo=!1,e=hu,hu=null,e;return Qo&1&&e.tag!==0&&oi(),s=e.pendingLanes,s&1?e===mu?Xi++:(Xi=0,mu=e):Xi=0,or(),null}function oi(){if(qn!==null){var e=rp(Qo),t=Xt.transition,n=Oe;try{if(Xt.transition=null,Oe=16>e?16:e,qn===null)var r=!1;else{if(e=qn,qn=null,Qo=0,Pe&6)throw Error(ae(331));var o=Pe;for(Pe|=4,ve=e.current;ve!==null;){var s=ve,c=s.child;if(ve.flags&16){var p=s.deletions;if(p!==null){for(var m=0;m<p.length;m++){var y=p[m];for(ve=y;ve!==null;){var j=ve;switch(j.tag){case 0:case 11:case 15:Yi(8,j,s)}var S=j.child;if(S!==null)S.return=j,ve=S;else for(;ve!==null;){j=ve;var E=j.sibling,G=j.return;if(hh(j),j===y){ve=null;break}if(E!==null){E.return=G,ve=E;break}ve=G}}}var Y=s.alternate;if(Y!==null){var M=Y.child;if(M!==null){Y.child=null;do{var ee=M.sibling;M.sibling=null,M=ee}while(M!==null)}}ve=s}}if(s.subtreeFlags&2064&&c!==null)c.return=s,ve=c;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yi(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,ve=C;break e}ve=s.return}}var v=e.current;for(ve=v;ve!==null;){c=ve;var b=c.child;if(c.subtreeFlags&2064&&b!==null)b.return=c,ve=b;else e:for(c=v;ve!==null;){if(p=ve,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:us(9,p)}}catch(K){Je(p,p.return,K)}if(p===c){ve=null;break e}var I=p.sibling;if(I!==null){I.return=p.return,ve=I;break e}ve=p.return}}if(Pe=o,or(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(ts,e)}catch{}r=!0}return r}finally{Oe=n,Xt.transition=t}}return!1}function nf(e,t,n){t=pi(n,t),t=rh(e,t,1),e=Zn(e,t,1),t=Nt(),e!==null&&(ga(e,1,t),It(e,t))}function Je(e,t,n){if(e.tag===3)nf(e,e,n);else for(;t!==null;){if(t.tag===3){nf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){e=pi(n,e),e=ih(t,e,1),t=Zn(t,e,1),e=Nt(),t!==null&&(ga(t,1,e),It(t,e));break}}t=t.return}}function Mg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nt(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(gt&n)===n&&(lt===4||lt===3&&(gt&130023424)===gt&&500>rt()-ac?br(e,0):ic|=n),It(e,t)}function jh(e,t){t===0&&(e.mode&1?(t=Xa,Xa<<=1,!(Xa&130023424)&&(Xa=4194304)):t=1);var n=Nt();e=Fn(e,t),e!==null&&(ga(e,t,n),It(e,n))}function Bg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jh(e,n)}function Ig(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(t),jh(e,n)}var Sh;Sh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)Rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rt=!1,jg(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,qe&&t.flags&1048576&&_p(t,$o,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Co(e,t),e=t.pendingProps;var o=ui(t,Ct.current);ai(t,n),o=Zu(null,t,r,e,o,n);var s=Ju();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(r)?(s=!0,zo(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,qu(t),o.updater=ls,t.stateNode=o,o._reactInternals=t,ru(t,r,e,n),t=ou(null,t,r,!0,s,n)):(t.tag=0,qe&&s&&Lu(t),Et(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Co(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=zg(r),e=on(r,e),o){case 0:t=au(null,t,r,e,n);break e;case 1:t=Kd(null,t,r,e,n);break e;case 11:t=Vd(null,t,r,e,n);break e;case 14:t=Ud(null,t,r,on(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),au(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),Kd(e,t,r,o,n);case 3:e:{if(lh(t),e===null)throw Error(ae(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Mp(e,t),Vo(t,r,null,n);var c=t.memoizedState;if(r=c.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=pi(Error(ae(423)),t),t=qd(e,t,r,n,o);break e}else if(r!==o){o=pi(Error(ae(424)),t),t=qd(e,t,r,n,o);break e}else for(Lt=Xn(t.stateNode.containerInfo.firstChild),$t=t,qe=!0,ln=null,n=Pp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ci(),r===o){t=Dn(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return Bp(t),e===null&&eu(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,c=o.children,Yl(r,o)?c=null:s!==null&&Yl(r,s)&&(t.flags|=32),sh(e,t),Et(e,t,c,n),t.child;case 6:return e===null&&eu(t),null;case 13:return uh(e,t,n);case 4:return Hu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=di(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),Vd(e,t,r,o,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,c=o.value,We(Wo,r._currentValue),r._currentValue=c,s!==null)if(fn(s.value,c)){if(s.children===o.children&&!Mt.current){t=Dn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var p=s.dependencies;if(p!==null){c=s.child;for(var m=p.firstContext;m!==null;){if(m.context===r){if(s.tag===1){m=Tn(-1,n&-n),m.tag=2;var y=s.updateQueue;if(y!==null){y=y.shared;var j=y.pending;j===null?m.next=m:(m.next=j.next,j.next=m),y.pending=m}}s.lanes|=n,m=s.alternate,m!==null&&(m.lanes|=n),tu(s.return,n,t),p.lanes|=n;break}m=m.next}}else if(s.tag===10)c=s.type===t.type?null:s.child;else if(s.tag===18){if(c=s.return,c===null)throw Error(ae(341));c.lanes|=n,p=c.alternate,p!==null&&(p.lanes|=n),tu(c,n,t),c=s.sibling}else c=s.child;if(c!==null)c.return=s;else for(c=s;c!==null;){if(c===t){c=null;break}if(s=c.sibling,s!==null){s.return=c.return,c=s;break}c=c.return}s=c}Et(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ai(t,n),o=Jt(o),r=r(o),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,o=on(r,t.pendingProps),o=on(r.type,o),Ud(e,t,r,o,n);case 15:return ah(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:on(r,o),Co(e,t),t.tag=1,Bt(r)?(e=!0,zo(t)):e=!1,ai(t,n),nh(t,r,o),ru(t,r,o,n),ou(null,t,r,!0,e,n);case 19:return ch(e,t,n);case 22:return oh(e,t,n)}throw Error(ae(156,t.tag))};function Eh(e,t){return Jf(e,t)}function Og(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new Og(e,t,n,r)}function uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zg(e){if(typeof e=="function")return uc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tu)return 11;if(e===_u)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Eo(e,t,n,r,o,s){var c=2;if(r=e,typeof e=="function")uc(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case Vr:return kr(n.children,o,s,t);case Nu:c=8,o|=8;break;case Nl:return e=Qt(12,n,t,o|2),e.elementType=Nl,e.lanes=s,e;case Tl:return e=Qt(13,n,t,o),e.elementType=Tl,e.lanes=s,e;case _l:return e=Qt(19,n,t,o),e.elementType=_l,e.lanes=s,e;case Bf:return ds(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rf:c=10;break e;case Mf:c=9;break e;case Tu:c=11;break e;case _u:c=14;break e;case Wn:c=16,r=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=Qt(c,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function kr(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function ds(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=Bf,e.lanes=n,e.stateNode={isHidden:!1},e}function wl(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function bl(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tl(0),this.expirationTimes=tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function cc(e,t,n,r,o,s,c,p,m){return e=new Lg(e,t,n,p,m),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Qt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qu(s),e}function $g(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Nh(e){if(!e)return rr;e=e._reactInternals;e:{if(_r(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(Bt(n))return Np(e,n,t)}return t}function Th(e,t,n,r,o,s,c,p,m){return e=cc(n,r,!0,e,o,s,c,p,m),e.context=Nh(null),n=e.current,r=Nt(),o=er(n),s=Tn(r,o),s.callback=t??null,Zn(n,s,o),e.current.lanes=o,ga(e,o,r),It(e,r),e}function fs(e,t,n,r){var o=t.current,s=Nt(),c=er(o);return n=Nh(n),t.context===null?t.context=n:t.pendingContext=n,t=Tn(s,c),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zn(o,t,c),e!==null&&(dn(e,o,c,s),wo(e,o,c)),c}function Zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dc(e,t){rf(e,t),(e=e.alternate)&&rf(e,t)}function Wg(){return null}var _h=typeof reportError=="function"?reportError:function(e){console.error(e)};function fc(e){this._internalRoot=e}ps.prototype.render=fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));fs(e,t,null,null)};ps.prototype.unmount=fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nr(function(){fs(null,e,null,null)}),t[An]=null}};function ps(e){this._internalRoot=e}ps.prototype.unstable_scheduleHydration=function(e){if(e){var t=op();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vn.length&&t!==0&&t<Vn[n].priority;n++);Vn.splice(n,0,e),n===0&&lp(e)}};function pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function af(){}function Gg(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var y=Zo(c);s.call(y)}}var c=Th(t,r,e,0,null,!1,!1,"",af);return e._reactRootContainer=c,e[An]=c.current,oa(e.nodeType===8?e.parentNode:e),Nr(),c}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var p=r;r=function(){var y=Zo(m);p.call(y)}}var m=cc(e,0,!1,null,null,!1,!1,"",af);return e._reactRootContainer=m,e[An]=m.current,oa(e.nodeType===8?e.parentNode:e),Nr(function(){fs(t,m,n,r)}),m}function ms(e,t,n,r,o){var s=n._reactRootContainer;if(s){var c=s;if(typeof o=="function"){var p=o;o=function(){var m=Zo(c);p.call(m)}}fs(t,c,e,o)}else c=Gg(n,t,e,o,r);return Zo(c)}ip=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$i(t.pendingLanes);n!==0&&(Du(t,n|1),It(t,rt()),!(Pe&6)&&(hi=rt()+500,or()))}break;case 13:Nr(function(){var r=Fn(e,1);if(r!==null){var o=Nt();dn(r,e,1,o)}}),dc(e,1)}};Pu=function(e){if(e.tag===13){var t=Fn(e,134217728);if(t!==null){var n=Nt();dn(t,e,134217728,n)}dc(e,134217728)}};ap=function(e){if(e.tag===13){var t=er(e),n=Fn(e,t);if(n!==null){var r=Nt();dn(n,e,t,r)}dc(e,t)}};op=function(){return Oe};sp=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}};zl=function(e,t,n){switch(t){case"input":if(Dl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=as(r);if(!o)throw Error(ae(90));Of(r),Dl(r,o)}}}break;case"textarea":Lf(e,n);break;case"select":t=n.value,t!=null&&ti(e,!!n.multiple,t,!1)}};qf=oc;Hf=Nr;var Vg={usingClientEntryPoint:!1,Events:[va,Hr,as,Uf,Kf,oc]},Bi={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xf(e),e===null?null:e.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||Wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lo.isDisabled&&lo.supportsFiber)try{ts=lo.inject(Ug),wn=lo}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vg;Gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(t))throw Error(ae(200));return $g(e,t,null,n)};Gt.createRoot=function(e,t){if(!pc(e))throw Error(ae(299));var n=!1,r="",o=_h;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=cc(e,1,!1,null,null,n,!1,r,o),e[An]=t.current,oa(e.nodeType===8?e.parentNode:e),new fc(t)};Gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=Xf(t),e=e===null?null:e.stateNode,e};Gt.flushSync=function(e){return Nr(e)};Gt.hydrate=function(e,t,n){if(!hs(t))throw Error(ae(200));return ms(null,e,t,!0,n)};Gt.hydrateRoot=function(e,t,n){if(!pc(e))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",c=_h;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=Th(t,null,e,1,n??null,o,!1,s,c),e[An]=t.current,oa(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ps(t)};Gt.render=function(e,t,n){if(!hs(t))throw Error(ae(200));return ms(null,e,t,!1,n)};Gt.unmountComponentAtNode=function(e){if(!hs(e))throw Error(ae(40));return e._reactRootContainer?(Nr(function(){ms(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};Gt.unstable_batchedUpdates=oc;Gt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!hs(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return ms(e,t,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function Ah(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ah)}catch(e){console.error(e)}}Ah(),Af.exports=Gt;var Kg=Af.exports,Fh,of=Kg;Fh=of.createRoot,of.hydrateRoot;function qg({userProgress:e,currentProfile:t,onStartBrushing:n,onViewCollection:r,onViewSettings:o,onSwitchProfile:s}){return u.jsxs("div",{className:"flex flex-col items-center justify-between h-full p-6 text-center",children:[u.jsxs("div",{className:"w-full flex justify-between items-center",children:[u.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-purple-800/50 hover:bg-purple-700/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:t.avatarColor},children:t.name.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-white font-medium",children:t.name}),u.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]}),u.jsx("button",{onClick:o,className:"p-2 text-2xl text-purple-300 hover:text-white transition-colors","aria-label":"Settings",children:""})]}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[u.jsx("div",{className:"animate-bounce-gentle",children:u.jsx("div",{className:"text-8xl mb-4",children:""})}),u.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-500 bg-clip-text text-transparent",children:"Sparkle Brush!"}),u.jsx("p",{className:"text-xl text-purple-200 max-w-xs",children:"Make your teeth sparkle and catch amazing creatures!"}),u.jsxs("div",{className:"flex gap-4 mt-4 text-lg",children:[u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),u.jsx("div",{className:"text-sm text-purple-300",children:"Day Streak"})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.capturedCreatures.length}),u.jsx("div",{className:"text-sm text-purple-300",children:"Creatures"})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.totalSessions}),u.jsx("div",{className:"text-sm text-purple-300",children:"Sessions"})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs pb-8",children:[u.jsx("button",{onClick:n,className:"w-full py-5 px-8 text-2xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg animate-button-glow active:scale-95 transition-transform",children:"Start Brushing! "}),u.jsx("button",{onClick:r,className:"w-full py-3 px-6 text-lg font-semibold text-purple-200 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"My Collection "})]})]})}const Dh=k.createContext(null);function Hg({children:e}){const t=k.useRef(null),n=k.useRef(null),r=k.useRef(null),o=k.useRef(!1),s=k.useRef(null),[c,p]=k.useState(null),[m,y]=k.useState(!1),[j,S]=k.useState(null),E=k.useCallback(v=>{const b=v||t.current,I=r.current;if(console.log("[CameraContext] attachStreamToVideo called:",{hasVideo:!!b,hasStream:!!I,videoId:b==null?void 0:b.id,streamActive:I==null?void 0:I.active,streamTracks:I==null?void 0:I.getTracks().map(K=>({kind:K.kind,enabled:K.enabled,readyState:K.readyState})),isSameAsLastAttached:b===s.current}),!b||!I)return console.warn("[CameraContext] Video or stream not available"),!1;if(b.srcObject===I&&b===s.current)return console.log("[CameraContext] Stream already attached to this video element"),b.readyState>=2&&!b.paused&&y(!0),!0;try{console.log("[CameraContext] Attaching stream to video element..."),b.srcObject=I,s.current=b;const K=()=>{console.log("[CameraContext] Video can play, attempting to play..."),b.play().then(()=>{console.log("[CameraContext] Video playing successfully"),y(!0)}).catch(L=>{console.error("[CameraContext] Error playing video:",L)})};return b.oncanplay=K,b.onloadeddata=K,b.readyState>=3?K():b.load(),b.onerror=()=>{console.error("[CameraContext] Video element error"),S("Video element error")},!0}catch(K){return console.error("[CameraContext] Error attaching stream:",K),!1}},[]),G=k.useCallback(async()=>{if(o.current){console.log("startCamera already in progress, skipping...");return}if(r.current&&m){console.log("Camera already running and ready");return}if(r.current&&t.current){console.log("Stream exists, reattaching..."),E();return}if(r.current&&!t.current){console.log("Stream exists but no video element, waiting...");return}o.current=!0;try{S(null),y(!1),console.log("Requesting camera access...");const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("Camera access granted, tracks:",v.getVideoTracks().length),r.current=v,p(v),setTimeout(()=>{E(),o.current=!1},100)}catch(v){o.current=!1;let b="Failed to access camera";v instanceof Error&&(v.name==="NotAllowedError"?b="Camera permission denied. Please allow camera access.":v.name==="NotFoundError"?b="No camera found on this device.":v.name==="NotReadableError"?b="Camera is being used by another app.":b=v.message),S(b),console.error("Camera error:",v)}},[m,E]);k.useEffect(()=>{var v;console.log("[CameraContext] Stream/video effect:",{hasStream:!!c,hasVideoRef:!!t.current,videoSrcObject:!!((v=t.current)!=null&&v.srcObject),isReady:m}),!(!c||!t.current)&&(t.current.srcObject||(console.log("[CameraContext] Effect: video element needs stream attached"),E()))},[c,E,m]),k.useEffect(()=>{if(!c||m)return;const v=t.current;if(!v)return;const b=()=>v.readyState>=2&&v.videoWidth>0&&!v.paused?(console.log("Polling detected video is ready"),y(!0),!0):!1;if(b())return;const I=setInterval(()=>{b()&&clearInterval(I)},200),K=setTimeout(()=>{clearInterval(I)},5e3);return()=>{clearInterval(I),clearTimeout(K)}},[c,m]);const Y=k.useCallback(()=>{console.log("Stopping camera..."),o.current=!1,r.current&&(r.current.getTracks().forEach(v=>{v.stop()}),r.current=null),p(null),y(!1),t.current&&(t.current.srcObject=null)},[]),M=k.useCallback(v=>{console.log("[CameraContext] registerVideoElement called:",{hasVideo:!!v,hasStream:!!r.current,isDifferentElement:v!==s.current}),v&&(t.current=v,r.current&&v!==s.current&&(console.log("[CameraContext] New video element detected, re-attaching stream..."),y(!1),E(v)))},[E]),ee=k.useCallback(()=>{if(!t.current)return null;const v=t.current;if(v.videoWidth===0||v.videoHeight===0)return null;n.current||(n.current=document.createElement("canvas"));const b=n.current;b.width=v.videoWidth,b.height=v.videoHeight;const I=b.getContext("2d");return I?(I.drawImage(v,0,0),b.toDataURL("image/jpeg",.8)):null},[]),C=k.useCallback(async v=>{if(!t.current)return null;const b=t.current;if(b.videoWidth===0||b.videoHeight===0)return null;const I=document.createElement("canvas");I.width=b.videoWidth,I.height=b.videoHeight;const K=I.getContext("2d");if(!K)return null;if(K.save(),K.translate(I.width,0),K.scale(-1,1),K.drawImage(b,0,0),K.restore(),v&&v.imageUrl)try{const L=new Image;L.crossOrigin="anonymous",await new Promise((H,X)=>{L.onload=()=>H(),L.onerror=X,L.src=v.imageUrl});const B=b.videoWidth,V=b.videoHeight,{containerWidth:q,containerHeight:$,facePosition:D}=v,J=q/B,ne=$/V;let pe,xe,Z;if(D&&q>0&&$>0){const H=50/J,X=q*.25/J,oe=D.width;pe=Math.max(H,Math.min(X,oe*.5)),xe=B/2;const we=D.y,Ce=pe*.55;Z=Math.max(5/ne,we-Ce)}else pe=B*.2,xe=B/2,Z=V*.1;const de=pe*(L.height/L.width);K.drawImage(L,xe-pe/2,Z,pe,de)}catch(L){console.error("Failed to load hat image for capture:",L)}return I.toDataURL("image/jpeg",.8)},[]);return k.useEffect(()=>()=>{r.current&&r.current.getTracks().forEach(v=>v.stop())},[]),u.jsx(Dh.Provider,{value:{videoRef:t,stream:c,isReady:m,error:j,startCamera:G,stopCamera:Y,captureFrame:ee,captureFrameWithHat:C,registerVideoElement:M},children:e})}function gs(){const e=k.useContext(Dh);if(!e)throw new Error("useSharedCamera must be used within a CameraProvider");return e}function Yg({onConfirm:e,onCancel:t}){const{isReady:n,error:r,startCamera:o,stopCamera:s,registerVideoElement:c}=gs(),[p,m]=k.useState(!1),[y,j]=k.useState(!1),S=k.useRef(!1),E=k.useRef(null),G=k.useCallback(C=>{console.log("[CameraCheck] Video ref callback:",{hasElement:!!C}),E.current=C,C&&c(C)},[c]);k.useEffect(()=>{S.current||(S.current=!0,o())},[o]),k.useEffect(()=>{const C=setTimeout(()=>{m(!0)},3e3);return()=>clearTimeout(C)},[]),k.useEffect(()=>{const C=()=>{const b=E.current;b&&b.videoWidth>0&&b.videoHeight>0&&!b.paused&&j(!0)},v=setInterval(C,200);return C(),()=>clearInterval(v)},[]);const Y=()=>{s(),t()},M=()=>{S.current=!1,s(),setTimeout(()=>{S.current=!0,o()},500)},ee=n||y;return u.jsxs("div",{className:"flex flex-col h-full p-6",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Camera Check! "}),u.jsx("p",{className:"text-purple-200",children:"Make sure you can see yourself below"})]}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-purple-900/50 rounded-2xl overflow-hidden mb-4",children:[u.jsx("video",{ref:G,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),!ee&&!r&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-purple-900/80",children:[u.jsx("div",{className:"text-4xl mb-4 animate-bounce-gentle",children:""}),u.jsx("div",{className:"text-lg text-purple-200 animate-pulse",children:"Starting camera..."}),u.jsx("div",{className:"text-sm text-purple-300 mt-2",children:"Please allow camera access when prompted"})]}),r&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/80 p-4",children:[u.jsx("div",{className:"text-4xl mb-4",children:""}),u.jsx("div",{className:"text-lg font-bold text-white mb-2",children:"Camera Error"}),u.jsx("div",{className:"text-sm text-red-200 text-center mb-4",children:r}),u.jsxs("div",{className:"text-xs text-red-300 text-center",children:["Please check that:",u.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[u.jsx("li",{children:"Camera permissions are enabled"}),u.jsx("li",{children:"No other app is using the camera"}),u.jsx("li",{children:"Your browser supports camera access"})]})]})]}),ee&&u.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:u.jsxs("div",{className:"bg-green-600/90 rounded-full px-4 py-2 text-sm text-white flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Camera is working!"]})})]}),ee&&u.jsx("div",{className:"text-center text-purple-200 text-sm mb-4",children:"Can you see yourself? "})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[ee&&u.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Yes, I can see myself! "}),p&&!ee&&!r&&u.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Continue Anyway "}),r&&u.jsx("button",{onClick:M,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Try Again "}),u.jsx("button",{onClick:Y,className:"w-full py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"Go Back"})]})]})}const yn="/vibe-brushing/",si=[{id:"crown",name:"Royal Crown",imageUrl:`${yn}creatures/hat-crown.png`,unlockCondition:"starter"},{id:"party",name:"Party Hat",imageUrl:`${yn}creatures/hat-party.png`,unlockCondition:"starter"},{id:"wizard",name:"Wizard Hat",imageUrl:`${yn}creatures/hat-wizard.png`,unlockCondition:"sessions",unlockThreshold:10},{id:"cowboy",name:"Cowboy Hat",imageUrl:`${yn}creatures/hat-cowboy.png`,unlockCondition:"sessions",unlockThreshold:25},{id:"chef",name:"Chef Hat",imageUrl:`${yn}creatures/hat-chef.png`,unlockCondition:"sessions",unlockThreshold:50},{id:"astronaut",name:"Space Helmet",imageUrl:`${yn}creatures/hat-astronaut.png`,unlockCondition:"sessions",unlockThreshold:100},{id:"pirate",name:"Pirate Hat",imageUrl:`${yn}creatures/hat-pirate.png`,unlockCondition:"streak",unlockThreshold:7},{id:"princess",name:"Princess Tiara",imageUrl:`${yn}creatures/hat-princess.png`,unlockCondition:"streak",unlockThreshold:30},{id:"unicorn-horn",name:"Unicorn Horn",imageUrl:`${yn}creatures/hat-unicorn-horn.png`,unlockCondition:"creature",unlockThreshold:5},{id:"dragon-horns",name:"Dragon Horns",imageUrl:`${yn}creatures/hat-dragon-horns.png`,unlockCondition:"creature",unlockThreshold:10}];function Qg(e,t,n){return si.filter(r=>{switch(r.unlockCondition){case"starter":return!0;case"sessions":return e>=(r.unlockThreshold||0);case"streak":return t>=(r.unlockThreshold||0);case"creature":return n>=(r.unlockThreshold||0);default:return!1}})}function Ph({hatId:e,size:t}){const n=si.find(r=>r.id===e);return n?u.jsx("img",{src:n.imageUrl,alt:n.name,width:t,height:t,style:{objectFit:"contain",imageRendering:"auto"}}):null}function Xg({userProgress:e,onSelect:t,onBack:n}){const r=Qg(e.totalSessions,e.currentStreak,e.capturedCreatures.length),o=new Set(r.map(s=>s.id));return u.jsxs("div",{className:"flex flex-col h-full p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("button",{onClick:n,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Choose Your Hat!"}),u.jsx("div",{className:"w-16"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:()=>t(null),className:"aspect-square bg-purple-800/30 rounded-2xl flex flex-col items-center justify-center border-2 border-dashed border-purple-500/50 active:scale-95 transition-transform",children:[u.jsx("div",{className:"text-3xl mb-1",children:""}),u.jsx("div",{className:"text-xs text-purple-300",children:"No Hat"})]}),si.map(s=>{const c=o.has(s.id);return u.jsxs("button",{onClick:()=>c&&t(s),disabled:!c,className:`aspect-square rounded-2xl flex flex-col items-center justify-center transition-all p-2 ${c?"bg-purple-800/50 active:scale-95":"bg-purple-900/30 opacity-50 cursor-not-allowed"}`,children:[u.jsx("div",{className:`flex-1 flex items-center justify-center w-full ${c?"":"grayscale"}`,children:c?u.jsx(Ph,{hatId:s.id,size:60}):u.jsx("span",{className:"text-4xl",children:""})}),u.jsx("div",{className:"text-xs text-center px-1 truncate w-full mt-1",children:c?s.name:Zg(s)})]},s.id)})]})}),u.jsx("button",{onClick:()=>t(null),className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Start Without Hat"})]})}function Zg(e){switch(e.unlockCondition){case"sessions":return`${e.unlockThreshold} sessions`;case"streak":return`${e.unlockThreshold} day streak`;case"creature":return`${e.unlockThreshold} creatures`;default:return"Locked"}}const Rh={id:"faceZone",label:"Face",x:.3,y:.25,w:.4,h:.5},Ii=[Rh];class Jg{constructor(){St(this,"canvas");St(this,"ctx");St(this,"previousFrame",null);St(this,"pixelThreshold",20);St(this,"motionThresholdPercent",2.5);St(this,"frameCount",0);St(this,"debugMode",!1);St(this,"lastDebugInfo",null);St(this,"smoothedFaceCenter",null);St(this,"smoothingFactor",.15);this.canvas=document.createElement("canvas");const t=this.canvas.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Could not get canvas context");this.ctx=t}getZonesForFace(t,n,r){if(!t||n===0||r===0)return[Rh];const o=t.x/n,s=t.y/r,c=t.width/n,p=t.height/r,m={x:o,y:s+p*.5,w:c,h:p};this.smoothedFaceCenter?this.smoothedFaceCenter={x:this.smoothedFaceCenter.x+(m.x-this.smoothedFaceCenter.x)*this.smoothingFactor,y:this.smoothedFaceCenter.y+(m.y-this.smoothedFaceCenter.y)*this.smoothingFactor,w:this.smoothedFaceCenter.w+(m.w-this.smoothedFaceCenter.w)*this.smoothingFactor,h:this.smoothedFaceCenter.h+(m.h-this.smoothedFaceCenter.h)*this.smoothingFactor}:this.smoothedFaceCenter=m;const y=this.smoothedFaceCenter,j=Math.max(.3,Math.min(.5,y.w*1.4)),S=Math.max(.35,Math.min(.55,y.h*1.2)),E=y.x-j/2,G=y.y-S/2,Y=(C,v,b)=>Math.max(v,Math.min(b,C)),M=Y(E,.02,1-j-.02),ee=Y(G,.05,1-S-.05);return[{id:"faceZone",label:"Face",x:M,y:ee,w:j,h:S}]}setDebugMode(t){this.debugMode=t}getDebugInfo(){return this.lastDebugInfo}getCurrentZones(t,n,r){return this.getZonesForFace(t,n,r)}getFaceRegionNormalized(t,n,r){if(!t)return null;const o=.25,s=(t.x-t.width/2)/(n/o),c=t.y/(r/o),p=t.width/(n/o),m=t.height/(r/o);return{x:s,y:c,w:p,h:m}}isInFaceCore(t,n,r,o,s){const c=this.getFaceRegionNormalized(r,o,s);if(!c)return!1;const p=c.x+c.w*.15,m=c.y+c.h*.1,y=c.w*.7,j=c.h*.5;return t>=p&&t<=p+y&&n>=m&&n<=m+j}isInBrushingRegion(t,n,r,o,s){const c=this.getFaceRegionNormalized(r,o,s);if(!c)return n>.2;const p=c.x-c.w*1,m=c.y-c.h*.1,y=c.w*3,j=c.h*2.5;return t>=p&&t<=p+y&&n>=m&&n<=m+j}getBrushingRegion(t,n,r){const s=n*.25,c=r*.25,p=this.getFaceRegionNormalized(t,s,c);if(!p)return{x:0,y:.2*r,width:n,height:.8*r};const m=p.x-p.w*1,y=p.y-p.h*.1,j=p.w*3,S=p.h*2.5;return{x:Math.max(0,m*n),y:Math.max(0,y*r),width:Math.min(j*n,n),height:Math.min(S*r,r)}}detectMotion(t,n=null){this.frameCount++;const r=this.getZonesForFace(n,t.videoWidth,t.videoHeight);if(!t.videoWidth||!t.videoHeight)return r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));const o=.25,s=Math.floor(t.videoWidth*o),c=Math.floor(t.videoHeight*o);(this.canvas.width!==s||this.canvas.height!==c)&&(this.canvas.width=s,this.canvas.height=c,this.previousFrame=null);try{this.ctx.drawImage(t,0,0,s,c)}catch(E){return console.error("[MotionDetector] Failed to draw video frame:",E),r.map(G=>({zoneId:G.id,motionLevel:0,hasMotion:!1}))}const p=this.ctx.getImageData(0,0,s,c);if(!this.previousFrame)return this.previousFrame=p,r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));let m=0,y=!1;const j=[],S=r.map(E=>{const G=Math.floor(E.x*s),Y=Math.floor(E.y*c),M=Math.floor(E.w*s),ee=Math.floor(E.h*c);let C=0,v=0;for(let K=Y;K<Y+ee&&K<c;K++)for(let L=G;L<G+M&&L<s;L++){const B=L/s,V=K/c;if(this.isInFaceCore(B,V,n,s,c)||!this.isInBrushingRegion(B,V,n,s,c))continue;const q=(K*s+L)*4,$=Math.abs(p.data[q]-this.previousFrame.data[q]),D=Math.abs(p.data[q+1]-this.previousFrame.data[q+1]),J=Math.abs(p.data[q+2]-this.previousFrame.data[q+2]),ne=($+D+J)/3;ne>this.pixelThreshold&&(C++,m+=ne),v++}const b=v>0?C/v*100:0,I=b>this.motionThresholdPercent;return I&&(y=!0),this.debugMode&&j.push({id:E.id,bounds:{x:E.x,y:E.y,width:E.w,height:E.h},motionLevel:Math.min(b*2,100),hasMotion:I,motionPixels:C,totalPixels:v}),{zoneId:E.id,motionLevel:Math.min(b*2,100),hasMotion:I}});if(this.debugMode){const E=this.getBrushingRegion(n,s/.25,c/.25);this.lastDebugInfo={faceRegion:n,brushingRegion:E,zones:j,frameMotionTotal:m,handMotionDetected:y}}if(this.previousFrame=p,this.frameCount%20===0){const E=S.filter(G=>G.hasMotion).length;console.log("[MotionDetector] Frame",this.frameCount,"- Active zones:",E,"- Hand motion:",y,"- Total motion:",m.toFixed(0))}return S}reset(){this.previousFrame=null,this.frameCount=0,this.smoothedFaceCenter=null}}function Mh(e={}){const{targetCleaningTime:t=20,detectionInterval:n=100,decayRate:r=.4,debugMode:o=!1}=e,s=k.useRef(null),c=k.useRef(null),p=k.useRef(null),m=k.useRef({}),y=k.useRef({}),j=k.useRef(null),S=k.useRef(o),[E,G]=k.useState(()=>Ii.map($=>({zoneId:$.id,cleaningProgress:0,isComplete:!1}))),[Y,M]=k.useState(()=>Ii.map($=>({zoneId:$.id,motionLevel:0,hasMotion:!1}))),ee=k.useCallback($=>{j.current=$},[]),C=k.useCallback($=>{S.current=$,s.current&&s.current.setDebugMode($)},[]),v=k.useCallback(()=>{var $;return(($=s.current)==null?void 0:$.getDebugInfo())??null},[]),b=k.useCallback(()=>{const $=Ii.map(D=>{const ne=(m.current[D.id]||0)/t*100,pe=Math.min(ne,100);return{zoneId:D.id,cleaningProgress:pe,isComplete:pe>=100}});G($)},[t]),I=k.useCallback(()=>{if(!s.current||!c.current)return;const $=c.current;if($.paused&&$.srcObject&&$.play().catch(()=>{}),$.readyState<2||$.videoWidth===0)return;const D=s.current.detectMotion($,j.current);M(D),D.forEach(J=>{const ne=m.current[J.zoneId]||0;if(J.hasMotion){y.current[J.zoneId]=0;const pe=n/1e3*(J.motionLevel/60);m.current[J.zoneId]=ne+pe}else{const pe=(y.current[J.zoneId]||0)+1;if(y.current[J.zoneId]=pe,pe>5){const xe=n/1e3*r;m.current[J.zoneId]=Math.max(0,ne-xe)}}}),b()},[n,b,r]),K=k.useCallback($=>{console.log("[MotionDetection] startDetection called:",{videoReadyState:$.readyState,videoWidth:$.videoWidth,videoHeight:$.videoHeight,srcObject:!!$.srcObject,paused:$.paused}),$.paused&&(console.log("[MotionDetection] Video is paused, attempting to play..."),$.play().then(()=>{console.log("[MotionDetection] Video now playing")}).catch(D=>{console.error("[MotionDetection] Failed to play video:",D)})),s.current||(s.current=new Jg),s.current.setDebugMode(S.current),c.current=$,p.current&&clearInterval(p.current),p.current=window.setInterval(I,n),console.log("[MotionDetection] Detection interval started")},[I,n]),L=k.useCallback(()=>{p.current&&(clearInterval(p.current),p.current=null)},[]),B=k.useCallback(()=>{var $;m.current={},y.current={},($=s.current)==null||$.reset(),G(Ii.map(D=>({zoneId:D.id,cleaningProgress:0,isComplete:!1}))),M(Ii.map(D=>({zoneId:D.id,motionLevel:0,hasMotion:!1})))},[]);k.useEffect(()=>()=>{p.current&&clearInterval(p.current)},[]);const V=E.reduce(($,D)=>$+D.cleaningProgress,0)/E.length,q=E.every($=>$.isComplete);return{zoneProgress:E,motionResults:Y,overallProgress:V,isComplete:q,startDetection:K,stopDetection:L,reset:B,setFaceRegion:ee,setDebugMode:C,getDebugInfo:v}}const ey="modulepreload",ty=function(e){return"/vibe-brushing/"+e},sf={},lf=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=ty(m),m in sf)return;sf[m]=!0;const y=m.endsWith(".css"),j=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${j}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":ey,y||(S.as="script"),S.crossOrigin="",S.href=m,p&&S.setAttribute("nonce",p),document.head.appendChild(S),y)return new Promise((E,G)=>{S.addEventListener("load",E),S.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return o.then(c=>{for(const p of c||[])p.status==="rejected"&&s(p.reason);return t().catch(s)})};function Bh(){const[e,t]=k.useState(null),[n,r]=k.useState(!1),[o,s]=k.useState(!0),c=k.useRef(null),p=k.useRef(null),m=k.useRef(null),y=k.useRef("fallback"),j=k.useRef(null),S=k.useRef(null),E=k.useRef(null),G=k.useRef(null),Y=k.useRef(!1),M=k.useRef(!1),ee=k.useRef(null),C=k.useCallback(async()=>{if(ee.current)return ee.current;const B=async()=>{if(r(!0),console.log("[FaceTracking] Initializing detector..."),"FaceDetector"in window&&window.FaceDetector)try{const V=new window.FaceDetector({maxDetectedFaces:1,fastMode:!0});return await V.detect(document.createElement("video")),p.current=V,y.current="native",r(!1),console.log("[FaceTracking] Using native FaceDetector API"),!0}catch(V){console.warn("[FaceTracking] Native FaceDetector not available:",V)}try{console.log("[FaceTracking] Loading TensorFlow.js...");const V=await lf(()=>import("./index-FC6HHMNL.js"),__vite__mapDeps([0,1]));await V.ready();try{await V.setBackend("webgl"),console.log("[FaceTracking] Using WebGL backend")}catch{console.log("[FaceTracking] WebGL failed, trying CPU backend"),await V.setBackend("cpu")}console.log("[FaceTracking] Loading face detection model...");const q=await lf(()=>import("./face-landmarks-detection.esm-DJkdRMTC.js"),__vite__mapDeps([2,1])),$=q.SupportedModels.MediaPipeFaceMesh,D=await q.createDetector($,{runtime:"tfjs",refineLandmarks:!1,maxFaces:1});return m.current=D,y.current="tfjs",r(!1),console.log("[FaceTracking] Using TensorFlow.js FaceMesh"),!0}catch(V){return console.warn("[FaceTracking] TensorFlow.js face tracking failed:",V),y.current="fallback",r(!1),s(!1),console.log("[FaceTracking] Using center-of-frame fallback"),!0}};return ee.current=B(),ee.current},[]),v=k.useCallback(B=>{const V=G.current;if(!V)return G.current=B,B;const q=Math.abs(B.x-V.x),$=Math.abs(B.y-V.y),D=q+$;if(D<15)return V;const J=D>50?.7:D>25?.4:.2,ne={x:V.x+(B.x-V.x)*J,y:V.y+(B.y-V.y)*J,width:V.width+(B.width-V.width)*.2,height:V.height+(B.height-V.height)*.2,rotation:B.rotation};return G.current=ne,ne},[]),b=k.useCallback(B=>{var tn;S.current||(S.current=document.createElement("canvas"));const V=S.current,q=.2,$=Math.floor(B.videoWidth*q),D=Math.floor(B.videoHeight*q);V.width!==$&&(V.width=$),V.height!==D&&(V.height=D);const J=V.getContext("2d",{willReadFrequently:!0});if(!J)return null;J.drawImage(B,0,0,$,D);const ne=J.getImageData(0,0,$,D),pe=ne.data;let xe=0,Z=0,de=0;const H=new Array($).fill(0);let X=0,oe=0;const we=(tn=E.current)==null?void 0:tn.data,Ce=Math.floor(D*.6);for(let Ie=0;Ie<Ce;Ie++)for(let ge=0;ge<$;ge++){const pt=(Ie*$+ge)*4,Ne=pe[pt],et=pe[pt+1],vt=pe[pt+2];if(Ne+et+vt>200){const Ft=1+(1-Ie/Ce);oe+=Ft,X+=Ie*Ft}if(we){const Ft=we[pt],ie=we[pt+1],je=we[pt+2],Se=Math.abs(Ne-Ft)+Math.abs(et-ie)+Math.abs(vt-je);if(Se>40){const ce=Se*(1+(1-Ie/Ce));de+=ce,xe+=ge*ce,Z+=Ie*ce,H[ge]+=Se}}}E.current=ne;const ze=G.current;let Ae;if(de>2e4){const Ie=Math.floor(xe/de),pt=Math.max(...H)*.15;let Ne=Ie,et=Ie;for(let ie=Ie;ie>=0&&Ie-ie<$*.4;ie--)if(H[ie]>=pt)Ne=ie;else if(ie<Ie-5)break;for(let ie=Ie;ie<$&&ie-Ie<$*.4;ie++)if(H[ie]>=pt)et=ie;else if(ie>Ie+5)break;const vt=(et-Ne)/q,At=B.videoWidth*.1,Ft=B.videoWidth*.4;Ae=Math.max(At,Math.min(Ft,vt*1.5)),console.log(`[FaceTracking] Motion: center=${Ie}, span=${vt.toFixed(0)}px  faceW: ${Ae.toFixed(0)}`)}else ze?Ae=ze.width:Ae=B.videoWidth*.2;const Re=B.videoWidth/2;let Le;de>2e4?Le="motion":oe>100?Le="skin":Le="center";let Ue;if(de>2e4){const Ie=Z/de/q;Ue=Math.max(B.videoHeight*.05,Ie*.6)}else if(oe>100){const Ie=X/oe/q;Ue=Math.max(B.videoHeight*.05,Ie*.5)}else Ue=B.videoHeight*.15;return console.log(`[FaceTracking] Fallback (${Le}): x=${Re.toFixed(0)}, y=${Ue.toFixed(0)}, w=${Ae.toFixed(0)}`),{x:Re,y:Ue,width:Ae,height:Ae*1.2,rotation:0}},[]),I=k.useCallback(async()=>{if(!c.current||Y.current)return;const B=c.current;if(!(B.readyState<2||B.videoWidth===0)){Y.current=!0;try{let V=null;if(y.current==="native"&&p.current)try{const q=await p.current.detect(B);if(q.length>0){const $=q[0].boundingBox;V={x:$.x+$.width/2,y:$.y,width:$.width,height:$.height,rotation:0}}}catch(q){console.warn("[FaceTracking] Native detection error:",q)}else if(y.current==="tfjs"&&m.current)try{const q=await m.current.estimateFaces(B);if(q.length!==0){console.log("[FaceTracking] TFJS found",q.length,"face(s)");const $=q[0];console.log("[FaceTracking] TFJS face keys:",Object.keys($));const D=$.box||$.boundingBox;if(D){const J=D.xMin??0,ne=D.yMin??0,pe=D.width??(D.xMax?D.xMax-J:100),xe=D.height??(D.yMax?D.yMax-ne:100);console.log("[FaceTracking] TFJS box:",{xMin:J,yMin:ne,w:pe,h:xe}),V={x:J+pe/2,y:ne,width:Math.min(pe,B.videoWidth*.8),height:Math.min(xe,B.videoHeight*.8),rotation:0}}}}catch(q){console.warn("[FaceTracking] TFJS detection error:",q)}if(V||(V=b(B)),V){const q=v(V);t(q)}else G.current&&t(G.current)}catch(V){console.warn("[FaceTracking] Detection error:",V)}finally{Y.current=!1}}},[b,v]),K=k.useCallback(async B=>{console.log("[FaceTracking] Starting tracking"),c.current=B,M.current=!0,await C();const V=async()=>{if(M.current&&(await I(),M.current)){const q=y.current==="tfjs"?150:100;j.current=window.setTimeout(()=>{requestAnimationFrame(V)},q)}};V()},[C,I]),L=k.useCallback(()=>{console.log("[FaceTracking] Stopping tracking"),M.current=!1,j.current&&(clearTimeout(j.current),j.current=null),G.current=null,t(null)},[]);return k.useEffect(()=>()=>{M.current=!1,j.current&&clearTimeout(j.current)},[]),{facePosition:e,isLoading:n,isSupported:o,startTracking:K,stopTracking:L}}const i={C2:65.41,D2:73.42,E2:82.41,F2:87.31,G2:98,A2:110,B2:123.47,C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,D5:587.33,E5:659.25,F5:698.46,G5:783.99,A5:880,B5:987.77,C6:1046.5,D6:1174.66,E6:1318.51,F6:1396.91,G6:1567.98,Eb2:77.78,Bb2:116.54,Ab3:207.65,Bb3:233.08,Eb4:311.13,Ab4:415.3,Bb4:466.16,Eb5:622.25,Ab5:830.61,Bb5:932.33,Eb6:1244.51,"C#3":138.59,"C#5":554.37,"F#2":92.5,"F#3":185,"F#4":369.99,"F#5":739.99,"F#6":1479.98,"G#4":415.3,"G#5":830.61},ny={grassland:[{tempo:{calm:100,excited:128},melodyCalm:[[i.G4,i.A4,i.B4,i.D5,i.B4,i.A4,i.G4,i.E4],[i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4,i.D4],[i.D4,i.E4,i.G4,i.A4,i.G4,i.E4,i.G4,i.A4]],melodyExcited:[[i.G5,i.A5,i.B5,i.D6,i.B5,i.G5,i.A5,i.B5],[i.E5,i.G5,i.A5,i.B5,i.D6,i.B5,i.A5,i.G5]],bassCalm:[[i.G2,0,i.D3,0,i.G2,0,i.B2,0]],bassExcited:[[i.G2,i.G2,i.D3,i.D3,i.B2,i.B2,i.D3,i.G2]],arpCalm:[[0,4,7,11,12]],arpExcited:[[0,4,7,11,14,11,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:3e3,filterType:"lowpass",attackTime:.01,releaseTime:.3,arpSpeed:1},{tempo:{calm:95,excited:125},melodyCalm:[[i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.G4,i.E4],[i.F4,i.A4,i.C5,i.F5,i.C5,i.A4,i.C5,i.A4],[i.G4,i.B4,i.D5,i.G5,i.D5,i.B4,i.G4,i.D4]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.G5,i.E5,i.C5,i.G5],[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C6]],bassCalm:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],bassExcited:[[i.C3,i.C3,i.G3,i.G3,i.F3,i.F3,i.G3,i.C3]],arpCalm:[[0,4,7,12,16]],arpExcited:[[0,4,7,12,16,19,16,12,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"triangle",vibratoRate:5,vibratoDepth:.004,filterFreq:3200,filterType:"lowpass",attackTime:.015,releaseTime:.35,arpSpeed:1.1},{tempo:{calm:105,excited:132},melodyCalm:[[i.D4,i.E4,i.A4,i.B4,i.A4,i.E4,i.D4,0],[i.E4,i.A4,i.B4,i.D5,i.B4,i.A4,i.E4,0],[i.A4,i.B4,i.D5,i.E5,i.D5,i.B4,i.A4,i.E4]],melodyExcited:[[i.D5,i.E5,i.A5,i.B5,i.D6,i.B5,i.A5,i.E5],[i.E5,i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5]],bassCalm:[[i.D3,0,i.A3,0,i.D3,0,i.E3,0]],bassExcited:[[i.D3,i.D3,i.A3,i.A3,i.E3,i.E3,i.A3,i.D3]],arpCalm:[[0,2,7,9,12]],arpExcited:[[0,2,7,9,12,14,12,9,7,2]],pulseWidth:.4,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:2800,filterType:"lowpass",attackTime:.012,releaseTime:.28,arpSpeed:.95}],coastal:[{tempo:{calm:88,excited:116},melodyCalm:[[i.D4,i.E4,i.A4,0,i.B4,i.A4,i.E4,0],[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,i["F#4"],i.E4],[i["F#4"],i.A4,i.B4,i.D5,i.B4,0,i.A4,i["F#4"]]],melodyExcited:[[i.D5,i.E5,i["F#5"],i.A5,i.B5,i.A5,i["F#5"],i.E5],[i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5,i["F#5"]]],bassCalm:[[i.D2,0,0,i.A2,0,0,i.D2,0]],bassExcited:[[i.D2,0,i.A2,0,i.D2,i.E2,i["F#2"],0]],arpCalm:[[0,4,9,12,16,12,9,4]],arpExcited:[[0,2,4,7,9,12,9,7,4,2]],pulseWidth:.3,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3,vibratoDepth:.008,filterFreq:2500,filterType:"lowpass",attackTime:.05,releaseTime:.5,arpSpeed:1.3},{tempo:{calm:82,excited:110},melodyCalm:[[i.G4,0,i.B4,0,i.D5,i.B4,0,i.G4],[i.A4,0,i.C5,0,i.E5,i.C5,0,i.A4],[i.B4,0,i.D5,0,i["F#5"],i.D5,0,i.B4]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i.C6,i.E6,i.A5,i.E6,i.C6,i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,i.D3,0,0,0]],bassExcited:[[i.G2,0,i.D3,0,i.G2,i.A2,i.B2,0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,14,11,7,4]],pulseWidth:.25,drumStyle:"soft",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.01,filterFreq:2200,filterType:"lowpass",attackTime:.06,releaseTime:.6,arpSpeed:1.5},{tempo:{calm:92,excited:120},melodyCalm:[[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,0,i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],0,i.B4,0,i["G#4"]],[i.A4,i.B4,i["C#5"],i.E5,0,i["C#5"],0,i.B4]],melodyExcited:[[i.E5,i["F#5"],i.A5,i.B5,i["C#6"],i.B5,i.A5,i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,0,0,i.B2,0,0,i.E2,0]],bassExcited:[[i.E2,0,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,2,4,7,9,11,14,11,9,7,4,2]],pulseWidth:.35,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3.5,vibratoDepth:.007,filterFreq:2600,filterType:"lowpass",attackTime:.045,releaseTime:.45,arpSpeed:1.2}],lava:[{tempo:{calm:135,excited:170},melodyCalm:[[i.A3,i.A3,i.C4,i.E4,i.A4,i.E4,i.C4,i.A3],[i.G3,i.G3,i.Bb3,i.D4,i.G4,i.D4,i.Bb3,i.G3],[i.F3,i.F3,i.A3,i.C4,i.F4,i.A4,i.C5,i.A4]],melodyExcited:[[i.A4,i.C5,i.E5,i.A5,i.A5,i.E5,i.C5,i.A4],[i.G4,i.Bb4,i.D5,i.G5,i.G5,i.D5,i.Bb4,i.G4]],bassCalm:[[i.A2,i.A2,i.A2,i.E2,i.A2,i.A2,i.G2,i.E2]],bassExcited:[[i.A2,i.A2,i.A2,i.A2,i.E2,i.E2,i.G2,i.G2]],arpCalm:[[0,3,7,10,12,10,7,3]],arpExcited:[[0,3,7,12,15,19,15,12,7,3,0,3]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:6,vibratoDepth:.002,filterFreq:4500,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.7},{tempo:{calm:145,excited:180},melodyCalm:[[i.E4,i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4],[i.D4,i.D4,i.F4,i.G4,i.A4,i.G4,i.F4,i.D4],[i.C4,i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.C4]],melodyExcited:[[i.E5,i.G5,i.A5,i.B5,i.C6,i.B5,i.A5,i.G5],[i.D5,i.F5,i.G5,i.A5,i.B5,i.A5,i.G5,i.F5]],bassCalm:[[i.E2,i.E2,i.E2,i.G2,i.A2,i.G2,i.E2,i.D2]],bassExcited:[[i.E2,i.E2,i.E2,i.E2,i.G2,i.G2,i.A2,i.A2]],arpCalm:[[0,3,5,7,10,7,5,3]],arpExcited:[[0,3,5,7,10,12,15,12,10,7,5,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:7,vibratoDepth:.0015,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.6},{tempo:{calm:128,excited:165},melodyCalm:[[i.D4,i.F4,i.A4,i.D5,i.A4,i.F4,i.D4,i.A3],[i.C4,i.Eb4,i.G4,i.C5,i.G4,i.Eb4,i.C4,i.G3],[i.Bb3,i.D4,i.F4,i.Bb4,i.F4,i.D4,i.Bb3,i.F3]],melodyExcited:[[i.D5,i.F5,i.A5,i.D6,i.D6,i.A5,i.F5,i.D5],[i.C5,i.Eb5,i.G5,i.C6,i.C6,i.G5,i.Eb5,i.C5]],bassCalm:[[i.D2,i.D2,i.F2,i.A2,i.D2,i.D2,i.C2,i.Bb2]],bassExcited:[[i.D2,i.D2,i.D2,i.F2,i.A2,i.A2,i.C3,i.D3]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,17,15,12,10,7,3]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.0025,filterFreq:4200,filterType:"lowpass",attackTime:.003,releaseTime:.18,arpSpeed:.75}],city:[{tempo:{calm:115,excited:145},melodyCalm:[[i.Eb4,i.G4,i.Bb4,0,i.Eb5,0,i.Bb4,i.G4],[i.F4,i.Ab4,i.C5,0,i.F5,0,i.C5,i.Ab4],[i.G4,i.Bb4,i.D5,i.F5,0,i.D5,i.Bb4,0]],melodyExcited:[[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6],[i.F5,i.Ab5,i.C6,i.F6,i.C6,i.Ab5,i.C6,i.F6]],bassCalm:[[i.Eb2,0,i.Bb2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.Eb2,i.Eb2,i.Bb2,i.Bb2,i.G2,i.G2,i.Bb2,i.Eb2]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,19,22,19,15,12,10,7,3]],pulseWidth:.5,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.2,arpSpeed:.5},{tempo:{calm:120,excited:150},melodyCalm:[[i.A4,0,i["C#5"],i.E5,0,i["C#5"],i.A4,0],[i.B4,0,i["D#5"],i["F#5"],0,i["D#5"],i.B4,0],[i["C#5"],0,i.E5,i["G#5"],0,i.E5,i["C#5"],0]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i.B5,i["F#5"]]],bassCalm:[[i.A2,0,i.E3,0,i.A2,0,i["C#3"],0]],bassExcited:[[i.A2,i.A2,i.E3,i.E3,i["C#3"],i["C#3"],i.E3,i.A2]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,16,19,16,14,11,7,4]],pulseWidth:.4,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:10,vibratoDepth:8e-4,filterFreq:5500,filterType:"lowpass",attackTime:8e-4,releaseTime:.18,arpSpeed:.45},{tempo:{calm:108,excited:138},melodyCalm:[[i.C4,i.Eb4,i.G4,i.C5,0,i.G4,i.Eb4,0],[i.Bb3,i.D4,i.F4,i.Bb4,0,i.F4,i.D4,0],[i.Ab3,i.C4,i.Eb4,i.Ab4,0,i.Eb4,i.C4,0]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.Bb4,i.D5,i.F5,i.Bb5,i.F5,i.D5,i.F5,i.Bb5]],bassCalm:[[i.C2,0,i.G2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,10,15,10,7,3]],arpExcited:[[0,3,7,10,15,19,22,19,15,10,7,3]],pulseWidth:.45,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0012,filterFreq:4800,filterType:"lowpass",attackTime:.002,releaseTime:.22,arpSpeed:.55}],sky:[{tempo:{calm:72,excited:100},melodyCalm:[[i.C5,0,i.G5,0,i.E5,0,i.G5,0],[i.D5,0,i.A5,0,i["F#5"],0,i.A5,0],[i.E5,0,i.B5,0,i["G#5"],0,i.B5,0]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.E6,i.C6,i.G5,i.E5],[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]]],bassCalm:[[i.C3,0,0,0,i.G3,0,0,0]],bassExcited:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],arpCalm:[[0,7,12,19,24,19,12,7]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.25,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"sine",vibratoRate:2,vibratoDepth:.015,filterFreq:2e3,filterType:"lowpass",attackTime:.1,releaseTime:.8,arpSpeed:1.8},{tempo:{calm:68,excited:95},melodyCalm:[[i.G5,0,0,i.D6,0,0,i.B5,0],[i.A5,0,0,i.E6,0,0,i["C#6"],0],[i.B5,0,0,i["F#6"],0,0,i["D#6"],0]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,0,0,i.D3,0]],bassExcited:[[i.G2,0,0,i.D3,0,i.G2,0,i.B2]],arpCalm:[[0,5,12,17,24,17,12,5]],arpExcited:[[0,5,7,12,17,19,24,19,17,12,7,5]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:1.5,vibratoDepth:.02,filterFreq:1800,filterType:"lowpass",attackTime:.12,releaseTime:1,arpSpeed:2},{tempo:{calm:78,excited:105},melodyCalm:[[i.F5,0,i.A5,0,i.C6,0,i.A5,0],[i.G5,0,i.B5,0,i.D6,0,i.B5,0],[i.A5,0,i["C#6"],0,i.E6,0,i["C#6"],0]],melodyExcited:[[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C5],[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5]],bassCalm:[[i.F3,0,0,0,i.C3,0,0,0]],bassExcited:[[i.F3,0,i.C3,0,i.F3,0,i.A3,0]],arpCalm:[[0,4,7,12,16,19,16,12,7,4]],arpExcited:[[0,4,7,12,16,19,24,28,24,19,16,12,7,4]],pulseWidth:.3,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.012,filterFreq:2200,filterType:"lowpass",attackTime:.08,releaseTime:.7,arpSpeed:1.6}]},ry={grassland:[{tempo:{calm:108,excited:138},melodyCalm:[[i.E4,i["F#4"],i["G#4"],i.B4,i.E5,i.B4,i["G#4"],i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],i.E5,i["C#5"],i.B4,i["G#4"]]],melodyExcited:[[i.E5,i["F#5"],i["G#5"],i.B5,i.E6,i.B5,i["G#5"],i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,i.E2,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],bassExcited:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,8,11,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,16,11,8,4]],pulseWidth:.4,drumStyle:"punchy",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.004,filterFreq:3500,filterType:"lowpass",attackTime:.008,releaseTime:.25,arpSpeed:.9}],coastal:[{tempo:{calm:95,excited:125},melodyCalm:[[i.B4,0,i["D#5"],i["F#5"],0,i.B5,i["F#5"],0],[i["C#5"],0,i.E5,i["G#5"],0,i["C#6"],i["G#5"],0]],melodyExcited:[[i.B5,i["D#6"],i["F#6"],i.B5,i["F#6"],i["D#6"],i.B5,i["F#5"]],[i["C#6"],i.E6,i["G#5"],i["C#6"],i["G#5"],i.E6,i["C#6"],i["G#5"]]],bassCalm:[[i.B2,0,0,i["F#3"],0,0,i.B2,0]],bassExcited:[[i.B2,0,i["F#3"],0,i.B2,i["C#3"],i["D#3"],0]],arpCalm:[[0,4,8,11,16,20,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,23,20,16,11,8,4]],pulseWidth:.35,drumStyle:"punchy",melodyWave:"triangle",bassWave:"sine",arpWave:"triangle",vibratoRate:4,vibratoDepth:.01,filterFreq:2800,filterType:"lowpass",attackTime:.04,releaseTime:.4,arpSpeed:1.1}],lava:[{tempo:{calm:150,excited:185},melodyCalm:[[i.B3,i.D4,i["F#4"],i.B4,i.D5,i.B4,i["F#4"],i.D4],[i.A3,i.C4,i.E4,i.A4,i.C5,i.A4,i.E4,i.C4]],melodyExcited:[[i.B4,i.D5,i["F#5"],i.B5,i.D6,i.B5,i["F#5"],i.D5],[i.A4,i.C5,i.E5,i.A5,i.C6,i.A5,i.E5,i.C5]],bassCalm:[[i.B2,i.B2,i["F#2"],i["F#2"],i.D2,i.D2,i.A2,i.A2]],bassExcited:[[i.B2,i.B2,i.B2,i["F#2"],i.D2,i.D2,i.D2,i.A2]],arpCalm:[[0,3,6,9,12,9,6,3]],arpExcited:[[0,3,6,9,12,15,18,15,12,9,6,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5500,filterType:"lowpass",attackTime:.001,releaseTime:.08,arpSpeed:.5}],city:[{tempo:{calm:128,excited:158},melodyCalm:[[i["F#4"],i.A4,i["C#5"],0,i["F#5"],0,i["C#5"],i.A4],[i["G#4"],i.B4,i["D#5"],0,i["G#5"],0,i["D#5"],i.B4]],melodyExcited:[[i["F#5"],i.A5,i["C#6"],i["F#6"],i["C#6"],i.A5,i["C#6"],i["F#6"]],[i["G#5"],i.B5,i.Eb6,i["G#5"],i.Eb6,i.B5,i.Eb6,i["G#5"]]],bassCalm:[[i["F#2"],0,i["C#3"],0,i["F#2"],0,i.A2,0]],bassExcited:[[i["F#2"],i["F#2"],i["C#3"],i["C#3"],i.A2,i.A2,i["C#3"],i["F#2"]]],arpCalm:[[0,4,7,11,14,18,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,21,25,21,18,14,11,7,4]],pulseWidth:.35,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:12,vibratoDepth:6e-4,filterFreq:6e3,filterType:"lowpass",attackTime:5e-4,releaseTime:.15,arpSpeed:.4}],sky:[{tempo:{calm:80,excited:110},melodyCalm:[[i.D5,0,i["F#5"],0,i.A5,0,i.D6,0],[i.E5,0,i["G#5"],0,i.B5,0,i.E6,0]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]],[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.E6,i.B5,i["G#5"]]],bassCalm:[[i.D3,0,0,0,0,0,i.A3,0]],bassExcited:[[i.D3,0,i.A3,0,i.D3,0,i["F#3"],0]],arpCalm:[[0,4,9,16,21,16,9,4]],arpExcited:[[0,4,9,12,16,21,24,21,16,12,9,4]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:3,vibratoDepth:.018,filterFreq:2400,filterType:"lowpass",attackTime:.08,releaseTime:.9,arpSpeed:1.5}]},iy=[{tempo:{calm:140,excited:175},melodyCalm:[[i.D4,i["F#4"],i.A4,i.D5,i.A4,i["F#4"],i.A4,i.D5],[i.E4,i.G4,i.B4,i.E5,i.B4,i.G4,i.B4,i.E5],[i["F#4"],i.A4,i.D5,i["F#5"],i.D5,i.A4,i.D5,i["F#5"]]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i.A5,i["F#5"],i.A5,i.D6],[i.E5,i.G5,i.B5,i.E6,i.B5,i.G5,i.B5,i.E6]],bassCalm:[[i.D2,i.D2,i.A2,i.A2,i.D2,i.D2,i.E2,i["F#2"]]],bassExcited:[[i.D2,i.D2,i.D2,i.A2,i.D2,i.D2,i.D2,i.E2]],arpCalm:[[0,4,7,12,16,19]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:7,vibratoDepth:.003,filterFreq:5e3,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.6},{tempo:{calm:135,excited:168},melodyCalm:[[i.A4,i["C#5"],i.E5,i.A5,i.E5,i["C#5"],i.E5,i.A5],[i.B4,i["D#5"],i["F#5"],i.B5,i["F#5"],i["D#5"],i["F#5"],i.B5],[i["C#5"],i.E5,i["G#5"],i["C#6"],i["G#5"],i.E5,i["G#5"],i["C#6"]]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.E6,i.A5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i["F#6"],i.B5]],bassCalm:[[i.A2,i.A2,i.E3,i.E3,i.A2,i.B2,i["C#3"],i.E3]],bassExcited:[[i.A2,i.A2,i.A2,i.E3,i.A2,i.B2,i["C#3"],i.E3]],arpCalm:[[0,4,8,12,16,20]],arpExcited:[[0,4,8,12,16,20,24,20,16,12,8,4]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0035,filterFreq:5200,filterType:"lowpass",attackTime:.002,releaseTime:.12,arpSpeed:.55}],ay=[{tempo:{calm:155,excited:190},melodyCalm:[[i.E4,i["G#4"],i.B4,i.E5,i["G#5"],i.B5,i["G#5"],i.E5],[i["F#4"],i.A4,i["C#5"],i["F#5"],i.A5,i["C#6"],i.A5,i["F#5"]],[i["G#4"],i.B4,i["D#5"],i["G#5"],i.B5,i.Eb6,i.B5,i["G#5"]]],melodyExcited:[[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.B5,i.E6,i["G#5"]],[i["F#5"],i.A5,i["C#6"],i["F#6"],i.A5,i["C#6"],i["F#6"],i.A5]],bassCalm:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],bassExcited:[[i.E2,i.E2,i.E2,i.B2,i.E2,i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,7,11,16,19,23,19,16,11,7,4]],arpExcited:[[0,4,7,11,16,19,23,28,23,19,16,11,7,4]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:9,vibratoDepth:.002,filterFreq:5800,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.45},{tempo:{calm:148,excited:185},melodyCalm:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.D5,i.F5,i.A5,i.D6,i.A5,i.F5,i.A5,i.D6],[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.Eb6,i.C6,i.G5,i.Eb5],[i.D5,i.F5,i.A5,i.D6,i.F6,i.D6,i.A5,i.F5]],bassCalm:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],bassExcited:[[i.C2,i.C2,i.C2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,12,15,19,24,19,15,12,7,3]],arpExcited:[[0,3,7,12,15,19,24,27,24,19,15,12,7,3]],pulseWidth:.12,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:8,vibratoDepth:.0025,filterFreq:5500,filterType:"lowpass",attackTime:.0015,releaseTime:.12,arpSpeed:.5}];function uf(e,t){let n;switch(t){case"mythic":n=ay;break;case"legendary":n=iy;break;case"rare":n=ry[e];break;case"common":default:n=ny[e];break}const r=Math.floor(Math.random()*n.length);return n[r]}function oy(e,t="common"){const n=k.useRef(null),r=k.useRef(!1),o=k.useRef("calm"),s=k.useRef(null),c=k.useRef(0),p=k.useRef(0),m=k.useRef(0),y=k.useRef(0),j=k.useRef(e),S=k.useRef(t),E=k.useRef(uf(e,t));k.useEffect(()=>{j.current=e,S.current=t,E.current=uf(e,t)},[e,t]);const G=k.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),Y=k.useCallback((L,B,V,q,$)=>{const D=G(),J=D.createOscillator(),ne=D.createOscillator(),pe=D.createGain(),xe=D.createBiquadFilter(),Z=D.createGain();J.type=$.melodyWave,ne.type=$.melodyWave,J.frequency.setValueAtTime(L,B),ne.frequency.setValueAtTime(L*1.003,B),J.frequency.setValueAtTime(L*1.02,B),J.frequency.exponentialRampToValueAtTime(L,B+.02);const de=D.createOscillator(),H=D.createGain();de.type="sine",de.frequency.value=$.vibratoRate,H.gain.value=L*$.vibratoDepth,de.connect(H),H.connect(J.frequency),xe.type=$.filterType,xe.frequency.setValueAtTime($.filterFreq,B),xe.Q.value=1,J.connect(pe),ne.connect(pe),pe.connect(xe),xe.connect(Z),Z.connect(D.destination);const X=B+$.attackTime;pe.gain.setValueAtTime(0,B),pe.gain.linearRampToValueAtTime(q,X),pe.gain.setValueAtTime(q*.7,X+.005),pe.gain.setValueAtTime(q*.6,B+V*.3),pe.gain.linearRampToValueAtTime(0,B+V+$.releaseTime*.5),Z.gain.value=.5;const oe=B+V+$.releaseTime;J.start(B),ne.start(B),de.start(B),J.stop(oe),ne.stop(oe),de.stop(oe)},[G]),M=k.useCallback((L,B,V,q,$)=>{const D=G(),J=D.createOscillator(),ne=D.createOscillator(),pe=D.createGain(),xe=D.createBiquadFilter();J.type=$.bassWave,ne.type=$.bassWave,J.frequency.setValueAtTime(L*1.5,B),J.frequency.exponentialRampToValueAtTime(L,B+.03),ne.frequency.setValueAtTime(L*.5,B),xe.type="lowpass",xe.frequency.value=Math.min($.filterFreq*.5,800),J.connect(pe),ne.connect(pe),pe.connect(xe),xe.connect(D.destination),pe.gain.setValueAtTime(0,B),pe.gain.linearRampToValueAtTime(q,B+$.attackTime*.5),pe.gain.setValueAtTime(q*.8,B+.02),pe.gain.linearRampToValueAtTime(0,B+V),J.start(B),ne.start(B),J.stop(B+V),ne.stop(B+V)},[G]),ee=k.useCallback((L,B,V)=>{const q=G(),$=V==="heavy"?1.3:V==="airy"?.5:1;if(B==="kick"){const D=q.createOscillator(),J=q.createGain();D.connect(J),J.connect(q.destination),D.type="square";const ne=V==="heavy"?200:150;D.frequency.setValueAtTime(ne,L),D.frequency.exponentialRampToValueAtTime(40,L+.08),D.frequency.exponentialRampToValueAtTime(20,L+.12),J.gain.setValueAtTime(0,L),J.gain.linearRampToValueAtTime(.3*$,L+.002),J.gain.exponentialRampToValueAtTime(.01,L+.12),D.start(L),D.stop(L+.12)}else if(B==="snare"){const D=q.createOscillator(),J=q.createGain();D.connect(J),J.connect(q.destination),D.type="square",D.frequency.setValueAtTime(180,L),D.frequency.exponentialRampToValueAtTime(100,L+.04),J.gain.setValueAtTime(0,L),J.gain.linearRampToValueAtTime(.15*$,L+.001),J.gain.exponentialRampToValueAtTime(.01,L+.06),D.start(L),D.stop(L+.06);const ne=.08,pe=Math.floor(q.sampleRate*ne),xe=q.createBuffer(1,pe,q.sampleRate),Z=xe.getChannelData(0);let de=0;for(let we=0;we<pe;we++)we%4===0&&(de=Math.random()>.5?1:-1),Z[we]=de;const H=q.createBufferSource();H.buffer=xe;const X=q.createGain(),oe=q.createBiquadFilter();oe.type="highpass",oe.frequency.value=V==="electronic"?5e3:3500,H.connect(oe),oe.connect(X),X.connect(q.destination),X.gain.setValueAtTime(0,L),X.gain.linearRampToValueAtTime(.12*$,L+.001),X.gain.exponentialRampToValueAtTime(.01,L+ne),H.start(L),H.stop(L+ne)}else{const D=V==="airy"?.04:.025,J=Math.floor(q.sampleRate*D),ne=q.createBuffer(1,J,q.sampleRate),pe=ne.getChannelData(0);let xe=0;for(let X=0;X<J;X++)X%2===0&&(xe=Math.random()>.5?1:-1),pe[X]=xe;const Z=q.createBufferSource();Z.buffer=ne;const de=q.createBiquadFilter();de.type="highpass",de.frequency.value=V==="electronic"?1e4:8e3;const H=q.createGain();Z.connect(de),de.connect(H),H.connect(q.destination),H.gain.setValueAtTime(0,L),H.gain.linearRampToValueAtTime(.06*$,L+.001),H.gain.exponentialRampToValueAtTime(.01,L+D),Z.start(L),Z.stop(L+D)}},[G]),C=k.useCallback((L,B,V,q,$,D)=>{const J=G(),pe=q*D.arpSpeed/B.length,xe=J.createBiquadFilter();xe.type="highpass",xe.frequency.value=400,xe.connect(J.destination),B.forEach((Z,de)=>{const H=L*Math.pow(2,Z/12),X=V+de*pe,oe=J.createOscillator(),we=J.createGain();oe.type=D.arpWave,oe.frequency.setValueAtTime(H,X),oe.connect(we),we.connect(xe),we.gain.setValueAtTime(0,X),we.gain.linearRampToValueAtTime($,X+D.attackTime*.3),we.gain.setValueAtTime($*.7,X+.005),we.gain.linearRampToValueAtTime(0,X+pe*.9),oe.start(X),oe.stop(X+pe+.01)})},[G]),v=k.useCallback(()=>{const L=G(),B=.1,V=o.current==="excited",q=E.current,$=S.current==="legendary"||S.current==="mythic"||S.current==="rare",J=60/(V?q.tempo.excited:q.tempo.calm),ne=V?q.melodyExcited:q.melodyCalm,pe=V?q.bassExcited:q.bassCalm,xe=V?q.arpExcited:q.arpCalm;for(;c.current<L.currentTime+B;){const Z=p.current%8,de=m.current%ne.length,H=m.current%pe.length,X=m.current%xe.length,oe=ne[de],we=pe[H],Ce=xe[X];Z===0&&ee(c.current,"kick",q.drumStyle),Z===4&&ee(c.current,V||$?"snare":"kick",q.drumStyle),V||$?(Z%2===0&&ee(c.current,"hihat",q.drumStyle),ee(c.current+J/2,"hihat",q.drumStyle)):Z%2===0&&ee(c.current+J/2,"hihat",q.drumStyle);const ze=oe[Z];if(ze>0){const Re=$?.08:.06;Y(ze,c.current,J*.8,Re,q)}const Ae=we[Z];if(Ae>0){const Re=$?.1:.08;M(Ae,c.current,J*.9,Re,q)}if(Z%4===0){const Re=i.C4,Le=$?.04:.03;C(Re,Ce,c.current,J*2,Le,q)}Z===7&&(y.current++,y.current%2===0&&m.current++),c.current+=J,p.current++}},[G,Y,M,ee,C]),b=k.useCallback(()=>{if(r.current)return;const L=G();L.state==="suspended"&&L.resume(),r.current=!0,o.current="calm",c.current=L.currentTime,p.current=0,m.current=0,y.current=0,s.current=window.setInterval(v,25)},[G,v]),I=k.useCallback(()=>{s.current&&(clearInterval(s.current),s.current=null),r.current=!1},[]),K=k.useCallback(L=>{o.current!==L&&(o.current=L,m.current=0)},[]);return k.useEffect(()=>()=>{I(),n.current&&(n.current.close(),n.current=null)},[I]),{start:b,stop:I,setIntensity:K}}function yr(e){var n;const t={success:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.C5,i.E5,i.G5,i.C6].forEach((s,c)=>{const p=r.createOscillator(),m=r.createGain();p.connect(m),m.connect(r.destination),p.type="square",p.frequency.setValueAtTime(s,r.currentTime+c*.08),m.gain.setValueAtTime(0,r.currentTime+c*.08),m.gain.linearRampToValueAtTime(.2,r.currentTime+c*.08+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+c*.08+.15),p.start(r.currentTime+c*.08),p.stop(r.currentTime+c*.08+.15)})},fail:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.G4,i.E4,i.C4].forEach((p,m)=>{const y=r.createOscillator(),j=r.createGain();y.connect(j),j.connect(r.destination),y.type="square",y.frequency.setValueAtTime(p,r.currentTime+m*.12),j.gain.setValueAtTime(0,r.currentTime+m*.12),j.gain.linearRampToValueAtTime(.15,r.currentTime+m*.12+.002),j.gain.exponentialRampToValueAtTime(.01,r.currentTime+m*.12+.15),y.start(r.currentTime+m*.12),y.stop(r.currentTime+m*.12+.15)});const s=r.createOscillator(),c=r.createGain();s.connect(c),c.connect(r.destination),s.type="square",s.frequency.setValueAtTime(1e3,r.currentTime+.4),s.frequency.exponentialRampToValueAtTime(1500,r.currentTime+.45),c.gain.setValueAtTime(0,r.currentTime+.4),c.gain.linearRampToValueAtTime(.08,r.currentTime+.402),c.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),s.start(r.currentTime+.4),s.stop(r.currentTime+.5)},sparkle:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(1200,r.currentTime),o.frequency.exponentialRampToValueAtTime(2400,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(1800,r.currentTime+.1),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.1,r.currentTime+.002),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),o.start(r.currentTime),o.stop(r.currentTime+.1)},brush:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=Math.floor(r.sampleRate*.08),s=r.createBuffer(1,o,r.sampleRate),c=s.getChannelData(0);let p=0;for(let S=0;S<o;S++)S%4===0&&(p=Math.random()>.5?1:-1),c[S]=p;const m=r.createBufferSource();m.buffer=s;const y=r.createGain(),j=r.createBiquadFilter();j.type="bandpass",j.frequency.value=1500,m.connect(j),j.connect(y),y.connect(r.destination),y.gain.setValueAtTime(0,r.currentTime),y.gain.linearRampToValueAtTime(.05,r.currentTime+.002),y.gain.exponentialRampToValueAtTime(.01,r.currentTime+.08),m.start(r.currentTime),m.stop(r.currentTime+.08)},capture:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(300,r.currentTime),o.frequency.exponentialRampToValueAtTime(600,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(400,r.currentTime+.1),o.frequency.exponentialRampToValueAtTime(800,r.currentTime+.15),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.2,r.currentTime+.002),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),o.start(r.currentTime),o.stop(r.currentTime+.2)},"legendary-intro":()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.D3,i.A3,i.D4,i["F#4"]].forEach((s,c)=>{const p=r.createOscillator(),m=r.createGain();p.connect(m),m.connect(r.destination),p.type="square",p.frequency.setValueAtTime(s*.5,r.currentTime+c*.2),p.frequency.exponentialRampToValueAtTime(s,r.currentTime+c*.2+.05),m.gain.setValueAtTime(0,r.currentTime+c*.2),m.gain.linearRampToValueAtTime(.25,r.currentTime+c*.2+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+c*.2+.25),p.start(r.currentTime+c*.2),p.stop(r.currentTime+c*.2+.25)}),setTimeout(()=>{[i.D4,i["F#4"],i.A4,i.D5].forEach(c=>{const p=r.createOscillator(),m=r.createGain();p.connect(m),m.connect(r.destination),p.type="square",p.frequency.setValueAtTime(c,r.currentTime),m.gain.setValueAtTime(0,r.currentTime),m.gain.linearRampToValueAtTime(.15,r.currentTime+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),p.start(r.currentTime),p.stop(r.currentTime+.5)})},900)},wobble:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(180,r.currentTime),o.frequency.exponentialRampToValueAtTime(120,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(200,r.currentTime+.1),o.frequency.exponentialRampToValueAtTime(100,r.currentTime+.15),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.15,r.currentTime+.005),s.gain.setValueAtTime(.12,r.currentTime+.05),s.gain.linearRampToValueAtTime(.15,r.currentTime+.1),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),o.start(r.currentTime),o.stop(r.currentTime+.2)},click:()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume();const o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(800,r.currentTime),o.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.03),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.4,r.currentTime+.005),s.gain.setValueAtTime(.35,r.currentTime+.02),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),o.start(r.currentTime),o.stop(r.currentTime+.1);const c=r.createOscillator(),p=r.createGain();c.connect(p),p.connect(r.destination),c.type="square",c.frequency.setValueAtTime(1600,r.currentTime+.05),c.frequency.exponentialRampToValueAtTime(2e3,r.currentTime+.08),p.gain.setValueAtTime(0,r.currentTime+.05),p.gain.linearRampToValueAtTime(.3,r.currentTime+.055),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+.12),c.start(r.currentTime+.05),c.stop(r.currentTime+.12)}};try{(n=t[e])==null||n.call(t)}catch(r){console.warn("Sound playback failed:",r)}}const Ih={grassland:{id:"grassland",name:"Sparkle Meadows",description:"A peaceful meadow filled with wildflowers and friendly creatures",colors:{primary:"#22C55E",secondary:"#86EFAC",accent:"#FDE047",background:"#ECFDF5"},particles:["","","",""]},coastal:{id:"coastal",name:"Crystal Shores",description:"Sandy beaches and sparkling waves hide aquatic robot friends",colors:{primary:"#0EA5E9",secondary:"#7DD3FC",accent:"#FCD34D",background:"#F0F9FF"},particles:["","","",""]},lava:{id:"lava",name:"Ember Peaks",description:"Volcanic mountains where fire-forged creatures dwell",colors:{primary:"#EF4444",secondary:"#FB923C",accent:"#FBBF24",background:"#1C1917"},particles:["","","",""]},city:{id:"city",name:"Neon District",description:"A futuristic city where digital creatures roam the streets",colors:{primary:"#A855F7",secondary:"#E879F9",accent:"#22D3EE",background:"#0F0B1A"},particles:["","","",""]},sky:{id:"sky",name:"Cloud Kingdom",description:"Floating islands high above where sky creatures soar",colors:{primary:"#F8FAFC",secondary:"#BAE6FD",accent:"#FDE68A",background:"#E0F2FE"},particles:["","","",""]}},cf=["grassland","coastal","lava","city","sky"];function sy(){return cf[Math.floor(Math.random()*cf.length)]}function ly(e){return Ih[e]}function uy(e){return{grassland:"Nature",coastal:"Water",lava:"Fire",city:"Electric",sky:"Air",all:"Cosmic"}[e]}const ot=[{id:"gear-bunny",name:"Cogbun",region:"grassland",rarity:"common",description:"A clockwork rabbit that hops with perfectly timed gear movements!",robotParts:["gear-ears","spring-legs","wind-up-tail"],monsterType:"rabbit",height:35,weight:2.5},{id:"mecha-moth",name:"Solarmoth",region:"grassland",rarity:"common",description:"Solar-powered wings let this moth fly day and night!",robotParts:["solar-wings","LED-antennae","sensor-eyes"],monsterType:"moth",height:15,weight:.3},{id:"vine-droid",name:"Circufern",region:"grassland",rarity:"common",description:"A plant monster with circuit-board leaves and fiber-optic vines!",robotParts:["circuit-leaves","fiber-vines","solar-flower"],monsterType:"plant",height:45,weight:3.2},{id:"robo-squirrel",name:"Nutronaut",region:"grassland",rarity:"common",description:"Stores acorns in its battery compartment for winter energy!",robotParts:["battery-cheeks","propeller-tail","scanner-eyes"],monsterType:"squirrel",height:25,weight:1.8},{id:"buzzer-bee",name:"Hexabuzz",region:"grassland",rarity:"common",description:"Makes digital honey that tastes like electricity!",robotParts:["helicopter-wings","stinger-USB","hexagon-body"],monsterType:"bee",height:12,weight:.4},{id:"pixel-fawn",name:"Emojidoe",region:"grassland",rarity:"common",description:"A young deer with spots that display different emojis!",robotParts:["LED-spots","antenna-ears","spring-hooves"],monsterType:"deer",height:85,weight:28},{id:"sprocket-snail",name:"Gearshell",region:"grassland",rarity:"common",description:"Slow but steady, leaves a trail of sparkly oil!",robotParts:["gear-shell","slime-coolant","eye-stalks"],monsterType:"snail",height:18,weight:1.2},{id:"flutter-bot",name:"Chromafly",region:"grassland",rarity:"common",description:"A butterfly with holographic wings that change colors!",robotParts:["holo-wings","nectar-scanner","micro-jets"],monsterType:"butterfly",height:20,weight:.5},{id:"thunder-stag",name:"Voltantler",region:"grassland",rarity:"rare",description:"Lightning crackles between its magnificent antenna-antlers!",robotParts:["tesla-antlers","chrome-hooves","capacitor-heart"],monsterType:"stag",height:180,weight:220},{id:"bloom-guardian",name:"Floratron",region:"grassland",rarity:"rare",description:"A gentle giant that protects the digital forest!",robotParts:["flower-sensors","bark-armor","root-cables"],monsterType:"treant",height:350,weight:800},{id:"prism-fox",name:"Spectravix",region:"grassland",rarity:"rare",description:"Its rainbow tail can split light into data streams!",robotParts:["prism-tail","laser-eyes","stealth-paws"],monsterType:"fox",height:65,weight:12},{id:"echo-owl",name:"Sonarhoot",region:"grassland",rarity:"rare",description:"Uses sonar to navigate and sing beautiful digital songs!",robotParts:["radar-dish-face","silent-rotors","night-vision"],monsterType:"owl",height:55,weight:4.5},{id:"natura-prime",name:"Seedatron",region:"grassland",rarity:"legendary",description:"The ancient guardian of all grassland creatures, born from the first seed and the first circuit!",robotParts:["world-tree-core","season-modulators","life-generators"],monsterType:"nature-titan",height:450,weight:1200},{id:"leaf-kong",name:"Foliape",region:"grassland",rarity:"legendary",description:"The mightiest grass-type warrior! His autumn leaf crown channels the power of all seasons, and his leaf armor is impenetrable!",robotParts:["autumn-crown","leaf-armor","vine-muscles","photosynthesis-core"],monsterType:"gorilla",height:280,weight:450},{id:"turbo-turtle",name:"Rocketoise",region:"coastal",rarity:"common",description:"Jet engines on its shell make this turtle surprisingly fast!",robotParts:["jet-shell","flipper-props","periscope-head"],monsterType:"turtle",height:75,weight:45},{id:"crank-crab",name:"Clawdraulic",region:"coastal",rarity:"common",description:"Hydraulic claws that can crush anything... gently!",robotParts:["hydraulic-claws","tank-treads","bubble-blaster"],monsterType:"crab",height:30,weight:5.5},{id:"wave-bot",name:"Sonafin",region:"coastal",rarity:"common",description:"A friendly fish with sonar that finds lost treasures!",robotParts:["sonar-array","propeller-tail","depth-gauge"],monsterType:"fish",height:40,weight:3.8},{id:"pearl-pup",name:"Shimmerseal",region:"coastal",rarity:"common",description:"A seal pup that produces synthetic pearls from its nose!",robotParts:["pearl-maker","flipper-jets","whisker-sensors"],monsterType:"seal",height:95,weight:38},{id:"coral-crawler",name:"Printopus",region:"coastal",rarity:"common",description:"Helps rebuild reefs with its 3D-printing tentacles!",robotParts:["printer-tentacles","mineral-scanner","glow-tips"],monsterType:"octopus",height:60,weight:18},{id:"shell-shock",name:"Voltcrab",region:"coastal",rarity:"common",description:"An electric hermit crab in a high-tech shell home!",robotParts:["smart-shell","shock-claws","wifi-antenna"],monsterType:"hermit-crab",height:22,weight:2.8},{id:"foam-flounder",name:"Hoverflat",region:"coastal",rarity:"common",description:"Flat as a pancake but full of bubbly personality!",robotParts:["hover-fins","camo-skin","sand-jets"],monsterType:"flounder",height:35,weight:4.2},{id:"anchor-pony",name:"Magnetail",region:"coastal",rarity:"common",description:"A seahorse that can anchor itself in any current!",robotParts:["magnetic-tail","stabilizer-fins","compass-snout"],monsterType:"seahorse",height:28,weight:1.5},{id:"storm-ray",name:"Voltamanta",region:"coastal",rarity:"rare",description:"Glides through storms and channels lightning through its wings!",robotParts:["wing-capacitors","storm-sensors","electric-tail"],monsterType:"manta-ray",height:120,weight:85},{id:"kraken-kit",name:"Tentabot",region:"coastal",rarity:"rare",description:"A baby kraken with adorable mechanical tentacles!",robotParts:["grapple-tentacles","ink-jets","depth-crusher"],monsterType:"kraken",height:200,weight:350},{id:"siren-synth",name:"Melodine",region:"coastal",rarity:"rare",description:"Sings synthesized songs that dolphins love!",robotParts:["voice-modulator","scale-LEDs","sonic-fins"],monsterType:"mermaid",height:165,weight:55},{id:"tide-titan",name:"Wavezilla",region:"coastal",rarity:"rare",description:"Controls the waves with its hydraulic arms!",robotParts:["wave-generators","pressure-suit","current-jets"],monsterType:"water-elemental",height:250,weight:420},{id:"ocean-emperor",name:"Leviatron",region:"coastal",rarity:"legendary",description:"The majestic ruler of all digital seas, part whale, part submarine, all awesome!",robotParts:["sonar-crown","reactor-heart","tidal-thrusters"],monsterType:"leviathan",height:1500,weight:8500},{id:"magma-core",name:"Molite",region:"lava",rarity:"common",description:"A golem with a nuclear reactor heart that glows orange!",robotParts:["reactor-core","heat-vents","lava-veins"],monsterType:"golem",height:150,weight:380},{id:"pyro-gecko",name:"Ignecko",region:"lava",rarity:"common",description:"Scurries across lava like it tickles its feet!",robotParts:["heat-pads","flame-tongue","thermal-tail"],monsterType:"gecko",height:22,weight:.8},{id:"ember-mech",name:"Rebootnix",region:"lava",rarity:"common",description:"A tiny phoenix robot that reboots instead of dying!",robotParts:["ignition-wings","ash-jets","rebirth-core"],monsterType:"phoenix",height:45,weight:4.5},{id:"forge-hound",name:"Smeltpup",region:"lava",rarity:"common",description:"A loyal dog that was born in a volcano factory!",robotParts:["furnace-belly","metal-fangs","smoke-tail"],monsterType:"hound",height:70,weight:32},{id:"cinder-snake",name:"Laviper",region:"lava",rarity:"common",description:"Slithers through magma tubes delivering messages!",robotParts:["heat-scales","drill-head","exhaust-rattle"],monsterType:"snake",height:180,weight:15},{id:"slag-slime",name:"Slagoo",region:"lava",rarity:"common",description:"A metallic slime that eats volcanic rocks for breakfast!",robotParts:["molten-body","mineral-detector","heat-sink"],monsterType:"slime",height:35,weight:8.5},{id:"coal-critter",name:"Embrite",region:"lava",rarity:"common",description:"Glows brighter the happier it gets!",robotParts:["ember-eyes","carbon-shell","spark-plugs"],monsterType:"coal-creature",height:28,weight:3.2},{id:"blast-bat",name:"Thermowing",region:"lava",rarity:"common",description:"Navigates cave systems using thermal imaging!",robotParts:["thermal-sonar","jet-wings","heat-shield"],monsterType:"bat",height:38,weight:2.1},{id:"volcano-drake",name:"Rocketdrake",region:"lava",rarity:"rare",description:"A young dragon with rocket boosters for wings!",robotParts:["rocket-wings","plasma-breath","armored-scales"],monsterType:"dragon",height:220,weight:380},{id:"obsidian-knight",name:"Glasslord",region:"lava",rarity:"rare",description:"A warrior forged from volcanic glass and steel!",robotParts:["glass-armor","magma-sword","heat-shield"],monsterType:"knight",height:195,weight:180},{id:"inferno-djinn",name:"Blazenie",region:"lava",rarity:"rare",description:"Grants wishes... if they involve fire or explosions!",robotParts:["flame-core","smoke-generator","wish-processor"],monsterType:"djinn",height:175,weight:65},{id:"molten-mammoth",name:"Magmamoth",region:"lava",rarity:"rare",description:"An ancient beast awakened by volcanic activity!",robotParts:["lava-tusks","furnace-trunk","magma-hooves"],monsterType:"mammoth",height:380,weight:2800},{id:"infernal-titan",name:"Eruptor",region:"lava",rarity:"legendary",description:"Born from the planets core, this titan IS the volcano! Speaks in eruptions!",robotParts:["planetary-core","tectonic-arms","eruption-crown"],monsterType:"fire-titan",height:850,weight:12e3},{id:"neon-rat",name:"Glowrat",region:"city",rarity:"common",description:"Covered in LED strips, the coolest rat in the city!",robotParts:["LED-fur","wire-tail","hacker-teeth"],monsterType:"rat",height:25,weight:1.2},{id:"holo-hound",name:"Projepup",region:"city",rarity:"common",description:"A loyal dog that can project holograms from its collar!",robotParts:["holo-projector","cyber-snout","data-collar"],monsterType:"dog",height:65,weight:22},{id:"glitch-cat",name:"Errorkat",region:"city",rarity:"common",description:"Sometimes its face displays error messages when confused!",robotParts:["screen-face","static-fur","USB-tail"],monsterType:"cat",height:35,weight:5.5},{id:"drone-pigeon",name:"Copteroo",region:"city",rarity:"common",description:"Delivers packages and breadcrumbs across the city!",robotParts:["rotor-wings","GPS-beak","cargo-feet"],monsterType:"pigeon",height:32,weight:1.8},{id:"trash-panda-bot",name:"Recycloon",region:"city",rarity:"common",description:"A raccoon that sorts recycling with perfect efficiency!",robotParts:["scanner-mask","grabber-paws","compactor-tail"],monsterType:"raccoon",height:55,weight:12},{id:"pixel-roach",name:"Survibug",region:"city",rarity:"common",description:"Unkillable, adorable, and surprisingly helpful!",robotParts:["hardened-shell","antenna-wifi","survival-core"],monsterType:"cockroach",height:8,weight:.15},{id:"subway-worm",name:"Metrorm",region:"city",rarity:"common",description:"Lives in the tunnels and knows every shortcut!",robotParts:["tunnel-drill","track-wheels","light-segments"],monsterType:"worm",height:250,weight:85},{id:"vending-mimic",name:"Snackritter",region:"city",rarity:"common",description:"Looks like a vending machine, gives out free snacks!",robotParts:["dispenser-mouth","coin-eyes","snack-storage"],monsterType:"mimic",height:185,weight:120},{id:"cyber-sphinx",name:"Riddletron",region:"city",rarity:"rare",description:"Asks riddles that require programming knowledge!",robotParts:["riddle-processor","sphinx-sensors","data-wings"],monsterType:"sphinx",height:180,weight:250},{id:"neon-dragon",name:"Glodragon",region:"city",rarity:"rare",description:"A serpentine dragon made of pure light and code!",robotParts:["light-body","firework-breath","parade-float"],monsterType:"dragon",height:300,weight:150},{id:"billboard-beast",name:"Adzilla",region:"city",rarity:"rare",description:"A giant creature covered in animated advertisements!",robotParts:["screen-skin","speaker-roar","spotlight-eyes"],monsterType:"kaiju",height:450,weight:3500},{id:"data-phantom",name:"Bytespook",region:"city",rarity:"rare",description:"A ghost in the machine, literally!",robotParts:["hologram-body","virus-touch","firewall-cloak"],monsterType:"ghost",height:165,weight:.01},{id:"metro-mind",name:"Urbatron",region:"city",rarity:"legendary",description:"The consciousness of the entire city! Knows everyones favorite pizza topping!",robotParts:["city-brain","infrastructure-body","network-soul"],monsterType:"city-spirit",height:500,weight:.1},{id:"propeller-pup",name:"Copterpup",region:"sky",rarity:"common",description:"An adorable puppy with helicopter ears!",robotParts:["rotor-ears","fluffy-jets","tail-rudder"],monsterType:"puppy",height:40,weight:6.5},{id:"cloud-crawler",name:"Nimbusweb",region:"sky",rarity:"common",description:"A spider that weaves webs between clouds!",robotParts:["balloon-body","silk-cables","weather-sensors"],monsterType:"spider",height:25,weight:.8},{id:"zephyr-bunny",name:"Breezebun",region:"sky",rarity:"common",description:"Hops on air currents like invisible stairs!",robotParts:["air-jets","wind-ears","bounce-stabilizers"],monsterType:"bunny",height:30,weight:2.2},{id:"nimbus-kitten",name:"Thunderpurr",region:"sky",rarity:"common",description:"A fluffy cloud cat that purrs like thunder!",robotParts:["cloud-fur","lightning-whiskers","rain-paws"],monsterType:"kitten",height:28,weight:3.5},{id:"glider-squirrel",name:"Parasquir",region:"sky",rarity:"common",description:"Has built-in parachutes for safe landings!",robotParts:["wing-membranes","acorn-radar","air-brakes"],monsterType:"flying-squirrel",height:22,weight:1.4},{id:"breeze-bird",name:"Synthrobin",region:"sky",rarity:"common",description:"A songbird with voice synthesizers!",robotParts:["speaker-beak","antenna-crest","solar-feathers"],monsterType:"songbird",height:18,weight:.6},{id:"balloon-jellyfish",name:"Zeppling",region:"sky",rarity:"common",description:"Floats serenely and glows at night!",robotParts:["helium-bell","LED-tentacles","altitude-sensors"],monsterType:"jellyfish",height:55,weight:2.8},{id:"kite-ray",name:"Windmanta",region:"sky",rarity:"common",description:"Rides wind currents like a living kite!",robotParts:["sail-wings","string-tail","wind-reader"],monsterType:"ray",height:85,weight:12},{id:"thunder-hawk",name:"Teslagle",region:"sky",rarity:"rare",description:"An eagle with tesla coils for feathers!",robotParts:["tesla-feathers","storm-eyes","lightning-talons"],monsterType:"eagle",height:95,weight:8.5},{id:"aurora-serpent",name:"Prismdrake",region:"sky",rarity:"rare",description:"A sky snake that paints the northern lights!",robotParts:["prism-scales","light-projectors","aurora-core"],monsterType:"serpent",height:450,weight:85},{id:"star-whale",name:"Cosmolub",region:"sky",rarity:"rare",description:"Swims through clouds and sings to satellites!",robotParts:["cosmic-blubber","satellite-song","nebula-spout"],monsterType:"whale",height:1200,weight:4500},{id:"wind-djinn",name:"Gustenie",region:"sky",rarity:"rare",description:"Controls the winds and grants flight wishes!",robotParts:["vortex-body","gust-generators","wish-turbine"],monsterType:"djinn",height:185,weight:35},{id:"celestial-phoenix",name:"Solarnix",region:"sky",rarity:"legendary",description:"A magnificent bird made of starlight and solar winds! Said to grant eternal good dental hygiene!",robotParts:["solar-sail-wings","fusion-heart","cosmic-tail"],monsterType:"cosmic-phoenix",height:320,weight:125},{id:"binsters-claymars",name:"Binsters Claymars",region:"all",rarity:"mythic",description:"The legendary six-headed dragon of perfect dental hygiene! Each head represents a different brushing zone. Only reveals itself to true masters who have befriended every creature!",robotParts:["six-dragon-heads","clay-body","rainbow-belly","golden-horns","ultimate-core"],monsterType:"hydra-dragon",height:2500,weight:18e3,requiresAllCreatures:!0}];function Lr(e){return ot.filter(t=>t.rarity===e)}function Oh(e,t,n){let r=[];const o=S=>n?S.filter(E=>E.region===n||E.region==="all"):S,s=ot.filter(S=>S.rarity!=="mythic"),c=ot.find(S=>S.rarity==="mythic"),p=s.every(S=>t.includes(S.id)),m=c&&t.includes(c.id),y=p&&m;if(p&&!m&&e>=95&&c)return c;if(e>=90?r=[...o(Lr("legendary")),...o(Lr("rare")),...o(Lr("common"))]:e>=70?r=[...o(Lr("rare")),...o(Lr("common"))]:r=o(Lr("common")),r=r.filter(S=>S.rarity!=="mythic"),y)return r.length===0?null:r[Math.floor(Math.random()*r.length)];let j=r.filter(S=>!t.includes(S.id));return j.length===0&&(j=o(s).filter(S=>!t.includes(S.id))),j.length===0&&(j=s.filter(S=>!t.includes(S.id))),j.length===0?null:j[Math.floor(Math.random()*j.length)]}function cy(e,t){return t==="mythic"?e>=98?1:e>=95?.75:.5:e>=90?1:e>=76?.85:e>=51?.7:e>=31?.55:.4}function dy(e){return e>=90?"master":e>=76?"white":e>=51?"bee":e>=31?"blue":"red"}const zh="sparkle-app-settings",df={sessionDurationMinutes:2};function Lh(){try{const e=localStorage.getItem(zh);if(e)return{...df,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings:",e)}return df}function fy(e){try{localStorage.setItem(zh,JSON.stringify(e))}catch(t){console.warn("Failed to save settings:",t)}}function $h(){return Lh().sessionDurationMinutes*60}function Wh({hat:e,facePosition:t,containerWidth:n,containerHeight:r,videoWidth:o,videoHeight:s,isBrushing:c=!1}){const[p,m]=k.useState(0),[y,j]=k.useState(!1),S=Math.min(n*.3,80);k.useEffect(()=>{if(!c){m(0);return}const V=setInterval(()=>{m(q=>(q+1)%4)},300);return()=>clearInterval(V)},[c]),k.useEffect(()=>{j(!1);const V=new Image;V.src=e.imageUrl,V.onload=()=>j(!0)},[e.imageUrl]);const E=c?Math.sin(p*Math.PI/2)*3:0,G=c?1+Math.sin(p*Math.PI/2)*.03:1;if(!t||n===0||r===0||o===0||s===0)return u.jsx("div",{className:"absolute animate-float",style:{left:"50%",top:"10%",transform:"translateX(-50%)",opacity:y?1:0,transition:"opacity 0.3s ease"},children:u.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:S,height:S,objectFit:"contain",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"}})});const Y=n/o,M=r/s,ee=50,C=n*.25,v=t.width*Y,b=Math.max(ee,Math.min(C,v*.5)),I=n/2,K=t.y*M,L=b*.55,B=Math.max(5,K-L+E);return u.jsxs("div",{className:"absolute",style:{left:`${I}px`,top:`${B}px`,transform:`translateX(-50%) scale(${G})`,filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))",transition:"left 80ms ease-out, top 80ms ease-out, transform 150ms ease-out",opacity:y?1:0},children:[u.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:b,height:b,objectFit:"contain"}}),c&&u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3) 0%, transparent 50%)",animation:"pulse 1s ease-in-out infinite"}})]})}function Gh({getDebugInfo:e,containerWidth:t,containerHeight:n,videoWidth:r,videoHeight:o}){const[s,c]=k.useState(null);k.useEffect(()=>{const ee=setInterval(()=>{const C=e();c(C)},50);return()=>clearInterval(ee)},[e]);const p=t/r,m=n/o,y=Math.min(p,m),j=r*y,S=o*y,E=(t-j)/2,G=(n-S)/2,Y=ee=>{const C=r-ee;return E+C*y},M=ee=>G+ee*y;return s?u.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50",children:[u.jsxs("svg",{className:"w-full h-full",style:{overflow:"visible"},children:[s.brushingRegion&&u.jsx("rect",{x:Y(s.brushingRegion.x+s.brushingRegion.width),y:M(s.brushingRegion.y),width:s.brushingRegion.width*y,height:s.brushingRegion.height*y,fill:"rgba(0, 255, 0, 0.1)",stroke:"#00ff00",strokeWidth:"2",strokeDasharray:"8,4"}),s.faceRegion&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:Y(s.faceRegion.x+s.faceRegion.width/2),y:M(s.faceRegion.y),width:s.faceRegion.width*y,height:s.faceRegion.height*y,fill:"none",stroke:"#ff6600",strokeWidth:"2"}),u.jsx("rect",{x:Y(s.faceRegion.x+s.faceRegion.width*.35),y:M(s.faceRegion.y+s.faceRegion.height*.1),width:s.faceRegion.width*.7*y,height:s.faceRegion.height*.5*y,fill:"rgba(255, 0, 0, 0.3)",stroke:"#ff0000",strokeWidth:"1"})]}),s.zones.map(ee=>{const C=ee.bounds.x*r,v=ee.bounds.y*o,b=ee.bounds.width*r,I=ee.bounds.height*o;return u.jsxs("g",{children:[u.jsx("rect",{x:Y(C+b),y:M(v),width:b*y,height:I*y,fill:ee.hasMotion?"rgba(0, 255, 0, 0.35)":"rgba(100, 200, 255, 0.15)",stroke:ee.hasMotion?"#00ff00":"#66ccff",strokeWidth:ee.hasMotion?3:2,rx:8}),u.jsx("text",{x:Y(C+b/2),y:M(v+I/2),fill:ee.hasMotion?"#00ff00":"#ffffff",fontSize:"14",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{textShadow:"0 0 4px black, 0 0 2px black"},children:ee.hasMotion?`BRUSHING ${ee.motionLevel.toFixed(0)}%`:"Move toothbrush here"})]},ee.id)})]}),u.jsxs("div",{className:"absolute top-2 left-2 bg-black/90 text-white text-xs p-2 rounded font-mono max-w-[220px]",children:[u.jsx("div",{className:"font-bold mb-1 text-yellow-400",children:"DEBUG MODE"}),u.jsx("div",{className:s.handMotionDetected?"text-green-400 font-bold text-sm":"text-gray-400",children:s.handMotionDetected?" BRUSHING DETECTED":" No motion"}),u.jsxs("div",{className:"text-gray-300",children:["Motion level: ",s.frameMotionTotal.toFixed(0)]}),s.zones[0]&&u.jsxs("div",{className:"text-gray-300",children:["Zone motion: ",s.zones[0].motionLevel.toFixed(1),"%"]}),u.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-600 text-[10px] text-gray-400",children:[u.jsx("span",{className:"text-cyan-400",children:"Blue box"})," = detection zone",u.jsx("br",{}),u.jsx("span",{className:"text-orange-400",children:"Orange"})," = face | ",u.jsx("span",{className:"text-red-400",children:"Red"})," = ignored"]})]})]}):u.jsx("div",{className:"absolute inset-0 pointer-events-none z-50",children:u.jsxs("div",{className:"absolute top-2 left-2 bg-black/80 text-white text-xs p-2 rounded font-mono",children:[u.jsx("div",{className:"font-bold text-yellow-400",children:"DEBUG MODE"}),u.jsx("div",{className:"text-gray-400",children:"Waiting for data..."})]})})}function py({selectedHat:e,facePosition:t,onVideoReady:n,onContainerSize:r,isBrushing:o=!1,debugMode:s=!1,getDebugInfo:c}){const{isReady:p,error:m,registerVideoElement:y}=gs(),j=k.useRef(null),S=k.useRef(null),E=k.useRef(!1),[G,Y]=k.useState({width:0,height:0}),[M,ee]=k.useState({width:640,height:480}),C=k.useCallback(v=>{console.log("[CameraView] Video ref callback:",{hasElement:!!v}),j.current=v,v&&y(v)},[y]);return k.useEffect(()=>{const v=j.current;!v||!p||E.current||v.readyState>=2&&v.videoWidth>0&&(console.log("[CameraView] Video ready, calling onVideoReady"),E.current=!0,ee({width:v.videoWidth,height:v.videoHeight}),n==null||n(v))},[p,n]),k.useEffect(()=>{const v=j.current;if(!v||E.current)return;const b=()=>{v.readyState>=2&&v.videoWidth>0&&!E.current&&(console.log("[CameraView] Video ready (from polling), calling onVideoReady"),E.current=!0,ee({width:v.videoWidth,height:v.videoHeight}),n==null||n(v))},I=setInterval(b,100);return b(),()=>clearInterval(I)},[n]),k.useEffect(()=>{const v=S.current;if(!v)return;const b=()=>{const K=v.clientWidth,L=v.clientHeight;Y({width:K,height:L}),r==null||r(K,L)};b();const I=new ResizeObserver(b);return I.observe(v),()=>I.disconnect()},[r]),k.useEffect(()=>{var v,b,I,K,L;console.log("[CameraView] Mounted/Updated",{hasVideoRef:!!j.current,isReady:p,error:m,videoReadyState:(v=j.current)==null?void 0:v.readyState,videoPaused:(b=j.current)==null?void 0:b.paused,videoWidth:(I=j.current)==null?void 0:I.videoWidth,videoHeight:(K=j.current)==null?void 0:K.videoHeight,srcObject:!!((L=j.current)!=null&&L.srcObject)})}),u.jsxs("div",{ref:S,className:"relative w-full h-full bg-purple-900/30 rounded-2xl overflow-hidden",children:[u.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!p&&!m&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/50",children:u.jsx("div",{className:"text-lg text-purple-300 animate-pulse",children:"Connecting..."})}),m&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/50 p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-red-300",children:m})]})}),e&&p&&G.width>0&&u.jsx(Wh,{hat:e,facePosition:t||null,containerWidth:G.width,containerHeight:G.height,videoWidth:M.width,videoHeight:M.height,isBrushing:o}),s&&c&&G.width>0&&u.jsx(Gh,{getDebugInfo:c,containerWidth:G.width,containerHeight:G.height,videoWidth:M.width,videoHeight:M.height}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2 flex justify-center",children:u.jsx("div",{className:"bg-black/50 rounded-full px-3 py-1 text-xs text-white",children:"Move your brush to clean!"})})]})}const ff={},hy=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],my=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function un({creature:e,size:t=200,showGunk:n=!1,gunkLevel:r=0,animated:o=!0,className:s=""}){const[c,p]=k.useState(!1),[m,y]=k.useState(!1),j=hy.includes(e.id)&&!c,S=my.includes(e.id)&&!m,E=e.id in ff,G=n&&r>=90&&S,Y=e.rarity==="mythic",M=e.rarity==="legendary",ee=e.rarity==="rare",C=Y?30:M?20:ee?10:0,v=Y?"#F97316":M?"#FFD700":"#60A5FA",b=n?Math.max(0,100-r)/100:1,I=n&&!G?Math.min(.8,r/100):0,K=n&&!G?Math.min(100,r*1.5):0,L=n&&!G?Math.max(0,(r-40)/60):0,B={width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},V={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",filter:C>0&&b>.5?`drop-shadow(0 0 ${C*b}px ${v})`:void 0,transition:"filter 0.3s ease"},q={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:K>0?`hue-rotate(${K}deg) saturate(${1+K/100}) brightness(${1-K/300})`:void 0,transition:"filter 0.3s ease"},$={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/vibe-brushing/creatures/gunk-overlay.png)",backgroundSize:"cover",backgroundPosition:"center top",opacity:I,pointerEvents:"none",mixBlendMode:"multiply",transition:"opacity 0.3s ease"},D={position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"20%",background:"radial-gradient(ellipse at 35% 50%, rgba(255,0,0,0.8) 0%, transparent 40%), radial-gradient(ellipse at 65% 50%, rgba(255,0,0,0.8) 0%, transparent 40%)",opacity:L,pointerEvents:"none",filter:"blur(2px)",transition:"opacity 0.3s ease"};if(j){const J={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:"drop-shadow(0 0 15px rgba(0, 255, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 0, 0, 0.3))"};if(G)return u.jsx("div",{style:B,className:s,children:u.jsx("div",{style:{...V,filter:"drop-shadow(0 0 20px rgba(0, 100, 0, 0.8))"},className:o?"animate-creature-idle":"",children:u.jsx("img",{src:`/vibe-brushing/creatures/${e.id}-possessed.png`,alt:`${e.name} (Possessed)`,style:J,onError:()=>y(!0)})})});if(E){const ne=ff[e.id],pe=ne.frameWidth/ne.frameHeight;let xe,Z;pe>=1?(xe=t,Z=t/pe):(Z=t,xe=t*pe);const de={width:t,height:t,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},H=`spritesheet-grid-${ne.cols}x${ne.rows}`,X={width:xe,height:Z,backgroundImage:`url(/vibe-brushing/creatures/${e.id}-spritesheet.png)`,backgroundSize:`${ne.cols*100}% ${ne.rows*100}%`,backgroundPosition:"0% 0%",backgroundRepeat:"no-repeat",filter:K>0?`hue-rotate(${K}deg) saturate(${1+K/100}) brightness(${1-K/300})`:void 0,animation:o?`${H} ${ne.animationDuration}s linear infinite`:void 0};return u.jsxs("div",{style:B,className:s,children:[u.jsx("div",{style:V,children:u.jsx("div",{style:de,children:u.jsx("div",{style:X,"aria-label":e.name})})}),n&&r>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:$,className:"animate-gunk-drip"}),L>0&&u.jsx("div",{style:D,className:"animate-pulse-glow"})]})]})}return u.jsxs("div",{style:B,className:s,children:[u.jsx("div",{style:V,className:o?"animate-creature-idle":"",children:u.jsx("img",{src:`/vibe-brushing/creatures/${e.id}.png`,alt:e.name,style:q,onError:()=>p(!0)})}),n&&r>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:$,className:o?"animate-gunk-drip":""}),L>0&&u.jsx("div",{style:D,className:o?"animate-pulse-glow":""})]})]})}return u.jsx("div",{style:B,className:s,children:u.jsx(gy,{creature:e,size:t,animated:o,cleanProgress:b,gunkOpacity:I,redEyeOpacity:L,glowAmount:C,glowColor:v})})}function gy({creature:e,size:t,animated:n,cleanProgress:r,gunkOpacity:o,redEyeOpacity:s,glowAmount:c,glowColor:p}){const m={grassland:{primary:"#7FD858",secondary:"#FFB6C1",accent:"#FFD700"},coastal:{primary:"#4FC3F7",secondary:"#FFE082",accent:"#FF7043"},lava:{primary:"#FF7043",secondary:"#FFD54F",accent:"#F44336"},city:{primary:"#BA68C8",secondary:"#64B5F6",accent:"#FF4081"},sky:{primary:"#81D4FA",secondary:"#FFF59D",accent:"#FFFFFF"},all:{primary:"#F97316",secondary:"#FBBF24",accent:"#EF4444"}},y=m[e.region]||m.grassland,j=e.rarity==="legendary";return u.jsxs("svg",{viewBox:"0 0 100 100",width:t,height:t,style:{filter:c>0&&r>.5?`drop-shadow(0 0 ${c*r}px ${p})`:void 0},className:n?"animate-creature-idle":"",children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:`fallback-body-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:y.primary,stopOpacity:"1"}),u.jsx("stop",{offset:"100%",stopColor:y.primary,stopOpacity:"0.7"})]}),u.jsxs("radialGradient",{id:`fallback-highlight-${e.id}`,cx:"30%",cy:"30%",r:"60%",children:[u.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.6"}),u.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})]}),u.jsx("ellipse",{cx:"50",cy:"55",rx:j?35:28,ry:j?32:26,fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"2"}),u.jsx("ellipse",{cx:"50",cy:"55",rx:j?35:28,ry:j?32:26,fill:`url(#fallback-highlight-${e.id})`}),u.jsx("ellipse",{cx:"40",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),u.jsx("ellipse",{cx:"60",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),u.jsx("ellipse",{cx:"42",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),u.jsx("ellipse",{cx:"62",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),u.jsx("ellipse",{cx:"43",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),u.jsx("ellipse",{cx:"63",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),u.jsx("path",{d:"M 44 65 Q 50 70 56 65",fill:"none",stroke:"#1A1A1A",strokeWidth:"2",strokeLinecap:"round"}),u.jsx("ellipse",{cx:"32",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),u.jsx("ellipse",{cx:"68",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),e.monsterType.includes("bunny")||e.monsterType.includes("rabbit")?u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{cx:"35",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),u.jsx("ellipse",{cx:"65",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("cat")||e.monsterType.includes("kitten")?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M 30 40 L 25 20 L 40 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),u.jsx("path",{d:"M 70 40 L 75 20 L 60 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("dog")||e.monsterType.includes("pup")?u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{cx:"28",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(-15 28 42)"}),u.jsx("ellipse",{cx:"72",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(15 72 42)"})]}):j?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M 35 30 L 25 10 L 40 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),u.jsx("path",{d:"M 65 30 L 75 10 L 60 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),u.jsx("path",{d:"M 50 28 L 50 8",stroke:y.accent,strokeWidth:"3",strokeLinecap:"round"})]}):null,j&&u.jsx("g",{children:u.jsx("path",{d:"M 35 18 L 35 5 L 42 12 L 50 0 L 58 12 L 65 5 L 65 18",fill:"#FFD700",stroke:"#B8860B",strokeWidth:"1"})}),o>0&&u.jsxs("g",{opacity:o,children:[u.jsx("ellipse",{cx:"50",cy:"50",rx:"30",ry:"28",fill:"#32CD32",opacity:"0.5"}),u.jsx("path",{d:"M 25 35 Q 30 45 25 55 Q 20 65 30 70",fill:"#228B22",opacity:"0.6"}),u.jsx("path",{d:"M 75 35 Q 70 45 75 55 Q 80 65 70 70",fill:"#228B22",opacity:"0.6"}),u.jsx("circle",{cx:"35",cy:"42",r:"4",fill:"#32CD32"}),u.jsx("circle",{cx:"62",cy:"65",r:"5",fill:"#228B22"}),u.jsx("circle",{cx:"55",cy:"38",r:"3",fill:"#2E8B2E"})]}),s>0&&u.jsxs("g",{opacity:s,children:[u.jsx("ellipse",{cx:"40",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&u.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite"})}),u.jsx("ellipse",{cx:"60",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&u.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite",begin:"0.2s"})})]})]})}function yy({creature:e,activeZones:t,overallProgress:n,compact:r=!1}){const o=e.region==="all"?"grassland":e.region,s=Ih[o],c=Math.max(0,100-n),p=k.useMemo(()=>n>=100?"sparkling":n>=75?"happy":n>=50?"hopeful":n>=25?"waking":"gunked",[n]),m={gunked:"",waking:"",hopeful:"",happy:"",sparkling:""}[p];return r?u.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 bg-purple-900/40 rounded-xl backdrop-blur-sm",children:[u.jsxs("div",{className:`relative shrink-0 ${t.length>0?"animate-wiggle":""}`,style:{width:60,height:60},children:[u.jsx(un,{creature:e,size:60,showGunk:!0,gunkLevel:c,animated:!0}),n>=100&&u.jsx("div",{className:"absolute -top-1 -right-1 text-lg",children:""})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:m}),u.jsx("span",{className:"text-sm font-medium text-white truncate",children:e.name}),e.rarity!=="common"&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),u.jsx("div",{className:"h-2 w-full rounded-full bg-purple-900/50 overflow-hidden",children:u.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":s.colors.primary}})}),u.jsxs("div",{className:"flex justify-between mt-1",children:[u.jsx("span",{className:"text-[10px] text-purple-300",children:n>=100?" Clean!":"Keep brushing"}),u.jsxs("span",{className:"text-[10px] text-purple-300",children:[Math.round(n),"%"]})]})]})]}):u.jsxs("div",{className:"relative h-full flex flex-col",children:[u.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${s.colors.background}80, ${s.colors.primary}40)`,boxShadow:e.rarity==="mythic"?"0 0 40px #F97316, 0 0 60px #F9731680":e.rarity==="legendary"?`0 0 30px ${s.colors.accent}60`:e.rarity==="rare"?`0 0 20px ${s.colors.primary}40`:"none"},children:[t.length>0&&u.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((y,j)=>u.jsx("div",{className:"absolute w-2 h-2 rounded-full animate-ping",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*70}%`,backgroundColor:s.colors.accent,animationDelay:`${j*.1}s`,animationDuration:"1s"}},j))}),u.jsxs("div",{className:`relative ${t.length>0?"animate-wiggle":""}`,children:[u.jsx(un,{creature:e,size:140,showGunk:!0,gunkLevel:c,animated:!0}),n>=100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((y,j)=>u.jsx("div",{className:"absolute text-xl animate-sparkle-float",style:{left:`${10+j%4*25}%`,top:`${10+Math.floor(j/4)*40}%`,animationDelay:`${j*.15}s`},children:""},j))})]}),u.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1.5 px-2 py-1 rounded-full text-white text-sm",style:{backgroundColor:`${s.colors.primary}CC`},children:[u.jsx("span",{className:"text-base",children:m}),u.jsx("span",{className:"font-medium",children:e.name}),e.rarity!=="common"&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),u.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-white text-sm font-bold bg-black/40 backdrop-blur-sm",children:[Math.round(n),"%"]}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:u.jsxs("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden backdrop-blur-sm relative",children:[u.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":s.colors.accent}}),t.length>0&&n<100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow animate-pulse",children:"Brushing..."})}),n>=100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow",children:" Clean! "})})]})})]}),u.jsx("style",{children:`
        @keyframes sparkle-float {
          0%, 100% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          50% {
            transform: translateY(-10px) scale(1.2);
            opacity: 0.8;
          }
        }
        .animate-sparkle-float {
          animation: sparkle-float 1.5s ease-in-out infinite;
        }
      `})]})}const vy=e=>{const t="/vibe-brushing/";return{grassland:`${t}creatures/bg-grassland.png`,coastal:`${t}creatures/bg-coastal.png`,lava:`${t}creatures/bg-lava.png`,city:`${t}creatures/bg-city.png`,sky:`${t}creatures/bg-sky.png`}[e]};function No({region:e}){const t=ly(e),[n,r]=k.useState([]),[o,s]=k.useState(!1),c=vy(e),p=k.useMemo(()=>{const{colors:m}=t;switch(e){case"grassland":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            #98D8C8 30%, 
            ${m.secondary} 60%, 
            ${m.primary} 100%)`};case"coastal":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            ${m.secondary} 40%, 
            ${m.primary} 70%, 
            #1E3A5F 100%)`};case"lava":return{background:`linear-gradient(180deg, 
            #1C1917 0%, 
            #292524 30%, 
            ${m.secondary} 70%, 
            ${m.primary} 100%)`};case"city":return{background:`linear-gradient(180deg, 
            #0F0B1A 0%, 
            #1E1433 30%, 
            ${m.primary}40 70%, 
            ${m.secondary}60 100%)`};case"sky":return{background:`linear-gradient(180deg, 
            #1E3A5F 0%, 
            ${m.secondary} 30%, 
            ${m.primary} 60%, 
            #FEF9C3 100%)`};default:return{background:m.background}}},[e,t]);return k.useEffect(()=>{s(!1);const m=new Image;m.src=c,m.onload=()=>s(!0)},[c]),k.useEffect(()=>{const m=[];for(let j=0;j<12;j++)m.push({id:j,emoji:t.particles[j%t.particles.length],x:Math.random()*100,y:Math.random()*100,size:.8+Math.random()*.8,speed:15+Math.random()*20,delay:Math.random()*10,drift:(Math.random()-.5)*30});r(m)},[e,t.particles]),u.jsxs("div",{className:"absolute inset-0 overflow-hidden transition-all duration-1000",style:p,children:[u.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center",opacity:o?1:0}}),u.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.3) 100%)"}}),e==="lava"&&u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 opacity-60",style:{background:"linear-gradient(180deg, transparent 0%, #EF4444 50%, #FCD34D 100%)",animation:"pulse 2s ease-in-out infinite"}}),u.jsx("div",{className:"absolute bottom-0 left-1/4 w-1/2 h-1/4 opacity-40 rounded-t-full",style:{background:"radial-gradient(ellipse at bottom, #FBBF24 0%, transparent 70%)",animation:"pulse 3s ease-in-out infinite"}})]}),e==="city"&&u.jsx("div",{className:"absolute inset-0",children:[...Array(8)].map((m,y)=>u.jsx("div",{className:"absolute bottom-0 bg-gradient-to-t from-purple-900 to-transparent",style:{left:`${y*14+Math.random()*5}%`,width:`${3+Math.random()*4}%`,height:`${20+Math.random()*40}%`,opacity:.6},children:[...Array(Math.floor(Math.random()*5)+2)].map((j,S)=>u.jsx("div",{className:"absolute w-1 h-1 rounded-full",style:{left:`${20+Math.random()*60}%`,top:`${10+S*15+Math.random()*10}%`,backgroundColor:["#22D3EE","#E879F9","#FBBF24"][Math.floor(Math.random()*3)],animation:`pulse ${1+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},S))},y))}),e==="sky"&&u.jsx("div",{className:"absolute inset-0",children:[...Array(5)].map((m,y)=>u.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${y*25-10+Math.random()*20}%`,top:`${60+Math.random()*30}%`,width:`${15+Math.random()*20}%`,height:`${8+Math.random()*8}%`,animation:`float ${8+Math.random()*4}s ease-in-out infinite`,animationDelay:`${Math.random()*4}s`}},y))}),e==="coastal"&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-1/4",children:[u.jsx("div",{className:"absolute inset-0 opacity-50",style:{background:"linear-gradient(180deg, transparent 0%, #0EA5E9 100%)"}}),[...Array(3)].map((m,y)=>u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-white/30 rounded-full",style:{transform:`translateY(${y*-8}px)`,animation:`wave ${3+y*.5}s ease-in-out infinite`,animationDelay:`${y*.3}s`}},y))]}),e==="grassland"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/6",children:u.jsxs("svg",{viewBox:"0 0 100 20",className:"w-full h-full",preserveAspectRatio:"none",children:[u.jsx("path",{d:"M0 20 Q 10 10, 20 15 T 40 12 T 60 16 T 80 10 T 100 14 L 100 20 Z",fill:"#22C55E",opacity:"0.8"}),u.jsx("path",{d:"M0 20 Q 15 15, 25 18 T 50 14 T 75 17 T 100 12 L 100 20 Z",fill:"#16A34A",opacity:"0.6"})]})}),n.map(m=>u.jsx("div",{className:"absolute pointer-events-none select-none",style:{left:`${m.x}%`,fontSize:`${m.size}rem`,animation:`floatParticle ${m.speed}s linear infinite`,animationDelay:`${m.delay}s`,"--drift":`${m.drift}px`},children:m.emoji},m.id)),u.jsx("style",{children:`
        @keyframes floatParticle {
          0% {
            transform: translateY(100vh) translateX(0);
            opacity: 0;
          }
          10% {
            opacity: 0.8;
          }
          90% {
            opacity: 0.8;
          }
          100% {
            transform: translateY(-20vh) translateX(var(--drift));
            opacity: 0;
          }
        }
        
        @keyframes wave {
          0%, 100% {
            transform: translateX(-5%) scaleY(1);
          }
          50% {
            transform: translateX(5%) scaleY(1.2);
          }
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0) translateX(0);
          }
          50% {
            transform: translateY(-10px) translateX(10px);
          }
        }
      `})]})}function xy({zoneProgress:e,overallProgress:t}){const n=t>=100;return u.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-purple-300",children:"Brushing Progress"}),u.jsxs("span",{className:"text-white font-bold",children:[Math.round(t),"%"]})]}),u.jsxs("div",{className:"h-6 bg-purple-900/50 rounded-full overflow-hidden relative",children:[u.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${n?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${t}%`}}),n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-white drop-shadow animate-pulse",children:" Complete! Keep brushing! "})})]})]}),u.jsx("div",{className:"text-center text-sm text-purple-300",children:n?u.jsx("span",{className:"text-green-400",children:"Great job! Keep it up to stay clean!"}):t>0?u.jsx("span",{children:"Keep brushing to fill the bar!"}):u.jsx("span",{children:"Start brushing to see progress"})})]})}function wy({timeRemaining:e,totalTime:t}){const n=Math.floor(e/60),r=e%60,o=(t-e)/t*100,s=e<=30;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-24 h-24",children:[u.jsxs("svg",{className:"w-full h-full -rotate-90",children:[u.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:"rgba(139, 92, 246, 0.3)",strokeWidth:"8"}),u.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:s?"#F59E0B":"#8B5CF6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-o/100)}`,className:"transition-all duration-1000"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:`text-2xl font-bold ${s?"text-amber-400 animate-pulse":"text-white"}`,children:[n,":",r.toString().padStart(2,"0")]})})]}),u.jsx("div",{className:"mt-2 text-sm text-purple-300",children:s?"Almost done!":"Keep brushing!"})]})}const by=3e3;function ky(e){return e<=60?[20,40]:e<=120?[30,60,90]:[45,90,135]}function Cy({selectedHat:e,capturedCreatureIds:t,onComplete:n,onCancel:r}){const o=k.useMemo(()=>$h(),[]),s=k.useMemo(()=>ky(o),[o]),[c,p]=k.useState("countdown"),[m,y]=k.useState(3),[j,S]=k.useState(o),[E,G]=k.useState([]),[Y,M]=k.useState(""),[ee]=k.useState(()=>sy()),[C,v]=k.useState(null),b=k.useRef(new Set),I=k.useRef(Date.now()),K=k.useRef(null),{startCamera:L,captureFrameWithHat:B,stopCamera:V,registerVideoElement:q}=gs(),$=k.useRef(null),D=k.useRef({width:0,height:0}),J=(C==null?void 0:C.rarity)||"common",ne=oy(ee,J),pe=k.useCallback(ce=>{$.current=ce,ce&&q(ce)},[q]),[xe,Z]=k.useState(!1),{zoneProgress:de,motionResults:H,overallProgress:X,startDetection:oe,stopDetection:we,setFaceRegion:Ce,setDebugMode:ze,getDebugInfo:Ae}=Mh({targetCleaningTime:25}),{facePosition:Re,startTracking:Le,stopTracking:Ue}=Bh(),tn=k.useRef(new Set),Ie=k.useRef(!1),ge=k.useRef(!1);k.useEffect(()=>{Ce(Re?{x:Re.x,y:Re.y,width:Re.width,height:Re.height}:null)},[Re,Ce]),k.useEffect(()=>{const ce=Oh(85,t,ee);v(ce),((ce==null?void 0:ce.rarity)==="legendary"||(ce==null?void 0:ce.rarity)==="mythic")&&yr("legendary-intro")},[ee,t]),k.useEffect(()=>(Ie.current||(Ie.current=!0,L()),()=>{we(),Ue(),K.current&&clearInterval(K.current)}),[L,we,Ue]),k.useEffect(()=>{de.forEach(ce=>{ce.isComplete&&!tn.current.has(ce.zoneId)&&(tn.current.add(ce.zoneId),yr("sparkle"))})},[de]),k.useEffect(()=>{H.some(Ee=>Ee.hasMotion)&&(I.current=Date.now())},[H]),k.useEffect(()=>{if(c==="brushing")return K.current=window.setInterval(()=>{Date.now()-I.current>by&&(M("Can't see you brushing! Move closer to the camera."),p("paused"))},500),()=>{K.current&&clearInterval(K.current)}},[c]);const pt=k.useCallback(ce=>{oe(ce),Le(ce),I.current=Date.now()},[oe,Le]),Ne=k.useCallback((ce,Ee)=>{D.current={width:ce,height:Ee}},[]),et=k.useCallback(async()=>{const ce=e?{imageUrl:e.imageUrl,facePosition:Re||null,containerWidth:D.current.width,containerHeight:D.current.height}:null;return B(ce)},[e,Re,B]),vt=k.useCallback(()=>{Z(ce=>{const Ee=!ce;return ze(Ee),Ee})},[ze]);k.useEffect(()=>{if(c!=="countdown")return;if(m<=0){p("brushing"),I.current=Date.now();return}const ce=setTimeout(()=>{y(Ee=>Ee-1)},1e3);return()=>clearTimeout(ce)},[m,c]),k.useEffect(()=>{if(c!=="brushing")return;if(j<=0){At();return}const ce=setInterval(()=>{S(Ee=>Ee-1)},1e3);return()=>clearInterval(ce)},[j,c]),k.useEffect(()=>{if(c!=="brushing")return;const ce=o-j;s.forEach(Ee=>{ce>=Ee&&!b.current.has(Ee)&&(b.current.add(Ee),et().then(Ut=>{Ut&&G(Dt=>[...Dt,Ut])}))})},[j,c,et,s,o]),k.useEffect(()=>{c==="brushing"&&!ge.current?(ge.current=!0,ne.start()):c==="paused"?(ne.stop(),ge.current=!1):c==="complete"&&ne.stop()},[c,ne]),k.useEffect(()=>{if(c!=="brushing")return;const ce=o-j,Ee=o/2;ce>=Ee?ne.setIntensity("excited"):ne.setIntensity("calm")},[j,c,ne]);const At=k.useCallback(async()=>{p("complete"),ne.stop(),we(),Ue();const ce=await et(),Ee=ce?[...E,ce]:E;setTimeout(()=>{V(),n({cleaningPercentage:X,zoneProgress:de,photos:Ee,region:ee,creature:C})},500)},[we,Ue,et,E,X,de,n,V,ne,ee,C]),Ft=k.useCallback(()=>{I.current=Date.now(),p("brushing"),M("")},[]),ie=k.useCallback(async()=>{const ce=await et();ce&&G(Ee=>[...Ee,ce])},[et]),je=k.useCallback(()=>{ne.stop(),V(),r()},[V,r,ne]),Se=H.filter(ce=>ce.hasMotion).map(ce=>ce.zoneId);return c==="countdown"?u.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:ee})}),u.jsxs("div",{className:"relative z-10 text-center",children:[u.jsx("div",{className:"text-6xl font-bold text-white animate-bounce-gentle drop-shadow-lg",children:m>0?m:"GO!"}),u.jsx("div",{className:"text-xl text-white/80 mt-4 drop-shadow",children:"Get ready to brush!"}),C&&u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("div",{className:"text-lg text-white/70",children:"Today's creature:"}),u.jsx("div",{className:`text-2xl font-bold ${C.rarity==="mythic"?"text-orange-400 animate-pulse":C.rarity==="legendary"?"text-yellow-400 animate-pulse":C.rarity==="rare"?"text-purple-400":"text-white"}`,children:C.name})]}),u.jsx("button",{onClick:je,className:"mt-8 px-6 py-2 text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Cancel"})]})]}):c==="paused"?u.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full p-6 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:ee})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:"text-6xl mb-6",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-yellow-400 mb-4 drop-shadow-lg",children:"Paused!"}),u.jsx("p",{className:"text-xl text-white text-center mb-6 max-w-xs drop-shadow",children:Y}),u.jsx("div",{className:"w-full max-w-xs aspect-video bg-black/30 rounded-2xl overflow-hidden mb-6 backdrop-blur-sm",children:u.jsx("video",{ref:pe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"})}),u.jsxs("div",{className:"text-sm text-white/80 mb-4",children:["Time remaining: ",Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]}),u.jsx("button",{onClick:Ft,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform mb-3",children:"I'm Ready! "}),u.jsx("button",{onClick:je,className:"w-full max-w-xs py-3 text-lg text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Stop Session"})]})]}):u.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:ee})}),u.jsxs("div",{className:"relative z-10 flex flex-col h-full p-2 gap-2",children:[u.jsxs("div",{className:"h-2/3 relative overflow-hidden",children:[u.jsx(py,{selectedHat:e,facePosition:Re,onVideoReady:pt,onContainerSize:Ne,isBrushing:H.some(ce=>ce.hasMotion),debugMode:xe,getDebugInfo:Ae}),u.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start pointer-events-auto z-20",children:[u.jsx("button",{onClick:je,className:"px-3 py-1.5 text-sm text-white/80 bg-black/50 rounded-xl backdrop-blur-sm pointer-events-auto",children:""}),u.jsx(wy,{timeRemaining:j,totalTime:o}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:vt,className:`px-2 py-1.5 text-sm rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto ${xe?"text-yellow-400 bg-yellow-900/80":"text-white/60 bg-black/50"}`,children:""}),u.jsx("button",{onClick:ie,className:"px-2 py-1.5 text-sm text-white bg-pink-600/80 rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto",children:""})]})]})]}),u.jsx("div",{className:"h-1/3 overflow-auto",children:C?u.jsx(yy,{creature:C,activeZones:Se,overallProgress:X}):u.jsx(xy,{zoneProgress:de,overallProgress:X})}),E.length>0&&u.jsxs("div",{className:"flex justify-center gap-2",children:[E.slice(-3).map((ce,Ee)=>u.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-sparkle"},Ee)),u.jsxs("span",{className:"text-xs text-white/70 ml-2",children:[E.length," photos"]})]})]})]})}function jy({cleaningPercentage:e,onContinue:t}){const n=Sy(e),r=e>=100;return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[u.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:n.emoji}),u.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.title}),u.jsxs("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent mb-4",children:[Math.round(e),"%"]}),u.jsx("p",{className:"text-lg text-purple-200 mb-6 max-w-xs",children:n.message}),u.jsx("div",{className:"w-full max-w-xs mb-8",children:u.jsxs("div",{className:`p-4 rounded-xl ${r?"bg-green-900/50":"bg-purple-900/50"}`,children:[u.jsx("div",{className:"text-4xl mb-2",children:r?"":""}),u.jsx("div",{className:"text-sm text-purple-300 mb-2",children:"Brushing Score"}),u.jsx("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${r?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${e}%`}})}),u.jsx("div",{className:`text-lg font-bold mt-2 ${r?"text-green-400":"text-purple-400"}`,children:r?"Complete!":"Keep practicing!"})]})}),u.jsx("button",{onClick:t,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl animate-button-glow",children:"Catch a Creature! "})]})}function Sy(e){return e>=95?{emoji:"",title:"LEGENDARY!",message:"Your teeth are sparkling like diamonds! Amazing job!"}:e>=80?{emoji:"",title:"Super Clean!",message:"Wow! Your teeth are super sparkly! Great brushing!"}:e>=60?{emoji:"",title:"Good Job!",message:"Nice work! A little more brushing next time!"}:e>=40?{emoji:"",title:"Keep Trying!",message:"You can do better! Brush all areas next time!"}:{emoji:"",title:"Try Again!",message:"Don't give up! Brush longer next time!"}}var Vh={exports:{}};(function(e,t){((n,r)=>{e.exports=r()})(Qc,function(){var n=function(a,l){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,f){d.__proto__=f}:function(d,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(d[h]=f[h])}))(a,l)},r=function(){return(r=Object.assign||function(a){for(var l,d=1,f=arguments.length;d<f;d++)for(var h in l=arguments[d])Object.prototype.hasOwnProperty.call(l,h)&&(a[h]=l[h]);return a}).apply(this,arguments)};function o(a,l,d){for(var f,h=0,g=l.length;h<g;h++)!f&&h in l||((f=f||Array.prototype.slice.call(l,0,h))[h]=l[h]);return a.concat(f||Array.prototype.slice.call(l))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Qc,c=Object.keys,p=Array.isArray;function m(a,l){return typeof l=="object"&&c(l).forEach(function(d){a[d]=l[d]}),a}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var y=Object.getPrototypeOf,j={}.hasOwnProperty;function S(a,l){return j.call(a,l)}function E(a,l){typeof l=="function"&&(l=l(y(a))),(typeof Reflect>"u"?c:Reflect.ownKeys)(l).forEach(function(d){Y(a,d,l[d])})}var G=Object.defineProperty;function Y(a,l,d,f){G(a,l,m(d&&S(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},f))}function M(a){return{from:function(l){return a.prototype=Object.create(l.prototype),Y(a.prototype,"constructor",a),{extend:E.bind(null,a.prototype)}}}}var ee=Object.getOwnPropertyDescriptor,C=[].slice;function v(a,l,d){return C.call(a,l,d)}function b(a,l){return l(a)}function I(a){if(!a)throw new Error("Assertion Failed")}function K(a){s.setImmediate?setImmediate(a):setTimeout(a,0)}function L(a,l){if(typeof l=="string"&&S(a,l))return a[l];if(!l)return a;if(typeof l!="string"){for(var d=[],f=0,h=l.length;f<h;++f){var g=L(a,l[f]);d.push(g)}return d}var x,w=l.indexOf(".");return w===-1||(x=a[l.substr(0,w)])==null?void 0:L(x,l.substr(w+1))}function B(a,l,d){if(a&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof l!="string"&&"length"in l){I(typeof d!="string"&&"length"in d);for(var f=0,h=l.length;f<h;++f)B(a,l[f],d[f])}else{var g,x,w=l.indexOf(".");w!==-1?(g=l.substr(0,w),(w=l.substr(w+1))===""?d===void 0?p(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=d:B(x=(x=a[g])&&S(a,g)?x:a[g]={},w,d)):d===void 0?p(a)&&!isNaN(parseInt(l))?a.splice(l,1):delete a[l]:a[l]=d}}function V(a){var l,d={};for(l in a)S(a,l)&&(d[l]=a[l]);return d}var q=[].concat;function $(a){return q.apply([],a)}var Ce="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(l){return l+a+"Array"})}))).filter(function(a){return s[a]}),D=new Set(Ce.map(function(a){return s[a]})),J=null;function ne(a){return J=new WeakMap,a=function l(d){if(!d||typeof d!="object")return d;var f=J.get(d);if(f)return f;if(p(d)){f=[],J.set(d,f);for(var h=0,g=d.length;h<g;++h)f.push(l(d[h]))}else if(D.has(d.constructor))f=d;else{var x,w=y(d);for(x in f=w===Object.prototype?{}:Object.create(w),J.set(d,f),d)S(d,x)&&(f[x]=l(d[x]))}return f}(a),J=null,a}var pe={}.toString;function xe(a){return pe.call(a).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof Z=="symbol"?function(a){var l;return a!=null&&(l=a[Z])&&l.apply(a)}:function(){return null};function H(a,l){l=a.indexOf(l),0<=l&&a.splice(l,1)}var X={};function oe(a){var l,d,f,h;if(arguments.length===1){if(p(a))return a.slice();if(this===X&&typeof a=="string")return[a];if(h=de(a))for(d=[];!(f=h.next()).done;)d.push(f.value);else{if(a==null)return[a];if(typeof(l=a.length)!="number")return[a];for(d=new Array(l);l--;)d[l]=a[l]}}else for(l=arguments.length,d=new Array(l);l--;)d[l]=arguments[l];return d}var we=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],at=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ce),ze={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(a,l){this.name=a,this.message=l}function Re(a,l){return a+". Errors: "+Object.keys(l).map(function(d){return l[d].toString()}).filter(function(d,f,h){return h.indexOf(d)===f}).join(`
`)}function Le(a,l,d,f){this.failures=l,this.failedKeys=f,this.successCount=d,this.message=Re(a,l)}function Ue(a,l){this.name="BulkError",this.failures=Object.keys(l).map(function(d){return l[d]}),this.failuresByPos=l,this.message=Re(a,this.failures)}M(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(Le).from(Ae),M(Ue).from(Ae);var tn=at.reduce(function(a,l){return a[l]=l+"Error",a},{}),Ie=Ae,ge=at.reduce(function(a,l){var d=l+"Error";function f(h,g){this.name=d,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=ze[l]||d,this.inner=null)}return M(f).from(Ie),a[l]=f,a},{}),pt=(ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError,Ce.reduce(function(a,l){return a[l+"Error"]=ge[l],a},{}));Ce=at.reduce(function(a,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(a[l+"Error"]=ge[l]),a},{});function Ne(){}function et(a){return a}function vt(a,l){return a==null||a===et?l:function(d){return l(a(d))}}function At(a,l){return function(){a.apply(this,arguments),l.apply(this,arguments)}}function Ft(a,l){return a===Ne?l:function(){var d=a.apply(this,arguments),f=(d!==void 0&&(arguments[0]=d),this.onsuccess),h=this.onerror,g=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return f&&(this.onsuccess=this.onsuccess?At(f,this.onsuccess):f),h&&(this.onerror=this.onerror?At(h,this.onerror):h),g!==void 0?g:d}}function ie(a,l){return a===Ne?l:function(){a.apply(this,arguments);var d=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?At(d,this.onsuccess):d),f&&(this.onerror=this.onerror?At(f,this.onerror):f)}}function je(a,l){return a===Ne?l:function(h){var f=a.apply(this,arguments),h=(m(h,f),this.onsuccess),g=this.onerror,x=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return h&&(this.onsuccess=this.onsuccess?At(h,this.onsuccess):h),g&&(this.onerror=this.onerror?At(g,this.onerror):g),f===void 0?x===void 0?void 0:x:m(f,x)}}function Se(a,l){return a===Ne?l:function(){return l.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function ce(a,l){return a===Ne?l:function(){var d=a.apply(this,arguments);if(d&&typeof d.then=="function"){for(var f=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return d.then(function(){return l.apply(f,g)})}return l.apply(this,arguments)}}Ce.ModifyError=Le,Ce.DexieError=Ae,Ce.BulkError=Ue;var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ut(a){Ee=a}var Dt={},Kt=100,jt=typeof Promise>"u"?[]:(at=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[jt=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(jt),at]:[at,y(at),at]),at=jt[0],Ir=jt[1],Ir=Ir&&Ir.then,nn=at&&at.constructor,rn=!!jt[2],pn=function(a,l){xi.push([a,l]),ba&&(queueMicrotask(Hh),ba=!1)},ys=!0,ba=!0,sr=[],ka=[],vs=et,Rn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ne,pgp:!1,env:{},finalize:Ne},be=Rn,xi=[],lr=0,Ca=[];function fe(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=be;if(typeof a!="function"){if(a!==Dt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ws(this,this._value)}else this._state=null,this._value=null,++l.ref,function d(f,h){try{h(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var x=f._lib&&Ar();g&&typeof g.then=="function"?d(f,function(w,_){g instanceof fe?g._then(w,_):g.then(w,_)}):(f._state=!0,f._value=g,vc(f)),x&&Fr()}},ws.bind(null,f))}catch(g){ws(f,g)}}(this,a)}var xs={get:function(){var a=be,l=Na;function d(f,h){var g=this,x=!a.global&&(a!==be||l!==Na),w=x&&!Bn(),_=new fe(function(z,A){bs(g,new yc(wc(f,a,x,w),wc(h,a,x,w),z,A,a))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return d.prototype=Dt,d},set:function(a){Y(this,"then",a&&a.prototype===Dt?xs:{get:function(){return a},set:xs.set})}};function yc(a,l,d,f,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof l=="function"?l:null,this.resolve=d,this.reject=f,this.psd=h}function ws(a,l){var d,f;ka.push(l),a._state===null&&(d=a._lib&&Ar(),l=vs(l),a._state=!1,a._value=l,f=a,sr.some(function(h){return h._value===f._value})||sr.push(f),vc(a),d)&&Fr()}function vc(a){var l=a._listeners;a._listeners=[];for(var d=0,f=l.length;d<f;++d)bs(a,l[d]);var h=a._PSD;--h.ref||h.finalize(),lr===0&&(++lr,pn(function(){--lr==0&&ks()},[]))}function bs(a,l){if(a._state===null)a._listeners.push(l);else{var d=a._state?l.onFulfilled:l.onRejected;if(d===null)return(a._state?l.resolve:l.reject)(a._value);++l.psd.ref,++lr,pn(qh,[d,a,l])}}function qh(a,l,d){try{var f,h=l._value;!l._state&&ka.length&&(ka=[]),f=Ee&&l._consoleTask?l._consoleTask.run(function(){return a(h)}):a(h),l._state||ka.indexOf(h)!==-1||(g=>{for(var x=sr.length;x;)if(sr[--x]._value===g._value)return sr.splice(x,1)})(l),d.resolve(f)}catch(g){d.reject(g)}finally{--lr==0&&ks(),--d.psd.ref||d.psd.finalize()}}function Hh(){ur(Rn,function(){Ar()&&Fr()})}function Ar(){var a=ys;return ba=ys=!1,a}function Fr(){var a,l,d;do for(;0<xi.length;)for(a=xi,xi=[],d=a.length,l=0;l<d;++l){var f=a[l];f[0].apply(null,f[1])}while(0<xi.length);ba=ys=!0}function ks(){for(var a=sr,l=(sr=[],a.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)}),Ca.slice(0)),d=l.length;d;)l[--d]()}function ja(a){return new fe(Dt,!1,a)}function Ke(a,l){var d=be;return function(){var f=Ar(),h=be;try{return In(d,!0),a.apply(this,arguments)}catch(g){l&&l(g)}finally{In(h,!1),f&&Fr()}}}E(fe.prototype,{then:xs,_then:function(a,l){bs(this,new yc(null,null,a,l,be))},catch:function(a){var l,d;return arguments.length===1?this.then(null,a):(l=a,d=arguments[1],typeof l=="function"?this.then(null,function(f){return(f instanceof l?d:ja)(f)}):this.then(null,function(f){return(f&&f.name===l?d:ja)(f)}))},finally:function(a){return this.then(function(l){return fe.resolve(a()).then(function(){return l})},function(l){return fe.resolve(a()).then(function(){return ja(l)})})},timeout:function(a,l){var d=this;return a<1/0?new fe(function(f,h){var g=setTimeout(function(){return h(new ge.Timeout(l))},a);d.then(f,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Y(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),Rn.env=xc(),E(fe,{all:function(){var a=oe.apply(null,arguments).map(Ta);return new fe(function(l,d){a.length===0&&l([]);var f=a.length;a.forEach(function(h,g){return fe.resolve(h).then(function(x){a[g]=x,--f||l(a)},d)})})},resolve:function(a){return a instanceof fe?a:a&&typeof a.then=="function"?new fe(function(l,d){a.then(l,d)}):new fe(Dt,!0,a)},reject:ja,race:function(){var a=oe.apply(null,arguments).map(Ta);return new fe(function(l,d){a.map(function(f){return fe.resolve(f).then(l,d)})})},PSD:{get:function(){return be},set:function(a){return be=a}},totalEchoes:{get:function(){return Na}},newPSD:Mn,usePSD:ur,scheduler:{get:function(){return pn},set:function(a){pn=a}},rejectionMapper:{get:function(){return vs},set:function(a){vs=a}},follow:function(a,l){return new fe(function(d,f){return Mn(function(h,g){var x=be;x.unhandleds=[],x.onunhandled=g,x.finalize=At(function(){var w,_=this;w=function(){_.unhandleds.length===0?h():g(_.unhandleds[0])},Ca.push(function z(){w(),Ca.splice(Ca.indexOf(z),1)}),++lr,pn(function(){--lr==0&&ks()},[])},x.finalize),a()},l,d,f)})}}),nn&&(nn.allSettled&&Y(fe,"allSettled",function(){var a=oe.apply(null,arguments).map(Ta);return new fe(function(l){a.length===0&&l([]);var d=a.length,f=new Array(d);a.forEach(function(h,g){return fe.resolve(h).then(function(x){return f[g]={status:"fulfilled",value:x}},function(x){return f[g]={status:"rejected",reason:x}}).then(function(){return--d||l(f)})})})}),nn.any&&typeof AggregateError<"u"&&Y(fe,"any",function(){var a=oe.apply(null,arguments).map(Ta);return new fe(function(l,d){a.length===0&&d(new AggregateError([]));var f=a.length,h=new Array(f);a.forEach(function(g,x){return fe.resolve(g).then(function(w){return l(w)},function(w){h[x]=w,--f||d(new AggregateError(h))})})})}),nn.withResolvers)&&(fe.withResolvers=nn.withResolvers);var ut={awaits:0,echoes:0,id:0},Yh=0,Sa=[],Ea=0,Na=0,Qh=0;function Mn(a,x,d,f){var h=be,g=Object.create(h),x=(g.parent=h,g.ref=0,g.global=!1,g.id=++Qh,Rn.env,g.env=rn?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject}:{},x&&m(g,x),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},ur(g,a,d,f));return g.ref===0&&g.finalize(),x}function Dr(){return ut.id||(ut.id=++Yh),++ut.awaits,ut.echoes+=Kt,ut.id}function Bn(){return!!ut.awaits&&(--ut.awaits==0&&(ut.id=0),ut.echoes=ut.awaits*Kt,!0)}function Ta(a){return ut.echoes&&a&&a.constructor===nn?(Dr(),a.then(function(l){return Bn(),l},function(l){return Bn(),tt(l)})):a}function Xh(){var a=Sa[Sa.length-1];Sa.pop(),In(a,!1)}function In(a,l){var d,f,h=be;(l?!ut.echoes||Ea++&&a===be:!Ea||--Ea&&a===be)||queueMicrotask(l?(function(g){++Na,ut.echoes&&--ut.echoes!=0||(ut.echoes=ut.awaits=ut.id=0),Sa.push(be),In(g,!0)}).bind(null,a):Xh),a!==be&&(be=a,h===Rn&&(Rn.env=xc()),rn)&&(d=Rn.env.Promise,f=a.env,h.global||a.global)&&(Object.defineProperty(s,"Promise",f.PromiseProp),d.all=f.all,d.race=f.race,d.resolve=f.resolve,d.reject=f.reject,f.allSettled&&(d.allSettled=f.allSettled),f.any)&&(d.any=f.any)}function xc(){var a=s.Promise;return rn?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function ur(a,l,d,f,h){var g=be;try{return In(a,!0),l(d,f,h)}finally{In(g,!1)}}function wc(a,l,d,f){return typeof a!="function"?a:function(){var h=be;d&&Dr(),In(l,!0);try{return a.apply(this,arguments)}finally{In(h,!1),f&&queueMicrotask(Bn)}}}function Cs(a){Promise===nn&&ut.echoes===0?Ea===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Ir).indexOf("[native code]")===-1&&(Dr=Bn=Ne);var tt=fe.reject,cr="",kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bc="String expected.",Pr=[],_a="__dbnames",js="readonly",Ss="readwrite";function dr(a,l){return a?l?function(){return a.apply(this,arguments)&&l.apply(this,arguments)}:a:l}var kc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Aa(a){return typeof a!="string"||/\./.test(a)?function(l){return l}:function(l){return l[a]===void 0&&a in l&&delete(l=ne(l))[a],l}}function Cc(){throw ge.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Fe(a,l){try{var d=jc(a),f=jc(l);if(d!==f)return d==="Array"?1:f==="Array"?-1:d==="binary"?1:f==="binary"?-1:d==="string"?1:f==="string"?-1:d==="Date"?1:f!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return l<a?1:a<l?-1:0;case"binary":for(var h=Sc(a),g=Sc(l),x=h.length,w=g.length,_=x<w?x:w,z=0;z<_;++z)if(h[z]!==g[z])return h[z]<g[z]?-1:1;return x===w?0:x<w?-1:1;case"Array":for(var A=a,N=l,P=A.length,R=N.length,F=P<R?P:R,T=0;T<F;++T){var W=Fe(A[T],N[T]);if(W!==0)return W}return P===R?0:P<R?-1:1}}catch{}return NaN}function jc(a){var l=typeof a;return l=="object"&&(ArrayBuffer.isView(a)||(l=xe(a))==="ArrayBuffer")?"binary":l}function Sc(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}function Fa(a,l,d){var f=a.schema.yProps;return f?(l&&0<d.numFailures&&(l=l.filter(function(h,g){return!d.failures[g]})),Promise.all(f.map(function(h){return h=h.updatesTable,l?a.db.table(h).where("k").anyOf(l).delete():a.db.table(h).clear()})).then(function(){return d})):d}Ec.prototype.execute=function(a){var l=this["@@propmod"];if(l.add!==void 0){var d=l.add;if(p(d))return o(o([],p(a)?a:[],!0),d).sort();if(typeof d=="number")return(Number(a)||0)+d;if(typeof d=="bigint")try{return BigInt(a)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(l.remove!==void 0){var f=l.remove;if(p(f))return p(a)?a.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(a)-f;if(typeof f=="bigint")try{return BigInt(a)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return d=(d=l.replacePrefix)==null?void 0:d[0],d&&typeof a=="string"&&a.startsWith(d)?l.replacePrefix[1]+a.substring(d.length):a};var wi=Ec;function Ec(a){this["@@propmod"]=a}function Nc(a,l){for(var d=c(l),f=d.length,h=!1,g=0;g<f;++g){var x=d[g],w=l[x],_=L(a,x);w instanceof wi?(B(a,x,w.execute(_)),h=!0):_!==w&&(B(a,x,w),h=!0)}return h}$e.prototype._trans=function(a,l,d){var f=this._tx||be.trans,h=this.name,g=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function x(z,A,N){if(N.schema[h])return l(N.idbtrans,N);throw new ge.NotFound("Table "+h+" not part of transaction")}var w=Ar();try{var _=f&&f.db._novip===this.db._novip?f===be.trans?f._promise(a,x,d):Mn(function(){return f._promise(a,x,d)},{trans:f,transless:be.transless||be}):function z(A,N,P,R){if(A.idbdb&&(A._state.openComplete||be.letThrough||A._vip)){var F=A._createTransaction(N,P,A._dbSchema);try{F.create(),A._state.PR1398_maxLoop=3}catch(T){return T.name===tn.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return z(A,N,P,R)})):tt(T)}return F._promise(N,function(T,W){return Mn(function(){return be.trans=F,R(T,W,F)})}).then(function(T){if(N==="readwrite")try{F.idbtrans.commit()}catch{}return N==="readonly"?T:F._completion.then(function(){return T})})}if(A._state.openComplete)return tt(new ge.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return tt(new ge.DatabaseClosed);A.open().catch(Ne)}return A._state.dbReadyPromise.then(function(){return z(A,N,P,R)})}(this.db,a,[this.name],x);return g&&(_._consoleTask=g,_=_.catch(function(z){return console.trace(z),tt(z)})),_}finally{w&&Fr()}},$e.prototype.get=function(a,l){var d=this;return a&&a.constructor===Object?this.where(a).first(l):a==null?tt(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return d.core.get({trans:f,key:a}).then(function(h){return d.hook.reading.fire(h)})}).then(l)},$e.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(p(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var l=c(a);if(l.length===1)return this.where(l[0]).equals(a[l[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&l.every(function(z){return 0<=w.keyPath.indexOf(z)})){for(var _=0;_<l.length;++_)if(l.indexOf(w.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(w,_){return w.keyPath.length-_.keyPath.length})[0];if(d&&this.db._maxKey!==cr)return x=d.keyPath.slice(0,l.length),this.where(x).equals(x.map(function(w){return a[w]}));!d&&Ee&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function h(w,_){return Fe(w,_)===0}var x=l.reduce(function(A,_){var z=A[0],A=A[1],N=f[_],P=a[_];return[z||N,z||!N?dr(A,N&&N.multi?function(R){return R=L(R,_),p(R)&&R.some(function(F){return h(P,F)})}:function(R){return h(P,L(R,_))}):A]},[null,null]),g=x[0],x=x[1];return g?this.where(g.name).equals(a[g.keyPath]).filter(x):d?this.filter(x):this.where(l).equals("")},$e.prototype.filter=function(a){return this.toCollection().and(a)},$e.prototype.count=function(a){return this.toCollection().count(a)},$e.prototype.offset=function(a){return this.toCollection().offset(a)},$e.prototype.limit=function(a){return this.toCollection().limit(a)},$e.prototype.each=function(a){return this.toCollection().each(a)},$e.prototype.toArray=function(a){return this.toCollection().toArray(a)},$e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$e.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,p(a)?"[".concat(a.join("+"),"]"):a))},$e.prototype.reverse=function(){return this.toCollection().reverse()},$e.prototype.mapToClass=function(a){for(var l=this.db,d=this.name,f=((this.schema.mappedClass=a).prototype instanceof Cc&&(a=(x=>{var w=A,_=x;if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function z(){this.constructor=w}function A(){return x!==null&&x.apply(this,arguments)||this}return n(w,_),w.prototype=_===null?Object.create(_):(z.prototype=_.prototype,new z),Object.defineProperty(A.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),A.prototype.table=function(){return d},A})(a)),new Set),h=a.prototype;h;h=y(h))Object.getOwnPropertyNames(h).forEach(function(x){return f.add(x)});function g(x){if(!x)return x;var w,_=Object.create(a.prototype);for(w in x)if(!f.has(w))try{_[w]=x[w]}catch{}return _}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),a},$e.prototype.defineClass=function(){return this.mapToClass(function(a){m(this,a)})},$e.prototype.add=function(a,l){var d=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,x=a;return g&&h&&(x=Aa(g)(a)),this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"add",keys:l!=null?[l]:null,values:[x]})}).then(function(w){return w.numFailures?fe.reject(w.failures[0]):w.lastResult}).then(function(w){if(g)try{B(a,g,w)}catch{}return w})},$e.prototype.upsert=function(a,l){var d=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return d.core.get({trans:h,key:a}).then(function(g){var x=g??{};return Nc(x,l),f&&B(x,f,a),d.core.mutate({trans:h,type:"put",values:[x],keys:[a],upsert:!0,updates:{keys:[a],changeSpecs:[l]}}).then(function(w){return w.numFailures?fe.reject(w.failures[0]):!!g})})})},$e.prototype.update=function(a,l){return typeof a!="object"||p(a)?this.where(":id").equals(a).modify(l):(a=L(a,this.schema.primKey.keyPath))===void 0?tt(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(l)},$e.prototype.put=function(a,l){var d=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,x=a;return g&&h&&(x=Aa(g)(a)),this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"put",values:[x],keys:l!=null?[l]:null})}).then(function(w){return w.numFailures?fe.reject(w.failures[0]):w.lastResult}).then(function(w){if(g)try{B(a,g,w)}catch{}return w})},$e.prototype.delete=function(a){var l=this;return this._trans("readwrite",function(d){return l.core.mutate({trans:d,type:"delete",keys:[a]}).then(function(f){return Fa(l,[a],f)}).then(function(f){return f.numFailures?fe.reject(f.failures[0]):void 0})})},$e.prototype.clear=function(){var a=this;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"deleteRange",range:kc}).then(function(d){return Fa(a,null,d)})}).then(function(l){return l.numFailures?fe.reject(l.failures[0]):void 0})},$e.prototype.bulkGet=function(a){var l=this;return this._trans("readonly",function(d){return l.core.getMany({keys:a,trans:d}).then(function(f){return f.map(function(h){return l.hook.reading.fire(h)})})})},$e.prototype.bulkAdd=function(a,l,d){var f=this,h=Array.isArray(l)?l:void 0,g=(d=d||(h?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(x){var w=f.schema.primKey,z=w.auto,w=w.keyPath;if(w&&h)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var _=a.length,z=w&&z?a.map(Aa(w)):a;return f.core.mutate({trans:x,type:"add",keys:h,values:z,wantResults:g}).then(function(A){var N=A.numFailures,P=A.failures;if(N===0)return g?A.results:A.lastResult;throw new Ue("".concat(f.name,".bulkAdd(): ").concat(N," of ").concat(_," operations failed"),P)})})},$e.prototype.bulkPut=function(a,l,d){var f=this,h=Array.isArray(l)?l:void 0,g=(d=d||(h?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(x){var w=f.schema.primKey,z=w.auto,w=w.keyPath;if(w&&h)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var _=a.length,z=w&&z?a.map(Aa(w)):a;return f.core.mutate({trans:x,type:"put",keys:h,values:z,wantResults:g}).then(function(A){var N=A.numFailures,P=A.failures;if(N===0)return g?A.results:A.lastResult;throw new Ue("".concat(f.name,".bulkPut(): ").concat(N," of ").concat(_," operations failed"),P)})})},$e.prototype.bulkUpdate=function(a){var l=this,d=this.core,f=a.map(function(x){return x.key}),h=a.map(function(x){return x.changes}),g=[];return this._trans("readwrite",function(x){return d.getMany({trans:x,keys:f,cache:"clone"}).then(function(w){var _=[],z=[],A=(a.forEach(function(N,P){var R=N.key,F=N.changes,T=w[P];if(T){for(var W=0,U=Object.keys(F);W<U.length;W++){var O=U[W],Q=F[O];if(O===l.schema.primKey.keyPath){if(Fe(Q,R)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else B(T,O,Q)}g.push(P),_.push(R),z.push(T)}}),_.length);return d.mutate({trans:x,type:"put",keys:_,values:z,updates:{keys:f,changeSpecs:h}}).then(function(N){var P=N.numFailures,R=N.failures;if(P===0)return A;for(var F=0,T=Object.keys(R);F<T.length;F++){var W,U=T[F],O=g[Number(U)];O!=null&&(W=R[U],delete R[U],R[O]=W)}throw new Ue("".concat(l.name,".bulkUpdate(): ").concat(P," of ").concat(A," operations failed"),R)})})})},$e.prototype.bulkDelete=function(a){var l=this,d=a.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:a}).then(function(h){return Fa(l,a,h)})}).then(function(f){var h=f.numFailures,g=f.failures;if(h===0)return f.lastResult;throw new Ue("".concat(l.name,".bulkDelete(): ").concat(h," of ").concat(d," operations failed"),g)})};var Tc=$e;function $e(){}function bi(a){function l(x,w){if(w){for(var _=arguments.length,z=new Array(_-1);--_;)z[_-1]=arguments[_];return d[x].subscribe.apply(null,z),a}if(typeof x=="string")return d[x]}var d={};l.addEventType=g;for(var f=1,h=arguments.length;f<h;++f)g(arguments[f]);return l;function g(x,w,_){var z,A;if(typeof x!="object")return w=w||Se,A={subscribers:[],fire:_=_||Ne,subscribe:function(N){A.subscribers.indexOf(N)===-1&&(A.subscribers.push(N),A.fire=w(A.fire,N))},unsubscribe:function(N){A.subscribers=A.subscribers.filter(function(P){return P!==N}),A.fire=A.subscribers.reduce(w,_)}},d[x]=l[x]=A;c(z=x).forEach(function(N){var P=z[N];if(p(P))g(N,z[N][0],z[N][1]);else{if(P!=="asap")throw new ge.InvalidArgument("Invalid event config");var R=g(N,et,function(){for(var F=arguments.length,T=new Array(F);F--;)T[F]=arguments[F];R.subscribers.forEach(function(W){K(function(){W.apply(null,T)})})})}})}}function ki(a,l){return M(l).from({prototype:a}),l}function Rr(a,l){return!(a.filter||a.algorithm||a.or)&&(l?a.justLimit:!a.replayFilter)}function Es(a,l){a.filter=dr(a.filter,l)}function Ns(a,l,d){var f=a.replayFilter;a.replayFilter=f?function(){return dr(f(),l())}:l,a.justLimit=d&&!f}function Da(a,l){if(a.isPrimKey)return l.primaryKey;var d=l.getIndexByKeyPath(a.index);if(d)return d;throw new ge.Schema("KeyPath "+a.index+" on object store "+l.name+" is not indexed")}function _c(a,l,d){var f=Da(a,l.schema);return l.openCursor({trans:d,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:f,range:a.range}})}function Pa(a,l,d,f){var h,g,x=a.replayFilter?dr(a.filter,a.replayFilter()):a.filter;return a.or?(h={},g=function(w,_,z){var A,N;x&&!x(_,z,function(P){return _.stop(P)},function(P){return _.fail(P)})||((N=""+(A=_.primaryKey))=="[object ArrayBuffer]"&&(N=""+new Uint8Array(A)),S(h,N))||(h[N]=!0,l(w,_,z))},Promise.all([a.or._iterate(g,d),Ac(_c(a,f,d),a.algorithm,g,!a.keysOnly&&a.valueMapper)])):Ac(_c(a,f,d),dr(a.algorithm,x),l,!a.keysOnly&&a.valueMapper)}function Ac(a,l,d,f){var h=Ke(f?function(g,x,w){return d(f(g),x,w)}:d);return a.then(function(g){if(g)return g.start(function(){var x=function(){return g.continue()};l&&!l(g,function(w){return x=w},function(w){g.stop(w),x=Ne},function(w){g.fail(w),x=Ne})||h(g.value,g,function(w){return x=w}),x()})})}Me.prototype._read=function(a,l){var d=this._ctx;return d.error?d.table._trans(null,tt.bind(null,d.error)):d.table._trans("readonly",a).then(l)},Me.prototype._write=function(a){var l=this._ctx;return l.error?l.table._trans(null,tt.bind(null,l.error)):l.table._trans("readwrite",a,"locked")},Me.prototype._addAlgorithm=function(a){var l=this._ctx;l.algorithm=dr(l.algorithm,a)},Me.prototype._iterate=function(a,l){return Pa(this._ctx,a,l,this._ctx.table.core)},Me.prototype.clone=function(a){var l=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return a&&m(d,a),l._ctx=d,l},Me.prototype.raw=function(){return this._ctx.valueMapper=null,this},Me.prototype.each=function(a){var l=this._ctx;return this._read(function(d){return Pa(l,a,d,l.table.core)})},Me.prototype.count=function(a){var l=this;return this._read(function(d){var f,h=l._ctx,g=h.table.core;return Rr(h,!0)?g.count({trans:d,query:{index:Da(h,g.schema),range:h.range}}).then(function(x){return Math.min(x,h.limit)}):(f=0,Pa(h,function(){return++f,!1},d,g).then(function(){return f}))}).then(a)},Me.prototype.sortBy=function(a,l){var d=a.split(".").reverse(),f=d[0],h=d.length-1;function g(_,z){return z?g(_[d[z]],z-1):_[f]}var x=this._ctx.dir==="next"?1:-1;function w(_,z){return Fe(g(_,h),g(z,h))*x}return this.toArray(function(_){return _.sort(w)}).then(l)},Me.prototype.toArray=function(a){var l=this;return this._read(function(d){var f,h,g,x=l._ctx;return x.dir==="next"&&Rr(x,!0)&&0<x.limit?(f=x.valueMapper,h=Da(x,x.table.core.schema),x.table.core.query({trans:d,limit:x.limit,values:!0,query:{index:h,range:x.range}}).then(function(w){return w=w.result,f?w.map(f):w})):(g=[],Pa(x,function(w){return g.push(w)},d,x.table.core).then(function(){return g}))},a)},Me.prototype.offset=function(a){var l=this._ctx;return a<=0||(l.offset+=a,Rr(l)?Ns(l,function(){var d=a;return function(f,h){return d===0||(d===1?--d:h(function(){f.advance(d),d=0}),!1)}}):Ns(l,function(){var d=a;return function(){return--d<0}})),this},Me.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),Ns(this._ctx,function(){var l=a;return function(d,f,h){return--l<=0&&f(h),0<=l}},!0),this},Me.prototype.until=function(a,l){return Es(this._ctx,function(d,f,h){return!a(d.value)||(f(h),l)}),this},Me.prototype.first=function(a){return this.limit(1).toArray(function(l){return l[0]}).then(a)},Me.prototype.last=function(a){return this.reverse().first(a)},Me.prototype.filter=function(a){var l;return Es(this._ctx,function(d){return a(d.value)}),(l=this._ctx).isMatch=dr(l.isMatch,a),this},Me.prototype.and=function(a){return this.filter(a)},Me.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},Me.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Me.prototype.desc=function(){return this.reverse()},Me.prototype.eachKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){a(f.key,f)})},Me.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},Me.prototype.eachPrimaryKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){a(f.primaryKey,f)})},Me.prototype.keys=function(a){var l=this._ctx,d=(l.keysOnly=!l.isMatch,[]);return this.each(function(f,h){d.push(h.key)}).then(function(){return d}).then(a)},Me.prototype.primaryKeys=function(a){var l=this._ctx;if(l.dir==="next"&&Rr(l,!0)&&0<l.limit)return this._read(function(f){var h=Da(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:h,range:l.range}})}).then(function(f){return f.result}).then(a);l.keysOnly=!l.isMatch;var d=[];return this.each(function(f,h){d.push(h.primaryKey)}).then(function(){return d}).then(a)},Me.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},Me.prototype.firstKey=function(a){return this.limit(1).keys(function(l){return l[0]}).then(a)},Me.prototype.lastKey=function(a){return this.reverse().firstKey(a)},Me.prototype.distinct=function(){var a,l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];return l&&l.multi&&(a={},Es(this._ctx,function(f){var f=f.primaryKey.toString(),h=S(a,f);return a[f]=!0,!h})),this},Me.prototype.modify=function(a){var l=this,d=this._ctx;return this._write(function(f){function h(T,W){var U=W.failures;P+=T-W.numFailures;for(var O=0,Q=c(U);O<Q.length;O++){var te=Q[O];N.push(U[te])}}var g=typeof a=="function"?a:function(T){return Nc(T,a)},x=d.table.core,A=x.schema.primaryKey,w=A.outbound,_=A.extractKey,z=200,A=l.db._options.modifyChunkSize,N=(A&&(z=typeof A=="object"?A[x.name]||A["*"]||200:A),[]),P=0,R=[],F=a===Fc;return l.clone().primaryKeys().then(function(T){function W(O){var Q=Math.min(z,T.length-O),te=T.slice(O,O+Q);return(F?Promise.resolve([]):x.getMany({trans:f,keys:te,cache:"immutable"})).then(function(le){var ue=[],re=[],me=w?[]:null,he=F?te:[];if(!F)for(var se=0;se<Q;++se){var ye=le[se],De={value:ne(ye),primKey:T[O+se]};g.call(De,De.value,De)!==!1&&(De.value==null?he.push(T[O+se]):w||Fe(_(ye),_(De.value))===0?(re.push(De.value),w&&me.push(T[O+se])):(he.push(T[O+se]),ue.push(De.value)))}return Promise.resolve(0<ue.length&&x.mutate({trans:f,type:"add",values:ue}).then(function(Be){for(var ke in Be.failures)he.splice(parseInt(ke),1);h(ue.length,Be)})).then(function(){return(0<re.length||U&&typeof a=="object")&&x.mutate({trans:f,type:"put",keys:me,values:re,criteria:U,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<O}).then(function(Be){return h(re.length,Be)})}).then(function(){return(0<he.length||U&&F)&&x.mutate({trans:f,type:"delete",keys:he,criteria:U,isAdditionalChunk:0<O}).then(function(Be){return Fa(d.table,he,Be)}).then(function(Be){return h(he.length,Be)})}).then(function(){return T.length>O+Q&&W(O+z)})})}var U=Rr(d)&&d.limit===1/0&&(typeof a!="function"||F)&&{index:d.index,range:d.range};return W(0).then(function(){if(0<N.length)throw new Le("Error modifying one or more objects",N,P,R);return T.length})})})},Me.prototype.delete=function(){var a=this._ctx,l=a.range;return!Rr(a)||a.table.schema.yProps||!a.isPrimKey&&l.type!==3?this.modify(Fc):this._write(function(d){var f=a.table.core.schema.primaryKey,h=l;return a.table.core.count({trans:d,query:{index:f,range:h}}).then(function(g){return a.table.core.mutate({trans:d,type:"deleteRange",range:h}).then(function(_){var w=_.failures,_=_.numFailures;if(_)throw new Le("Could not delete some values",Object.keys(w).map(function(z){return w[z]}),g-_);return g-_})})})};var Zh=Me;function Me(){}var Fc=function(a,l){return l.value=null};function Jh(a,l){return a<l?-1:a===l?0:1}function em(a,l){return l<a?-1:a===l?0:1}function Ot(a,l,d){return a=a instanceof Pc?new a.Collection(a):a,a._ctx.error=new(d||TypeError)(l),a}function Mr(a){return new a.Collection(a,function(){return Dc("")}).limit(0)}function Ra(R,l,d,f){var h,g,x,w,_,z,A,N=d.length;if(!d.every(function(T){return typeof T=="string"}))return Ot(R,bc);function P(T){h=T==="next"?function(U){return U.toUpperCase()}:function(U){return U.toLowerCase()},g=T==="next"?function(U){return U.toLowerCase()}:function(U){return U.toUpperCase()},x=T==="next"?Jh:em;var W=d.map(function(U){return{lower:g(U),upper:h(U)}}).sort(function(U,O){return x(U.lower,O.lower)});w=W.map(function(U){return U.upper}),_=W.map(function(U){return U.lower}),A=(z=T)==="next"?"":f}P("next");var R=new R.Collection(R,function(){return On(w[0],_[N-1]+f)}),F=(R._ondirectionchange=function(T){P(T)},0);return R._addAlgorithm(function(T,W,U){var O=T.key;if(typeof O=="string"){var Q=g(O);if(l(Q,_,F))return!0;for(var te=null,le=F;le<N;++le){var ue=((re,me,he,se,ye,De)=>{for(var Be=Math.min(re.length,se.length),ke=-1,Te=0;Te<Be;++Te){var He=me[Te];if(He!==se[Te])return ye(re[Te],he[Te])<0?re.substr(0,Te)+he[Te]+he.substr(Te+1):ye(re[Te],se[Te])<0?re.substr(0,Te)+se[Te]+he.substr(Te+1):0<=ke?re.substr(0,ke)+me[ke]+he.substr(ke+1):null;ye(re[Te],He)<0&&(ke=Te)}return Be<se.length&&De==="next"?re+he.substr(re.length):Be<re.length&&De==="prev"?re.substr(0,he.length):ke<0?null:re.substr(0,ke)+se[ke]+he.substr(ke+1)})(O,Q,w[le],_[le],x,z);ue===null&&te===null?F=le+1:(te===null||0<x(te,ue))&&(te=ue)}W(te!==null?function(){T.continue(te+A)}:U)}return!1}),R}function On(a,l,d,f){return{type:2,lower:a,upper:l,lowerOpen:d,upperOpen:f}}function Dc(a){return{type:1,lower:a,upper:a}}Object.defineProperty(ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ct.prototype.between=function(a,l,d,f){d=d!==!1,f=f===!0;try{return 0<this._cmp(a,l)||this._cmp(a,l)===0&&(d||f)&&(!d||!f)?Mr(this):new this.Collection(this,function(){return On(a,l,!d,!f)})}catch{return Ot(this,kn)}},ct.prototype.equals=function(a){return a==null?Ot(this,kn):new this.Collection(this,function(){return Dc(a)})},ct.prototype.above=function(a){return a==null?Ot(this,kn):new this.Collection(this,function(){return On(a,void 0,!0)})},ct.prototype.aboveOrEqual=function(a){return a==null?Ot(this,kn):new this.Collection(this,function(){return On(a,void 0,!1)})},ct.prototype.below=function(a){return a==null?Ot(this,kn):new this.Collection(this,function(){return On(void 0,a,!1,!0)})},ct.prototype.belowOrEqual=function(a){return a==null?Ot(this,kn):new this.Collection(this,function(){return On(void 0,a)})},ct.prototype.startsWith=function(a){return typeof a!="string"?Ot(this,bc):this.between(a,a+cr,!0,!0)},ct.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Ra(this,function(l,d){return l.indexOf(d[0])===0},[a],cr)},ct.prototype.equalsIgnoreCase=function(a){return Ra(this,function(l,d){return l===d[0]},[a],"")},ct.prototype.anyOfIgnoreCase=function(){var a=oe.apply(X,arguments);return a.length===0?Mr(this):Ra(this,function(l,d){return d.indexOf(l)!==-1},a,"")},ct.prototype.startsWithAnyOfIgnoreCase=function(){var a=oe.apply(X,arguments);return a.length===0?Mr(this):Ra(this,function(l,d){return d.some(function(f){return l.indexOf(f)===0})},a,cr)},ct.prototype.anyOf=function(){var a,l,d=this,f=oe.apply(X,arguments),h=this._cmp;try{f.sort(h)}catch{return Ot(this,kn)}return f.length===0?Mr(this):((a=new this.Collection(this,function(){return On(f[0],f[f.length-1])}))._ondirectionchange=function(g){h=g==="next"?d._ascending:d._descending,f.sort(h)},l=0,a._addAlgorithm(function(g,x,w){for(var _=g.key;0<h(_,f[l]);)if(++l===f.length)return x(w),!1;return h(_,f[l])===0||(x(function(){g.continue(f[l])}),!1)}),a)},ct.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ct.prototype.noneOf=function(){var a=oe.apply(X,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Ot(this,kn)}var l=a.reduce(function(d,f){return d?d.concat([[d[d.length-1][1],f]]):[[-1/0,f]]},null);return l.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},ct.prototype.inAnyRange=function(a,U){var d=this,f=this._cmp,h=this._ascending,g=this._descending,x=this._min,w=this._max;if(a.length===0)return Mr(this);if(!a.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&h(O[0],O[1])<=0}))return Ot(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var _=!U||U.includeLowers!==!1,z=U&&U.includeUppers===!0,A,N=h;function P(O,Q){return N(O[0],Q[0])}try{(A=a.reduce(function(O,Q){for(var te=0,le=O.length;te<le;++te){var ue=O[te];if(f(Q[0],ue[1])<0&&0<f(Q[1],ue[0])){ue[0]=x(ue[0],Q[0]),ue[1]=w(ue[1],Q[1]);break}}return te===le&&O.push(Q),O},[])).sort(P)}catch{return Ot(this,kn)}var R=0,F=z?function(O){return 0<h(O,A[R][1])}:function(O){return 0<=h(O,A[R][1])},T=_?function(O){return 0<g(O,A[R][0])}:function(O){return 0<=g(O,A[R][0])},W=F,U=new this.Collection(this,function(){return On(A[0][0],A[A.length-1][1],!_,!z)});return U._ondirectionchange=function(O){N=O==="next"?(W=F,h):(W=T,g),A.sort(P)},U._addAlgorithm(function(O,Q,te){for(var le,ue=O.key;W(ue);)if(++R===A.length)return Q(te),!1;return!F(le=ue)&&!T(le)||(d._cmp(ue,A[R][1])===0||d._cmp(ue,A[R][0])===0||Q(function(){N===h?O.continue(A[R][0]):O.continue(A[R][1])}),!1)}),U},ct.prototype.startsWithAnyOf=function(){var a=oe.apply(X,arguments);return a.every(function(l){return typeof l=="string"})?a.length===0?Mr(this):this.inAnyRange(a.map(function(l){return[l,l+cr]})):Ot(this,"startsWithAnyOf() only works with strings")};var Pc=ct;function ct(){}function hn(a){return Ke(function(l){return Ci(l),a(l.target.error),!1})}function Ci(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var ji="storagemutated",Ts="x-storagemutated-1",zn=bi(null,ji),tm=(mn.prototype._lock=function(){return I(!be.global),++this._reculock,this._reculock!==1||be.global||(be.lockOwnerFor=this),this},mn.prototype._unlock=function(){if(I(!be.global),--this._reculock==0)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{ur(a[1],a[0])}catch{}}return this},mn.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},mn.prototype.create=function(a){var l=this;if(this.mode){var d=this.db.idbdb,f=this.db._state.dbOpenError;if(I(!this.idbtrans),!a&&!d)switch(f&&f.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(f);case"MissingAPIError":throw new ge.MissingAPI(f.message,f);default:throw new ge.OpenFailed(f)}if(!this.active)throw new ge.TransactionInactive;I(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ke(function(h){Ci(h),l._reject(a.error)}),a.onabort=Ke(function(h){Ci(h),l.active&&l._reject(new ge.Abort(a.error)),l.active=!1,l.on("abort").fire(h)}),a.oncomplete=Ke(function(){l.active=!1,l._resolve(),"mutatedParts"in a&&zn.storagemutated.fire(a.mutatedParts)})}return this},mn.prototype._promise=function(a,l,d){var f,h=this;return a==="readwrite"&&this.mode!=="readwrite"?tt(new ge.ReadOnly("Transaction is readonly")):this.active?this._locked()?new fe(function(g,x){h._blockedFuncs.push([function(){h._promise(a,l,d).then(g,x)},be])}):d?Mn(function(){var g=new fe(function(x,w){h._lock();var _=l(x,w,h);_&&_.then&&_.then(x,w)});return g.finally(function(){return h._unlock()}),g._lib=!0,g}):((f=new fe(function(g,x){var w=l(g,x,h);w&&w.then&&w.then(g,x)}))._lib=!0,f):tt(new ge.TransactionInactive)},mn.prototype._root=function(){return this.parent?this.parent._root():this},mn.prototype.waitFor=function(a){var l,d=this._root(),f=fe.resolve(a),h=(d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return f}):(d._waitingFor=f,d._waitingQueue=[],l=d.idbtrans.objectStore(d.storeNames[0]),function g(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(l.get(-1/0).onsuccess=g)}()),d._waitingFor);return new fe(function(g,x){f.then(function(w){return d._waitingQueue.push(Ke(g.bind(null,w)))},function(w){return d._waitingQueue.push(Ke(x.bind(null,w)))}).finally(function(){d._waitingFor===h&&(d._waitingFor=null)})})},mn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},mn.prototype.table=function(a){var l=this._memoizedTables||(this._memoizedTables={});if(S(l,a))return l[a];var d=this.schema[a];if(d)return(d=new this.db.Table(a,d,this)).core=this.db.core.table(a),l[a]=d;throw new ge.NotFound("Table "+a+" not part of transaction")},mn);function mn(){}function _s(a,l,d,f,h,g,x,w){return{name:a,keyPath:l,unique:d,multi:f,auto:h,compound:g,src:(d&&!x?"&":"")+(f?"*":"")+(h?"++":"")+Rc(l),type:w}}function Rc(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function As(a,l,d){return{name:a,primKey:l,indexes:d,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},d.reduce(function(h,g,x){return g=f(g,x),g&&(h[g[0]]=g[1]),h},{}))};var f}var Si=function(a){try{return a.only([[]]),Si=function(){return[[]]},[[]]}catch{return Si=function(){return cr},cr}};function Fs(a){return a==null?function(){}:typeof a=="string"?(l=a).split(".").length===1?function(d){return d[l]}:function(d){return L(d,l)}:function(d){return L(d,a)};var l}function Mc(a){return[].slice.call(a)}var nm=0;function Ei(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function rm(a,l,_){function f(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=F.lower,P=F.upper,R=F.lowerOpen,F=F.upperOpen;return N===void 0?P===void 0?null:l.upperBound(P,!!F):P===void 0?l.lowerBound(N,!!R):l.bound(N,P,!!R,!!F)}function h(A){var N,P=A.name;return{name:P,schema:A,mutate:function(R){var F=R.trans,T=R.type,W=R.keys,U=R.values,O=R.range;return new Promise(function(Q,te){Q=Ke(Q);var le=F.objectStore(P),ue=le.keyPath==null,re=T==="put"||T==="add";if(!re&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var me,he=(W||U||{length:1}).length;if(W&&U&&W.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(he===0)return Q({numFailures:0,failures:{},results:[],lastResult:void 0});function se(Ze){++Be,Ci(Ze)}var ye=[],De=[],Be=0;if(T==="deleteRange"){if(O.type===4)return Q({numFailures:Be,failures:De,results:[],lastResult:void 0});O.type===3?ye.push(me=le.clear()):ye.push(me=le.delete(f(O)))}else{var ue=re?ue?[U,W]:[U,null]:[W,null],ke=ue[0],Te=ue[1];if(re)for(var He=0;He<he;++He)ye.push(me=Te&&Te[He]!==void 0?le[T](ke[He],Te[He]):le[T](ke[He])),me.onerror=se;else for(He=0;He<he;++He)ye.push(me=le[T](ke[He])),me.onerror=se}function qt(Ze){Ze=Ze.target.result,ye.forEach(function(hr,Ys){return hr.error!=null&&(De[Ys]=hr.error)}),Q({numFailures:Be,failures:De,results:T==="delete"?W:ye.map(function(hr){return hr.result}),lastResult:Ze})}me.onerror=function(Ze){se(Ze),qt(Ze)},me.onsuccess=qt})},getMany:function(R){var F=R.trans,T=R.keys;return new Promise(function(W,U){W=Ke(W);for(var O,Q=F.objectStore(P),te=T.length,le=new Array(te),ue=0,re=0,me=function(ye){ye=ye.target,le[ye._pos]=ye.result,++re===ue&&W(le)},he=hn(U),se=0;se<te;++se)T[se]!=null&&((O=Q.get(T[se]))._pos=se,O.onsuccess=me,O.onerror=he,++ue);ue===0&&W(le)})},get:function(R){var F=R.trans,T=R.key;return new Promise(function(W,U){W=Ke(W);var O=F.objectStore(P).get(T);O.onsuccess=function(Q){return W(Q.target.result)},O.onerror=hn(U)})},query:(N=w,function(R){return new Promise(function(F,T){F=Ke(F);var W,U,O,re=R.trans,Q=R.values,te=R.limit,ue=R.query,le=te===1/0?void 0:te,me=ue.index,ue=ue.range,re=re.objectStore(P),re=me.isPrimaryKey?re:re.index(me.name),me=f(ue);if(te===0)return F({result:[]});N?((ue=Q?re.getAll(me,le):re.getAllKeys(me,le)).onsuccess=function(he){return F({result:he.target.result})},ue.onerror=hn(T)):(W=0,U=!Q&&"openKeyCursor"in re?re.openKeyCursor(me):re.openCursor(me),O=[],U.onsuccess=function(he){var se=U.result;return!se||(O.push(Q?se.value:se.primaryKey),++W===te)?F({result:O}):void se.continue()},U.onerror=hn(T))})}),openCursor:function(R){var F=R.trans,T=R.values,W=R.query,U=R.reverse,O=R.unique;return new Promise(function(Q,te){Q=Ke(Q);var re=W.index,le=W.range,ue=F.objectStore(P),ue=re.isPrimaryKey?ue:ue.index(re.name),re=U?O?"prevunique":"prev":O?"nextunique":"next",me=!T&&"openKeyCursor"in ue?ue.openKeyCursor(f(le),re):ue.openCursor(f(le),re);me.onerror=hn(te),me.onsuccess=Ke(function(he){var se,ye,De,Be,ke=me.result;ke?(ke.___id=++nm,ke.done=!1,se=ke.continue.bind(ke),ye=(ye=ke.continuePrimaryKey)&&ye.bind(ke),De=ke.advance.bind(ke),Be=function(){throw new Error("Cursor not stopped")},ke.trans=F,ke.stop=ke.continue=ke.continuePrimaryKey=ke.advance=function(){throw new Error("Cursor not started")},ke.fail=Ke(te),ke.next=function(){var Te=this,He=1;return this.start(function(){return He--?Te.continue():Te.stop()}).then(function(){return Te})},ke.start=function(Te){function He(){if(me.result)try{Te()}catch(Ze){ke.fail(Ze)}else ke.done=!0,ke.start=function(){throw new Error("Cursor behind last entry")},ke.stop()}var qt=new Promise(function(Ze,hr){Ze=Ke(Ze),me.onerror=hn(hr),ke.fail=hr,ke.stop=function(Ys){ke.stop=ke.continue=ke.continuePrimaryKey=ke.advance=Be,Ze(Ys)}});return me.onsuccess=Ke(function(Ze){me.onsuccess=He,He()}),ke.continue=se,ke.continuePrimaryKey=ye,ke.advance=De,He(),qt},Q(ke)):Q(null)},te)})},count:function(R){var F=R.query,T=R.trans,W=F.index,U=F.range;return new Promise(function(O,Q){var te=T.objectStore(P),te=W.isPrimaryKey?te:te.index(W.name),le=f(U),le=le?te.count(le):te.count();le.onsuccess=Ke(function(ue){return O(ue.target.result)}),le.onerror=hn(Q)})}}}g=_,x=Mc((_=a).objectStoreNames);var g,_={schema:{name:_.name,tables:x.map(function(A){return g.objectStore(A)}).map(function(A){var N=A.keyPath,P=A.autoIncrement,F=p(N),R={},F={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:F,keyPath:N,autoIncrement:P,unique:!0,extractKey:Fs(N)},indexes:Mc(A.indexNames).map(function(T){return A.index(T)}).map(function(O){var Q=O.name,W=O.unique,U=O.multiEntry,O=O.keyPath,Q={name:Q,compound:p(O),keyPath:O,unique:W,multiEntry:U,extractKey:Fs(O)};return R[Ei(O)]=Q}),getIndexByKeyPath:function(T){return R[Ei(T)]}};return R[":id"]=F.primaryKey,N!=null&&(R[Ei(N)]=F.primaryKey),F})},hasGetAll:0<x.length&&"getAll"in g.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},x=_.schema,w=_.hasGetAll,_=x.tables.map(h),z={};return _.forEach(function(A){return z[A.name]=A}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(A){if(z[A])return z[A];throw new Error("Table '".concat(A,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Si(l),schema:x}}function im(a,l,d,f){return d=d.IDBKeyRange,l=rm(l,d,f),{dbcore:a.dbcore.reduce(function(h,g){return g=g.create,r(r({},h),g(h))},l)}}function Ma(a,l){var d=l.db,d=im(a._middlewares,d,a._deps,l);a.core=d.dbcore,a.tables.forEach(function(f){var h=f.name;a.core.schema.tables.some(function(g){return g.name===h})&&(f.core=a.core.table(h),a[h]instanceof a.Table)&&(a[h].core=f.core)})}function Ba(a,l,d,f){d.forEach(function(h){var g=f[h];l.forEach(function(x){var w=function _(z,A){return ee(z,A)||(z=y(z))&&_(z,A)}(x,h);(!w||"value"in w&&w.value===void 0)&&(x===a.Transaction.prototype||x instanceof a.Transaction?Y(x,h,{get:function(){return this.table(h)},set:function(_){G(this,h,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):x[h]=new a.Table(h,g))})})}function Ds(a,l){l.forEach(function(d){for(var f in d)d[f]instanceof a.Table&&delete d[f]})}function am(a,l){return a._cfg.version-l._cfg.version}function om(a,l,d,f){var h=a._dbSchema,g=(d.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=As("$meta",Ic("")[0],[]),a._storeNames.push("$meta")),a._createTransaction("readwrite",a._storeNames,h)),x=(g.create(d),g._completion.catch(f),g._reject.bind(g)),w=be.transless||be;Mn(function(){if(be.trans=g,be.transless=w,l!==0)return Ma(a,d),z=l,((_=g).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(A){return A??z}):fe.resolve(z)).then(function(W){var N=a,P=W,R=g,F=d,T=[],W=N._versions,U=N._dbSchema=Oa(0,N.idbdb,F);return(W=W.filter(function(O){return O._cfg.version>=P})).length===0?fe.resolve():(W.forEach(function(O){T.push(function(){var Q,te,le,ue=U,re=O._cfg.dbschema,me=(za(N,ue,F),za(N,re,F),U=N._dbSchema=re,Ps(ue,re)),he=(me.add.forEach(function(se){Rs(F,se[0],se[1].primKey,se[1].indexes)}),me.change.forEach(function(se){if(se.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var ye=F.objectStore(se.name);se.add.forEach(function(De){return Ia(ye,De)}),se.change.forEach(function(De){ye.deleteIndex(De.name),Ia(ye,De)}),se.del.forEach(function(De){return ye.deleteIndex(De)})}),O._cfg.contentUpgrade);if(he&&O._cfg.version>P)return Ma(N,F),R._memoizedTables={},Q=V(re),me.del.forEach(function(se){Q[se]=ue[se]}),Ds(N,[N.Transaction.prototype]),Ba(N,[N.Transaction.prototype],c(Q),Q),R.schema=Q,(te=we(he))&&Dr(),re=fe.follow(function(){var se;(le=he(R))&&te&&(se=Bn.bind(null,null),le.then(se,se))}),le&&typeof le.then=="function"?fe.resolve(le):re.then(function(){return le})}),T.push(function(Q){var te,le,ue=O._cfg.dbschema;te=ue,le=Q,[].slice.call(le.db.objectStoreNames).forEach(function(re){return te[re]==null&&le.db.deleteObjectStore(re)}),Ds(N,[N.Transaction.prototype]),Ba(N,[N.Transaction.prototype],N._storeNames,N._dbSchema),R.schema=N._dbSchema}),T.push(function(Q){N.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(N.idbdb.version/10)===O._cfg.version?(N.idbdb.deleteObjectStore("$meta"),delete N._dbSchema.$meta,N._storeNames=N._storeNames.filter(function(te){return te!=="$meta"})):Q.objectStore("$meta").put(O._cfg.version,"version"))})}),function O(){return T.length?fe.resolve(T.shift()(R.idbtrans)).then(O):fe.resolve()}().then(function(){Bc(U,F)}))}).catch(x);var _,z;c(h).forEach(function(A){Rs(d,A,h[A].primKey,h[A].indexes)}),Ma(a,d),fe.follow(function(){return a.on.populate.fire(g)}).catch(x)})}function sm(a,l){Bc(a._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var d=Oa(0,a.idbdb,l);za(a,a._dbSchema,l);for(var f=0,h=Ps(d,a._dbSchema).change;f<h.length;f++){var g=(x=>{if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var w=l.objectStore(x.name);x.add.forEach(function(_){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(_.src)),Ia(w,_)})})(h[f]);if(typeof g=="object")return g.value}}function Ps(a,l){var d,f={del:[],add:[],change:[]};for(d in a)l[d]||f.del.push(d);for(d in l){var h=a[d],g=l[d];if(h){var x={name:d,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)x.recreate=!0,f.change.push(x);else{var w=h.idxByName,_=g.idxByName,z=void 0;for(z in w)_[z]||x.del.push(z);for(z in _){var A=w[z],N=_[z];A?A.src!==N.src&&x.change.push(N):x.add.push(N)}(0<x.del.length||0<x.add.length||0<x.change.length)&&f.change.push(x)}}else f.add.push([d,g])}return f}function Rs(a,l,d,f){var h=a.db.createObjectStore(l,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});f.forEach(function(g){return Ia(h,g)})}function Bc(a,l){c(a).forEach(function(d){l.db.objectStoreNames.contains(d)||(Ee&&console.debug("Dexie: Creating missing table",d),Rs(l,d,a[d].primKey,a[d].indexes))})}function Ia(a,l){a.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function Oa(a,l,d){var f={};return v(l.objectStoreNames,0).forEach(function(h){for(var g=d.objectStore(h),x=_s(Rc(z=g.keyPath),z||"",!0,!1,!!g.autoIncrement,z&&typeof z!="string",!0),w=[],_=0;_<g.indexNames.length;++_){var A=g.index(g.indexNames[_]),z=A.keyPath,A=_s(A.name,z,!!A.unique,!!A.multiEntry,!1,z&&typeof z!="string",!1);w.push(A)}f[h]=As(h,x,w)}),f}function za(a,l,d){for(var f=d.db.objectStoreNames,h=0;h<f.length;++h){var g=f[h],x=d.objectStore(g);a._hasGetAll="getAll"in x;for(var w=0;w<x.indexNames.length;++w){var _,z=x.indexNames[w],A=x.index(z).keyPath,A=typeof A=="string"?A:"["+v(A).join("+")+"]";l[g]&&(_=l[g].idxByName[A])&&(_.name=z,delete l[g].idxByName[A],l[g].idxByName[z]=_)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Ic(a){return a.split(",").map(function(l,d){var h=l.split(":"),f=(f=h[1])==null?void 0:f.trim(),h=(l=h[0].trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return _s(h,g||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),p(g),d===0,f)})}Br.prototype._createTableSchema=As,Br.prototype._parseIndexSyntax=Ic,Br.prototype._parseStoresSpec=function(a,l){var d=this;c(a).forEach(function(f){if(a[f]!==null){var h=d._parseIndexSyntax(a[f]),g=h.shift();if(!g)throw new ge.Schema("Invalid schema for table "+f+": "+a[f]);if(g.unique=!0,g.multi)throw new ge.Schema("Primary key cannot be multiEntry*");h.forEach(function(x){if(x.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),g=d._createTableSchema(f,g,h),l[f]=g}})},Br.prototype.stores=function(d){var l=this.db,d=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,d):d,l._versions),f={},h={};return d.forEach(function(g){m(f,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(f,h)}),l._dbSchema=h,Ds(l,[l._allTables,l,l.Transaction.prototype]),Ba(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],c(h),h),l._storeNames=c(h),this},Br.prototype.upgrade=function(a){return this._cfg.contentUpgrade=ce(this._cfg.contentUpgrade||Ne,a),this};var lm=Br;function Br(){}function Ms(a,l){var d=a._dbNamesDB;return d||(d=a._dbNamesDB=new Cn(_a,{addons:[],indexedDB:a,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Bs(a){return a&&typeof a.databases=="function"}function Is(a){return Mn(function(){return be.letThrough=!0,a()})}function Os(a){return!("from"in a)}var xt=function(a,l){var d;if(!this)return d=new xt,a&&"d"in a&&m(d,a),d;m(this,arguments.length?{d:1,from:a,to:1<arguments.length?l:a}:{d:0})};function Ni(a,l,d){var f=Fe(l,d);if(!isNaN(f)){if(0<f)throw RangeError();if(Os(a))return m(a,{from:l,to:d,d:1});var f=a.l,h=a.r;if(Fe(d,a.from)<0)return f?Ni(f,l,d):a.l={from:l,to:d,d:1,l:null,r:null},zc(a);if(0<Fe(l,a.to))return h?Ni(h,l,d):a.r={from:l,to:d,d:1,l:null,r:null},zc(a);Fe(l,a.from)<0&&(a.from=l,a.l=null,a.d=h?h.d+1:1),0<Fe(d,a.to)&&(a.to=d,a.r=null,a.d=a.l?a.l.d+1:1),l=!a.r,f&&!a.l&&Ti(a,f),h&&l&&Ti(a,h)}}function Ti(a,l){Os(l)||function d(f,h){var g=h.from,x=h.l,w=h.r;Ni(f,g,h.to),x&&d(f,x),w&&d(f,w)}(a,l)}function Oc(a,l){var d=La(l),f=d.next();if(!f.done)for(var h=f.value,g=La(a),x=g.next(h.from),w=x.value;!f.done&&!x.done;){if(Fe(w.from,h.to)<=0&&0<=Fe(w.to,h.from))return!0;Fe(h.from,w.from)<0?h=(f=d.next(w.from)).value:w=(x=g.next(h.from)).value}return!1}function La(a){var l=Os(a)?null:{s:0,n:a};return{next:function(d){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&Fe(d,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||Fe(d,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function zc(a){var l,d,f,h=(((h=a.r)==null?void 0:h.d)||0)-(((h=a.l)==null?void 0:h.d)||0),h=1<h?"r":h<-1?"l":"";h&&(l=h=="r"?"l":"r",d=r({},a),f=a[h],a.from=f.from,a.to=f.to,a[h]=f[h],d[h]=f[l],(a[l]=d).d=Lc(d)),a.d=Lc(a)}function Lc(d){var l=d.r,d=d.l;return(l?d?Math.max(l.d,d.d):l.d:d?d.d:0)+1}function $a(a,l){return c(l).forEach(function(d){a[d]?Ti(a[d],l[d]):a[d]=function f(h){var g,x,w={};for(g in h)S(h,g)&&(x=h[g],w[g]=!x||typeof x!="object"||D.has(x.constructor)?x:f(x));return w}(l[d])}),a}function zs(a,l){return a.all||l.all||Object.keys(a).some(function(d){return l[d]&&Oc(l[d],a[d])})}E(xt.prototype,((at={add:function(a){return Ti(this,a),this},addKey:function(a){return Ni(this,a,a),this},addKeys:function(a){var l=this;return a.forEach(function(d){return Ni(l,d,d)}),this},hasKey:function(a){var l=La(this).next(a).value;return l&&Fe(l.from,a)<=0&&0<=Fe(l.to,a)}})[Z]=function(){return La(this)},at));var fr={},Ls={},$s=!1;function Wa(a){$a(Ls,a),$s||($s=!0,setTimeout(function(){$s=!1,Ws(Ls,!(Ls={}))},0))}function Ws(a,l){l===void 0&&(l=!1);var d=new Set;if(a.all)for(var f=0,h=Object.values(fr);f<h.length;f++)$c(w=h[f],a,d,l);else for(var g in a){var x,w,g=/^idb\:\/\/(.*)\/(.*)\//.exec(g);g&&(x=g[1],g=g[2],w=fr["idb://".concat(x,"/").concat(g)])&&$c(w,a,d,l)}d.forEach(function(_){return _()})}function $c(a,l,d,f){for(var h=[],g=0,x=Object.entries(a.queries.query);g<x.length;g++){for(var w=x[g],_=w[0],z=[],A=0,N=w[1];A<N.length;A++){var P=N[A];zs(l,P.obsSet)?P.subscribers.forEach(function(W){return d.add(W)}):f&&z.push(P)}f&&h.push([_,z])}if(f)for(var R=0,F=h;R<F.length;R++){var T=F[R],_=T[0],z=T[1];a.queries.query[_]=z}}function um(a){var l=a._state,d=a._deps.indexedDB;if(l.isBeingOpened||a.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?tt(l.dbOpenError):a});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,h=Math.round(10*a.verno),g=!1;function x(){if(l.openCanceller!==f)throw new ge.DatabaseClosed("db.open() was cancelled")}function w(){return new fe(function(P,R){if(x(),!d)throw new ge.MissingAPI;var F=a.name,T=l.autoSchema||!h?d.open(F):d.open(F,h);if(!T)throw new ge.MissingAPI;T.onerror=hn(R),T.onblocked=Ke(a._fireOnBlocked),T.onupgradeneeded=Ke(function(W){var U;A=T.transaction,l.autoSchema&&!a._options.allowEmptyDB?(T.onerror=Ci,A.abort(),T.result.close(),(U=d.deleteDatabase(F)).onsuccess=U.onerror=Ke(function(){R(new ge.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(A.onerror=hn(R),U=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,N=U<1,a.idbdb=T.result,g&&sm(a,A),om(a,U/10,A,R))},R),T.onsuccess=Ke(function(){A=null;var W,U,O,Q,te,le,ue=a.idbdb=T.result,re=v(ue.objectStoreNames);if(0<re.length)try{var me=ue.transaction((te=re).length===1?te[0]:te,"readonly");if(l.autoSchema)le=ue,Q=me,(O=a).verno=le.version/10,Q=O._dbSchema=Oa(0,le,Q),O._storeNames=v(le.objectStoreNames,0),Ba(O,[O._allTables],c(Q),Q);else if(za(a,a._dbSchema,me),U=me,((U=Ps(Oa(0,(W=a).idbdb,U),W._dbSchema)).add.length||U.change.some(function(he){return he.add.length||he.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ue.close(),h=ue.version+1,g=!0,P(w());Ma(a,me)}catch{}Pr.push(a),ue.onversionchange=Ke(function(he){l.vcFired=!0,a.on("versionchange").fire(he)}),ue.onclose=Ke(function(){a.close({disableAutoOpen:!1})}),N&&(re=a._deps,te=F,Bs(le=re.indexedDB)||te===_a||Ms(le,re.IDBKeyRange).put({name:te}).catch(Ne)),P()},R)}).catch(function(P){switch(P==null?void 0:P.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),w();break;case"VersionError":if(0<h)return h=0,w()}return fe.reject(P)})}var _,z=l.dbReadyResolve,A=null,N=!1;return fe.race([f,(typeof navigator>"u"?fe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function R(){return indexedDB.databases().finally(P)}_=setInterval(R,100),R()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(w)]).then(function(){return x(),l.onReadyBeingFired=[],fe.resolve(Is(function(){return a.on.ready.fire(a.vip)})).then(function P(){var R;if(0<l.onReadyBeingFired.length)return R=l.onReadyBeingFired.reduce(ce,Ne),l.onReadyBeingFired=[],fe.resolve(Is(function(){return R(a.vip)})).then(P)})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(P){l.dbOpenError=P;try{A&&A.abort()}catch{}return f===l.openCanceller&&a._close(),tt(P)}).finally(function(){l.openComplete=!0,z()}).then(function(){var P;return N&&(P={},a.tables.forEach(function(R){R.schema.indexes.forEach(function(F){F.name&&(P["idb://".concat(a.name,"/").concat(R.name,"/").concat(F.name)]=new xt(-1/0,[[[]]]))}),P["idb://".concat(a.name,"/").concat(R.name,"/")]=P["idb://".concat(a.name,"/").concat(R.name,"/:dels")]=new xt(-1/0,[[[]]])}),zn(ji).fire(P),Ws(P,!0)),a})}function Gs(a){function l(g){return a.next(g)}var d=h(l),f=h(function(g){return a.throw(g)});function h(g){return function(w){var w=g(w),_=w.value;return w.done?_:_&&typeof _.then=="function"?_.then(d,f):p(_)?Promise.all(_).then(d,f):d(_)}}return h(l)()}function Ga(a,l,d){for(var f=p(a)?a.slice():[a],h=0;h<d;++h)f.push(l);return f}var cm={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(f){var d=a.table(f),f=d.schema,h={},g=[];function x(P,R,F){var O=Ei(P),T=h[O]=h[O]||[],W=P==null?0:typeof P=="string"?1:P.length,U=0<R,O=r(r({},F),{name:U?"".concat(O,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:U,keyTail:R,keyLength:W,extractKey:Fs(P),unique:!U&&F.unique});return T.push(O),O.isPrimaryKey||g.push(O),1<W&&x(W===2?P[0]:P.slice(0,W-1),R+1,F),T.sort(function(Q,te){return Q.keyTail-te.keyTail}),O}var w=x(f.primaryKey.keyPath,0,f.primaryKey);h[":id"]=[w];for(var _=0,z=f.indexes;_<z.length;_++){var A=z[_];x(A.keyPath,0,A)}function N(P){var R,F=P.query.index;return F.isVirtual?r(r({},P),{query:{index:F.lowLevelIndex,range:(R=P.query.range,F=F.keyTail,{type:R.type===1?2:R.type,lower:Ga(R.lower,R.lowerOpen?a.MAX_KEY:a.MIN_KEY,F),lowerOpen:!0,upper:Ga(R.upper,R.upperOpen?a.MIN_KEY:a.MAX_KEY,F),upperOpen:!0})}}):P}return r(r({},d),{schema:r(r({},f),{primaryKey:w,indexes:g,getIndexByKeyPath:function(P){return(P=h[Ei(P)])&&P[0]}}),count:function(P){return d.count(N(P))},query:function(P){return d.query(N(P))},openCursor:function(P){var R=P.query.index,F=R.keyTail,T=R.keyLength;return R.isVirtual?d.openCursor(N(P)).then(function(U){return U&&W(U)}):d.openCursor(P);function W(U){return Object.create(U,{continue:{value:function(O){O!=null?U.continue(Ga(O,P.reverse?a.MAX_KEY:a.MIN_KEY,F)):P.unique?U.continue(U.key.slice(0,T).concat(P.reverse?a.MIN_KEY:a.MAX_KEY,F)):U.continue()}},continuePrimaryKey:{value:function(O,Q){U.continuePrimaryKey(Ga(O,a.MAX_KEY,F),Q)}},primaryKey:{get:function(){return U.primaryKey}},key:{get:function(){var O=U.key;return T===1?O[0]:O.slice(0,T)}},value:{get:function(){return U.value}}})}}})}})}};function Vs(a,l,d,f){return d=d||{},f=f||"",c(a).forEach(function(h){var g,x,w;S(l,h)?(g=a[h],x=l[h],typeof g=="object"&&typeof x=="object"&&g&&x?(w=xe(g))!==xe(x)?d[f+h]=l[h]:w==="Object"?Vs(g,x,d,f+h+"."):g!==x&&(d[f+h]=l[h]):g!==x&&(d[f+h]=l[h])):d[f+h]=void 0}),c(l).forEach(function(h){S(a,h)||(d[f+h]=l[h])}),d}function Us(a,l){return l.type==="delete"?l.keys:l.keys||l.values.map(a.extractKey)}var dm={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(l){var d=a.table(l),f=d.schema.primaryKey;return r(r({},d),{mutate:function(h){var g=be.trans,x=g.table(l).hook,w=x.deleting,_=x.creating,z=x.updating;switch(h.type){case"add":if(_.fire===Ne)break;return g._promise("readwrite",function(){return A(h)},!0);case"put":if(_.fire===Ne&&z.fire===Ne)break;return g._promise("readwrite",function(){return A(h)},!0);case"delete":if(w.fire===Ne)break;return g._promise("readwrite",function(){return A(h)},!0);case"deleteRange":if(w.fire===Ne)break;return g._promise("readwrite",function(){return function N(P,R,F){return d.query({trans:P,values:!1,query:{index:f,range:R},limit:F}).then(function(T){var W=T.result;return A({type:"delete",keys:W,trans:P}).then(function(U){return 0<U.numFailures?Promise.reject(U.failures[0]):W.length<F?{failures:[],numFailures:0,lastResult:void 0}:N(P,r(r({},R),{lower:W[W.length-1],lowerOpen:!0}),F)})})}(h.trans,h.range,1e4)},!0)}return d.mutate(h);function A(N){var P,R,F,T=be.trans,W=N.keys||Us(f,N);if(W)return(N=N.type==="add"||N.type==="put"?r(r({},N),{keys:W}):r({},N)).type!=="delete"&&(N.values=o([],N.values)),N.keys&&(N.keys=o([],N.keys)),P=d,F=W,((R=N).type==="add"?Promise.resolve([]):P.getMany({trans:R.trans,keys:F,cache:"immutable"})).then(function(U){var O=W.map(function(Q,te){var le,ue,re,me=U[te],he={onerror:null,onsuccess:null};return N.type==="delete"?w.fire.call(he,Q,me,T):N.type==="add"||me===void 0?(le=_.fire.call(he,Q,N.values[te],T),Q==null&&le!=null&&(N.keys[te]=Q=le,f.outbound||B(N.values[te],f.keyPath,Q))):(le=Vs(me,N.values[te]),(ue=z.fire.call(he,le,Q,me,T))&&(re=N.values[te],Object.keys(ue).forEach(function(se){S(re,se)?re[se]=ue[se]:B(re,se,ue[se])}))),he});return d.mutate(N).then(function(Q){for(var te=Q.failures,le=Q.results,ue=Q.numFailures,Q=Q.lastResult,re=0;re<W.length;++re){var me=(le||W)[re],he=O[re];me==null?he.onerror&&he.onerror(te[re]):he.onsuccess&&he.onsuccess(N.type==="put"&&U[re]?N.values[re]:me)}return{failures:te,results:le,numFailures:ue,lastResult:Q}}).catch(function(Q){return O.forEach(function(te){return te.onerror&&te.onerror(Q)}),Promise.reject(Q)})});throw new Error("Keys missing")}}})}})}};function Wc(a,l,d){try{if(!l||l.keys.length<a.length)return null;for(var f=[],h=0,g=0;h<l.keys.length&&g<a.length;++h)Fe(l.keys[h],a[g])===0&&(f.push(d?ne(l.values[h]):l.values[h]),++g);return f.length===a.length?f:null}catch{return null}}var fm={stack:"dbcore",level:-1,create:function(a){return{table:function(l){var d=a.table(l);return r(r({},d),{getMany:function(f){var h;return f.cache?(h=Wc(f.keys,f.trans._cache,f.cache==="clone"))?fe.resolve(h):d.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ne(g):g},g}):d.getMany(f)},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),d.mutate(f)}})}}}};function Gc(a,l){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Vc(a,l){switch(a){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var pm={stack:"dbcore",level:0,name:"Observability",create:function(a){var l=a.schema.name,d=new xt(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(f,h,g){if(be.subscr&&h!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return a.transaction(f,h,g)},table:function(f){function h(W){var T,W=W.query;return[T=W.index,new xt((T=(W=W.range).lower)!=null?T:a.MIN_KEY,(T=W.upper)!=null?T:a.MAX_KEY)]}var g=a.table(f),x=g.schema,w=x.primaryKey,_=x.indexes,z=w.extractKey,A=w.outbound,N=w.autoIncrement&&_.filter(function(F){return F.compound&&F.keyPath.includes(w.keyPath)}),P=r(r({},g),{mutate:function(F){function T(ye){return ye="idb://".concat(l,"/").concat(f,"/").concat(ye),te[ye]||(te[ye]=new xt)}var W,U,O,Q=F.trans,te=F.mutatedParts||(F.mutatedParts={}),le=T(""),ue=T(":dels"),re=F.type,he=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[Us(w,F).filter(function(ye){return ye}),F.values]:[],me=he[0],he=he[1],se=F.trans._cache;return p(me)?(le.addKeys(me),(re=re==="delete"||me.length===he.length?Wc(me,se):null)||ue.addKeys(me),(re||he)&&(W=T,U=re,O=he,x.indexes.forEach(function(ye){var De=W(ye.name||"");function Be(Te){return Te!=null?ye.extractKey(Te):null}function ke(Te){ye.multiEntry&&p(Te)?Te.forEach(function(He){return De.addKey(He)}):De.addKey(Te)}(U||O).forEach(function(Te,Ze){var qt=U&&Be(U[Ze]),Ze=O&&Be(O[Ze]);Fe(qt,Ze)!==0&&(qt!=null&&ke(qt),Ze!=null)&&ke(Ze)})}))):me?(he={from:(se=me.lower)!=null?se:a.MIN_KEY,to:(re=me.upper)!=null?re:a.MAX_KEY},ue.add(he),le.add(he)):(le.add(d),ue.add(d),x.indexes.forEach(function(ye){return T(ye.name).add(d)})),g.mutate(F).then(function(ye){return!me||F.type!=="add"&&F.type!=="put"||(le.addKeys(ye.results),N&&N.forEach(function(De){for(var Be=F.values.map(function(qt){return De.extractKey(qt)}),ke=De.keyPath.findIndex(function(qt){return qt===w.keyPath}),Te=0,He=ye.results.length;Te<He;++Te)Be[Te][ke]=ye.results[Te];T(De.name).addKeys(Be)})),Q.mutatedParts=$a(Q.mutatedParts||{},te),ye})}}),R={get:function(F){return[w,new xt(F.key)]},getMany:function(F){return[w,new xt().addKeys(F.keys)]},count:h,query:h,openCursor:h};return c(R).forEach(function(F){P[F]=function(T){var W=be.subscr,U=!!W,O=Gc(be,g)&&Vc(F,T)?T.obsSet={}:W;if(U){var Q,W=function(he){return he="idb://".concat(l,"/").concat(f,"/").concat(he),O[he]||(O[he]=new xt)},te=W(""),le=W(":dels"),U=R[F](T),ue=U[0],U=U[1];if((F==="query"&&ue.isPrimaryKey&&!T.values?le:W(ue.name||"")).add(U),!ue.isPrimaryKey){if(F!=="count")return Q=F==="query"&&A&&T.values&&g.query(r(r({},T),{values:!1})),g[F].apply(this,arguments).then(function(he){if(F==="query"){if(A&&T.values)return Q.then(function(Be){return Be=Be.result,te.addKeys(Be),he});var se=T.values?he.result.map(z):he.result;(T.values?te:le).addKeys(se)}else{var ye,De;if(F==="openCursor")return De=T.values,(ye=he)&&Object.create(ye,{key:{get:function(){return le.addKey(ye.primaryKey),ye.key}},primaryKey:{get:function(){var Be=ye.primaryKey;return le.addKey(Be),Be}},value:{get:function(){return De&&te.addKey(ye.primaryKey),ye.value}}})}return he});le.add(d)}}return g[F].apply(this,arguments)}}),P}})}};function Uc(a,l,d){var f;return d.numFailures===0?l:l.type==="deleteRange"||(f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1,d.numFailures===f)?null:(f=r({},l),p(f.keys)&&(f.keys=f.keys.filter(function(h,g){return!(g in d.failures)})),"values"in f&&p(f.values)&&(f.values=f.values.filter(function(h,g){return!(g in d.failures)})),f)}function Ks(a,l){return d=a,((f=l).lower===void 0||(f.lowerOpen?0<Fe(d,f.lower):0<=Fe(d,f.lower)))&&(d=a,(f=l).upper===void 0||(f.upperOpen?Fe(d,f.upper)<0:Fe(d,f.upper)<=0));var d,f}function Kc(a,l,d,f,h,g){var x,w,_,z,A,N;return!d||d.length===0||(x=l.query.index,w=x.multiEntry,_=l.query.range,z=f.schema.primaryKey.extractKey,A=x.extractKey,N=(x.lowLevelIndex||x).extractKey,(f=d.reduce(function(P,R){var F=P,T=[];if(R.type==="add"||R.type==="put")for(var W=new xt,U=R.values.length-1;0<=U;--U){var O,Q=R.values[U],te=z(Q);!W.hasKey(te)&&(O=A(Q),w&&p(O)?O.some(function(he){return Ks(he,_)}):Ks(O,_))&&(W.addKey(te),T.push(Q))}switch(R.type){case"add":var le=new xt().addKeys(l.values?P.map(function(se){return z(se)}):P),F=P.concat(l.values?T.filter(function(se){return se=z(se),!le.hasKey(se)&&(le.addKey(se),!0)}):T.map(function(se){return z(se)}).filter(function(se){return!le.hasKey(se)&&(le.addKey(se),!0)}));break;case"put":var ue=new xt().addKeys(R.values.map(function(se){return z(se)}));F=P.filter(function(se){return!ue.hasKey(l.values?z(se):se)}).concat(l.values?T:T.map(function(se){return z(se)}));break;case"delete":var re=new xt().addKeys(R.keys);F=P.filter(function(se){return!re.hasKey(l.values?z(se):se)});break;case"deleteRange":var me=R.range;F=P.filter(function(se){return!Ks(z(se),me)})}return F},a))===a)?a:(f.sort(function(P,R){return Fe(N(P),N(R))||Fe(z(P),z(R))}),l.limit&&l.limit<1/0&&(f.length>l.limit?f.length=l.limit:a.length===l.limit&&f.length<l.limit&&(h.dirty=!0)),g?Object.freeze(f):f)}function qc(a,l){return Fe(a.lower,l.lower)===0&&Fe(a.upper,l.upper)===0&&!!a.lowerOpen==!!l.lowerOpen&&!!a.upperOpen==!!l.upperOpen}function hm(a,l){return((d,f,h,g)=>{if(d===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((d=Fe(d,f))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return d})(a.lower,l.lower,a.lowerOpen,l.lowerOpen)<=0&&0<=((d,f,h,g)=>{if(d===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((d=Fe(d,f))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return d})(a.upper,l.upper,a.upperOpen,l.upperOpen)}function mm(a,l,d,f){a.subscribers.add(d),f.addEventListener("abort",function(){var h,g;a.subscribers.delete(d),a.subscribers.size===0&&(h=a,g=l,setTimeout(function(){h.subscribers.size===0&&H(g,h)},3e3))})}var gm={stack:"dbcore",level:0,name:"Cache",create:function(a){var l=a.schema.name;return r(r({},a),{transaction:function(d,f,h){var g,x,w=a.transaction(d,f,h);return f==="readwrite"&&(h=(g=new AbortController).signal,w.addEventListener("abort",(x=function(_){return function(){if(g.abort(),f==="readwrite"){for(var z=new Set,A=0,N=d;A<N.length;A++){var P=N[A],R=fr["idb://".concat(l,"/").concat(P)];if(R){var F=a.table(P),T=R.optimisticOps.filter(function(ye){return ye.trans===w});if(w._explicit&&_&&w.mutatedParts)for(var W=0,U=Object.values(R.queries.query);W<U.length;W++)for(var O=0,Q=(ue=U[W]).slice();O<Q.length;O++)zs((re=Q[O]).obsSet,w.mutatedParts)&&(H(ue,re),re.subscribers.forEach(function(ye){return z.add(ye)}));else if(0<T.length){R.optimisticOps=R.optimisticOps.filter(function(ye){return ye.trans!==w});for(var te=0,le=Object.values(R.queries.query);te<le.length;te++)for(var ue,re,me,he=0,se=(ue=le[te]).slice();he<se.length;he++)(re=se[he]).res!=null&&w.mutatedParts&&(_&&!re.dirty?(me=Object.isFrozen(re.res),me=Kc(re.res,re.req,T,F,re,me),re.dirty?(H(ue,re),re.subscribers.forEach(function(ye){return z.add(ye)})):me!==re.res&&(re.res=me,re.promise=fe.resolve({result:me}))):(re.dirty&&H(ue,re),re.subscribers.forEach(function(ye){return z.add(ye)})))}}}z.forEach(function(ye){return ye()})}}})(!1),{signal:h}),w.addEventListener("error",x(!1),{signal:h}),w.addEventListener("complete",x(!0),{signal:h})),w},table:function(d){var f=a.table(d),h=f.schema.primaryKey;return r(r({},f),{mutate:function(g){var x,w=be.trans;return!h.outbound&&w.db._options.cache!=="disabled"&&!w.explicit&&w.idbtrans.mode==="readwrite"&&(x=fr["idb://".concat(l,"/").concat(d)])?(w=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Us(h,g).some(function(_){return _==null}))?(x.optimisticOps.push(g),g.mutatedParts&&Wa(g.mutatedParts),w.then(function(_){0<_.numFailures&&(H(x.optimisticOps,g),(_=Uc(0,g,_))&&x.optimisticOps.push(_),g.mutatedParts)&&Wa(g.mutatedParts)}),w.catch(function(){H(x.optimisticOps,g),g.mutatedParts&&Wa(g.mutatedParts)})):w.then(function(_){var z=Uc(0,r(r({},g),{values:g.values.map(function(A,N){var P;return _.failures[N]?A:(B(P=(P=h.keyPath)!=null&&P.includes(".")?ne(A):r({},A),h.keyPath,_.results[N]),P)})}),_);x.optimisticOps.push(z),queueMicrotask(function(){return g.mutatedParts&&Wa(g.mutatedParts)})}),w):f.mutate(g)},query:function(g){var x,w,_,z,A,N,P;return Gc(be,f)&&Vc("query",g)?(x=((_=be.trans)==null?void 0:_.db._options.cache)==="immutable",w=(_=be).requery,_=_.signal,N=((R,F,T,W)=>{var U=fr["idb://".concat(R,"/").concat(F)];if(!U)return[];if(!(R=U.queries[T]))return[null,!1,U,null];var O=R[(W.query?W.query.index.name:null)||""];if(!O)return[null,!1,U,null];switch(T){case"query":var Q=O.find(function(te){return te.req.limit===W.limit&&te.req.values===W.values&&qc(te.req.query.range,W.query.range)});return Q?[Q,!0,U,O]:[O.find(function(te){return("limit"in te.req?te.req.limit:1/0)>=W.limit&&(!W.values||te.req.values)&&hm(te.req.query.range,W.query.range)}),!1,U,O];case"count":return Q=O.find(function(te){return qc(te.req.query.range,W.query.range)}),[Q,!!Q,U,O]}})(l,d,"query",g),P=N[0],z=N[2],A=N[3],P&&N[1]?P.obsSet=g.obsSet:(N=f.query(g).then(function(R){var F=R.result;if(P&&(P.res=F),x){for(var T=0,W=F.length;T<W;++T)Object.freeze(F[T]);Object.freeze(F)}else R.result=ne(F);return R}).catch(function(R){return A&&P&&H(A,P),Promise.reject(R)}),P={obsSet:g.obsSet,promise:N,subscribers:new Set,type:"query",req:g,dirty:!1},A?A.push(P):(A=[P],(z=z||(fr["idb://".concat(l,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=A)),mm(P,A,w,_),P.promise.then(function(R){return{result:Kc(R.result,g,z==null?void 0:z.optimisticOps,f,P,x)}})):f.query(g)}})}})}};function Va(a,l){return new Proxy(a,{get:function(d,f,h){return f==="db"?l:Reflect.get(d,f,h)}})}nt.prototype.version=function(a){if(isNaN(a)||a<.1)throw new ge.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var l=this._versions,d=l.filter(function(f){return f._cfg.version===a})[0];return d||(d=new this.Version(a),l.push(d),l.sort(am),d.stores({}),this._state.autoSchema=!1),d},nt.prototype._whenReady=function(a){var l=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?a():new fe(function(d,f){if(l._state.openComplete)return f(new ge.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new ge.DatabaseClosed);l.open().catch(Ne)}l._state.dbReadyPromise.then(d,f)}).then(a)},nt.prototype.use=function(h){var l=h.stack,d=h.create,f=h.level,h=h.name,g=(h&&this.unuse({stack:l,name:h}),this._middlewares[l]||(this._middlewares[l]=[]));return g.push({stack:l,create:d,level:f??10,name:h}),g.sort(function(x,w){return x.level-w.level}),this},nt.prototype.unuse=function(a){var l=a.stack,d=a.name,f=a.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(h){return f?h.create!==f:!!d&&h.name!==d})),this},nt.prototype.open=function(){var a=this;return ur(Rn,function(){return um(a)})},nt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var a=this._state,l=Pr.indexOf(this);if(0<=l&&Pr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new fe(function(d){a.dbReadyResolve=d}),a.openCanceller=new fe(function(d,f){a.cancelOpen=f}))},nt.prototype.close=function(l){var l=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,d=this._state;l?(d.isBeingOpened&&d.cancelOpen(new ge.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new ge.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},nt.prototype.delete=function(a){var l=this,d=(a===void 0&&(a={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),f=this._state;return new fe(function(h,g){function x(){l.close(a);var w=l._deps.indexedDB.deleteDatabase(l.name);w.onsuccess=Ke(function(){var _,z,A;_=l._deps,z=l.name,Bs(A=_.indexedDB)||z===_a||Ms(A,_.IDBKeyRange).delete(z).catch(Ne),h()}),w.onerror=hn(g),w.onblocked=l._fireOnBlocked}if(d)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(x):x()})},nt.prototype.backendDB=function(){return this.idbdb},nt.prototype.isOpen=function(){return this.idbdb!==null},nt.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},nt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},nt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nt.prototype,"tables",{get:function(){var a=this;return c(this._allTables).map(function(l){return a._allTables[l]})},enumerable:!1,configurable:!0}),nt.prototype.transaction=function(){var a=(function(l,d,f){var h=arguments.length;if(h<2)throw new ge.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return f=g.pop(),[l,$(g),f]}).apply(this,arguments);return this._transaction.apply(this,a)},nt.prototype._transaction=function(a,l,d){var f,h,g=this,x=be.trans,w=(x&&x.db===this&&a.indexOf("!")===-1||(x=null),a.indexOf("?")!==-1);a=a.replace("!","").replace("?","");try{if(h=l.map(function(z){if(z=z instanceof g.Table?z.name:z,typeof z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return z}),a=="r"||a===js)f=js;else{if(a!="rw"&&a!=Ss)throw new ge.InvalidArgument("Invalid transaction mode: "+a);f=Ss}if(x){if(x.mode===js&&f===Ss){if(!w)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&h.forEach(function(z){if(x&&x.storeNames.indexOf(z)===-1){if(!w)throw new ge.SubTransaction("Table "+z+" not included in parent transaction.");x=null}}),w&&x&&!x.active&&(x=null)}}catch(z){return x?x._promise(null,function(A,N){N(z)}):tt(z)}var _=(function z(A,N,P,R,F){return fe.resolve().then(function(){var O=be.transless||be,T=A._createTransaction(N,P,A._dbSchema,R),O=(T.explicit=!0,{trans:T,transless:O});if(R)T.idbtrans=R.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(Q){return Q.name===tn.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return z(A,N,P,null,F)})):tt(Q)}var W,U=we(F),O=(U&&Dr(),fe.follow(function(){var Q;(W=F.call(T,T))&&(U?(Q=Bn.bind(null,null),W.then(Q,Q)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=Gs(W)))},O));return(W&&typeof W.then=="function"?fe.resolve(W).then(function(Q){return T.active?Q:tt(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):O.then(function(){return W})).then(function(Q){return R&&T._resolve(),T._completion.then(function(){return Q})}).catch(function(Q){return T._reject(Q),tt(Q)})})}).bind(null,this,f,h,x,d);return x?x._promise(f,_,"lock"):be.trans?ur(be.transless,function(){return g._whenReady(_)}):this._whenReady(_)},nt.prototype.table=function(a){if(S(this._allTables,a))return this._allTables[a];throw new ge.InvalidTable("Table ".concat(a," does not exist"))};var Cn=nt;function nt(a,l){var d,f,h,g,x,w=this,_=(this._middlewares={},this.verno=0,nt.dependencies),_=(this._options=l=r({addons:nt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},l.addons),z=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ne,dbReadyPromise:null,cancelOpen:Ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen}),A=(z.dbReadyPromise=new fe(function(N){z.dbReadyResolve=N}),z.openCanceller=new fe(function(N,P){z.cancelOpen=P}),this._state=z,this.name=a,this.on=bi(this,"populate","blocked","versionchange","close",{ready:[ce,Ne]}),this.once=function(N,P){var R=function(){for(var F=[],T=0;T<arguments.length;T++)F[T]=arguments[T];w.on(N).unsubscribe(R),P.apply(w,F)};return w.on(N,R)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(N){return function(P,R){nt.vip(function(){var F,T=w._state;T.openComplete?(T.dbOpenError||fe.resolve().then(P),R&&N(P)):T.onReadyBeingFired?(T.onReadyBeingFired.push(P),R&&N(P)):(N(P),F=w,R||N(function W(){F.on.ready.unsubscribe(P),F.on.ready.unsubscribe(W)}))})}}),this.Collection=(d=this,ki(Zh.prototype,function(W,T){this.db=d;var R=kc,F=null;if(T)try{R=T()}catch(O){F=O}var T=W._ctx,W=T.table,U=W.hook.reading.fire;this._ctx={table:W,index:T.index,isPrimKey:!T.index||W.schema.primKey.keyPath&&T.index===W.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:T.or,valueMapper:U!==et?U:null}})),this.Table=(f=this,ki(Tc.prototype,function(N,P,R){this.db=f,this._tx=R,this.name=N,this.schema=P,this.hook=f._allTables[N]?f._allTables[N].hook:bi(null,{creating:[Ft,Ne],reading:[vt,et],updating:[je,Ne],deleting:[ie,Ne]})})),this.Transaction=(h=this,ki(tm.prototype,function(N,P,R,F,T){var W=this;N!=="readonly"&&P.forEach(function(U){U=(U=R[U])==null?void 0:U.yProps,U&&(P=P.concat(U.map(function(O){return O.updatesTable})))}),this.db=h,this.mode=N,this.storeNames=P,this.schema=R,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=bi(this,"complete","error","abort"),this.parent=T||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe(function(U,O){W._resolve=U,W._reject=O}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(U){var O=W.active;return W.active=!1,W.on.error.fire(U),W.parent?W.parent._reject(U):O&&W.idbtrans&&W.idbtrans.abort(),tt(U)})})),this.Version=(g=this,ki(lm.prototype,function(N){this.db=g,this._cfg={version:N,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,ki(Pc.prototype,function(N,P,R){if(this.db=x,this._ctx={table:N,index:P===":id"?null:P,or:R},this._cmp=this._ascending=Fe,this._descending=function(F,T){return Fe(T,F)},this._max=function(F,T){return 0<Fe(F,T)?F:T},this._min=function(F,T){return Fe(F,T)<0?F:T},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(N){0<N.newVersion?console.warn("Another connection wants to upgrade database '".concat(w.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(w.name,"'. Closing db now to resume the delete request.")),w.close({disableAutoOpen:!1})}),this.on("blocked",function(N){!N.newVersion||N.newVersion<N.oldVersion?console.warn("Dexie.delete('".concat(w.name,"') was blocked")):console.warn("Upgrade '".concat(w.name,"' blocked by other connection holding version ").concat(N.oldVersion/10))}),this._maxKey=Si(l.IDBKeyRange),this._createTransaction=function(N,P,R,F){return new w.Transaction(N,P,R,w._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(N){w.on("blocked").fire(N),Pr.filter(function(P){return P.name===w.name&&P!==w&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(N)})},this.use(fm),this.use(gm),this.use(pm),this.use(cm),this.use(dm),new Proxy(this,{get:function(N,P,R){var F;return P==="_vip"||(P==="table"?function(T){return Va(w.table(T),A)}:(F=Reflect.get(N,P,R))instanceof Tc?Va(F,A):P==="tables"?F.map(function(T){return Va(T,A)}):P==="_createTransaction"?function(){return Va(F.apply(this,arguments),A)}:F)}}));this.vip=A,_.forEach(function(N){return N(w)})}var Ua,Ir=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ym=(qs.prototype.subscribe=function(a,l,d){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:l,complete:d})},qs.prototype[Ir]=function(){return this},qs);function qs(a){this._subscribe=a}try{Ua={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Ua={indexedDB:null,IDBKeyRange:null}}function Hc(a){var l,d=!1,f=new ym(function(h){var g=we(a),x,w=!1,_={},z={},A={get closed(){return w},unsubscribe:function(){w||(w=!0,x&&x.abort(),N&&zn.storagemutated.unsubscribe(R))}},N=(h.start&&h.start(A),!1),P=function(){return Cs(F)},R=function(T){$a(_,T),zs(z,_)&&P()},F=function(){var T,W,U;!w&&Ua.indexedDB&&(_={},T={},x&&x.abort(),x=new AbortController,U=(O=>{var Q=Ar();try{g&&Dr();var te=Mn(a,O);return te=g?te.finally(Bn):te}finally{Q&&Fr()}})(W={subscr:T,signal:x.signal,requery:P,querier:a,trans:null}),Promise.resolve(U).then(function(O){d=!0,l=O,w||W.signal.aborted||(_={},(Q=>{for(var te in Q)if(S(Q,te))return;return 1})(z=T)||N||(zn(ji,R),N=!0),Cs(function(){return!w&&h.next&&h.next(O)}))},function(O){d=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||w||Cs(function(){w||h.error&&h.error(O)})}))};return setTimeout(P,0),A});return f.hasValue=function(){return d},f.getValue=function(){return l},f}var pr=Cn;function Hs(a){var l=Ln;try{Ln=!0,zn.storagemutated.fire(a),Ws(a,!0)}finally{Ln=l}}E(pr,r(r({},Ce),{delete:function(a){return new pr(a,{addons:[]}).delete()},exists:function(a){return new pr(a,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return l=pr.dependencies,d=l.indexedDB,l=l.IDBKeyRange,(Bs(d)?Promise.resolve(d.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==_a})}):Ms(d,l).toCollection().primaryKeys()).then(a)}catch{return tt(new ge.MissingAPI)}var l,d},defineClass:function(){return function(a){m(this,a)}},ignoreTransaction:function(a){return be.trans?ur(be.transless,a):a()},vip:Is,async:function(a){return function(){try{var l=Gs(a.apply(this,arguments));return l&&typeof l.then=="function"?l:fe.resolve(l)}catch(d){return tt(d)}}},spawn:function(a,l,d){try{var f=Gs(a.apply(d,l||[]));return f&&typeof f.then=="function"?f:fe.resolve(f)}catch(h){return tt(h)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(a,l){return a=fe.resolve(typeof a=="function"?pr.ignoreTransaction(a):a).timeout(l||6e4),be.trans?be.trans.waitFor(a):a},Promise:fe,debug:{get:function(){return Ee},set:function(a){Ut(a)}},derive:M,extend:m,props:E,override:b,Events:bi,on:zn,liveQuery:Hc,extendObservabilitySet:$a,getByKeyPath:L,setByKeyPath:B,delByKeyPath:function(a,l){typeof l=="string"?B(a,l,void 0):"length"in l&&[].map.call(l,function(d){B(a,d,void 0)})},shallowClone:V,deepClone:ne,getObjectDiff:Vs,cmp:Fe,asap:K,minKey:-1/0,addons:[],connections:Pr,errnames:tn,dependencies:Ua,cache:fr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(a){return parseInt(a)}).reduce(function(a,l,d){return a+l/Math.pow(10,2*d)})})),pr.maxKey=Si(pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zn(ji,function(a){Ln||(a=new CustomEvent(Ts,{detail:a}),Ln=!0,dispatchEvent(a),Ln=!1)}),addEventListener(Ts,function(a){a=a.detail,Ln||Hs(a)}));var Or,Ln=!1,Yc=function(){};return typeof BroadcastChannel<"u"&&((Yc=function(){(Or=new BroadcastChannel(Ts)).onmessage=function(a){return a.data&&Hs(a.data)}})(),typeof Or.unref=="function"&&Or.unref(),zn(ji,function(a){Ln||Or.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!Cn.disableBfCache&&a.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),Or!=null&&Or.close();for(var l=0,d=Pr;l<d.length;l++)d[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!Cn.disableBfCache&&a.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Yc(),Hs({all:new xt(-1/0,[[]])}))})),fe.rejectionMapper=function(a,l){return!a||a instanceof Ae||a instanceof TypeError||a instanceof SyntaxError||!a.name||!pt[a.name]?a:(l=new pt[a.name](l||a.message,a),"stack"in a&&Y(l,"stack",{get:function(){return this.inner.stack}}),l)},Ut(Ee),r(Cn,Object.freeze({__proto__:null,Dexie:Cn,Entity:Cc,PropModification:wi,RangeSet:xt,add:function(a){return new wi({add:a})},cmp:Fe,default:Cn,liveQuery:Hc,mergeRanges:Ti,rangesOverlap:Oc,remove:function(a){return new wi({remove:a})},replacePrefix:function(a,l){return new wi({replacePrefix:[a,l]})}}),{default:Cn}),Cn})})(Vh);var Ey=Vh.exports;const vu=wm(Ey),pf=Symbol.for("Dexie"),Jo=globalThis[pf]||(globalThis[pf]=vu);if(vu.semVer!==Jo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${vu.semVer} and ${Jo.semVer}`);const{liveQuery:nv,mergeRanges:rv,rangesOverlap:iv,RangeSet:av,cmp:ov,Entity:sv,PropModification:lv,replacePrefix:uv,add:cv,remove:dv,DexieYProvider:fv}=Jo,xu="sparkle-brush-current-profile";class Ny extends Jo{constructor(){super("SparkleBrushDB");St(this,"sessions");St(this,"userProgress");St(this,"photos");St(this,"profiles");this.version(2).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"})}}const Zt=new Ny,kl=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];let To=null;function vi(){if(To)return To;const e=localStorage.getItem(xu);return To=e,e}function hc(e){To=e,e?localStorage.setItem(xu,e):localStorage.removeItem(xu)}async function mc(){return Zt.profiles.orderBy("createdAt").toArray()}async function Ty(e){return Zt.profiles.get(e)}async function Uh(e){const t=await mc(),n=new Set(t.map(c=>c.avatarColor)),r=kl.find(c=>!n.has(c))||kl[Math.floor(Math.random()*kl.length)],o={id:`profile-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),avatarColor:r,createdAt:new Date};await Zt.profiles.add(o);const s={id:`progress-${o.id}`,profileId:o.id,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedHats:[]};return await Zt.userProgress.add(s),o}async function _y(e){await Zt.profiles.delete(e),await Zt.userProgress.where("profileId").equals(e).delete(),await Zt.sessions.where("profileId").equals(e).delete(),vi()===e&&hc(null)}async function wa(e){const t=e||vi();if(!t)throw new Error("No profile selected");let n=await Zt.userProgress.where("profileId").equals(t).first();return n||(n={id:`progress-${t}`,profileId:t,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedHats:[]},await Zt.userProgress.add(n)),n}async function gc(e,t){const n=t||vi();if(!n)throw new Error("No profile selected");const r=await wa(n);await Zt.userProgress.update(r.id,e)}async function Ay(e){const t=vi();if(!t)throw new Error("No profile selected");const n={...e,profileId:t};await Zt.sessions.add(n);const r=await wa(t),o=new Date;o.setHours(0,0,0,0);let s=r.currentStreak;if(r.lastSessionDate){const c=new Date(r.lastSessionDate);c.setHours(0,0,0,0);const p=Math.floor((o.getTime()-c.getTime())/(1e3*60*60*24));p===1?s+=1:p>1&&(s=1)}else s=1;await gc({totalSessions:r.totalSessions+1,currentStreak:s,longestStreak:Math.max(r.longestStreak,s),lastSessionDate:new Date},t)}async function Fy(e){const t=vi();if(!t)throw new Error("No profile selected");const n=await wa(t);n.capturedCreatures.some(o=>o.id===e.id)||await gc({capturedCreatures:[...n.capturedCreatures,e]},t)}async function Dy(){if((await mc()).length>0)return;const t=await Zt.userProgress.get("default-user");if(t&&(t.totalSessions>0||t.capturedCreatures.length>0)){const n=await Uh("Player 1");await gc({totalSessions:t.totalSessions,currentStreak:t.currentStreak,longestStreak:t.longestStreak,lastSessionDate:t.lastSessionDate,capturedCreatures:t.capturedCreatures,unlockedHats:t.unlockedHats,selectedHatId:t.selectedHatId},n.id),hc(n.id)}}const Py={red:{gradient:"from-red-500 to-red-700",border:"border-white",stripe:"bg-white",center:"bg-red-500",centerBorder:"border-white"},blue:{gradient:"from-blue-500 to-blue-700",border:"border-red-500",stripe:"bg-red-500",center:"bg-blue-500",centerBorder:"border-red-400"},bee:{gradient:"from-yellow-400 to-yellow-500",border:"border-black",stripe:"bg-black",center:"bg-yellow-400",centerBorder:"border-black"},white:{gradient:"from-white to-gray-200",border:"border-red-500",stripe:"bg-red-500",center:"bg-white",centerBorder:"border-red-400"},master:{gradient:"from-purple-500 via-purple-600 to-purple-800",border:"border-yellow-400",stripe:"bg-yellow-400",center:"bg-purple-400",centerBorder:"border-yellow-300",glow:"shadow-[0_0_20px_rgba(168,85,247,0.7)]"}};function Cl({type:e,size:t,showSparkle:n=!1,className:r=""}){const o=Py[e],s={small:"w-12 h-12",medium:"w-16 h-16",large:"w-20 h-20"},c={small:"w-2 h-2",medium:"w-3 h-3",large:"w-4 h-4"},p={small:"h-0.5",medium:"h-1",large:"h-1"},m=e==="bee";return u.jsxs("div",{className:`relative ${r}`,children:[u.jsxs("div",{className:`
        ${s[t]} rounded-full bg-gradient-to-br ${o.gradient}
        border-4 ${o.border} shadow-xl
        flex items-center justify-center
        ${o.glow||""}
      `,children:[m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`w-full ${p[t]} bg-black absolute`,style:{top:"30%"}}),u.jsx("div",{className:`w-full ${p[t]} bg-black absolute`,style:{top:"50%"}}),u.jsx("div",{className:`w-full ${p[t]} bg-black absolute`,style:{top:"70%"}})]}):u.jsx("div",{className:`w-full ${p[t]} ${o.stripe} absolute`}),u.jsx("div",{className:`${c[t]} rounded-full ${o.center} border-2 ${o.centerBorder} absolute`})]}),n&&u.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-sparkle",children:""}),e==="master"&&u.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-yellow-400/20"})]})}function Ry({cleaningPercentage:e,userProgress:t,region:n,preSelectedCreature:r,onComplete:o}){const[s,c]=k.useState("intro"),[p,m]=k.useState(r||null),[y,j]=k.useState(0),[S,E]=k.useState("red"),[G,Y]=k.useState(!1),[M,ee]=k.useState({x:50,y:85,scale:1,rotation:0}),[C,v]=k.useState({count:0,maxWobbles:3,currentWobble:0,direction:1}),[b,I]=k.useState(!1),[K,L]=k.useState(!1),[B,V]=k.useState(0),q=k.useRef(null),$=k.useRef(y),D=k.useRef(p);$.current=y,D.current=p,k.useEffect(()=>{if(!r){const de=t.capturedCreatures.map(X=>X.id),H=Oh(e,de,n);m(H)}return()=>{q.current&&cancelAnimationFrame(q.current)}},[e,t.capturedCreatures,n,r]),k.useEffect(()=>{if(p){const de=cy(e,p.rarity);j(de),E(dy(e));const H=p.rarity==="mythic"?6+Math.floor(Math.random()*2):p.rarity==="legendary"?4+Math.floor(Math.random()*2):p.rarity==="rare"?3+Math.floor(Math.random()*2):2+Math.floor(Math.random()*2);v(oe=>({...oe,maxWobbles:H}));const X=setTimeout(()=>c("ready"),2e3);return()=>clearTimeout(X)}},[p,e]);const J=k.useCallback(()=>{let de=0;const H=40,X=()=>{de++;const oe=de/H,we=1-Math.pow(1-oe,3),Ce=Math.sin(oe*Math.PI)*30;ee({x:50,y:85-we*55-Ce,scale:1-oe*.3,rotation:oe*720}),de<H?q.current=requestAnimationFrame(X):(c("impact"),L(!0),((p==null?void 0:p.rarity)==="legendary"||(p==null?void 0:p.rarity)==="mythic")&&I(!0),yr("capture"),setTimeout(()=>{L(!1),I(!1),ne()},300))};q.current=requestAnimationFrame(X)},[p]),ne=k.useCallback(()=>{c("wobble");let de=0;const H=C.maxWobbles,X=()=>{de++,v(ze=>({...ze,currentWobble:de})),yr("wobble");let oe=0;const we=30,Ce=()=>{oe++;const ze=oe/we,Ae=Math.sin(ze*Math.PI*4)*(1-ze)*15;if(ee(Re=>({...Re,x:50+Ae,rotation:Ae*2})),oe<we)q.current=requestAnimationFrame(Ce);else{ee(Le=>({...Le,x:50,rotation:0}));const Re=400+Math.random()*400;de<H?setTimeout(X,Re):setTimeout(()=>{c("suspense"),pe()},Re)}};q.current=requestAnimationFrame(Ce)};setTimeout(X,500)},[C.maxWobbles]),pe=k.useCallback(()=>{let de=0;const H=()=>{de+=.02,V(Math.min(de,.5)),de<.5&&(q.current=requestAnimationFrame(H))};q.current=requestAnimationFrame(H);const X=D.current,oe=$.current,we=(X==null?void 0:X.rarity)==="mythic"?3500:(X==null?void 0:X.rarity)==="legendary"?2500:(X==null?void 0:X.rarity)==="rare"?1800:1200;console.log("[CaptureGame] Starting suspense with capture rate:",oe),setTimeout(()=>{const Ce=Math.random(),ze=Ce<oe;if(console.log("[CaptureGame] Capture roll:",Ce,"rate:",oe,"success:",ze),Y(ze),V(0),c("result"),ze){if(yr("click"),setTimeout(()=>yr("success"),250),X){const Ae={...X,capturedAt:new Date};Fy(Ae)}}else yr("fail")},we)},[]),xe=k.useCallback(()=>{s!=="ready"||!p||(c("throwing"),J())},[s,p,J]),Z=k.useCallback(()=>{o(G?p:null)},[G,p,o]);return p?u.jsxs("div",{className:`relative flex flex-col h-full overflow-hidden ${b?"animate-shake":""}`,children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:n})}),K&&u.jsx("div",{className:"absolute inset-0 bg-white z-50 animate-flash"}),B>0&&u.jsx("div",{className:"absolute inset-0 bg-black z-20 pointer-events-none transition-opacity",style:{opacity:B}}),u.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-center p-6 z-10",children:[s==="intro"&&u.jsxs("div",{className:"text-center animate-bounce-gentle",children:[u.jsx("div",{className:"text-xl text-white mb-2 drop-shadow-lg",children:"A wild creature appeared!"}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx(un,{creature:p,size:150,animated:!0}),(p.rarity==="legendary"||p.rarity==="mythic")&&u.jsx("div",{className:"absolute inset-0 animate-pulse",children:u.jsx("div",{className:`absolute inset-0 ${p.rarity==="mythic"?"bg-orange-400/30":"bg-yellow-400/20"} rounded-full blur-xl`})})]}),u.jsx("div",{className:"text-2xl font-bold text-white mt-3 drop-shadow-lg",children:p.name}),u.jsx("div",{className:`text-lg mt-1 font-semibold ${p.rarity==="mythic"?"text-orange-400 animate-pulse":p.rarity==="legendary"?"text-yellow-400 animate-pulse":p.rarity==="rare"?"text-purple-400":"text-gray-300"}`,children:p.rarity.toUpperCase()}),u.jsx("div",{className:"text-sm text-purple-200 mt-2 max-w-xs mx-auto",children:p.description})]}),(s==="ready"||s==="throwing"||s==="impact"||s==="wobble"||s==="suspense")&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`absolute top-1/4 left-1/2 -translate-x-1/2 ${s==="impact"?"animate-shake":"animate-float"}`,children:s!=="impact"&&s!=="wobble"&&s!=="suspense"?u.jsx(un,{creature:p,size:120,animated:!0}):u.jsxs("div",{className:"relative",children:[u.jsx("div",{style:{transform:`translateX(${M.x-50}px) rotate(${M.rotation}deg)`},children:u.jsx(Cl,{type:S,size:"large"})}),s==="wobble"&&u.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 flex gap-1",children:[...Array(C.maxWobbles)].map((de,H)=>u.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${H<C.currentWobble?"bg-yellow-400 scale-100":"bg-gray-600 scale-75"}`},H))}),s==="suspense"&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-yellow-400/50 animate-ping"})})]})}),s==="ready"&&u.jsx("div",{className:"absolute transition-all duration-100 animate-bounce-gentle",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:u.jsx(Cl,{type:S,size:"medium",showSparkle:!0})}),s==="throwing"&&u.jsx("div",{className:"absolute transition-none",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:u.jsx(Cl,{type:S,size:"medium"})}),s==="ready"&&u.jsxs("div",{className:"absolute bottom-24 text-center",children:[u.jsxs("div",{className:"text-lg text-white mb-2 drop-shadow-lg",children:["Capture chance: ",u.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round(y*100),"%"]})]}),u.jsx("button",{onClick:xe,className:"px-8 py-4 text-2xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform animate-button-glow",children:"Throw Sparkle Ball! "})]}),(s==="wobble"||s==="suspense")&&u.jsx("div",{className:"absolute bottom-24 text-center",children:u.jsx("div",{className:"text-xl text-white animate-pulse drop-shadow-lg",children:s==="wobble"?"...":"Please work..."})})]}),s==="result"&&u.jsx("div",{className:"text-center z-30 bg-purple-900/90 backdrop-blur-sm rounded-3xl p-6 mx-4 border border-purple-500/30 shadow-2xl",children:G?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-4xl text-yellow-400 font-bold mb-4 animate-bounce-gentle drop-shadow-lg",children:"CAUGHT!"}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx(un,{creature:p,size:150,animated:!0}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((de,H)=>u.jsx("div",{className:"absolute text-3xl animate-sparkle",style:{left:`${20+H%4*20}%`,top:`${20+Math.floor(H/4)*40}%`,animationDelay:`${H*.1}s`},children:""},H))})]}),u.jsx("div",{className:"text-2xl font-bold text-white mt-4",children:p.name}),u.jsx("div",{className:"text-purple-200 mt-2 max-w-xs mx-auto",children:p.description}),u.jsx("div",{className:"text-4xl mt-4",children:""})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-3xl text-red-400 font-bold mb-4",children:"Oh no! It escaped!"}),u.jsx("div",{className:"opacity-50 inline-block",children:u.jsx(un,{creature:p,size:120,animated:!1})}),u.jsx("div",{className:"text-xl text-purple-200 mt-4 max-w-xs mx-auto",children:"Keep brushing well and try again tomorrow!"}),u.jsx("div",{className:"text-4xl mt-4",children:""})]})})]}),s==="result"&&u.jsx("div",{className:"relative z-30 p-6",children:u.jsx("button",{onClick:Z,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg",children:"Continue"})}),u.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
        @keyframes flash {
          0% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-flash {
          animation: flash 0.3s ease-out forwards;
        }
      `})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[u.jsx("div",{className:"text-4xl mb-4",children:""}),u.jsx("div",{className:"text-xl text-center text-purple-200",children:"You've caught all the creatures in this region!"}),u.jsx("button",{onClick:()=>o(null),className:"mt-8 px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Continue"})]})}function My({photos:e,capturedCreature:t,onSelectPhoto:n,onSkip:r}){return e.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"No Photos"}),u.jsx("p",{className:"text-purple-200 mb-6",children:"No photos were captured during this session."}),u.jsx("button",{onClick:r,className:"px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Go Home"})]}):u.jsxs("div",{className:"flex flex-col h-full p-4",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Your Photos!"}),u.jsx("p",{className:"text-purple-200 text-sm",children:"Tap a photo to decorate it with stickers!"}),t&&u.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-yellow-900/30 px-3 py-1 rounded-full",children:[u.jsx(un,{creature:t,size:24,animated:!1}),u.jsx("span",{className:"text-sm text-yellow-300",children:"New sticker unlocked!"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map((o,s)=>u.jsx("button",{onClick:()=>n(o),className:"aspect-[3/4] rounded-2xl overflow-hidden bg-purple-900/50 active:scale-95 transition-transform shadow-lg",children:u.jsx("img",{src:o,alt:`Photo ${s+1}`,className:"w-full h-full object-cover"})},s))})}),u.jsx("button",{onClick:r,className:"w-full mt-4 py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl",children:"Skip for now"})]})}const uo=[{id:"none",name:"Squeaky Clean",imageUrl:""},{id:"rainbow",name:"Unicorn Burp",imageUrl:"linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff)"},{id:"purple",name:"Grape Soda Pop",imageUrl:"linear-gradient(135deg, #667eea, #764ba2)"},{id:"sunset",name:"Peachy Keen",imageUrl:"linear-gradient(135deg, #fa709a, #fee140)"},{id:"ocean",name:"Mermaid Splash",imageUrl:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{id:"forest",name:"Froggy Pond",imageUrl:"linear-gradient(135deg, #11998e, #38ef7d)"},{id:"candy",name:"Bubblegum Blast",imageUrl:"linear-gradient(135deg, #f093fb, #f5576c)"},{id:"night",name:"Sleepy Time",imageUrl:"linear-gradient(135deg, #0f0c29, #302b63, #24243e)"},{id:"gold",name:"Cheesy Grin",imageUrl:"linear-gradient(135deg, #f7971e, #ffd200)"},{id:"mint",name:"Mint Fresh",imageUrl:"linear-gradient(135deg, #00b09b, #96c93d)"}];var ht=[];for(var jl=0;jl<256;++jl)ht.push((jl+256).toString(16).slice(1));function By(e,t=0){return(ht[e[t+0]]+ht[e[t+1]]+ht[e[t+2]]+ht[e[t+3]]+"-"+ht[e[t+4]]+ht[e[t+5]]+"-"+ht[e[t+6]]+ht[e[t+7]]+"-"+ht[e[t+8]]+ht[e[t+9]]+"-"+ht[e[t+10]]+ht[e[t+11]]+ht[e[t+12]]+ht[e[t+13]]+ht[e[t+14]]+ht[e[t+15]]).toLowerCase()}var co,Iy=new Uint8Array(16);function Oy(){if(!co&&(co=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!co))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return co(Iy)}var zy=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const hf={randomUUID:zy};function Ly(e,t,n){if(hf.randomUUID&&!e)return hf.randomUUID();e=e||{};var r=e.random||(e.rng||Oy)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,By(r)}const Sl=[{label:"S",scale:.75},{label:"M",scale:1},{label:"L",scale:1.5},{label:"XL",scale:2}],mf=80,gf=2e3,$y=30,fo=5;function Kh({photo:e,capturedCreatures:t,onDone:n,onBack:r,debugMode:o=!1}){const[s,c]=k.useState([]),[p,m]=k.useState(uo[0]),[y,j]=k.useState(null),[S,E]=k.useState(null),[G,Y]=k.useState(!1),[M,ee]=k.useState(null),[C,v]=k.useState(0),[b,I]=k.useState(!1),[K,L]=k.useState(!1),[B,V]=k.useState([]),q=k.useRef(null),[$,D]=k.useState(!1),[J,ne]=k.useState(!1),[pe,xe]=k.useState(null),Z=k.useRef(null),de=k.useRef(0),H=k.useRef(null),X=o?999:$y,oe=k.useCallback(ie=>{if(s.length>=X)return;const je=s.length%10,Se=50+je*fo-5*fo/2,ce=50+je*fo-5*fo/2,Ee=Math.max(10,Math.min(90,Se)),Ut=Math.max(10,Math.min(90,ce)),Dt={id:Ly(),stickerId:ie.id,creatureId:ie.id,imageUrl:`/vibe-brushing/creatures/${ie.id}.png`,x:Ee,y:Ut,scale:1,rotation:0};c(Kt=>[...Kt,Dt]),ee(ie.id),Y(!1),E(Dt.id)},[s.length]),we=k.useCallback((ie,je)=>{je.stopPropagation(),j(ie),E(ie)},[]),Ce=k.useCallback(ie=>{if(!y||!q.current)return;const je=q.current.getBoundingClientRect();let Se,ce;"touches"in ie?(Se=ie.touches[0].clientX,ce=ie.touches[0].clientY):(Se=ie.clientX,ce=ie.clientY);const Ee=(Se-je.left)/je.width*100,Ut=(ce-je.top)/je.height*100;c(Dt=>Dt.map(Kt=>Kt.id===y?{...Kt,x:Math.max(0,Math.min(100,Ee)),y:Math.max(0,Math.min(100,Ut))}:Kt))},[y]),ze=k.useCallback(ie=>{c(je=>je.filter(Se=>Se.id!==ie)),S===ie&&E(null)},[S]),Ae=k.useCallback(ie=>{c(je=>je.map(Se=>{if(Se.id!==ie)return Se;const Ee=(Sl.findIndex(Ut=>Math.abs(Ut.scale-Se.scale)<.01)+1)%Sl.length;return{...Se,scale:Sl[Ee].scale}}))},[]),Re=k.useCallback((ie,je)=>{je.stopPropagation(),E(ie)},[]),Le=k.useCallback(()=>{E(null)},[]),Ue=k.useCallback(()=>{const je=(uo.findIndex(ce=>ce.id===p.id)+1)%uo.length,Se=uo[je];m(Se),xe(Se.name),H.current&&clearTimeout(H.current),H.current=window.setTimeout(()=>{xe(null)},1500)},[p]),tn=k.useCallback(()=>{S&&Ae(S)},[S,Ae]),Ie=k.useCallback(ie=>{c(je=>je.map(Se=>Se.id!==ie?Se:{...Se,rotation:(Se.rotation+45)%360}))},[]),ge=k.useCallback(()=>{S&&Ie(S)},[S,Ie]),pt=k.useCallback(()=>{L(!0),v(0),I(!1);const ie=["","","","","","",""],je=Array.from({length:16},(Se,ce)=>({id:ce,x:50,y:50,angle:ce*360/16,emoji:ie[Math.floor(Math.random()*ie.length)]}));V(je),setTimeout(()=>{c([]),E(null),L(!1),V([])},600)},[]),Ne=k.useCallback(()=>{pt()},[pt]),et=k.useCallback(()=>{I(!0),de.current=Date.now();const ie=()=>{const je=Date.now()-de.current,Se=Math.min(je/gf,1);v(Se),Se>=1?Ne():Z.current=requestAnimationFrame(ie)};Z.current=requestAnimationFrame(ie)},[Ne]),vt=k.useCallback(()=>{I(!1),v(0),Z.current&&(cancelAnimationFrame(Z.current),Z.current=null)},[]),At=k.useCallback(async()=>{D(!0);try{const ie=document.createElement("canvas"),je=ie.getContext("2d");if(!je)return;const Se=new Image;Se.crossOrigin="anonymous",await new Promise((jt,at)=>{Se.onload=()=>jt(),Se.onerror=at,Se.src=e}),ie.width=Se.width,ie.height=Se.height,p.imageUrl&&(je.fillStyle="#000",je.fillRect(0,0,ie.width,ie.height)),je.drawImage(Se,0,0);const ce=Math.min(ie.width,ie.height)/4,Ee=s.map(jt=>new Promise((at,nn)=>{const rn=new Image;rn.crossOrigin="anonymous",rn.onload=()=>at({sticker:jt,img:rn}),rn.onerror=nn,rn.src=jt.imageUrl}));(await Promise.all(Ee)).forEach(({sticker:jt,img:at})=>{const nn=jt.x/100*ie.width,rn=jt.y/100*ie.height,pn=ce*jt.scale;je.save(),je.translate(nn,rn),je.rotate(jt.rotation*Math.PI/180),je.drawImage(at,-pn/2,-pn/2,pn,pn),je.restore()});const Dt=ie.toDataURL("image/png"),Kt=document.createElement("a");Kt.download=`sparkle-brush-${Date.now()}.png`,Kt.href=Dt,Kt.click(),setTimeout(n,500)}catch(ie){console.error("Failed to save image:",ie),D(!1)}},[e,s,p,n]);k.useEffect(()=>{const ie=()=>{j(null),vt()},je=()=>{j(null),vt()};return window.addEventListener("mouseup",ie),window.addEventListener("touchend",je),()=>{window.removeEventListener("mouseup",ie),window.removeEventListener("touchend",je),Z.current&&cancelAnimationFrame(Z.current),H.current&&clearTimeout(H.current)}},[vt]);const Ft=t.find(ie=>ie.id===M);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-900/50",children:[u.jsx("button",{onClick:r,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg",children:" Back"}),u.jsx("h1",{className:"text-lg font-bold",children:"Decorate!"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>ne(!0),disabled:$,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg disabled:opacity-50",children:"Skip"}),u.jsx("button",{onClick:At,disabled:$,className:"px-4 py-1 text-white bg-green-600 rounded-lg disabled:opacity-50",children:$?"...":"Save"})]})]}),u.jsxs("div",{ref:q,className:"flex-1 relative overflow-hidden m-3 rounded-2xl",style:{background:p.imageUrl||"transparent"},onMouseMove:Ce,onTouchMove:Ce,onClick:Le,children:[u.jsx("img",{src:e,alt:"Your photo",className:"w-full h-full object-contain",draggable:!1}),s.map(ie=>{const je=S===ie.id,Se=y===ie.id;return u.jsx("div",{className:`absolute cursor-move select-none ${Se?"z-20":je?"z-10":""}`,style:{left:`${ie.x}%`,top:`${ie.y}%`,transform:"translate(-50%, -50%)",transition:Se?"none":"transform 0.1s"},onMouseDown:ce=>we(ie.id,ce),onTouchStart:ce=>we(ie.id,ce),onClick:ce=>Re(ie.id,ce),children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`relative ${je?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-transparent rounded-lg":""}`,style:{transform:`scale(${ie.scale}) rotate(${ie.rotation}deg)`,transition:Se?"none":"transform 0.15s"},children:u.jsx("img",{src:ie.imageUrl,alt:"Sticker",className:"pointer-events-none",style:{width:mf,height:mf,objectFit:"contain"},draggable:!1})}),je&&u.jsx("button",{onClick:ce=>{ce.stopPropagation(),ze(ie.id)},onMouseDown:ce=>ce.stopPropagation(),onTouchStart:ce=>ce.stopPropagation(),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center text-white text-sm shadow-lg hover:bg-red-500 active:scale-90 transition-transform",style:{transform:`scale(${1/ie.scale})`},children:""})]})},ie.id)}),s.length===0&&!G&&!K&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"bg-black/50 rounded-xl px-4 py-2 text-sm text-white text-center",children:"Tap the + button to add creature stickers!"})}),K&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-orange-500/30 animate-explosion-flash pointer-events-none z-30"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-40",children:u.jsx("div",{className:"text-8xl animate-explosion-center",children:""})}),B.map(ie=>u.jsx("div",{className:"absolute text-3xl pointer-events-none z-40 animate-explosion-particle",style:{left:"50%",top:"50%","--particle-angle":`${ie.angle}deg`},children:ie.emoji},ie.id))]}),pe&&u.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 pointer-events-none z-50 animate-toast-fade",children:u.jsx("div",{className:"bg-black/80 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:pe})})]}),u.jsx("div",{className:"bg-purple-900/50 p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>Y(!0),disabled:s.length>=X,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg relative ${s.length>=X?"bg-gray-600 opacity-50 cursor-not-allowed":"bg-purple-600"}`,children:Ft?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`/vibe-brushing/creatures/${Ft.id}.png`,alt:Ft.name,className:"w-10 h-10 object-contain"}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center text-xs font-bold text-white shadow",children:"+"})]}):u.jsx("span",{className:"text-2xl",children:"+"})}),u.jsx("button",{onClick:Ue,className:"w-12 h-12 flex-shrink-0 bg-purple-800/50 rounded-xl flex items-center justify-center active:scale-95 transition-transform",children:u.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-white/30",style:{background:p.imageUrl||"#1E1B4B"}})}),u.jsx("div",{className:"flex-1"}),S&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:tn,className:"w-12 h-12 flex-shrink-0 bg-blue-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),u.jsx("button",{onClick:ge,className:"w-12 h-12 flex-shrink-0 bg-orange-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:u.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9"}),u.jsx("path",{d:"M21 3v9h-9"})]})})]}),u.jsx("div",{className:"flex-1"}),s.length>0&&u.jsxs("button",{onMouseDown:et,onTouchStart:et,onMouseUp:vt,onTouchEnd:vt,onMouseLeave:vt,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl transition-all relative overflow-hidden ${b?"bg-red-600 scale-105":"bg-red-900/70"}`,style:{animation:b?"bomb-shake 0.1s infinite":"none"},children:[u.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[u.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"4"}),u.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"#fbbf24",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${C*94.2} 94.2`,style:{filter:"drop-shadow(0 0 4px #fbbf24)"}})]}),b&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg drop-shadow-lg",children:Math.ceil((1-C)*(gf/1e3))})}),u.jsx("span",{className:`relative z-10 transition-all ${b?"scale-75 opacity-50":""}`,children:""}),u.jsx("style",{children:`
                @keyframes bomb-shake {
                  0%, 100% { transform: translateX(0); }
                  25% { transform: translateX(-2px) rotate(-2deg); }
                  75% { transform: translateX(2px) rotate(2deg); }
                }
                @keyframes explosion-flash {
                  0% { opacity: 0; }
                  20% { opacity: 1; }
                  100% { opacity: 0; }
                }
                @keyframes explosion-center {
                  0% { transform: scale(0) rotate(0deg); opacity: 1; }
                  50% { transform: scale(2) rotate(180deg); opacity: 1; }
                  100% { transform: scale(3) rotate(360deg); opacity: 0; }
                }
                @keyframes explosion-particle {
                  0% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(0) scale(1);
                    opacity: 1;
                  }
                  100% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(150px) scale(0);
                    opacity: 0;
                  }
                }
                .animate-explosion-flash {
                  animation: explosion-flash 0.6s ease-out forwards;
                }
                .animate-explosion-center {
                  animation: explosion-center 0.6s ease-out forwards;
                }
                .animate-explosion-particle {
                  animation: explosion-particle 0.6s ease-out forwards;
                }
                @keyframes toast-fade {
                  0% { opacity: 0; transform: translate(-50%, 10px); }
                  15% { opacity: 1; transform: translate(-50%, 0); }
                  85% { opacity: 1; transform: translate(-50%, 0); }
                  100% { opacity: 0; transform: translate(-50%, -10px); }
                }
                .animate-toast-fade {
                  animation: toast-fade 1.5s ease-in-out forwards;
                }
              `})]})]})}),G&&u.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>Y(!1),children:u.jsxs("div",{className:"bg-purple-900 rounded-2xl p-4 m-4 max-w-md max-h-[80vh] overflow-auto",onClick:ie=>ie.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Add Creature Sticker"}),u.jsx("button",{onClick:()=>Y(!1),className:"w-8 h-8 bg-purple-800 rounded-full flex items-center justify-center text-purple-300 hover:bg-purple-700",children:""})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 text-purple-300",children:[u.jsx("p",{children:"No creatures captured yet!"}),u.jsx("p",{className:"text-sm mt-2",children:"Complete brushing sessions to catch creatures."})]}):u.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(ie=>u.jsxs("button",{onClick:()=>oe(ie),className:"aspect-square bg-purple-800/50 rounded-xl p-2 flex flex-col items-center justify-center gap-1 hover:bg-purple-700/50 active:scale-95 transition-all",children:[u.jsx("img",{src:`/vibe-brushing/creatures/${ie.id}.png`,alt:ie.name,className:"w-16 h-16 object-contain"}),u.jsx("span",{className:"text-xs text-purple-200 truncate w-full text-center",children:ie.name})]},ie.id))})]})}),J&&u.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>ne(!1),children:u.jsxs("div",{className:"bg-purple-900 rounded-2xl p-6 m-4 max-w-sm text-center",onClick:ie=>ie.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Skip Decorating?"}),u.jsx("p",{className:"text-purple-300 mb-6",children:"Your photo won't be saved. Are you sure you want to skip?"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>ne(!1),className:"flex-1 py-3 bg-purple-800 rounded-xl font-semibold hover:bg-purple-700 active:scale-95 transition-all",children:"Cancel"}),u.jsx("button",{onClick:()=>{ne(!1),n()},className:"flex-1 py-3 bg-red-600 rounded-xl font-semibold hover:bg-red-500 active:scale-95 transition-all",children:"Skip"})]})]})})]})}function Wy({userProgress:e,onBack:t}){const[n,r]=k.useState(null),o=new Set(e.capturedCreatures.map(p=>p.id)),s={mythic:ot.filter(p=>p.rarity==="mythic"),legendary:ot.filter(p=>p.rarity==="legendary"),rare:ot.filter(p=>p.rarity==="rare"),common:ot.filter(p=>p.rarity==="common")},c=p=>{o.has(p.id)&&r(p)};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"My Collection"}),u.jsxs("div",{className:"text-sm text-purple-300",children:[o.size,"/",ot.length]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.jsx(po,{title:" Mythic",creatures:s.mythic,capturedIds:o,color:"rainbow",onCreatureClick:c}),u.jsx(po,{title:" Legendary",creatures:s.legendary,capturedIds:o,color:"yellow",onCreatureClick:c}),u.jsx(po,{title:" Rare",creatures:s.rare,capturedIds:o,color:"purple",onCreatureClick:c}),u.jsx(po,{title:" Common",creatures:s.common,capturedIds:o,color:"gray",onCreatureClick:c})]}),u.jsx("div",{className:"p-4 bg-purple-900/50",children:u.jsxs("div",{className:"flex justify-around text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),u.jsx("div",{className:"text-xs text-purple-300",children:"Day Streak"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.totalSessions}),u.jsx("div",{className:"text-xs text-purple-300",children:"Total Sessions"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.longestStreak}),u.jsx("div",{className:"text-xs text-purple-300",children:"Best Streak"})]})]})}),n&&u.jsx(Gy,{creature:n,capturedCreatures:e.capturedCreatures,onClose:()=>r(null)})]})}function po({title:e,creatures:t,capturedIds:n,color:r,onCreatureClick:o}){const s=t.filter(p=>n.has(p.id)).length,c={rainbow:"border-orange-500/50 bg-gradient-to-r from-orange-900/20 via-red-900/20 to-yellow-900/20",yellow:"border-yellow-500/30 bg-yellow-900/10",purple:"border-purple-500/30 bg-purple-900/10",gray:"border-gray-500/30 bg-gray-900/10"};return u.jsxs("div",{className:`mb-6 p-4 rounded-2xl border ${c[r]}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("h2",{className:"text-lg font-bold",children:e}),u.jsxs("span",{className:"text-sm text-purple-300",children:[s,"/",t.length]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(p=>{const m=n.has(p.id);return u.jsxs("button",{onClick:()=>o(p),disabled:!m,className:`aspect-square rounded-xl flex flex-col items-center justify-center p-2 transition-all ${m?"bg-purple-800/50 hover:bg-purple-700/50 cursor-pointer active:scale-95":"bg-purple-900/30 opacity-50 cursor-default"}`,children:[u.jsx("div",{className:`${m?"animate-float":"grayscale opacity-50"}`,children:m?u.jsx(un,{creature:p,size:48,animated:!1}):u.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-2xl",children:""})}),u.jsx("div",{className:"text-xs text-center mt-1 truncate w-full",children:m?p.name:"???"})]},p.id)})})]})}function Gy({creature:e,capturedCreatures:t,onClose:n}){const r=t.filter(y=>y.id===e.id).length,o=uy(e.region),s={Nature:"bg-green-600",Water:"bg-blue-600",Fire:"bg-orange-600",Electric:"bg-yellow-500",Air:"bg-cyan-500",Cosmic:"bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500"},c={common:"text-gray-300",rare:"text-purple-400",legendary:"text-yellow-400",mythic:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-400 to-yellow-400"},p=y=>y>=100?`${(y/100).toFixed(1)}m`:`${y}cm`,m=y=>y>=1e3?`${(y/1e3).toFixed(1)}t`:y<1?`${(y*1e3).toFixed(0)}g`:`${y}kg`;return u.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:n,children:u.jsxs("div",{className:"bg-purple-900/95 rounded-3xl max-w-sm w-full overflow-hidden shadow-2xl border border-purple-500/30",onClick:y=>y.stopPropagation(),children:[u.jsxs("div",{className:"relative bg-gradient-to-b from-purple-800/50 to-transparent p-6 flex flex-col items-center",children:[u.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-purple-800/80 flex items-center justify-center text-purple-300 hover:bg-purple-700/80 transition-colors",children:""}),u.jsx("div",{className:"animate-float",children:u.jsx(un,{creature:e,size:120,animated:!0})}),u.jsx("h2",{className:`text-2xl font-bold mt-4 ${c[e.rarity]}`,children:e.name}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium text-white ${s[o]}`,children:o}),u.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-700/60 text-purple-200 capitalize",children:e.rarity})]})]}),u.jsxs("div",{className:"px-6 pb-6",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-white",children:p(e.height)}),u.jsx("div",{className:"text-xs text-purple-300",children:"Height"})]}),u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-white",children:m(e.weight)}),u.jsx("div",{className:"text-xs text-purple-300",children:"Weight"})]}),u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:["",r]}),u.jsx("div",{className:"text-xs text-purple-300",children:"Caught"})]})]}),u.jsx("div",{className:"bg-purple-800/30 rounded-xl p-4",children:u.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:e.description})})]})]})})}const Vy="2.0.0";function Uy({onBack:e,onHatDebug:t,onGraphicsDebug:n,onPhotoDebug:r}){const[o,s]=k.useState(Lh);k.useEffect(()=>{fy(o)},[o]);const c=m=>{s(y=>({...y,sessionDurationMinutes:m}))},p=[{value:1,label:"1 Minute",description:"Quick brush"},{value:2,label:"2 Minutes",description:"Recommended"},{value:3,label:"3 Minutes",description:"Extra thorough"}];return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Settings"}),u.jsx("div",{className:"w-20"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-1",children:"Brushing Duration"}),u.jsx("p",{className:"text-sm text-purple-300 mb-4",children:"How long should each brushing session last?"}),u.jsx("div",{className:"space-y-2",children:p.map(m=>u.jsxs("button",{onClick:()=>c(m.value),className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${o.sessionDurationMinutes===m.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${o.sessionDurationMinutes===m.value?"border-white bg-white":"border-purple-400"}`,children:o.sessionDurationMinutes===m.value&&u.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold",children:m.label}),u.jsx("div",{className:`text-xs ${o.sessionDurationMinutes===m.value?"text-white/80":"text-purple-400"}`,children:m.description})]})]}),m.value===2&&u.jsx("span",{className:"text-xs bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full font-bold",children:" Best"})]},m.value))})]}),u.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-2",children:"About Sparkle"}),u.jsx("p",{className:"text-sm text-purple-300",children:"Sparkle makes tooth brushing fun! Brush your teeth to clean creatures, catch them, and build your collection."}),u.jsxs("div",{className:"mt-4 text-center text-xs text-purple-500",children:["Version ",Vy]})]}),(t||n||r)&&u.jsxs("div",{className:"bg-gray-900/50 rounded-2xl p-4 border border-gray-700",children:[u.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-300",children:"Developer Tools"}),u.jsxs("div",{className:"space-y-2",children:[n&&u.jsxs("button",{onClick:n,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-purple-400",children:"Graphics Debug Menu"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Preview all creatures and hat graphics in a gallery view"})]}),t&&u.jsxs("button",{onClick:t,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-green-400",children:"Hat Debug Mode"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test face tracking with debug overlay showing detected face rectangle"})]}),r&&u.jsxs("button",{onClick:r,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-pink-400",children:"Photo Editor Debug"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test photo editing with all stickers unlocked and no limits"})]})]})]})]})]})}function Ky({onProfileSelected:e}){const[t,n]=k.useState([]),[r,o]=k.useState(!0),[s,c]=k.useState(!1),[p,m]=k.useState(""),[y,j]=k.useState(null);k.useEffect(()=>{S()},[]);async function S(){o(!0);try{await Dy();const M=await mc(),ee=await Promise.all(M.map(async C=>{try{const v=await wa(C.id);return{...C,progress:v}}catch{return C}}));n(ee)}catch(M){console.error("Failed to load profiles:",M)}o(!1)}async function E(){if(p.trim())try{const M=await Uh(p);m(""),c(!1),await S(),G(M)}catch(M){console.error("Failed to create profile:",M)}}function G(M){hc(M.id),e(M)}async function Y(M){try{await _y(M),j(null),await S()}catch(ee){console.error("Failed to delete profile:",ee)}}return r?u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Loading profiles..."})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 p-6",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-5xl mb-4",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sparkle Brush"}),u.jsx("p",{className:"text-purple-200",children:"Who's brushing today?"})]}),u.jsx("div",{className:"space-y-4 mb-8",children:t.map(M=>u.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:y===M.id?u.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[u.jsxs("p",{className:"text-white text-center",children:["Delete ",M.name,"'s profile?"]}),u.jsx("p",{className:"text-red-300 text-sm text-center",children:"This will delete all their creatures and progress!"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Y(M.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold",children:"Delete"}),u.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-bold",children:"Cancel"})]})]}):u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:()=>G(M),className:"flex-1 flex items-center gap-4",children:[u.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg",style:{backgroundColor:M.avatarColor},children:M.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-white font-bold text-lg",children:M.name}),M.progress&&u.jsxs("div",{className:"text-purple-200 text-sm flex gap-3",children:[u.jsxs("span",{children:[" ",M.progress.currentStreak," streak"]}),u.jsxs("span",{children:[" ",M.progress.capturedCreatures.length," creatures"]})]})]})]}),u.jsx("button",{onClick:ee=>{ee.stopPropagation(),j(M.id)},className:"p-2 text-red-400 hover:text-red-300 transition-colors","aria-label":"Delete profile",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},M.id))}),s?u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-purple-200 text-sm mb-2",children:"Profile Name"}),u.jsx("input",{type:"text",value:p,onChange:M=>m(M.target.value),placeholder:"Enter name...",className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0,maxLength:20,onKeyDown:M=>{M.key==="Enter"&&E(),M.key==="Escape"&&c(!1)}})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:E,disabled:!p.trim(),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Profile"}),u.jsx("button",{onClick:()=>{c(!1),m("")},className:"px-4 py-3 bg-gray-500/50 text-white rounded-xl font-bold",children:"Cancel"})]})]}):u.jsxs("button",{onClick:()=>c(!0),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-lg shadow-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:"+"}),u.jsx("span",{children:"Add New Profile"})]}),t.length===0&&!s&&u.jsxs("div",{className:"text-center mt-8 text-purple-200",children:[u.jsx("p",{children:"No profiles yet!"}),u.jsx("p",{className:"text-sm mt-1",children:"Create a profile to start brushing"})]})]})})}const yf=[{id:"cowboy",name:"Cowboy Hat",imageUrl:"",unlockCondition:"starter"},{id:"crown",name:"Royal Crown",imageUrl:"",unlockCondition:"streak",unlockThreshold:7},{id:"tophat",name:"Top Hat",imageUrl:"",unlockCondition:"sessions",unlockThreshold:10},{id:"wizard",name:"Wizard Hat",imageUrl:"",unlockCondition:"creature"},{id:"cap",name:"Baseball Cap",imageUrl:"",unlockCondition:"starter"}];function qy({onBack:e}){const{isReady:t,error:n,registerVideoElement:r,startCamera:o}=gs(),{facePosition:s,isLoading:c,startTracking:p,stopTracking:m}=Bh(),{motionResults:y,startDetection:j,stopDetection:S,setFaceRegion:E,setDebugMode:G,getDebugInfo:Y}=Mh({targetCleaningTime:25}),M=k.useRef(null),ee=k.useRef(null),[C,v]=k.useState(yf[0]),[b,I]=k.useState({width:0,height:0}),[K,L]=k.useState({width:640,height:480}),[B,V]=k.useState(!0),[q,$]=k.useState(!1);k.useEffect(()=>{o()},[o]),k.useEffect(()=>{E(s?{x:s.x,y:s.y,width:s.width,height:s.height}:null)},[s,E]);const D=k.useCallback(()=>{$(Z=>{const de=!Z;return G(de),de})},[G]),J=k.useCallback(Z=>{M.current=Z,Z&&r(Z)},[r]);k.useEffect(()=>{const Z=M.current;if(!Z||!t)return;const de=()=>{Z.readyState>=2&&Z.videoWidth>0&&(L({width:Z.videoWidth,height:Z.videoHeight}),p(Z),j(Z))},H=setInterval(de,100);return de(),()=>{clearInterval(H),m(),S()}},[t,p,m,j,S]),k.useEffect(()=>{const Z=ee.current;if(!Z)return;const de=()=>{I({width:Z.clientWidth,height:Z.clientHeight})};de();const H=new ResizeObserver(de);return H.observe(Z),()=>H.disconnect()},[]);const ne=b.width/K.width,pe=b.height/K.height,xe=s?{x:(b.width-s.width*ne)/2,y:s.y*pe,width:s.width*ne,height:s.height*pe}:null;return u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-indigo-900 to-purple-800 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg text-white",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Hat Debug Mode"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:D,className:`px-4 py-2 rounded-lg text-white ${q?"bg-yellow-600":"bg-gray-600"}`,children:" Brush"}),u.jsx("button",{onClick:()=>V(!B),className:`px-4 py-2 rounded-lg text-white ${B?"bg-green-600":"bg-gray-600"}`,children:B?"Hat ON":"Hat OFF"})]})]}),u.jsxs("div",{ref:ee,className:"relative w-full aspect-[4/3] bg-black rounded-2xl overflow-hidden mb-4",children:[u.jsx("video",{ref:J,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!t&&!n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/70",children:u.jsx("div",{className:"text-purple-200 text-center p-4 animate-pulse",children:"Connecting to camera..."})}),n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/70",children:u.jsx("div",{className:"text-red-200 text-center p-4",children:n})}),c&&u.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500/80 px-3 py-1 rounded text-sm",children:"Loading face detection..."}),B&&xe&&u.jsx("div",{className:"absolute border-2 border-green-400 pointer-events-none",style:{left:`${xe.x}px`,top:`${xe.y}px`,width:`${xe.width}px`,height:`${xe.height}px`},children:u.jsxs("div",{className:"absolute -top-6 left-0 bg-green-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:["Face: ",s==null?void 0:s.x.toFixed(0),", ",s==null?void 0:s.y.toFixed(0)," | ",s==null?void 0:s.width.toFixed(0),"x",s==null?void 0:s.height.toFixed(0)]})}),B&&s&&u.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full border-2 border-white pointer-events-none",style:{left:`${b.width/2}px`,top:`${s.y*pe}px`,transform:"translate(-50%, -50%)"}}),C&&t&&b.width>0&&u.jsx(Wh,{hat:C,facePosition:s||null,containerWidth:b.width,containerHeight:b.height,videoWidth:K.width,videoHeight:K.height}),q&&b.width>0&&u.jsx(Gh,{getDebugInfo:Y,containerWidth:b.width,containerHeight:b.height,videoWidth:K.width,videoHeight:K.height}),q&&u.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:u.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${y.some(Z=>Z.hasMotion)?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:y.some(Z=>Z.hasMotion)?" BRUSHING DETECTED":" No brushing motion"})})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[u.jsx("h2",{className:"text-white font-semibold mb-3",children:"Select Hat"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:yf.map(Z=>u.jsx("button",{onClick:()=>v(Z),className:`px-4 py-2 rounded-lg transition-all ${C.id===Z.id?"bg-yellow-500 text-black font-bold":"bg-purple-600 text-white hover:bg-purple-500"}`,children:Z.name},Z.id))})]}),B&&u.jsxs("div",{className:"bg-gray-900/80 rounded-xl p-4 font-mono text-sm text-green-400",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Video Size:"}),u.jsxs("div",{children:[K.width," x ",K.height]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Container Size:"}),u.jsxs("div",{children:[b.width.toFixed(0)," x ",b.height.toFixed(0)]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Face Position (video coords):"}),u.jsx("div",{children:s?`x: ${s.x.toFixed(1)}, y: ${s.y.toFixed(1)}`:"Not detected"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Face Size:"}),u.jsx("div",{children:s?`${s.width.toFixed(1)} x ${s.height.toFixed(1)}`:"-"})]})]}),q&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4",children:[u.jsx("div",{className:"text-gray-400 mb-2",children:"Motion Detection Zones:"}),u.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs",children:y.map(Z=>u.jsxs("div",{className:`px-2 py-1 rounded ${Z.hasMotion?"bg-green-600":"bg-gray-700"}`,children:[Z.zoneId,": ",Z.motionLevel.toFixed(0),"%"]},Z.zoneId))})]})}),u.jsxs("div",{className:"mt-4 text-gray-500 text-xs",children:["Green rectangle = detected face area | Red dot = hat anchor point",q&&" | Green dashed = brushing region | Red shaded = face core (ignored)"]})]})]})})}const vf=["grassland","coastal","lava","city","sky"];function ho(e){const t=e.monsterType.toLowerCase(),n=e.id.toLowerCase();return t.includes("slime")||t.includes("blob")||t.includes("jelly")||t.includes("ghost")?"blobkins":t.includes("cat")||t.includes("fox")||t.includes("raccoon")||t.includes("tanuki")||t.includes("spirit")||t.includes("kappa")||t.includes("owl")||n.includes("yokai")||n.includes("spirit")?"mystlings":t.includes("dragon")||t.includes("drake")||t.includes("mecha")||t.includes("robo")||t.includes("cyber")||t.includes("dino")||n.includes("gear")||n.includes("mecha")||n.includes("cyber")||n.includes("robo")||n.includes("volt")||n.includes("data")?"mechazoids":"sparklings"}const Oi={sparklings:{label:"Sparklings",icon:"",color:"bg-yellow-500",description:"Clean, elemental, iconic"},mechazoids:{label:"Mechazoids",icon:"",color:"bg-blue-600",description:"Digital, robotic, tech"},mystlings:{label:"Mystlings",icon:"",color:"bg-purple-600",description:"Spiritual, mystical, Japanese"},blobkins:{label:"Blobkins",icon:"",color:"bg-lime-500",description:"Bouncy, happy, DQ style"}},$r={grassland:{bg:"bg-green-600",text:"text-green-100",border:"border-green-400"},coastal:{bg:"bg-blue-600",text:"text-blue-100",border:"border-blue-400"},lava:{bg:"bg-orange-600",text:"text-orange-100",border:"border-orange-400"},city:{bg:"bg-purple-600",text:"text-purple-100",border:"border-purple-400"},sky:{bg:"bg-cyan-600",text:"text-cyan-100",border:"border-cyan-400"},all:{bg:"bg-gradient-to-r from-orange-500 to-red-500",text:"text-white",border:"border-orange-400"}},Wr={common:{bg:"bg-gray-700",text:"text-gray-200",glow:""},rare:{bg:"bg-blue-800",text:"text-blue-200",glow:"shadow-blue-500/50 shadow-lg"},legendary:{bg:"bg-gradient-to-br from-amber-800 via-amber-700 to-orange-900",text:"text-amber-100",glow:"shadow-amber-400/70 shadow-2xl ring-2 ring-amber-500/50"},mythic:{bg:"bg-gradient-to-br from-orange-600 via-red-600 to-orange-700",text:"text-orange-100",glow:"shadow-orange-400/80 shadow-2xl ring-4 ring-orange-500/60 animate-pulse"}},Hy=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],Yy=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function Qy({onBack:e}){const[t,n]=k.useState("creatures"),[r,o]=k.useState("all"),[s,c]=k.useState("all"),[p,m]=k.useState("all"),[y,j]=k.useState(!0),[S,E]=k.useState(!1),[G,Y]=k.useState(50),[M,ee]=k.useState(null),[C,v]=k.useState(120),[b,I]=k.useState(100),[K,L]=k.useState(!0),B=ot.filter(D=>!(r!=="all"&&D.region!==r||s!=="all"&&D.rarity!==s||p!=="all"&&ho(D)!==p)),V=["sparklings","mechazoids","mystlings","blobkins"],q=V.reduce((D,J)=>(D[J]=ot.filter(ne=>ho(ne)===J).length,D),{}),$={byRegion:vf.reduce((D,J)=>({...D,[J]:ot.filter(ne=>ne.region===J).length}),{}),byRarity:{common:ot.filter(D=>D.rarity==="common").length,rare:ot.filter(D=>D.rarity==="rare").length,legendary:ot.filter(D=>D.rarity==="legendary").length,mythic:ot.filter(D=>D.rarity==="mythic").length}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900",children:[u.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur border-b border-slate-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white flex items-center gap-2",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Graphics Debug Menu"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>n("creatures"),className:`px-4 py-2 rounded-lg transition-all ${t==="creatures"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Creatures (",ot.length,")"]}),u.jsxs("button",{onClick:()=>n("hats"),className:`px-4 py-2 rounded-lg transition-all ${t==="hats"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Hats (",si.length,")"]})]})]})})}),t==="creatures"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Region:"}),u.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 rounded text-sm ${r==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),vf.map(D=>u.jsxs("button",{onClick:()=>o(D),className:`px-3 py-1 rounded text-sm capitalize ${r===D?`${$r[D].bg} ${$r[D].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[D," (",$.byRegion[D],")"]},D))]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Rarity:"}),u.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded text-sm ${s==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),["common","rare","legendary","mythic"].map(D=>u.jsxs("button",{onClick:()=>c(D),className:`px-3 py-1 rounded text-sm capitalize ${s===D?`${Wr[D].bg} ${Wr[D].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[D," (",$.byRarity[D],")"]},D))]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Style:"}),u.jsx("button",{onClick:()=>m("all"),className:`px-3 py-1 rounded text-sm ${p==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),V.map(D=>u.jsxs("button",{onClick:()=>m(D),className:`px-3 py-1 rounded text-sm flex items-center gap-1 ${p===D?`${Oi[D].color} text-white font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[u.jsx("span",{children:Oi[D].icon}),Oi[D].label," (",q[D],")"]},D))]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:y,onChange:D=>j(D.target.checked),className:"w-4 h-4"}),"Animated"]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:K,onChange:D=>L(D.target.checked),className:"w-4 h-4"}),"Show Style"]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:S,onChange:D=>E(D.target.checked),className:"w-4 h-4"}),"Show Gunk"]}),S&&u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Gunk Level:",u.jsx("input",{type:"range",min:"0",max:"100",value:G,onChange:D=>Y(Number(D.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-8",children:[G,"%"]})]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",u.jsx("input",{type:"range",min:"60",max:"200",value:C,onChange:D=>v(Number(D.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-10",children:[C,"px"]})]})]})]})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing ",B.length," of ",ot.length," creatures"]}),u.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${C+40}px, 1fr))`},children:B.map(D=>u.jsxs("div",{onClick:()=>ee((M==null?void 0:M.id)===D.id?null:D),className:`relative flex flex-col items-center p-3 rounded-xl cursor-pointer transition-all ${Wr[D.rarity].bg} ${Wr[D.rarity].glow} ${(M==null?void 0:M.id)===D.id?"ring-2 ring-white scale-105":"hover:scale-102"}`,children:[u.jsx("div",{className:`absolute top-1 left-1 px-2 py-0.5 rounded text-xs ${$r[D.region].bg} ${$r[D.region].text}`,children:D.region}),D.rarity==="mythic"&&u.jsx("div",{className:"absolute top-1 right-1 text-orange-300 text-xl animate-pulse",title:"Mythic - Ultimate Boss",children:""}),D.rarity==="legendary"&&u.jsx("div",{className:"absolute top-1 right-1 text-amber-300 text-lg",title:"Legendary Dragon",children:""}),Hy.includes(D.id)&&u.jsxs("div",{className:"absolute bottom-1 right-1 flex gap-0.5",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-green-500 text-white font-bold",title:"HD Raster Image",children:"HD"}),Yy.includes(D.id)&&u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-red-600 text-white font-bold",title:"Has Possessed Variant",children:""})]}),u.jsx(un,{creature:D,size:C,animated:y,showGunk:S,gunkLevel:G}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsx("div",{className:"text-white font-medium text-sm truncate max-w-full",children:D.name}),u.jsxs("div",{className:"text-slate-400 text-xs capitalize mb-1",children:[D.rarity,"  ",D.monsterType]}),K&&(()=>{if(D.rarity==="mythic")return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold animate-pulse",children:" MYTHIC ULTIMATE"})});if(D.rarity==="legendary")return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold",children:" LEGENDARY DRAGON"})});const J=ho(D),ne=Oi[J];return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsxs("span",{className:`px-2 py-0.5 rounded text-[9px] text-white ${ne.color} font-medium`,children:[ne.icon," ",ne.label]})})})()]})]},D.id))})]}),M&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur border-t border-slate-700 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-6",children:[u.jsx(un,{creature:M,size:100,animated:y,showGunk:S,gunkLevel:G}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:M.name}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${$r[M.region].bg} ${$r[M.region].text}`,children:M.region}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${Wr[M.rarity].bg} ${Wr[M.rarity].text}`,children:M.rarity})]}),u.jsx("p",{className:"text-slate-400 text-sm mb-2",children:M.description}),(()=>{if(M.rarity==="mythic")return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold flex items-center gap-2 animate-pulse",children:" MYTHIC ULTIMATE BOSS"}),u.jsx("span",{className:"text-orange-400 text-xs",children:"The five-headed dragon of perfect dental hygiene - only appears after catching all other creatures!"})]});if(M.rarity==="legendary")return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold flex items-center gap-2",children:" LEGENDARY DRAGON FORM"}),u.jsx("span",{className:"text-amber-400 text-xs",children:"Unique dragon-style graphics with wings, horns, and magical aura"})]});const D=ho(M),J=Oi[D];return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsxs("span",{className:`px-3 py-1 rounded text-sm text-white ${J.color} font-medium flex items-center gap-2`,children:[J.icon," ",J.label," Style"]}),u.jsx("span",{className:"text-slate-400 text-xs",children:J.description})]})})(),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[u.jsxs("span",{children:["ID: ",M.id]}),u.jsxs("span",{children:["Type: ",M.monsterType]})]})]}),u.jsx("button",{onClick:()=>ee(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white",children:"Close"})]})})]}),t==="hats"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:u.jsx("div",{className:"flex flex-wrap items-center gap-4",children:u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",u.jsx("input",{type:"range",min:"60",max:"200",value:b,onChange:D=>I(Number(D.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-10",children:[b,"px"]})]})})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing all ",si.length," hats"]}),u.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${b+60}px, 1fr))`},children:si.map(D=>u.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-gradient-to-b from-purple-800 to-purple-900 hover:from-purple-700 hover:to-purple-800 transition-all",children:[u.jsx("div",{className:"bg-purple-950/50 rounded-lg p-2 mb-2",children:u.jsx(Ph,{hatId:D.id,size:b})}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white font-medium text-sm",children:D.name}),u.jsxs("div",{className:"text-purple-300 text-xs capitalize",children:[D.unlockCondition,D.unlockThreshold&&` (${D.unlockThreshold})`]}),u.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["ID: ",D.id]})]})]},D.id))})]})]})]})}const Xy=ot.map(e=>({...e,capturedAt:new Date}));function Zy({onBack:e}){const[t,n]=k.useState(null),[r,o]=k.useState(null),s=k.useRef(null),c=k.useRef(null),p=k.useCallback(async()=>{try{const j=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});c.current=j,s.current&&(s.current.srcObject=j)}catch(j){console.error("Camera error:",j),o("Could not access camera")}},[]),m=k.useCallback(()=>{c.current&&(c.current.getTracks().forEach(j=>j.stop()),c.current=null)},[]),y=k.useCallback(()=>{if(!s.current)return;const j=document.createElement("canvas");j.width=s.current.videoWidth,j.height=s.current.videoHeight;const S=j.getContext("2d");if(!S)return;S.drawImage(s.current,0,0);const E=j.toDataURL("image/jpeg",.9);n(E),m()},[m]);return k.useEffect(()=>(t||p(),()=>{m()}),[t,p,m]),t?u.jsx(Kh,{photo:t,capturedCreatures:Xy,onDone:e,onBack:()=>n(null),debugMode:!0}):u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-4 bg-purple-900/50 z-10",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Photo Debug"}),u.jsx("div",{className:"w-20"})]}),u.jsx("div",{className:"flex-1 relative bg-black overflow-hidden min-h-0",children:r?u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-red-400 mb-4",children:r}),u.jsx("button",{onClick:p,className:"px-4 py-2 bg-purple-600 rounded-xl",children:"Retry"})]})}):u.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover",style:{transform:"scaleX(-1)"}})}),u.jsxs("div",{className:"flex-shrink-0 p-4 bg-purple-900/50 z-10",children:[u.jsx("button",{onClick:y,disabled:!!r,className:"w-full py-4 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl font-bold text-lg disabled:opacity-50",children:"Take Photo"}),u.jsxs("p",{className:"text-center text-purple-300 text-sm mt-2",children:["All ",ot.length," creatures will be available as stickers"]})]})]})}function Jy(){const[e,t]=k.useState("profile-select"),[n,r]=k.useState(null),[o,s]=k.useState(null),[c,p]=k.useState(null),[m,y]=k.useState(null),[j,S]=k.useState(null),[E,G]=k.useState(null);k.useEffect(()=>{Y()},[]);async function Y(){const Z=vi();if(Z){const de=await Ty(Z);if(de){r(de),await C(),t("home");return}}t("profile-select")}async function M(Z){r(Z),await C(),t("home")}function ee(){t("profile-select"),s(null),r(null)}async function C(){try{const Z=await wa();s(Z)}catch(Z){console.error("Failed to load user progress:",Z),t("profile-select")}}function v(){t("camera-check")}function b(){t("hat-select")}function I(Z){p(Z),t("brushing")}async function K(Z){y(Z),t("results");const de={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:new Date,duration:$h(),cleaningPercentage:Z.cleaningPercentage,zoneProgress:Z.zoneProgress,photos:Z.photos};try{await Ay(de),await C()}catch(H){console.error("Failed to save session:",H)}}function L(){t("capture")}function B(Z){S(Z),t("photos")}function V(Z){G(Z),t("editor")}function q(){G(null),t("home"),C()}function $(){t("home"),y(null),S(null),G(null),C()}function D(){t("collection")}function J(){t("settings")}function ne(){t("hat-debug")}function pe(){t("graphics-debug")}function xe(){t("photo-debug")}return e==="profile-select"?u.jsx("div",{className:"h-full w-full overflow-hidden",children:u.jsx(Ky,{onProfileSelected:M})}):!o||!n?u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsx("div",{className:"text-2xl animate-pulse",children:"Loading..."})}):u.jsxs("div",{className:"h-full w-full overflow-hidden",children:[e==="home"&&u.jsx(qg,{userProgress:o,currentProfile:n,onStartBrushing:v,onViewCollection:D,onViewSettings:J,onSwitchProfile:ee}),e==="settings"&&u.jsx(Uy,{onBack:$,onHatDebug:ne,onGraphicsDebug:pe,onPhotoDebug:xe}),e==="camera-check"&&u.jsx(Yg,{onConfirm:b,onCancel:$}),e==="hat-select"&&u.jsx(Xg,{userProgress:o,onSelect:I,onBack:$}),e==="brushing"&&u.jsx(Cy,{selectedHat:c,capturedCreatureIds:o.capturedCreatures.map(Z=>Z.id),onComplete:K,onCancel:$}),e==="results"&&m&&u.jsx(jy,{cleaningPercentage:m.cleaningPercentage,zoneProgress:m.zoneProgress,onContinue:L}),e==="capture"&&m&&u.jsx(Ry,{cleaningPercentage:m.cleaningPercentage,userProgress:o,region:m.region,preSelectedCreature:m.creature,onComplete:B}),e==="photos"&&m&&u.jsx(My,{photos:m.photos,capturedCreature:j,onSelectPhoto:V,onSkip:$}),e==="editor"&&E&&u.jsx(Kh,{photo:E,capturedCreatures:j&&!o.capturedCreatures.some(Z=>Z.id===j.id)?[{...j,capturedAt:new Date},...o.capturedCreatures]:o.capturedCreatures,onDone:q,onBack:()=>t("photos")}),e==="collection"&&u.jsx(Wy,{userProgress:o,onBack:$}),e==="hat-debug"&&u.jsx(qy,{onBack:$}),e==="graphics-debug"&&u.jsx(Qy,{onBack:$}),e==="photo-debug"&&u.jsx(Zy,{onBack:$})]})}Fh(document.getElementById("root")).render(u.jsx(k.StrictMode,{children:u.jsx(Hg,{children:u.jsx(Jy,{})})}));export{tv as a,Qc as c,wm as g};
