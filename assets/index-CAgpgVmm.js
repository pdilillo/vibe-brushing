const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dn5-kLg3.js","assets/graph_model-MxGU4GEA.js","assets/face-landmarks-detection.esm-AH00kj8w.js"])))=>i.map(i=>d[i]);
var jm=Object.defineProperty;var Sm=(e,t,n)=>t in e?jm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Nt=(e,t,n)=>Sm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Em(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var jf={exports:{}},ro={},Sf={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=Symbol.for("react.element"),Tm=Symbol.for("react.portal"),Nm=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Pm=Symbol.for("react.profiler"),_m=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Mm=Symbol.for("react.memo"),Bm=Symbol.for("react.lazy"),td=Symbol.iterator;function Im(e){return e===null||typeof e!="object"?null:(e=td&&e[td]||e["@@iterator"],typeof e=="function"?e:null)}var Ef={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tf=Object.assign,Nf={};function mi(e,t,n){this.props=e,this.context=t,this.refs=Nf,this.updater=n||Ef}mi.prototype.isReactComponent={};mi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Af(){}Af.prototype=mi.prototype;function ju(e,t,n){this.props=e,this.context=t,this.refs=Nf,this.updater=n||Ef}var Su=ju.prototype=new Af;Su.constructor=ju;Tf(Su,mi.prototype);Su.isPureReactComponent=!0;var nd=Array.isArray,Pf=Object.prototype.hasOwnProperty,Eu={current:null},_f={key:!0,ref:!0,__self:!0,__source:!0};function Df(e,t,n){var r,a={},o=null,c=null;if(t!=null)for(r in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(o=""+t.key),t)Pf.call(t,r)&&!_f.hasOwnProperty(r)&&(a[r]=t[r]);var h=arguments.length-2;if(h===1)a.children=n;else if(1<h){for(var m=Array(h),y=0;y<h;y++)m[y]=arguments[y+2];a.children=m}if(e&&e.defaultProps)for(r in h=e.defaultProps,h)a[r]===void 0&&(a[r]=h[r]);return{$$typeof:ms,type:e,key:o,ref:c,props:a,_owner:Eu.current}}function Om(e,t){return{$$typeof:ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ms}function zm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rd=/\/+/g;function el(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zm(""+e.key):t.toString(36)}function ya(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case ms:case Tm:c=!0}}if(c)return c=e,a=a(c),e=r===""?"."+el(c,0):r,nd(a)?(n="",e!=null&&(n=e.replace(rd,"$&/")+"/"),ya(a,t,n,"",function(y){return y})):a!=null&&(Tu(a)&&(a=Om(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(rd,"$&/")+"/")+e)),t.push(a)),1;if(c=0,r=r===""?".":r+":",nd(e))for(var h=0;h<e.length;h++){o=e[h];var m=r+el(o,h);c+=ya(o,t,n,m,a)}else if(m=Im(e),typeof m=="function")for(e=m.call(e),h=0;!(o=e.next()).done;)o=o.value,m=r+el(o,h++),c+=ya(o,t,n,m,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function qs(e,t,n){if(e==null)return e;var r=[],a=0;return ya(e,r,"","",function(o){return t.call(n,o,a++)}),r}function Lm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},va={transition:null},$m={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:va,ReactCurrentOwner:Eu};function Ff(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!Tu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=mi;Ne.Fragment=Nm;Ne.Profiler=Pm;Ne.PureComponent=ju;Ne.StrictMode=Am;Ne.Suspense=Rm;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$m;Ne.act=Ff;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Tf({},e.props),a=e.key,o=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,c=Eu.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(m in t)Pf.call(t,m)&&!_f.hasOwnProperty(m)&&(r[m]=t[m]===void 0&&h!==void 0?h[m]:t[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){h=Array(m);for(var y=0;y<m;y++)h[y]=arguments[y+2];r.children=h}return{$$typeof:ms,type:e.type,key:a,ref:o,props:r,_owner:c}};Ne.createContext=function(e){return e={$$typeof:Dm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_m,_context:e},e.Consumer=e};Ne.createElement=Df;Ne.createFactory=function(e){var t=Df.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:Fm,render:e}};Ne.isValidElement=Tu;Ne.lazy=function(e){return{$$typeof:Bm,_payload:{_status:-1,_result:e},_init:Lm}};Ne.memo=function(e,t){return{$$typeof:Mm,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=va.transition;va.transition={};try{e()}finally{va.transition=t}};Ne.unstable_act=Ff;Ne.useCallback=function(e,t){return _t.current.useCallback(e,t)};Ne.useContext=function(e){return _t.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return _t.current.useEffect(e,t)};Ne.useId=function(){return _t.current.useId()};Ne.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return _t.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};Ne.useRef=function(e){return _t.current.useRef(e)};Ne.useState=function(e){return _t.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return _t.current.useTransition()};Ne.version="18.3.1";Sf.exports=Ne;var C=Sf.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm=C,Wm=Symbol.for("react.element"),Um=Symbol.for("react.fragment"),Vm=Object.prototype.hasOwnProperty,qm=Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Km={key:!0,ref:!0,__self:!0,__source:!0};function Rf(e,t,n){var r,a={},o=null,c=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)Vm.call(t,r)&&!Km.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Wm,type:e,key:o,ref:c,props:a,_owner:qm.current}}ro.Fragment=Um;ro.jsx=Rf;ro.jsxs=Rf;jf.exports=ro;var u=jf.exports,Mf={exports:{}},Kt={},Bf={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,J){var X=Y.length;Y.push(J);e:for(;0<X;){var he=X-1>>>1,be=Y[he];if(0<a(be,J))Y[he]=J,Y[X]=be,X=he;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var J=Y[0],X=Y.pop();if(X!==J){Y[0]=X;e:for(var he=0,be=Y.length,Le=be>>>1;he<Le;){var Ae=2*(he+1)-1,Ve=Y[Ae],Ie=Ae+1,Ze=Y[Ie];if(0>a(Ve,X))Ie<be&&0>a(Ze,Ve)?(Y[he]=Ze,Y[Ie]=X,he=Ie):(Y[he]=Ve,Y[Ae]=X,he=Ae);else if(Ie<be&&0>a(Ze,X))Y[he]=Ze,Y[Ie]=X,he=Ie;else break e}}return J}function a(Y,J){var X=Y.sortIndex-J.sortIndex;return X!==0?X:Y.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var m=[],y=[],S=1,j=null,E=3,G=!1,O=!1,M=!1,Q=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var J=n(y);J!==null;){if(J.callback===null)r(y);else if(J.startTime<=Y)r(y),J.sortIndex=J.expirationTime,t(m,J);else break;J=n(y)}}function B(Y){if(M=!1,b(Y),!O)if(n(m)!==null)O=!0,ue(K);else{var J=n(y);J!==null&&me(B,J.startTime-Y)}}function K(Y,J){O=!1,M&&(M=!1,w(V),V=-1),G=!0;var X=E;try{for(b(J),j=n(m);j!==null&&(!(j.expirationTime>J)||Y&&!N());){var he=j.callback;if(typeof he=="function"){j.callback=null,E=j.priorityLevel;var be=he(j.expirationTime<=J);J=e.unstable_now(),typeof be=="function"?j.callback=be:j===n(m)&&r(m),b(J)}else r(m);j=n(m)}if(j!==null)var Le=!0;else{var Ae=n(y);Ae!==null&&me(B,Ae.startTime-J),Le=!1}return Le}finally{j=null,E=X,G=!1}}var U=!1,I=null,V=-1,H=5,z=-1;function N(){return!(e.unstable_now()-z<H)}function ee(){if(I!==null){var Y=e.unstable_now();z=Y;var J=!0;try{J=I(!0,Y)}finally{J?ie():(U=!1,I=null)}}else U=!1}var ie;if(typeof x=="function")ie=function(){x(ee)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ke=de.port2;de.port1.onmessage=ee,ie=function(){ke.postMessage(null)}}else ie=function(){Q(ee,0)};function ue(Y){I=Y,U||(U=!0,ie())}function me(Y,J){V=Q(function(){Y(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){O||G||(O=!0,ue(K))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(Y){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var X=E;E=J;try{return Y()}finally{E=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var X=E;E=Y;try{return J()}finally{E=X}},e.unstable_scheduleCallback=function(Y,J,X){var he=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,Y){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=X+be,Y={id:S++,callback:J,priorityLevel:Y,startTime:X,expirationTime:be,sortIndex:-1},X>he?(Y.sortIndex=X,t(y,Y),n(m)===null&&Y===n(y)&&(M?(w(V),V=-1):M=!0,me(B,X-he))):(Y.sortIndex=be,t(m,Y),O||G||(O=!0,ue(K))),Y},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(Y){var J=E;return function(){var X=E;E=J;try{return Y.apply(this,arguments)}finally{E=X}}}})(If);Bf.exports=If;var Hm=Bf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=C,qt=Hm;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Of=new Set,Zi={};function Ar(e,t){li(e,t),li(e+"Capture",t)}function li(e,t){for(Zi[e]=t,e=0;e<t.length;e++)Of.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=Object.prototype.hasOwnProperty,Qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,id={},sd={};function Xm(e){return Pl.call(sd,e)?!0:Pl.call(id,e)?!1:Qm.test(e)?sd[e]=!0:(id[e]=!0,!1)}function Zm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jm(e,t,n,r){if(t===null||typeof t>"u"||Zm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dt(e,t,n,r,a,o,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=c}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nu=/[\-:]([a-z])/g;function Au(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nu,Au);vt[t]=new Dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nu,Au);vt[t]=new Dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nu,Au);vt[t]=new Dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pu(e,t,n,r){var a=vt.hasOwnProperty(t)?vt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jm(t,n,a,r)&&(n=null),r||a===null?Xm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fn=Ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),_u=Symbol.for("react.strict_mode"),_l=Symbol.for("react.profiler"),zf=Symbol.for("react.provider"),Lf=Symbol.for("react.context"),Du=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Fl=Symbol.for("react.suspense_list"),Fu=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),$f=Symbol.for("react.offscreen"),ad=Symbol.iterator;function Ai(e){return e===null||typeof e!="object"?null:(e=ad&&e[ad]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,tl;function zi(e){if(tl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tl=t&&t[1]||""}return`
`+tl+e}var nl=!1;function rl(e,t){if(!e||nl)return"";nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),o=r.stack.split(`
`),c=a.length-1,h=o.length-1;1<=c&&0<=h&&a[c]!==o[h];)h--;for(;1<=c&&0<=h;c--,h--)if(a[c]!==o[h]){if(c!==1||h!==1)do if(c--,h--,0>h||a[c]!==o[h]){var m=`
`+a[c].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=c&&0<=h);break}}}finally{nl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zi(e):""}function eg(e){switch(e.tag){case 5:return zi(e.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return e=rl(e.type,!1),e;case 11:return e=rl(e.type.render,!1),e;case 1:return e=rl(e.type,!0),e;default:return""}}function Rl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ur:return"Fragment";case Wr:return"Portal";case _l:return"Profiler";case _u:return"StrictMode";case Dl:return"Suspense";case Fl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lf:return(e.displayName||"Context")+".Consumer";case zf:return(e._context.displayName||"Context")+".Provider";case Du:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fu:return t=e.displayName||null,t!==null?t:Rl(e.type)||"Memo";case Gn:t=e._payload,e=e._init;try{return Rl(e(t))}catch{}}return null}function tg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rl(t);case 8:return t===_u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ng(e){var t=Gf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hs(e){e._valueTracker||(e._valueTracker=ng(e))}function Wf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Gf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ml(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function od(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=nr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uf(e,t){t=t.checked,t!=null&&Pu(e,"checked",t,!1)}function Bl(e,t){Uf(e,t);var n=nr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Il(e,t.type,n):t.hasOwnProperty("defaultValue")&&Il(e,t.type,nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ld(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Il(e,t,n){(t!=="number"||Da(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Li=Array.isArray;function ti(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ol(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ud(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(Li(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nr(n)}}function Vf(e,t){var n=nr(t.value),r=nr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function cd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,Kf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ji(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rg=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(e){rg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wi[t]=Wi[e]})});function Hf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wi.hasOwnProperty(e)&&Wi[e]?(""+t).trim():t+"px"}function Yf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Hf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var ig=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ll(e,t){if(t){if(ig[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function $l(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function Ru(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wl=null,ni=null,ri=null;function dd(e){if(e=vs(e)){if(typeof Wl!="function")throw Error(se(280));var t=e.stateNode;t&&(t=lo(t),Wl(e.stateNode,e.type,t))}}function Qf(e){ni?ri?ri.push(e):ri=[e]:ni=e}function Xf(){if(ni){var e=ni,t=ri;if(ri=ni=null,dd(e),t)for(e=0;e<t.length;e++)dd(t[e])}}function Zf(e,t){return e(t)}function Jf(){}var il=!1;function eh(e,t,n){if(il)return e(t,n);il=!0;try{return Zf(e,t,n)}finally{il=!1,(ni!==null||ri!==null)&&(Jf(),Xf())}}function es(e,t){var n=e.stateNode;if(n===null)return null;var r=lo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var Ul=!1;if(An)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Ul=!1}function sg(e,t,n,r,a,o,c,h,m){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(S){this.onError(S)}}var Ui=!1,Fa=null,Ra=!1,Vl=null,ag={onError:function(e){Ui=!0,Fa=e}};function og(e,t,n,r,a,o,c,h,m){Ui=!1,Fa=null,sg.apply(ag,arguments)}function lg(e,t,n,r,a,o,c,h,m){if(og.apply(this,arguments),Ui){if(Ui){var y=Fa;Ui=!1,Fa=null}else throw Error(se(198));Ra||(Ra=!0,Vl=y)}}function Pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function th(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fd(e){if(Pr(e)!==e)throw Error(se(188))}function ug(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return fd(a),e;if(o===r)return fd(a),t;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=a,r=o;else{for(var c=!1,h=a.child;h;){if(h===n){c=!0,n=a,r=o;break}if(h===r){c=!0,r=a,n=o;break}h=h.sibling}if(!c){for(h=o.child;h;){if(h===n){c=!0,n=o,r=a;break}if(h===r){c=!0,r=o,n=a;break}h=h.sibling}if(!c)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function nh(e){return e=ug(e),e!==null?rh(e):null}function rh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rh(e);if(t!==null)return t;e=e.sibling}return null}var ih=qt.unstable_scheduleCallback,hd=qt.unstable_cancelCallback,cg=qt.unstable_shouldYield,dg=qt.unstable_requestPaint,st=qt.unstable_now,fg=qt.unstable_getCurrentPriorityLevel,Mu=qt.unstable_ImmediatePriority,sh=qt.unstable_UserBlockingPriority,Ma=qt.unstable_NormalPriority,hg=qt.unstable_LowPriority,ah=qt.unstable_IdlePriority,io=null,wn=null;function pg(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:yg,mg=Math.log,gg=Math.LN2;function yg(e){return e>>>=0,e===0?32:31-(mg(e)/gg|0)|0}var Qs=64,Xs=4194304;function $i(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ba(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,c=n&268435455;if(c!==0){var h=c&~a;h!==0?r=$i(h):(o&=c,o!==0&&(r=$i(o)))}else c=n&~a,c!==0?r=$i(c):o!==0&&(r=$i(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dn(t),a=1<<n,r|=e[n],t&=~a;return r}function vg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var c=31-dn(o),h=1<<c,m=a[c];m===-1?(!(h&n)||h&r)&&(a[c]=vg(h,t)):m<=t&&(e.expiredLanes|=h),o&=~h}}function ql(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oh(){var e=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),e}function sl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dn(t),e[t]=n}function wg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-dn(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function Bu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ze=0;function lh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uh,Iu,ch,dh,fh,Kl=!1,Zs=[],Hn=null,Yn=null,Qn=null,ts=new Map,ns=new Map,Un=[],bg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pd(e,t){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function _i(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=vs(t),t!==null&&Iu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kg(e,t,n,r,a){switch(t){case"focusin":return Hn=_i(Hn,e,t,n,r,a),!0;case"dragenter":return Yn=_i(Yn,e,t,n,r,a),!0;case"mouseover":return Qn=_i(Qn,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return ts.set(o,_i(ts.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,ns.set(o,_i(ns.get(o)||null,e,t,n,r,a)),!0}return!1}function hh(e){var t=vr(e.target);if(t!==null){var n=Pr(t);if(n!==null){if(t=n.tag,t===13){if(t=th(n),t!==null){e.blockedOn=t,fh(e.priority,function(){ch(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Gl=r,n.target.dispatchEvent(r),Gl=null}else return t=vs(n),t!==null&&Iu(t),e.blockedOn=n,!1;t.shift()}return!0}function md(e,t,n){xa(e)&&n.delete(t)}function Cg(){Kl=!1,Hn!==null&&xa(Hn)&&(Hn=null),Yn!==null&&xa(Yn)&&(Yn=null),Qn!==null&&xa(Qn)&&(Qn=null),ts.forEach(md),ns.forEach(md)}function Di(e,t){e.blockedOn===t&&(e.blockedOn=null,Kl||(Kl=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Cg)))}function rs(e){function t(a){return Di(a,e)}if(0<Zs.length){Di(Zs[0],e);for(var n=1;n<Zs.length;n++){var r=Zs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hn!==null&&Di(Hn,e),Yn!==null&&Di(Yn,e),Qn!==null&&Di(Qn,e),ts.forEach(t),ns.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)hh(n),n.blockedOn===null&&Un.shift()}var ii=Fn.ReactCurrentBatchConfig,Ia=!0;function jg(e,t,n,r){var a=ze,o=ii.transition;ii.transition=null;try{ze=1,Ou(e,t,n,r)}finally{ze=a,ii.transition=o}}function Sg(e,t,n,r){var a=ze,o=ii.transition;ii.transition=null;try{ze=4,Ou(e,t,n,r)}finally{ze=a,ii.transition=o}}function Ou(e,t,n,r){if(Ia){var a=Hl(e,t,n,r);if(a===null)ml(e,t,r,Oa,n),pd(e,r);else if(kg(a,e,t,n,r))r.stopPropagation();else if(pd(e,r),t&4&&-1<bg.indexOf(e)){for(;a!==null;){var o=vs(a);if(o!==null&&uh(o),o=Hl(e,t,n,r),o===null&&ml(e,t,r,Oa,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else ml(e,t,r,null,n)}}var Oa=null;function Hl(e,t,n,r){if(Oa=null,e=Ru(r),e=vr(e),e!==null)if(t=Pr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=th(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oa=e,null}function ph(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fg()){case Mu:return 1;case sh:return 4;case Ma:case hg:return 16;case ah:return 536870912;default:return 16}default:return 16}}var qn=null,zu=null,wa=null;function mh(){if(wa)return wa;var e,t=zu,n=t.length,r,a="value"in qn?qn.value:qn.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var c=n-e;for(r=1;r<=c&&t[n-r]===a[o-r];r++);return wa=a.slice(e,1<r?1-r:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function gd(){return!1}function Ht(e){function t(n,r,a,o,c){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Js:gd,this.isPropagationStopped=gd,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lu=Ht(gi),ys=Xe({},gi,{view:0,detail:0}),Eg=Ht(ys),al,ol,Fi,so=Xe({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$u,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fi&&(Fi&&e.type==="mousemove"?(al=e.screenX-Fi.screenX,ol=e.screenY-Fi.screenY):ol=al=0,Fi=e),al)},movementY:function(e){return"movementY"in e?e.movementY:ol}}),yd=Ht(so),Tg=Xe({},so,{dataTransfer:0}),Ng=Ht(Tg),Ag=Xe({},ys,{relatedTarget:0}),ll=Ht(Ag),Pg=Xe({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),_g=Ht(Pg),Dg=Xe({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fg=Ht(Dg),Rg=Xe({},gi,{data:0}),vd=Ht(Rg),Mg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Og(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ig[e])?!!t[e]:!1}function $u(){return Og}var zg=Xe({},ys,{key:function(e){if(e.key){var t=Mg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$u,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lg=Ht(zg),$g=Xe({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Ht($g),Gg=Xe({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$u}),Wg=Ht(Gg),Ug=Xe({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vg=Ht(Ug),qg=Xe({},so,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kg=Ht(qg),Hg=[9,13,27,32],Gu=An&&"CompositionEvent"in window,Vi=null;An&&"documentMode"in document&&(Vi=document.documentMode);var Yg=An&&"TextEvent"in window&&!Vi,gh=An&&(!Gu||Vi&&8<Vi&&11>=Vi),wd=" ",bd=!1;function yh(e,t){switch(e){case"keyup":return Hg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vr=!1;function Qg(e,t){switch(e){case"compositionend":return vh(t);case"keypress":return t.which!==32?null:(bd=!0,wd);case"textInput":return e=t.data,e===wd&&bd?null:e;default:return null}}function Xg(e,t){if(Vr)return e==="compositionend"||!Gu&&yh(e,t)?(e=mh(),wa=zu=qn=null,Vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gh&&t.locale!=="ko"?null:t.data;default:return null}}var Zg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zg[e.type]:t==="textarea"}function xh(e,t,n,r){Qf(r),t=za(t,"onChange"),0<t.length&&(n=new Lu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qi=null,is=null;function Jg(e){Ph(e,0)}function ao(e){var t=Hr(e);if(Wf(t))return e}function e0(e,t){if(e==="change")return t}var wh=!1;if(An){var ul;if(An){var cl="oninput"in document;if(!cl){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),cl=typeof Cd.oninput=="function"}ul=cl}else ul=!1;wh=ul&&(!document.documentMode||9<document.documentMode)}function jd(){qi&&(qi.detachEvent("onpropertychange",bh),is=qi=null)}function bh(e){if(e.propertyName==="value"&&ao(is)){var t=[];xh(t,is,e,Ru(e)),eh(Jg,t)}}function t0(e,t,n){e==="focusin"?(jd(),qi=t,is=n,qi.attachEvent("onpropertychange",bh)):e==="focusout"&&jd()}function n0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(is)}function r0(e,t){if(e==="click")return ao(t)}function i0(e,t){if(e==="input"||e==="change")return ao(t)}function s0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:s0;function ss(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Pl.call(t,a)||!hn(e[a],t[a]))return!1}return!0}function Sd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ed(e,t){var n=Sd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sd(n)}}function kh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ch(){for(var e=window,t=Da();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Da(e.document)}return t}function Wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function a0(e){var t=Ch(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kh(n.ownerDocument.documentElement,n)){if(r!==null&&Wu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=Ed(n,o);var c=Ed(n,r);a&&c&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var o0=An&&"documentMode"in document&&11>=document.documentMode,qr=null,Yl=null,Ki=null,Ql=!1;function Td(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ql||qr==null||qr!==Da(r)||(r=qr,"selectionStart"in r&&Wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ki&&ss(Ki,r)||(Ki=r,r=za(Yl,"onSelect"),0<r.length&&(t=new Lu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qr)))}function ea(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kr={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},dl={},jh={};An&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function oo(e){if(dl[e])return dl[e];if(!Kr[e])return e;var t=Kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jh)return dl[e]=t[n];return e}var Sh=oo("animationend"),Eh=oo("animationiteration"),Th=oo("animationstart"),Nh=oo("transitionend"),Ah=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){Ah.set(e,t),Ar(t,[e])}for(var fl=0;fl<Nd.length;fl++){var hl=Nd[fl],l0=hl.toLowerCase(),u0=hl[0].toUpperCase()+hl.slice(1);ir(l0,"on"+u0)}ir(Sh,"onAnimationEnd");ir(Eh,"onAnimationIteration");ir(Th,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(Nh,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function Ad(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lg(r,t,void 0,e),e.currentTarget=null}function Ph(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var c=r.length-1;0<=c;c--){var h=r[c],m=h.instance,y=h.currentTarget;if(h=h.listener,m!==o&&a.isPropagationStopped())break e;Ad(a,h,y),o=m}else for(c=0;c<r.length;c++){if(h=r[c],m=h.instance,y=h.currentTarget,h=h.listener,m!==o&&a.isPropagationStopped())break e;Ad(a,h,y),o=m}}}if(Ra)throw e=Vl,Ra=!1,Vl=null,e}function We(e,t){var n=t[tu];n===void 0&&(n=t[tu]=new Set);var r=e+"__bubble";n.has(r)||(_h(t,e,2,!1),n.add(r))}function pl(e,t,n){var r=0;t&&(r|=4),_h(n,e,r,t)}var ta="_reactListening"+Math.random().toString(36).slice(2);function as(e){if(!e[ta]){e[ta]=!0,Of.forEach(function(n){n!=="selectionchange"&&(c0.has(n)||pl(n,!1,e),pl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ta]||(t[ta]=!0,pl("selectionchange",!1,t))}}function _h(e,t,n,r){switch(ph(t)){case 1:var a=jg;break;case 4:a=Sg;break;default:a=Ou}n=a.bind(null,t,n,e),a=void 0,!Ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ml(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var h=r.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(c===4)for(c=r.return;c!==null;){var m=c.tag;if((m===3||m===4)&&(m=c.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;c=c.return}for(;h!==null;){if(c=vr(h),c===null)return;if(m=c.tag,m===5||m===6){r=o=c;continue e}h=h.parentNode}}r=r.return}eh(function(){var y=o,S=Ru(n),j=[];e:{var E=Ah.get(e);if(E!==void 0){var G=Lu,O=e;switch(e){case"keypress":if(ba(n)===0)break e;case"keydown":case"keyup":G=Lg;break;case"focusin":O="focus",G=ll;break;case"focusout":O="blur",G=ll;break;case"beforeblur":case"afterblur":G=ll;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Ng;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Wg;break;case Sh:case Eh:case Th:G=_g;break;case Nh:G=Vg;break;case"scroll":G=Eg;break;case"wheel":G=Kg;break;case"copy":case"cut":case"paste":G=Fg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=xd}var M=(t&4)!==0,Q=!M&&e==="scroll",w=M?E!==null?E+"Capture":null:E;M=[];for(var x=y,b;x!==null;){b=x;var B=b.stateNode;if(b.tag===5&&B!==null&&(b=B,w!==null&&(B=es(x,w),B!=null&&M.push(os(x,B,b)))),Q)break;x=x.return}0<M.length&&(E=new G(E,O,null,n,S),j.push({event:E,listeners:M}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",E&&n!==Gl&&(O=n.relatedTarget||n.fromElement)&&(vr(O)||O[Pn]))break e;if((G||E)&&(E=S.window===S?S:(E=S.ownerDocument)?E.defaultView||E.parentWindow:window,G?(O=n.relatedTarget||n.toElement,G=y,O=O?vr(O):null,O!==null&&(Q=Pr(O),O!==Q||O.tag!==5&&O.tag!==6)&&(O=null)):(G=null,O=y),G!==O)){if(M=yd,B="onMouseLeave",w="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(M=xd,B="onPointerLeave",w="onPointerEnter",x="pointer"),Q=G==null?E:Hr(G),b=O==null?E:Hr(O),E=new M(B,x+"leave",G,n,S),E.target=Q,E.relatedTarget=b,B=null,vr(S)===y&&(M=new M(w,x+"enter",O,n,S),M.target=b,M.relatedTarget=Q,B=M),Q=B,G&&O)t:{for(M=G,w=O,x=0,b=M;b;b=Lr(b))x++;for(b=0,B=w;B;B=Lr(B))b++;for(;0<x-b;)M=Lr(M),x--;for(;0<b-x;)w=Lr(w),b--;for(;x--;){if(M===w||w!==null&&M===w.alternate)break t;M=Lr(M),w=Lr(w)}M=null}else M=null;G!==null&&Pd(j,E,G,M,!1),O!==null&&Q!==null&&Pd(j,Q,O,M,!0)}}e:{if(E=y?Hr(y):window,G=E.nodeName&&E.nodeName.toLowerCase(),G==="select"||G==="input"&&E.type==="file")var K=e0;else if(kd(E))if(wh)K=i0;else{K=n0;var U=t0}else(G=E.nodeName)&&G.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(K=r0);if(K&&(K=K(e,y))){xh(j,K,n,S);break e}U&&U(e,E,y),e==="focusout"&&(U=E._wrapperState)&&U.controlled&&E.type==="number"&&Il(E,"number",E.value)}switch(U=y?Hr(y):window,e){case"focusin":(kd(U)||U.contentEditable==="true")&&(qr=U,Yl=y,Ki=null);break;case"focusout":Ki=Yl=qr=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Td(j,n,S);break;case"selectionchange":if(o0)break;case"keydown":case"keyup":Td(j,n,S)}var I;if(Gu)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Vr?yh(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(gh&&n.locale!=="ko"&&(Vr||V!=="onCompositionStart"?V==="onCompositionEnd"&&Vr&&(I=mh()):(qn=S,zu="value"in qn?qn.value:qn.textContent,Vr=!0)),U=za(y,V),0<U.length&&(V=new vd(V,e,null,n,S),j.push({event:V,listeners:U}),I?V.data=I:(I=vh(n),I!==null&&(V.data=I)))),(I=Yg?Qg(e,n):Xg(e,n))&&(y=za(y,"onBeforeInput"),0<y.length&&(S=new vd("onBeforeInput","beforeinput",null,n,S),j.push({event:S,listeners:y}),S.data=I))}Ph(j,t)})}function os(e,t,n){return{instance:e,listener:t,currentTarget:n}}function za(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=es(e,n),o!=null&&r.unshift(os(e,o,a)),o=es(e,t),o!=null&&r.push(os(e,o,a))),e=e.return}return r}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pd(e,t,n,r,a){for(var o=t._reactName,c=[];n!==null&&n!==r;){var h=n,m=h.alternate,y=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&y!==null&&(h=y,a?(m=es(n,o),m!=null&&c.unshift(os(n,m,h))):a||(m=es(n,o),m!=null&&c.push(os(n,m,h)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var d0=/\r\n?/g,f0=/\u0000|\uFFFD/g;function _d(e){return(typeof e=="string"?e:""+e).replace(d0,`
`).replace(f0,"")}function na(e,t,n){if(t=_d(t),_d(e)!==t&&n)throw Error(se(425))}function La(){}var Xl=null,Zl=null;function Jl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,h0=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,p0=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(m0)}:eu;function m0(e){setTimeout(function(){throw e})}function gl(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),rs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);rs(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yi=Math.random().toString(36).slice(2),xn="__reactFiber$"+yi,ls="__reactProps$"+yi,Pn="__reactContainer$"+yi,tu="__reactEvents$"+yi,g0="__reactListeners$"+yi,y0="__reactHandles$"+yi;function vr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fd(e);e!==null;){if(n=e[xn])return n;e=Fd(e)}return t}e=n,n=e.parentNode}return null}function vs(e){return e=e[xn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function lo(e){return e[ls]||null}var nu=[],Yr=-1;function sr(e){return{current:e}}function Ue(e){0>Yr||(e.current=nu[Yr],nu[Yr]=null,Yr--)}function Ge(e,t){Yr++,nu[Yr]=e.current,e.current=t}var rr={},St=sr(rr),Ot=sr(!1),jr=rr;function ui(e,t){var n=e.type.contextTypes;if(!n)return rr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zt(e){return e=e.childContextTypes,e!=null}function $a(){Ue(Ot),Ue(St)}function Rd(e,t,n){if(St.current!==rr)throw Error(se(168));Ge(St,t),Ge(Ot,n)}function Dh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(se(108,tg(e)||"Unknown",a));return Xe({},n,r)}function Ga(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rr,jr=St.current,Ge(St,e),Ge(Ot,Ot.current),!0}function Md(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=Dh(e,t,jr),r.__reactInternalMemoizedMergedChildContext=e,Ue(Ot),Ue(St),Ge(St,e)):Ue(Ot),Ge(Ot,n)}var Sn=null,uo=!1,yl=!1;function Fh(e){Sn===null?Sn=[e]:Sn.push(e)}function v0(e){uo=!0,Fh(e)}function ar(){if(!yl&&Sn!==null){yl=!0;var e=0,t=ze;try{var n=Sn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Sn=null,uo=!1}catch(a){throw Sn!==null&&(Sn=Sn.slice(e+1)),ih(Mu,ar),a}finally{ze=t,yl=!1}}return null}var Qr=[],Xr=0,Wa=null,Ua=0,Qt=[],Xt=0,Sr=null,En=1,Tn="";function mr(e,t){Qr[Xr++]=Ua,Qr[Xr++]=Wa,Wa=e,Ua=t}function Rh(e,t,n){Qt[Xt++]=En,Qt[Xt++]=Tn,Qt[Xt++]=Sr,Sr=e;var r=En;e=Tn;var a=32-dn(r)-1;r&=~(1<<a),n+=1;var o=32-dn(t)+a;if(30<o){var c=a-a%5;o=(r&(1<<c)-1).toString(32),r>>=c,a-=c,En=1<<32-dn(t)+a|n<<a|r,Tn=o+e}else En=1<<o|n<<a|r,Tn=e}function Uu(e){e.return!==null&&(mr(e,1),Rh(e,1,0))}function Vu(e){for(;e===Wa;)Wa=Qr[--Xr],Qr[Xr]=null,Ua=Qr[--Xr],Qr[Xr]=null;for(;e===Sr;)Sr=Qt[--Xt],Qt[Xt]=null,Tn=Qt[--Xt],Qt[Xt]=null,En=Qt[--Xt],Qt[Xt]=null}var Vt=null,Ut=null,Ke=!1,un=null;function Mh(e,t){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,Ut=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,Ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sr!==null?{id:En,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vt=e,Ut=null,!0):!1;default:return!1}}function ru(e){return(e.mode&1)!==0&&(e.flags&128)===0}function iu(e){if(Ke){var t=Ut;if(t){var n=t;if(!Bd(e,t)){if(ru(e))throw Error(se(418));t=Xn(n.nextSibling);var r=Vt;t&&Bd(e,t)?Mh(r,n):(e.flags=e.flags&-4097|2,Ke=!1,Vt=e)}}else{if(ru(e))throw Error(se(418));e.flags=e.flags&-4097|2,Ke=!1,Vt=e}}}function Id(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function ra(e){if(e!==Vt)return!1;if(!Ke)return Id(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jl(e.type,e.memoizedProps)),t&&(t=Ut)){if(ru(e))throw Bh(),Error(se(418));for(;t;)Mh(e,t),t=Xn(t.nextSibling)}if(Id(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ut=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ut=null}}else Ut=Vt?Xn(e.stateNode.nextSibling):null;return!0}function Bh(){for(var e=Ut;e;)e=Xn(e.nextSibling)}function ci(){Ut=Vt=null,Ke=!1}function qu(e){un===null?un=[e]:un.push(e)}var x0=Fn.ReactCurrentBatchConfig;function Ri(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(c){var h=a.refs;c===null?delete h[o]:h[o]=c},t._stringRef=o,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function ia(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Od(e){var t=e._init;return t(e._payload)}function Ih(e){function t(w,x){if(e){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function n(w,x){if(!e)return null;for(;x!==null;)t(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function a(w,x){return w=tr(w,x),w.index=0,w.sibling=null,w}function o(w,x,b){return w.index=b,e?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function c(w){return e&&w.alternate===null&&(w.flags|=2),w}function h(w,x,b,B){return x===null||x.tag!==6?(x=jl(b,w.mode,B),x.return=w,x):(x=a(x,b),x.return=w,x)}function m(w,x,b,B){var K=b.type;return K===Ur?S(w,x,b.props.children,B,b.key):x!==null&&(x.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Gn&&Od(K)===x.type)?(B=a(x,b.props),B.ref=Ri(w,x,b),B.return=w,B):(B=Na(b.type,b.key,b.props,null,w.mode,B),B.ref=Ri(w,x,b),B.return=w,B)}function y(w,x,b,B){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Sl(b,w.mode,B),x.return=w,x):(x=a(x,b.children||[]),x.return=w,x)}function S(w,x,b,B,K){return x===null||x.tag!==7?(x=kr(b,w.mode,B,K),x.return=w,x):(x=a(x,b),x.return=w,x)}function j(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jl(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ks:return b=Na(x.type,x.key,x.props,null,w.mode,b),b.ref=Ri(w,null,x),b.return=w,b;case Wr:return x=Sl(x,w.mode,b),x.return=w,x;case Gn:var B=x._init;return j(w,B(x._payload),b)}if(Li(x)||Ai(x))return x=kr(x,w.mode,b,null),x.return=w,x;ia(w,x)}return null}function E(w,x,b,B){var K=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return K!==null?null:h(w,x,""+b,B);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ks:return b.key===K?m(w,x,b,B):null;case Wr:return b.key===K?y(w,x,b,B):null;case Gn:return K=b._init,E(w,x,K(b._payload),B)}if(Li(b)||Ai(b))return K!==null?null:S(w,x,b,B,null);ia(w,b)}return null}function G(w,x,b,B,K){if(typeof B=="string"&&B!==""||typeof B=="number")return w=w.get(b)||null,h(x,w,""+B,K);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ks:return w=w.get(B.key===null?b:B.key)||null,m(x,w,B,K);case Wr:return w=w.get(B.key===null?b:B.key)||null,y(x,w,B,K);case Gn:var U=B._init;return G(w,x,b,U(B._payload),K)}if(Li(B)||Ai(B))return w=w.get(b)||null,S(x,w,B,K,null);ia(x,B)}return null}function O(w,x,b,B){for(var K=null,U=null,I=x,V=x=0,H=null;I!==null&&V<b.length;V++){I.index>V?(H=I,I=null):H=I.sibling;var z=E(w,I,b[V],B);if(z===null){I===null&&(I=H);break}e&&I&&z.alternate===null&&t(w,I),x=o(z,x,V),U===null?K=z:U.sibling=z,U=z,I=H}if(V===b.length)return n(w,I),Ke&&mr(w,V),K;if(I===null){for(;V<b.length;V++)I=j(w,b[V],B),I!==null&&(x=o(I,x,V),U===null?K=I:U.sibling=I,U=I);return Ke&&mr(w,V),K}for(I=r(w,I);V<b.length;V++)H=G(I,w,V,b[V],B),H!==null&&(e&&H.alternate!==null&&I.delete(H.key===null?V:H.key),x=o(H,x,V),U===null?K=H:U.sibling=H,U=H);return e&&I.forEach(function(N){return t(w,N)}),Ke&&mr(w,V),K}function M(w,x,b,B){var K=Ai(b);if(typeof K!="function")throw Error(se(150));if(b=K.call(b),b==null)throw Error(se(151));for(var U=K=null,I=x,V=x=0,H=null,z=b.next();I!==null&&!z.done;V++,z=b.next()){I.index>V?(H=I,I=null):H=I.sibling;var N=E(w,I,z.value,B);if(N===null){I===null&&(I=H);break}e&&I&&N.alternate===null&&t(w,I),x=o(N,x,V),U===null?K=N:U.sibling=N,U=N,I=H}if(z.done)return n(w,I),Ke&&mr(w,V),K;if(I===null){for(;!z.done;V++,z=b.next())z=j(w,z.value,B),z!==null&&(x=o(z,x,V),U===null?K=z:U.sibling=z,U=z);return Ke&&mr(w,V),K}for(I=r(w,I);!z.done;V++,z=b.next())z=G(I,w,V,z.value,B),z!==null&&(e&&z.alternate!==null&&I.delete(z.key===null?V:z.key),x=o(z,x,V),U===null?K=z:U.sibling=z,U=z);return e&&I.forEach(function(ee){return t(w,ee)}),Ke&&mr(w,V),K}function Q(w,x,b,B){if(typeof b=="object"&&b!==null&&b.type===Ur&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ks:e:{for(var K=b.key,U=x;U!==null;){if(U.key===K){if(K=b.type,K===Ur){if(U.tag===7){n(w,U.sibling),x=a(U,b.props.children),x.return=w,w=x;break e}}else if(U.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Gn&&Od(K)===U.type){n(w,U.sibling),x=a(U,b.props),x.ref=Ri(w,U,b),x.return=w,w=x;break e}n(w,U);break}else t(w,U);U=U.sibling}b.type===Ur?(x=kr(b.props.children,w.mode,B,b.key),x.return=w,w=x):(B=Na(b.type,b.key,b.props,null,w.mode,B),B.ref=Ri(w,x,b),B.return=w,w=B)}return c(w);case Wr:e:{for(U=b.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(w,x.sibling),x=a(x,b.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else t(w,x);x=x.sibling}x=Sl(b,w.mode,B),x.return=w,w=x}return c(w);case Gn:return U=b._init,Q(w,x,U(b._payload),B)}if(Li(b))return O(w,x,b,B);if(Ai(b))return M(w,x,b,B);ia(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(w,x.sibling),x=a(x,b),x.return=w,w=x):(n(w,x),x=jl(b,w.mode,B),x.return=w,w=x),c(w)):n(w,x)}return Q}var di=Ih(!0),Oh=Ih(!1),Va=sr(null),qa=null,Zr=null,Ku=null;function Hu(){Ku=Zr=qa=null}function Yu(e){var t=Va.current;Ue(Va),e._currentValue=t}function su(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function si(e,t){qa=e,Ku=Zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function tn(e){var t=e._currentValue;if(Ku!==e)if(e={context:e,memoizedValue:t,next:null},Zr===null){if(qa===null)throw Error(se(308));Zr=e,qa.dependencies={lanes:0,firstContext:e}}else Zr=Zr.next=e;return t}var xr=null;function Qu(e){xr===null?xr=[e]:xr.push(e)}function zh(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Qu(t)):(n.next=a.next,a.next=n),t.interleaved=n,_n(e,r)}function _n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Xu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,_n(e,n)}return a=r.interleaved,a===null?(t.next=t,Qu(r)):(t.next=a.next,a.next=t),r.interleaved=t,_n(e,n)}function ka(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bu(e,n)}}function zd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=c:o=o.next=c,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ka(e,t,n,r){var a=e.updateQueue;Wn=!1;var o=a.firstBaseUpdate,c=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var m=h,y=m.next;m.next=null,c===null?o=y:c.next=y,c=m;var S=e.alternate;S!==null&&(S=S.updateQueue,h=S.lastBaseUpdate,h!==c&&(h===null?S.firstBaseUpdate=y:h.next=y,S.lastBaseUpdate=m))}if(o!==null){var j=a.baseState;c=0,S=y=m=null,h=o;do{var E=h.lane,G=h.eventTime;if((r&E)===E){S!==null&&(S=S.next={eventTime:G,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var O=e,M=h;switch(E=t,G=n,M.tag){case 1:if(O=M.payload,typeof O=="function"){j=O.call(G,j,E);break e}j=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=M.payload,E=typeof O=="function"?O.call(G,j,E):O,E==null)break e;j=Xe({},j,E);break e;case 2:Wn=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,E=a.effects,E===null?a.effects=[h]:E.push(h))}else G={eventTime:G,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},S===null?(y=S=G,m=j):S=S.next=G,c|=E;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;E=h,h=E.next,E.next=null,a.lastBaseUpdate=E,a.shared.pending=null}}while(!0);if(S===null&&(m=j),a.baseState=m,a.firstBaseUpdate=y,a.lastBaseUpdate=S,t=a.shared.interleaved,t!==null){a=t;do c|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Tr|=c,e.lanes=c,e.memoizedState=j}}function Ld(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(se(191,a));a.call(r)}}}var xs={},bn=sr(xs),us=sr(xs),cs=sr(xs);function wr(e){if(e===xs)throw Error(se(174));return e}function Zu(e,t){switch(Ge(cs,t),Ge(us,e),Ge(bn,xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zl(t,e)}Ue(bn),Ge(bn,t)}function fi(){Ue(bn),Ue(us),Ue(cs)}function $h(e){wr(cs.current);var t=wr(bn.current),n=zl(t,e.type);t!==n&&(Ge(us,e),Ge(bn,n))}function Ju(e){us.current===e&&(Ue(bn),Ue(us))}var Ye=sr(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vl=[];function ec(){for(var e=0;e<vl.length;e++)vl[e]._workInProgressVersionPrimary=null;vl.length=0}var Ca=Fn.ReactCurrentDispatcher,xl=Fn.ReactCurrentBatchConfig,Er=0,Qe=null,ut=null,ht=null,Ya=!1,Hi=!1,ds=0,w0=0;function bt(){throw Error(se(321))}function tc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hn(e[n],t[n]))return!1;return!0}function nc(e,t,n,r,a,o){if(Er=o,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ca.current=e===null||e.memoizedState===null?j0:S0,e=n(r,a),Hi){o=0;do{if(Hi=!1,ds=0,25<=o)throw Error(se(301));o+=1,ht=ut=null,t.updateQueue=null,Ca.current=E0,e=n(r,a)}while(Hi)}if(Ca.current=Qa,t=ut!==null&&ut.next!==null,Er=0,ht=ut=Qe=null,Ya=!1,t)throw Error(se(300));return e}function rc(){var e=ds!==0;return ds=0,e}function vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Qe.memoizedState=ht=e:ht=ht.next=e,ht}function nn(){if(ut===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=ht===null?Qe.memoizedState:ht.next;if(t!==null)ht=t,ut=e;else{if(e===null)throw Error(se(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ht===null?Qe.memoizedState=ht=e:ht=ht.next=e}return ht}function fs(e,t){return typeof t=="function"?t(e):t}function wl(e){var t=nn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=ut,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var c=a.next;a.next=o.next,o.next=c}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var h=c=null,m=null,y=o;do{var S=y.lane;if((Er&S)===S)m!==null&&(m=m.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var j={lane:S,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};m===null?(h=m=j,c=r):m=m.next=j,Qe.lanes|=S,Tr|=S}y=y.next}while(y!==null&&y!==o);m===null?c=r:m.next=h,hn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=c,t.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Qe.lanes|=o,Tr|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bl(e){var t=nn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var c=a=a.next;do o=e(o,c.action),c=c.next;while(c!==a);hn(o,t.memoizedState)||(It=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Gh(){}function Wh(e,t){var n=Qe,r=nn(),a=t(),o=!hn(r.memoizedState,a);if(o&&(r.memoizedState=a,It=!0),r=r.queue,ic(qh.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,hs(9,Vh.bind(null,n,r,a,t),void 0,null),pt===null)throw Error(se(349));Er&30||Uh(n,t,a)}return a}function Uh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vh(e,t,n,r){t.value=n,t.getSnapshot=r,Kh(t)&&Hh(e)}function qh(e,t,n){return n(function(){Kh(t)&&Hh(e)})}function Kh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hn(e,n)}catch{return!0}}function Hh(e){var t=_n(e,1);t!==null&&fn(t,e,1,-1)}function $d(e){var t=vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t.queue=e,e=e.dispatch=C0.bind(null,Qe,e),[t.memoizedState,e]}function hs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Yh(){return nn().memoizedState}function ja(e,t,n,r){var a=vn();Qe.flags|=e,a.memoizedState=hs(1|t,n,void 0,r===void 0?null:r)}function co(e,t,n,r){var a=nn();r=r===void 0?null:r;var o=void 0;if(ut!==null){var c=ut.memoizedState;if(o=c.destroy,r!==null&&tc(r,c.deps)){a.memoizedState=hs(t,n,o,r);return}}Qe.flags|=e,a.memoizedState=hs(1|t,n,o,r)}function Gd(e,t){return ja(8390656,8,e,t)}function ic(e,t){return co(2048,8,e,t)}function Qh(e,t){return co(4,2,e,t)}function Xh(e,t){return co(4,4,e,t)}function Zh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jh(e,t,n){return n=n!=null?n.concat([e]):null,co(4,4,Zh.bind(null,t,e),n)}function sc(){}function ep(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tp(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function np(e,t,n){return Er&21?(hn(n,t)||(n=oh(),Qe.lanes|=n,Tr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function b0(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=xl.transition;xl.transition={};try{e(!1),t()}finally{ze=n,xl.transition=r}}function rp(){return nn().memoizedState}function k0(e,t,n){var r=er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ip(e))sp(t,n);else if(n=zh(e,t,n,r),n!==null){var a=Pt();fn(n,e,r,a),ap(n,t,r)}}function C0(e,t,n){var r=er(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ip(e))sp(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var c=t.lastRenderedState,h=o(c,n);if(a.hasEagerState=!0,a.eagerState=h,hn(h,c)){var m=t.interleaved;m===null?(a.next=a,Qu(t)):(a.next=m.next,m.next=a),t.interleaved=a;return}}catch{}finally{}n=zh(e,t,a,r),n!==null&&(a=Pt(),fn(n,e,r,a),ap(n,t,r))}}function ip(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function sp(e,t){Hi=Ya=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ap(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bu(e,n)}}var Qa={readContext:tn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},j0={readContext:tn,useCallback:function(e,t){return vn().memoizedState=[e,t===void 0?null:t],e},useContext:tn,useEffect:Gd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ja(4194308,4,Zh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=vn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=k0.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=vn();return e={current:e},t.memoizedState=e},useState:$d,useDebugValue:sc,useDeferredValue:function(e){return vn().memoizedState=e},useTransition:function(){var e=$d(!1),t=e[0];return e=b0.bind(null,e[1]),vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qe,a=vn();if(Ke){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),pt===null)throw Error(se(349));Er&30||Uh(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Gd(qh.bind(null,r,o,e),[e]),r.flags|=2048,hs(9,Vh.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vn(),t=pt.identifierPrefix;if(Ke){var n=Tn,r=En;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=w0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},S0={readContext:tn,useCallback:ep,useContext:tn,useEffect:ic,useImperativeHandle:Jh,useInsertionEffect:Qh,useLayoutEffect:Xh,useMemo:tp,useReducer:wl,useRef:Yh,useState:function(){return wl(fs)},useDebugValue:sc,useDeferredValue:function(e){var t=nn();return np(t,ut.memoizedState,e)},useTransition:function(){var e=wl(fs)[0],t=nn().memoizedState;return[e,t]},useMutableSource:Gh,useSyncExternalStore:Wh,useId:rp,unstable_isNewReconciler:!1},E0={readContext:tn,useCallback:ep,useContext:tn,useEffect:ic,useImperativeHandle:Jh,useInsertionEffect:Qh,useLayoutEffect:Xh,useMemo:tp,useReducer:bl,useRef:Yh,useState:function(){return bl(fs)},useDebugValue:sc,useDeferredValue:function(e){var t=nn();return ut===null?t.memoizedState=e:np(t,ut.memoizedState,e)},useTransition:function(){var e=bl(fs)[0],t=nn().memoizedState;return[e,t]},useMutableSource:Gh,useSyncExternalStore:Wh,useId:rp,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function au(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),a=er(e),o=Nn(r,a);o.payload=t,n!=null&&(o.callback=n),t=Zn(e,o,a),t!==null&&(fn(t,e,a,r),ka(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),a=er(e),o=Nn(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Zn(e,o,a),t!==null&&(fn(t,e,a,r),ka(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=er(e),a=Nn(n,r);a.tag=2,t!=null&&(a.callback=t),t=Zn(e,a,r),t!==null&&(fn(t,e,r,n),ka(t,e,r))}};function Wd(e,t,n,r,a,o,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,c):t.prototype&&t.prototype.isPureReactComponent?!ss(n,r)||!ss(a,o):!0}function op(e,t,n){var r=!1,a=rr,o=t.contextType;return typeof o=="object"&&o!==null?o=tn(o):(a=zt(t)?jr:St.current,r=t.contextTypes,o=(r=r!=null)?ui(e,a):rr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ud(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function ou(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Xu(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=tn(o):(o=zt(t)?jr:St.current,a.context=ui(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(au(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&fo.enqueueReplaceState(a,a.state,null),Ka(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function hi(e,t){try{var n="",r=t;do n+=eg(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function kl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var T0=typeof WeakMap=="function"?WeakMap:Map;function lp(e,t,n){n=Nn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,vu=r),lu(e,t)},n}function up(e,t,n){n=Nn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){lu(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){lu(e,t),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function Vd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new T0;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=$0.bind(null,e,t,n),t.then(e,e))}function qd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kd(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Nn(-1,1),t.tag=2,Zn(n,t,1))),n.lanes|=1),e)}var N0=Fn.ReactCurrentOwner,It=!1;function At(e,t,n,r){t.child=e===null?Oh(t,null,n,r):di(t,e.child,n,r)}function Hd(e,t,n,r,a){n=n.render;var o=t.ref;return si(t,a),r=nc(e,t,n,r,o,a),n=rc(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Dn(e,t,a)):(Ke&&n&&Uu(t),t.flags|=1,At(e,t,r,a),t.child)}function Yd(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!hc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,cp(e,t,o,r,a)):(e=Na(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var c=o.memoizedProps;if(n=n.compare,n=n!==null?n:ss,n(c,r)&&e.ref===t.ref)return Dn(e,t,a)}return t.flags|=1,e=tr(o,r),e.ref=t.ref,e.return=t,t.child=e}function cp(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(ss(o,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,Dn(e,t,a)}return uu(e,t,n,r,a)}function dp(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(ei,Wt),Wt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(ei,Wt),Wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ge(ei,Wt),Wt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ge(ei,Wt),Wt|=r;return At(e,t,a,n),t.child}function fp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uu(e,t,n,r,a){var o=zt(n)?jr:St.current;return o=ui(t,o),si(t,a),n=nc(e,t,n,r,o,a),r=rc(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Dn(e,t,a)):(Ke&&r&&Uu(t),t.flags|=1,At(e,t,n,a),t.child)}function Qd(e,t,n,r,a){if(zt(n)){var o=!0;Ga(t)}else o=!1;if(si(t,a),t.stateNode===null)Sa(e,t),op(t,n,r),ou(t,n,r,a),r=!0;else if(e===null){var c=t.stateNode,h=t.memoizedProps;c.props=h;var m=c.context,y=n.contextType;typeof y=="object"&&y!==null?y=tn(y):(y=zt(n)?jr:St.current,y=ui(t,y));var S=n.getDerivedStateFromProps,j=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function";j||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==r||m!==y)&&Ud(t,c,r,y),Wn=!1;var E=t.memoizedState;c.state=E,Ka(t,r,c,a),m=t.memoizedState,h!==r||E!==m||Ot.current||Wn?(typeof S=="function"&&(au(t,n,S,r),m=t.memoizedState),(h=Wn||Wd(t,n,h,r,E,m,y))?(j||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=m),c.props=r,c.state=m,c.context=y,r=h):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,Lh(e,t),h=t.memoizedProps,y=t.type===t.elementType?h:on(t.type,h),c.props=y,j=t.pendingProps,E=c.context,m=n.contextType,typeof m=="object"&&m!==null?m=tn(m):(m=zt(n)?jr:St.current,m=ui(t,m));var G=n.getDerivedStateFromProps;(S=typeof G=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==j||E!==m)&&Ud(t,c,r,m),Wn=!1,E=t.memoizedState,c.state=E,Ka(t,r,c,a);var O=t.memoizedState;h!==j||E!==O||Ot.current||Wn?(typeof G=="function"&&(au(t,n,G,r),O=t.memoizedState),(y=Wn||Wd(t,n,y,r,E,O,m)||!1)?(S||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,O,m),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,O,m)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=O),c.props=r,c.state=O,c.context=m,r=y):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return cu(e,t,n,r,o,a)}function cu(e,t,n,r,a,o){fp(e,t);var c=(t.flags&128)!==0;if(!r&&!c)return a&&Md(t,n,!1),Dn(e,t,o);r=t.stateNode,N0.current=t;var h=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&c?(t.child=di(t,e.child,null,o),t.child=di(t,null,h,o)):At(e,t,h,o),t.memoizedState=r.state,a&&Md(t,n,!0),t.child}function hp(e){var t=e.stateNode;t.pendingContext?Rd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rd(e,t.context,!1),Zu(e,t.containerInfo)}function Xd(e,t,n,r,a){return ci(),qu(a),t.flags|=256,At(e,t,n,r),t.child}var du={dehydrated:null,treeContext:null,retryLane:0};function fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function pp(e,t,n){var r=t.pendingProps,a=Ye.current,o=!1,c=(t.flags&128)!==0,h;if((h=c)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ge(Ye,a&1),e===null)return iu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=r.children,e=r.fallback,o?(r=t.mode,o=t.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=mo(c,r,0,null),e=kr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=fu(n),t.memoizedState=du,e):ac(t,c));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return A0(e,t,c,r,h,a,n);if(o){o=r.fallback,c=t.mode,a=e.child,h=a.sibling;var m={mode:"hidden",children:r.children};return!(c&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=m,t.deletions=null):(r=tr(a,m),r.subtreeFlags=a.subtreeFlags&14680064),h!==null?o=tr(h,o):(o=kr(o,c,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,c=e.child.memoizedState,c=c===null?fu(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~n,t.memoizedState=du,r}return o=e.child,e=o.sibling,r=tr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ac(e,t){return t=mo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sa(e,t,n,r){return r!==null&&qu(r),di(t,e.child,null,n),e=ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function A0(e,t,n,r,a,o,c){if(n)return t.flags&256?(t.flags&=-257,r=kl(Error(se(422))),sa(e,t,c,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=mo({mode:"visible",children:r.children},a,0,null),o=kr(o,a,c,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&di(t,e.child,null,c),t.child.memoizedState=fu(c),t.memoizedState=du,o);if(!(t.mode&1))return sa(e,t,c,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(se(419)),r=kl(o,r,void 0),sa(e,t,c,r)}if(h=(c&e.childLanes)!==0,It||h){if(r=pt,r!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|c)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,_n(e,a),fn(r,e,a,-1))}return fc(),r=kl(Error(se(421))),sa(e,t,c,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=G0.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Ut=Xn(a.nextSibling),Vt=t,Ke=!0,un=null,e!==null&&(Qt[Xt++]=En,Qt[Xt++]=Tn,Qt[Xt++]=Sr,En=e.id,Tn=e.overflow,Sr=t),t=ac(t,r.children),t.flags|=4096,t)}function Zd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),su(e.return,t,n)}function Cl(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function mp(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(At(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zd(e,n,t);else if(e.tag===19)Zd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ge(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ha(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Cl(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ha(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Cl(t,!0,n,null,o);break;case"together":Cl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function P0(e,t,n){switch(t.tag){case 3:hp(t),ci();break;case 5:$h(t);break;case 1:zt(t.type)&&Ga(t);break;case 4:Zu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ge(Va,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ge(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?pp(e,t,n):(Ge(Ye,Ye.current&1),e=Dn(e,t,n),e!==null?e.sibling:null);Ge(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mp(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ge(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,dp(e,t,n)}return Dn(e,t,n)}var gp,hu,yp,vp;gp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hu=function(){};yp=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,wr(bn.current);var o=null;switch(n){case"input":a=Ml(e,a),r=Ml(e,r),o=[];break;case"select":a=Xe({},a,{value:void 0}),r=Xe({},r,{value:void 0}),o=[];break;case"textarea":a=Ol(e,a),r=Ol(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=La)}Ll(n,r);var c;n=null;for(y in a)if(!r.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var h=a[y];for(c in h)h.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Zi.hasOwnProperty(y)?o||(o=[]):(o=o||[]).push(y,null));for(y in r){var m=r[y];if(h=a!=null?a[y]:void 0,r.hasOwnProperty(y)&&m!==h&&(m!=null||h!=null))if(y==="style")if(h){for(c in h)!h.hasOwnProperty(c)||m&&m.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in m)m.hasOwnProperty(c)&&h[c]!==m[c]&&(n||(n={}),n[c]=m[c])}else n||(o||(o=[]),o.push(y,n)),n=m;else y==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(o=o||[]).push(y,m)):y==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(y,""+m):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Zi.hasOwnProperty(y)?(m!=null&&y==="onScroll"&&We("scroll",e),o||h===m||(o=[])):(o=o||[]).push(y,m))}n&&(o=o||[]).push("style",n);var y=o;(t.updateQueue=y)&&(t.flags|=4)}};vp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mi(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _0(e,t,n){var r=t.pendingProps;switch(Vu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return zt(t.type)&&$a(),kt(t),null;case 3:return r=t.stateNode,fi(),Ue(Ot),Ue(St),ec(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,un!==null&&(bu(un),un=null))),hu(e,t),kt(t),null;case 5:Ju(t);var a=wr(cs.current);if(n=t.type,e!==null&&t.stateNode!=null)yp(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return kt(t),null}if(e=wr(bn.current),ra(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[xn]=t,r[ls]=o,e=(t.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(a=0;a<Gi.length;a++)We(Gi[a],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":od(r,o),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},We("invalid",r);break;case"textarea":ud(r,o),We("invalid",r)}Ll(n,o),a=null;for(var c in o)if(o.hasOwnProperty(c)){var h=o[c];c==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&na(r.textContent,h,e),a=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&na(r.textContent,h,e),a=["children",""+h]):Zi.hasOwnProperty(c)&&h!=null&&c==="onScroll"&&We("scroll",r)}switch(n){case"input":Hs(r),ld(r,o,!0);break;case"textarea":Hs(r),cd(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=La)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),n==="select"&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[xn]=t,e[ls]=r,gp(e,t,!1,!1),t.stateNode=e;e:{switch(c=$l(n,r),n){case"dialog":We("cancel",e),We("close",e),a=r;break;case"iframe":case"object":case"embed":We("load",e),a=r;break;case"video":case"audio":for(a=0;a<Gi.length;a++)We(Gi[a],e);a=r;break;case"source":We("error",e),a=r;break;case"img":case"image":case"link":We("error",e),We("load",e),a=r;break;case"details":We("toggle",e),a=r;break;case"input":od(e,r),a=Ml(e,r),We("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Xe({},r,{value:void 0}),We("invalid",e);break;case"textarea":ud(e,r),a=Ol(e,r),We("invalid",e);break;default:a=r}Ll(n,a),h=a;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];o==="style"?Yf(e,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Kf(e,m)):o==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&Ji(e,m):typeof m=="number"&&Ji(e,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zi.hasOwnProperty(o)?m!=null&&o==="onScroll"&&We("scroll",e):m!=null&&Pu(e,o,m,c))}switch(n){case"input":Hs(e),ld(e,r,!1);break;case"textarea":Hs(e),cd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+nr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ti(e,!!r.multiple,o,!1):r.defaultValue!=null&&ti(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=La)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)vp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=wr(cs.current),wr(bn.current),ra(t)){if(r=t.stateNode,n=t.memoizedProps,r[xn]=t,(o=r.nodeValue!==n)&&(e=Vt,e!==null))switch(e.tag){case 3:na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&na(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=t,t.stateNode=r}return kt(t),null;case 13:if(Ue(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Ut!==null&&t.mode&1&&!(t.flags&128))Bh(),ci(),t.flags|=98560,o=!1;else if(o=ra(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(se(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(se(317));o[xn]=t}else ci(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),o=!1}else un!==null&&(bu(un),un=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?ct===0&&(ct=3):fc())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return fi(),hu(e,t),e===null&&as(t.stateNode.containerInfo),kt(t),null;case 10:return Yu(t.type._context),kt(t),null;case 17:return zt(t.type)&&$a(),kt(t),null;case 19:if(Ue(Ye),o=t.memoizedState,o===null)return kt(t),null;if(r=(t.flags&128)!==0,c=o.rendering,c===null)if(r)Mi(o,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Ha(e),c!==null){for(t.flags|=128,Mi(o,!1),r=c.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ge(Ye,Ye.current&1|2),t.child}e=e.sibling}o.tail!==null&&st()>pi&&(t.flags|=128,r=!0,Mi(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ha(c),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!Ke)return kt(t),null}else 2*st()-o.renderingStartTime>pi&&n!==1073741824&&(t.flags|=128,r=!0,Mi(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(n=o.last,n!==null?n.sibling=c:t.child=c,o.last=c)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=st(),t.sibling=null,n=Ye.current,Ge(Ye,r?n&1|2:n&1),t):(kt(t),null);case 22:case 23:return dc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function D0(e,t){switch(Vu(t),t.tag){case 1:return zt(t.type)&&$a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fi(),Ue(Ot),Ue(St),ec(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ju(t),null;case 13:if(Ue(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ye),null;case 4:return fi(),null;case 10:return Yu(t.type._context),null;case 22:case 23:return dc(),null;case 24:return null;default:return null}}var aa=!1,jt=!1,F0=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Jr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function pu(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Jd=!1;function R0(e,t){if(Xl=Ia,e=Ch(),Wu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var c=0,h=-1,m=-1,y=0,S=0,j=e,E=null;t:for(;;){for(var G;j!==n||a!==0&&j.nodeType!==3||(h=c+a),j!==o||r!==0&&j.nodeType!==3||(m=c+r),j.nodeType===3&&(c+=j.nodeValue.length),(G=j.firstChild)!==null;)E=j,j=G;for(;;){if(j===e)break t;if(E===n&&++y===a&&(h=c),E===o&&++S===r&&(m=c),(G=j.nextSibling)!==null)break;j=E,E=j.parentNode}j=G}n=h===-1||m===-1?null:{start:h,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zl={focusedElem:e,selectionRange:n},Ia=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var O=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var M=O.memoizedProps,Q=O.memoizedState,w=t.stateNode,x=w.getSnapshotBeforeUpdate(t.elementType===t.type?M:on(t.type,M),Q);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(B){tt(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return O=Jd,Jd=!1,O}function Yi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&pu(t,n,o)}a=a.next}while(a!==r)}}function ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function mu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xp(e){var t=e.alternate;t!==null&&(e.alternate=null,xp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[ls],delete t[tu],delete t[g0],delete t[y0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wp(e){return e.tag===5||e.tag===3||e.tag===4}function ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=La));else if(r!==4&&(e=e.child,e!==null))for(gu(e,t,n),e=e.sibling;e!==null;)gu(e,t,n),e=e.sibling}function yu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(yu(e,t,n),e=e.sibling;e!==null;)yu(e,t,n),e=e.sibling}var gt=null,ln=!1;function $n(e,t,n){for(n=n.child;n!==null;)bp(e,t,n),n=n.sibling}function bp(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(io,n)}catch{}switch(n.tag){case 5:jt||Jr(n,t);case 6:var r=gt,a=ln;gt=null,$n(e,t,n),gt=r,ln=a,gt!==null&&(ln?(e=gt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(ln?(e=gt,n=n.stateNode,e.nodeType===8?gl(e.parentNode,n):e.nodeType===1&&gl(e,n),rs(e)):gl(gt,n.stateNode));break;case 4:r=gt,a=ln,gt=n.stateNode.containerInfo,ln=!0,$n(e,t,n),gt=r,ln=a;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&pu(n,t,c),a=a.next}while(a!==r)}$n(e,t,n);break;case 1:if(!jt&&(Jr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){tt(n,t,h)}$n(e,t,n);break;case 21:$n(e,t,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,$n(e,t,n),jt=r):$n(e,t,n);break;default:$n(e,t,n)}}function tf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new F0),t.forEach(function(r){var a=W0.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function an(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,c=t,h=c;e:for(;h!==null;){switch(h.tag){case 5:gt=h.stateNode,ln=!1;break e;case 3:gt=h.stateNode.containerInfo,ln=!0;break e;case 4:gt=h.stateNode.containerInfo,ln=!0;break e}h=h.return}if(gt===null)throw Error(se(160));bp(o,c,a),gt=null,ln=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(y){tt(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kp(t,e),t=t.sibling}function kp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(an(t,e),yn(e),r&4){try{Yi(3,e,e.return),ho(3,e)}catch(M){tt(e,e.return,M)}try{Yi(5,e,e.return)}catch(M){tt(e,e.return,M)}}break;case 1:an(t,e),yn(e),r&512&&n!==null&&Jr(n,n.return);break;case 5:if(an(t,e),yn(e),r&512&&n!==null&&Jr(n,n.return),e.flags&32){var a=e.stateNode;try{Ji(a,"")}catch(M){tt(e,e.return,M)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,c=n!==null?n.memoizedProps:o,h=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Uf(a,o),$l(h,c);var y=$l(h,o);for(c=0;c<m.length;c+=2){var S=m[c],j=m[c+1];S==="style"?Yf(a,j):S==="dangerouslySetInnerHTML"?Kf(a,j):S==="children"?Ji(a,j):Pu(a,S,j,y)}switch(h){case"input":Bl(a,o);break;case"textarea":Vf(a,o);break;case"select":var E=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var G=o.value;G!=null?ti(a,!!o.multiple,G,!1):E!==!!o.multiple&&(o.defaultValue!=null?ti(a,!!o.multiple,o.defaultValue,!0):ti(a,!!o.multiple,o.multiple?[]:"",!1))}a[ls]=o}catch(M){tt(e,e.return,M)}}break;case 6:if(an(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(M){tt(e,e.return,M)}}break;case 3:if(an(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rs(t.containerInfo)}catch(M){tt(e,e.return,M)}break;case 4:an(t,e),yn(e);break;case 13:an(t,e),yn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(uc=st())),r&4&&tf(e);break;case 22:if(S=n!==null&&n.memoizedState!==null,e.mode&1?(jt=(y=jt)||S,an(t,e),jt=y):an(t,e),yn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!S&&e.mode&1)for(xe=e,S=e.child;S!==null;){for(j=xe=S;xe!==null;){switch(E=xe,G=E.child,E.tag){case 0:case 11:case 14:case 15:Yi(4,E,E.return);break;case 1:Jr(E,E.return);var O=E.stateNode;if(typeof O.componentWillUnmount=="function"){r=E,n=E.return;try{t=r,O.props=t.memoizedProps,O.state=t.memoizedState,O.componentWillUnmount()}catch(M){tt(r,n,M)}}break;case 5:Jr(E,E.return);break;case 22:if(E.memoizedState!==null){rf(j);continue}}G!==null?(G.return=E,xe=G):rf(j)}S=S.sibling}e:for(S=null,j=e;;){if(j.tag===5){if(S===null){S=j;try{a=j.stateNode,y?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=j.stateNode,m=j.memoizedProps.style,c=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=Hf("display",c))}catch(M){tt(e,e.return,M)}}}else if(j.tag===6){if(S===null)try{j.stateNode.nodeValue=y?"":j.memoizedProps}catch(M){tt(e,e.return,M)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===e)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===e)break e;for(;j.sibling===null;){if(j.return===null||j.return===e)break e;S===j&&(S=null),j=j.return}S===j&&(S=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:an(t,e),yn(e),r&4&&tf(e);break;case 21:break;default:an(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wp(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ji(a,""),r.flags&=-33);var o=ef(e);yu(e,o,a);break;case 3:case 4:var c=r.stateNode.containerInfo,h=ef(e);gu(e,h,c);break;default:throw Error(se(161))}}catch(m){tt(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function M0(e,t,n){xe=e,Cp(e)}function Cp(e,t,n){for(var r=(e.mode&1)!==0;xe!==null;){var a=xe,o=a.child;if(a.tag===22&&r){var c=a.memoizedState!==null||aa;if(!c){var h=a.alternate,m=h!==null&&h.memoizedState!==null||jt;h=aa;var y=jt;if(aa=c,(jt=m)&&!y)for(xe=a;xe!==null;)c=xe,m=c.child,c.tag===22&&c.memoizedState!==null?sf(a):m!==null?(m.return=c,xe=m):sf(a);for(;o!==null;)xe=o,Cp(o),o=o.sibling;xe=a,aa=h,jt=y}nf(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,xe=o):nf(e)}}function nf(e){for(;xe!==null;){var t=xe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jt||ho(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!jt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ld(t,o,r);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ld(t,c,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var S=y.memoizedState;if(S!==null){var j=S.dehydrated;j!==null&&rs(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}jt||t.flags&512&&mu(t)}catch(E){tt(t,t.return,E)}}if(t===e){xe=null;break}if(n=t.sibling,n!==null){n.return=t.return,xe=n;break}xe=t.return}}function rf(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xe=n;break}xe=t.return}}function sf(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ho(4,t)}catch(m){tt(t,n,m)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(m){tt(t,a,m)}}var o=t.return;try{mu(t)}catch(m){tt(t,o,m)}break;case 5:var c=t.return;try{mu(t)}catch(m){tt(t,c,m)}}}catch(m){tt(t,t.return,m)}if(t===e){xe=null;break}var h=t.sibling;if(h!==null){h.return=t.return,xe=h;break}xe=t.return}}var B0=Math.ceil,Xa=Fn.ReactCurrentDispatcher,oc=Fn.ReactCurrentOwner,Jt=Fn.ReactCurrentBatchConfig,Re=0,pt=null,at=null,yt=0,Wt=0,ei=sr(0),ct=0,ps=null,Tr=0,po=0,lc=0,Qi=null,Bt=null,uc=0,pi=1/0,jn=null,Za=!1,vu=null,Jn=null,oa=!1,Kn=null,Ja=0,Xi=0,xu=null,Ea=-1,Ta=0;function Pt(){return Re&6?st():Ea!==-1?Ea:Ea=st()}function er(e){return e.mode&1?Re&2&&yt!==0?yt&-yt:x0.transition!==null?(Ta===0&&(Ta=oh()),Ta):(e=ze,e!==0||(e=window.event,e=e===void 0?16:ph(e.type)),e):1}function fn(e,t,n,r){if(50<Xi)throw Xi=0,xu=null,Error(se(185));gs(e,n,r),(!(Re&2)||e!==pt)&&(e===pt&&(!(Re&2)&&(po|=n),ct===4&&Vn(e,yt)),Lt(e,r),n===1&&Re===0&&!(t.mode&1)&&(pi=st()+500,uo&&ar()))}function Lt(e,t){var n=e.callbackNode;xg(e,t);var r=Ba(e,e===pt?yt:0);if(r===0)n!==null&&hd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hd(n),t===1)e.tag===0?v0(af.bind(null,e)):Fh(af.bind(null,e)),p0(function(){!(Re&6)&&ar()}),n=null;else{switch(lh(r)){case 1:n=Mu;break;case 4:n=sh;break;case 16:n=Ma;break;case 536870912:n=ah;break;default:n=Ma}n=_p(n,jp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function jp(e,t){if(Ea=-1,Ta=0,Re&6)throw Error(se(327));var n=e.callbackNode;if(ai()&&e.callbackNode!==n)return null;var r=Ba(e,e===pt?yt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=eo(e,r);else{t=r;var a=Re;Re|=2;var o=Ep();(pt!==e||yt!==t)&&(jn=null,pi=st()+500,br(e,t));do try{z0();break}catch(h){Sp(e,h)}while(!0);Hu(),Xa.current=o,Re=a,at!==null?t=0:(pt=null,yt=0,t=ct)}if(t!==0){if(t===2&&(a=ql(e),a!==0&&(r=a,t=wu(e,a))),t===1)throw n=ps,br(e,0),Vn(e,r),Lt(e,st()),n;if(t===6)Vn(e,r);else{if(a=e.current.alternate,!(r&30)&&!I0(a)&&(t=eo(e,r),t===2&&(o=ql(e),o!==0&&(r=o,t=wu(e,o))),t===1))throw n=ps,br(e,0),Vn(e,r),Lt(e,st()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:gr(e,Bt,jn);break;case 3:if(Vn(e,r),(r&130023424)===r&&(t=uc+500-st(),10<t)){if(Ba(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=eu(gr.bind(null,e,Bt,jn),t);break}gr(e,Bt,jn);break;case 4:if(Vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var c=31-dn(r);o=1<<c,c=t[c],c>a&&(a=c),r&=~o}if(r=a,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*B0(r/1960))-r,10<r){e.timeoutHandle=eu(gr.bind(null,e,Bt,jn),r);break}gr(e,Bt,jn);break;case 5:gr(e,Bt,jn);break;default:throw Error(se(329))}}}return Lt(e,st()),e.callbackNode===n?jp.bind(null,e):null}function wu(e,t){var n=Qi;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=eo(e,t),e!==2&&(t=Bt,Bt=n,t!==null&&bu(t)),e}function bu(e){Bt===null?Bt=e:Bt.push.apply(Bt,e)}function I0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!hn(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~lc,t&=~po,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dn(t),r=1<<n;e[n]=-1,t&=~r}}function af(e){if(Re&6)throw Error(se(327));ai();var t=Ba(e,0);if(!(t&1))return Lt(e,st()),null;var n=eo(e,t);if(e.tag!==0&&n===2){var r=ql(e);r!==0&&(t=r,n=wu(e,r))}if(n===1)throw n=ps,br(e,0),Vn(e,t),Lt(e,st()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,Bt,jn),Lt(e,st()),null}function cc(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(pi=st()+500,uo&&ar())}}function Nr(e){Kn!==null&&Kn.tag===0&&!(Re&6)&&ai();var t=Re;Re|=1;var n=Jt.transition,r=ze;try{if(Jt.transition=null,ze=1,e)return e()}finally{ze=r,Jt.transition=n,Re=t,!(Re&6)&&ar()}}function dc(){Wt=ei.current,Ue(ei)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,h0(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(Vu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:fi(),Ue(Ot),Ue(St),ec();break;case 5:Ju(r);break;case 4:fi();break;case 13:Ue(Ye);break;case 19:Ue(Ye);break;case 10:Yu(r.type._context);break;case 22:case 23:dc()}n=n.return}if(pt=e,at=e=tr(e.current,null),yt=Wt=t,ct=0,ps=null,lc=po=Tr=0,Bt=Qi=null,xr!==null){for(t=0;t<xr.length;t++)if(n=xr[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var c=o.next;o.next=a,r.next=c}n.pending=r}xr=null}return e}function Sp(e,t){do{var n=at;try{if(Hu(),Ca.current=Qa,Ya){for(var r=Qe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ya=!1}if(Er=0,ht=ut=Qe=null,Hi=!1,ds=0,oc.current=null,n===null||n.return===null){ct=1,ps=t,at=null;break}e:{var o=e,c=n.return,h=n,m=t;if(t=yt,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var y=m,S=h,j=S.tag;if(!(S.mode&1)&&(j===0||j===11||j===15)){var E=S.alternate;E?(S.updateQueue=E.updateQueue,S.memoizedState=E.memoizedState,S.lanes=E.lanes):(S.updateQueue=null,S.memoizedState=null)}var G=qd(c);if(G!==null){G.flags&=-257,Kd(G,c,h,o,t),G.mode&1&&Vd(o,y,t),t=G,m=y;var O=t.updateQueue;if(O===null){var M=new Set;M.add(m),t.updateQueue=M}else O.add(m);break e}else{if(!(t&1)){Vd(o,y,t),fc();break e}m=Error(se(426))}}else if(Ke&&h.mode&1){var Q=qd(c);if(Q!==null){!(Q.flags&65536)&&(Q.flags|=256),Kd(Q,c,h,o,t),qu(hi(m,h));break e}}o=m=hi(m,h),ct!==4&&(ct=2),Qi===null?Qi=[o]:Qi.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=lp(o,m,t);zd(o,w);break e;case 1:h=m;var x=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Jn===null||!Jn.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var B=up(o,h,t);zd(o,B);break e}}o=o.return}while(o!==null)}Np(n)}catch(K){t=K,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Ep(){var e=Xa.current;return Xa.current=Qa,e===null?Qa:e}function fc(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(Tr&268435455)&&!(po&268435455)||Vn(pt,yt)}function eo(e,t){var n=Re;Re|=2;var r=Ep();(pt!==e||yt!==t)&&(jn=null,br(e,t));do try{O0();break}catch(a){Sp(e,a)}while(!0);if(Hu(),Re=n,Xa.current=r,at!==null)throw Error(se(261));return pt=null,yt=0,ct}function O0(){for(;at!==null;)Tp(at)}function z0(){for(;at!==null&&!cg();)Tp(at)}function Tp(e){var t=Pp(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,t===null?Np(e):at=t,oc.current=null}function Np(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=D0(n,t),n!==null){n.flags&=32767,at=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,at=null;return}}else if(n=_0(n,t,Wt),n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);ct===0&&(ct=5)}function gr(e,t,n){var r=ze,a=Jt.transition;try{Jt.transition=null,ze=1,L0(e,t,n,r)}finally{Jt.transition=a,ze=r}return null}function L0(e,t,n,r){do ai();while(Kn!==null);if(Re&6)throw Error(se(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(wg(e,o),e===pt&&(at=pt=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oa||(oa=!0,_p(Ma,function(){return ai(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Jt.transition,Jt.transition=null;var c=ze;ze=1;var h=Re;Re|=4,oc.current=null,R0(e,n),kp(n,e),a0(Zl),Ia=!!Xl,Zl=Xl=null,e.current=n,M0(n),dg(),Re=h,ze=c,Jt.transition=o}else e.current=n;if(oa&&(oa=!1,Kn=e,Ja=a),o=e.pendingLanes,o===0&&(Jn=null),pg(n.stateNode),Lt(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Za)throw Za=!1,e=vu,vu=null,e;return Ja&1&&e.tag!==0&&ai(),o=e.pendingLanes,o&1?e===xu?Xi++:(Xi=0,xu=e):Xi=0,ar(),null}function ai(){if(Kn!==null){var e=lh(Ja),t=Jt.transition,n=ze;try{if(Jt.transition=null,ze=16>e?16:e,Kn===null)var r=!1;else{if(e=Kn,Kn=null,Ja=0,Re&6)throw Error(se(331));var a=Re;for(Re|=4,xe=e.current;xe!==null;){var o=xe,c=o.child;if(xe.flags&16){var h=o.deletions;if(h!==null){for(var m=0;m<h.length;m++){var y=h[m];for(xe=y;xe!==null;){var S=xe;switch(S.tag){case 0:case 11:case 15:Yi(8,S,o)}var j=S.child;if(j!==null)j.return=S,xe=j;else for(;xe!==null;){S=xe;var E=S.sibling,G=S.return;if(xp(S),S===y){xe=null;break}if(E!==null){E.return=G,xe=E;break}xe=G}}}var O=o.alternate;if(O!==null){var M=O.child;if(M!==null){O.child=null;do{var Q=M.sibling;M.sibling=null,M=Q}while(M!==null)}}xe=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,xe=c;else e:for(;xe!==null;){if(o=xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yi(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,xe=w;break e}xe=o.return}}var x=e.current;for(xe=x;xe!==null;){c=xe;var b=c.child;if(c.subtreeFlags&2064&&b!==null)b.return=c,xe=b;else e:for(c=x;xe!==null;){if(h=xe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:ho(9,h)}}catch(K){tt(h,h.return,K)}if(h===c){xe=null;break e}var B=h.sibling;if(B!==null){B.return=h.return,xe=B;break e}xe=h.return}}if(Re=a,ar(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(io,e)}catch{}r=!0}return r}finally{ze=n,Jt.transition=t}}return!1}function of(e,t,n){t=hi(n,t),t=lp(e,t,1),e=Zn(e,t,1),t=Pt(),e!==null&&(gs(e,1,t),Lt(e,t))}function tt(e,t,n){if(e.tag===3)of(e,e,n);else for(;t!==null;){if(t.tag===3){of(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){e=hi(n,e),e=up(t,e,1),t=Zn(t,e,1),e=Pt(),t!==null&&(gs(t,1,e),Lt(t,e));break}}t=t.return}}function $0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,pt===e&&(yt&n)===n&&(ct===4||ct===3&&(yt&130023424)===yt&&500>st()-uc?br(e,0):lc|=n),Lt(e,t)}function Ap(e,t){t===0&&(e.mode&1?(t=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):t=1);var n=Pt();e=_n(e,t),e!==null&&(gs(e,t,n),Lt(e,n))}function G0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ap(e,n)}function W0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),Ap(e,n)}var Pp;Pp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ot.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,P0(e,t,n);It=!!(e.flags&131072)}else It=!1,Ke&&t.flags&1048576&&Rh(t,Ua,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sa(e,t),e=t.pendingProps;var a=ui(t,St.current);si(t,n),a=nc(null,t,r,e,a,n);var o=rc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(r)?(o=!0,Ga(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Xu(t),a.updater=fo,t.stateNode=a,a._reactInternals=t,ou(t,r,e,n),t=cu(null,t,r,!0,o,n)):(t.tag=0,Ke&&o&&Uu(t),At(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sa(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=V0(r),e=on(r,e),a){case 0:t=uu(null,t,r,e,n);break e;case 1:t=Qd(null,t,r,e,n);break e;case 11:t=Hd(null,t,r,e,n);break e;case 14:t=Yd(null,t,r,on(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),uu(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),Qd(e,t,r,a,n);case 3:e:{if(hp(t),e===null)throw Error(se(387));r=t.pendingProps,o=t.memoizedState,a=o.element,Lh(e,t),Ka(t,r,null,n);var c=t.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=hi(Error(se(423)),t),t=Xd(e,t,r,n,a);break e}else if(r!==a){a=hi(Error(se(424)),t),t=Xd(e,t,r,n,a);break e}else for(Ut=Xn(t.stateNode.containerInfo.firstChild),Vt=t,Ke=!0,un=null,n=Oh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ci(),r===a){t=Dn(e,t,n);break e}At(e,t,r,n)}t=t.child}return t;case 5:return $h(t),e===null&&iu(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,c=a.children,Jl(r,a)?c=null:o!==null&&Jl(r,o)&&(t.flags|=32),fp(e,t),At(e,t,c,n),t.child;case 6:return e===null&&iu(t),null;case 13:return pp(e,t,n);case 4:return Zu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=di(t,null,r,n):At(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),Hd(e,t,r,a,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,c=a.value,Ge(Va,r._currentValue),r._currentValue=c,o!==null)if(hn(o.value,c)){if(o.children===a.children&&!Ot.current){t=Dn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var h=o.dependencies;if(h!==null){c=o.child;for(var m=h.firstContext;m!==null;){if(m.context===r){if(o.tag===1){m=Nn(-1,n&-n),m.tag=2;var y=o.updateQueue;if(y!==null){y=y.shared;var S=y.pending;S===null?m.next=m:(m.next=S.next,S.next=m),y.pending=m}}o.lanes|=n,m=o.alternate,m!==null&&(m.lanes|=n),su(o.return,n,t),h.lanes|=n;break}m=m.next}}else if(o.tag===10)c=o.type===t.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(se(341));c.lanes|=n,h=c.alternate,h!==null&&(h.lanes|=n),su(c,n,t),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===t){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}At(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,si(t,n),a=tn(a),r=r(a),t.flags|=1,At(e,t,r,n),t.child;case 14:return r=t.type,a=on(r,t.pendingProps),a=on(r.type,a),Yd(e,t,r,a,n);case 15:return cp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),Sa(e,t),t.tag=1,zt(r)?(e=!0,Ga(t)):e=!1,si(t,n),op(t,r,a),ou(t,r,a,n),cu(null,t,r,!0,e,n);case 19:return mp(e,t,n);case 22:return dp(e,t,n)}throw Error(se(156,t.tag))};function _p(e,t){return ih(e,t)}function U0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(e,t,n,r){return new U0(e,t,n,r)}function hc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function V0(e){if(typeof e=="function")return hc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Du)return 11;if(e===Fu)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=Zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Na(e,t,n,r,a,o){var c=2;if(r=e,typeof e=="function")hc(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case Ur:return kr(n.children,a,o,t);case _u:c=8,a|=8;break;case _l:return e=Zt(12,n,t,a|2),e.elementType=_l,e.lanes=o,e;case Dl:return e=Zt(13,n,t,a),e.elementType=Dl,e.lanes=o,e;case Fl:return e=Zt(19,n,t,a),e.elementType=Fl,e.lanes=o,e;case $f:return mo(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zf:c=10;break e;case Lf:c=9;break e;case Du:c=11;break e;case Fu:c=14;break e;case Gn:c=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Zt(c,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function kr(e,t,n,r){return e=Zt(7,e,r,t),e.lanes=n,e}function mo(e,t,n,r){return e=Zt(22,e,r,t),e.elementType=$f,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return e=Zt(6,e,null,t),e.lanes=n,e}function Sl(e,t,n){return t=Zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q0(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sl(0),this.expirationTimes=sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function pc(e,t,n,r,a,o,c,h,m){return e=new q0(e,t,n,h,m),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Zt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xu(o),e}function K0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Dp(e){if(!e)return rr;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(zt(n))return Dh(e,n,t)}return t}function Fp(e,t,n,r,a,o,c,h,m){return e=pc(n,r,!0,e,a,o,c,h,m),e.context=Dp(null),n=e.current,r=Pt(),a=er(n),o=Nn(r,a),o.callback=t??null,Zn(n,o,a),e.current.lanes=a,gs(e,a,r),Lt(e,r),e}function go(e,t,n,r){var a=t.current,o=Pt(),c=er(a);return n=Dp(n),t.context===null?t.context=n:t.pendingContext=n,t=Nn(o,c),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zn(a,t,c),e!==null&&(fn(e,a,c,o),ka(e,a,c)),c}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mc(e,t){lf(e,t),(e=e.alternate)&&lf(e,t)}function H0(){return null}var Rp=typeof reportError=="function"?reportError:function(e){console.error(e)};function gc(e){this._internalRoot=e}yo.prototype.render=gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));go(e,t,null,null)};yo.prototype.unmount=gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nr(function(){go(null,e,null,null)}),t[Pn]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=dh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&hh(e)}};function yc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uf(){}function Y0(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var y=to(c);o.call(y)}}var c=Fp(t,r,e,0,null,!1,!1,"",uf);return e._reactRootContainer=c,e[Pn]=c.current,as(e.nodeType===8?e.parentNode:e),Nr(),c}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var h=r;r=function(){var y=to(m);h.call(y)}}var m=pc(e,0,!1,null,null,!1,!1,"",uf);return e._reactRootContainer=m,e[Pn]=m.current,as(e.nodeType===8?e.parentNode:e),Nr(function(){go(t,m,n,r)}),m}function xo(e,t,n,r,a){var o=n._reactRootContainer;if(o){var c=o;if(typeof a=="function"){var h=a;a=function(){var m=to(c);h.call(m)}}go(t,c,e,a)}else c=Y0(n,t,e,a,r);return to(c)}uh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$i(t.pendingLanes);n!==0&&(Bu(t,n|1),Lt(t,st()),!(Re&6)&&(pi=st()+500,ar()))}break;case 13:Nr(function(){var r=_n(e,1);if(r!==null){var a=Pt();fn(r,e,1,a)}}),mc(e,1)}};Iu=function(e){if(e.tag===13){var t=_n(e,134217728);if(t!==null){var n=Pt();fn(t,e,134217728,n)}mc(e,134217728)}};ch=function(e){if(e.tag===13){var t=er(e),n=_n(e,t);if(n!==null){var r=Pt();fn(n,e,t,r)}mc(e,t)}};dh=function(){return ze};fh=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};Wl=function(e,t,n){switch(t){case"input":if(Bl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=lo(r);if(!a)throw Error(se(90));Wf(r),Bl(r,a)}}}break;case"textarea":Vf(e,n);break;case"select":t=n.value,t!=null&&ti(e,!!n.multiple,t,!1)}};Zf=cc;Jf=Nr;var Q0={usingClientEntryPoint:!1,Events:[vs,Hr,lo,Qf,Xf,cc]},Bi={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X0={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nh(e),e===null?null:e.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||H0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{io=la.inject(X0),wn=la}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q0;Kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yc(t))throw Error(se(200));return K0(e,t,null,n)};Kt.createRoot=function(e,t){if(!yc(e))throw Error(se(299));var n=!1,r="",a=Rp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=pc(e,1,!1,null,null,n,!1,r,a),e[Pn]=t.current,as(e.nodeType===8?e.parentNode:e),new gc(t)};Kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=nh(t),e=e===null?null:e.stateNode,e};Kt.flushSync=function(e){return Nr(e)};Kt.hydrate=function(e,t,n){if(!vo(t))throw Error(se(200));return xo(null,e,t,!0,n)};Kt.hydrateRoot=function(e,t,n){if(!yc(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",c=Rp;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=Fp(t,null,e,1,n??null,a,!1,o,c),e[Pn]=t.current,as(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new yo(t)};Kt.render=function(e,t,n){if(!vo(t))throw Error(se(200));return xo(null,e,t,!1,n)};Kt.unmountComponentAtNode=function(e){if(!vo(e))throw Error(se(40));return e._reactRootContainer?(Nr(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Kt.unstable_batchedUpdates=cc;Kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vo(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return xo(e,t,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function Mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mp)}catch(e){console.error(e)}}Mp(),Mf.exports=Kt;var Z0=Mf.exports,Bp,cf=Z0;Bp=cf.createRoot,cf.hydrateRoot;function J0({userProgress:e,currentProfile:t,onStartBrushing:n,onViewCollection:r,onViewSettings:a,onSwitchProfile:o}){return u.jsxs("div",{className:"flex flex-col items-center justify-between h-full p-6 text-center",children:[u.jsxs("div",{className:"w-full flex justify-between items-center",children:[u.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-purple-800/50 hover:bg-purple-700/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:t.avatarColor},children:t.name.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-white font-medium",children:t.name}),u.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]}),u.jsx("button",{onClick:a,className:"p-2 text-2xl text-purple-300 hover:text-white transition-colors","aria-label":"Settings",children:""})]}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[u.jsx("div",{className:"animate-bounce-gentle",children:u.jsx("div",{className:"text-8xl mb-4",children:""})}),u.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-500 bg-clip-text text-transparent",children:"Sparkle Brush!"}),u.jsx("p",{className:"text-xl text-purple-200 max-w-xs",children:"Make your teeth sparkle and catch amazing creatures!"}),u.jsxs("div",{className:"flex gap-4 mt-4 text-lg",children:[u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),u.jsx("div",{className:"text-sm text-purple-300",children:"Day Streak"})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.capturedCreatures.length}),u.jsx("div",{className:"text-sm text-purple-300",children:"Creatures"})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.totalSessions}),u.jsx("div",{className:"text-sm text-purple-300",children:"Sessions"})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs pb-8",children:[u.jsx("button",{onClick:n,className:"w-full py-5 px-8 text-2xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg animate-button-glow active:scale-95 transition-transform",children:"Start Brushing! "}),u.jsx("button",{onClick:r,className:"w-full py-3 px-6 text-lg font-semibold text-purple-200 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"My Collection "})]})]})}const Ip=C.createContext(null);function ey({children:e}){const t=C.useRef(null),n=C.useRef(null),r=C.useRef(null),a=C.useRef(!1),o=C.useRef(null),[c,h]=C.useState(null),[m,y]=C.useState(!1),[S,j]=C.useState(null),E=C.useCallback(x=>{const b=x||t.current,B=r.current;if(console.log("[CameraContext] attachStreamToVideo called:",{hasVideo:!!b,hasStream:!!B,videoId:b==null?void 0:b.id,streamActive:B==null?void 0:B.active,streamTracks:B==null?void 0:B.getTracks().map(K=>({kind:K.kind,enabled:K.enabled,readyState:K.readyState})),isSameAsLastAttached:b===o.current}),!b||!B)return console.warn("[CameraContext] Video or stream not available"),!1;if(b.srcObject===B&&b===o.current)return console.log("[CameraContext] Stream already attached to this video element"),b.readyState>=2&&!b.paused&&y(!0),!0;try{console.log("[CameraContext] Attaching stream to video element..."),b.srcObject=B,o.current=b;const K=()=>{console.log("[CameraContext] Video can play, attempting to play..."),b.play().then(()=>{console.log("[CameraContext] Video playing successfully"),y(!0)}).catch(U=>{console.error("[CameraContext] Error playing video:",U)})};return b.oncanplay=K,b.onloadeddata=K,b.readyState>=3?K():b.load(),b.onerror=()=>{console.error("[CameraContext] Video element error"),j("Video element error")},!0}catch(K){return console.error("[CameraContext] Error attaching stream:",K),!1}},[]),G=C.useCallback(async()=>{if(a.current){console.log("startCamera already in progress, skipping...");return}if(r.current&&m){console.log("Camera already running and ready");return}if(r.current&&t.current){console.log("Stream exists, reattaching..."),E();return}if(r.current&&!t.current){console.log("Stream exists but no video element, waiting...");return}a.current=!0;try{j(null),y(!1),console.log("Requesting camera access...");const x=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("Camera access granted, tracks:",x.getVideoTracks().length),r.current=x,h(x),setTimeout(()=>{E(),a.current=!1},100)}catch(x){a.current=!1;let b="Failed to access camera";x instanceof Error&&(x.name==="NotAllowedError"?b="Camera permission denied. Please allow camera access.":x.name==="NotFoundError"?b="No camera found on this device.":x.name==="NotReadableError"?b="Camera is being used by another app.":b=x.message),j(b),console.error("Camera error:",x)}},[m,E]);C.useEffect(()=>{var x;console.log("[CameraContext] Stream/video effect:",{hasStream:!!c,hasVideoRef:!!t.current,videoSrcObject:!!((x=t.current)!=null&&x.srcObject),isReady:m}),!(!c||!t.current)&&(t.current.srcObject||(console.log("[CameraContext] Effect: video element needs stream attached"),E()))},[c,E,m]),C.useEffect(()=>{if(!c||m)return;const x=t.current;if(!x)return;const b=()=>x.readyState>=2&&x.videoWidth>0&&!x.paused?(console.log("Polling detected video is ready"),y(!0),!0):!1;if(b())return;const B=setInterval(()=>{b()&&clearInterval(B)},200),K=setTimeout(()=>{clearInterval(B)},5e3);return()=>{clearInterval(B),clearTimeout(K)}},[c,m]);const O=C.useCallback(()=>{console.log("Stopping camera..."),a.current=!1,r.current&&(r.current.getTracks().forEach(x=>{x.stop()}),r.current=null),h(null),y(!1),t.current&&(t.current.srcObject=null)},[]),M=C.useCallback(x=>{console.log("[CameraContext] registerVideoElement called:",{hasVideo:!!x,hasStream:!!r.current,isDifferentElement:x!==o.current}),x&&(t.current=x,r.current&&x!==o.current&&(console.log("[CameraContext] New video element detected, re-attaching stream..."),y(!1),E(x)))},[E]),Q=C.useCallback(()=>{if(!t.current)return null;const x=t.current;if(x.videoWidth===0||x.videoHeight===0)return null;n.current||(n.current=document.createElement("canvas"));const b=n.current;b.width=x.videoWidth,b.height=x.videoHeight;const B=b.getContext("2d");return B?(B.drawImage(x,0,0),b.toDataURL("image/jpeg",.8)):null},[]),w=C.useCallback(async x=>{if(!t.current)return null;const b=t.current;if(b.videoWidth===0||b.videoHeight===0)return null;const B=document.createElement("canvas");B.width=b.videoWidth,B.height=b.videoHeight;const K=B.getContext("2d");if(!K)return null;if(K.save(),K.translate(B.width,0),K.scale(-1,1),K.drawImage(b,0,0),K.restore(),x&&x.imageUrl)try{const U=new Image;U.crossOrigin="anonymous",await new Promise((ee,ie)=>{U.onload=()=>ee(),U.onerror=ie,U.src=x.imageUrl});const{x:I,y:V,size:H,rotation:z,flipX:N}=x;K.save(),K.translate(I,V),K.rotate(z*Math.PI/180),K.scale(N?-1:1,1),K.drawImage(U,-H/2,-H/2,H,H),K.restore()}catch(U){console.error("Failed to load buddy image for capture:",U)}return B.toDataURL("image/jpeg",.8)},[]);return C.useEffect(()=>()=>{r.current&&r.current.getTracks().forEach(x=>x.stop())},[]),u.jsx(Ip.Provider,{value:{videoRef:t,stream:c,isReady:m,error:S,startCamera:G,stopCamera:O,captureFrame:Q,captureFrameWithBuddy:w,registerVideoElement:M},children:e})}function wo(){const e=C.useContext(Ip);if(!e)throw new Error("useSharedCamera must be used within a CameraProvider");return e}function ty({onConfirm:e,onCancel:t}){const{isReady:n,error:r,startCamera:a,stopCamera:o,registerVideoElement:c}=wo(),[h,m]=C.useState(!1),[y,S]=C.useState(!1),j=C.useRef(!1),E=C.useRef(null),G=C.useCallback(w=>{console.log("[CameraCheck] Video ref callback:",{hasElement:!!w}),E.current=w,w&&c(w)},[c]);C.useEffect(()=>{j.current||(j.current=!0,a())},[a]),C.useEffect(()=>{const w=setTimeout(()=>{m(!0)},3e3);return()=>clearTimeout(w)},[]),C.useEffect(()=>{const w=()=>{const b=E.current;b&&b.videoWidth>0&&b.videoHeight>0&&!b.paused&&S(!0)},x=setInterval(w,200);return w(),()=>clearInterval(x)},[]);const O=()=>{o(),t()},M=()=>{j.current=!1,o(),setTimeout(()=>{j.current=!0,a()},500)},Q=n||y;return u.jsxs("div",{className:"flex flex-col h-full p-6",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Camera Check! "}),u.jsx("p",{className:"text-purple-200",children:"Make sure you can see yourself below"})]}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-purple-900/50 rounded-2xl overflow-hidden mb-4",children:[u.jsx("video",{ref:G,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),!Q&&!r&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-purple-900/80",children:[u.jsx("div",{className:"text-4xl mb-4 animate-bounce-gentle",children:""}),u.jsx("div",{className:"text-lg text-purple-200 animate-pulse",children:"Starting camera..."}),u.jsx("div",{className:"text-sm text-purple-300 mt-2",children:"Please allow camera access when prompted"})]}),r&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/80 p-4",children:[u.jsx("div",{className:"text-4xl mb-4",children:""}),u.jsx("div",{className:"text-lg font-bold text-white mb-2",children:"Camera Error"}),u.jsx("div",{className:"text-sm text-red-200 text-center mb-4",children:r}),u.jsxs("div",{className:"text-xs text-red-300 text-center",children:["Please check that:",u.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[u.jsx("li",{children:"Camera permissions are enabled"}),u.jsx("li",{children:"No other app is using the camera"}),u.jsx("li",{children:"Your browser supports camera access"})]})]})]}),Q&&u.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:u.jsxs("div",{className:"bg-green-600/90 rounded-full px-4 py-2 text-sm text-white flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Camera is working!"]})})]}),Q&&u.jsx("div",{className:"text-center text-purple-200 text-sm mb-4",children:"Can you see yourself? "})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[Q&&u.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Yes, I can see myself! "}),h&&!Q&&!r&&u.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Continue Anyway "}),r&&u.jsx("button",{onClick:M,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Try Again "}),u.jsx("button",{onClick:O,className:"w-full py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"Go Back"})]})]})}function ny(e){return{grassland:"Nature",coastal:"Water",lava:"Fire",city:"Electric",sky:"Air",all:"Cosmic"}[e]}const ry=[{id:"gear-bunny",name:"Cogbun",region:"grassland",rarity:"common",description:"A clockwork rabbit that hops with perfectly timed gear movements!",robotParts:["gear-ears","spring-legs","wind-up-tail"],monsterType:"rabbit",height:35,weight:2.5,series:1},{id:"mecha-moth",name:"Solarmoth",region:"grassland",rarity:"common",description:"Solar-powered wings let this moth fly day and night!",robotParts:["solar-wings","LED-antennae","sensor-eyes"],monsterType:"moth",height:15,weight:.3,series:1},{id:"vine-droid",name:"Circufern",region:"grassland",rarity:"common",description:"A plant monster with circuit-board leaves and fiber-optic vines!",robotParts:["circuit-leaves","fiber-vines","solar-flower"],monsterType:"plant",height:45,weight:3.2,series:1},{id:"robo-squirrel",name:"Nutronaut",region:"grassland",rarity:"common",description:"Stores acorns in its battery compartment for winter energy!",robotParts:["battery-cheeks","propeller-tail","scanner-eyes"],monsterType:"squirrel",height:25,weight:1.8,series:1},{id:"buzzer-bee",name:"Hexabuzz",region:"grassland",rarity:"common",description:"Makes digital honey that tastes like electricity!",robotParts:["helicopter-wings","stinger-USB","hexagon-body"],monsterType:"bee",height:12,weight:.4,series:1},{id:"pixel-fawn",name:"Emojidoe",region:"grassland",rarity:"common",description:"A young deer with spots that display different emojis!",robotParts:["LED-spots","antenna-ears","spring-hooves"],monsterType:"deer",height:85,weight:28,series:1},{id:"sprocket-snail",name:"Gearshell",region:"grassland",rarity:"common",description:"Slow but steady, leaves a trail of sparkly oil!",robotParts:["gear-shell","slime-coolant","eye-stalks"],monsterType:"snail",height:18,weight:1.2,series:1},{id:"flutter-bot",name:"Chromafly",region:"grassland",rarity:"common",description:"A butterfly with holographic wings that change colors!",robotParts:["holo-wings","nectar-scanner","micro-jets"],monsterType:"butterfly",height:20,weight:.5,series:1},{id:"thunder-stag",name:"Voltantler",region:"grassland",rarity:"rare",description:"Lightning crackles between its magnificent antenna-antlers!",robotParts:["tesla-antlers","chrome-hooves","capacitor-heart"],monsterType:"stag",height:180,weight:220,series:1},{id:"bloom-guardian",name:"Floratron",region:"grassland",rarity:"rare",description:"A gentle giant that protects the digital forest!",robotParts:["flower-sensors","bark-armor","root-cables"],monsterType:"treant",height:350,weight:800,series:1},{id:"prism-fox",name:"Spectravix",region:"grassland",rarity:"rare",description:"Its rainbow tail can split light into data streams!",robotParts:["prism-tail","laser-eyes","stealth-paws"],monsterType:"fox",height:65,weight:12,series:1},{id:"echo-owl",name:"Sonarhoot",region:"grassland",rarity:"rare",description:"Uses sonar to navigate and sing beautiful digital songs!",robotParts:["radar-dish-face","silent-rotors","night-vision"],monsterType:"owl",height:55,weight:4.5,series:1},{id:"natura-prime",name:"Seedatron",region:"grassland",rarity:"legendary",description:"The ancient guardian of all grassland creatures, born from the first seed and the first circuit!",robotParts:["world-tree-core","season-modulators","life-generators"],monsterType:"nature-titan",height:450,weight:1200,series:1},{id:"leaf-kong",name:"Foliape",region:"grassland",rarity:"legendary",description:"The mightiest grass-type warrior! His autumn leaf crown channels the power of all seasons, and his leaf armor is impenetrable!",robotParts:["autumn-crown","leaf-armor","vine-muscles","photosynthesis-core"],monsterType:"gorilla",height:280,weight:450,series:1},{id:"turbo-turtle",name:"Rocketoise",region:"coastal",rarity:"common",description:"Jet engines on its shell make this turtle surprisingly fast!",robotParts:["jet-shell","flipper-props","periscope-head"],monsterType:"turtle",height:75,weight:45,series:1},{id:"crank-crab",name:"Clawdraulic",region:"coastal",rarity:"common",description:"Hydraulic claws that can crush anything... gently!",robotParts:["hydraulic-claws","tank-treads","bubble-blaster"],monsterType:"crab",height:30,weight:5.5,series:1},{id:"wave-bot",name:"Sonafin",region:"coastal",rarity:"common",description:"A friendly fish with sonar that finds lost treasures!",robotParts:["sonar-array","propeller-tail","depth-gauge"],monsterType:"fish",height:40,weight:3.8,series:1},{id:"pearl-pup",name:"Shimmerseal",region:"coastal",rarity:"common",description:"A seal pup that produces synthetic pearls from its nose!",robotParts:["pearl-maker","flipper-jets","whisker-sensors"],monsterType:"seal",height:95,weight:38,series:1},{id:"coral-crawler",name:"Printopus",region:"coastal",rarity:"common",description:"Helps rebuild reefs with its 3D-printing tentacles!",robotParts:["printer-tentacles","mineral-scanner","glow-tips"],monsterType:"octopus",height:60,weight:18,series:1},{id:"shell-shock",name:"Voltcrab",region:"coastal",rarity:"common",description:"An electric hermit crab in a high-tech shell home!",robotParts:["smart-shell","shock-claws","wifi-antenna"],monsterType:"hermit-crab",height:22,weight:2.8,series:1},{id:"foam-flounder",name:"Hoverflat",region:"coastal",rarity:"common",description:"Flat as a pancake but full of bubbly personality!",robotParts:["hover-fins","camo-skin","sand-jets"],monsterType:"flounder",height:35,weight:4.2,series:1},{id:"anchor-pony",name:"Magnetail",region:"coastal",rarity:"common",description:"A seahorse that can anchor itself in any current!",robotParts:["magnetic-tail","stabilizer-fins","compass-snout"],monsterType:"seahorse",height:28,weight:1.5,series:1},{id:"storm-ray",name:"Voltamanta",region:"coastal",rarity:"rare",description:"Glides through storms and channels lightning through its wings!",robotParts:["wing-capacitors","storm-sensors","electric-tail"],monsterType:"manta-ray",height:120,weight:85,series:1},{id:"kraken-kit",name:"Tentabot",region:"coastal",rarity:"rare",description:"A baby kraken with adorable mechanical tentacles!",robotParts:["grapple-tentacles","ink-jets","depth-crusher"],monsterType:"kraken",height:200,weight:350,series:1},{id:"siren-synth",name:"Melodine",region:"coastal",rarity:"rare",description:"Sings synthesized songs that dolphins love!",robotParts:["voice-modulator","scale-LEDs","sonic-fins"],monsterType:"mermaid",height:165,weight:55,series:1},{id:"tide-titan",name:"Wavezilla",region:"coastal",rarity:"rare",description:"Controls the waves with its hydraulic arms!",robotParts:["wave-generators","pressure-suit","current-jets"],monsterType:"water-elemental",height:250,weight:420,series:1},{id:"ocean-emperor",name:"Leviatron",region:"coastal",rarity:"legendary",description:"The majestic ruler of all digital seas, part whale, part submarine, all awesome!",robotParts:["sonar-crown","reactor-heart","tidal-thrusters"],monsterType:"leviathan",height:1500,weight:8500,series:1},{id:"magma-core",name:"Molite",region:"lava",rarity:"common",description:"A golem with a nuclear reactor heart that glows orange!",robotParts:["reactor-core","heat-vents","lava-veins"],monsterType:"golem",height:150,weight:380,series:1},{id:"pyro-gecko",name:"Ignecko",region:"lava",rarity:"common",description:"Scurries across lava like it tickles its feet!",robotParts:["heat-pads","flame-tongue","thermal-tail"],monsterType:"gecko",height:22,weight:.8,series:1},{id:"ember-mech",name:"Rebootnix",region:"lava",rarity:"common",description:"A tiny phoenix robot that reboots instead of dying!",robotParts:["ignition-wings","ash-jets","rebirth-core"],monsterType:"phoenix",height:45,weight:4.5,series:1},{id:"forge-hound",name:"Smeltpup",region:"lava",rarity:"common",description:"A loyal dog that was born in a volcano factory!",robotParts:["furnace-belly","metal-fangs","smoke-tail"],monsterType:"hound",height:70,weight:32,series:1},{id:"cinder-snake",name:"Laviper",region:"lava",rarity:"common",description:"Slithers through magma tubes delivering messages!",robotParts:["heat-scales","drill-head","exhaust-rattle"],monsterType:"snake",height:180,weight:15,series:1},{id:"slag-slime",name:"Slagoo",region:"lava",rarity:"common",description:"A metallic slime that eats volcanic rocks for breakfast!",robotParts:["molten-body","mineral-detector","heat-sink"],monsterType:"slime",height:35,weight:8.5,series:1},{id:"coal-critter",name:"Embrite",region:"lava",rarity:"common",description:"Glows brighter the happier it gets!",robotParts:["ember-eyes","carbon-shell","spark-plugs"],monsterType:"coal-creature",height:28,weight:3.2,series:1},{id:"blast-bat",name:"Thermowing",region:"lava",rarity:"common",description:"Navigates cave systems using thermal imaging!",robotParts:["thermal-sonar","jet-wings","heat-shield"],monsterType:"bat",height:38,weight:2.1,series:1},{id:"volcano-drake",name:"Rocketdrake",region:"lava",rarity:"rare",description:"A young dragon with rocket boosters for wings!",robotParts:["rocket-wings","plasma-breath","armored-scales"],monsterType:"dragon",height:220,weight:380,series:1},{id:"obsidian-knight",name:"Glasslord",region:"lava",rarity:"rare",description:"A warrior forged from volcanic glass and steel!",robotParts:["glass-armor","magma-sword","heat-shield"],monsterType:"knight",height:195,weight:180,series:1},{id:"inferno-djinn",name:"Blazenie",region:"lava",rarity:"rare",description:"Grants wishes... if they involve fire or explosions!",robotParts:["flame-core","smoke-generator","wish-processor"],monsterType:"djinn",height:175,weight:65,series:1},{id:"molten-mammoth",name:"Magmamoth",region:"lava",rarity:"rare",description:"An ancient beast awakened by volcanic activity!",robotParts:["lava-tusks","furnace-trunk","magma-hooves"],monsterType:"mammoth",height:380,weight:2800,series:1},{id:"infernal-titan",name:"Eruptor",region:"lava",rarity:"legendary",description:"Born from the planets core, this titan IS the volcano! Speaks in eruptions!",robotParts:["planetary-core","tectonic-arms","eruption-crown"],monsterType:"fire-titan",height:850,weight:12e3,series:1},{id:"neon-rat",name:"Glowrat",region:"city",rarity:"common",description:"Covered in LED strips, the coolest rat in the city!",robotParts:["LED-fur","wire-tail","hacker-teeth"],monsterType:"rat",height:25,weight:1.2,series:1},{id:"holo-hound",name:"Projepup",region:"city",rarity:"common",description:"A loyal dog that can project holograms from its collar!",robotParts:["holo-projector","cyber-snout","data-collar"],monsterType:"dog",height:65,weight:22,series:1},{id:"glitch-cat",name:"Errorkat",region:"city",rarity:"common",description:"Sometimes its face displays error messages when confused!",robotParts:["screen-face","static-fur","USB-tail"],monsterType:"cat",height:35,weight:5.5,series:1},{id:"drone-pigeon",name:"Copteroo",region:"city",rarity:"common",description:"Delivers packages and breadcrumbs across the city!",robotParts:["rotor-wings","GPS-beak","cargo-feet"],monsterType:"pigeon",height:32,weight:1.8,series:1},{id:"trash-panda-bot",name:"Recycloon",region:"city",rarity:"common",description:"A raccoon that sorts recycling with perfect efficiency!",robotParts:["scanner-mask","grabber-paws","compactor-tail"],monsterType:"raccoon",height:55,weight:12,series:1},{id:"pixel-roach",name:"Survibug",region:"city",rarity:"common",description:"Unkillable, adorable, and surprisingly helpful!",robotParts:["hardened-shell","antenna-wifi","survival-core"],monsterType:"cockroach",height:8,weight:.15,series:1},{id:"subway-worm",name:"Metrorm",region:"city",rarity:"common",description:"Lives in the tunnels and knows every shortcut!",robotParts:["tunnel-drill","track-wheels","light-segments"],monsterType:"worm",height:250,weight:85,series:1},{id:"vending-mimic",name:"Snackritter",region:"city",rarity:"common",description:"Looks like a vending machine, gives out free snacks!",robotParts:["dispenser-mouth","coin-eyes","snack-storage"],monsterType:"mimic",height:185,weight:120,series:1},{id:"cyber-sphinx",name:"Riddletron",region:"city",rarity:"rare",description:"Asks riddles that require programming knowledge!",robotParts:["riddle-processor","sphinx-sensors","data-wings"],monsterType:"sphinx",height:180,weight:250,series:1},{id:"neon-dragon",name:"Glodragon",region:"city",rarity:"rare",description:"A serpentine dragon made of pure light and code!",robotParts:["light-body","firework-breath","parade-float"],monsterType:"dragon",height:300,weight:150,series:1},{id:"billboard-beast",name:"Adzilla",region:"city",rarity:"rare",description:"A giant creature covered in animated advertisements!",robotParts:["screen-skin","speaker-roar","spotlight-eyes"],monsterType:"kaiju",height:450,weight:3500,series:1},{id:"data-phantom",name:"Bytespook",region:"city",rarity:"rare",description:"A ghost in the machine, literally!",robotParts:["hologram-body","virus-touch","firewall-cloak"],monsterType:"ghost",height:165,weight:.01,series:1},{id:"metro-mind",name:"Urbatron",region:"city",rarity:"legendary",description:"The consciousness of the entire city! Knows everyones favorite pizza topping!",robotParts:["city-brain","infrastructure-body","network-soul"],monsterType:"city-spirit",height:500,weight:.1,series:1},{id:"propeller-pup",name:"Copterpup",region:"sky",rarity:"common",description:"An adorable puppy with helicopter ears!",robotParts:["rotor-ears","fluffy-jets","tail-rudder"],monsterType:"puppy",height:40,weight:6.5,series:1},{id:"cloud-crawler",name:"Nimbusweb",region:"sky",rarity:"common",description:"A spider that weaves webs between clouds!",robotParts:["balloon-body","silk-cables","weather-sensors"],monsterType:"spider",height:25,weight:.8,series:1},{id:"zephyr-bunny",name:"Breezebun",region:"sky",rarity:"common",description:"Hops on air currents like invisible stairs!",robotParts:["air-jets","wind-ears","bounce-stabilizers"],monsterType:"bunny",height:30,weight:2.2,series:1},{id:"nimbus-kitten",name:"Thunderpurr",region:"sky",rarity:"common",description:"A fluffy cloud cat that purrs like thunder!",robotParts:["cloud-fur","lightning-whiskers","rain-paws"],monsterType:"kitten",height:28,weight:3.5,series:1},{id:"glider-squirrel",name:"Parasquir",region:"sky",rarity:"common",description:"Has built-in parachutes for safe landings!",robotParts:["wing-membranes","acorn-radar","air-brakes"],monsterType:"flying-squirrel",height:22,weight:1.4,series:1},{id:"breeze-bird",name:"Synthrobin",region:"sky",rarity:"common",description:"A songbird with voice synthesizers!",robotParts:["speaker-beak","antenna-crest","solar-feathers"],monsterType:"songbird",height:18,weight:.6,series:1},{id:"balloon-jellyfish",name:"Zeppling",region:"sky",rarity:"common",description:"Floats serenely and glows at night!",robotParts:["helium-bell","LED-tentacles","altitude-sensors"],monsterType:"jellyfish",height:55,weight:2.8,series:1},{id:"kite-ray",name:"Windmanta",region:"sky",rarity:"common",description:"Rides wind currents like a living kite!",robotParts:["sail-wings","string-tail","wind-reader"],monsterType:"ray",height:85,weight:12,series:1},{id:"thunder-hawk",name:"Teslagle",region:"sky",rarity:"rare",description:"An eagle with tesla coils for feathers!",robotParts:["tesla-feathers","storm-eyes","lightning-talons"],monsterType:"eagle",height:95,weight:8.5,series:1},{id:"aurora-serpent",name:"Prismdrake",region:"sky",rarity:"rare",description:"A sky snake that paints the northern lights!",robotParts:["prism-scales","light-projectors","aurora-core"],monsterType:"serpent",height:450,weight:85,series:1},{id:"star-whale",name:"Cosmolub",region:"sky",rarity:"rare",description:"Swims through clouds and sings to satellites!",robotParts:["cosmic-blubber","satellite-song","nebula-spout"],monsterType:"whale",height:1200,weight:4500,series:1},{id:"wind-djinn",name:"Gustenie",region:"sky",rarity:"rare",description:"Controls the winds and grants flight wishes!",robotParts:["vortex-body","gust-generators","wish-turbine"],monsterType:"djinn",height:185,weight:35,series:1},{id:"celestial-phoenix",name:"Solarnix",region:"sky",rarity:"legendary",description:"A magnificent bird made of starlight and solar winds! Said to grant eternal good dental hygiene!",robotParts:["solar-sail-wings","fusion-heart","cosmic-tail"],monsterType:"cosmic-phoenix",height:320,weight:125,series:1}],iy=[{id:"s2-moss-mole",name:"Tunnelsprout",region:"grassland",rarity:"common",description:"Digs through soil with drill-nose and plants seeds wherever it goes!",robotParts:["drill-snout","root-claws","seed-dispenser"],monsterType:"mole",height:28,weight:3.5,series:2},{id:"s2-crystal-caterpillar",name:"Prismapillar",region:"grassland",rarity:"common",description:"Each segment is a different colored crystal that chimes when it moves!",robotParts:["crystal-segments","rainbow-sensors","gem-feet"],monsterType:"crystal-caterpillar",height:20,weight:1.8,series:2},{id:"s2-hedge-hog",name:"Thorntank",region:"grassland",rarity:"common",description:"A tiny tank disguised as a hedgehog! Its spines are actually antennae!",robotParts:["antenna-spines","tread-feet","leaf-camo"],monsterType:"hedgehog",height:18,weight:2.2,series:2},{id:"s2-pollen-bot",name:"Sneezeling",region:"grassland",rarity:"common",description:"Spreads joy and pollen! Everyone near it starts giggling!",robotParts:["pollen-jets","flower-head","giggle-generator"],monsterType:"pollen-sprite",height:15,weight:.5,series:2},{id:"s2-grass-slime",name:"Meadowgoo",region:"grassland",rarity:"common",description:"A jiggly slime that absorbs nutrients from the grass and glows green!",robotParts:["chlorophyll-core","sticky-membrane","photosynthesis-nodes"],monsterType:"grass-slime",height:25,weight:4,series:2},{id:"s2-acorn-knight",name:"Oakling",region:"grassland",rarity:"common",description:"A tiny warrior born from an enchanted acorn! Very brave!",robotParts:["acorn-helmet","twig-sword","leaf-shield"],monsterType:"acorn-warrior",height:12,weight:.8,series:2},{id:"s2-daisy-drone",name:"Petalcopter",region:"grassland",rarity:"common",description:"Petals spin like helicopter blades! Smells amazing!",robotParts:["petal-rotors","stem-body","nectar-tank"],monsterType:"flower-drone",height:22,weight:.9,series:2},{id:"s2-cricket-bot",name:"Chiptune",region:"grassland",rarity:"common",description:"Chirps in 8-bit melodies! A favorite among retro fans!",robotParts:["speaker-legs","antenna-mixer","sound-chip"],monsterType:"cricket",height:8,weight:.2,series:2},{id:"s2-emerald-elk",name:"Crystalope",region:"grassland",rarity:"rare",description:"Its antlers are pure emerald crystal that can heal other creatures!",robotParts:["emerald-antlers","healing-aura","forest-camo"],monsterType:"crystal-elk",height:210,weight:280,series:2},{id:"s2-mushroom-giant",name:"Sporegiant",region:"grassland",rarity:"rare",description:"A gentle giant made of interconnected mushrooms and circuits!",robotParts:["spore-network","mycelium-cables","cap-sensor"],monsterType:"mushroom-golem",height:400,weight:650,series:2},{id:"s2-willow-wisp",name:"Ghostweep",region:"grassland",rarity:"rare",description:"A spirit that lives in willow trees and guides lost travelers!",robotParts:["spectral-core","branch-tendrils","guide-light"],monsterType:"tree-spirit",height:150,weight:8,series:2},{id:"s2-mega-slime",name:"Blobzilla",region:"grassland",rarity:"rare",description:"The king of all grass slimes! Can split into smaller slimes!",robotParts:["nucleus-core","division-matrix","absorption-membrane"],monsterType:"mega-slime",height:200,weight:500,series:2},{id:"s2-crystal-guardian",name:"Geodiatron",region:"grassland",rarity:"legendary",description:"Born from the heart of a crystal cave that grew into the meadow! Protects all gem-type creatures!",robotParts:["diamond-core","crystal-wings","geode-armor"],monsterType:"crystal-titan",height:500,weight:1800,series:2},{id:"s2-nature-computer",name:"Motherboard",region:"grassland",rarity:"legendary",description:"A sentient supercomputer that became one with nature! Processes photosynthesis data!",robotParts:["bio-processors","vine-cables","solar-RAM"],monsterType:"nature-AI",height:320,weight:890,series:2},{id:"s2-sand-dollar-bot",name:"Coinfish",region:"coastal",rarity:"common",description:"Collects shiny things and stores them in its flat body!",robotParts:["coin-body","magnet-sensors","treasure-storage"],monsterType:"sand-dollar",height:15,weight:.8,series:2},{id:"s2-crystal-urchin",name:"Sparkspine",region:"coastal",rarity:"common",description:"Every spine is a different colored crystal that lights up!",robotParts:["crystal-spines","LED-core","water-sensors"],monsterType:"crystal-urchin",height:20,weight:2.5,series:2},{id:"s2-bubble-blob",name:"Foamgoo",region:"coastal",rarity:"common",description:"A slime made entirely of ocean foam! Very bubbly personality!",robotParts:["bubble-matrix","foam-generator","salt-filter"],monsterType:"foam-slime",height:35,weight:1.2,series:2},{id:"s2-starfish-drone",name:"Pentabot",region:"coastal",rarity:"common",description:"Can detach its arms to explore five places at once!",robotParts:["detach-arms","regrow-core","multi-eyes"],monsterType:"starfish",height:40,weight:3,series:2},{id:"s2-barnacle-cluster",name:"Clingtron",region:"coastal",rarity:"common",description:"A friendly barnacle colony that hitchhikes on bigger creatures!",robotParts:["suction-bases","filter-feeders","colony-mind"],monsterType:"barnacle",height:12,weight:1.5,series:2},{id:"s2-kelp-dancer",name:"Swayling",region:"coastal",rarity:"common",description:"Dances with the currents and creates beautiful underwater ballets!",robotParts:["ribbon-fronds","current-sensors","anchor-root"],monsterType:"kelp-creature",height:180,weight:12,series:2},{id:"s2-puffer-tank",name:"Spikeball",region:"coastal",rarity:"common",description:"Inflates into a spiky ball when scared! Very round!",robotParts:["inflate-bladder","spike-array","pressure-gauge"],monsterType:"pufferfish",height:25,weight:2.8,series:2},{id:"s2-anemone-bot",name:"Tickletips",region:"coastal",rarity:"common",description:"Its tentacles give gentle tickles instead of stings!",robotParts:["tickle-tentacles","root-anchor","happiness-sensors"],monsterType:"anemone",height:30,weight:4.5,series:2},{id:"s2-pearl-dragon",name:"Lusterwyrm",region:"coastal",rarity:"rare",description:"A serpentine dragon covered in iridescent pearl scales!",robotParts:["pearl-scales","rainbow-breath","tide-fins"],monsterType:"pearl-dragon",height:350,weight:200,series:2},{id:"s2-giant-clam",name:"Shellfortress",region:"coastal",rarity:"rare",description:"Houses an entire ecosystem inside its massive shell!",robotParts:["fortress-shell","ecosystem-core","pearl-generator"],monsterType:"mega-clam",height:280,weight:1200,series:2},{id:"s2-coral-golem",name:"Reefrock",region:"coastal",rarity:"rare",description:"A walking coral reef! Hundreds of tiny creatures live on it!",robotParts:["coral-armor","habitat-zones","calcium-core"],monsterType:"coral-golem",height:300,weight:950,series:2},{id:"s2-crystal-shark",name:"Diamondjaw",region:"coastal",rarity:"rare",description:"Teeth made of pure crystal! Hunts by refracting light!",robotParts:["crystal-teeth","prism-eyes","stealth-fins"],monsterType:"crystal-shark",height:280,weight:450,series:2},{id:"s2-deep-crystal",name:"Abyssalith",region:"coastal",rarity:"legendary",description:"A massive crystal formation from the deepest trench! Glows with ancient power!",robotParts:["abyss-core","pressure-crystal","bioluminescence-array"],monsterType:"deep-crystal-titan",height:1200,weight:15e3,series:2},{id:"s2-ember-sprite",name:"Flickerling",region:"lava",rarity:"common",description:"A tiny fire spirit that loves to dance in flames!",robotParts:["flame-body","spark-wings","ember-heart"],monsterType:"fire-sprite",height:15,weight:.3,series:2},{id:"s2-ruby-beetle",name:"Garnix",region:"lava",rarity:"common",description:"Shell made of heat-formed rubies! Very fashionable!",robotParts:["ruby-shell","gem-horns","heat-legs"],monsterType:"crystal-beetle",height:18,weight:3.2,series:2},{id:"s2-lava-slime",name:"Magmagoo",region:"lava",rarity:"common",description:"A slime made of liquid rock! Surprisingly cuddly if you have heat shields!",robotParts:["magma-body","heat-core","cooling-membrane"],monsterType:"lava-slime",height:40,weight:85,series:2},{id:"s2-smoke-puff",name:"Ashling",region:"lava",rarity:"common",description:"A creature made of volcanic ash that changes shape constantly!",robotParts:["ash-cloud-body","ember-eyes","smoke-trail"],monsterType:"ash-creature",height:50,weight:2.5,series:2},{id:"s2-fire-ant",name:"Inferant",region:"lava",rarity:"common",description:"Works in colonies to build amazing fire sculptures!",robotParts:["heat-mandibles","forge-abdomen","colony-link"],monsterType:"fire-ant",height:5,weight:.05,series:2},{id:"s2-sulfur-frog",name:"Brimhop",region:"lava",rarity:"common",description:"Hops across lava pools! Its tongue catches fire flies!",robotParts:["heat-pads","flame-tongue","sulfur-skin"],monsterType:"volcanic-frog",height:22,weight:1.8,series:2},{id:"s2-obsidian-crab",name:"Glassback",region:"lava",rarity:"common",description:"Shell forms from cooled lava! Cracks and reforms constantly!",robotParts:["glass-shell","lava-claws","thermal-sensors"],monsterType:"obsidian-crab",height:28,weight:8.5,series:2},{id:"s2-spark-lizard",name:"Igniscale",region:"lava",rarity:"common",description:"Leaves trails of sparks wherever it runs!",robotParts:["spark-scales","ember-tail","heat-vision"],monsterType:"spark-lizard",height:35,weight:4.2,series:2},{id:"s2-ruby-serpent",name:"Crimsoncoil",region:"lava",rarity:"rare",description:"A snake made entirely of linked ruby crystals!",robotParts:["ruby-segments","gem-fangs","heat-rattle"],monsterType:"crystal-snake",height:400,weight:120,series:2},{id:"s2-forge-titan",name:"Anvillion",region:"lava",rarity:"rare",description:"A giant that forges weapons for legendary creatures!",robotParts:["anvil-arms","forge-heart","hammer-fists"],monsterType:"forge-giant",height:450,weight:2200,series:2},{id:"s2-fire-elemental",name:"Blazeborn",region:"lava",rarity:"rare",description:"Pure fire given consciousness and a playful personality!",robotParts:["plasma-core","flame-limbs","heat-aura"],monsterType:"fire-elemental",height:280,weight:45,series:2},{id:"s2-crystal-wyrm",name:"Carbuncle",region:"lava",rarity:"rare",description:"A dragon that breathes crystal shards instead of fire!",robotParts:["crystal-breath","gem-scales","mineral-wings"],monsterType:"crystal-dragon",height:320,weight:580,series:2},{id:"s2-planet-core",name:"Geothermia",region:"lava",rarity:"legendary",description:"A sentient piece of the planets inner core! Contains the heat of a thousand volcanoes!",robotParts:["core-fragment","magma-veins","planetary-heart"],monsterType:"core-titan",height:680,weight:25e3,series:2},{id:"s2-wifi-moth",name:"Signalfly",region:"city",rarity:"common",description:"Attracted to wifi signals instead of light!",robotParts:["antenna-wings","signal-sensors","data-dust"],monsterType:"wifi-moth",height:12,weight:.2,series:2},{id:"s2-graffiti-goo",name:"Spraygoo",region:"city",rarity:"common",description:"A slime that leaves colorful art wherever it slides!",robotParts:["paint-body","nozzle-tips","art-AI"],monsterType:"paint-slime",height:30,weight:5.5,series:2},{id:"s2-traffic-cone",name:"Conebot",region:"city",rarity:"common",description:"Actually a creature! Directs traffic and loves the job!",robotParts:["reflective-shell","warning-lights","direction-sensors"],monsterType:"traffic-creature",height:75,weight:8,series:2},{id:"s2-parking-meter",name:"Ticketron",region:"city",rarity:"common",description:"A friendly meter that sometimes forgives expired time!",robotParts:["coin-slot","timer-brain","mercy-protocol"],monsterType:"meter-creature",height:120,weight:35,series:2},{id:"s2-crystal-mouse",name:"Diamice",region:"city",rarity:"common",description:"A mouse with crystal fur! Squeaks in musical tones!",robotParts:["crystal-fur","gem-eyes","treasure-sense"],monsterType:"crystal-mouse",height:10,weight:.4,series:2},{id:"s2-manhole-mimic",name:"Coverling",region:"city",rarity:"common",description:"Looks like a manhole cover but pops up to say hi!",robotParts:["metal-shell","peek-eyes","underground-legs"],monsterType:"manhole-creature",height:15,weight:45,series:2},{id:"s2-street-lamp",name:"Luminos",region:"city",rarity:"common",description:"A street lamp that walks around lighting dark corners!",robotParts:["bulb-head","post-body","light-heart"],monsterType:"lamp-creature",height:350,weight:150,series:2},{id:"s2-bubble-bot",name:"Soapling",region:"city",rarity:"common",description:"Escaped from a car wash and now spreads cleanliness everywhere!",robotParts:["soap-dispenser","bubble-blower","scrub-arms"],monsterType:"soap-creature",height:45,weight:12,series:2},{id:"s2-arcade-boss",name:"Pixelord",region:"city",rarity:"rare",description:"Escaped from an arcade machine! Still thinks life is a game!",robotParts:["pixel-body","game-logic","power-up-core"],monsterType:"arcade-creature",height:200,weight:85,series:2},{id:"s2-skyscraper-golem",name:"Towerrock",region:"city",rarity:"rare",description:"A building that woke up! Very slow but very friendly!",robotParts:["concrete-body","window-eyes","elevator-heart"],monsterType:"building-golem",height:800,weight:5e4,series:2},{id:"s2-crystal-spider",name:"Webgem",region:"city",rarity:"rare",description:"Spins webs made of crystal threads! Beautiful but strong!",robotParts:["crystal-spinnerets","gem-legs","prism-eyes"],monsterType:"crystal-spider",height:150,weight:45,series:2},{id:"s2-junk-dragon",name:"Scrapling",region:"city",rarity:"rare",description:"A dragon made entirely of recycled junk! Eco-friendly!",robotParts:["scrap-wings","junk-breath","recycle-heart"],monsterType:"junk-dragon",height:350,weight:420,series:2},{id:"s2-internet-spirit",name:"Webweaver",region:"city",rarity:"legendary",description:"The collective spirit of the entire internet! Knows every meme ever made!",robotParts:["data-stream-body","meme-core","connection-web"],monsterType:"internet-spirit",height:400,weight:.001,series:2},{id:"s2-paper-plane",name:"Foldwing",region:"sky",rarity:"common",description:"A living origami plane! Loves doing loop-de-loops!",robotParts:["paper-body","fold-wings","wind-rider"],monsterType:"paper-creature",height:25,weight:.1,series:2},{id:"s2-cloud-slime",name:"Fluffgoo",region:"sky",rarity:"common",description:"A slime made of condensed cloud! Super soft and floaty!",robotParts:["vapor-body","rain-core","lightning-sparks"],monsterType:"cloud-slime",height:60,weight:.5,series:2},{id:"s2-crystal-hummingbird",name:"Shimmerzip",region:"sky",rarity:"common",description:"Wings made of thin crystal sheets that sing when it flies!",robotParts:["crystal-wings","nectar-beak","hover-motors"],monsterType:"crystal-hummingbird",height:10,weight:.15,series:2},{id:"s2-sky-fish",name:"Aerofin",region:"sky",rarity:"common",description:"A fish that swims through air! Confused but happy!",robotParts:["air-gills","sky-fins","altitude-bladder"],monsterType:"sky-fish",height:45,weight:3.5,series:2},{id:"s2-feather-sprite",name:"Plumeling",region:"sky",rarity:"common",description:"Made entirely of floating feathers held together by magic!",robotParts:["feather-body","wind-core","soft-aura"],monsterType:"feather-sprite",height:20,weight:.2,series:2},{id:"s2-sunset-moth",name:"Duskwing",region:"sky",rarity:"common",description:"Only appears at sunset! Wings display the evening colors!",robotParts:["sunset-wings","twilight-sensors","dusk-dust"],monsterType:"sunset-moth",height:18,weight:.25,series:2},{id:"s2-rainbow-blob",name:"Prismgoo",region:"sky",rarity:"common",description:"A slime that refracts sunlight into beautiful rainbows!",robotParts:["rainbow-body","light-absorption","color-shift"],monsterType:"rainbow-slime",height:35,weight:2.8,series:2},{id:"s2-wind-chime",name:"Tinkling",region:"sky",rarity:"common",description:"A creature made of floating crystals that chime in the wind!",robotParts:["chime-crystals","wind-sensors","melody-core"],monsterType:"wind-chime-creature",height:40,weight:1.5,series:2},{id:"s2-storm-giant",name:"Thundercoil",region:"sky",rarity:"rare",description:"A massive creature made of storm clouds and lightning!",robotParts:["storm-body","lightning-veins","thunder-heart"],monsterType:"storm-giant",height:600,weight:200,series:2},{id:"s2-crystal-griffin",name:"Gemtalon",region:"sky",rarity:"rare",description:"A majestic griffin with crystal feathers and gem-encrusted claws!",robotParts:["crystal-wings","gem-claws","diamond-beak"],monsterType:"crystal-griffin",height:280,weight:180,series:2},{id:"s2-aurora-whale",name:"Borealisk",region:"sky",rarity:"rare",description:"A massive sky whale that creates aurora borealis as it swims!",robotParts:["aurora-skin","polar-heart","light-spout"],monsterType:"aurora-whale",height:1500,weight:3500,series:2},{id:"s2-moon-moth",name:"Lunawing",region:"sky",rarity:"rare",description:"Only visible during full moons! Grants wishes to believers!",robotParts:["moonbeam-wings","lunar-dust","wish-antenna"],monsterType:"moon-moth",height:120,weight:8,series:2},{id:"s2-sky-leviathan",name:"Aethermaw",region:"sky",rarity:"legendary",description:"The ancient guardian of the upper atmosphere! Swallows storms to protect the land below!",robotParts:["storm-stomach","cloud-fins","atmosphere-core"],monsterType:"sky-leviathan",height:2500,weight:8e3,series:2}],sy=[{id:"s3-phantom-rabbit",name:"Ghosthop",region:"grassland",rarity:"common",description:"A spectral bunny that phases through solid objects!",robotParts:["ecto-ears","phase-legs","spirit-fluff"],monsterType:"phantom-rabbit",height:30,weight:.1,series:3},{id:"s3-dino-beetle",name:"Trilobot",region:"grassland",rarity:"common",description:"An ancient trilobite brought back with robot technology!",robotParts:["fossil-shell","ancient-sensors","primitive-legs"],monsterType:"mecha-trilobite",height:25,weight:4.5,series:3},{id:"s3-ghost-flower",name:"Spectrabloom",region:"grassland",rarity:"common",description:"A flower spirit that only blooms in moonlight!",robotParts:["petal-ecto","ghost-pollen","spirit-stem"],monsterType:"phantom-flower",height:35,weight:.05,series:3},{id:"s3-mini-raptor",name:"Velocibyte",region:"grassland",rarity:"common",description:"A tiny raptor with incredible processing speed!",robotParts:["cyber-claws","speed-legs","hunt-AI"],monsterType:"mecha-raptor",height:60,weight:18,series:3},{id:"s3-wisp-bug",name:"Glimmergeist",region:"grassland",rarity:"common",description:"A ghostly firefly that lights the way for lost souls!",robotParts:["spirit-glow","phase-wings","guide-light"],monsterType:"phantom-firefly",height:8,weight:.01,series:3},{id:"s3-fossil-frog",name:"Cretacehopper",region:"grassland",rarity:"common",description:"A prehistoric frog preserved in amber and reactivated!",robotParts:["amber-skin","ancient-tongue","fossil-hop"],monsterType:"ancient-frog",height:20,weight:1.5,series:3},{id:"s3-shade-snake",name:"Spectherp",region:"grassland",rarity:"common",description:"A ghostly serpent that slithers between dimensions!",robotParts:["shadow-scales","phase-fangs","dimension-rattle"],monsterType:"phantom-snake",height:150,weight:.5,series:3},{id:"s3-dino-chick",name:"Chickosaurus",region:"grassland",rarity:"common",description:"A baby dinosaur with fluffy proto-feathers and robot parts!",robotParts:["proto-feathers","tiny-claws","chirp-speaker"],monsterType:"baby-dinosaur",height:35,weight:5,series:3},{id:"s3-phantom-stag",name:"Spectralbuck",region:"grassland",rarity:"rare",description:"A majestic ghost deer! Its antlers glow with otherworldly light!",robotParts:["ecto-antlers","spirit-hooves","phantom-heart"],monsterType:"phantom-stag",height:200,weight:15,series:3},{id:"s3-tricerabot",name:"Tritanium",region:"grassland",rarity:"rare",description:"A full-sized triceratops with titanium horns!",robotParts:["titanium-horns","armor-frill","charge-legs"],monsterType:"mecha-triceratops",height:350,weight:6e3,series:3},{id:"s3-ghost-treant",name:"Hollowoak",region:"grassland",rarity:"rare",description:"The spirit of an ancient tree! Still protects the forest!",robotParts:["spirit-bark","ghost-roots","phantom-leaves"],monsterType:"phantom-treant",height:500,weight:50,series:3},{id:"s3-stego-tank",name:"Stegotron",region:"grassland",rarity:"rare",description:"A stegosaurus with solar panel plates on its back!",robotParts:["solar-plates","spike-tail","armor-body"],monsterType:"mecha-stegosaurus",height:400,weight:4500,series:3},{id:"s3-spirit-king",name:"Phantomarch",region:"grassland",rarity:"legendary",description:"The ruler of all grass-type phantoms! Guides spirits to peace!",robotParts:["crown-ecto","royal-aura","peace-scepter"],monsterType:"phantom-king",height:380,weight:5,series:3},{id:"s3-brachiobot",name:"Titaneck",region:"grassland",rarity:"legendary",description:"A towering brachiosaurus with a neck full of advanced tech!",robotParts:["tower-neck","radar-head","titan-legs"],monsterType:"mecha-brachiosaurus",height:1500,weight:35e3,series:3},{id:"s3-ghost-fish",name:"Spectralfin",region:"coastal",rarity:"common",description:"A transparent ghostly fish! You can see right through it!",robotParts:["ecto-scales","phase-fins","spirit-gills"],monsterType:"phantom-fish",height:30,weight:.1,series:3},{id:"s3-ammonite-bot",name:"Spiralshell",region:"coastal",rarity:"common",description:"An ancient ammonite brought back with propulsion jets!",robotParts:["spiral-shell","jet-siphon","ancient-eyes"],monsterType:"mecha-ammonite",height:80,weight:25,series:3},{id:"s3-phantom-crab",name:"Ghostpinch",region:"coastal",rarity:"common",description:"A spectral crab! Its claws phase through matter!",robotParts:["ecto-claws","phantom-shell","spirit-legs"],monsterType:"phantom-crab",height:25,weight:.2,series:3},{id:"s3-dunkle-pup",name:"Dunklebot",region:"coastal",rarity:"common",description:"A baby Dunkleosteus with armored jaws!",robotParts:["armor-jaws","plate-head","ancient-fins"],monsterType:"mecha-placoderm",height:120,weight:85,series:3},{id:"s3-wraith-jellyfish",name:"Spooksting",region:"coastal",rarity:"common",description:"A ghostly jellyfish with ethereal tentacles!",robotParts:["ecto-bell","phantom-tentacles","spirit-glow"],monsterType:"phantom-jellyfish",height:50,weight:.05,series:3},{id:"s3-sea-scorpion",name:"Eurypteroid",region:"coastal",rarity:"common",description:"An ancient sea scorpion with crushing pincers!",robotParts:["fossil-pincers","armor-tail","ancient-eyes"],monsterType:"mecha-eurypterid",height:180,weight:45,series:3},{id:"s3-ghost-eel",name:"Phanteel",region:"coastal",rarity:"common",description:"A spectral eel that sparks with ghostly electricity!",robotParts:["ecto-coils","spirit-shock","phantom-slither"],monsterType:"phantom-eel",height:200,weight:.3,series:3},{id:"s3-nautilus-bot",name:"Chambertron",region:"coastal",rarity:"common",description:"A living submarine based on ancient nautilus design!",robotParts:["chamber-shell","jet-propulsion","tentacle-arms"],monsterType:"mecha-nautilus",height:65,weight:20,series:3},{id:"s3-phantom-kraken",name:"Ghostentacle",region:"coastal",rarity:"rare",description:"A spectral kraken that haunts sunken ships!",robotParts:["ecto-tentacles","phantom-ink","spirit-beak"],monsterType:"phantom-kraken",height:400,weight:20,series:3},{id:"s3-mega-shark",name:"Megalobot",region:"coastal",rarity:"rare",description:"A massive megalodon with reinforced steel teeth!",robotParts:["mega-jaws","armor-skin","hunt-sensors"],monsterType:"mecha-megalodon",height:1800,weight:5e4,series:3},{id:"s3-ship-ghost",name:"Galleongeist",region:"coastal",rarity:"rare",description:"The ghost of an entire pirate ship! Sails through water and air!",robotParts:["spectral-hull","ghost-sails","phantom-crew"],monsterType:"ghost-ship",height:800,weight:100,series:3},{id:"s3-plesio-sub",name:"Plesiotron",region:"coastal",rarity:"rare",description:"A plesiosaur converted into a living submarine!",robotParts:["sonar-neck","flipper-props","deep-armor"],monsterType:"mecha-plesiosaur",height:1200,weight:8e3,series:3},{id:"s3-sea-phantom",name:"Abyssalghast",region:"coastal",rarity:"legendary",description:"The ultimate phantom of the deep! Rules all ocean spirits!",robotParts:["abyss-ecto","depth-crown","spirit-trident"],monsterType:"sea-phantom-lord",height:2e3,weight:50,series:3},{id:"s3-flame-ghost",name:"Emberspook",region:"lava",rarity:"common",description:"A phantom made of ghostly flames! Warm but intangible!",robotParts:["flame-ecto","heat-spirit","ember-trail"],monsterType:"fire-phantom",height:60,weight:.01,series:3},{id:"s3-dimetro-bot",name:"Sailback",region:"lava",rarity:"common",description:"A dimetrodon with a solar sail that powers its systems!",robotParts:["solar-sail","synapsid-body","heat-absorb"],monsterType:"mecha-dimetrodon",height:180,weight:250,series:3},{id:"s3-lava-phantom",name:"Magmageist",region:"lava",rarity:"common",description:"A ghost that lives in molten rock! Eerily beautiful!",robotParts:["lava-ecto","heat-spirit","magma-phase"],monsterType:"lava-phantom",height:80,weight:.1,series:3},{id:"s3-ankylo-tank",name:"Ankylofort",region:"lava",rarity:"common",description:"An ankylosaur with heat-resistant armor plating!",robotParts:["heat-armor","club-tail","fortress-body"],monsterType:"mecha-ankylosaur",height:200,weight:4e3,series:3},{id:"s3-ash-specter",name:"Cindershade",region:"lava",rarity:"common",description:"A phantom made of volcanic ash! Constantly shifting form!",robotParts:["ash-ecto","smoke-spirit","ember-eyes"],monsterType:"ash-phantom",height:100,weight:.5,series:3},{id:"s3-spino-fire",name:"Spinoflare",region:"lava",rarity:"common",description:"A spinosaurus with a sail that shoots flames!",robotParts:["fire-sail","flame-claws","heat-snout"],monsterType:"mecha-spinosaurus",height:500,weight:7e3,series:3},{id:"s3-smoke-wraith",name:"Fumespirit",region:"lava",rarity:"common",description:"A ghost that rises from volcanic vents! Smells like sulfur!",robotParts:["smoke-ecto","vent-spirit","sulfur-trail"],monsterType:"smoke-phantom",height:120,weight:.2,series:3},{id:"s3-pachy-ram",name:"Pachyram",region:"lava",rarity:"common",description:"A pachycephalosaurus that headbutts with a reinforced dome!",robotParts:["steel-dome","charge-legs","impact-sensors"],monsterType:"mecha-pachycephalosaurus",height:160,weight:450,series:3},{id:"s3-volcano-phantom",name:"Eruptgeist",region:"lava",rarity:"rare",description:"The spirit of an ancient volcano! Erupts with ghostly fire!",robotParts:["volcano-ecto","eruption-spirit","lava-crown"],monsterType:"volcano-phantom",height:500,weight:10,series:3},{id:"s3-rex-supreme",name:"Tyrannotron",region:"lava",rarity:"rare",description:"The king of mecha-dinosaurs! A T-Rex with plasma breath!",robotParts:["plasma-jaws","titan-legs","roar-amplifier"],monsterType:"mecha-tyrannosaurus",height:600,weight:9e3,series:3},{id:"s3-phoenix-ghost",name:"Spiritnix",region:"lava",rarity:"rare",description:"A phantom phoenix! Reborn from ghostly ashes!",robotParts:["ecto-flames","rebirth-spirit","ash-wings"],monsterType:"phantom-phoenix",height:200,weight:2,series:3},{id:"s3-allo-hunter",name:"Allorazer",region:"lava",rarity:"rare",description:"An allosaurus with razor-sharp metal claws!",robotParts:["razor-claws","heat-vision","pack-link"],monsterType:"mecha-allosaurus",height:450,weight:2500,series:3},{id:"s3-inferno-lord",name:"Blazephantom",region:"lava",rarity:"legendary",description:"The supreme phantom of all flames! Commands fire itself!",robotParts:["inferno-ecto","flame-crown","fire-scepter"],monsterType:"fire-phantom-lord",height:800,weight:25,series:3},{id:"s3-office-ghost",name:"Cubiclegeist",region:"city",rarity:"common",description:"The spirit of someone who worked too much overtime!",robotParts:["tie-ecto","coffee-spirit","keyboard-hands"],monsterType:"office-phantom",height:170,weight:.1,series:3},{id:"s3-ptero-drone",name:"Pterodrone",region:"city",rarity:"common",description:"A pteranodon adapted for city delivery services!",robotParts:["cargo-beak","wing-jets","GPS-crest"],monsterType:"mecha-pteranodon",height:200,weight:35,series:3},{id:"s3-static-phantom",name:"Signalgeist",region:"city",rarity:"common",description:"A ghost made of TV static! Appears on broken screens!",robotParts:["static-ecto","signal-spirit","channel-hop"],monsterType:"static-phantom",height:60,weight:.01,series:3},{id:"s3-raptor-express",name:"Velocicourier",region:"city",rarity:"common",description:"The fastest delivery dino! Always on time!",robotParts:["speed-legs","package-arms","route-AI"],monsterType:"city-raptor",height:180,weight:80,series:3},{id:"s3-phone-ghost",name:"Callspook",region:"city",rarity:"common",description:"Makes ghostly phone calls from disconnected numbers!",robotParts:["phone-ecto","dial-spirit","ring-aura"],monsterType:"phone-phantom",height:30,weight:.05,series:3},{id:"s3-compact-rex",name:"Minirex",region:"city",rarity:"common",description:"A T-Rex scaled down for urban living! Still thinks it is big!",robotParts:["compact-jaws","city-legs","mini-roar"],monsterType:"mini-tyrannosaurus",height:120,weight:150,series:3},{id:"s3-elevator-ghost",name:"Liftgeist",region:"city",rarity:"common",description:"Haunts elevators! Loves pressing all the buttons!",robotParts:["button-ecto","floor-spirit","ding-aura"],monsterType:"elevator-phantom",height:200,weight:.1,series:3},{id:"s3-pachy-guard",name:"Domewatch",region:"city",rarity:"common",description:"A security guard pachycephalosaurus! Very protective!",robotParts:["guard-dome","patrol-legs","alarm-horn"],monsterType:"security-dinosaur",height:150,weight:300,series:3},{id:"s3-train-phantom",name:"Locomotgeist",region:"city",rarity:"rare",description:"The ghost of an old steam train! Still runs the midnight route!",robotParts:["train-ecto","steam-spirit","track-phase"],monsterType:"train-phantom",height:400,weight:50,series:3},{id:"s3-carno-cop",name:"Carnoforce",region:"city",rarity:"rare",description:"A carnotaurus that serves as the city dino-police!",robotParts:["siren-horns","pursuit-legs","justice-core"],monsterType:"mecha-carnotaurus",height:400,weight:2e3,series:3},{id:"s3-theater-ghost",name:"Phantomask",region:"city",rarity:"rare",description:"The spirit of an old theater! Loves dramatic entrances!",robotParts:["mask-ecto","stage-spirit","spotlight-aura"],monsterType:"theater-phantom",height:250,weight:5,series:3},{id:"s3-urban-raptor",name:"Parkouraptor",region:"city",rarity:"rare",description:"Master of urban acrobatics! Runs on walls and rooftops!",robotParts:["grip-claws","jump-jets","wall-sensors"],monsterType:"parkour-raptor",height:200,weight:120,series:3},{id:"s3-city-specter",name:"Metropolgeist",region:"city",rarity:"legendary",description:"The collective phantom of everyone who ever lived in the city! Knows all its secrets!",robotParts:["city-memory","crowd-ecto","history-core"],monsterType:"city-phantom-lord",height:600,weight:1,series:3},{id:"s3-cloud-phantom",name:"Mistgeist",region:"sky",rarity:"common",description:"A ghost made of morning mist! Evaporates in sunlight!",robotParts:["mist-ecto","dawn-spirit","dew-trail"],monsterType:"mist-phantom",height:80,weight:.01,series:3},{id:"s3-micro-raptor",name:"Glidewing",region:"sky",rarity:"common",description:"A tiny four-winged microraptor! Master of aerial stunts!",robotParts:["quad-wings","glide-feathers","stunt-AI"],monsterType:"mecha-microraptor",height:70,weight:3,series:3},{id:"s3-star-phantom",name:"Stellargeist",region:"sky",rarity:"common",description:"A ghost made of starlight! Only visible at night!",robotParts:["star-ecto","cosmic-spirit","twinkle-aura"],monsterType:"star-phantom",height:40,weight:.001,series:3},{id:"s3-archaeo-bird",name:"Archaeowing",region:"sky",rarity:"common",description:"The first bird ever! Upgraded with modern flight tech!",robotParts:["proto-wings","claw-tips","ancient-beak"],monsterType:"mecha-archaeopteryx",height:50,weight:2,series:3},{id:"s3-wind-specter",name:"Breezeghoul",region:"sky",rarity:"common",description:"A phantom that rides the wind! You can only hear its whisper!",robotParts:["wind-ecto","gust-spirit","whisper-voice"],monsterType:"wind-phantom",height:100,weight:.02,series:3},{id:"s3-dimorpho-jet",name:"Dimorphojet",region:"sky",rarity:"common",description:"A dimorphodon with jet engines! Extremely fast!",robotParts:["jet-wings","speed-beak","sonic-crest"],monsterType:"mecha-dimorphodon",height:100,weight:15,series:3},{id:"s3-rainbow-phantom",name:"Prismageist",region:"sky",rarity:"common",description:"A ghost that appears in rainbows! Grants colorful wishes!",robotParts:["rainbow-ecto","color-spirit","wish-light"],monsterType:"rainbow-phantom",height:60,weight:.01,series:3},{id:"s3-rhampho-sky",name:"Rhamphoracer",region:"sky",rarity:"common",description:"A rhamphorhynchus built for racing! Loves competition!",robotParts:["racing-wings","tail-rudder","speed-beak"],monsterType:"mecha-rhamphorhynchus",height:80,weight:8,series:3},{id:"s3-moon-phantom",name:"Lunageist",region:"sky",rarity:"rare",description:"A spirit from the moon itself! Grants dreams to sleepers!",robotParts:["lunar-ecto","dream-spirit","moon-glow"],monsterType:"lunar-phantom",height:300,weight:3,series:3},{id:"s3-quetz-carrier",name:"Quetzalcraft",region:"sky",rarity:"rare",description:"A quetzalcoatlus that serves as a flying aircraft carrier!",robotParts:["carrier-back","mega-wings","hangar-body"],monsterType:"mecha-quetzalcoatlus",height:1e3,weight:25e3,series:3},{id:"s3-comet-specter",name:"Cometwraith",region:"sky",rarity:"rare",description:"The ghost of a comet! Leaves a spectral tail across the sky!",robotParts:["comet-ecto","tail-spirit","cosmic-ice"],monsterType:"comet-phantom",height:500,weight:10,series:3},{id:"s3-ptero-titan",name:"Skywarden",region:"sky",rarity:"rare",description:"A massive pterosaur that guards the upper atmosphere!",robotParts:["guardian-wings","watch-eyes","patrol-beak"],monsterType:"titan-pterosaur",height:1200,weight:2e3,series:3},{id:"s3-sky-spirit",name:"Aethergeist",region:"sky",rarity:"legendary",description:"The supreme phantom of the sky! Commands all aerial spirits and dinosaurs!",robotParts:["sky-crown","cloud-scepter","wind-throne"],monsterType:"sky-phantom-lord",height:2e3,weight:100,series:3}],ay={id:"binsters-claymars",name:"Binsters Claymars",region:"all",rarity:"mythic",description:"The legendary six-headed dragon of perfect dental hygiene! Each head represents a different brushing zone. Only reveals itself to true masters who have befriended every creature across all dimensions!",robotParts:["six-dragon-heads","clay-body","rainbow-belly","golden-horns","ultimate-core"],monsterType:"hydra-dragon",height:2500,weight:18e3,series:1,requiresAllCreatures:!0},Ct=[...ry,...iy,...sy,ay];function Aa(e){return Ct.filter(t=>t.series===e&&t.rarity!=="mythic")}function Cr(e,t){return Aa(e).every(r=>t.includes(r.id))}function Op(e){const t=[1];return Cr(1,e)&&t.push(2),Cr(2,e)&&t.push(3),t}function zp(e,t,n){const r=Op(t);let a=[];const o=O=>n?O.filter(M=>M.region===n||M.region==="all"):O,c=O=>O.filter(M=>r.includes(M.series)),h=Ct.filter(O=>O.rarity!=="mythic"),m=Ct.find(O=>O.rarity==="mythic"),y=Cr(1,t)&&Cr(2,t)&&Cr(3,t),S=m&&t.includes(m.id);if(y&&!S&&e>=95&&m)return m;const j=c(o(h));if(e>=90?a=[...j.filter(O=>O.rarity==="legendary"),...j.filter(O=>O.rarity==="rare"),...j.filter(O=>O.rarity==="common")]:e>=70?a=[...j.filter(O=>O.rarity==="rare"),...j.filter(O=>O.rarity==="common")]:a=j.filter(O=>O.rarity==="common"),a=a.filter(O=>O.rarity!=="mythic"),j.every(O=>t.includes(O.id))&&y&&S)return a.length===0?null:a[Math.floor(Math.random()*a.length)];let G=a.filter(O=>!t.includes(O.id));return G.length===0&&(G=j.filter(O=>!t.includes(O.id))),G.length===0&&(G=c(h).filter(O=>!t.includes(O.id))),G.length===0?null:G[Math.floor(Math.random()*G.length)]}function oy(e,t){return t==="mythic"?e>=98?1:e>=95?.75:.5:e>=90?1:e>=76?.85:e>=51?.7:e>=31?.55:.4}function ly(e){return e>=90?"master":e>=76?"white":e>=51?"bee":e>=31?"blue":"red"}const et="/vibe-brushing/",oi=[{id:"crown",name:"Royal Crown",imageUrl:`${et}creatures/hat-crown.png`,unlockCondition:"starter"},{id:"party",name:"Party Hat",imageUrl:`${et}creatures/hat-party.png`,unlockCondition:"starter"},{id:"wizard",name:"Wizard Hat",imageUrl:`${et}creatures/hat-wizard.png`,unlockCondition:"sessions",unlockThreshold:10},{id:"cowboy",name:"Cowboy Hat",imageUrl:`${et}creatures/hat-cowboy.png`,unlockCondition:"sessions",unlockThreshold:25},{id:"chef",name:"Chef Hat",imageUrl:`${et}creatures/hat-chef.png`,unlockCondition:"sessions",unlockThreshold:50},{id:"astronaut",name:"Space Helmet",imageUrl:`${et}creatures/hat-astronaut.png`,unlockCondition:"sessions",unlockThreshold:100},{id:"pirate",name:"Pirate Hat",imageUrl:`${et}creatures/hat-pirate.png`,unlockCondition:"streak",unlockThreshold:7},{id:"princess",name:"Princess Tiara",imageUrl:`${et}creatures/hat-princess.png`,unlockCondition:"streak",unlockThreshold:30},{id:"unicorn-horn",name:"Unicorn Horn",imageUrl:`${et}creatures/hat-unicorn-horn.png`,unlockCondition:"creature",unlockThreshold:5},{id:"dragon-horns",name:"Dragon Horns",imageUrl:`${et}creatures/hat-dragon-horns.png`,unlockCondition:"creature",unlockThreshold:10},{id:"nature-crown",name:"Nature Crown",imageUrl:`${et}creatures/hat-nature-crown.png`,unlockCondition:"series",unlockSeries:1},{id:"robo-antennae",name:"Robo Antennae",imageUrl:`${et}creatures/hat-robo-antennae.png`,unlockCondition:"series",unlockSeries:1},{id:"flame-mohawk",name:"Flame Mohawk",imageUrl:`${et}creatures/hat-flame-mohawk.png`,unlockCondition:"series",unlockSeries:1},{id:"crystal-crown",name:"Crystal Crown",imageUrl:`${et}creatures/hat-crystal-crown.png`,unlockCondition:"series",unlockSeries:2},{id:"slime-cap",name:"Slime Cap",imageUrl:`${et}creatures/hat-slime-cap.png`,unlockCondition:"series",unlockSeries:2},{id:"gem-tiara",name:"Gem Tiara",imageUrl:`${et}creatures/hat-gem-tiara.png`,unlockCondition:"series",unlockSeries:2},{id:"prism-visor",name:"Prism Visor",imageUrl:`${et}creatures/hat-prism-visor.png`,unlockCondition:"series",unlockSeries:2},{id:"dino-skull",name:"Dino Skull",imageUrl:`${et}creatures/hat-dino-skull.png`,unlockCondition:"series",unlockSeries:3},{id:"phantom-hood",name:"Phantom Hood",imageUrl:`${et}creatures/hat-phantom-hood.png`,unlockCondition:"series",unlockSeries:3},{id:"fossil-helmet",name:"Fossil Helmet",imageUrl:`${et}creatures/hat-fossil-helmet.png`,unlockCondition:"series",unlockSeries:3},{id:"spirit-halo",name:"Spirit Halo",imageUrl:`${et}creatures/hat-spirit-halo.png`,unlockCondition:"series",unlockSeries:3},{id:"trex-jaws",name:"T-Rex Jaws",imageUrl:`${et}creatures/hat-trex-jaws.png`,unlockCondition:"series",unlockSeries:3}];function uy(e,t,n,r=[]){return oi.filter(a=>{switch(a.unlockCondition){case"starter":return!0;case"sessions":return e>=(a.unlockThreshold||0);case"streak":return t>=(a.unlockThreshold||0);case"creature":return n>=(a.unlockThreshold||0);case"series":return a.unlockSeries?Cr(a.unlockSeries,r):!1;default:return!1}})}function Lp({buddyId:e,size:t}){const n=oi.find(r=>r.id===e);return n?u.jsx("img",{src:n.imageUrl,alt:n.name,width:t,height:t,style:{objectFit:"contain",imageRendering:"auto"}}):null}function cy({userProgress:e,onSelect:t,onBack:n}){const r=e.capturedCreatures.map(c=>c.id),a=uy(e.totalSessions,e.currentStreak,e.capturedCreatures.length,r),o=new Set(a.map(c=>c.id));return u.jsxs("div",{className:"flex flex-col h-full p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("button",{onClick:n,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Choose Your Buddy!"}),u.jsx("div",{className:"w-16"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:()=>t(null),className:"aspect-square bg-purple-800/30 rounded-2xl flex flex-col items-center justify-center border-2 border-dashed border-purple-500/50 active:scale-95 transition-transform",children:[u.jsx("div",{className:"text-3xl mb-1",children:""}),u.jsx("div",{className:"text-xs text-purple-300",children:"No Buddy"})]}),oi.map(c=>{const h=o.has(c.id);return u.jsxs("button",{onClick:()=>h&&t(c),disabled:!h,className:`aspect-square rounded-2xl flex flex-col items-center justify-center transition-all p-2 ${h?"bg-purple-800/50 active:scale-95":"bg-purple-900/30 opacity-50 cursor-not-allowed"}`,children:[u.jsx("div",{className:`flex-1 flex items-center justify-center w-full ${h?"":"grayscale"}`,children:h?u.jsx(Lp,{buddyId:c.id,size:60}):u.jsx("span",{className:"text-4xl",children:""})}),u.jsx("div",{className:"text-xs text-center px-1 truncate w-full mt-1",children:h?c.name:dy(c)})]},c.id)})]})}),u.jsx("button",{onClick:()=>t(null),className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Start Without Buddy"})]})}function dy(e){switch(e.unlockCondition){case"sessions":return`${e.unlockThreshold} sessions`;case"streak":return`${e.unlockThreshold} day streak`;case"creature":return`${e.unlockThreshold} creatures`;case"series":return`Complete Series ${e.unlockSeries}`;default:return"Locked"}}const $p={id:"faceZone",label:"Face",x:.3,y:.25,w:.4,h:.5},Ii=[$p];class fy{constructor(){Nt(this,"canvas");Nt(this,"ctx");Nt(this,"previousFrame",null);Nt(this,"pixelThreshold",20);Nt(this,"motionThresholdPercent",2.5);Nt(this,"frameCount",0);Nt(this,"debugMode",!1);Nt(this,"lastDebugInfo",null);Nt(this,"smoothedFaceCenter",null);Nt(this,"smoothingFactor",.15);this.canvas=document.createElement("canvas");const t=this.canvas.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Could not get canvas context");this.ctx=t}getZonesForFace(t,n,r){if(!t||n===0||r===0)return[$p];const a=t.x/n,o=t.y/r,c=t.width/n,h=t.height/r,m={x:a,y:o+h*.5,w:c,h};this.smoothedFaceCenter?this.smoothedFaceCenter={x:this.smoothedFaceCenter.x+(m.x-this.smoothedFaceCenter.x)*this.smoothingFactor,y:this.smoothedFaceCenter.y+(m.y-this.smoothedFaceCenter.y)*this.smoothingFactor,w:this.smoothedFaceCenter.w+(m.w-this.smoothedFaceCenter.w)*this.smoothingFactor,h:this.smoothedFaceCenter.h+(m.h-this.smoothedFaceCenter.h)*this.smoothingFactor}:this.smoothedFaceCenter=m;const y=this.smoothedFaceCenter,S=Math.max(.3,Math.min(.5,y.w*1.4)),j=Math.max(.35,Math.min(.55,y.h*1.2)),E=y.x-S/2,G=y.y-j/2,O=(w,x,b)=>Math.max(x,Math.min(b,w)),M=O(E,.02,1-S-.02),Q=O(G,.05,1-j-.05);return[{id:"faceZone",label:"Face",x:M,y:Q,w:S,h:j}]}setDebugMode(t){this.debugMode=t}getDebugInfo(){return this.lastDebugInfo}getCurrentZones(t,n,r){return this.getZonesForFace(t,n,r)}getFaceRegionNormalized(t,n,r){if(!t)return null;const a=.25,o=(t.x-t.width/2)/(n/a),c=t.y/(r/a),h=t.width/(n/a),m=t.height/(r/a);return{x:o,y:c,w:h,h:m}}isInFaceCore(t,n,r,a,o){const c=this.getFaceRegionNormalized(r,a,o);if(!c)return!1;const h=c.x+c.w*.15,m=c.y+c.h*.1,y=c.w*.7,S=c.h*.5;return t>=h&&t<=h+y&&n>=m&&n<=m+S}isInBrushingRegion(t,n,r,a,o){const c=this.getFaceRegionNormalized(r,a,o);if(!c)return n>.2;const h=c.x-c.w*1,m=c.y-c.h*.1,y=c.w*3,S=c.h*2.5;return t>=h&&t<=h+y&&n>=m&&n<=m+S}getBrushingRegion(t,n,r){const o=n*.25,c=r*.25,h=this.getFaceRegionNormalized(t,o,c);if(!h)return{x:0,y:.2*r,width:n,height:.8*r};const m=h.x-h.w*1,y=h.y-h.h*.1,S=h.w*3,j=h.h*2.5;return{x:Math.max(0,m*n),y:Math.max(0,y*r),width:Math.min(S*n,n),height:Math.min(j*r,r)}}detectMotion(t,n=null){this.frameCount++;const r=this.getZonesForFace(n,t.videoWidth,t.videoHeight);if(!t.videoWidth||!t.videoHeight)return r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));const a=.25,o=Math.floor(t.videoWidth*a),c=Math.floor(t.videoHeight*a);(this.canvas.width!==o||this.canvas.height!==c)&&(this.canvas.width=o,this.canvas.height=c,this.previousFrame=null);try{this.ctx.drawImage(t,0,0,o,c)}catch(E){return console.error("[MotionDetector] Failed to draw video frame:",E),r.map(G=>({zoneId:G.id,motionLevel:0,hasMotion:!1}))}const h=this.ctx.getImageData(0,0,o,c);if(!this.previousFrame)return this.previousFrame=h,r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));let m=0,y=!1;const S=[],j=r.map(E=>{const G=Math.floor(E.x*o),O=Math.floor(E.y*c),M=Math.floor(E.w*o),Q=Math.floor(E.h*c);let w=0,x=0;for(let K=O;K<O+Q&&K<c;K++)for(let U=G;U<G+M&&U<o;U++){const I=U/o,V=K/c;if(this.isInFaceCore(I,V,n,o,c)||!this.isInBrushingRegion(I,V,n,o,c))continue;const H=(K*o+U)*4,z=Math.abs(h.data[H]-this.previousFrame.data[H]),N=Math.abs(h.data[H+1]-this.previousFrame.data[H+1]),ee=Math.abs(h.data[H+2]-this.previousFrame.data[H+2]),ie=(z+N+ee)/3;ie>this.pixelThreshold&&(w++,m+=ie),x++}const b=x>0?w/x*100:0,B=b>this.motionThresholdPercent;return B&&(y=!0),this.debugMode&&S.push({id:E.id,bounds:{x:E.x,y:E.y,width:E.w,height:E.h},motionLevel:Math.min(b*2,100),hasMotion:B,motionPixels:w,totalPixels:x}),{zoneId:E.id,motionLevel:Math.min(b*2,100),hasMotion:B}});if(this.debugMode){const E=this.getBrushingRegion(n,o/.25,c/.25);this.lastDebugInfo={faceRegion:n,brushingRegion:E,zones:S,frameMotionTotal:m,handMotionDetected:y}}if(this.previousFrame=h,this.frameCount%20===0){const E=j.filter(G=>G.hasMotion).length;console.log("[MotionDetector] Frame",this.frameCount,"- Active zones:",E,"- Hand motion:",y,"- Total motion:",m.toFixed(0))}return j}reset(){this.previousFrame=null,this.frameCount=0,this.smoothedFaceCenter=null}}function Gp(e={}){const{targetCleaningTime:t=20,detectionInterval:n=100,decayRate:r=.8,debugMode:a=!1}=e,o=C.useRef(null),c=C.useRef(null),h=C.useRef(null),m=C.useRef({}),y=C.useRef({}),S=C.useRef(null),j=C.useRef(a),[E,G]=C.useState(()=>Ii.map(z=>({zoneId:z.id,cleaningProgress:0,isComplete:!1}))),[O,M]=C.useState(()=>Ii.map(z=>({zoneId:z.id,motionLevel:0,hasMotion:!1}))),Q=C.useCallback(z=>{S.current=z},[]),w=C.useCallback(z=>{j.current=z,o.current&&o.current.setDebugMode(z)},[]),x=C.useCallback(()=>{var z;return((z=o.current)==null?void 0:z.getDebugInfo())??null},[]),b=C.useCallback(()=>{const z=Ii.map(N=>{const ie=(m.current[N.id]||0)/t*100;return{zoneId:N.id,cleaningProgress:ie,isComplete:ie>=100}});G(z)},[t]),B=C.useCallback(()=>{if(!o.current||!c.current)return;const z=c.current;if(z.paused&&z.srcObject&&z.play().catch(()=>{}),z.readyState<2||z.videoWidth===0)return;const N=o.current.detectMotion(z,S.current);M(N),N.forEach(ee=>{const ie=m.current[ee.zoneId]||0;if(ee.hasMotion){y.current[ee.zoneId]=0;const de=n/1e3*(ee.motionLevel/60);m.current[ee.zoneId]=Math.min(ie+de,t)}else{const de=(y.current[ee.zoneId]||0)+1;if(y.current[ee.zoneId]=de,de>5){const ke=n/1e3*r;m.current[ee.zoneId]=Math.max(0,ie-ke)}}}),b()},[n,b,r]),K=C.useCallback(z=>{console.log("[MotionDetection] startDetection called:",{videoReadyState:z.readyState,videoWidth:z.videoWidth,videoHeight:z.videoHeight,srcObject:!!z.srcObject,paused:z.paused}),z.paused&&(console.log("[MotionDetection] Video is paused, attempting to play..."),z.play().then(()=>{console.log("[MotionDetection] Video now playing")}).catch(N=>{console.error("[MotionDetection] Failed to play video:",N)})),o.current||(o.current=new fy),o.current.setDebugMode(j.current),c.current=z,h.current&&clearInterval(h.current),h.current=window.setInterval(B,n),console.log("[MotionDetection] Detection interval started")},[B,n]),U=C.useCallback(()=>{h.current&&(clearInterval(h.current),h.current=null)},[]),I=C.useCallback(()=>{var z;m.current={},y.current={},(z=o.current)==null||z.reset(),G(Ii.map(N=>({zoneId:N.id,cleaningProgress:0,isComplete:!1}))),M(Ii.map(N=>({zoneId:N.id,motionLevel:0,hasMotion:!1})))},[]);C.useEffect(()=>()=>{h.current&&clearInterval(h.current)},[]);const V=E.reduce((z,N)=>z+N.cleaningProgress,0)/E.length,H=E.every(z=>z.isComplete);return{zoneProgress:E,motionResults:O,overallProgress:V,isComplete:H,startDetection:K,stopDetection:U,reset:I,setFaceRegion:Q,setDebugMode:w,getDebugInfo:x}}const hy="modulepreload",py=function(e){return"/vibe-brushing/"+e},df={},ff=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(n.map(m=>{if(m=py(m),m in df)return;df[m]=!0;const y=m.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const j=document.createElement("link");if(j.rel=y?"stylesheet":hy,y||(j.as="script"),j.crossOrigin="",j.href=m,h&&j.setAttribute("nonce",h),document.head.appendChild(j),y)return new Promise((E,G)=>{j.addEventListener("load",E),j.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};function Wp(){const[e,t]=C.useState(null),[n,r]=C.useState(!1),[a,o]=C.useState(!0),c=C.useRef(null),h=C.useRef(null),m=C.useRef(null),y=C.useRef("fallback"),S=C.useRef(null),j=C.useRef(null),E=C.useRef(null),G=C.useRef(null),O=C.useRef(!1),M=C.useRef(!1),Q=C.useRef(null),w=C.useCallback(async()=>{if(Q.current)return Q.current;const I=async()=>{if(r(!0),console.log("[FaceTracking] Initializing detector..."),"FaceDetector"in window&&window.FaceDetector)try{const V=new window.FaceDetector({maxDetectedFaces:1,fastMode:!0});return await V.detect(document.createElement("video")),h.current=V,y.current="native",r(!1),console.log("[FaceTracking] Using native FaceDetector API"),!0}catch(V){console.warn("[FaceTracking] Native FaceDetector not available:",V)}try{console.log("[FaceTracking] Loading TensorFlow.js...");const V=await ff(()=>import("./index-Dn5-kLg3.js"),__vite__mapDeps([0,1]));await V.ready();try{await V.setBackend("webgl"),console.log("[FaceTracking] Using WebGL backend")}catch{console.log("[FaceTracking] WebGL failed, trying CPU backend"),await V.setBackend("cpu")}console.log("[FaceTracking] Loading face detection model...");const H=await ff(()=>import("./face-landmarks-detection.esm-AH00kj8w.js"),__vite__mapDeps([2,1])),z=H.SupportedModels.MediaPipeFaceMesh,N=await H.createDetector(z,{runtime:"tfjs",refineLandmarks:!1,maxFaces:1});return m.current=N,y.current="tfjs",r(!1),console.log("[FaceTracking] Using TensorFlow.js FaceMesh"),!0}catch(V){return console.warn("[FaceTracking] TensorFlow.js face tracking failed:",V),y.current="fallback",r(!1),o(!1),console.log("[FaceTracking] Using center-of-frame fallback"),!0}};return Q.current=I(),Q.current},[]),x=C.useCallback(I=>{const V=G.current;if(!V)return G.current=I,I;const H=Math.abs(I.x-V.x),z=Math.abs(I.y-V.y),N=H+z;if(N<15)return V;const ee=N>50?.7:N>25?.4:.2,ie={x:V.x+(I.x-V.x)*ee,y:V.y+(I.y-V.y)*ee,width:V.width+(I.width-V.width)*.2,height:V.height+(I.height-V.height)*.2,rotation:I.rotation};return G.current=ie,ie},[]),b=C.useCallback(I=>{var $t;j.current||(j.current=document.createElement("canvas"));const V=j.current,H=.2,z=Math.floor(I.videoWidth*H),N=Math.floor(I.videoHeight*H);V.width!==z&&(V.width=z),V.height!==N&&(V.height=N);const ee=V.getContext("2d",{willReadFrequently:!0});if(!ee)return null;ee.drawImage(I,0,0,z,N);const ie=ee.getImageData(0,0,z,N),de=ie.data;let ke=0,ue=0,me=0;const Y=new Array(z).fill(0);let J=0,X=0;const he=($t=E.current)==null?void 0:$t.data,be=Math.floor(N*.6);for(let Oe=0;Oe<be;Oe++)for(let ge=0;ge<z;ge++){const ot=(Oe*z+ge)*4,Ee=de[ot],xt=de[ot+1],nt=de[ot+2];if(Ee+xt+nt>200){const Rt=1+(1-Oe/be);X+=Rt,J+=Oe*Rt}if(he){const Rt=he[ot],re=he[ot+1],je=he[ot+2],Se=Math.abs(Ee-Rt)+Math.abs(xt-re)+Math.abs(nt-je);if(Se>40){const Pe=Se*(1+(1-Oe/be));me+=Pe,ke+=ge*Pe,ue+=Oe*Pe,Y[ge]+=Se}}}E.current=ie;const Le=G.current;let Ae;if(me>2e4){const Oe=Math.floor(ke/me),ot=Math.max(...Y)*.15;let Ee=Oe,xt=Oe;for(let re=Oe;re>=0&&Oe-re<z*.4;re--)if(Y[re]>=ot)Ee=re;else if(re<Oe-5)break;for(let re=Oe;re<z&&re-Oe<z*.4;re++)if(Y[re]>=ot)xt=re;else if(re>Oe+5)break;const nt=(xt-Ee)/H,Ft=I.videoWidth*.1,Rt=I.videoWidth*.4;Ae=Math.max(Ft,Math.min(Rt,nt*1.5)),console.log(`[FaceTracking] Motion: center=${Oe}, span=${nt.toFixed(0)}px  faceW: ${Ae.toFixed(0)}`)}else Le?Ae=Le.width:Ae=I.videoWidth*.2;const Ve=I.videoWidth/2;let Ie;me>2e4?Ie="motion":X>100?Ie="skin":Ie="center";let Ze;if(me>2e4){const Oe=ue/me/H;Ze=Math.max(I.videoHeight*.05,Oe*.6)}else if(X>100){const Oe=J/X/H;Ze=Math.max(I.videoHeight*.05,Oe*.5)}else Ze=I.videoHeight*.15;return console.log(`[FaceTracking] Fallback (${Ie}): x=${Ve.toFixed(0)}, y=${Ze.toFixed(0)}, w=${Ae.toFixed(0)}`),{x:Ve,y:Ze,width:Ae,height:Ae*1.2,rotation:0}},[]),B=C.useCallback(async()=>{if(!c.current||O.current)return;const I=c.current;if(!(I.readyState<2||I.videoWidth===0)){O.current=!0;try{let V=null;if(y.current==="native"&&h.current)try{const H=await h.current.detect(I);if(H.length>0){const z=H[0].boundingBox;V={x:z.x+z.width/2,y:z.y,width:z.width,height:z.height,rotation:0}}}catch(H){console.warn("[FaceTracking] Native detection error:",H)}else if(y.current==="tfjs"&&m.current)try{const H=await m.current.estimateFaces(I);if(H.length!==0){console.log("[FaceTracking] TFJS found",H.length,"face(s)");const z=H[0];console.log("[FaceTracking] TFJS face keys:",Object.keys(z));const N=z.box||z.boundingBox;if(N){const ee=N.xMin??0,ie=N.yMin??0,de=N.width??(N.xMax?N.xMax-ee:100),ke=N.height??(N.yMax?N.yMax-ie:100);console.log("[FaceTracking] TFJS box:",{xMin:ee,yMin:ie,w:de,h:ke}),V={x:ee+de/2,y:ie,width:Math.min(de,I.videoWidth*.8),height:Math.min(ke,I.videoHeight*.8),rotation:0}}}}catch(H){console.warn("[FaceTracking] TFJS detection error:",H)}if(V||(V=b(I)),V){const H=x(V);t(H)}else G.current&&t(G.current)}catch(V){console.warn("[FaceTracking] Detection error:",V)}finally{O.current=!1}}},[b,x]),K=C.useCallback(async I=>{console.log("[FaceTracking] Starting tracking"),c.current=I,M.current=!0,await w();const V=async()=>{if(M.current&&(await B(),M.current)){const H=y.current==="tfjs"?150:100;S.current=window.setTimeout(()=>{requestAnimationFrame(V)},H)}};V()},[w,B]),U=C.useCallback(()=>{console.log("[FaceTracking] Stopping tracking"),M.current=!1,S.current&&(clearTimeout(S.current),S.current=null),G.current=null,t(null)},[]);return C.useEffect(()=>()=>{M.current=!1,S.current&&clearTimeout(S.current)},[]),{facePosition:e,isLoading:n,isSupported:a,startTracking:K,stopTracking:U}}const i={C2:65.41,D2:73.42,E2:82.41,F2:87.31,G2:98,A2:110,B2:123.47,C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,D5:587.33,E5:659.25,F5:698.46,G5:783.99,A5:880,B5:987.77,C6:1046.5,D6:1174.66,E6:1318.51,F6:1396.91,G6:1567.98,Eb2:77.78,Bb2:116.54,Ab3:207.65,Bb3:233.08,Eb4:311.13,Ab4:415.3,Bb4:466.16,Eb5:622.25,Ab5:830.61,Bb5:932.33,Eb6:1244.51,"C#3":138.59,"C#5":554.37,"F#2":92.5,"F#3":185,"F#4":369.99,"F#5":739.99,"F#6":1479.98,"G#4":415.3,"G#5":830.61},my={grassland:[{tempo:{calm:100,excited:128},melodyCalm:[[i.G4,i.A4,i.B4,i.D5,i.B4,i.A4,i.G4,i.E4],[i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4,i.D4],[i.D4,i.E4,i.G4,i.A4,i.G4,i.E4,i.G4,i.A4]],melodyExcited:[[i.G5,i.A5,i.B5,i.D6,i.B5,i.G5,i.A5,i.B5],[i.E5,i.G5,i.A5,i.B5,i.D6,i.B5,i.A5,i.G5]],bassCalm:[[i.G2,0,i.D3,0,i.G2,0,i.B2,0]],bassExcited:[[i.G2,i.G2,i.D3,i.D3,i.B2,i.B2,i.D3,i.G2]],arpCalm:[[0,4,7,11,12]],arpExcited:[[0,4,7,11,14,11,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:3e3,filterType:"lowpass",attackTime:.01,releaseTime:.3,arpSpeed:1},{tempo:{calm:95,excited:125},melodyCalm:[[i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.G4,i.E4],[i.F4,i.A4,i.C5,i.F5,i.C5,i.A4,i.C5,i.A4],[i.G4,i.B4,i.D5,i.G5,i.D5,i.B4,i.G4,i.D4]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.G5,i.E5,i.C5,i.G5],[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C6]],bassCalm:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],bassExcited:[[i.C3,i.C3,i.G3,i.G3,i.F3,i.F3,i.G3,i.C3]],arpCalm:[[0,4,7,12,16]],arpExcited:[[0,4,7,12,16,19,16,12,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"triangle",vibratoRate:5,vibratoDepth:.004,filterFreq:3200,filterType:"lowpass",attackTime:.015,releaseTime:.35,arpSpeed:1.1},{tempo:{calm:105,excited:132},melodyCalm:[[i.D4,i.E4,i.A4,i.B4,i.A4,i.E4,i.D4,0],[i.E4,i.A4,i.B4,i.D5,i.B4,i.A4,i.E4,0],[i.A4,i.B4,i.D5,i.E5,i.D5,i.B4,i.A4,i.E4]],melodyExcited:[[i.D5,i.E5,i.A5,i.B5,i.D6,i.B5,i.A5,i.E5],[i.E5,i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5]],bassCalm:[[i.D3,0,i.A3,0,i.D3,0,i.E3,0]],bassExcited:[[i.D3,i.D3,i.A3,i.A3,i.E3,i.E3,i.A3,i.D3]],arpCalm:[[0,2,7,9,12]],arpExcited:[[0,2,7,9,12,14,12,9,7,2]],pulseWidth:.4,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:2800,filterType:"lowpass",attackTime:.012,releaseTime:.28,arpSpeed:.95}],coastal:[{tempo:{calm:88,excited:116},melodyCalm:[[i.D4,i.E4,i.A4,0,i.B4,i.A4,i.E4,0],[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,i["F#4"],i.E4],[i["F#4"],i.A4,i.B4,i.D5,i.B4,0,i.A4,i["F#4"]]],melodyExcited:[[i.D5,i.E5,i["F#5"],i.A5,i.B5,i.A5,i["F#5"],i.E5],[i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5,i["F#5"]]],bassCalm:[[i.D2,0,0,i.A2,0,0,i.D2,0]],bassExcited:[[i.D2,0,i.A2,0,i.D2,i.E2,i["F#2"],0]],arpCalm:[[0,4,9,12,16,12,9,4]],arpExcited:[[0,2,4,7,9,12,9,7,4,2]],pulseWidth:.3,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3,vibratoDepth:.008,filterFreq:2500,filterType:"lowpass",attackTime:.05,releaseTime:.5,arpSpeed:1.3},{tempo:{calm:82,excited:110},melodyCalm:[[i.G4,0,i.B4,0,i.D5,i.B4,0,i.G4],[i.A4,0,i.C5,0,i.E5,i.C5,0,i.A4],[i.B4,0,i.D5,0,i["F#5"],i.D5,0,i.B4]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i.C6,i.E6,i.A5,i.E6,i.C6,i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,i.D3,0,0,0]],bassExcited:[[i.G2,0,i.D3,0,i.G2,i.A2,i.B2,0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,14,11,7,4]],pulseWidth:.25,drumStyle:"soft",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.01,filterFreq:2200,filterType:"lowpass",attackTime:.06,releaseTime:.6,arpSpeed:1.5},{tempo:{calm:92,excited:120},melodyCalm:[[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,0,i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],0,i.B4,0,i["G#4"]],[i.A4,i.B4,i["C#5"],i.E5,0,i["C#5"],0,i.B4]],melodyExcited:[[i.E5,i["F#5"],i.A5,i.B5,i["C#6"],i.B5,i.A5,i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,0,0,i.B2,0,0,i.E2,0]],bassExcited:[[i.E2,0,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,2,4,7,9,11,14,11,9,7,4,2]],pulseWidth:.35,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3.5,vibratoDepth:.007,filterFreq:2600,filterType:"lowpass",attackTime:.045,releaseTime:.45,arpSpeed:1.2}],lava:[{tempo:{calm:135,excited:170},melodyCalm:[[i.A3,i.A3,i.C4,i.E4,i.A4,i.E4,i.C4,i.A3],[i.G3,i.G3,i.Bb3,i.D4,i.G4,i.D4,i.Bb3,i.G3],[i.F3,i.F3,i.A3,i.C4,i.F4,i.A4,i.C5,i.A4]],melodyExcited:[[i.A4,i.C5,i.E5,i.A5,i.A5,i.E5,i.C5,i.A4],[i.G4,i.Bb4,i.D5,i.G5,i.G5,i.D5,i.Bb4,i.G4]],bassCalm:[[i.A2,i.A2,i.A2,i.E2,i.A2,i.A2,i.G2,i.E2]],bassExcited:[[i.A2,i.A2,i.A2,i.A2,i.E2,i.E2,i.G2,i.G2]],arpCalm:[[0,3,7,10,12,10,7,3]],arpExcited:[[0,3,7,12,15,19,15,12,7,3,0,3]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:6,vibratoDepth:.002,filterFreq:4500,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.7},{tempo:{calm:145,excited:180},melodyCalm:[[i.E4,i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4],[i.D4,i.D4,i.F4,i.G4,i.A4,i.G4,i.F4,i.D4],[i.C4,i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.C4]],melodyExcited:[[i.E5,i.G5,i.A5,i.B5,i.C6,i.B5,i.A5,i.G5],[i.D5,i.F5,i.G5,i.A5,i.B5,i.A5,i.G5,i.F5]],bassCalm:[[i.E2,i.E2,i.E2,i.G2,i.A2,i.G2,i.E2,i.D2]],bassExcited:[[i.E2,i.E2,i.E2,i.E2,i.G2,i.G2,i.A2,i.A2]],arpCalm:[[0,3,5,7,10,7,5,3]],arpExcited:[[0,3,5,7,10,12,15,12,10,7,5,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:7,vibratoDepth:.0015,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.6},{tempo:{calm:128,excited:165},melodyCalm:[[i.D4,i.F4,i.A4,i.D5,i.A4,i.F4,i.D4,i.A3],[i.C4,i.Eb4,i.G4,i.C5,i.G4,i.Eb4,i.C4,i.G3],[i.Bb3,i.D4,i.F4,i.Bb4,i.F4,i.D4,i.Bb3,i.F3]],melodyExcited:[[i.D5,i.F5,i.A5,i.D6,i.D6,i.A5,i.F5,i.D5],[i.C5,i.Eb5,i.G5,i.C6,i.C6,i.G5,i.Eb5,i.C5]],bassCalm:[[i.D2,i.D2,i.F2,i.A2,i.D2,i.D2,i.C2,i.Bb2]],bassExcited:[[i.D2,i.D2,i.D2,i.F2,i.A2,i.A2,i.C3,i.D3]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,17,15,12,10,7,3]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.0025,filterFreq:4200,filterType:"lowpass",attackTime:.003,releaseTime:.18,arpSpeed:.75}],city:[{tempo:{calm:115,excited:145},melodyCalm:[[i.Eb4,i.G4,i.Bb4,0,i.Eb5,0,i.Bb4,i.G4],[i.F4,i.Ab4,i.C5,0,i.F5,0,i.C5,i.Ab4],[i.G4,i.Bb4,i.D5,i.F5,0,i.D5,i.Bb4,0]],melodyExcited:[[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6],[i.F5,i.Ab5,i.C6,i.F6,i.C6,i.Ab5,i.C6,i.F6]],bassCalm:[[i.Eb2,0,i.Bb2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.Eb2,i.Eb2,i.Bb2,i.Bb2,i.G2,i.G2,i.Bb2,i.Eb2]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,19,22,19,15,12,10,7,3]],pulseWidth:.5,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.2,arpSpeed:.5},{tempo:{calm:120,excited:150},melodyCalm:[[i.A4,0,i["C#5"],i.E5,0,i["C#5"],i.A4,0],[i.B4,0,i["D#5"],i["F#5"],0,i["D#5"],i.B4,0],[i["C#5"],0,i.E5,i["G#5"],0,i.E5,i["C#5"],0]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i.B5,i["F#5"]]],bassCalm:[[i.A2,0,i.E3,0,i.A2,0,i["C#3"],0]],bassExcited:[[i.A2,i.A2,i.E3,i.E3,i["C#3"],i["C#3"],i.E3,i.A2]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,16,19,16,14,11,7,4]],pulseWidth:.4,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:10,vibratoDepth:8e-4,filterFreq:5500,filterType:"lowpass",attackTime:8e-4,releaseTime:.18,arpSpeed:.45},{tempo:{calm:108,excited:138},melodyCalm:[[i.C4,i.Eb4,i.G4,i.C5,0,i.G4,i.Eb4,0],[i.Bb3,i.D4,i.F4,i.Bb4,0,i.F4,i.D4,0],[i.Ab3,i.C4,i.Eb4,i.Ab4,0,i.Eb4,i.C4,0]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.Bb4,i.D5,i.F5,i.Bb5,i.F5,i.D5,i.F5,i.Bb5]],bassCalm:[[i.C2,0,i.G2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,10,15,10,7,3]],arpExcited:[[0,3,7,10,15,19,22,19,15,10,7,3]],pulseWidth:.45,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0012,filterFreq:4800,filterType:"lowpass",attackTime:.002,releaseTime:.22,arpSpeed:.55}],sky:[{tempo:{calm:72,excited:100},melodyCalm:[[i.C5,0,i.G5,0,i.E5,0,i.G5,0],[i.D5,0,i.A5,0,i["F#5"],0,i.A5,0],[i.E5,0,i.B5,0,i["G#5"],0,i.B5,0]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.E6,i.C6,i.G5,i.E5],[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]]],bassCalm:[[i.C3,0,0,0,i.G3,0,0,0]],bassExcited:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],arpCalm:[[0,7,12,19,24,19,12,7]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.25,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"sine",vibratoRate:2,vibratoDepth:.015,filterFreq:2e3,filterType:"lowpass",attackTime:.1,releaseTime:.8,arpSpeed:1.8},{tempo:{calm:68,excited:95},melodyCalm:[[i.G5,0,0,i.D6,0,0,i.B5,0],[i.A5,0,0,i.E6,0,0,i["C#6"],0],[i.B5,0,0,i["F#6"],0,0,i["D#6"],0]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,0,0,i.D3,0]],bassExcited:[[i.G2,0,0,i.D3,0,i.G2,0,i.B2]],arpCalm:[[0,5,12,17,24,17,12,5]],arpExcited:[[0,5,7,12,17,19,24,19,17,12,7,5]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:1.5,vibratoDepth:.02,filterFreq:1800,filterType:"lowpass",attackTime:.12,releaseTime:1,arpSpeed:2},{tempo:{calm:78,excited:105},melodyCalm:[[i.F5,0,i.A5,0,i.C6,0,i.A5,0],[i.G5,0,i.B5,0,i.D6,0,i.B5,0],[i.A5,0,i["C#6"],0,i.E6,0,i["C#6"],0]],melodyExcited:[[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C5],[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5]],bassCalm:[[i.F3,0,0,0,i.C3,0,0,0]],bassExcited:[[i.F3,0,i.C3,0,i.F3,0,i.A3,0]],arpCalm:[[0,4,7,12,16,19,16,12,7,4]],arpExcited:[[0,4,7,12,16,19,24,28,24,19,16,12,7,4]],pulseWidth:.3,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.012,filterFreq:2200,filterType:"lowpass",attackTime:.08,releaseTime:.7,arpSpeed:1.6}]},gy={grassland:[{tempo:{calm:108,excited:138},melodyCalm:[[i.E4,i["F#4"],i["G#4"],i.B4,i.E5,i.B4,i["G#4"],i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],i.E5,i["C#5"],i.B4,i["G#4"]]],melodyExcited:[[i.E5,i["F#5"],i["G#5"],i.B5,i.E6,i.B5,i["G#5"],i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,i.E2,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],bassExcited:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,8,11,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,16,11,8,4]],pulseWidth:.4,drumStyle:"punchy",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.004,filterFreq:3500,filterType:"lowpass",attackTime:.008,releaseTime:.25,arpSpeed:.9}],coastal:[{tempo:{calm:95,excited:125},melodyCalm:[[i.B4,0,i["D#5"],i["F#5"],0,i.B5,i["F#5"],0],[i["C#5"],0,i.E5,i["G#5"],0,i["C#6"],i["G#5"],0]],melodyExcited:[[i.B5,i["D#6"],i["F#6"],i.B5,i["F#6"],i["D#6"],i.B5,i["F#5"]],[i["C#6"],i.E6,i["G#5"],i["C#6"],i["G#5"],i.E6,i["C#6"],i["G#5"]]],bassCalm:[[i.B2,0,0,i["F#3"],0,0,i.B2,0]],bassExcited:[[i.B2,0,i["F#3"],0,i.B2,i["C#3"],i["D#3"],0]],arpCalm:[[0,4,8,11,16,20,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,23,20,16,11,8,4]],pulseWidth:.35,drumStyle:"punchy",melodyWave:"triangle",bassWave:"sine",arpWave:"triangle",vibratoRate:4,vibratoDepth:.01,filterFreq:2800,filterType:"lowpass",attackTime:.04,releaseTime:.4,arpSpeed:1.1}],lava:[{tempo:{calm:150,excited:185},melodyCalm:[[i.B3,i.D4,i["F#4"],i.B4,i.D5,i.B4,i["F#4"],i.D4],[i.A3,i.C4,i.E4,i.A4,i.C5,i.A4,i.E4,i.C4]],melodyExcited:[[i.B4,i.D5,i["F#5"],i.B5,i.D6,i.B5,i["F#5"],i.D5],[i.A4,i.C5,i.E5,i.A5,i.C6,i.A5,i.E5,i.C5]],bassCalm:[[i.B2,i.B2,i["F#2"],i["F#2"],i.D2,i.D2,i.A2,i.A2]],bassExcited:[[i.B2,i.B2,i.B2,i["F#2"],i.D2,i.D2,i.D2,i.A2]],arpCalm:[[0,3,6,9,12,9,6,3]],arpExcited:[[0,3,6,9,12,15,18,15,12,9,6,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5500,filterType:"lowpass",attackTime:.001,releaseTime:.08,arpSpeed:.5}],city:[{tempo:{calm:128,excited:158},melodyCalm:[[i["F#4"],i.A4,i["C#5"],0,i["F#5"],0,i["C#5"],i.A4],[i["G#4"],i.B4,i["D#5"],0,i["G#5"],0,i["D#5"],i.B4]],melodyExcited:[[i["F#5"],i.A5,i["C#6"],i["F#6"],i["C#6"],i.A5,i["C#6"],i["F#6"]],[i["G#5"],i.B5,i.Eb6,i["G#5"],i.Eb6,i.B5,i.Eb6,i["G#5"]]],bassCalm:[[i["F#2"],0,i["C#3"],0,i["F#2"],0,i.A2,0]],bassExcited:[[i["F#2"],i["F#2"],i["C#3"],i["C#3"],i.A2,i.A2,i["C#3"],i["F#2"]]],arpCalm:[[0,4,7,11,14,18,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,21,25,21,18,14,11,7,4]],pulseWidth:.35,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:12,vibratoDepth:6e-4,filterFreq:6e3,filterType:"lowpass",attackTime:5e-4,releaseTime:.15,arpSpeed:.4}],sky:[{tempo:{calm:80,excited:110},melodyCalm:[[i.D5,0,i["F#5"],0,i.A5,0,i.D6,0],[i.E5,0,i["G#5"],0,i.B5,0,i.E6,0]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]],[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.E6,i.B5,i["G#5"]]],bassCalm:[[i.D3,0,0,0,0,0,i.A3,0]],bassExcited:[[i.D3,0,i.A3,0,i.D3,0,i["F#3"],0]],arpCalm:[[0,4,9,16,21,16,9,4]],arpExcited:[[0,4,9,12,16,21,24,21,16,12,9,4]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:3,vibratoDepth:.018,filterFreq:2400,filterType:"lowpass",attackTime:.08,releaseTime:.9,arpSpeed:1.5}]},yy=[{tempo:{calm:140,excited:175},melodyCalm:[[i.D4,i["F#4"],i.A4,i.D5,i.A4,i["F#4"],i.A4,i.D5],[i.E4,i.G4,i.B4,i.E5,i.B4,i.G4,i.B4,i.E5],[i["F#4"],i.A4,i.D5,i["F#5"],i.D5,i.A4,i.D5,i["F#5"]]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i.A5,i["F#5"],i.A5,i.D6],[i.E5,i.G5,i.B5,i.E6,i.B5,i.G5,i.B5,i.E6]],bassCalm:[[i.D2,i.D2,i.A2,i.A2,i.D2,i.D2,i.E2,i["F#2"]]],bassExcited:[[i.D2,i.D2,i.D2,i.A2,i.D2,i.D2,i.D2,i.E2]],arpCalm:[[0,4,7,12,16,19]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:7,vibratoDepth:.003,filterFreq:5e3,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.6},{tempo:{calm:135,excited:168},melodyCalm:[[i.A4,i["C#5"],i.E5,i.A5,i.E5,i["C#5"],i.E5,i.A5],[i.B4,i["D#5"],i["F#5"],i.B5,i["F#5"],i["D#5"],i["F#5"],i.B5],[i["C#5"],i.E5,i["G#5"],i["C#6"],i["G#5"],i.E5,i["G#5"],i["C#6"]]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.E6,i.A5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i["F#6"],i.B5]],bassCalm:[[i.A2,i.A2,i.E3,i.E3,i.A2,i.B2,i["C#3"],i.E3]],bassExcited:[[i.A2,i.A2,i.A2,i.E3,i.A2,i.B2,i["C#3"],i.E3]],arpCalm:[[0,4,8,12,16,20]],arpExcited:[[0,4,8,12,16,20,24,20,16,12,8,4]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0035,filterFreq:5200,filterType:"lowpass",attackTime:.002,releaseTime:.12,arpSpeed:.55}],vy=[{tempo:{calm:155,excited:190},melodyCalm:[[i.E4,i["G#4"],i.B4,i.E5,i["G#5"],i.B5,i["G#5"],i.E5],[i["F#4"],i.A4,i["C#5"],i["F#5"],i.A5,i["C#6"],i.A5,i["F#5"]],[i["G#4"],i.B4,i["D#5"],i["G#5"],i.B5,i.Eb6,i.B5,i["G#5"]]],melodyExcited:[[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.B5,i.E6,i["G#5"]],[i["F#5"],i.A5,i["C#6"],i["F#6"],i.A5,i["C#6"],i["F#6"],i.A5]],bassCalm:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],bassExcited:[[i.E2,i.E2,i.E2,i.B2,i.E2,i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,7,11,16,19,23,19,16,11,7,4]],arpExcited:[[0,4,7,11,16,19,23,28,23,19,16,11,7,4]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:9,vibratoDepth:.002,filterFreq:5800,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.45},{tempo:{calm:148,excited:185},melodyCalm:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.D5,i.F5,i.A5,i.D6,i.A5,i.F5,i.A5,i.D6],[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.Eb6,i.C6,i.G5,i.Eb5],[i.D5,i.F5,i.A5,i.D6,i.F6,i.D6,i.A5,i.F5]],bassCalm:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],bassExcited:[[i.C2,i.C2,i.C2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,12,15,19,24,19,15,12,7,3]],arpExcited:[[0,3,7,12,15,19,24,27,24,19,15,12,7,3]],pulseWidth:.12,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:8,vibratoDepth:.0025,filterFreq:5500,filterType:"lowpass",attackTime:.0015,releaseTime:.12,arpSpeed:.5}];function hf(e,t){let n;switch(t){case"mythic":n=vy;break;case"legendary":n=yy;break;case"rare":n=gy[e];break;case"common":default:n=my[e];break}const r=Math.floor(Math.random()*n.length);return n[r]}function xy(e,t="common"){const n=C.useRef(null),r=C.useRef(!1),a=C.useRef("calm"),o=C.useRef(null),c=C.useRef(0),h=C.useRef(0),m=C.useRef(0),y=C.useRef(0),S=C.useRef(e),j=C.useRef(t),E=C.useRef(hf(e,t));C.useEffect(()=>{S.current=e,j.current=t,E.current=hf(e,t)},[e,t]);const G=C.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),O=C.useCallback((U,I,V,H,z)=>{const N=G(),ee=N.createOscillator(),ie=N.createOscillator(),de=N.createGain(),ke=N.createBiquadFilter(),ue=N.createGain();ee.type=z.melodyWave,ie.type=z.melodyWave,ee.frequency.setValueAtTime(U,I),ie.frequency.setValueAtTime(U*1.003,I),ee.frequency.setValueAtTime(U*1.02,I),ee.frequency.exponentialRampToValueAtTime(U,I+.02);const me=N.createOscillator(),Y=N.createGain();me.type="sine",me.frequency.value=z.vibratoRate,Y.gain.value=U*z.vibratoDepth,me.connect(Y),Y.connect(ee.frequency),ke.type=z.filterType,ke.frequency.setValueAtTime(z.filterFreq,I),ke.Q.value=1,ee.connect(de),ie.connect(de),de.connect(ke),ke.connect(ue),ue.connect(N.destination);const J=I+z.attackTime;de.gain.setValueAtTime(0,I),de.gain.linearRampToValueAtTime(H,J),de.gain.setValueAtTime(H*.7,J+.005),de.gain.setValueAtTime(H*.6,I+V*.3),de.gain.linearRampToValueAtTime(0,I+V+z.releaseTime*.5),ue.gain.value=.5;const X=I+V+z.releaseTime;ee.start(I),ie.start(I),me.start(I),ee.stop(X),ie.stop(X),me.stop(X)},[G]),M=C.useCallback((U,I,V,H,z)=>{const N=G(),ee=N.createOscillator(),ie=N.createOscillator(),de=N.createGain(),ke=N.createBiquadFilter();ee.type=z.bassWave,ie.type=z.bassWave,ee.frequency.setValueAtTime(U*1.5,I),ee.frequency.exponentialRampToValueAtTime(U,I+.03),ie.frequency.setValueAtTime(U*.5,I),ke.type="lowpass",ke.frequency.value=Math.min(z.filterFreq*.5,800),ee.connect(de),ie.connect(de),de.connect(ke),ke.connect(N.destination),de.gain.setValueAtTime(0,I),de.gain.linearRampToValueAtTime(H,I+z.attackTime*.5),de.gain.setValueAtTime(H*.8,I+.02),de.gain.linearRampToValueAtTime(0,I+V),ee.start(I),ie.start(I),ee.stop(I+V),ie.stop(I+V)},[G]),Q=C.useCallback((U,I,V)=>{const H=G(),z=V==="heavy"?1.3:V==="airy"?.5:1;if(I==="kick"){const N=H.createOscillator(),ee=H.createGain();N.connect(ee),ee.connect(H.destination),N.type="square";const ie=V==="heavy"?200:150;N.frequency.setValueAtTime(ie,U),N.frequency.exponentialRampToValueAtTime(40,U+.08),N.frequency.exponentialRampToValueAtTime(20,U+.12),ee.gain.setValueAtTime(0,U),ee.gain.linearRampToValueAtTime(.3*z,U+.002),ee.gain.exponentialRampToValueAtTime(.01,U+.12),N.start(U),N.stop(U+.12)}else if(I==="snare"){const N=H.createOscillator(),ee=H.createGain();N.connect(ee),ee.connect(H.destination),N.type="square",N.frequency.setValueAtTime(180,U),N.frequency.exponentialRampToValueAtTime(100,U+.04),ee.gain.setValueAtTime(0,U),ee.gain.linearRampToValueAtTime(.15*z,U+.001),ee.gain.exponentialRampToValueAtTime(.01,U+.06),N.start(U),N.stop(U+.06);const ie=.08,de=Math.floor(H.sampleRate*ie),ke=H.createBuffer(1,de,H.sampleRate),ue=ke.getChannelData(0);let me=0;for(let he=0;he<de;he++)he%4===0&&(me=Math.random()>.5?1:-1),ue[he]=me;const Y=H.createBufferSource();Y.buffer=ke;const J=H.createGain(),X=H.createBiquadFilter();X.type="highpass",X.frequency.value=V==="electronic"?5e3:3500,Y.connect(X),X.connect(J),J.connect(H.destination),J.gain.setValueAtTime(0,U),J.gain.linearRampToValueAtTime(.12*z,U+.001),J.gain.exponentialRampToValueAtTime(.01,U+ie),Y.start(U),Y.stop(U+ie)}else{const N=V==="airy"?.04:.025,ee=Math.floor(H.sampleRate*N),ie=H.createBuffer(1,ee,H.sampleRate),de=ie.getChannelData(0);let ke=0;for(let J=0;J<ee;J++)J%2===0&&(ke=Math.random()>.5?1:-1),de[J]=ke;const ue=H.createBufferSource();ue.buffer=ie;const me=H.createBiquadFilter();me.type="highpass",me.frequency.value=V==="electronic"?1e4:8e3;const Y=H.createGain();ue.connect(me),me.connect(Y),Y.connect(H.destination),Y.gain.setValueAtTime(0,U),Y.gain.linearRampToValueAtTime(.06*z,U+.001),Y.gain.exponentialRampToValueAtTime(.01,U+N),ue.start(U),ue.stop(U+N)}},[G]),w=C.useCallback((U,I,V,H,z,N)=>{const ee=G(),de=H*N.arpSpeed/I.length,ke=ee.createBiquadFilter();ke.type="highpass",ke.frequency.value=400,ke.connect(ee.destination),I.forEach((ue,me)=>{const Y=U*Math.pow(2,ue/12),J=V+me*de,X=ee.createOscillator(),he=ee.createGain();X.type=N.arpWave,X.frequency.setValueAtTime(Y,J),X.connect(he),he.connect(ke),he.gain.setValueAtTime(0,J),he.gain.linearRampToValueAtTime(z,J+N.attackTime*.3),he.gain.setValueAtTime(z*.7,J+.005),he.gain.linearRampToValueAtTime(0,J+de*.9),X.start(J),X.stop(J+de+.01)})},[G]),x=C.useCallback(()=>{const U=G(),I=.1,V=a.current==="excited",H=E.current,z=j.current==="legendary"||j.current==="mythic"||j.current==="rare",ee=60/(V?H.tempo.excited:H.tempo.calm),ie=V?H.melodyExcited:H.melodyCalm,de=V?H.bassExcited:H.bassCalm,ke=V?H.arpExcited:H.arpCalm;for(;c.current<U.currentTime+I;){const ue=h.current%8,me=m.current%ie.length,Y=m.current%de.length,J=m.current%ke.length,X=ie[me],he=de[Y],be=ke[J];ue===0&&Q(c.current,"kick",H.drumStyle),ue===4&&Q(c.current,V||z?"snare":"kick",H.drumStyle),V||z?(ue%2===0&&Q(c.current,"hihat",H.drumStyle),Q(c.current+ee/2,"hihat",H.drumStyle)):ue%2===0&&Q(c.current+ee/2,"hihat",H.drumStyle);const Le=X[ue];if(Le>0){const Ve=z?.08:.06;O(Le,c.current,ee*.8,Ve,H)}const Ae=he[ue];if(Ae>0){const Ve=z?.1:.08;M(Ae,c.current,ee*.9,Ve,H)}if(ue%4===0){const Ve=i.C4,Ie=z?.04:.03;w(Ve,be,c.current,ee*2,Ie,H)}ue===7&&(y.current++,y.current%2===0&&m.current++),c.current+=ee,h.current++}},[G,O,M,Q,w]),b=C.useCallback(()=>{if(r.current)return;const U=G();U.state==="suspended"&&U.resume(),r.current=!0,a.current="calm",c.current=U.currentTime,h.current=0,m.current=0,y.current=0,o.current=window.setInterval(x,25)},[G,x]),B=C.useCallback(()=>{o.current&&(clearInterval(o.current),o.current=null),r.current=!1},[]),K=C.useCallback(U=>{a.current!==U&&(a.current=U,m.current=0)},[]);return C.useEffect(()=>()=>{B(),n.current&&(n.current.close(),n.current=null)},[B]),{start:b,stop:B,setIntensity:K}}function yr(e){var n;const t={success:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.C5,i.E5,i.G5,i.C6].forEach((o,c)=>{const h=r.createOscillator(),m=r.createGain();h.connect(m),m.connect(r.destination),h.type="square",h.frequency.setValueAtTime(o,r.currentTime+c*.08),m.gain.setValueAtTime(0,r.currentTime+c*.08),m.gain.linearRampToValueAtTime(.2,r.currentTime+c*.08+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+c*.08+.15),h.start(r.currentTime+c*.08),h.stop(r.currentTime+c*.08+.15)})},fail:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.G4,i.E4,i.C4].forEach((h,m)=>{const y=r.createOscillator(),S=r.createGain();y.connect(S),S.connect(r.destination),y.type="square",y.frequency.setValueAtTime(h,r.currentTime+m*.12),S.gain.setValueAtTime(0,r.currentTime+m*.12),S.gain.linearRampToValueAtTime(.15,r.currentTime+m*.12+.002),S.gain.exponentialRampToValueAtTime(.01,r.currentTime+m*.12+.15),y.start(r.currentTime+m*.12),y.stop(r.currentTime+m*.12+.15)});const o=r.createOscillator(),c=r.createGain();o.connect(c),c.connect(r.destination),o.type="square",o.frequency.setValueAtTime(1e3,r.currentTime+.4),o.frequency.exponentialRampToValueAtTime(1500,r.currentTime+.45),c.gain.setValueAtTime(0,r.currentTime+.4),c.gain.linearRampToValueAtTime(.08,r.currentTime+.402),c.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),o.start(r.currentTime+.4),o.stop(r.currentTime+.5)},sparkle:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(1200,r.currentTime),a.frequency.exponentialRampToValueAtTime(2400,r.currentTime+.05),a.frequency.exponentialRampToValueAtTime(1800,r.currentTime+.1),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.1,r.currentTime+.002),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),a.start(r.currentTime),a.stop(r.currentTime+.1)},brush:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=Math.floor(r.sampleRate*.08),o=r.createBuffer(1,a,r.sampleRate),c=o.getChannelData(0);let h=0;for(let j=0;j<a;j++)j%4===0&&(h=Math.random()>.5?1:-1),c[j]=h;const m=r.createBufferSource();m.buffer=o;const y=r.createGain(),S=r.createBiquadFilter();S.type="bandpass",S.frequency.value=1500,m.connect(S),S.connect(y),y.connect(r.destination),y.gain.setValueAtTime(0,r.currentTime),y.gain.linearRampToValueAtTime(.05,r.currentTime+.002),y.gain.exponentialRampToValueAtTime(.01,r.currentTime+.08),m.start(r.currentTime),m.stop(r.currentTime+.08)},capture:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(300,r.currentTime),a.frequency.exponentialRampToValueAtTime(600,r.currentTime+.05),a.frequency.exponentialRampToValueAtTime(400,r.currentTime+.1),a.frequency.exponentialRampToValueAtTime(800,r.currentTime+.15),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.2,r.currentTime+.002),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),a.start(r.currentTime),a.stop(r.currentTime+.2)},"legendary-intro":()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.D3,i.A3,i.D4,i["F#4"]].forEach((o,c)=>{const h=r.createOscillator(),m=r.createGain();h.connect(m),m.connect(r.destination),h.type="square",h.frequency.setValueAtTime(o*.5,r.currentTime+c*.2),h.frequency.exponentialRampToValueAtTime(o,r.currentTime+c*.2+.05),m.gain.setValueAtTime(0,r.currentTime+c*.2),m.gain.linearRampToValueAtTime(.25,r.currentTime+c*.2+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+c*.2+.25),h.start(r.currentTime+c*.2),h.stop(r.currentTime+c*.2+.25)}),setTimeout(()=>{[i.D4,i["F#4"],i.A4,i.D5].forEach(c=>{const h=r.createOscillator(),m=r.createGain();h.connect(m),m.connect(r.destination),h.type="square",h.frequency.setValueAtTime(c,r.currentTime),m.gain.setValueAtTime(0,r.currentTime),m.gain.linearRampToValueAtTime(.15,r.currentTime+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),h.start(r.currentTime),h.stop(r.currentTime+.5)})},900)},wobble:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(180,r.currentTime),a.frequency.exponentialRampToValueAtTime(120,r.currentTime+.05),a.frequency.exponentialRampToValueAtTime(200,r.currentTime+.1),a.frequency.exponentialRampToValueAtTime(100,r.currentTime+.15),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.15,r.currentTime+.005),o.gain.setValueAtTime(.12,r.currentTime+.05),o.gain.linearRampToValueAtTime(.15,r.currentTime+.1),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),a.start(r.currentTime),a.stop(r.currentTime+.2)},click:()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume();const a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(800,r.currentTime),a.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.03),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.4,r.currentTime+.005),o.gain.setValueAtTime(.35,r.currentTime+.02),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),a.start(r.currentTime),a.stop(r.currentTime+.1);const c=r.createOscillator(),h=r.createGain();c.connect(h),h.connect(r.destination),c.type="square",c.frequency.setValueAtTime(1600,r.currentTime+.05),c.frequency.exponentialRampToValueAtTime(2e3,r.currentTime+.08),h.gain.setValueAtTime(0,r.currentTime+.05),h.gain.linearRampToValueAtTime(.3,r.currentTime+.055),h.gain.exponentialRampToValueAtTime(.01,r.currentTime+.12),c.start(r.currentTime+.05),c.stop(r.currentTime+.12)}};try{(n=t[e])==null||n.call(t)}catch(r){console.warn("Sound playback failed:",r)}}const Up={grassland:{id:"grassland",name:"Sparkle Meadows",description:"A peaceful meadow filled with wildflowers and friendly creatures",colors:{primary:"#22C55E",secondary:"#86EFAC",accent:"#FDE047",background:"#ECFDF5"},particles:["","","",""]},coastal:{id:"coastal",name:"Crystal Shores",description:"Sandy beaches and sparkling waves hide aquatic robot friends",colors:{primary:"#0EA5E9",secondary:"#7DD3FC",accent:"#FCD34D",background:"#F0F9FF"},particles:["","","",""]},lava:{id:"lava",name:"Ember Peaks",description:"Volcanic mountains where fire-forged creatures dwell",colors:{primary:"#EF4444",secondary:"#FB923C",accent:"#FBBF24",background:"#1C1917"},particles:["","","",""]},city:{id:"city",name:"Neon District",description:"A futuristic city where digital creatures roam the streets",colors:{primary:"#A855F7",secondary:"#E879F9",accent:"#22D3EE",background:"#0F0B1A"},particles:["","","",""]},sky:{id:"sky",name:"Cloud Kingdom",description:"Floating islands high above where sky creatures soar",colors:{primary:"#F8FAFC",secondary:"#BAE6FD",accent:"#FDE68A",background:"#E0F2FE"},particles:["","","",""]}},pf=["grassland","coastal","lava","city","sky"];function wy(){return pf[Math.floor(Math.random()*pf.length)]}function by(e){return Up[e]}const Vp="sparkle-app-settings",mf={sessionDurationMinutes:2};function qp(){try{const e=localStorage.getItem(Vp);if(e)return{...mf,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings:",e)}return mf}function ky(e){try{localStorage.setItem(Vp,JSON.stringify(e))}catch(t){console.warn("Failed to save settings:",t)}}function Kp(){return qp().sessionDurationMinutes*60}const gf=.5,Cy=3,yf=.5,jy=4,Sy=.12,Ey=80,Ty=40,ua=10;function Hp({buddy:e,containerWidth:t,containerHeight:n,activityScore:r=0}){const[a,o]=C.useState(!1),c=C.useRef(null),h=C.useRef(null),[m,y]=C.useState(null),S=C.useRef(0),j=Math.min(Ey,Math.max(Ty,t*Sy));if(C.useEffect(()=>{o(!1);const O=new Image;O.src=e.imageUrl,O.onload=()=>o(!0)},[e.imageUrl]),C.useEffect(()=>{t===0||n===0||h.current||(h.current={x:t*.7,y:n*.15,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,rotation:0,rotationSpeed:(Math.random()-.5)*2,flipX:!1},y({...h.current}))},[t,n]),C.useEffect(()=>{if(t===0||n===0||!h.current)return;const O=1+r/100*(Cy-1),M=1+r/100*(jy/yf-1),Q=w=>{if(!h.current)return;const x=S.current?Math.min((w-S.current)/16.67,3):1;S.current=w;const b=h.current,B=j/2,K=ua+B,U=t-ua-B,I=ua+B,V=n-ua-B;let H=b.x+b.vx*gf*O*x,z=b.y+b.vy*gf*O*x,N=b.vx,ee=b.vy,ie=b.flipX;H<=K?(H=K,N=Math.abs(N),ie=!ie):H>=U&&(H=U,N=-Math.abs(N),ie=!ie),z<=I?(z=I,ee=Math.abs(ee)):z>=V&&(z=V,ee=-Math.abs(ee));const de=b.rotation+b.rotationSpeed*yf*M*x;r>50&&Math.random()<.005*x&&(b.rotationSpeed=(Math.random()-.5)*4),h.current={x:H,y:z,vx:N,vy:ee,rotation:de,rotationSpeed:b.rotationSpeed,flipX:ie},y({...h.current}),c.current=requestAnimationFrame(Q)};return c.current=requestAnimationFrame(Q),()=>{c.current&&cancelAnimationFrame(c.current)}},[t,n,r,j]),!m||t===0||n===0)return null;const E=1+r/100*.1*Math.sin(Date.now()/200),G=r/100;return u.jsxs("div",{className:"absolute pointer-events-none",style:{left:`${m.x}px`,top:`${m.y}px`,transform:`
          translate(-50%, -50%) 
          rotate(${m.rotation}deg) 
          scaleX(${m.flipX?-1:1})
          scale(${E})
        `,filter:`drop-shadow(0 4px 8px rgba(0,0,0,0.3)) ${G>.3?`drop-shadow(0 0 ${8*G}px rgba(255, 200, 100, ${G*.6}))`:""}`,opacity:a?1:0,transition:"opacity 0.3s ease",willChange:"transform"},children:[u.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:j,height:j,objectFit:"contain"}}),r>70&&u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4) 0%, transparent 50%)",animation:"pulse 0.5s ease-in-out infinite"}})]})}function Yp({getDebugInfo:e,containerWidth:t,containerHeight:n,videoWidth:r,videoHeight:a}){const[o,c]=C.useState(null);C.useEffect(()=>{const Q=setInterval(()=>{const w=e();c(w)},50);return()=>clearInterval(Q)},[e]);const h=t/r,m=n/a,y=Math.min(h,m),S=r*y,j=a*y,E=(t-S)/2,G=(n-j)/2,O=Q=>{const w=r-Q;return E+w*y},M=Q=>G+Q*y;return o?u.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50",children:[u.jsxs("svg",{className:"w-full h-full",style:{overflow:"visible"},children:[o.brushingRegion&&u.jsx("rect",{x:O(o.brushingRegion.x+o.brushingRegion.width),y:M(o.brushingRegion.y),width:o.brushingRegion.width*y,height:o.brushingRegion.height*y,fill:"rgba(0, 255, 0, 0.1)",stroke:"#00ff00",strokeWidth:"2",strokeDasharray:"8,4"}),o.faceRegion&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:O(o.faceRegion.x+o.faceRegion.width/2),y:M(o.faceRegion.y),width:o.faceRegion.width*y,height:o.faceRegion.height*y,fill:"none",stroke:"#ff6600",strokeWidth:"2"}),u.jsx("rect",{x:O(o.faceRegion.x+o.faceRegion.width*.35),y:M(o.faceRegion.y+o.faceRegion.height*.1),width:o.faceRegion.width*.7*y,height:o.faceRegion.height*.5*y,fill:"rgba(255, 0, 0, 0.3)",stroke:"#ff0000",strokeWidth:"1"})]}),o.zones.map(Q=>{const w=Q.bounds.x*r,x=Q.bounds.y*a,b=Q.bounds.width*r,B=Q.bounds.height*a;return u.jsxs("g",{children:[u.jsx("rect",{x:O(w+b),y:M(x),width:b*y,height:B*y,fill:Q.hasMotion?"rgba(0, 255, 0, 0.35)":"rgba(100, 200, 255, 0.15)",stroke:Q.hasMotion?"#00ff00":"#66ccff",strokeWidth:Q.hasMotion?3:2,rx:8}),u.jsx("text",{x:O(w+b/2),y:M(x+B/2),fill:Q.hasMotion?"#00ff00":"#ffffff",fontSize:"14",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{textShadow:"0 0 4px black, 0 0 2px black"},children:Q.hasMotion?`BRUSHING ${Q.motionLevel.toFixed(0)}%`:"Move toothbrush here"})]},Q.id)})]}),u.jsxs("div",{className:"absolute top-2 left-2 bg-black/90 text-white text-xs p-2 rounded font-mono max-w-[220px]",children:[u.jsx("div",{className:"font-bold mb-1 text-yellow-400",children:"DEBUG MODE"}),u.jsx("div",{className:o.handMotionDetected?"text-green-400 font-bold text-sm":"text-gray-400",children:o.handMotionDetected?" BRUSHING DETECTED":" No motion"}),u.jsxs("div",{className:"text-gray-300",children:["Motion level: ",o.frameMotionTotal.toFixed(0)]}),o.zones[0]&&u.jsxs("div",{className:"text-gray-300",children:["Zone motion: ",o.zones[0].motionLevel.toFixed(1),"%"]}),u.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-600 text-[10px] text-gray-400",children:[u.jsx("span",{className:"text-cyan-400",children:"Blue box"})," = detection zone",u.jsx("br",{}),u.jsx("span",{className:"text-orange-400",children:"Orange"})," = face | ",u.jsx("span",{className:"text-red-400",children:"Red"})," = ignored"]})]})]}):u.jsx("div",{className:"absolute inset-0 pointer-events-none z-50",children:u.jsxs("div",{className:"absolute top-2 left-2 bg-black/80 text-white text-xs p-2 rounded font-mono",children:[u.jsx("div",{className:"font-bold text-yellow-400",children:"DEBUG MODE"}),u.jsx("div",{className:"text-gray-400",children:"Waiting for data..."})]})})}function Ny({selectedBuddy:e,onVideoReady:t,onContainerSize:n,activityScore:r=0,debugMode:a=!1,getDebugInfo:o}){const{isReady:c,error:h,registerVideoElement:m}=wo(),y=C.useRef(null),S=C.useRef(null),j=C.useRef(!1),[E,G]=C.useState({width:0,height:0}),[O,M]=C.useState({width:640,height:480}),Q=C.useCallback(w=>{console.log("[CameraView] Video ref callback:",{hasElement:!!w}),y.current=w,w&&m(w)},[m]);return C.useEffect(()=>{const w=y.current;!w||!c||j.current||w.readyState>=2&&w.videoWidth>0&&(console.log("[CameraView] Video ready, calling onVideoReady"),j.current=!0,M({width:w.videoWidth,height:w.videoHeight}),t==null||t(w))},[c,t]),C.useEffect(()=>{const w=y.current;if(!w||j.current)return;const x=()=>{w.readyState>=2&&w.videoWidth>0&&!j.current&&(console.log("[CameraView] Video ready (from polling), calling onVideoReady"),j.current=!0,M({width:w.videoWidth,height:w.videoHeight}),t==null||t(w))},b=setInterval(x,100);return x(),()=>clearInterval(b)},[t]),C.useEffect(()=>{const w=S.current;if(!w)return;const x=()=>{const B=w.clientWidth,K=w.clientHeight;G({width:B,height:K}),n==null||n(B,K)};x();const b=new ResizeObserver(x);return b.observe(w),()=>b.disconnect()},[n]),C.useEffect(()=>{var w,x,b,B,K;console.log("[CameraView] Mounted/Updated",{hasVideoRef:!!y.current,isReady:c,error:h,videoReadyState:(w=y.current)==null?void 0:w.readyState,videoPaused:(x=y.current)==null?void 0:x.paused,videoWidth:(b=y.current)==null?void 0:b.videoWidth,videoHeight:(B=y.current)==null?void 0:B.videoHeight,srcObject:!!((K=y.current)!=null&&K.srcObject)})}),u.jsxs("div",{ref:S,className:"relative w-full h-full bg-purple-900/30 rounded-2xl overflow-hidden",children:[u.jsx("video",{ref:Q,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!c&&!h&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/50",children:u.jsx("div",{className:"text-lg text-purple-300 animate-pulse",children:"Connecting..."})}),h&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/50 p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-red-300",children:h})]})}),e&&c&&E.width>0&&u.jsx(Hp,{buddy:e,containerWidth:E.width,containerHeight:E.height,activityScore:r}),a&&o&&E.width>0&&u.jsx(Yp,{getDebugInfo:o,containerWidth:E.width,containerHeight:E.height,videoWidth:O.width,videoHeight:O.height}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2 flex justify-center",children:u.jsx("div",{className:"bg-black/50 rounded-full px-3 py-1 text-xs text-white",children:"Move your brush to clean!"})})]})}const vf={},Ay=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","s2-moss-mole","s2-crystal-caterpillar","s2-hedge-hog","s2-pollen-bot","s2-grass-slime","s2-acorn-knight","s2-daisy-drone","s2-cricket-bot","s2-emerald-elk","s2-mushroom-giant","s2-willow-wisp","s2-mega-slime","s2-crystal-guardian","s2-nature-computer","s3-phantom-rabbit","s3-dino-beetle","s3-ghost-flower","s3-mini-raptor","s3-wisp-bug","s3-fossil-frog","s3-shade-snake","s3-dino-chick","s3-phantom-stag","s3-tricerabot","s3-ghost-treant","s3-stego-tank","s3-spirit-king","s3-brachiobot","s2-sand-dollar-bot","s2-crystal-urchin","s2-bubble-blob","s2-starfish-drone","s2-barnacle-cluster","s2-kelp-dancer","s2-puffer-tank","s2-anemone-bot","s2-pearl-dragon","s2-giant-clam","s2-coral-golem","s2-crystal-shark","s2-deep-crystal","s3-ghost-fish","s3-ammonite-bot","s3-phantom-crab","s3-dunkle-pup","s3-wraith-jellyfish","s3-sea-scorpion","s3-ghost-eel","s3-nautilus-bot","s3-phantom-kraken","s3-mega-shark","s3-ship-ghost","s3-plesio-sub","s3-sea-phantom","s2-ember-sprite","s2-ruby-beetle","s2-lava-slime","s2-smoke-puff","s2-fire-ant","s2-sulfur-frog","s2-obsidian-crab","s2-spark-lizard","s3-solar-wisp","s3-basalt-golem","s3-lava-slug","s3-vent-worm","s3-flame-moth","s3-boiling-blob","s3-glass-shard","s3-volcano-phantom","s3-rex-supreme","s3-phoenix-ghost","s3-allo-hunter","s3-inferno-lord","s2-wifi-wisp","s2-graffiti-blob","s2-pipe-critter","s2-alley-cat","s2-meter-mite","s2-cable-snake","s2-vent-crawler","s2-hydrant-hound","s3-arcade-ghost","s3-concrete-fossil","s3-neon-phantom","s3-steam-bot","s3-holo-owl","s3-sonar-bat","s3-power-grid","s3-error-sprite","s3-train-phantom","s3-carno-cop","s3-theater-ghost","s3-urban-raptor","s3-city-specter","s2-breeze-sprite","s2-cloud-puff","s2-thunder-bird","s2-balloon-bug","s2-contrail-cat","s2-mist-sprite","s2-thermal-rider","s2-snowflake-sprite","s3-aurora-wisp","s3-moon-moth","s3-strato-sphinx","s3-jet-rider","s3-cosmic-dust","s3-rainbow-owl","s3-hail-hopper","s3-sky-whale","s3-moon-phantom","s3-quetz-carrier","s3-comet-specter","s3-ptero-titan","s3-sky-spirit","binsters-claymars"],Py=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function cn({creature:e,size:t=200,showGunk:n=!1,gunkLevel:r=0,animated:a=!0,className:o=""}){const[c,h]=C.useState(!1),[m,y]=C.useState(!1),S=Ay.includes(e.id)&&!c,j=Py.includes(e.id)&&!m,E=e.id in vf,G=n&&r>=90&&j,O=e.rarity==="mythic",M=e.rarity==="legendary",Q=e.rarity==="rare",w=O?30:M?20:Q?10:0,x=O?"#F97316":M?"#FFD700":"#60A5FA",b=n?Math.max(0,100-r)/100:1,B=n&&!G?Math.min(.8,r/100):0,K=n&&!G?Math.min(100,r*1.5):0,U=n&&!G?Math.max(0,(r-40)/60):0,I={width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},V={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",filter:w>0&&b>.5?`drop-shadow(0 0 ${w*b}px ${x})`:void 0,transition:"filter 0.3s ease"},H={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:K>0?`hue-rotate(${K}deg) saturate(${1+K/100}) brightness(${1-K/300})`:void 0,transition:"filter 0.3s ease"},z={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/vibe-brushing/creatures/gunk-overlay.png)",backgroundSize:"cover",backgroundPosition:"center top",opacity:B,pointerEvents:"none",mixBlendMode:"multiply",transition:"opacity 0.3s ease"},N={position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"20%",background:"radial-gradient(ellipse at 35% 50%, rgba(255,0,0,0.8) 0%, transparent 40%), radial-gradient(ellipse at 65% 50%, rgba(255,0,0,0.8) 0%, transparent 40%)",opacity:U,pointerEvents:"none",filter:"blur(2px)",transition:"opacity 0.3s ease"};if(S){const ee={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:"drop-shadow(0 0 15px rgba(0, 255, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 0, 0, 0.3))"};if(G)return u.jsx("div",{style:I,className:o,children:u.jsx("div",{style:{...V,filter:"drop-shadow(0 0 20px rgba(0, 100, 0, 0.8))"},className:a?"animate-creature-idle":"",children:u.jsx("img",{src:`/vibe-brushing/creatures/${e.id}-possessed.png`,alt:`${e.name} (Possessed)`,style:ee,onError:()=>y(!0)})})});if(E){const ie=vf[e.id],de=ie.frameWidth/ie.frameHeight;let ke,ue;de>=1?(ke=t,ue=t/de):(ue=t,ke=t*de);const me={width:t,height:t,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},Y=`spritesheet-grid-${ie.cols}x${ie.rows}`,J={width:ke,height:ue,backgroundImage:`url(/vibe-brushing/creatures/${e.id}-spritesheet.png)`,backgroundSize:`${ie.cols*100}% ${ie.rows*100}%`,backgroundPosition:"0% 0%",backgroundRepeat:"no-repeat",filter:K>0?`hue-rotate(${K}deg) saturate(${1+K/100}) brightness(${1-K/300})`:void 0,animation:a?`${Y} ${ie.animationDuration}s linear infinite`:void 0};return u.jsxs("div",{style:I,className:o,children:[u.jsx("div",{style:V,children:u.jsx("div",{style:me,children:u.jsx("div",{style:J,"aria-label":e.name})})}),n&&r>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:z,className:"animate-gunk-drip"}),U>0&&u.jsx("div",{style:N,className:"animate-pulse-glow"})]})]})}return u.jsxs("div",{style:I,className:o,children:[u.jsx("div",{style:V,className:a?"animate-creature-idle":"",children:u.jsx("img",{src:`/vibe-brushing/creatures/${e.id}.png`,alt:e.name,style:H,onError:()=>h(!0)})}),n&&r>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:z,className:a?"animate-gunk-drip":""}),U>0&&u.jsx("div",{style:N,className:a?"animate-pulse-glow":""})]})]})}return u.jsx("div",{style:I,className:o,children:u.jsx(_y,{creature:e,size:t,animated:a,cleanProgress:b,gunkOpacity:B,redEyeOpacity:U,glowAmount:w,glowColor:x})})}function _y({creature:e,size:t,animated:n,cleanProgress:r,gunkOpacity:a,redEyeOpacity:o,glowAmount:c,glowColor:h}){const m={grassland:{primary:"#7FD858",secondary:"#FFB6C1",accent:"#FFD700"},coastal:{primary:"#4FC3F7",secondary:"#FFE082",accent:"#FF7043"},lava:{primary:"#FF7043",secondary:"#FFD54F",accent:"#F44336"},city:{primary:"#BA68C8",secondary:"#64B5F6",accent:"#FF4081"},sky:{primary:"#81D4FA",secondary:"#FFF59D",accent:"#FFFFFF"},all:{primary:"#F97316",secondary:"#FBBF24",accent:"#EF4444"}},y=m[e.region]||m.grassland,S=e.rarity==="legendary";return u.jsxs("svg",{viewBox:"0 0 100 100",width:t,height:t,style:{filter:c>0&&r>.5?`drop-shadow(0 0 ${c*r}px ${h})`:void 0},className:n?"animate-creature-idle":"",children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:`fallback-body-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:y.primary,stopOpacity:"1"}),u.jsx("stop",{offset:"100%",stopColor:y.primary,stopOpacity:"0.7"})]}),u.jsxs("radialGradient",{id:`fallback-highlight-${e.id}`,cx:"30%",cy:"30%",r:"60%",children:[u.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.6"}),u.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})]}),u.jsx("ellipse",{cx:"50",cy:"55",rx:S?35:28,ry:S?32:26,fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"2"}),u.jsx("ellipse",{cx:"50",cy:"55",rx:S?35:28,ry:S?32:26,fill:`url(#fallback-highlight-${e.id})`}),u.jsx("ellipse",{cx:"40",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),u.jsx("ellipse",{cx:"60",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),u.jsx("ellipse",{cx:"42",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),u.jsx("ellipse",{cx:"62",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),u.jsx("ellipse",{cx:"43",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),u.jsx("ellipse",{cx:"63",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),u.jsx("path",{d:"M 44 65 Q 50 70 56 65",fill:"none",stroke:"#1A1A1A",strokeWidth:"2",strokeLinecap:"round"}),u.jsx("ellipse",{cx:"32",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),u.jsx("ellipse",{cx:"68",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),e.monsterType.includes("bunny")||e.monsterType.includes("rabbit")?u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{cx:"35",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),u.jsx("ellipse",{cx:"65",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("cat")||e.monsterType.includes("kitten")?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M 30 40 L 25 20 L 40 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),u.jsx("path",{d:"M 70 40 L 75 20 L 60 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("dog")||e.monsterType.includes("pup")?u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{cx:"28",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(-15 28 42)"}),u.jsx("ellipse",{cx:"72",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(15 72 42)"})]}):S?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M 35 30 L 25 10 L 40 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),u.jsx("path",{d:"M 65 30 L 75 10 L 60 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),u.jsx("path",{d:"M 50 28 L 50 8",stroke:y.accent,strokeWidth:"3",strokeLinecap:"round"})]}):null,S&&u.jsx("g",{children:u.jsx("path",{d:"M 35 18 L 35 5 L 42 12 L 50 0 L 58 12 L 65 5 L 65 18",fill:"#FFD700",stroke:"#B8860B",strokeWidth:"1"})}),a>0&&u.jsxs("g",{opacity:a,children:[u.jsx("ellipse",{cx:"50",cy:"50",rx:"30",ry:"28",fill:"#32CD32",opacity:"0.5"}),u.jsx("path",{d:"M 25 35 Q 30 45 25 55 Q 20 65 30 70",fill:"#228B22",opacity:"0.6"}),u.jsx("path",{d:"M 75 35 Q 70 45 75 55 Q 80 65 70 70",fill:"#228B22",opacity:"0.6"}),u.jsx("circle",{cx:"35",cy:"42",r:"4",fill:"#32CD32"}),u.jsx("circle",{cx:"62",cy:"65",r:"5",fill:"#228B22"}),u.jsx("circle",{cx:"55",cy:"38",r:"3",fill:"#2E8B2E"})]}),o>0&&u.jsxs("g",{opacity:o,children:[u.jsx("ellipse",{cx:"40",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&u.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite"})}),u.jsx("ellipse",{cx:"60",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&u.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite",begin:"0.2s"})})]})]})}function Dy({creature:e,activeZones:t,overallProgress:n,compact:r=!1}){const a=e.region==="all"?"grassland":e.region,o=Up[a],c=Math.max(0,100-n),h=C.useMemo(()=>n>=100?"sparkling":n>=75?"happy":n>=50?"hopeful":n>=25?"waking":"gunked",[n]),m={gunked:"",waking:"",hopeful:"",happy:"",sparkling:""}[h];return r?u.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 bg-purple-900/40 rounded-xl backdrop-blur-sm",children:[u.jsxs("div",{className:`relative shrink-0 ${t.length>0?"animate-wiggle":""}`,style:{width:60,height:60},children:[u.jsx(cn,{creature:e,size:60,showGunk:!0,gunkLevel:c,animated:!0}),n>=100&&u.jsx("div",{className:"absolute -top-1 -right-1 text-lg",children:""})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:m}),u.jsx("span",{className:"text-sm font-medium text-white truncate",children:e.name}),e.rarity!=="common"&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),u.jsx("div",{className:"h-2 w-full rounded-full bg-purple-900/50 overflow-hidden",children:u.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":o.colors.primary}})}),u.jsxs("div",{className:"flex justify-between mt-1",children:[u.jsx("span",{className:"text-[10px] text-purple-300",children:n>=100?" Clean!":"Keep brushing"}),u.jsxs("span",{className:"text-[10px] text-purple-300",children:[Math.round(n),"%"]})]})]})]}):u.jsxs("div",{className:"relative h-full flex flex-col",children:[u.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${o.colors.background}80, ${o.colors.primary}40)`,boxShadow:e.rarity==="mythic"?"0 0 40px #F97316, 0 0 60px #F9731680":e.rarity==="legendary"?`0 0 30px ${o.colors.accent}60`:e.rarity==="rare"?`0 0 20px ${o.colors.primary}40`:"none"},children:[t.length>0&&u.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((y,S)=>u.jsx("div",{className:"absolute w-2 h-2 rounded-full animate-ping",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*70}%`,backgroundColor:o.colors.accent,animationDelay:`${S*.1}s`,animationDuration:"1s"}},S))}),u.jsxs("div",{className:`relative ${t.length>0?"animate-wiggle":""}`,children:[u.jsx(cn,{creature:e,size:140,showGunk:!0,gunkLevel:c,animated:!0}),n>=100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((y,S)=>u.jsx("div",{className:"absolute text-xl animate-sparkle-float",style:{left:`${10+S%4*25}%`,top:`${10+Math.floor(S/4)*40}%`,animationDelay:`${S*.15}s`},children:""},S))})]}),u.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1.5 px-2 py-1 rounded-full text-white text-sm",style:{backgroundColor:`${o.colors.primary}CC`},children:[u.jsx("span",{className:"text-base",children:m}),u.jsx("span",{className:"font-medium",children:e.name}),e.rarity!=="common"&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),u.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-white text-sm font-bold bg-black/40 backdrop-blur-sm",children:[Math.round(n),"%"]}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:u.jsxs("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden backdrop-blur-sm relative",children:[u.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":o.colors.accent}}),t.length>0&&n<100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow animate-pulse",children:"Brushing..."})}),n>=100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow",children:" Clean! "})})]})})]}),u.jsx("style",{children:`
        @keyframes sparkle-float {
          0%, 100% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          50% {
            transform: translateY(-10px) scale(1.2);
            opacity: 0.8;
          }
        }
        .animate-sparkle-float {
          animation: sparkle-float 1.5s ease-in-out infinite;
        }
      `})]})}const Fy=e=>{const t="/vibe-brushing/";return{grassland:`${t}creatures/bg-grassland.png`,coastal:`${t}creatures/bg-coastal.png`,lava:`${t}creatures/bg-lava.png`,city:`${t}creatures/bg-city.png`,sky:`${t}creatures/bg-sky.png`}[e]};function Pa({region:e}){const t=by(e),[n,r]=C.useState([]),[a,o]=C.useState(!1),c=Fy(e),h=C.useMemo(()=>{const{colors:m}=t;switch(e){case"grassland":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            #98D8C8 30%, 
            ${m.secondary} 60%, 
            ${m.primary} 100%)`};case"coastal":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            ${m.secondary} 40%, 
            ${m.primary} 70%, 
            #1E3A5F 100%)`};case"lava":return{background:`linear-gradient(180deg, 
            #1C1917 0%, 
            #292524 30%, 
            ${m.secondary} 70%, 
            ${m.primary} 100%)`};case"city":return{background:`linear-gradient(180deg, 
            #0F0B1A 0%, 
            #1E1433 30%, 
            ${m.primary}40 70%, 
            ${m.secondary}60 100%)`};case"sky":return{background:`linear-gradient(180deg, 
            #1E3A5F 0%, 
            ${m.secondary} 30%, 
            ${m.primary} 60%, 
            #FEF9C3 100%)`};default:return{background:m.background}}},[e,t]);return C.useEffect(()=>{o(!1);const m=new Image;m.src=c,m.onload=()=>o(!0)},[c]),C.useEffect(()=>{const m=[];for(let S=0;S<12;S++)m.push({id:S,emoji:t.particles[S%t.particles.length],x:Math.random()*100,y:Math.random()*100,size:.8+Math.random()*.8,speed:15+Math.random()*20,delay:Math.random()*10,drift:(Math.random()-.5)*30});r(m)},[e,t.particles]),u.jsxs("div",{className:"absolute inset-0 overflow-hidden transition-all duration-1000",style:h,children:[u.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center",opacity:a?1:0}}),u.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.3) 100%)"}}),e==="lava"&&u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 opacity-60",style:{background:"linear-gradient(180deg, transparent 0%, #EF4444 50%, #FCD34D 100%)",animation:"pulse 2s ease-in-out infinite"}}),u.jsx("div",{className:"absolute bottom-0 left-1/4 w-1/2 h-1/4 opacity-40 rounded-t-full",style:{background:"radial-gradient(ellipse at bottom, #FBBF24 0%, transparent 70%)",animation:"pulse 3s ease-in-out infinite"}})]}),e==="city"&&u.jsx("div",{className:"absolute inset-0",children:[...Array(8)].map((m,y)=>u.jsx("div",{className:"absolute bottom-0 bg-gradient-to-t from-purple-900 to-transparent",style:{left:`${y*14+Math.random()*5}%`,width:`${3+Math.random()*4}%`,height:`${20+Math.random()*40}%`,opacity:.6},children:[...Array(Math.floor(Math.random()*5)+2)].map((S,j)=>u.jsx("div",{className:"absolute w-1 h-1 rounded-full",style:{left:`${20+Math.random()*60}%`,top:`${10+j*15+Math.random()*10}%`,backgroundColor:["#22D3EE","#E879F9","#FBBF24"][Math.floor(Math.random()*3)],animation:`pulse ${1+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},j))},y))}),e==="sky"&&u.jsx("div",{className:"absolute inset-0",children:[...Array(5)].map((m,y)=>u.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${y*25-10+Math.random()*20}%`,top:`${60+Math.random()*30}%`,width:`${15+Math.random()*20}%`,height:`${8+Math.random()*8}%`,animation:`float ${8+Math.random()*4}s ease-in-out infinite`,animationDelay:`${Math.random()*4}s`}},y))}),e==="coastal"&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-1/4",children:[u.jsx("div",{className:"absolute inset-0 opacity-50",style:{background:"linear-gradient(180deg, transparent 0%, #0EA5E9 100%)"}}),[...Array(3)].map((m,y)=>u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-white/30 rounded-full",style:{transform:`translateY(${y*-8}px)`,animation:`wave ${3+y*.5}s ease-in-out infinite`,animationDelay:`${y*.3}s`}},y))]}),e==="grassland"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/6",children:u.jsxs("svg",{viewBox:"0 0 100 20",className:"w-full h-full",preserveAspectRatio:"none",children:[u.jsx("path",{d:"M0 20 Q 10 10, 20 15 T 40 12 T 60 16 T 80 10 T 100 14 L 100 20 Z",fill:"#22C55E",opacity:"0.8"}),u.jsx("path",{d:"M0 20 Q 15 15, 25 18 T 50 14 T 75 17 T 100 12 L 100 20 Z",fill:"#16A34A",opacity:"0.6"})]})}),n.map(m=>u.jsx("div",{className:"absolute pointer-events-none select-none",style:{left:`${m.x}%`,fontSize:`${m.size}rem`,animation:`floatParticle ${m.speed}s linear infinite`,animationDelay:`${m.delay}s`,"--drift":`${m.drift}px`},children:m.emoji},m.id)),u.jsx("style",{children:`
        @keyframes floatParticle {
          0% {
            transform: translateY(100vh) translateX(0);
            opacity: 0;
          }
          10% {
            opacity: 0.8;
          }
          90% {
            opacity: 0.8;
          }
          100% {
            transform: translateY(-20vh) translateX(var(--drift));
            opacity: 0;
          }
        }
        
        @keyframes wave {
          0%, 100% {
            transform: translateX(-5%) scaleY(1);
          }
          50% {
            transform: translateX(5%) scaleY(1.2);
          }
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0) translateX(0);
          }
          50% {
            transform: translateY(-10px) translateX(10px);
          }
        }
      `})]})}function Ry({zoneProgress:e,overallProgress:t}){const n=t>=100;return u.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-purple-300",children:"Brushing Progress"}),u.jsxs("span",{className:"text-white font-bold",children:[Math.round(t),"%"]})]}),u.jsxs("div",{className:"h-6 bg-purple-900/50 rounded-full overflow-hidden relative",children:[u.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${n?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${t}%`}}),n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-white drop-shadow animate-pulse",children:" Complete! Keep brushing! "})})]})]}),u.jsx("div",{className:"text-center text-sm text-purple-300",children:n?u.jsx("span",{className:"text-green-400",children:"Great job! Keep it up to stay clean!"}):t>0?u.jsx("span",{children:"Keep brushing to fill the bar!"}):u.jsx("span",{children:"Start brushing to see progress"})})]})}function My({timeRemaining:e,totalTime:t}){const n=Math.floor(e/60),r=e%60,a=(t-e)/t*100,o=e<=30;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-24 h-24",children:[u.jsxs("svg",{className:"w-full h-full -rotate-90",children:[u.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:"rgba(139, 92, 246, 0.3)",strokeWidth:"8"}),u.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:o?"#F59E0B":"#8B5CF6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-a/100)}`,className:"transition-all duration-1000"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:`text-2xl font-bold ${o?"text-amber-400 animate-pulse":"text-white"}`,children:[n,":",r.toString().padStart(2,"0")]})})]}),u.jsx("div",{className:"mt-2 text-sm text-purple-300",children:o?"Almost done!":"Keep brushing!"})]})}const By=3e3;function Iy(e){return e<=60?[20,40]:e<=120?[30,60,90]:[45,90,135]}function Oy({selectedBuddy:e,capturedCreatureIds:t,onComplete:n,onCancel:r}){const a=C.useMemo(()=>Kp(),[]),o=C.useMemo(()=>Iy(a),[a]),[c,h]=C.useState("countdown"),[m,y]=C.useState(3),[S,j]=C.useState(a),[E,G]=C.useState([]),[O,M]=C.useState(""),[Q]=C.useState(()=>wy()),[w,x]=C.useState(null),b=C.useRef(new Set),B=C.useRef(Date.now()),K=C.useRef(null),{startCamera:U,captureFrameWithBuddy:I,stopCamera:V,registerVideoElement:H}=wo(),z=C.useRef(null),N=C.useRef(null),ee=C.useRef({width:0,height:0}),ie=(w==null?void 0:w.rarity)||"common",de=xy(Q,ie),ke=C.useCallback(ye=>{N.current=ye,ye&&H(ye)},[H]),[ue,me]=C.useState(!1),{zoneProgress:Y,motionResults:J,overallProgress:X,startDetection:he,stopDetection:be,setFaceRegion:Le,setDebugMode:Ae,getDebugInfo:Ve}=Gp({targetCleaningTime:25}),{facePosition:Ie,startTracking:Ze,stopTracking:$t}=Wp(),Oe=C.useRef(new Set),ge=C.useRef(!1),ot=C.useRef(!1);C.useEffect(()=>{Le(Ie?{x:Ie.x,y:Ie.y,width:Ie.width,height:Ie.height}:null)},[Ie,Le]),C.useEffect(()=>{const ye=zp(85,t,Q);x(ye),((ye==null?void 0:ye.rarity)==="legendary"||(ye==null?void 0:ye.rarity)==="mythic")&&yr("legendary-intro")},[Q,t]),C.useEffect(()=>(ge.current||(ge.current=!0,U()),()=>{be(),$t(),K.current&&clearInterval(K.current)}),[U,be,$t]),C.useEffect(()=>{Y.forEach(ye=>{ye.isComplete&&!Oe.current.has(ye.zoneId)&&(Oe.current.add(ye.zoneId),yr("sparkle"))})},[Y]),C.useEffect(()=>{J.some(De=>De.hasMotion)&&(B.current=Date.now())},[J]),C.useEffect(()=>{if(c==="brushing")return K.current=window.setInterval(()=>{Date.now()-B.current>By&&(M("Can't see you brushing! Move closer to the camera."),h("paused"))},500),()=>{K.current&&clearInterval(K.current)}},[c]);const Ee=C.useCallback(ye=>{he(ye),Ze(ye),B.current=Date.now()},[he,Ze]),xt=C.useCallback((ye,De)=>{ee.current={width:ye,height:De}},[]),nt=C.useCallback(async()=>{const ye=e&&z.current?{imageUrl:e.imageUrl,x:z.current.x,y:z.current.y,size:60,rotation:z.current.rotation,flipX:z.current.flipX}:null;return I(ye)},[e,I]),Ft=C.useCallback(()=>{me(ye=>{const De=!ye;return Ae(De),De})},[Ae]);C.useEffect(()=>{if(c!=="countdown")return;if(m<=0){h("brushing"),B.current=Date.now();return}const ye=setTimeout(()=>{y(De=>De-1)},1e3);return()=>clearTimeout(ye)},[m,c]),C.useEffect(()=>{if(c!=="brushing")return;if(S<=0){Rt();return}const ye=setInterval(()=>{j(De=>De-1)},1e3);return()=>clearInterval(ye)},[S,c]),C.useEffect(()=>{if(c!=="brushing")return;const ye=a-S;o.forEach(De=>{ye>=De&&!b.current.has(De)&&(b.current.add(De),nt().then(Et=>{Et&&G(Mt=>[...Mt,Et])}))})},[S,c,nt,o,a]),C.useEffect(()=>{c==="brushing"&&!ot.current?(ot.current=!0,de.start()):c==="paused"?(de.stop(),ot.current=!1):c==="complete"&&de.stop()},[c,de]),C.useEffect(()=>{if(c!=="brushing")return;const ye=a-S,De=a/2;ye>=De?de.setIntensity("excited"):de.setIntensity("calm")},[S,c,de]);const Rt=C.useCallback(async()=>{h("complete"),de.stop(),be(),$t();const ye=await nt(),De=ye?[...E,ye]:E;setTimeout(()=>{V(),n({cleaningPercentage:X,zoneProgress:Y,photos:De,region:Q,creature:w})},500)},[be,$t,nt,E,X,Y,n,V,de,Q,w]),re=C.useCallback(()=>{B.current=Date.now(),h("brushing"),M("")},[]),je=C.useCallback(async()=>{const ye=await nt();ye&&G(De=>[...De,ye])},[nt]),Se=C.useCallback(()=>{de.stop(),V(),r()},[V,r,de]),Pe=J.filter(ye=>ye.hasMotion).map(ye=>ye.zoneId);return c==="countdown"?u.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(Pa,{region:Q})}),u.jsxs("div",{className:"relative z-10 text-center",children:[u.jsx("div",{className:"text-6xl font-bold text-white animate-bounce-gentle drop-shadow-lg",children:m>0?m:"GO!"}),u.jsx("div",{className:"text-xl text-white/80 mt-4 drop-shadow",children:"Get ready to brush!"}),w&&u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("div",{className:"text-lg text-white/70",children:"Today's creature:"}),u.jsx("div",{className:`text-2xl font-bold ${w.rarity==="mythic"?"text-orange-400 animate-pulse":w.rarity==="legendary"?"text-yellow-400 animate-pulse":w.rarity==="rare"?"text-purple-400":"text-white"}`,children:w.name})]}),u.jsx("button",{onClick:Se,className:"mt-8 px-6 py-2 text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Cancel"})]})]}):c==="paused"?u.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full p-6 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(Pa,{region:Q})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:"text-6xl mb-6",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-yellow-400 mb-4 drop-shadow-lg",children:"Paused!"}),u.jsx("p",{className:"text-xl text-white text-center mb-6 max-w-xs drop-shadow",children:O}),u.jsx("div",{className:"w-full max-w-xs aspect-video bg-black/30 rounded-2xl overflow-hidden mb-6 backdrop-blur-sm",children:u.jsx("video",{ref:ke,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"})}),u.jsxs("div",{className:"text-sm text-white/80 mb-4",children:["Time remaining: ",Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]}),u.jsx("button",{onClick:re,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform mb-3",children:"I'm Ready! "}),u.jsx("button",{onClick:Se,className:"w-full max-w-xs py-3 text-lg text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Stop Session"})]})]}):u.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(Pa,{region:Q})}),u.jsxs("div",{className:"relative z-10 flex flex-col h-full p-2 gap-2",children:[u.jsxs("div",{className:"h-2/3 relative overflow-hidden",children:[u.jsx(Ny,{selectedBuddy:e,onVideoReady:Ee,onContainerSize:xt,activityScore:J.reduce((ye,De)=>ye+De.motionLevel,0)/Math.max(J.length,1),debugMode:ue,getDebugInfo:Ve}),u.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start pointer-events-auto z-20",children:[u.jsx("button",{onClick:Se,className:"px-3 py-1.5 text-sm text-white/80 bg-black/50 rounded-xl backdrop-blur-sm pointer-events-auto",children:""}),u.jsx(My,{timeRemaining:S,totalTime:a}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:Ft,className:`px-2 py-1.5 text-sm rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto ${ue?"text-yellow-400 bg-yellow-900/80":"text-white/60 bg-black/50"}`,children:""}),u.jsx("button",{onClick:je,className:"px-2 py-1.5 text-sm text-white bg-pink-600/80 rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto",children:""})]})]})]}),u.jsx("div",{className:"h-1/3 overflow-auto",children:w?u.jsx(Dy,{creature:w,activeZones:Pe,overallProgress:X}):u.jsx(Ry,{zoneProgress:Y,overallProgress:X})}),E.length>0&&u.jsxs("div",{className:"flex justify-center gap-2",children:[E.slice(-3).map((ye,De)=>u.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-sparkle"},De)),u.jsxs("span",{className:"text-xs text-white/70 ml-2",children:[E.length," photos"]})]})]})]})}function zy({cleaningPercentage:e,onContinue:t}){const n=Ly(e),r=e>=100;return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[u.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:n.emoji}),u.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.title}),u.jsxs("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent mb-4",children:[Math.round(e),"%"]}),u.jsx("p",{className:"text-lg text-purple-200 mb-6 max-w-xs",children:n.message}),u.jsx("div",{className:"w-full max-w-xs mb-8",children:u.jsxs("div",{className:`p-4 rounded-xl ${r?"bg-green-900/50":"bg-purple-900/50"}`,children:[u.jsx("div",{className:"text-4xl mb-2",children:r?"":""}),u.jsx("div",{className:"text-sm text-purple-300 mb-2",children:"Brushing Score"}),u.jsx("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${r?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${e}%`}})}),u.jsx("div",{className:`text-lg font-bold mt-2 ${r?"text-green-400":"text-purple-400"}`,children:r?"Complete!":"Keep practicing!"})]})}),u.jsx("button",{onClick:t,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl animate-button-glow",children:"Catch a Creature! "})]})}function Ly(e){return e>=95?{emoji:"",title:"LEGENDARY!",message:"Your teeth are sparkling like diamonds! Amazing job!"}:e>=80?{emoji:"",title:"Super Clean!",message:"Wow! Your teeth are super sparkly! Great brushing!"}:e>=60?{emoji:"",title:"Good Job!",message:"Nice work! A little more brushing next time!"}:e>=40?{emoji:"",title:"Keep Trying!",message:"You can do better! Brush all areas next time!"}:{emoji:"",title:"Try Again!",message:"Don't give up! Brush longer next time!"}}var Qp={exports:{}};(function(e,t){((n,r)=>{e.exports=r()})(ed,function(){var n=function(s,l){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,f){d.__proto__=f}:function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])}))(s,l)},r=function(){return(r=Object.assign||function(s){for(var l,d=1,f=arguments.length;d<f;d++)for(var p in l=arguments[d])Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p]);return s}).apply(this,arguments)};function a(s,l,d){for(var f,p=0,g=l.length;p<g;p++)!f&&p in l||((f=f||Array.prototype.slice.call(l,0,p))[p]=l[p]);return s.concat(f||Array.prototype.slice.call(l))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ed,c=Object.keys,h=Array.isArray;function m(s,l){return typeof l=="object"&&c(l).forEach(function(d){s[d]=l[d]}),s}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var y=Object.getPrototypeOf,S={}.hasOwnProperty;function j(s,l){return S.call(s,l)}function E(s,l){typeof l=="function"&&(l=l(y(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(l).forEach(function(d){O(s,d,l[d])})}var G=Object.defineProperty;function O(s,l,d,f){G(s,l,m(d&&j(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},f))}function M(s){return{from:function(l){return s.prototype=Object.create(l.prototype),O(s.prototype,"constructor",s),{extend:E.bind(null,s.prototype)}}}}var Q=Object.getOwnPropertyDescriptor,w=[].slice;function x(s,l,d){return w.call(s,l,d)}function b(s,l){return l(s)}function B(s){if(!s)throw new Error("Assertion Failed")}function K(s){o.setImmediate?setImmediate(s):setTimeout(s,0)}function U(s,l){if(typeof l=="string"&&j(s,l))return s[l];if(!l)return s;if(typeof l!="string"){for(var d=[],f=0,p=l.length;f<p;++f){var g=U(s,l[f]);d.push(g)}return d}var v,k=l.indexOf(".");return k===-1||(v=s[l.substr(0,k)])==null?void 0:U(v,l.substr(k+1))}function I(s,l,d){if(s&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof l!="string"&&"length"in l){B(typeof d!="string"&&"length"in d);for(var f=0,p=l.length;f<p;++f)I(s,l[f],d[f])}else{var g,v,k=l.indexOf(".");k!==-1?(g=l.substr(0,k),(k=l.substr(k+1))===""?d===void 0?h(s)&&!isNaN(parseInt(g))?s.splice(g,1):delete s[g]:s[g]=d:I(v=(v=s[g])&&j(s,g)?v:s[g]={},k,d)):d===void 0?h(s)&&!isNaN(parseInt(l))?s.splice(l,1):delete s[l]:s[l]=d}}function V(s){var l,d={};for(l in s)j(s,l)&&(d[l]=s[l]);return d}var H=[].concat;function z(s){return H.apply([],s)}var be="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(l){return l+s+"Array"})}))).filter(function(s){return o[s]}),N=new Set(be.map(function(s){return o[s]})),ee=null;function ie(s){return ee=new WeakMap,s=function l(d){if(!d||typeof d!="object")return d;var f=ee.get(d);if(f)return f;if(h(d)){f=[],ee.set(d,f);for(var p=0,g=d.length;p<g;++p)f.push(l(d[p]))}else if(N.has(d.constructor))f=d;else{var v,k=y(d);for(v in f=k===Object.prototype?{}:Object.create(k),ee.set(d,f),d)j(d,v)&&(f[v]=l(d[v]))}return f}(s),ee=null,s}var de={}.toString;function ke(s){return de.call(s).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",me=typeof ue=="symbol"?function(s){var l;return s!=null&&(l=s[ue])&&l.apply(s)}:function(){return null};function Y(s,l){l=s.indexOf(l),0<=l&&s.splice(l,1)}var J={};function X(s){var l,d,f,p;if(arguments.length===1){if(h(s))return s.slice();if(this===J&&typeof s=="string")return[s];if(p=me(s))for(d=[];!(f=p.next()).done;)d.push(f.value);else{if(s==null)return[s];if(typeof(l=s.length)!="number")return[s];for(d=new Array(l);l--;)d[l]=s[l]}}else for(l=arguments.length,d=new Array(l);l--;)d[l]=arguments[l];return d}var he=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},be=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],lt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(be),Le={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(s,l){this.name=s,this.message=l}function Ve(s,l){return s+". Errors: "+Object.keys(l).map(function(d){return l[d].toString()}).filter(function(d,f,p){return p.indexOf(d)===f}).join(`
`)}function Ie(s,l,d,f){this.failures=l,this.failedKeys=f,this.successCount=d,this.message=Ve(s,l)}function Ze(s,l){this.name="BulkError",this.failures=Object.keys(l).map(function(d){return l[d]}),this.failuresByPos=l,this.message=Ve(s,this.failures)}M(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(Ie).from(Ae),M(Ze).from(Ae);var $t=lt.reduce(function(s,l){return s[l]=l+"Error",s},{}),Oe=Ae,ge=lt.reduce(function(s,l){var d=l+"Error";function f(p,g){this.name=d,p?typeof p=="string"?(this.message="".concat(p).concat(g?`
 `+g:""),this.inner=g||null):typeof p=="object"&&(this.message="".concat(p.name," ").concat(p.message),this.inner=p):(this.message=Le[l]||d,this.inner=null)}return M(f).from(Oe),s[l]=f,s},{}),ot=(ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError,be.reduce(function(s,l){return s[l+"Error"]=ge[l],s},{}));be=lt.reduce(function(s,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(s[l+"Error"]=ge[l]),s},{});function Ee(){}function xt(s){return s}function nt(s,l){return s==null||s===xt?l:function(d){return l(s(d))}}function Ft(s,l){return function(){s.apply(this,arguments),l.apply(this,arguments)}}function Rt(s,l){return s===Ee?l:function(){var d=s.apply(this,arguments),f=(d!==void 0&&(arguments[0]=d),this.onsuccess),p=this.onerror,g=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return f&&(this.onsuccess=this.onsuccess?Ft(f,this.onsuccess):f),p&&(this.onerror=this.onerror?Ft(p,this.onerror):p),g!==void 0?g:d}}function re(s,l){return s===Ee?l:function(){s.apply(this,arguments);var d=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Ft(d,this.onsuccess):d),f&&(this.onerror=this.onerror?Ft(f,this.onerror):f)}}function je(s,l){return s===Ee?l:function(p){var f=s.apply(this,arguments),p=(m(p,f),this.onsuccess),g=this.onerror,v=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return p&&(this.onsuccess=this.onsuccess?Ft(p,this.onsuccess):p),g&&(this.onerror=this.onerror?Ft(g,this.onerror):g),f===void 0?v===void 0?void 0:v:m(f,v)}}function Se(s,l){return s===Ee?l:function(){return l.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Pe(s,l){return s===Ee?l:function(){var d=s.apply(this,arguments);if(d&&typeof d.then=="function"){for(var f=this,p=arguments.length,g=new Array(p);p--;)g[p]=arguments[p];return d.then(function(){return l.apply(f,g)})}return l.apply(this,arguments)}}be.ModifyError=Ie,be.DexieError=Ae,be.BulkError=Ze;var ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function De(s){ye=s}var Et={},Mt=100,Tt=typeof Promise>"u"?[]:(lt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Tt=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(Tt),lt]:[lt,y(lt),lt]),lt=Tt[0],Or=Tt[1],Or=Or&&Or.then,rn=lt&&lt.constructor,sn=!!Tt[2],pn=function(s,l){xi.push([s,l]),bs&&(queueMicrotask(em),bs=!1)},bo=!0,bs=!0,or=[],ks=[],ko=xt,Rn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ee,pgp:!1,env:{},finalize:Ee},we=Rn,xi=[],lr=0,Cs=[];function ce(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=we;if(typeof s!="function"){if(s!==Et)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&jo(this,this._value)}else this._state=null,this._value=null,++l.ref,function d(f,p){try{p(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var v=f._lib&&_r();g&&typeof g.then=="function"?d(f,function(k,P){g instanceof ce?g._then(k,P):g.then(k,P)}):(f._state=!0,f._value=g,kc(f)),v&&Dr()}},jo.bind(null,f))}catch(g){jo(f,g)}}(this,s)}var Co={get:function(){var s=we,l=Ts;function d(f,p){var g=this,v=!s.global&&(s!==we||l!==Ts),k=v&&!Bn(),P=new ce(function($,_){So(g,new bc(jc(f,s,v,k),jc(p,s,v,k),$,_,s))});return this._consoleTask&&(P._consoleTask=this._consoleTask),P}return d.prototype=Et,d},set:function(s){O(this,"then",s&&s.prototype===Et?Co:{get:function(){return s},set:Co.set})}};function bc(s,l,d,f,p){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof l=="function"?l:null,this.resolve=d,this.reject=f,this.psd=p}function jo(s,l){var d,f;ks.push(l),s._state===null&&(d=s._lib&&_r(),l=ko(l),s._state=!1,s._value=l,f=s,or.some(function(p){return p._value===f._value})||or.push(f),kc(s),d)&&Dr()}function kc(s){var l=s._listeners;s._listeners=[];for(var d=0,f=l.length;d<f;++d)So(s,l[d]);var p=s._PSD;--p.ref||p.finalize(),lr===0&&(++lr,pn(function(){--lr==0&&Eo()},[]))}function So(s,l){if(s._state===null)s._listeners.push(l);else{var d=s._state?l.onFulfilled:l.onRejected;if(d===null)return(s._state?l.resolve:l.reject)(s._value);++l.psd.ref,++lr,pn(Jp,[d,s,l])}}function Jp(s,l,d){try{var f,p=l._value;!l._state&&ks.length&&(ks=[]),f=ye&&l._consoleTask?l._consoleTask.run(function(){return s(p)}):s(p),l._state||ks.indexOf(p)!==-1||(g=>{for(var v=or.length;v;)if(or[--v]._value===g._value)return or.splice(v,1)})(l),d.resolve(f)}catch(g){d.reject(g)}finally{--lr==0&&Eo(),--d.psd.ref||d.psd.finalize()}}function em(){ur(Rn,function(){_r()&&Dr()})}function _r(){var s=bo;return bs=bo=!1,s}function Dr(){var s,l,d;do for(;0<xi.length;)for(s=xi,xi=[],d=s.length,l=0;l<d;++l){var f=s[l];f[0].apply(null,f[1])}while(0<xi.length);bs=bo=!0}function Eo(){for(var s=or,l=(or=[],s.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)}),Cs.slice(0)),d=l.length;d;)l[--d]()}function js(s){return new ce(Et,!1,s)}function qe(s,l){var d=we;return function(){var f=_r(),p=we;try{return In(d,!0),s.apply(this,arguments)}catch(g){l&&l(g)}finally{In(p,!1),f&&Dr()}}}E(ce.prototype,{then:Co,_then:function(s,l){So(this,new bc(null,null,s,l,we))},catch:function(s){var l,d;return arguments.length===1?this.then(null,s):(l=s,d=arguments[1],typeof l=="function"?this.then(null,function(f){return(f instanceof l?d:js)(f)}):this.then(null,function(f){return(f&&f.name===l?d:js)(f)}))},finally:function(s){return this.then(function(l){return ce.resolve(s()).then(function(){return l})},function(l){return ce.resolve(s()).then(function(){return js(l)})})},timeout:function(s,l){var d=this;return s<1/0?new ce(function(f,p){var g=setTimeout(function(){return p(new ge.Timeout(l))},s);d.then(f,p).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&O(ce.prototype,Symbol.toStringTag,"Dexie.Promise"),Rn.env=Cc(),E(ce,{all:function(){var s=X.apply(null,arguments).map(Ns);return new ce(function(l,d){s.length===0&&l([]);var f=s.length;s.forEach(function(p,g){return ce.resolve(p).then(function(v){s[g]=v,--f||l(s)},d)})})},resolve:function(s){return s instanceof ce?s:s&&typeof s.then=="function"?new ce(function(l,d){s.then(l,d)}):new ce(Et,!0,s)},reject:js,race:function(){var s=X.apply(null,arguments).map(Ns);return new ce(function(l,d){s.map(function(f){return ce.resolve(f).then(l,d)})})},PSD:{get:function(){return we},set:function(s){return we=s}},totalEchoes:{get:function(){return Ts}},newPSD:Mn,usePSD:ur,scheduler:{get:function(){return pn},set:function(s){pn=s}},rejectionMapper:{get:function(){return ko},set:function(s){ko=s}},follow:function(s,l){return new ce(function(d,f){return Mn(function(p,g){var v=we;v.unhandleds=[],v.onunhandled=g,v.finalize=Ft(function(){var k,P=this;k=function(){P.unhandleds.length===0?p():g(P.unhandleds[0])},Cs.push(function $(){k(),Cs.splice(Cs.indexOf($),1)}),++lr,pn(function(){--lr==0&&Eo()},[])},v.finalize),s()},l,d,f)})}}),rn&&(rn.allSettled&&O(ce,"allSettled",function(){var s=X.apply(null,arguments).map(Ns);return new ce(function(l){s.length===0&&l([]);var d=s.length,f=new Array(d);s.forEach(function(p,g){return ce.resolve(p).then(function(v){return f[g]={status:"fulfilled",value:v}},function(v){return f[g]={status:"rejected",reason:v}}).then(function(){return--d||l(f)})})})}),rn.any&&typeof AggregateError<"u"&&O(ce,"any",function(){var s=X.apply(null,arguments).map(Ns);return new ce(function(l,d){s.length===0&&d(new AggregateError([]));var f=s.length,p=new Array(f);s.forEach(function(g,v){return ce.resolve(g).then(function(k){return l(k)},function(k){p[v]=k,--f||d(new AggregateError(p))})})})}),rn.withResolvers)&&(ce.withResolvers=rn.withResolvers);var dt={awaits:0,echoes:0,id:0},tm=0,Ss=[],Es=0,Ts=0,nm=0;function Mn(s,v,d,f){var p=we,g=Object.create(p),v=(g.parent=p,g.ref=0,g.global=!1,g.id=++nm,Rn.env,g.env=sn?{Promise:ce,PromiseProp:{value:ce,configurable:!0,writable:!0},all:ce.all,race:ce.race,allSettled:ce.allSettled,any:ce.any,resolve:ce.resolve,reject:ce.reject}:{},v&&m(g,v),++p.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},ur(g,s,d,f));return g.ref===0&&g.finalize(),v}function Fr(){return dt.id||(dt.id=++tm),++dt.awaits,dt.echoes+=Mt,dt.id}function Bn(){return!!dt.awaits&&(--dt.awaits==0&&(dt.id=0),dt.echoes=dt.awaits*Mt,!0)}function Ns(s){return dt.echoes&&s&&s.constructor===rn?(Fr(),s.then(function(l){return Bn(),l},function(l){return Bn(),rt(l)})):s}function rm(){var s=Ss[Ss.length-1];Ss.pop(),In(s,!1)}function In(s,l){var d,f,p=we;(l?!dt.echoes||Es++&&s===we:!Es||--Es&&s===we)||queueMicrotask(l?(function(g){++Ts,dt.echoes&&--dt.echoes!=0||(dt.echoes=dt.awaits=dt.id=0),Ss.push(we),In(g,!0)}).bind(null,s):rm),s!==we&&(we=s,p===Rn&&(Rn.env=Cc()),sn)&&(d=Rn.env.Promise,f=s.env,p.global||s.global)&&(Object.defineProperty(o,"Promise",f.PromiseProp),d.all=f.all,d.race=f.race,d.resolve=f.resolve,d.reject=f.reject,f.allSettled&&(d.allSettled=f.allSettled),f.any)&&(d.any=f.any)}function Cc(){var s=o.Promise;return sn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function ur(s,l,d,f,p){var g=we;try{return In(s,!0),l(d,f,p)}finally{In(g,!1)}}function jc(s,l,d,f){return typeof s!="function"?s:function(){var p=we;d&&Fr(),In(l,!0);try{return s.apply(this,arguments)}finally{In(p,!1),f&&queueMicrotask(Bn)}}}function To(s){Promise===rn&&dt.echoes===0?Es===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Or).indexOf("[native code]")===-1&&(Fr=Bn=Ee);var rt=ce.reject,cr="",kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sc="String expected.",Rr=[],As="__dbnames",No="readonly",Ao="readwrite";function dr(s,l){return s?l?function(){return s.apply(this,arguments)&&l.apply(this,arguments)}:s:l}var Ec={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ps(s){return typeof s!="string"||/\./.test(s)?function(l){return l}:function(l){return l[s]===void 0&&s in l&&delete(l=ie(l))[s],l}}function Tc(){throw ge.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function _e(s,l){try{var d=Nc(s),f=Nc(l);if(d!==f)return d==="Array"?1:f==="Array"?-1:d==="binary"?1:f==="binary"?-1:d==="string"?1:f==="string"?-1:d==="Date"?1:f!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return l<s?1:s<l?-1:0;case"binary":for(var p=Ac(s),g=Ac(l),v=p.length,k=g.length,P=v<k?v:k,$=0;$<P;++$)if(p[$]!==g[$])return p[$]<g[$]?-1:1;return v===k?0:v<k?-1:1;case"Array":for(var _=s,T=l,F=_.length,R=T.length,D=F<R?F:R,A=0;A<D;++A){var W=_e(_[A],T[A]);if(W!==0)return W}return F===R?0:F<R?-1:1}}catch{}return NaN}function Nc(s){var l=typeof s;return l=="object"&&(ArrayBuffer.isView(s)||(l=ke(s))==="ArrayBuffer")?"binary":l}function Ac(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function _s(s,l,d){var f=s.schema.yProps;return f?(l&&0<d.numFailures&&(l=l.filter(function(p,g){return!d.failures[g]})),Promise.all(f.map(function(p){return p=p.updatesTable,l?s.db.table(p).where("k").anyOf(l).delete():s.db.table(p).clear()})).then(function(){return d})):d}Pc.prototype.execute=function(s){var l=this["@@propmod"];if(l.add!==void 0){var d=l.add;if(h(d))return a(a([],h(s)?s:[],!0),d).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(l.remove!==void 0){var f=l.remove;if(h(f))return h(s)?s.filter(function(p){return!f.includes(p)}).sort():[];if(typeof f=="number")return Number(s)-f;if(typeof f=="bigint")try{return BigInt(s)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return d=(d=l.replacePrefix)==null?void 0:d[0],d&&typeof s=="string"&&s.startsWith(d)?l.replacePrefix[1]+s.substring(d.length):s};var wi=Pc;function Pc(s){this["@@propmod"]=s}function _c(s,l){for(var d=c(l),f=d.length,p=!1,g=0;g<f;++g){var v=d[g],k=l[v],P=U(s,v);k instanceof wi?(I(s,v,k.execute(P)),p=!0):P!==k&&(I(s,v,k),p=!0)}return p}$e.prototype._trans=function(s,l,d){var f=this._tx||we.trans,p=this.name,g=ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function v($,_,T){if(T.schema[p])return l(T.idbtrans,T);throw new ge.NotFound("Table "+p+" not part of transaction")}var k=_r();try{var P=f&&f.db._novip===this.db._novip?f===we.trans?f._promise(s,v,d):Mn(function(){return f._promise(s,v,d)},{trans:f,transless:we.transless||we}):function $(_,T,F,R){if(_.idbdb&&(_._state.openComplete||we.letThrough||_._vip)){var D=_._createTransaction(T,F,_._dbSchema);try{D.create(),_._state.PR1398_maxLoop=3}catch(A){return A.name===$t.InvalidState&&_.isOpen()&&0<--_._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_.close({disableAutoOpen:!1}),_.open().then(function(){return $(_,T,F,R)})):rt(A)}return D._promise(T,function(A,W){return Mn(function(){return we.trans=D,R(A,W,D)})}).then(function(A){if(T==="readwrite")try{D.idbtrans.commit()}catch{}return T==="readonly"?A:D._completion.then(function(){return A})})}if(_._state.openComplete)return rt(new ge.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return rt(new ge.DatabaseClosed);_.open().catch(Ee)}return _._state.dbReadyPromise.then(function(){return $(_,T,F,R)})}(this.db,s,[this.name],v);return g&&(P._consoleTask=g,P=P.catch(function($){return console.trace($),rt($)})),P}finally{k&&Dr()}},$e.prototype.get=function(s,l){var d=this;return s&&s.constructor===Object?this.where(s).first(l):s==null?rt(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return d.core.get({trans:f,key:s}).then(function(p){return d.hook.reading.fire(p)})}).then(l)},$e.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(h(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var l=c(s);if(l.length===1)return this.where(l[0]).equals(s[l[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&l.every(function($){return 0<=k.keyPath.indexOf($)})){for(var P=0;P<l.length;++P)if(l.indexOf(k.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(k,P){return k.keyPath.length-P.keyPath.length})[0];if(d&&this.db._maxKey!==cr)return v=d.keyPath.slice(0,l.length),this.where(v).equals(v.map(function(k){return s[k]}));!d&&ye&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function p(k,P){return _e(k,P)===0}var v=l.reduce(function(_,P){var $=_[0],_=_[1],T=f[P],F=s[P];return[$||T,$||!T?dr(_,T&&T.multi?function(R){return R=U(R,P),h(R)&&R.some(function(D){return p(F,D)})}:function(R){return p(F,U(R,P))}):_]},[null,null]),g=v[0],v=v[1];return g?this.where(g.name).equals(s[g.keyPath]).filter(v):d?this.filter(v):this.where(l).equals("")},$e.prototype.filter=function(s){return this.toCollection().and(s)},$e.prototype.count=function(s){return this.toCollection().count(s)},$e.prototype.offset=function(s){return this.toCollection().offset(s)},$e.prototype.limit=function(s){return this.toCollection().limit(s)},$e.prototype.each=function(s){return this.toCollection().each(s)},$e.prototype.toArray=function(s){return this.toCollection().toArray(s)},$e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$e.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,h(s)?"[".concat(s.join("+"),"]"):s))},$e.prototype.reverse=function(){return this.toCollection().reverse()},$e.prototype.mapToClass=function(s){for(var l=this.db,d=this.name,f=((this.schema.mappedClass=s).prototype instanceof Tc&&(s=(v=>{var k=_,P=v;if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function $(){this.constructor=k}function _(){return v!==null&&v.apply(this,arguments)||this}return n(k,P),k.prototype=P===null?Object.create(P):($.prototype=P.prototype,new $),Object.defineProperty(_.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),_.prototype.table=function(){return d},_})(s)),new Set),p=s.prototype;p;p=y(p))Object.getOwnPropertyNames(p).forEach(function(v){return f.add(v)});function g(v){if(!v)return v;var k,P=Object.create(s.prototype);for(k in v)if(!f.has(k))try{P[k]=v[k]}catch{}return P}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),s},$e.prototype.defineClass=function(){return this.mapToClass(function(s){m(this,s)})},$e.prototype.add=function(s,l){var d=this,f=this.schema.primKey,p=f.auto,g=f.keyPath,v=s;return g&&p&&(v=Ps(g)(s)),this._trans("readwrite",function(k){return d.core.mutate({trans:k,type:"add",keys:l!=null?[l]:null,values:[v]})}).then(function(k){return k.numFailures?ce.reject(k.failures[0]):k.lastResult}).then(function(k){if(g)try{I(s,g,k)}catch{}return k})},$e.prototype.upsert=function(s,l){var d=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(p){return d.core.get({trans:p,key:s}).then(function(g){var v=g??{};return _c(v,l),f&&I(v,f,s),d.core.mutate({trans:p,type:"put",values:[v],keys:[s],upsert:!0,updates:{keys:[s],changeSpecs:[l]}}).then(function(k){return k.numFailures?ce.reject(k.failures[0]):!!g})})})},$e.prototype.update=function(s,l){return typeof s!="object"||h(s)?this.where(":id").equals(s).modify(l):(s=U(s,this.schema.primKey.keyPath))===void 0?rt(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(l)},$e.prototype.put=function(s,l){var d=this,f=this.schema.primKey,p=f.auto,g=f.keyPath,v=s;return g&&p&&(v=Ps(g)(s)),this._trans("readwrite",function(k){return d.core.mutate({trans:k,type:"put",values:[v],keys:l!=null?[l]:null})}).then(function(k){return k.numFailures?ce.reject(k.failures[0]):k.lastResult}).then(function(k){if(g)try{I(s,g,k)}catch{}return k})},$e.prototype.delete=function(s){var l=this;return this._trans("readwrite",function(d){return l.core.mutate({trans:d,type:"delete",keys:[s]}).then(function(f){return _s(l,[s],f)}).then(function(f){return f.numFailures?ce.reject(f.failures[0]):void 0})})},$e.prototype.clear=function(){var s=this;return this._trans("readwrite",function(l){return s.core.mutate({trans:l,type:"deleteRange",range:Ec}).then(function(d){return _s(s,null,d)})}).then(function(l){return l.numFailures?ce.reject(l.failures[0]):void 0})},$e.prototype.bulkGet=function(s){var l=this;return this._trans("readonly",function(d){return l.core.getMany({keys:s,trans:d}).then(function(f){return f.map(function(p){return l.hook.reading.fire(p)})})})},$e.prototype.bulkAdd=function(s,l,d){var f=this,p=Array.isArray(l)?l:void 0,g=(d=d||(p?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(v){var k=f.schema.primKey,$=k.auto,k=k.keyPath;if(k&&p)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var P=s.length,$=k&&$?s.map(Ps(k)):s;return f.core.mutate({trans:v,type:"add",keys:p,values:$,wantResults:g}).then(function(_){var T=_.numFailures,F=_.failures;if(T===0)return g?_.results:_.lastResult;throw new Ze("".concat(f.name,".bulkAdd(): ").concat(T," of ").concat(P," operations failed"),F)})})},$e.prototype.bulkPut=function(s,l,d){var f=this,p=Array.isArray(l)?l:void 0,g=(d=d||(p?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(v){var k=f.schema.primKey,$=k.auto,k=k.keyPath;if(k&&p)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var P=s.length,$=k&&$?s.map(Ps(k)):s;return f.core.mutate({trans:v,type:"put",keys:p,values:$,wantResults:g}).then(function(_){var T=_.numFailures,F=_.failures;if(T===0)return g?_.results:_.lastResult;throw new Ze("".concat(f.name,".bulkPut(): ").concat(T," of ").concat(P," operations failed"),F)})})},$e.prototype.bulkUpdate=function(s){var l=this,d=this.core,f=s.map(function(v){return v.key}),p=s.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return d.getMany({trans:v,keys:f,cache:"clone"}).then(function(k){var P=[],$=[],_=(s.forEach(function(T,F){var R=T.key,D=T.changes,A=k[F];if(A){for(var W=0,q=Object.keys(D);W<q.length;W++){var L=q[W],Z=D[L];if(L===l.schema.primKey.keyPath){if(_e(Z,R)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else I(A,L,Z)}g.push(F),P.push(R),$.push(A)}}),P.length);return d.mutate({trans:v,type:"put",keys:P,values:$,updates:{keys:f,changeSpecs:p}}).then(function(T){var F=T.numFailures,R=T.failures;if(F===0)return _;for(var D=0,A=Object.keys(R);D<A.length;D++){var W,q=A[D],L=g[Number(q)];L!=null&&(W=R[q],delete R[q],R[L]=W)}throw new Ze("".concat(l.name,".bulkUpdate(): ").concat(F," of ").concat(_," operations failed"),R)})})})},$e.prototype.bulkDelete=function(s){var l=this,d=s.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:s}).then(function(p){return _s(l,s,p)})}).then(function(f){var p=f.numFailures,g=f.failures;if(p===0)return f.lastResult;throw new Ze("".concat(l.name,".bulkDelete(): ").concat(p," of ").concat(d," operations failed"),g)})};var Dc=$e;function $e(){}function bi(s){function l(v,k){if(k){for(var P=arguments.length,$=new Array(P-1);--P;)$[P-1]=arguments[P];return d[v].subscribe.apply(null,$),s}if(typeof v=="string")return d[v]}var d={};l.addEventType=g;for(var f=1,p=arguments.length;f<p;++f)g(arguments[f]);return l;function g(v,k,P){var $,_;if(typeof v!="object")return k=k||Se,_={subscribers:[],fire:P=P||Ee,subscribe:function(T){_.subscribers.indexOf(T)===-1&&(_.subscribers.push(T),_.fire=k(_.fire,T))},unsubscribe:function(T){_.subscribers=_.subscribers.filter(function(F){return F!==T}),_.fire=_.subscribers.reduce(k,P)}},d[v]=l[v]=_;c($=v).forEach(function(T){var F=$[T];if(h(F))g(T,$[T][0],$[T][1]);else{if(F!=="asap")throw new ge.InvalidArgument("Invalid event config");var R=g(T,xt,function(){for(var D=arguments.length,A=new Array(D);D--;)A[D]=arguments[D];R.subscribers.forEach(function(W){K(function(){W.apply(null,A)})})})}})}}function ki(s,l){return M(l).from({prototype:s}),l}function Mr(s,l){return!(s.filter||s.algorithm||s.or)&&(l?s.justLimit:!s.replayFilter)}function Po(s,l){s.filter=dr(s.filter,l)}function _o(s,l,d){var f=s.replayFilter;s.replayFilter=f?function(){return dr(f(),l())}:l,s.justLimit=d&&!f}function Ds(s,l){if(s.isPrimKey)return l.primaryKey;var d=l.getIndexByKeyPath(s.index);if(d)return d;throw new ge.Schema("KeyPath "+s.index+" on object store "+l.name+" is not indexed")}function Fc(s,l,d){var f=Ds(s,l.schema);return l.openCursor({trans:d,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:f,range:s.range}})}function Fs(s,l,d,f){var p,g,v=s.replayFilter?dr(s.filter,s.replayFilter()):s.filter;return s.or?(p={},g=function(k,P,$){var _,T;v&&!v(P,$,function(F){return P.stop(F)},function(F){return P.fail(F)})||((T=""+(_=P.primaryKey))=="[object ArrayBuffer]"&&(T=""+new Uint8Array(_)),j(p,T))||(p[T]=!0,l(k,P,$))},Promise.all([s.or._iterate(g,d),Rc(Fc(s,f,d),s.algorithm,g,!s.keysOnly&&s.valueMapper)])):Rc(Fc(s,f,d),dr(s.algorithm,v),l,!s.keysOnly&&s.valueMapper)}function Rc(s,l,d,f){var p=qe(f?function(g,v,k){return d(f(g),v,k)}:d);return s.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};l&&!l(g,function(k){return v=k},function(k){g.stop(k),v=Ee},function(k){g.fail(k),v=Ee})||p(g.value,g,function(k){return v=k}),v()})})}Me.prototype._read=function(s,l){var d=this._ctx;return d.error?d.table._trans(null,rt.bind(null,d.error)):d.table._trans("readonly",s).then(l)},Me.prototype._write=function(s){var l=this._ctx;return l.error?l.table._trans(null,rt.bind(null,l.error)):l.table._trans("readwrite",s,"locked")},Me.prototype._addAlgorithm=function(s){var l=this._ctx;l.algorithm=dr(l.algorithm,s)},Me.prototype._iterate=function(s,l){return Fs(this._ctx,s,l,this._ctx.table.core)},Me.prototype.clone=function(s){var l=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return s&&m(d,s),l._ctx=d,l},Me.prototype.raw=function(){return this._ctx.valueMapper=null,this},Me.prototype.each=function(s){var l=this._ctx;return this._read(function(d){return Fs(l,s,d,l.table.core)})},Me.prototype.count=function(s){var l=this;return this._read(function(d){var f,p=l._ctx,g=p.table.core;return Mr(p,!0)?g.count({trans:d,query:{index:Ds(p,g.schema),range:p.range}}).then(function(v){return Math.min(v,p.limit)}):(f=0,Fs(p,function(){return++f,!1},d,g).then(function(){return f}))}).then(s)},Me.prototype.sortBy=function(s,l){var d=s.split(".").reverse(),f=d[0],p=d.length-1;function g(P,$){return $?g(P[d[$]],$-1):P[f]}var v=this._ctx.dir==="next"?1:-1;function k(P,$){return _e(g(P,p),g($,p))*v}return this.toArray(function(P){return P.sort(k)}).then(l)},Me.prototype.toArray=function(s){var l=this;return this._read(function(d){var f,p,g,v=l._ctx;return v.dir==="next"&&Mr(v,!0)&&0<v.limit?(f=v.valueMapper,p=Ds(v,v.table.core.schema),v.table.core.query({trans:d,limit:v.limit,values:!0,query:{index:p,range:v.range}}).then(function(k){return k=k.result,f?k.map(f):k})):(g=[],Fs(v,function(k){return g.push(k)},d,v.table.core).then(function(){return g}))},s)},Me.prototype.offset=function(s){var l=this._ctx;return s<=0||(l.offset+=s,Mr(l)?_o(l,function(){var d=s;return function(f,p){return d===0||(d===1?--d:p(function(){f.advance(d),d=0}),!1)}}):_o(l,function(){var d=s;return function(){return--d<0}})),this},Me.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),_o(this._ctx,function(){var l=s;return function(d,f,p){return--l<=0&&f(p),0<=l}},!0),this},Me.prototype.until=function(s,l){return Po(this._ctx,function(d,f,p){return!s(d.value)||(f(p),l)}),this},Me.prototype.first=function(s){return this.limit(1).toArray(function(l){return l[0]}).then(s)},Me.prototype.last=function(s){return this.reverse().first(s)},Me.prototype.filter=function(s){var l;return Po(this._ctx,function(d){return s(d.value)}),(l=this._ctx).isMatch=dr(l.isMatch,s),this},Me.prototype.and=function(s){return this.filter(s)},Me.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},Me.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Me.prototype.desc=function(){return this.reverse()},Me.prototype.eachKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){s(f.key,f)})},Me.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},Me.prototype.eachPrimaryKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){s(f.primaryKey,f)})},Me.prototype.keys=function(s){var l=this._ctx,d=(l.keysOnly=!l.isMatch,[]);return this.each(function(f,p){d.push(p.key)}).then(function(){return d}).then(s)},Me.prototype.primaryKeys=function(s){var l=this._ctx;if(l.dir==="next"&&Mr(l,!0)&&0<l.limit)return this._read(function(f){var p=Ds(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:p,range:l.range}})}).then(function(f){return f.result}).then(s);l.keysOnly=!l.isMatch;var d=[];return this.each(function(f,p){d.push(p.primaryKey)}).then(function(){return d}).then(s)},Me.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},Me.prototype.firstKey=function(s){return this.limit(1).keys(function(l){return l[0]}).then(s)},Me.prototype.lastKey=function(s){return this.reverse().firstKey(s)},Me.prototype.distinct=function(){var s,l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];return l&&l.multi&&(s={},Po(this._ctx,function(f){var f=f.primaryKey.toString(),p=j(s,f);return s[f]=!0,!p})),this},Me.prototype.modify=function(s){var l=this,d=this._ctx;return this._write(function(f){function p(A,W){var q=W.failures;F+=A-W.numFailures;for(var L=0,Z=c(q);L<Z.length;L++){var te=Z[L];T.push(q[te])}}var g=typeof s=="function"?s:function(A){return _c(A,s)},v=d.table.core,_=v.schema.primaryKey,k=_.outbound,P=_.extractKey,$=200,_=l.db._options.modifyChunkSize,T=(_&&($=typeof _=="object"?_[v.name]||_["*"]||200:_),[]),F=0,R=[],D=s===Mc;return l.clone().primaryKeys().then(function(A){function W(L){var Z=Math.min($,A.length-L),te=A.slice(L,L+Z);return(D?Promise.resolve([]):v.getMany({trans:f,keys:te,cache:"immutable"})).then(function(oe){var le=[],ne=[],pe=k?[]:null,fe=D?te:[];if(!D)for(var ae=0;ae<Z;++ae){var ve=oe[ae],Fe={value:ie(ve),primKey:A[L+ae]};g.call(Fe,Fe.value,Fe)!==!1&&(Fe.value==null?fe.push(A[L+ae]):k||_e(P(ve),P(Fe.value))===0?(ne.push(Fe.value),k&&pe.push(A[L+ae])):(fe.push(A[L+ae]),le.push(Fe.value)))}return Promise.resolve(0<le.length&&v.mutate({trans:f,type:"add",values:le}).then(function(Be){for(var Ce in Be.failures)fe.splice(parseInt(Ce),1);p(le.length,Be)})).then(function(){return(0<ne.length||q&&typeof s=="object")&&v.mutate({trans:f,type:"put",keys:pe,values:ne,criteria:q,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<L}).then(function(Be){return p(ne.length,Be)})}).then(function(){return(0<fe.length||q&&D)&&v.mutate({trans:f,type:"delete",keys:fe,criteria:q,isAdditionalChunk:0<L}).then(function(Be){return _s(d.table,fe,Be)}).then(function(Be){return p(fe.length,Be)})}).then(function(){return A.length>L+Z&&W(L+$)})})}var q=Mr(d)&&d.limit===1/0&&(typeof s!="function"||D)&&{index:d.index,range:d.range};return W(0).then(function(){if(0<T.length)throw new Ie("Error modifying one or more objects",T,F,R);return A.length})})})},Me.prototype.delete=function(){var s=this._ctx,l=s.range;return!Mr(s)||s.table.schema.yProps||!s.isPrimKey&&l.type!==3?this.modify(Mc):this._write(function(d){var f=s.table.core.schema.primaryKey,p=l;return s.table.core.count({trans:d,query:{index:f,range:p}}).then(function(g){return s.table.core.mutate({trans:d,type:"deleteRange",range:p}).then(function(P){var k=P.failures,P=P.numFailures;if(P)throw new Ie("Could not delete some values",Object.keys(k).map(function($){return k[$]}),g-P);return g-P})})})};var im=Me;function Me(){}var Mc=function(s,l){return l.value=null};function sm(s,l){return s<l?-1:s===l?0:1}function am(s,l){return l<s?-1:s===l?0:1}function Gt(s,l,d){return s=s instanceof Ic?new s.Collection(s):s,s._ctx.error=new(d||TypeError)(l),s}function Br(s){return new s.Collection(s,function(){return Bc("")}).limit(0)}function Rs(R,l,d,f){var p,g,v,k,P,$,_,T=d.length;if(!d.every(function(A){return typeof A=="string"}))return Gt(R,Sc);function F(A){p=A==="next"?function(q){return q.toUpperCase()}:function(q){return q.toLowerCase()},g=A==="next"?function(q){return q.toLowerCase()}:function(q){return q.toUpperCase()},v=A==="next"?sm:am;var W=d.map(function(q){return{lower:g(q),upper:p(q)}}).sort(function(q,L){return v(q.lower,L.lower)});k=W.map(function(q){return q.upper}),P=W.map(function(q){return q.lower}),_=($=A)==="next"?"":f}F("next");var R=new R.Collection(R,function(){return On(k[0],P[T-1]+f)}),D=(R._ondirectionchange=function(A){F(A)},0);return R._addAlgorithm(function(A,W,q){var L=A.key;if(typeof L=="string"){var Z=g(L);if(l(Z,P,D))return!0;for(var te=null,oe=D;oe<T;++oe){var le=((ne,pe,fe,ae,ve,Fe)=>{for(var Be=Math.min(ne.length,ae.length),Ce=-1,Te=0;Te<Be;++Te){var He=pe[Te];if(He!==ae[Te])return ve(ne[Te],fe[Te])<0?ne.substr(0,Te)+fe[Te]+fe.substr(Te+1):ve(ne[Te],ae[Te])<0?ne.substr(0,Te)+ae[Te]+fe.substr(Te+1):0<=Ce?ne.substr(0,Ce)+pe[Ce]+fe.substr(Ce+1):null;ve(ne[Te],He)<0&&(Ce=Te)}return Be<ae.length&&Fe==="next"?ne+fe.substr(ne.length):Be<ne.length&&Fe==="prev"?ne.substr(0,fe.length):Ce<0?null:ne.substr(0,Ce)+ae[Ce]+fe.substr(Ce+1)})(L,Z,k[oe],P[oe],v,$);le===null&&te===null?D=oe+1:(te===null||0<v(te,le))&&(te=le)}W(te!==null?function(){A.continue(te+_)}:q)}return!1}),R}function On(s,l,d,f){return{type:2,lower:s,upper:l,lowerOpen:d,upperOpen:f}}function Bc(s){return{type:1,lower:s,upper:s}}Object.defineProperty(ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ft.prototype.between=function(s,l,d,f){d=d!==!1,f=f===!0;try{return 0<this._cmp(s,l)||this._cmp(s,l)===0&&(d||f)&&(!d||!f)?Br(this):new this.Collection(this,function(){return On(s,l,!d,!f)})}catch{return Gt(this,kn)}},ft.prototype.equals=function(s){return s==null?Gt(this,kn):new this.Collection(this,function(){return Bc(s)})},ft.prototype.above=function(s){return s==null?Gt(this,kn):new this.Collection(this,function(){return On(s,void 0,!0)})},ft.prototype.aboveOrEqual=function(s){return s==null?Gt(this,kn):new this.Collection(this,function(){return On(s,void 0,!1)})},ft.prototype.below=function(s){return s==null?Gt(this,kn):new this.Collection(this,function(){return On(void 0,s,!1,!0)})},ft.prototype.belowOrEqual=function(s){return s==null?Gt(this,kn):new this.Collection(this,function(){return On(void 0,s)})},ft.prototype.startsWith=function(s){return typeof s!="string"?Gt(this,Sc):this.between(s,s+cr,!0,!0)},ft.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Rs(this,function(l,d){return l.indexOf(d[0])===0},[s],cr)},ft.prototype.equalsIgnoreCase=function(s){return Rs(this,function(l,d){return l===d[0]},[s],"")},ft.prototype.anyOfIgnoreCase=function(){var s=X.apply(J,arguments);return s.length===0?Br(this):Rs(this,function(l,d){return d.indexOf(l)!==-1},s,"")},ft.prototype.startsWithAnyOfIgnoreCase=function(){var s=X.apply(J,arguments);return s.length===0?Br(this):Rs(this,function(l,d){return d.some(function(f){return l.indexOf(f)===0})},s,cr)},ft.prototype.anyOf=function(){var s,l,d=this,f=X.apply(J,arguments),p=this._cmp;try{f.sort(p)}catch{return Gt(this,kn)}return f.length===0?Br(this):((s=new this.Collection(this,function(){return On(f[0],f[f.length-1])}))._ondirectionchange=function(g){p=g==="next"?d._ascending:d._descending,f.sort(p)},l=0,s._addAlgorithm(function(g,v,k){for(var P=g.key;0<p(P,f[l]);)if(++l===f.length)return v(k),!1;return p(P,f[l])===0||(v(function(){g.continue(f[l])}),!1)}),s)},ft.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ft.prototype.noneOf=function(){var s=X.apply(J,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Gt(this,kn)}var l=s.reduce(function(d,f){return d?d.concat([[d[d.length-1][1],f]]):[[-1/0,f]]},null);return l.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},ft.prototype.inAnyRange=function(s,q){var d=this,f=this._cmp,p=this._ascending,g=this._descending,v=this._min,k=this._max;if(s.length===0)return Br(this);if(!s.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&p(L[0],L[1])<=0}))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var P=!q||q.includeLowers!==!1,$=q&&q.includeUppers===!0,_,T=p;function F(L,Z){return T(L[0],Z[0])}try{(_=s.reduce(function(L,Z){for(var te=0,oe=L.length;te<oe;++te){var le=L[te];if(f(Z[0],le[1])<0&&0<f(Z[1],le[0])){le[0]=v(le[0],Z[0]),le[1]=k(le[1],Z[1]);break}}return te===oe&&L.push(Z),L},[])).sort(F)}catch{return Gt(this,kn)}var R=0,D=$?function(L){return 0<p(L,_[R][1])}:function(L){return 0<=p(L,_[R][1])},A=P?function(L){return 0<g(L,_[R][0])}:function(L){return 0<=g(L,_[R][0])},W=D,q=new this.Collection(this,function(){return On(_[0][0],_[_.length-1][1],!P,!$)});return q._ondirectionchange=function(L){T=L==="next"?(W=D,p):(W=A,g),_.sort(F)},q._addAlgorithm(function(L,Z,te){for(var oe,le=L.key;W(le);)if(++R===_.length)return Z(te),!1;return!D(oe=le)&&!A(oe)||(d._cmp(le,_[R][1])===0||d._cmp(le,_[R][0])===0||Z(function(){T===p?L.continue(_[R][0]):L.continue(_[R][1])}),!1)}),q},ft.prototype.startsWithAnyOf=function(){var s=X.apply(J,arguments);return s.every(function(l){return typeof l=="string"})?s.length===0?Br(this):this.inAnyRange(s.map(function(l){return[l,l+cr]})):Gt(this,"startsWithAnyOf() only works with strings")};var Ic=ft;function ft(){}function mn(s){return qe(function(l){return Ci(l),s(l.target.error),!1})}function Ci(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var ji="storagemutated",Do="x-storagemutated-1",zn=bi(null,ji),om=(gn.prototype._lock=function(){return B(!we.global),++this._reculock,this._reculock!==1||we.global||(we.lockOwnerFor=this),this},gn.prototype._unlock=function(){if(B(!we.global),--this._reculock==0)for(we.global||(we.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{ur(s[1],s[0])}catch{}}return this},gn.prototype._locked=function(){return this._reculock&&we.lockOwnerFor!==this},gn.prototype.create=function(s){var l=this;if(this.mode){var d=this.db.idbdb,f=this.db._state.dbOpenError;if(B(!this.idbtrans),!s&&!d)switch(f&&f.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(f);case"MissingAPIError":throw new ge.MissingAPI(f.message,f);default:throw new ge.OpenFailed(f)}if(!this.active)throw new ge.TransactionInactive;B(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=qe(function(p){Ci(p),l._reject(s.error)}),s.onabort=qe(function(p){Ci(p),l.active&&l._reject(new ge.Abort(s.error)),l.active=!1,l.on("abort").fire(p)}),s.oncomplete=qe(function(){l.active=!1,l._resolve(),"mutatedParts"in s&&zn.storagemutated.fire(s.mutatedParts)})}return this},gn.prototype._promise=function(s,l,d){var f,p=this;return s==="readwrite"&&this.mode!=="readwrite"?rt(new ge.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ce(function(g,v){p._blockedFuncs.push([function(){p._promise(s,l,d).then(g,v)},we])}):d?Mn(function(){var g=new ce(function(v,k){p._lock();var P=l(v,k,p);P&&P.then&&P.then(v,k)});return g.finally(function(){return p._unlock()}),g._lib=!0,g}):((f=new ce(function(g,v){var k=l(g,v,p);k&&k.then&&k.then(g,v)}))._lib=!0,f):rt(new ge.TransactionInactive)},gn.prototype._root=function(){return this.parent?this.parent._root():this},gn.prototype.waitFor=function(s){var l,d=this._root(),f=ce.resolve(s),p=(d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return f}):(d._waitingFor=f,d._waitingQueue=[],l=d.idbtrans.objectStore(d.storeNames[0]),function g(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(l.get(-1/0).onsuccess=g)}()),d._waitingFor);return new ce(function(g,v){f.then(function(k){return d._waitingQueue.push(qe(g.bind(null,k)))},function(k){return d._waitingQueue.push(qe(v.bind(null,k)))}).finally(function(){d._waitingFor===p&&(d._waitingFor=null)})})},gn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},gn.prototype.table=function(s){var l=this._memoizedTables||(this._memoizedTables={});if(j(l,s))return l[s];var d=this.schema[s];if(d)return(d=new this.db.Table(s,d,this)).core=this.db.core.table(s),l[s]=d;throw new ge.NotFound("Table "+s+" not part of transaction")},gn);function gn(){}function Fo(s,l,d,f,p,g,v,k){return{name:s,keyPath:l,unique:d,multi:f,auto:p,compound:g,src:(d&&!v?"&":"")+(f?"*":"")+(p?"++":"")+Oc(l),type:k}}function Oc(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Ro(s,l,d){return{name:s,primKey:l,indexes:d,mappedClass:null,idxByName:(f=function(p){return[p.name,p]},d.reduce(function(p,g,v){return g=f(g,v),g&&(p[g[0]]=g[1]),p},{}))};var f}var Si=function(s){try{return s.only([[]]),Si=function(){return[[]]},[[]]}catch{return Si=function(){return cr},cr}};function Mo(s){return s==null?function(){}:typeof s=="string"?(l=s).split(".").length===1?function(d){return d[l]}:function(d){return U(d,l)}:function(d){return U(d,s)};var l}function zc(s){return[].slice.call(s)}var lm=0;function Ei(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function um(s,l,P){function f(D){if(D.type===3)return null;if(D.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var T=D.lower,F=D.upper,R=D.lowerOpen,D=D.upperOpen;return T===void 0?F===void 0?null:l.upperBound(F,!!D):F===void 0?l.lowerBound(T,!!R):l.bound(T,F,!!R,!!D)}function p(_){var T,F=_.name;return{name:F,schema:_,mutate:function(R){var D=R.trans,A=R.type,W=R.keys,q=R.values,L=R.range;return new Promise(function(Z,te){Z=qe(Z);var oe=D.objectStore(F),le=oe.keyPath==null,ne=A==="put"||A==="add";if(!ne&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var pe,fe=(W||q||{length:1}).length;if(W&&q&&W.length!==q.length)throw new Error("Given keys array must have same length as given values array.");if(fe===0)return Z({numFailures:0,failures:{},results:[],lastResult:void 0});function ae(Je){++Be,Ci(Je)}var ve=[],Fe=[],Be=0;if(A==="deleteRange"){if(L.type===4)return Z({numFailures:Be,failures:Fe,results:[],lastResult:void 0});L.type===3?ve.push(pe=oe.clear()):ve.push(pe=oe.delete(f(L)))}else{var le=ne?le?[q,W]:[q,null]:[W,null],Ce=le[0],Te=le[1];if(ne)for(var He=0;He<fe;++He)ve.push(pe=Te&&Te[He]!==void 0?oe[A](Ce[He],Te[He]):oe[A](Ce[He])),pe.onerror=ae;else for(He=0;He<fe;++He)ve.push(pe=oe[A](Ce[He])),pe.onerror=ae}function Yt(Je){Je=Je.target.result,ve.forEach(function(pr,Jo){return pr.error!=null&&(Fe[Jo]=pr.error)}),Z({numFailures:Be,failures:Fe,results:A==="delete"?W:ve.map(function(pr){return pr.result}),lastResult:Je})}pe.onerror=function(Je){ae(Je),Yt(Je)},pe.onsuccess=Yt})},getMany:function(R){var D=R.trans,A=R.keys;return new Promise(function(W,q){W=qe(W);for(var L,Z=D.objectStore(F),te=A.length,oe=new Array(te),le=0,ne=0,pe=function(ve){ve=ve.target,oe[ve._pos]=ve.result,++ne===le&&W(oe)},fe=mn(q),ae=0;ae<te;++ae)A[ae]!=null&&((L=Z.get(A[ae]))._pos=ae,L.onsuccess=pe,L.onerror=fe,++le);le===0&&W(oe)})},get:function(R){var D=R.trans,A=R.key;return new Promise(function(W,q){W=qe(W);var L=D.objectStore(F).get(A);L.onsuccess=function(Z){return W(Z.target.result)},L.onerror=mn(q)})},query:(T=k,function(R){return new Promise(function(D,A){D=qe(D);var W,q,L,ne=R.trans,Z=R.values,te=R.limit,le=R.query,oe=te===1/0?void 0:te,pe=le.index,le=le.range,ne=ne.objectStore(F),ne=pe.isPrimaryKey?ne:ne.index(pe.name),pe=f(le);if(te===0)return D({result:[]});T?((le=Z?ne.getAll(pe,oe):ne.getAllKeys(pe,oe)).onsuccess=function(fe){return D({result:fe.target.result})},le.onerror=mn(A)):(W=0,q=!Z&&"openKeyCursor"in ne?ne.openKeyCursor(pe):ne.openCursor(pe),L=[],q.onsuccess=function(fe){var ae=q.result;return!ae||(L.push(Z?ae.value:ae.primaryKey),++W===te)?D({result:L}):void ae.continue()},q.onerror=mn(A))})}),openCursor:function(R){var D=R.trans,A=R.values,W=R.query,q=R.reverse,L=R.unique;return new Promise(function(Z,te){Z=qe(Z);var ne=W.index,oe=W.range,le=D.objectStore(F),le=ne.isPrimaryKey?le:le.index(ne.name),ne=q?L?"prevunique":"prev":L?"nextunique":"next",pe=!A&&"openKeyCursor"in le?le.openKeyCursor(f(oe),ne):le.openCursor(f(oe),ne);pe.onerror=mn(te),pe.onsuccess=qe(function(fe){var ae,ve,Fe,Be,Ce=pe.result;Ce?(Ce.___id=++lm,Ce.done=!1,ae=Ce.continue.bind(Ce),ve=(ve=Ce.continuePrimaryKey)&&ve.bind(Ce),Fe=Ce.advance.bind(Ce),Be=function(){throw new Error("Cursor not stopped")},Ce.trans=D,Ce.stop=Ce.continue=Ce.continuePrimaryKey=Ce.advance=function(){throw new Error("Cursor not started")},Ce.fail=qe(te),Ce.next=function(){var Te=this,He=1;return this.start(function(){return He--?Te.continue():Te.stop()}).then(function(){return Te})},Ce.start=function(Te){function He(){if(pe.result)try{Te()}catch(Je){Ce.fail(Je)}else Ce.done=!0,Ce.start=function(){throw new Error("Cursor behind last entry")},Ce.stop()}var Yt=new Promise(function(Je,pr){Je=qe(Je),pe.onerror=mn(pr),Ce.fail=pr,Ce.stop=function(Jo){Ce.stop=Ce.continue=Ce.continuePrimaryKey=Ce.advance=Be,Je(Jo)}});return pe.onsuccess=qe(function(Je){pe.onsuccess=He,He()}),Ce.continue=ae,Ce.continuePrimaryKey=ve,Ce.advance=Fe,He(),Yt},Z(Ce)):Z(null)},te)})},count:function(R){var D=R.query,A=R.trans,W=D.index,q=D.range;return new Promise(function(L,Z){var te=A.objectStore(F),te=W.isPrimaryKey?te:te.index(W.name),oe=f(q),oe=oe?te.count(oe):te.count();oe.onsuccess=qe(function(le){return L(le.target.result)}),oe.onerror=mn(Z)})}}}g=P,v=zc((P=s).objectStoreNames);var g,P={schema:{name:P.name,tables:v.map(function(_){return g.objectStore(_)}).map(function(_){var T=_.keyPath,F=_.autoIncrement,D=h(T),R={},D={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T==null,compound:D,keyPath:T,autoIncrement:F,unique:!0,extractKey:Mo(T)},indexes:zc(_.indexNames).map(function(A){return _.index(A)}).map(function(L){var Z=L.name,W=L.unique,q=L.multiEntry,L=L.keyPath,Z={name:Z,compound:h(L),keyPath:L,unique:W,multiEntry:q,extractKey:Mo(L)};return R[Ei(L)]=Z}),getIndexByKeyPath:function(A){return R[Ei(A)]}};return R[":id"]=D.primaryKey,T!=null&&(R[Ei(T)]=D.primaryKey),D})},hasGetAll:0<v.length&&"getAll"in g.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},v=P.schema,k=P.hasGetAll,P=v.tables.map(p),$={};return P.forEach(function(_){return $[_.name]=_}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(_){if($[_])return $[_];throw new Error("Table '".concat(_,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Si(l),schema:v}}function cm(s,l,d,f){return d=d.IDBKeyRange,l=um(l,d,f),{dbcore:s.dbcore.reduce(function(p,g){return g=g.create,r(r({},p),g(p))},l)}}function Ms(s,l){var d=l.db,d=cm(s._middlewares,d,s._deps,l);s.core=d.dbcore,s.tables.forEach(function(f){var p=f.name;s.core.schema.tables.some(function(g){return g.name===p})&&(f.core=s.core.table(p),s[p]instanceof s.Table)&&(s[p].core=f.core)})}function Bs(s,l,d,f){d.forEach(function(p){var g=f[p];l.forEach(function(v){var k=function P($,_){return Q($,_)||($=y($))&&P($,_)}(v,p);(!k||"value"in k&&k.value===void 0)&&(v===s.Transaction.prototype||v instanceof s.Transaction?O(v,p,{get:function(){return this.table(p)},set:function(P){G(this,p,{value:P,writable:!0,configurable:!0,enumerable:!0})}}):v[p]=new s.Table(p,g))})})}function Bo(s,l){l.forEach(function(d){for(var f in d)d[f]instanceof s.Table&&delete d[f]})}function dm(s,l){return s._cfg.version-l._cfg.version}function fm(s,l,d,f){var p=s._dbSchema,g=(d.objectStoreNames.contains("$meta")&&!p.$meta&&(p.$meta=Ro("$meta",$c("")[0],[]),s._storeNames.push("$meta")),s._createTransaction("readwrite",s._storeNames,p)),v=(g.create(d),g._completion.catch(f),g._reject.bind(g)),k=we.transless||we;Mn(function(){if(we.trans=g,we.transless=k,l!==0)return Ms(s,d),$=l,((P=g).storeNames.includes("$meta")?P.table("$meta").get("version").then(function(_){return _??$}):ce.resolve($)).then(function(W){var T=s,F=W,R=g,D=d,A=[],W=T._versions,q=T._dbSchema=Os(0,T.idbdb,D);return(W=W.filter(function(L){return L._cfg.version>=F})).length===0?ce.resolve():(W.forEach(function(L){A.push(function(){var Z,te,oe,le=q,ne=L._cfg.dbschema,pe=(zs(T,le,D),zs(T,ne,D),q=T._dbSchema=ne,Io(le,ne)),fe=(pe.add.forEach(function(ae){Oo(D,ae[0],ae[1].primKey,ae[1].indexes)}),pe.change.forEach(function(ae){if(ae.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var ve=D.objectStore(ae.name);ae.add.forEach(function(Fe){return Is(ve,Fe)}),ae.change.forEach(function(Fe){ve.deleteIndex(Fe.name),Is(ve,Fe)}),ae.del.forEach(function(Fe){return ve.deleteIndex(Fe)})}),L._cfg.contentUpgrade);if(fe&&L._cfg.version>F)return Ms(T,D),R._memoizedTables={},Z=V(ne),pe.del.forEach(function(ae){Z[ae]=le[ae]}),Bo(T,[T.Transaction.prototype]),Bs(T,[T.Transaction.prototype],c(Z),Z),R.schema=Z,(te=he(fe))&&Fr(),ne=ce.follow(function(){var ae;(oe=fe(R))&&te&&(ae=Bn.bind(null,null),oe.then(ae,ae))}),oe&&typeof oe.then=="function"?ce.resolve(oe):ne.then(function(){return oe})}),A.push(function(Z){var te,oe,le=L._cfg.dbschema;te=le,oe=Z,[].slice.call(oe.db.objectStoreNames).forEach(function(ne){return te[ne]==null&&oe.db.deleteObjectStore(ne)}),Bo(T,[T.Transaction.prototype]),Bs(T,[T.Transaction.prototype],T._storeNames,T._dbSchema),R.schema=T._dbSchema}),A.push(function(Z){T.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(T.idbdb.version/10)===L._cfg.version?(T.idbdb.deleteObjectStore("$meta"),delete T._dbSchema.$meta,T._storeNames=T._storeNames.filter(function(te){return te!=="$meta"})):Z.objectStore("$meta").put(L._cfg.version,"version"))})}),function L(){return A.length?ce.resolve(A.shift()(R.idbtrans)).then(L):ce.resolve()}().then(function(){Lc(q,D)}))}).catch(v);var P,$;c(p).forEach(function(_){Oo(d,_,p[_].primKey,p[_].indexes)}),Ms(s,d),ce.follow(function(){return s.on.populate.fire(g)}).catch(v)})}function hm(s,l){Lc(s._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var d=Os(0,s.idbdb,l);zs(s,s._dbSchema,l);for(var f=0,p=Io(d,s._dbSchema).change;f<p.length;f++){var g=(v=>{if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=l.objectStore(v.name);v.add.forEach(function(P){ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(P.src)),Is(k,P)})})(p[f]);if(typeof g=="object")return g.value}}function Io(s,l){var d,f={del:[],add:[],change:[]};for(d in s)l[d]||f.del.push(d);for(d in l){var p=s[d],g=l[d];if(p){var v={name:d,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(p.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||p.primKey.auto!==g.primKey.auto)v.recreate=!0,f.change.push(v);else{var k=p.idxByName,P=g.idxByName,$=void 0;for($ in k)P[$]||v.del.push($);for($ in P){var _=k[$],T=P[$];_?_.src!==T.src&&v.change.push(T):v.add.push(T)}(0<v.del.length||0<v.add.length||0<v.change.length)&&f.change.push(v)}}else f.add.push([d,g])}return f}function Oo(s,l,d,f){var p=s.db.createObjectStore(l,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});f.forEach(function(g){return Is(p,g)})}function Lc(s,l){c(s).forEach(function(d){l.db.objectStoreNames.contains(d)||(ye&&console.debug("Dexie: Creating missing table",d),Oo(l,d,s[d].primKey,s[d].indexes))})}function Is(s,l){s.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function Os(s,l,d){var f={};return x(l.objectStoreNames,0).forEach(function(p){for(var g=d.objectStore(p),v=Fo(Oc($=g.keyPath),$||"",!0,!1,!!g.autoIncrement,$&&typeof $!="string",!0),k=[],P=0;P<g.indexNames.length;++P){var _=g.index(g.indexNames[P]),$=_.keyPath,_=Fo(_.name,$,!!_.unique,!!_.multiEntry,!1,$&&typeof $!="string",!1);k.push(_)}f[p]=Ro(p,v,k)}),f}function zs(s,l,d){for(var f=d.db.objectStoreNames,p=0;p<f.length;++p){var g=f[p],v=d.objectStore(g);s._hasGetAll="getAll"in v;for(var k=0;k<v.indexNames.length;++k){var P,$=v.indexNames[k],_=v.index($).keyPath,_=typeof _=="string"?_:"["+x(_).join("+")+"]";l[g]&&(P=l[g].idxByName[_])&&(P.name=$,delete l[g].idxByName[_],l[g].idxByName[$]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function $c(s){return s.split(",").map(function(l,d){var p=l.split(":"),f=(f=p[1])==null?void 0:f.trim(),p=(l=p[0].trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return Fo(p,g||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),h(g),d===0,f)})}Ir.prototype._createTableSchema=Ro,Ir.prototype._parseIndexSyntax=$c,Ir.prototype._parseStoresSpec=function(s,l){var d=this;c(s).forEach(function(f){if(s[f]!==null){var p=d._parseIndexSyntax(s[f]),g=p.shift();if(!g)throw new ge.Schema("Invalid schema for table "+f+": "+s[f]);if(g.unique=!0,g.multi)throw new ge.Schema("Primary key cannot be multiEntry*");p.forEach(function(v){if(v.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!v.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),g=d._createTableSchema(f,g,p),l[f]=g}})},Ir.prototype.stores=function(d){var l=this.db,d=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,d):d,l._versions),f={},p={};return d.forEach(function(g){m(f,g._cfg.storesSource),p=g._cfg.dbschema={},g._parseStoresSpec(f,p)}),l._dbSchema=p,Bo(l,[l._allTables,l,l.Transaction.prototype]),Bs(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],c(p),p),l._storeNames=c(p),this},Ir.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Pe(this._cfg.contentUpgrade||Ee,s),this};var pm=Ir;function Ir(){}function zo(s,l){var d=s._dbNamesDB;return d||(d=s._dbNamesDB=new Cn(As,{addons:[],indexedDB:s,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Lo(s){return s&&typeof s.databases=="function"}function $o(s){return Mn(function(){return we.letThrough=!0,s()})}function Go(s){return!("from"in s)}var wt=function(s,l){var d;if(!this)return d=new wt,s&&"d"in s&&m(d,s),d;m(this,arguments.length?{d:1,from:s,to:1<arguments.length?l:s}:{d:0})};function Ti(s,l,d){var f=_e(l,d);if(!isNaN(f)){if(0<f)throw RangeError();if(Go(s))return m(s,{from:l,to:d,d:1});var f=s.l,p=s.r;if(_e(d,s.from)<0)return f?Ti(f,l,d):s.l={from:l,to:d,d:1,l:null,r:null},Wc(s);if(0<_e(l,s.to))return p?Ti(p,l,d):s.r={from:l,to:d,d:1,l:null,r:null},Wc(s);_e(l,s.from)<0&&(s.from=l,s.l=null,s.d=p?p.d+1:1),0<_e(d,s.to)&&(s.to=d,s.r=null,s.d=s.l?s.l.d+1:1),l=!s.r,f&&!s.l&&Ni(s,f),p&&l&&Ni(s,p)}}function Ni(s,l){Go(l)||function d(f,p){var g=p.from,v=p.l,k=p.r;Ti(f,g,p.to),v&&d(f,v),k&&d(f,k)}(s,l)}function Gc(s,l){var d=Ls(l),f=d.next();if(!f.done)for(var p=f.value,g=Ls(s),v=g.next(p.from),k=v.value;!f.done&&!v.done;){if(_e(k.from,p.to)<=0&&0<=_e(k.to,p.from))return!0;_e(p.from,k.from)<0?p=(f=d.next(k.from)).value:k=(v=g.next(p.from)).value}return!1}function Ls(s){var l=Go(s)?null:{s:0,n:s};return{next:function(d){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&_e(d,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||_e(d,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Wc(s){var l,d,f,p=(((p=s.r)==null?void 0:p.d)||0)-(((p=s.l)==null?void 0:p.d)||0),p=1<p?"r":p<-1?"l":"";p&&(l=p=="r"?"l":"r",d=r({},s),f=s[p],s.from=f.from,s.to=f.to,s[p]=f[p],d[p]=f[l],(s[l]=d).d=Uc(d)),s.d=Uc(s)}function Uc(d){var l=d.r,d=d.l;return(l?d?Math.max(l.d,d.d):l.d:d?d.d:0)+1}function $s(s,l){return c(l).forEach(function(d){s[d]?Ni(s[d],l[d]):s[d]=function f(p){var g,v,k={};for(g in p)j(p,g)&&(v=p[g],k[g]=!v||typeof v!="object"||N.has(v.constructor)?v:f(v));return k}(l[d])}),s}function Wo(s,l){return s.all||l.all||Object.keys(s).some(function(d){return l[d]&&Gc(l[d],s[d])})}E(wt.prototype,((lt={add:function(s){return Ni(this,s),this},addKey:function(s){return Ti(this,s,s),this},addKeys:function(s){var l=this;return s.forEach(function(d){return Ti(l,d,d)}),this},hasKey:function(s){var l=Ls(this).next(s).value;return l&&_e(l.from,s)<=0&&0<=_e(l.to,s)}})[ue]=function(){return Ls(this)},lt));var fr={},Uo={},Vo=!1;function Gs(s){$s(Uo,s),Vo||(Vo=!0,setTimeout(function(){Vo=!1,qo(Uo,!(Uo={}))},0))}function qo(s,l){l===void 0&&(l=!1);var d=new Set;if(s.all)for(var f=0,p=Object.values(fr);f<p.length;f++)Vc(k=p[f],s,d,l);else for(var g in s){var v,k,g=/^idb\:\/\/(.*)\/(.*)\//.exec(g);g&&(v=g[1],g=g[2],k=fr["idb://".concat(v,"/").concat(g)])&&Vc(k,s,d,l)}d.forEach(function(P){return P()})}function Vc(s,l,d,f){for(var p=[],g=0,v=Object.entries(s.queries.query);g<v.length;g++){for(var k=v[g],P=k[0],$=[],_=0,T=k[1];_<T.length;_++){var F=T[_];Wo(l,F.obsSet)?F.subscribers.forEach(function(W){return d.add(W)}):f&&$.push(F)}f&&p.push([P,$])}if(f)for(var R=0,D=p;R<D.length;R++){var A=D[R],P=A[0],$=A[1];s.queries.query[P]=$}}function mm(s){var l=s._state,d=s._deps.indexedDB;if(l.isBeingOpened||s.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?rt(l.dbOpenError):s});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,p=Math.round(10*s.verno),g=!1;function v(){if(l.openCanceller!==f)throw new ge.DatabaseClosed("db.open() was cancelled")}function k(){return new ce(function(F,R){if(v(),!d)throw new ge.MissingAPI;var D=s.name,A=l.autoSchema||!p?d.open(D):d.open(D,p);if(!A)throw new ge.MissingAPI;A.onerror=mn(R),A.onblocked=qe(s._fireOnBlocked),A.onupgradeneeded=qe(function(W){var q;_=A.transaction,l.autoSchema&&!s._options.allowEmptyDB?(A.onerror=Ci,_.abort(),A.result.close(),(q=d.deleteDatabase(D)).onsuccess=q.onerror=qe(function(){R(new ge.NoSuchDatabase("Database ".concat(D," doesnt exist")))})):(_.onerror=mn(R),q=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,T=q<1,s.idbdb=A.result,g&&hm(s,_),fm(s,q/10,_,R))},R),A.onsuccess=qe(function(){_=null;var W,q,L,Z,te,oe,le=s.idbdb=A.result,ne=x(le.objectStoreNames);if(0<ne.length)try{var pe=le.transaction((te=ne).length===1?te[0]:te,"readonly");if(l.autoSchema)oe=le,Z=pe,(L=s).verno=oe.version/10,Z=L._dbSchema=Os(0,oe,Z),L._storeNames=x(oe.objectStoreNames,0),Bs(L,[L._allTables],c(Z),Z);else if(zs(s,s._dbSchema,pe),q=pe,((q=Io(Os(0,(W=s).idbdb,q),W._dbSchema)).add.length||q.change.some(function(fe){return fe.add.length||fe.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),le.close(),p=le.version+1,g=!0,F(k());Ms(s,pe)}catch{}Rr.push(s),le.onversionchange=qe(function(fe){l.vcFired=!0,s.on("versionchange").fire(fe)}),le.onclose=qe(function(){s.close({disableAutoOpen:!1})}),T&&(ne=s._deps,te=D,Lo(oe=ne.indexedDB)||te===As||zo(oe,ne.IDBKeyRange).put({name:te}).catch(Ee)),F()},R)}).catch(function(F){switch(F==null?void 0:F.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<p)return p=0,k()}return ce.reject(F)})}var P,$=l.dbReadyResolve,_=null,T=!1;return ce.race([f,(typeof navigator>"u"?ce.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(F){function R(){return indexedDB.databases().finally(F)}P=setInterval(R,100),R()}).finally(function(){return clearInterval(P)}):Promise.resolve()).then(k)]).then(function(){return v(),l.onReadyBeingFired=[],ce.resolve($o(function(){return s.on.ready.fire(s.vip)})).then(function F(){var R;if(0<l.onReadyBeingFired.length)return R=l.onReadyBeingFired.reduce(Pe,Ee),l.onReadyBeingFired=[],ce.resolve($o(function(){return R(s.vip)})).then(F)})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(F){l.dbOpenError=F;try{_&&_.abort()}catch{}return f===l.openCanceller&&s._close(),rt(F)}).finally(function(){l.openComplete=!0,$()}).then(function(){var F;return T&&(F={},s.tables.forEach(function(R){R.schema.indexes.forEach(function(D){D.name&&(F["idb://".concat(s.name,"/").concat(R.name,"/").concat(D.name)]=new wt(-1/0,[[[]]]))}),F["idb://".concat(s.name,"/").concat(R.name,"/")]=F["idb://".concat(s.name,"/").concat(R.name,"/:dels")]=new wt(-1/0,[[[]]])}),zn(ji).fire(F),qo(F,!0)),s})}function Ko(s){function l(g){return s.next(g)}var d=p(l),f=p(function(g){return s.throw(g)});function p(g){return function(k){var k=g(k),P=k.value;return k.done?P:P&&typeof P.then=="function"?P.then(d,f):h(P)?Promise.all(P).then(d,f):d(P)}}return p(l)()}function Ws(s,l,d){for(var f=h(s)?s.slice():[s],p=0;p<d;++p)f.push(l);return f}var gm={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(f){var d=s.table(f),f=d.schema,p={},g=[];function v(F,R,D){var L=Ei(F),A=p[L]=p[L]||[],W=F==null?0:typeof F=="string"?1:F.length,q=0<R,L=r(r({},D),{name:q?"".concat(L,"(virtual-from:").concat(D.name,")"):D.name,lowLevelIndex:D,isVirtual:q,keyTail:R,keyLength:W,extractKey:Mo(F),unique:!q&&D.unique});return A.push(L),L.isPrimaryKey||g.push(L),1<W&&v(W===2?F[0]:F.slice(0,W-1),R+1,D),A.sort(function(Z,te){return Z.keyTail-te.keyTail}),L}var k=v(f.primaryKey.keyPath,0,f.primaryKey);p[":id"]=[k];for(var P=0,$=f.indexes;P<$.length;P++){var _=$[P];v(_.keyPath,0,_)}function T(F){var R,D=F.query.index;return D.isVirtual?r(r({},F),{query:{index:D.lowLevelIndex,range:(R=F.query.range,D=D.keyTail,{type:R.type===1?2:R.type,lower:Ws(R.lower,R.lowerOpen?s.MAX_KEY:s.MIN_KEY,D),lowerOpen:!0,upper:Ws(R.upper,R.upperOpen?s.MIN_KEY:s.MAX_KEY,D),upperOpen:!0})}}):F}return r(r({},d),{schema:r(r({},f),{primaryKey:k,indexes:g,getIndexByKeyPath:function(F){return(F=p[Ei(F)])&&F[0]}}),count:function(F){return d.count(T(F))},query:function(F){return d.query(T(F))},openCursor:function(F){var R=F.query.index,D=R.keyTail,A=R.keyLength;return R.isVirtual?d.openCursor(T(F)).then(function(q){return q&&W(q)}):d.openCursor(F);function W(q){return Object.create(q,{continue:{value:function(L){L!=null?q.continue(Ws(L,F.reverse?s.MAX_KEY:s.MIN_KEY,D)):F.unique?q.continue(q.key.slice(0,A).concat(F.reverse?s.MIN_KEY:s.MAX_KEY,D)):q.continue()}},continuePrimaryKey:{value:function(L,Z){q.continuePrimaryKey(Ws(L,s.MAX_KEY,D),Z)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var L=q.key;return A===1?L[0]:L.slice(0,A)}},value:{get:function(){return q.value}}})}}})}})}};function Ho(s,l,d,f){return d=d||{},f=f||"",c(s).forEach(function(p){var g,v,k;j(l,p)?(g=s[p],v=l[p],typeof g=="object"&&typeof v=="object"&&g&&v?(k=ke(g))!==ke(v)?d[f+p]=l[p]:k==="Object"?Ho(g,v,d,f+p+"."):g!==v&&(d[f+p]=l[p]):g!==v&&(d[f+p]=l[p])):d[f+p]=void 0}),c(l).forEach(function(p){j(s,p)||(d[f+p]=l[p])}),d}function Yo(s,l){return l.type==="delete"?l.keys:l.keys||l.values.map(s.extractKey)}var ym={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(l){var d=s.table(l),f=d.schema.primaryKey;return r(r({},d),{mutate:function(p){var g=we.trans,v=g.table(l).hook,k=v.deleting,P=v.creating,$=v.updating;switch(p.type){case"add":if(P.fire===Ee)break;return g._promise("readwrite",function(){return _(p)},!0);case"put":if(P.fire===Ee&&$.fire===Ee)break;return g._promise("readwrite",function(){return _(p)},!0);case"delete":if(k.fire===Ee)break;return g._promise("readwrite",function(){return _(p)},!0);case"deleteRange":if(k.fire===Ee)break;return g._promise("readwrite",function(){return function T(F,R,D){return d.query({trans:F,values:!1,query:{index:f,range:R},limit:D}).then(function(A){var W=A.result;return _({type:"delete",keys:W,trans:F}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):W.length<D?{failures:[],numFailures:0,lastResult:void 0}:T(F,r(r({},R),{lower:W[W.length-1],lowerOpen:!0}),D)})})}(p.trans,p.range,1e4)},!0)}return d.mutate(p);function _(T){var F,R,D,A=we.trans,W=T.keys||Yo(f,T);if(W)return(T=T.type==="add"||T.type==="put"?r(r({},T),{keys:W}):r({},T)).type!=="delete"&&(T.values=a([],T.values)),T.keys&&(T.keys=a([],T.keys)),F=d,D=W,((R=T).type==="add"?Promise.resolve([]):F.getMany({trans:R.trans,keys:D,cache:"immutable"})).then(function(q){var L=W.map(function(Z,te){var oe,le,ne,pe=q[te],fe={onerror:null,onsuccess:null};return T.type==="delete"?k.fire.call(fe,Z,pe,A):T.type==="add"||pe===void 0?(oe=P.fire.call(fe,Z,T.values[te],A),Z==null&&oe!=null&&(T.keys[te]=Z=oe,f.outbound||I(T.values[te],f.keyPath,Z))):(oe=Ho(pe,T.values[te]),(le=$.fire.call(fe,oe,Z,pe,A))&&(ne=T.values[te],Object.keys(le).forEach(function(ae){j(ne,ae)?ne[ae]=le[ae]:I(ne,ae,le[ae])}))),fe});return d.mutate(T).then(function(Z){for(var te=Z.failures,oe=Z.results,le=Z.numFailures,Z=Z.lastResult,ne=0;ne<W.length;++ne){var pe=(oe||W)[ne],fe=L[ne];pe==null?fe.onerror&&fe.onerror(te[ne]):fe.onsuccess&&fe.onsuccess(T.type==="put"&&q[ne]?T.values[ne]:pe)}return{failures:te,results:oe,numFailures:le,lastResult:Z}}).catch(function(Z){return L.forEach(function(te){return te.onerror&&te.onerror(Z)}),Promise.reject(Z)})});throw new Error("Keys missing")}}})}})}};function qc(s,l,d){try{if(!l||l.keys.length<s.length)return null;for(var f=[],p=0,g=0;p<l.keys.length&&g<s.length;++p)_e(l.keys[p],s[g])===0&&(f.push(d?ie(l.values[p]):l.values[p]),++g);return f.length===s.length?f:null}catch{return null}}var vm={stack:"dbcore",level:-1,create:function(s){return{table:function(l){var d=s.table(l);return r(r({},d),{getMany:function(f){var p;return f.cache?(p=qc(f.keys,f.trans._cache,f.cache==="clone"))?ce.resolve(p):d.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ie(g):g},g}):d.getMany(f)},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),d.mutate(f)}})}}}};function Kc(s,l){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Hc(s,l){switch(s){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var xm={stack:"dbcore",level:0,name:"Observability",create:function(s){var l=s.schema.name,d=new wt(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(f,p,g){if(we.subscr&&p!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(we.querier));return s.transaction(f,p,g)},table:function(f){function p(W){var A,W=W.query;return[A=W.index,new wt((A=(W=W.range).lower)!=null?A:s.MIN_KEY,(A=W.upper)!=null?A:s.MAX_KEY)]}var g=s.table(f),v=g.schema,k=v.primaryKey,P=v.indexes,$=k.extractKey,_=k.outbound,T=k.autoIncrement&&P.filter(function(D){return D.compound&&D.keyPath.includes(k.keyPath)}),F=r(r({},g),{mutate:function(D){function A(ve){return ve="idb://".concat(l,"/").concat(f,"/").concat(ve),te[ve]||(te[ve]=new wt)}var W,q,L,Z=D.trans,te=D.mutatedParts||(D.mutatedParts={}),oe=A(""),le=A(":dels"),ne=D.type,fe=D.type==="deleteRange"?[D.range]:D.type==="delete"?[D.keys]:D.values.length<50?[Yo(k,D).filter(function(ve){return ve}),D.values]:[],pe=fe[0],fe=fe[1],ae=D.trans._cache;return h(pe)?(oe.addKeys(pe),(ne=ne==="delete"||pe.length===fe.length?qc(pe,ae):null)||le.addKeys(pe),(ne||fe)&&(W=A,q=ne,L=fe,v.indexes.forEach(function(ve){var Fe=W(ve.name||"");function Be(Te){return Te!=null?ve.extractKey(Te):null}function Ce(Te){ve.multiEntry&&h(Te)?Te.forEach(function(He){return Fe.addKey(He)}):Fe.addKey(Te)}(q||L).forEach(function(Te,Je){var Yt=q&&Be(q[Je]),Je=L&&Be(L[Je]);_e(Yt,Je)!==0&&(Yt!=null&&Ce(Yt),Je!=null)&&Ce(Je)})}))):pe?(fe={from:(ae=pe.lower)!=null?ae:s.MIN_KEY,to:(ne=pe.upper)!=null?ne:s.MAX_KEY},le.add(fe),oe.add(fe)):(oe.add(d),le.add(d),v.indexes.forEach(function(ve){return A(ve.name).add(d)})),g.mutate(D).then(function(ve){return!pe||D.type!=="add"&&D.type!=="put"||(oe.addKeys(ve.results),T&&T.forEach(function(Fe){for(var Be=D.values.map(function(Yt){return Fe.extractKey(Yt)}),Ce=Fe.keyPath.findIndex(function(Yt){return Yt===k.keyPath}),Te=0,He=ve.results.length;Te<He;++Te)Be[Te][Ce]=ve.results[Te];A(Fe.name).addKeys(Be)})),Z.mutatedParts=$s(Z.mutatedParts||{},te),ve})}}),R={get:function(D){return[k,new wt(D.key)]},getMany:function(D){return[k,new wt().addKeys(D.keys)]},count:p,query:p,openCursor:p};return c(R).forEach(function(D){F[D]=function(A){var W=we.subscr,q=!!W,L=Kc(we,g)&&Hc(D,A)?A.obsSet={}:W;if(q){var Z,W=function(fe){return fe="idb://".concat(l,"/").concat(f,"/").concat(fe),L[fe]||(L[fe]=new wt)},te=W(""),oe=W(":dels"),q=R[D](A),le=q[0],q=q[1];if((D==="query"&&le.isPrimaryKey&&!A.values?oe:W(le.name||"")).add(q),!le.isPrimaryKey){if(D!=="count")return Z=D==="query"&&_&&A.values&&g.query(r(r({},A),{values:!1})),g[D].apply(this,arguments).then(function(fe){if(D==="query"){if(_&&A.values)return Z.then(function(Be){return Be=Be.result,te.addKeys(Be),fe});var ae=A.values?fe.result.map($):fe.result;(A.values?te:oe).addKeys(ae)}else{var ve,Fe;if(D==="openCursor")return Fe=A.values,(ve=fe)&&Object.create(ve,{key:{get:function(){return oe.addKey(ve.primaryKey),ve.key}},primaryKey:{get:function(){var Be=ve.primaryKey;return oe.addKey(Be),Be}},value:{get:function(){return Fe&&te.addKey(ve.primaryKey),ve.value}}})}return fe});oe.add(d)}}return g[D].apply(this,arguments)}}),F}})}};function Yc(s,l,d){var f;return d.numFailures===0?l:l.type==="deleteRange"||(f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1,d.numFailures===f)?null:(f=r({},l),h(f.keys)&&(f.keys=f.keys.filter(function(p,g){return!(g in d.failures)})),"values"in f&&h(f.values)&&(f.values=f.values.filter(function(p,g){return!(g in d.failures)})),f)}function Qo(s,l){return d=s,((f=l).lower===void 0||(f.lowerOpen?0<_e(d,f.lower):0<=_e(d,f.lower)))&&(d=s,(f=l).upper===void 0||(f.upperOpen?_e(d,f.upper)<0:_e(d,f.upper)<=0));var d,f}function Qc(s,l,d,f,p,g){var v,k,P,$,_,T;return!d||d.length===0||(v=l.query.index,k=v.multiEntry,P=l.query.range,$=f.schema.primaryKey.extractKey,_=v.extractKey,T=(v.lowLevelIndex||v).extractKey,(f=d.reduce(function(F,R){var D=F,A=[];if(R.type==="add"||R.type==="put")for(var W=new wt,q=R.values.length-1;0<=q;--q){var L,Z=R.values[q],te=$(Z);!W.hasKey(te)&&(L=_(Z),k&&h(L)?L.some(function(fe){return Qo(fe,P)}):Qo(L,P))&&(W.addKey(te),A.push(Z))}switch(R.type){case"add":var oe=new wt().addKeys(l.values?F.map(function(ae){return $(ae)}):F),D=F.concat(l.values?A.filter(function(ae){return ae=$(ae),!oe.hasKey(ae)&&(oe.addKey(ae),!0)}):A.map(function(ae){return $(ae)}).filter(function(ae){return!oe.hasKey(ae)&&(oe.addKey(ae),!0)}));break;case"put":var le=new wt().addKeys(R.values.map(function(ae){return $(ae)}));D=F.filter(function(ae){return!le.hasKey(l.values?$(ae):ae)}).concat(l.values?A:A.map(function(ae){return $(ae)}));break;case"delete":var ne=new wt().addKeys(R.keys);D=F.filter(function(ae){return!ne.hasKey(l.values?$(ae):ae)});break;case"deleteRange":var pe=R.range;D=F.filter(function(ae){return!Qo($(ae),pe)})}return D},s))===s)?s:(f.sort(function(F,R){return _e(T(F),T(R))||_e($(F),$(R))}),l.limit&&l.limit<1/0&&(f.length>l.limit?f.length=l.limit:s.length===l.limit&&f.length<l.limit&&(p.dirty=!0)),g?Object.freeze(f):f)}function Xc(s,l){return _e(s.lower,l.lower)===0&&_e(s.upper,l.upper)===0&&!!s.lowerOpen==!!l.lowerOpen&&!!s.upperOpen==!!l.upperOpen}function wm(s,l){return((d,f,p,g)=>{if(d===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((d=_e(d,f))===0){if(p&&g)return 0;if(p)return 1;if(g)return-1}return d})(s.lower,l.lower,s.lowerOpen,l.lowerOpen)<=0&&0<=((d,f,p,g)=>{if(d===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((d=_e(d,f))===0){if(p&&g)return 0;if(p)return-1;if(g)return 1}return d})(s.upper,l.upper,s.upperOpen,l.upperOpen)}function bm(s,l,d,f){s.subscribers.add(d),f.addEventListener("abort",function(){var p,g;s.subscribers.delete(d),s.subscribers.size===0&&(p=s,g=l,setTimeout(function(){p.subscribers.size===0&&Y(g,p)},3e3))})}var km={stack:"dbcore",level:0,name:"Cache",create:function(s){var l=s.schema.name;return r(r({},s),{transaction:function(d,f,p){var g,v,k=s.transaction(d,f,p);return f==="readwrite"&&(p=(g=new AbortController).signal,k.addEventListener("abort",(v=function(P){return function(){if(g.abort(),f==="readwrite"){for(var $=new Set,_=0,T=d;_<T.length;_++){var F=T[_],R=fr["idb://".concat(l,"/").concat(F)];if(R){var D=s.table(F),A=R.optimisticOps.filter(function(ve){return ve.trans===k});if(k._explicit&&P&&k.mutatedParts)for(var W=0,q=Object.values(R.queries.query);W<q.length;W++)for(var L=0,Z=(le=q[W]).slice();L<Z.length;L++)Wo((ne=Z[L]).obsSet,k.mutatedParts)&&(Y(le,ne),ne.subscribers.forEach(function(ve){return $.add(ve)}));else if(0<A.length){R.optimisticOps=R.optimisticOps.filter(function(ve){return ve.trans!==k});for(var te=0,oe=Object.values(R.queries.query);te<oe.length;te++)for(var le,ne,pe,fe=0,ae=(le=oe[te]).slice();fe<ae.length;fe++)(ne=ae[fe]).res!=null&&k.mutatedParts&&(P&&!ne.dirty?(pe=Object.isFrozen(ne.res),pe=Qc(ne.res,ne.req,A,D,ne,pe),ne.dirty?(Y(le,ne),ne.subscribers.forEach(function(ve){return $.add(ve)})):pe!==ne.res&&(ne.res=pe,ne.promise=ce.resolve({result:pe}))):(ne.dirty&&Y(le,ne),ne.subscribers.forEach(function(ve){return $.add(ve)})))}}}$.forEach(function(ve){return ve()})}}})(!1),{signal:p}),k.addEventListener("error",v(!1),{signal:p}),k.addEventListener("complete",v(!0),{signal:p})),k},table:function(d){var f=s.table(d),p=f.schema.primaryKey;return r(r({},f),{mutate:function(g){var v,k=we.trans;return!p.outbound&&k.db._options.cache!=="disabled"&&!k.explicit&&k.idbtrans.mode==="readwrite"&&(v=fr["idb://".concat(l,"/").concat(d)])?(k=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Yo(p,g).some(function(P){return P==null}))?(v.optimisticOps.push(g),g.mutatedParts&&Gs(g.mutatedParts),k.then(function(P){0<P.numFailures&&(Y(v.optimisticOps,g),(P=Yc(0,g,P))&&v.optimisticOps.push(P),g.mutatedParts)&&Gs(g.mutatedParts)}),k.catch(function(){Y(v.optimisticOps,g),g.mutatedParts&&Gs(g.mutatedParts)})):k.then(function(P){var $=Yc(0,r(r({},g),{values:g.values.map(function(_,T){var F;return P.failures[T]?_:(I(F=(F=p.keyPath)!=null&&F.includes(".")?ie(_):r({},_),p.keyPath,P.results[T]),F)})}),P);v.optimisticOps.push($),queueMicrotask(function(){return g.mutatedParts&&Gs(g.mutatedParts)})}),k):f.mutate(g)},query:function(g){var v,k,P,$,_,T,F;return Kc(we,f)&&Hc("query",g)?(v=((P=we.trans)==null?void 0:P.db._options.cache)==="immutable",k=(P=we).requery,P=P.signal,T=((R,D,A,W)=>{var q=fr["idb://".concat(R,"/").concat(D)];if(!q)return[];if(!(R=q.queries[A]))return[null,!1,q,null];var L=R[(W.query?W.query.index.name:null)||""];if(!L)return[null,!1,q,null];switch(A){case"query":var Z=L.find(function(te){return te.req.limit===W.limit&&te.req.values===W.values&&Xc(te.req.query.range,W.query.range)});return Z?[Z,!0,q,L]:[L.find(function(te){return("limit"in te.req?te.req.limit:1/0)>=W.limit&&(!W.values||te.req.values)&&wm(te.req.query.range,W.query.range)}),!1,q,L];case"count":return Z=L.find(function(te){return Xc(te.req.query.range,W.query.range)}),[Z,!!Z,q,L]}})(l,d,"query",g),F=T[0],$=T[2],_=T[3],F&&T[1]?F.obsSet=g.obsSet:(T=f.query(g).then(function(R){var D=R.result;if(F&&(F.res=D),v){for(var A=0,W=D.length;A<W;++A)Object.freeze(D[A]);Object.freeze(D)}else R.result=ie(D);return R}).catch(function(R){return _&&F&&Y(_,F),Promise.reject(R)}),F={obsSet:g.obsSet,promise:T,subscribers:new Set,type:"query",req:g,dirty:!1},_?_.push(F):(_=[F],($=$||(fr["idb://".concat(l,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=_)),bm(F,_,k,P),F.promise.then(function(R){return{result:Qc(R.result,g,$==null?void 0:$.optimisticOps,f,F,v)}})):f.query(g)}})}})}};function Us(s,l){return new Proxy(s,{get:function(d,f,p){return f==="db"?l:Reflect.get(d,f,p)}})}it.prototype.version=function(s){if(isNaN(s)||s<.1)throw new ge.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var l=this._versions,d=l.filter(function(f){return f._cfg.version===s})[0];return d||(d=new this.Version(s),l.push(d),l.sort(dm),d.stores({}),this._state.autoSchema=!1),d},it.prototype._whenReady=function(s){var l=this;return this.idbdb&&(this._state.openComplete||we.letThrough||this._vip)?s():new ce(function(d,f){if(l._state.openComplete)return f(new ge.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new ge.DatabaseClosed);l.open().catch(Ee)}l._state.dbReadyPromise.then(d,f)}).then(s)},it.prototype.use=function(p){var l=p.stack,d=p.create,f=p.level,p=p.name,g=(p&&this.unuse({stack:l,name:p}),this._middlewares[l]||(this._middlewares[l]=[]));return g.push({stack:l,create:d,level:f??10,name:p}),g.sort(function(v,k){return v.level-k.level}),this},it.prototype.unuse=function(s){var l=s.stack,d=s.name,f=s.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(p){return f?p.create!==f:!!d&&p.name!==d})),this},it.prototype.open=function(){var s=this;return ur(Rn,function(){return mm(s)})},it.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,l=Rr.indexOf(this);if(0<=l&&Rr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ce(function(d){s.dbReadyResolve=d}),s.openCanceller=new ce(function(d,f){s.cancelOpen=f}))},it.prototype.close=function(l){var l=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,d=this._state;l?(d.isBeingOpened&&d.cancelOpen(new ge.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new ge.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},it.prototype.delete=function(s){var l=this,d=(s===void 0&&(s={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),f=this._state;return new ce(function(p,g){function v(){l.close(s);var k=l._deps.indexedDB.deleteDatabase(l.name);k.onsuccess=qe(function(){var P,$,_;P=l._deps,$=l.name,Lo(_=P.indexedDB)||$===As||zo(_,P.IDBKeyRange).delete($).catch(Ee),p()}),k.onerror=mn(g),k.onblocked=l._fireOnBlocked}if(d)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(v):v()})},it.prototype.backendDB=function(){return this.idbdb},it.prototype.isOpen=function(){return this.idbdb!==null},it.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},it.prototype.hasFailed=function(){return this._state.dbOpenError!==null},it.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(it.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(l){return s._allTables[l]})},enumerable:!1,configurable:!0}),it.prototype.transaction=function(){var s=(function(l,d,f){var p=arguments.length;if(p<2)throw new ge.InvalidArgument("Too few arguments");for(var g=new Array(p-1);--p;)g[p-1]=arguments[p];return f=g.pop(),[l,z(g),f]}).apply(this,arguments);return this._transaction.apply(this,s)},it.prototype._transaction=function(s,l,d){var f,p,g=this,v=we.trans,k=(v&&v.db===this&&s.indexOf("!")===-1||(v=null),s.indexOf("?")!==-1);s=s.replace("!","").replace("?","");try{if(p=l.map(function($){if($=$ instanceof g.Table?$.name:$,typeof $!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return $}),s=="r"||s===No)f=No;else{if(s!="rw"&&s!=Ao)throw new ge.InvalidArgument("Invalid transaction mode: "+s);f=Ao}if(v){if(v.mode===No&&f===Ao){if(!k)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&p.forEach(function($){if(v&&v.storeNames.indexOf($)===-1){if(!k)throw new ge.SubTransaction("Table "+$+" not included in parent transaction.");v=null}}),k&&v&&!v.active&&(v=null)}}catch($){return v?v._promise(null,function(_,T){T($)}):rt($)}var P=(function $(_,T,F,R,D){return ce.resolve().then(function(){var L=we.transless||we,A=_._createTransaction(T,F,_._dbSchema,R),L=(A.explicit=!0,{trans:A,transless:L});if(R)A.idbtrans=R.idbtrans;else try{A.create(),A.idbtrans._explicit=!0,_._state.PR1398_maxLoop=3}catch(Z){return Z.name===$t.InvalidState&&_.isOpen()&&0<--_._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_.close({disableAutoOpen:!1}),_.open().then(function(){return $(_,T,F,null,D)})):rt(Z)}var W,q=he(D),L=(q&&Fr(),ce.follow(function(){var Z;(W=D.call(A,A))&&(q?(Z=Bn.bind(null,null),W.then(Z,Z)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=Ko(W)))},L));return(W&&typeof W.then=="function"?ce.resolve(W).then(function(Z){return A.active?Z:rt(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return W})).then(function(Z){return R&&A._resolve(),A._completion.then(function(){return Z})}).catch(function(Z){return A._reject(Z),rt(Z)})})}).bind(null,this,f,p,v,d);return v?v._promise(f,P,"lock"):we.trans?ur(we.transless,function(){return g._whenReady(P)}):this._whenReady(P)},it.prototype.table=function(s){if(j(this._allTables,s))return this._allTables[s];throw new ge.InvalidTable("Table ".concat(s," does not exist"))};var Cn=it;function it(s,l){var d,f,p,g,v,k=this,P=(this._middlewares={},this.verno=0,it.dependencies),P=(this._options=l=r({addons:it.addons,autoOpen:!0,indexedDB:P.indexedDB,IDBKeyRange:P.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},l.addons),$=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ee,dbReadyPromise:null,cancelOpen:Ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen}),_=($.dbReadyPromise=new ce(function(T){$.dbReadyResolve=T}),$.openCanceller=new ce(function(T,F){$.cancelOpen=F}),this._state=$,this.name=s,this.on=bi(this,"populate","blocked","versionchange","close",{ready:[Pe,Ee]}),this.once=function(T,F){var R=function(){for(var D=[],A=0;A<arguments.length;A++)D[A]=arguments[A];k.on(T).unsubscribe(R),F.apply(k,D)};return k.on(T,R)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(T){return function(F,R){it.vip(function(){var D,A=k._state;A.openComplete?(A.dbOpenError||ce.resolve().then(F),R&&T(F)):A.onReadyBeingFired?(A.onReadyBeingFired.push(F),R&&T(F)):(T(F),D=k,R||T(function W(){D.on.ready.unsubscribe(F),D.on.ready.unsubscribe(W)}))})}}),this.Collection=(d=this,ki(im.prototype,function(W,A){this.db=d;var R=Ec,D=null;if(A)try{R=A()}catch(L){D=L}var A=W._ctx,W=A.table,q=W.hook.reading.fire;this._ctx={table:W,index:A.index,isPrimKey:!A.index||W.schema.primKey.keyPath&&A.index===W.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:D,or:A.or,valueMapper:q!==xt?q:null}})),this.Table=(f=this,ki(Dc.prototype,function(T,F,R){this.db=f,this._tx=R,this.name=T,this.schema=F,this.hook=f._allTables[T]?f._allTables[T].hook:bi(null,{creating:[Rt,Ee],reading:[nt,xt],updating:[je,Ee],deleting:[re,Ee]})})),this.Transaction=(p=this,ki(om.prototype,function(T,F,R,D,A){var W=this;T!=="readonly"&&F.forEach(function(q){q=(q=R[q])==null?void 0:q.yProps,q&&(F=F.concat(q.map(function(L){return L.updatesTable})))}),this.db=p,this.mode=T,this.storeNames=F,this.schema=R,this.chromeTransactionDurability=D,this.idbtrans=null,this.on=bi(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ce(function(q,L){W._resolve=q,W._reject=L}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(q){var L=W.active;return W.active=!1,W.on.error.fire(q),W.parent?W.parent._reject(q):L&&W.idbtrans&&W.idbtrans.abort(),rt(q)})})),this.Version=(g=this,ki(pm.prototype,function(T){this.db=g,this._cfg={version:T,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(v=this,ki(Ic.prototype,function(T,F,R){if(this.db=v,this._ctx={table:T,index:F===":id"?null:F,or:R},this._cmp=this._ascending=_e,this._descending=function(D,A){return _e(A,D)},this._max=function(D,A){return 0<_e(D,A)?D:A},this._min=function(D,A){return _e(D,A)<0?D:A},this._IDBKeyRange=v._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(T){0<T.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(T){!T.newVersion||T.newVersion<T.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(T.oldVersion/10))}),this._maxKey=Si(l.IDBKeyRange),this._createTransaction=function(T,F,R,D){return new k.Transaction(T,F,R,k._options.chromeTransactionDurability,D)},this._fireOnBlocked=function(T){k.on("blocked").fire(T),Rr.filter(function(F){return F.name===k.name&&F!==k&&!F._state.vcFired}).map(function(F){return F.on("versionchange").fire(T)})},this.use(vm),this.use(km),this.use(xm),this.use(gm),this.use(ym),new Proxy(this,{get:function(T,F,R){var D;return F==="_vip"||(F==="table"?function(A){return Us(k.table(A),_)}:(D=Reflect.get(T,F,R))instanceof Dc?Us(D,_):F==="tables"?D.map(function(A){return Us(A,_)}):F==="_createTransaction"?function(){return Us(D.apply(this,arguments),_)}:D)}}));this.vip=_,P.forEach(function(T){return T(k)})}var Vs,Or=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Cm=(Xo.prototype.subscribe=function(s,l,d){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:l,complete:d})},Xo.prototype[Or]=function(){return this},Xo);function Xo(s){this._subscribe=s}try{Vs={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Vs={indexedDB:null,IDBKeyRange:null}}function Zc(s){var l,d=!1,f=new Cm(function(p){var g=he(s),v,k=!1,P={},$={},_={get closed(){return k},unsubscribe:function(){k||(k=!0,v&&v.abort(),T&&zn.storagemutated.unsubscribe(R))}},T=(p.start&&p.start(_),!1),F=function(){return To(D)},R=function(A){$s(P,A),Wo($,P)&&F()},D=function(){var A,W,q;!k&&Vs.indexedDB&&(P={},A={},v&&v.abort(),v=new AbortController,q=(L=>{var Z=_r();try{g&&Fr();var te=Mn(s,L);return te=g?te.finally(Bn):te}finally{Z&&Dr()}})(W={subscr:A,signal:v.signal,requery:F,querier:s,trans:null}),Promise.resolve(q).then(function(L){d=!0,l=L,k||W.signal.aborted||(P={},(Z=>{for(var te in Z)if(j(Z,te))return;return 1})($=A)||T||(zn(ji,R),T=!0),To(function(){return!k&&p.next&&p.next(L)}))},function(L){d=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||k||To(function(){k||p.error&&p.error(L)})}))};return setTimeout(F,0),_});return f.hasValue=function(){return d},f.getValue=function(){return l},f}var hr=Cn;function Zo(s){var l=Ln;try{Ln=!0,zn.storagemutated.fire(s),qo(s,!0)}finally{Ln=l}}E(hr,r(r({},be),{delete:function(s){return new hr(s,{addons:[]}).delete()},exists:function(s){return new hr(s,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return l=hr.dependencies,d=l.indexedDB,l=l.IDBKeyRange,(Lo(d)?Promise.resolve(d.databases()).then(function(f){return f.map(function(p){return p.name}).filter(function(p){return p!==As})}):zo(d,l).toCollection().primaryKeys()).then(s)}catch{return rt(new ge.MissingAPI)}var l,d},defineClass:function(){return function(s){m(this,s)}},ignoreTransaction:function(s){return we.trans?ur(we.transless,s):s()},vip:$o,async:function(s){return function(){try{var l=Ko(s.apply(this,arguments));return l&&typeof l.then=="function"?l:ce.resolve(l)}catch(d){return rt(d)}}},spawn:function(s,l,d){try{var f=Ko(s.apply(d,l||[]));return f&&typeof f.then=="function"?f:ce.resolve(f)}catch(p){return rt(p)}},currentTransaction:{get:function(){return we.trans||null}},waitFor:function(s,l){return s=ce.resolve(typeof s=="function"?hr.ignoreTransaction(s):s).timeout(l||6e4),we.trans?we.trans.waitFor(s):s},Promise:ce,debug:{get:function(){return ye},set:function(s){De(s)}},derive:M,extend:m,props:E,override:b,Events:bi,on:zn,liveQuery:Zc,extendObservabilitySet:$s,getByKeyPath:U,setByKeyPath:I,delByKeyPath:function(s,l){typeof l=="string"?I(s,l,void 0):"length"in l&&[].map.call(l,function(d){I(s,d,void 0)})},shallowClone:V,deepClone:ie,getObjectDiff:Ho,cmp:_e,asap:K,minKey:-1/0,addons:[],connections:Rr,errnames:$t,dependencies:Vs,cache:fr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,l,d){return s+l/Math.pow(10,2*d)})})),hr.maxKey=Si(hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zn(ji,function(s){Ln||(s=new CustomEvent(Do,{detail:s}),Ln=!0,dispatchEvent(s),Ln=!1)}),addEventListener(Do,function(s){s=s.detail,Ln||Zo(s)}));var zr,Ln=!1,Jc=function(){};return typeof BroadcastChannel<"u"&&((Jc=function(){(zr=new BroadcastChannel(Do)).onmessage=function(s){return s.data&&Zo(s.data)}})(),typeof zr.unref=="function"&&zr.unref(),zn(ji,function(s){Ln||zr.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Cn.disableBfCache&&s.persisted){ye&&console.debug("Dexie: handling persisted pagehide"),zr!=null&&zr.close();for(var l=0,d=Rr;l<d.length;l++)d[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Cn.disableBfCache&&s.persisted&&(ye&&console.debug("Dexie: handling persisted pageshow"),Jc(),Zo({all:new wt(-1/0,[[]])}))})),ce.rejectionMapper=function(s,l){return!s||s instanceof Ae||s instanceof TypeError||s instanceof SyntaxError||!s.name||!ot[s.name]?s:(l=new ot[s.name](l||s.message,s),"stack"in s&&O(l,"stack",{get:function(){return this.inner.stack}}),l)},De(ye),r(Cn,Object.freeze({__proto__:null,Dexie:Cn,Entity:Tc,PropModification:wi,RangeSet:wt,add:function(s){return new wi({add:s})},cmp:_e,default:Cn,liveQuery:Zc,mergeRanges:Ni,rangesOverlap:Gc,remove:function(s){return new wi({remove:s})},replacePrefix:function(s,l){return new wi({replacePrefix:[s,l]})}}),{default:Cn}),Cn})})(Qp);var $y=Qp.exports;const ku=Em($y),xf=Symbol.for("Dexie"),no=globalThis[xf]||(globalThis[xf]=ku);if(ku.semVer!==no.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ku.semVer} and ${no.semVer}`);const{liveQuery:yv,mergeRanges:vv,rangesOverlap:xv,RangeSet:wv,cmp:bv,Entity:kv,PropModification:Cv,replacePrefix:jv,add:Sv,remove:Ev,DexieYProvider:Tv}=no,Cu="sparkle-brush-current-profile";class Gy extends no{constructor(){super("SparkleBrushDB");Nt(this,"sessions");Nt(this,"userProgress");Nt(this,"photos");Nt(this,"profiles");this.version(2).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"}),this.version(3).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"}).upgrade(n=>n.table("userProgress").toCollection().modify(r=>{const a=r;a.unlockedHats&&!r.unlockedBuddies&&(r.unlockedBuddies=a.unlockedHats,delete a.unlockedHats),a.selectedHatId!==void 0&&r.selectedBuddyId===void 0&&(r.selectedBuddyId=a.selectedHatId,delete a.selectedHatId),r.unlockedBuddies||(r.unlockedBuddies=[])}))}}const en=new Gy,El=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];let _a=null;function vi(){if(_a)return _a;const e=localStorage.getItem(Cu);return _a=e,e}function vc(e){_a=e,e?localStorage.setItem(Cu,e):localStorage.removeItem(Cu)}async function xc(){return en.profiles.orderBy("createdAt").toArray()}async function Wy(e){return en.profiles.get(e)}async function Xp(e){const t=await xc(),n=new Set(t.map(c=>c.avatarColor)),r=El.find(c=>!n.has(c))||El[Math.floor(Math.random()*El.length)],a={id:`profile-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),avatarColor:r,createdAt:new Date};await en.profiles.add(a);const o={id:`progress-${a.id}`,profileId:a.id,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedBuddies:[]};return await en.userProgress.add(o),a}async function Uy(e){await en.profiles.delete(e),await en.userProgress.where("profileId").equals(e).delete(),await en.sessions.where("profileId").equals(e).delete(),vi()===e&&vc(null)}async function ws(e){const t=e||vi();if(!t)throw new Error("No profile selected");let n=await en.userProgress.where("profileId").equals(t).first();if(!n)n={id:`progress-${t}`,profileId:t,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedBuddies:[]},await en.userProgress.add(n);else{const r=n;r.unlockedHats&&!n.unlockedBuddies&&(n.unlockedBuddies=r.unlockedHats),r.selectedHatId!==void 0&&n.selectedBuddyId===void 0&&(n.selectedBuddyId=r.selectedHatId),n.unlockedBuddies||(n.unlockedBuddies=[])}return n}async function wc(e,t){const n=t||vi();if(!n)throw new Error("No profile selected");const r=await ws(n);await en.userProgress.update(r.id,e)}async function Vy(e){const t=vi();if(!t)throw new Error("No profile selected");const n={...e,profileId:t};await en.sessions.add(n);const r=await ws(t),a=new Date;a.setHours(0,0,0,0);let o=r.currentStreak;if(r.lastSessionDate){const c=new Date(r.lastSessionDate);c.setHours(0,0,0,0);const h=Math.floor((a.getTime()-c.getTime())/(1e3*60*60*24));h===1?o+=1:h>1&&(o=1)}else o=1;await wc({totalSessions:r.totalSessions+1,currentStreak:o,longestStreak:Math.max(r.longestStreak,o),lastSessionDate:new Date},t)}async function qy(e){const t=vi();if(!t)throw new Error("No profile selected");const n=await ws(t);n.capturedCreatures.some(a=>a.id===e.id)||await wc({capturedCreatures:[...n.capturedCreatures,e]},t)}async function Ky(){if((await xc()).length>0)return;const t=await en.userProgress.get("default-user");if(t&&(t.totalSessions>0||t.capturedCreatures.length>0)){const n=await Xp("Player 1");await wc({totalSessions:t.totalSessions,currentStreak:t.currentStreak,longestStreak:t.longestStreak,lastSessionDate:t.lastSessionDate,capturedCreatures:t.capturedCreatures,unlockedBuddies:t.unlockedBuddies,selectedBuddyId:t.selectedBuddyId},n.id),vc(n.id)}}const Hy={red:{gradient:"from-red-500 to-red-700",border:"border-white",stripe:"bg-white",center:"bg-red-500",centerBorder:"border-white"},blue:{gradient:"from-blue-500 to-blue-700",border:"border-red-500",stripe:"bg-red-500",center:"bg-blue-500",centerBorder:"border-red-400"},bee:{gradient:"from-yellow-400 to-yellow-500",border:"border-black",stripe:"bg-black",center:"bg-yellow-400",centerBorder:"border-black"},white:{gradient:"from-white to-gray-200",border:"border-red-500",stripe:"bg-red-500",center:"bg-white",centerBorder:"border-red-400"},master:{gradient:"from-purple-500 via-purple-600 to-purple-800",border:"border-yellow-400",stripe:"bg-yellow-400",center:"bg-purple-400",centerBorder:"border-yellow-300",glow:"shadow-[0_0_20px_rgba(168,85,247,0.7)]"}};function Tl({type:e,size:t,showSparkle:n=!1,className:r=""}){const a=Hy[e],o={small:"w-12 h-12",medium:"w-16 h-16",large:"w-20 h-20"},c={small:"w-2 h-2",medium:"w-3 h-3",large:"w-4 h-4"},h={small:"h-0.5",medium:"h-1",large:"h-1"},m=e==="bee";return u.jsxs("div",{className:`relative ${r}`,children:[u.jsxs("div",{className:`
        ${o[t]} rounded-full bg-gradient-to-br ${a.gradient}
        border-4 ${a.border} shadow-xl
        flex items-center justify-center
        ${a.glow||""}
      `,children:[m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`w-full ${h[t]} bg-black absolute`,style:{top:"30%"}}),u.jsx("div",{className:`w-full ${h[t]} bg-black absolute`,style:{top:"50%"}}),u.jsx("div",{className:`w-full ${h[t]} bg-black absolute`,style:{top:"70%"}})]}):u.jsx("div",{className:`w-full ${h[t]} ${a.stripe} absolute`}),u.jsx("div",{className:`${c[t]} rounded-full ${a.center} border-2 ${a.centerBorder} absolute`})]}),n&&u.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-sparkle",children:""}),e==="master"&&u.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-yellow-400/20"})]})}function Yy({cleaningPercentage:e,userProgress:t,region:n,preSelectedCreature:r,onComplete:a}){const[o,c]=C.useState("intro"),[h,m]=C.useState(r||null),[y,S]=C.useState(0),[j,E]=C.useState("red"),[G,O]=C.useState(!1),[M,Q]=C.useState({x:50,y:85,scale:1,rotation:0}),[w,x]=C.useState({count:0,maxWobbles:3,currentWobble:0,direction:1}),[b,B]=C.useState(!1),[K,U]=C.useState(!1),[I,V]=C.useState(0),H=C.useRef(null),z=C.useRef(y),N=C.useRef(h);z.current=y,N.current=h,C.useEffect(()=>{if(!r){const me=t.capturedCreatures.map(J=>J.id),Y=zp(e,me,n);m(Y)}return()=>{H.current&&cancelAnimationFrame(H.current)}},[e,t.capturedCreatures,n,r]),C.useEffect(()=>{if(h){const me=oy(e,h.rarity);S(me),E(ly(e));const Y=h.rarity==="mythic"?6+Math.floor(Math.random()*2):h.rarity==="legendary"?4+Math.floor(Math.random()*2):h.rarity==="rare"?3+Math.floor(Math.random()*2):2+Math.floor(Math.random()*2);x(X=>({...X,maxWobbles:Y}));const J=setTimeout(()=>c("ready"),2e3);return()=>clearTimeout(J)}},[h,e]);const ee=C.useCallback(()=>{let me=0;const Y=40,J=()=>{me++;const X=me/Y,he=1-Math.pow(1-X,3),be=Math.sin(X*Math.PI)*30;Q({x:50,y:85-he*55-be,scale:1-X*.3,rotation:X*720}),me<Y?H.current=requestAnimationFrame(J):(c("impact"),U(!0),((h==null?void 0:h.rarity)==="legendary"||(h==null?void 0:h.rarity)==="mythic")&&B(!0),yr("capture"),setTimeout(()=>{U(!1),B(!1),ie()},300))};H.current=requestAnimationFrame(J)},[h]),ie=C.useCallback(()=>{c("wobble");let me=0;const Y=w.maxWobbles,J=()=>{me++,x(Le=>({...Le,currentWobble:me})),yr("wobble");let X=0;const he=30,be=()=>{X++;const Le=X/he,Ae=Math.sin(Le*Math.PI*4)*(1-Le)*15;if(Q(Ve=>({...Ve,x:50+Ae,rotation:Ae*2})),X<he)H.current=requestAnimationFrame(be);else{Q(Ie=>({...Ie,x:50,rotation:0}));const Ve=400+Math.random()*400;me<Y?setTimeout(J,Ve):setTimeout(()=>{c("suspense"),de()},Ve)}};H.current=requestAnimationFrame(be)};setTimeout(J,500)},[w.maxWobbles]),de=C.useCallback(()=>{let me=0;const Y=()=>{me+=.02,V(Math.min(me,.5)),me<.5&&(H.current=requestAnimationFrame(Y))};H.current=requestAnimationFrame(Y);const J=N.current,X=z.current,he=(J==null?void 0:J.rarity)==="mythic"?3500:(J==null?void 0:J.rarity)==="legendary"?2500:(J==null?void 0:J.rarity)==="rare"?1800:1200;console.log("[CaptureGame] Starting suspense with capture rate:",X),setTimeout(()=>{const be=Math.random(),Le=be<X;if(console.log("[CaptureGame] Capture roll:",be,"rate:",X,"success:",Le),O(Le),V(0),c("result"),Le){if(yr("click"),setTimeout(()=>yr("success"),250),J){const Ae={...J,capturedAt:new Date};qy(Ae)}}else yr("fail")},he)},[]),ke=C.useCallback(()=>{o!=="ready"||!h||(c("throwing"),ee())},[o,h,ee]),ue=C.useCallback(()=>{a(G?h:null)},[G,h,a]);return h?u.jsxs("div",{className:`relative flex flex-col h-full overflow-hidden ${b?"animate-shake":""}`,children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(Pa,{region:n})}),K&&u.jsx("div",{className:"absolute inset-0 bg-white z-50 animate-flash"}),I>0&&u.jsx("div",{className:"absolute inset-0 bg-black z-20 pointer-events-none transition-opacity",style:{opacity:I}}),u.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-center p-6 z-10",children:[o==="intro"&&u.jsxs("div",{className:"text-center animate-bounce-gentle",children:[u.jsx("div",{className:"text-xl text-white mb-2 drop-shadow-lg",children:"A wild creature appeared!"}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx(cn,{creature:h,size:150,animated:!0}),(h.rarity==="legendary"||h.rarity==="mythic")&&u.jsx("div",{className:"absolute inset-0 animate-pulse",children:u.jsx("div",{className:`absolute inset-0 ${h.rarity==="mythic"?"bg-orange-400/30":"bg-yellow-400/20"} rounded-full blur-xl`})})]}),u.jsx("div",{className:"text-2xl font-bold text-white mt-3 drop-shadow-lg",children:h.name}),u.jsx("div",{className:`text-lg mt-1 font-semibold ${h.rarity==="mythic"?"text-orange-400 animate-pulse":h.rarity==="legendary"?"text-yellow-400 animate-pulse":h.rarity==="rare"?"text-purple-400":"text-gray-300"}`,children:h.rarity.toUpperCase()}),u.jsx("div",{className:"text-sm text-purple-200 mt-2 max-w-xs mx-auto",children:h.description})]}),(o==="ready"||o==="throwing"||o==="impact"||o==="wobble"||o==="suspense")&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`absolute top-1/4 left-1/2 -translate-x-1/2 ${o==="impact"?"animate-shake":"animate-float"}`,children:o!=="impact"&&o!=="wobble"&&o!=="suspense"?u.jsx(cn,{creature:h,size:120,animated:!0}):u.jsxs("div",{className:"relative",children:[u.jsx("div",{style:{transform:`translateX(${M.x-50}px) rotate(${M.rotation}deg)`},children:u.jsx(Tl,{type:j,size:"large"})}),o==="wobble"&&u.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 flex gap-1",children:[...Array(w.maxWobbles)].map((me,Y)=>u.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${Y<w.currentWobble?"bg-yellow-400 scale-100":"bg-gray-600 scale-75"}`},Y))}),o==="suspense"&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-yellow-400/50 animate-ping"})})]})}),o==="ready"&&u.jsx("div",{className:"absolute transition-all duration-100 animate-bounce-gentle",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:u.jsx(Tl,{type:j,size:"medium",showSparkle:!0})}),o==="throwing"&&u.jsx("div",{className:"absolute transition-none",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:u.jsx(Tl,{type:j,size:"medium"})}),o==="ready"&&u.jsxs("div",{className:"absolute bottom-24 text-center",children:[u.jsxs("div",{className:"text-lg text-white mb-2 drop-shadow-lg",children:["Capture chance: ",u.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round(y*100),"%"]})]}),u.jsx("button",{onClick:ke,className:"px-8 py-4 text-2xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform animate-button-glow",children:"Throw Sparkle Ball! "})]}),(o==="wobble"||o==="suspense")&&u.jsx("div",{className:"absolute bottom-24 text-center",children:u.jsx("div",{className:"text-xl text-white animate-pulse drop-shadow-lg",children:o==="wobble"?"...":"Please work..."})})]}),o==="result"&&u.jsx("div",{className:"text-center z-30 bg-purple-900/90 backdrop-blur-sm rounded-3xl p-6 mx-4 border border-purple-500/30 shadow-2xl",children:G?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-4xl text-yellow-400 font-bold mb-4 animate-bounce-gentle drop-shadow-lg",children:"CAUGHT!"}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx(cn,{creature:h,size:150,animated:!0}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((me,Y)=>u.jsx("div",{className:"absolute text-3xl animate-sparkle",style:{left:`${20+Y%4*20}%`,top:`${20+Math.floor(Y/4)*40}%`,animationDelay:`${Y*.1}s`},children:""},Y))})]}),u.jsx("div",{className:"text-2xl font-bold text-white mt-4",children:h.name}),u.jsx("div",{className:"text-purple-200 mt-2 max-w-xs mx-auto",children:h.description}),u.jsx("div",{className:"text-4xl mt-4",children:""})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-3xl text-red-400 font-bold mb-4",children:"Oh no! It escaped!"}),u.jsx("div",{className:"opacity-50 inline-block",children:u.jsx(cn,{creature:h,size:120,animated:!1})}),u.jsx("div",{className:"text-xl text-purple-200 mt-4 max-w-xs mx-auto",children:"Keep brushing well and try again tomorrow!"}),u.jsx("div",{className:"text-4xl mt-4",children:""})]})})]}),o==="result"&&u.jsx("div",{className:"relative z-30 p-6",children:u.jsx("button",{onClick:ue,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg",children:"Continue"})}),u.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
        @keyframes flash {
          0% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-flash {
          animation: flash 0.3s ease-out forwards;
        }
      `})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[u.jsx("div",{className:"text-4xl mb-4",children:""}),u.jsx("div",{className:"text-xl text-center text-purple-200",children:"You've caught all the creatures in this region!"}),u.jsx("button",{onClick:()=>a(null),className:"mt-8 px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Continue"})]})}function Qy({photos:e,capturedCreature:t,onSelectPhoto:n,onSkip:r}){return e.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"No Photos"}),u.jsx("p",{className:"text-purple-200 mb-6",children:"No photos were captured during this session."}),u.jsx("button",{onClick:r,className:"px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Go Home"})]}):u.jsxs("div",{className:"flex flex-col h-full p-4",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Your Photos!"}),u.jsx("p",{className:"text-purple-200 text-sm",children:"Tap a photo to decorate it with stickers!"}),t&&u.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-yellow-900/30 px-3 py-1 rounded-full",children:[u.jsx(cn,{creature:t,size:24,animated:!1}),u.jsx("span",{className:"text-sm text-yellow-300",children:"New sticker unlocked!"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map((a,o)=>u.jsx("button",{onClick:()=>n(a),className:"aspect-[3/4] rounded-2xl overflow-hidden bg-purple-900/50 active:scale-95 transition-transform shadow-lg",children:u.jsx("img",{src:a,alt:`Photo ${o+1}`,className:"w-full h-full object-cover"})},o))})}),u.jsx("button",{onClick:r,className:"w-full mt-4 py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl",children:"Skip for now"})]})}const ca=[{id:"none",name:"Squeaky Clean",imageUrl:""},{id:"rainbow",name:"Unicorn Burp",imageUrl:"linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff)"},{id:"purple",name:"Grape Soda Pop",imageUrl:"linear-gradient(135deg, #667eea, #764ba2)"},{id:"sunset",name:"Peachy Keen",imageUrl:"linear-gradient(135deg, #fa709a, #fee140)"},{id:"ocean",name:"Mermaid Splash",imageUrl:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{id:"forest",name:"Froggy Pond",imageUrl:"linear-gradient(135deg, #11998e, #38ef7d)"},{id:"candy",name:"Bubblegum Blast",imageUrl:"linear-gradient(135deg, #f093fb, #f5576c)"},{id:"night",name:"Sleepy Time",imageUrl:"linear-gradient(135deg, #0f0c29, #302b63, #24243e)"},{id:"gold",name:"Cheesy Grin",imageUrl:"linear-gradient(135deg, #f7971e, #ffd200)"},{id:"mint",name:"Mint Fresh",imageUrl:"linear-gradient(135deg, #00b09b, #96c93d)"},{id:"crystal",name:"Crystal Cave",imageUrl:"linear-gradient(135deg, #667db6, #0082c8, #00dfa2)"},{id:"slime",name:"Slime Valley",imageUrl:"linear-gradient(135deg, #56ab2f, #a8e063, #7cfc00)"},{id:"prehistoric",name:"Dino World",imageUrl:"linear-gradient(135deg, #8b4513, #d2691e, #ff8c00)"},{id:"phantom",name:"Ghost Realm",imageUrl:"linear-gradient(135deg, #2c3e50, #4a6572, #7f8c8d)"}];var mt=[];for(var Nl=0;Nl<256;++Nl)mt.push((Nl+256).toString(16).slice(1));function Xy(e,t=0){return(mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+"-"+mt[e[t+4]]+mt[e[t+5]]+"-"+mt[e[t+6]]+mt[e[t+7]]+"-"+mt[e[t+8]]+mt[e[t+9]]+"-"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]).toLowerCase()}var da,Zy=new Uint8Array(16);function Jy(){if(!da&&(da=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!da))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return da(Zy)}var ev=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const wf={randomUUID:ev};function tv(e,t,n){if(wf.randomUUID&&!e)return wf.randomUUID();e=e||{};var r=e.random||(e.rng||Jy)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Xy(r)}const Al=[{label:"S",scale:.75},{label:"M",scale:1},{label:"L",scale:1.5},{label:"XL",scale:2}],fa=80,bf=2e3,nv=30,ha=5;function Zp({photo:e,capturedCreatures:t,onDone:n,onBack:r,debugMode:a=!1}){const[o,c]=C.useState([]),[h,m]=C.useState(ca[0]),[y,S]=C.useState(null),[j,E]=C.useState(null),[G,O]=C.useState(!1),[M,Q]=C.useState(null),[w,x]=C.useState(0),[b,B]=C.useState(!1),[K,U]=C.useState(!1),[I,V]=C.useState([]),H=C.useRef(null),[z,N]=C.useState(!1),[ee,ie]=C.useState(!1),[de,ke]=C.useState(null),ue=C.useRef(null),me=C.useRef(0),Y=C.useRef(null),J=a?999:nv,X=C.useCallback(re=>{if(o.length>=J)return;const je=o.length%10,Se=50+je*ha-5*ha/2,Pe=50+je*ha-5*ha/2,ye=Math.max(10,Math.min(90,Se)),De=Math.max(10,Math.min(90,Pe)),Et={id:tv(),stickerId:re.id,creatureId:re.id,imageUrl:`/vibe-brushing/creatures/${re.id}.png`,x:ye,y:De,scale:1,rotation:0};c(Mt=>[...Mt,Et]),Q(re.id),O(!1),E(Et.id)},[o.length]),he=C.useCallback((re,je)=>{je.stopPropagation(),S(re),E(re)},[]),be=C.useCallback(re=>{if(!y||!H.current)return;const je=H.current.getBoundingClientRect();let Se,Pe;"touches"in re?(Se=re.touches[0].clientX,Pe=re.touches[0].clientY):(Se=re.clientX,Pe=re.clientY);const ye=(Se-je.left)/je.width*100,De=(Pe-je.top)/je.height*100;c(Et=>Et.map(Mt=>Mt.id===y?{...Mt,x:Math.max(0,Math.min(100,ye)),y:Math.max(0,Math.min(100,De))}:Mt))},[y]),Le=C.useCallback(re=>{c(je=>je.filter(Se=>Se.id!==re)),j===re&&E(null)},[j]),Ae=C.useCallback(re=>{c(je=>je.map(Se=>{if(Se.id!==re)return Se;const ye=(Al.findIndex(De=>Math.abs(De.scale-Se.scale)<.01)+1)%Al.length;return{...Se,scale:Al[ye].scale}}))},[]),Ve=C.useCallback((re,je)=>{je.stopPropagation(),E(re)},[]),Ie=C.useCallback(()=>{E(null)},[]),Ze=C.useCallback(()=>{const je=(ca.findIndex(Pe=>Pe.id===h.id)+1)%ca.length,Se=ca[je];m(Se),ke(Se.name),Y.current&&clearTimeout(Y.current),Y.current=window.setTimeout(()=>{ke(null)},1500)},[h]),$t=C.useCallback(()=>{j&&Ae(j)},[j,Ae]),Oe=C.useCallback(re=>{c(je=>je.map(Se=>Se.id!==re?Se:{...Se,rotation:(Se.rotation+45)%360}))},[]),ge=C.useCallback(()=>{j&&Oe(j)},[j,Oe]),ot=C.useCallback(()=>{U(!0),x(0),B(!1);const re=["","","","","","",""],je=Array.from({length:16},(Se,Pe)=>({id:Pe,x:50,y:50,angle:Pe*360/16,emoji:re[Math.floor(Math.random()*re.length)]}));V(je),setTimeout(()=>{c([]),E(null),U(!1),V([])},600)},[]),Ee=C.useCallback(()=>{ot()},[ot]),xt=C.useCallback(()=>{B(!0),me.current=Date.now();const re=()=>{const je=Date.now()-me.current,Se=Math.min(je/bf,1);x(Se),Se>=1?Ee():ue.current=requestAnimationFrame(re)};ue.current=requestAnimationFrame(re)},[Ee]),nt=C.useCallback(()=>{B(!1),x(0),ue.current&&(cancelAnimationFrame(ue.current),ue.current=null)},[]),Ft=C.useCallback(async()=>{N(!0);try{const re=document.createElement("canvas"),je=re.getContext("2d");if(!je)return;const Se=new Image;Se.crossOrigin="anonymous",await new Promise((Tt,lt)=>{Se.onload=()=>Tt(),Se.onerror=lt,Se.src=e}),re.width=Se.width,re.height=Se.height,h.imageUrl&&(je.fillStyle="#000",je.fillRect(0,0,re.width,re.height)),je.drawImage(Se,0,0);const Pe=Math.min(re.width,re.height)/4,ye=o.map(Tt=>new Promise((lt,rn)=>{const sn=new Image;sn.crossOrigin="anonymous",sn.onload=()=>lt({sticker:Tt,img:sn}),sn.onerror=rn,sn.src=Tt.imageUrl}));(await Promise.all(ye)).forEach(({sticker:Tt,img:lt})=>{const rn=Tt.x/100*re.width,sn=Tt.y/100*re.height,pn=Pe*Tt.scale;je.save(),je.translate(rn,sn),je.rotate(Tt.rotation*Math.PI/180),je.drawImage(lt,-pn/2,-pn/2,pn,pn),je.restore()});const Et=re.toDataURL("image/png"),Mt=document.createElement("a");Mt.download=`sparkle-brush-${Date.now()}.png`,Mt.href=Et,Mt.click(),setTimeout(n,500)}catch(re){console.error("Failed to save image:",re),N(!1)}},[e,o,h,n]);C.useEffect(()=>{const re=()=>{S(null),nt()},je=()=>{S(null),nt()};return window.addEventListener("mouseup",re),window.addEventListener("touchend",je),()=>{window.removeEventListener("mouseup",re),window.removeEventListener("touchend",je),ue.current&&cancelAnimationFrame(ue.current),Y.current&&clearTimeout(Y.current)}},[nt]);const Rt=t.find(re=>re.id===M);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-900/50",children:[u.jsx("button",{onClick:r,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg",children:" Back"}),u.jsx("h1",{className:"text-lg font-bold",children:"Decorate!"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>ie(!0),disabled:z,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg disabled:opacity-50",children:"Skip"}),u.jsx("button",{onClick:Ft,disabled:z,className:"px-4 py-1 text-white bg-green-600 rounded-lg disabled:opacity-50",children:z?"...":"Save"})]})]}),u.jsxs("div",{ref:H,className:"flex-1 relative overflow-hidden m-3 rounded-2xl",style:{background:h.imageUrl||"transparent"},onMouseMove:be,onTouchMove:be,onClick:Ie,children:[u.jsx("img",{src:e,alt:"Your photo",className:"w-full h-full object-contain",draggable:!1}),o.map(re=>{const je=j===re.id,Se=y===re.id;return u.jsx("div",{className:`absolute cursor-move select-none ${Se?"z-20":je?"z-10":""}`,style:{left:`${re.x}%`,top:`${re.y}%`,transform:"translate(-50%, -50%)",transition:Se?"none":"transform 0.1s"},onMouseDown:Pe=>he(re.id,Pe),onTouchStart:Pe=>he(re.id,Pe),onClick:Pe=>Ve(re.id,Pe),children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`relative ${je?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-transparent rounded-lg":""}`,style:{transform:`scale(${re.scale}) rotate(${re.rotation}deg)`,transition:Se?"none":"transform 0.15s"},children:u.jsx("img",{src:re.imageUrl,alt:"Sticker",className:"pointer-events-none",style:{width:fa,height:fa,objectFit:"contain"},draggable:!1})}),je&&u.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),Le(re.id)},onMouseDown:Pe=>Pe.stopPropagation(),onTouchStart:Pe=>Pe.stopPropagation(),className:"absolute w-7 h-7 bg-red-600 rounded-full flex items-center justify-center text-white text-sm shadow-lg hover:bg-red-500 active:scale-90 transition-transform z-10",style:{top:`${-(fa*re.scale)/2-4}px`,right:`${-(fa*re.scale)/2-4}px`},children:""})]})},re.id)}),o.length===0&&!G&&!K&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"bg-black/50 rounded-xl px-4 py-2 text-sm text-white text-center",children:"Tap the + button to add creature stickers!"})}),K&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-orange-500/30 animate-explosion-flash pointer-events-none z-30"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-40",children:u.jsx("div",{className:"text-8xl animate-explosion-center",children:""})}),I.map(re=>u.jsx("div",{className:"absolute text-3xl pointer-events-none z-40 animate-explosion-particle",style:{left:"50%",top:"50%","--particle-angle":`${re.angle}deg`},children:re.emoji},re.id))]}),de&&u.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 pointer-events-none z-50 animate-toast-fade",children:u.jsx("div",{className:"bg-black/80 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:de})})]}),u.jsx("div",{className:"bg-purple-900/50 p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>O(!0),disabled:o.length>=J,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg relative ${o.length>=J?"bg-gray-600 opacity-50 cursor-not-allowed":"bg-purple-600"}`,children:Rt?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:`/vibe-brushing/creatures/${Rt.id}.png`,alt:Rt.name,className:"w-10 h-10 object-contain"}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center text-xs font-bold text-white shadow",children:"+"})]}):u.jsx("span",{className:"text-2xl",children:"+"})}),u.jsx("button",{onClick:Ze,className:"w-12 h-12 flex-shrink-0 bg-purple-800/50 rounded-xl flex items-center justify-center active:scale-95 transition-transform",children:u.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-white/30",style:{background:h.imageUrl||"#1E1B4B"}})}),u.jsx("div",{className:"flex-1"}),j&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:$t,className:"w-12 h-12 flex-shrink-0 bg-blue-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),u.jsx("button",{onClick:ge,className:"w-12 h-12 flex-shrink-0 bg-orange-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:u.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9"}),u.jsx("path",{d:"M21 3v9h-9"})]})})]}),u.jsx("div",{className:"flex-1"}),o.length>0&&u.jsxs("button",{onMouseDown:xt,onTouchStart:xt,onMouseUp:nt,onTouchEnd:nt,onMouseLeave:nt,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl transition-all relative overflow-hidden ${b?"bg-red-600 scale-105":"bg-red-900/70"}`,style:{animation:b?"bomb-shake 0.1s infinite":"none"},children:[u.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[u.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"4"}),u.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"#fbbf24",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${w*94.2} 94.2`,style:{filter:"drop-shadow(0 0 4px #fbbf24)"}})]}),b&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg drop-shadow-lg",children:Math.ceil((1-w)*(bf/1e3))})}),u.jsx("span",{className:`relative z-10 transition-all ${b?"scale-75 opacity-50":""}`,children:""}),u.jsx("style",{children:`
                @keyframes bomb-shake {
                  0%, 100% { transform: translateX(0); }
                  25% { transform: translateX(-2px) rotate(-2deg); }
                  75% { transform: translateX(2px) rotate(2deg); }
                }
                @keyframes explosion-flash {
                  0% { opacity: 0; }
                  20% { opacity: 1; }
                  100% { opacity: 0; }
                }
                @keyframes explosion-center {
                  0% { transform: scale(0) rotate(0deg); opacity: 1; }
                  50% { transform: scale(2) rotate(180deg); opacity: 1; }
                  100% { transform: scale(3) rotate(360deg); opacity: 0; }
                }
                @keyframes explosion-particle {
                  0% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(0) scale(1);
                    opacity: 1;
                  }
                  100% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(150px) scale(0);
                    opacity: 0;
                  }
                }
                .animate-explosion-flash {
                  animation: explosion-flash 0.6s ease-out forwards;
                }
                .animate-explosion-center {
                  animation: explosion-center 0.6s ease-out forwards;
                }
                .animate-explosion-particle {
                  animation: explosion-particle 0.6s ease-out forwards;
                }
                @keyframes toast-fade {
                  0% { opacity: 0; transform: translate(-50%, 10px); }
                  15% { opacity: 1; transform: translate(-50%, 0); }
                  85% { opacity: 1; transform: translate(-50%, 0); }
                  100% { opacity: 0; transform: translate(-50%, -10px); }
                }
                .animate-toast-fade {
                  animation: toast-fade 1.5s ease-in-out forwards;
                }
              `})]})]})}),G&&u.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>O(!1),children:u.jsxs("div",{className:"bg-purple-900 rounded-2xl p-4 m-4 max-w-md max-h-[80vh] overflow-auto",onClick:re=>re.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Add Creature Sticker"}),u.jsx("button",{onClick:()=>O(!1),className:"w-8 h-8 bg-purple-800 rounded-full flex items-center justify-center text-purple-300 hover:bg-purple-700",children:""})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 text-purple-300",children:[u.jsx("p",{children:"No creatures captured yet!"}),u.jsx("p",{className:"text-sm mt-2",children:"Complete brushing sessions to catch creatures."})]}):u.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(re=>u.jsxs("button",{onClick:()=>X(re),className:"aspect-square bg-purple-800/50 rounded-xl p-2 flex flex-col items-center justify-center gap-1 hover:bg-purple-700/50 active:scale-95 transition-all",children:[u.jsx("img",{src:`/vibe-brushing/creatures/${re.id}.png`,alt:re.name,className:"w-16 h-16 object-contain"}),u.jsx("span",{className:"text-xs text-purple-200 truncate w-full text-center",children:re.name})]},re.id))})]})}),ee&&u.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>ie(!1),children:u.jsxs("div",{className:"bg-purple-900 rounded-2xl p-6 m-4 max-w-sm text-center",onClick:re=>re.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Skip Decorating?"}),u.jsx("p",{className:"text-purple-300 mb-6",children:"Your photo won't be saved. Are you sure you want to skip?"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>ie(!1),className:"flex-1 py-3 bg-purple-800 rounded-xl font-semibold hover:bg-purple-700 active:scale-95 transition-all",children:"Cancel"}),u.jsx("button",{onClick:()=>{ie(!1),n()},className:"flex-1 py-3 bg-red-600 rounded-xl font-semibold hover:bg-red-500 active:scale-95 transition-all",children:"Skip"})]})]})})]})}const pa={1:{name:"Series 1",subtitle:"Original Collection",icon:"",color:"from-purple-600 to-blue-600"},2:{name:"Series 2",subtitle:"Crystal Caverns",icon:"",color:"from-cyan-500 to-emerald-500"},3:{name:"Series 3",subtitle:"Prehistoric Tech",icon:"",color:"from-orange-500 to-red-500"}};function rv({userProgress:e,onBack:t}){const[n,r]=C.useState(null),[a,o]=C.useState(1),c=new Set(e.capturedCreatures.map(Q=>Q.id)),h=Op(Array.from(c)),m=Aa(a),y=Ct.find(Q=>Q.rarity==="mythic"),S={mythic:a===1&&y?[y]:[],legendary:m.filter(Q=>Q.rarity==="legendary"),rare:m.filter(Q=>Q.rarity==="rare"),common:m.filter(Q=>Q.rarity==="common")},j=m.filter(Q=>c.has(Q.id)).length,E=Array.from(c).length,G=Ct.length,O=Q=>{c.has(Q.id)&&r(Q)},M=Q=>!h.includes(Q);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"My Collection"}),u.jsxs("div",{className:"text-sm text-purple-300",children:[E,"/",G]})]}),u.jsx("div",{className:"flex gap-2 px-4 pt-3 pb-2 bg-purple-900/30",children:[1,2,3].map(Q=>{const w=pa[Q],x=M(Q),b=a===Q,B=Cr(Q,Array.from(c)),K=Aa(Q).length,U=Aa(Q).filter(I=>c.has(I.id)).length;return u.jsx("button",{onClick:()=>!x&&o(Q),disabled:x,className:`flex-1 py-2 px-3 rounded-xl transition-all relative overflow-hidden ${b?`bg-gradient-to-r ${w.color} text-white shadow-lg`:x?"bg-gray-800/50 text-gray-500 cursor-not-allowed":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:u.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[u.jsx("span",{className:"text-lg",children:x?"":w.icon}),u.jsx("span",{className:"text-xs font-bold",children:w.name}),!x&&u.jsxs("span",{className:"text-[10px] opacity-75",children:[U,"/",K,B&&" "]})]})},Q)})}),u.jsx("div",{className:"px-4 py-2 bg-gradient-to-r from-purple-900/50 to-purple-800/50 border-b border-purple-700/30",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:pa[a].icon}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold text-white",children:pa[a].name}),u.jsx("p",{className:"text-xs text-purple-300",children:pa[a].subtitle})]}),u.jsxs("div",{className:"ml-auto text-sm text-purple-300",children:[j,"/",m.length]})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a===1&&S.mythic.length>0&&u.jsx(ma,{title:" Mythic",creatures:S.mythic,capturedIds:c,color:"rainbow",onCreatureClick:O}),u.jsx(ma,{title:" Legendary",creatures:S.legendary,capturedIds:c,color:"yellow",onCreatureClick:O}),u.jsx(ma,{title:" Rare",creatures:S.rare,capturedIds:c,color:"purple",onCreatureClick:O}),u.jsx(ma,{title:" Common",creatures:S.common,capturedIds:c,color:"gray",onCreatureClick:O})]}),u.jsx("div",{className:"p-4 bg-purple-900/50",children:u.jsxs("div",{className:"flex justify-around text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),u.jsx("div",{className:"text-xs text-purple-300",children:"Day Streak"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.totalSessions}),u.jsx("div",{className:"text-xs text-purple-300",children:"Total Sessions"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.longestStreak}),u.jsx("div",{className:"text-xs text-purple-300",children:"Best Streak"})]})]})}),n&&u.jsx(iv,{creature:n,capturedCreatures:e.capturedCreatures,onClose:()=>r(null)})]})}function ma({title:e,creatures:t,capturedIds:n,color:r,onCreatureClick:a}){const o=t.filter(h=>n.has(h.id)).length,c={rainbow:"border-orange-500/50 bg-gradient-to-r from-orange-900/20 via-red-900/20 to-yellow-900/20",yellow:"border-yellow-500/30 bg-yellow-900/10",purple:"border-purple-500/30 bg-purple-900/10",gray:"border-gray-500/30 bg-gray-900/10"};return t.length===0?null:u.jsxs("div",{className:`mb-6 p-4 rounded-2xl border ${c[r]}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("h2",{className:"text-lg font-bold",children:e}),u.jsxs("span",{className:"text-sm text-purple-300",children:[o,"/",t.length]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(h=>{const m=n.has(h.id);return u.jsxs("button",{onClick:()=>a(h),disabled:!m,className:`aspect-square rounded-xl flex flex-col items-center justify-center p-2 transition-all ${m?"bg-purple-800/50 hover:bg-purple-700/50 cursor-pointer active:scale-95":"bg-purple-900/30 opacity-50 cursor-default"}`,children:[u.jsx("div",{className:`${m?"animate-float":"grayscale opacity-50"}`,children:m?u.jsx(cn,{creature:h,size:48,animated:!1}):u.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-2xl",children:""})}),u.jsx("div",{className:"text-xs text-center mt-1 truncate w-full",children:m?h.name:"???"})]},h.id)})})]})}function iv({creature:e,capturedCreatures:t,onClose:n}){const r=t.filter(y=>y.id===e.id).length,a=ny(e.region),o={Nature:"bg-green-600",Water:"bg-blue-600",Fire:"bg-orange-600",Electric:"bg-yellow-500",Air:"bg-cyan-500",Cosmic:"bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500"},c={common:"text-gray-300",rare:"text-purple-400",legendary:"text-yellow-400",mythic:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-400 to-yellow-400"},h=y=>y>=100?`${(y/100).toFixed(1)}m`:`${y}cm`,m=y=>y>=1e3?`${(y/1e3).toFixed(1)}t`:y<1?`${(y*1e3).toFixed(0)}g`:`${y}kg`;return u.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:n,children:u.jsxs("div",{className:"bg-purple-900/95 rounded-3xl max-w-sm w-full overflow-hidden shadow-2xl border border-purple-500/30",onClick:y=>y.stopPropagation(),children:[u.jsxs("div",{className:"relative bg-gradient-to-b from-purple-800/50 to-transparent p-6 flex flex-col items-center",children:[u.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-purple-800/80 flex items-center justify-center text-purple-300 hover:bg-purple-700/80 transition-colors",children:""}),u.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 rounded-full bg-purple-800/80 text-xs text-purple-300",children:["Series ",e.series]}),u.jsx("div",{className:"animate-float",children:u.jsx(cn,{creature:e,size:120,animated:!0})}),u.jsx("h2",{className:`text-2xl font-bold mt-4 ${c[e.rarity]}`,children:e.name}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium text-white ${o[a]}`,children:a}),u.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-700/60 text-purple-200 capitalize",children:e.rarity})]})]}),u.jsxs("div",{className:"px-6 pb-6",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-white",children:h(e.height)}),u.jsx("div",{className:"text-xs text-purple-300",children:"Height"})]}),u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-white",children:m(e.weight)}),u.jsx("div",{className:"text-xs text-purple-300",children:"Weight"})]}),u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:["",r]}),u.jsx("div",{className:"text-xs text-purple-300",children:"Caught"})]})]}),u.jsx("div",{className:"bg-purple-800/30 rounded-xl p-4",children:u.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:e.description})})]})]})})}const sv="2.0.0";function av({onBack:e,onBuddyDebug:t,onGraphicsDebug:n,onPhotoDebug:r}){const[a,o]=C.useState(qp);C.useEffect(()=>{ky(a)},[a]);const c=m=>{o(y=>({...y,sessionDurationMinutes:m}))},h=[{value:1,label:"1 Minute",description:"Quick brush"},{value:2,label:"2 Minutes",description:"Recommended"},{value:3,label:"3 Minutes",description:"Extra thorough"}];return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Settings"}),u.jsx("div",{className:"w-20"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-1",children:"Brushing Duration"}),u.jsx("p",{className:"text-sm text-purple-300 mb-4",children:"How long should each brushing session last?"}),u.jsx("div",{className:"space-y-2",children:h.map(m=>u.jsxs("button",{onClick:()=>c(m.value),className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${a.sessionDurationMinutes===m.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a.sessionDurationMinutes===m.value?"border-white bg-white":"border-purple-400"}`,children:a.sessionDurationMinutes===m.value&&u.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold",children:m.label}),u.jsx("div",{className:`text-xs ${a.sessionDurationMinutes===m.value?"text-white/80":"text-purple-400"}`,children:m.description})]})]}),m.value===2&&u.jsx("span",{className:"text-xs bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full font-bold",children:" Best"})]},m.value))})]}),u.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-2",children:"About Sparkle"}),u.jsx("p",{className:"text-sm text-purple-300",children:"Sparkle makes tooth brushing fun! Brush your teeth to clean creatures, catch them, and build your collection."}),u.jsxs("div",{className:"mt-4 text-center text-xs text-purple-500",children:["Version ",sv]})]}),(t||n||r)&&u.jsxs("div",{className:"bg-gray-900/50 rounded-2xl p-4 border border-gray-700",children:[u.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-300",children:"Developer Tools"}),u.jsxs("div",{className:"space-y-2",children:[n&&u.jsxs("button",{onClick:n,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-purple-400",children:"Graphics Debug Menu"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Preview all creatures and buddy graphics in a gallery view"})]}),t&&u.jsxs("button",{onClick:t,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-green-400",children:"Buddy Debug Mode"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test buddy animation with activity level simulation"})]}),r&&u.jsxs("button",{onClick:r,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-pink-400",children:"Photo Editor Debug"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test photo editing with all stickers unlocked and no limits"})]})]})]})]})]})}function ov({onProfileSelected:e}){const[t,n]=C.useState([]),[r,a]=C.useState(!0),[o,c]=C.useState(!1),[h,m]=C.useState(""),[y,S]=C.useState(null);C.useEffect(()=>{j()},[]);async function j(){a(!0);try{await Ky();const M=await xc(),Q=await Promise.all(M.map(async w=>{try{const x=await ws(w.id);return{...w,progress:x}}catch{return w}}));n(Q)}catch(M){console.error("Failed to load profiles:",M)}a(!1)}async function E(){if(h.trim())try{const M=await Xp(h);m(""),c(!1),await j(),G(M)}catch(M){console.error("Failed to create profile:",M)}}function G(M){vc(M.id),e(M)}async function O(M){try{await Uy(M),S(null),await j()}catch(Q){console.error("Failed to delete profile:",Q)}}return r?u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Loading profiles..."})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 p-6",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-5xl mb-4",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sparkle Brush"}),u.jsx("p",{className:"text-purple-200",children:"Who's brushing today?"})]}),u.jsx("div",{className:"space-y-4 mb-8",children:t.map(M=>u.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:y===M.id?u.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[u.jsxs("p",{className:"text-white text-center",children:["Delete ",M.name,"'s profile?"]}),u.jsx("p",{className:"text-red-300 text-sm text-center",children:"This will delete all their creatures and progress!"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>O(M.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold",children:"Delete"}),u.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-bold",children:"Cancel"})]})]}):u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:()=>G(M),className:"flex-1 flex items-center gap-4",children:[u.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg",style:{backgroundColor:M.avatarColor},children:M.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-white font-bold text-lg",children:M.name}),M.progress&&u.jsxs("div",{className:"text-purple-200 text-sm flex gap-3",children:[u.jsxs("span",{children:[" ",M.progress.currentStreak," streak"]}),u.jsxs("span",{children:[" ",M.progress.capturedCreatures.length," creatures"]})]})]})]}),u.jsx("button",{onClick:Q=>{Q.stopPropagation(),S(M.id)},className:"p-2 text-red-400 hover:text-red-300 transition-colors","aria-label":"Delete profile",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},M.id))}),o?u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-purple-200 text-sm mb-2",children:"Profile Name"}),u.jsx("input",{type:"text",value:h,onChange:M=>m(M.target.value),placeholder:"Enter name...",className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0,maxLength:20,onKeyDown:M=>{M.key==="Enter"&&E(),M.key==="Escape"&&c(!1)}})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:E,disabled:!h.trim(),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Profile"}),u.jsx("button",{onClick:()=>{c(!1),m("")},className:"px-4 py-3 bg-gray-500/50 text-white rounded-xl font-bold",children:"Cancel"})]})]}):u.jsxs("button",{onClick:()=>c(!0),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-lg shadow-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:"+"}),u.jsx("span",{children:"Add New Profile"})]}),t.length===0&&!o&&u.jsxs("div",{className:"text-center mt-8 text-purple-200",children:[u.jsx("p",{children:"No profiles yet!"}),u.jsx("p",{className:"text-sm mt-1",children:"Create a profile to start brushing"})]})]})})}const kf=[{id:"cowboy",name:"Cowboy Hat",imageUrl:"",unlockCondition:"starter"},{id:"crown",name:"Royal Crown",imageUrl:"",unlockCondition:"streak",unlockThreshold:7},{id:"tophat",name:"Top Hat",imageUrl:"",unlockCondition:"sessions",unlockThreshold:10},{id:"wizard",name:"Wizard Hat",imageUrl:"",unlockCondition:"creature"},{id:"cap",name:"Baseball Cap",imageUrl:"",unlockCondition:"starter"}];function lv({onBack:e}){const{isReady:t,error:n,registerVideoElement:r,startCamera:a}=wo(),{facePosition:o,isLoading:c,startTracking:h,stopTracking:m}=Wp(),{motionResults:y,startDetection:S,stopDetection:j,setFaceRegion:E,setDebugMode:G,getDebugInfo:O}=Gp({targetCleaningTime:25}),M=C.useRef(null),Q=C.useRef(null),[w,x]=C.useState(kf[0]),[b,B]=C.useState({width:0,height:0}),[K,U]=C.useState({width:640,height:480}),[I,V]=C.useState(!0),[H,z]=C.useState(!1),[N,ee]=C.useState(0);C.useEffect(()=>{a()},[a]),C.useEffect(()=>{E(o?{x:o.x,y:o.y,width:o.width,height:o.height}:null)},[o,E]);const ie=C.useCallback(()=>{z(X=>{const he=!X;return G(he),he})},[G]),de=C.useCallback(X=>{M.current=X,X&&r(X)},[r]);C.useEffect(()=>{const X=M.current;if(!X||!t)return;const he=()=>{X.readyState>=2&&X.videoWidth>0&&(U({width:X.videoWidth,height:X.videoHeight}),h(X),S(X))},be=setInterval(he,100);return he(),()=>{clearInterval(be),m(),j()}},[t,h,m,S,j]),C.useEffect(()=>{const X=Q.current;if(!X)return;const he=()=>{B({width:X.clientWidth,height:X.clientHeight})};he();const be=new ResizeObserver(he);return be.observe(X),()=>be.disconnect()},[]);const ke=b.width/K.width,ue=b.height/K.height,me=o?{x:(b.width-o.width*ke)/2,y:o.y*ue,width:o.width*ke,height:o.height*ue}:null,Y=y.reduce((X,he)=>X+he.motionLevel,0)/Math.max(y.length,1),J=N>0?N:Y;return u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-indigo-900 to-purple-800 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg text-white",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Buddy Debug Mode"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:ie,className:`px-4 py-2 rounded-lg text-white ${H?"bg-yellow-600":"bg-gray-600"}`,children:" Brush"}),u.jsx("button",{onClick:()=>V(!I),className:`px-4 py-2 rounded-lg text-white ${I?"bg-green-600":"bg-gray-600"}`,children:I?"Debug ON":"Debug OFF"})]})]}),u.jsxs("div",{ref:Q,className:"relative w-full aspect-[4/3] bg-black rounded-2xl overflow-hidden mb-4",children:[u.jsx("video",{ref:de,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!t&&!n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/70",children:u.jsx("div",{className:"text-purple-200 text-center p-4 animate-pulse",children:"Connecting to camera..."})}),n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/70",children:u.jsx("div",{className:"text-red-200 text-center p-4",children:n})}),c&&u.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500/80 px-3 py-1 rounded text-sm",children:"Loading face detection..."}),I&&me&&u.jsx("div",{className:"absolute border-2 border-green-400 pointer-events-none",style:{left:`${me.x}px`,top:`${me.y}px`,width:`${me.width}px`,height:`${me.height}px`},children:u.jsxs("div",{className:"absolute -top-6 left-0 bg-green-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:["Face: ",o==null?void 0:o.x.toFixed(0),", ",o==null?void 0:o.y.toFixed(0)," | ",o==null?void 0:o.width.toFixed(0),"x",o==null?void 0:o.height.toFixed(0)]})}),w&&t&&b.width>0&&u.jsx(Hp,{buddy:w,containerWidth:b.width,containerHeight:b.height,activityScore:J}),H&&b.width>0&&u.jsx(Yp,{getDebugInfo:O,containerWidth:b.width,containerHeight:b.height,videoWidth:K.width,videoHeight:K.height}),H&&u.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:u.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${y.some(X=>X.hasMotion)?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:y.some(X=>X.hasMotion)?" BRUSHING DETECTED":" No brushing motion"})}),u.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 px-3 py-2 rounded-lg text-white text-sm",children:["Activity: ",J.toFixed(0),"%"]})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[u.jsx("h2",{className:"text-white font-semibold mb-3",children:"Select Buddy"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:kf.map(X=>u.jsx("button",{onClick:()=>x(X),className:`px-4 py-2 rounded-lg transition-all ${w.id===X.id?"bg-yellow-500 text-black font-bold":"bg-purple-600 text-white hover:bg-purple-500"}`,children:X.name},X.id))})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[u.jsx("h2",{className:"text-white font-semibold mb-3",children:"Simulate Activity Level"}),u.jsx("input",{type:"range",min:"0",max:"100",value:N,onChange:X=>ee(Number(X.target.value)),className:"w-full"}),u.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mt-1",children:[u.jsx("span",{children:"Auto (from motion)"}),u.jsxs("span",{children:[N,"%"]}),u.jsx("span",{children:"Max Activity"})]})]}),I&&u.jsxs("div",{className:"bg-gray-900/80 rounded-xl p-4 font-mono text-sm text-green-400",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Video Size:"}),u.jsxs("div",{children:[K.width," x ",K.height]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Container Size:"}),u.jsxs("div",{children:[b.width.toFixed(0)," x ",b.height.toFixed(0)]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Face Position (video coords):"}),u.jsx("div",{children:o?`x: ${o.x.toFixed(1)}, y: ${o.y.toFixed(1)}`:"Not detected"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Activity Score:"}),u.jsxs("div",{children:[J.toFixed(1),"%"]})]})]}),H&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4",children:[u.jsx("div",{className:"text-gray-400 mb-2",children:"Motion Detection Zones:"}),u.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs",children:y.map(X=>u.jsxs("div",{className:`px-2 py-1 rounded ${X.hasMotion?"bg-green-600":"bg-gray-700"}`,children:[X.zoneId,": ",X.motionLevel.toFixed(0),"%"]},X.zoneId))})]})}),u.jsxs("div",{className:"mt-4 text-gray-500 text-xs",children:["Buddy bounces around the screen | Speed and spin increase with activity",H&&" | Green dashed = brushing region"]})]})]})})}const Cf=["grassland","coastal","lava","city","sky"];function ga(e){const t=e.monsterType.toLowerCase(),n=e.id.toLowerCase();return t.includes("slime")||t.includes("blob")||t.includes("jelly")||t.includes("ghost")?"blobkins":t.includes("cat")||t.includes("fox")||t.includes("raccoon")||t.includes("tanuki")||t.includes("spirit")||t.includes("kappa")||t.includes("owl")||n.includes("yokai")||n.includes("spirit")?"mystlings":t.includes("dragon")||t.includes("drake")||t.includes("mecha")||t.includes("robo")||t.includes("cyber")||t.includes("dino")||n.includes("gear")||n.includes("mecha")||n.includes("cyber")||n.includes("robo")||n.includes("volt")||n.includes("data")?"mechazoids":"sparklings"}const Oi={sparklings:{label:"Sparklings",icon:"",color:"bg-yellow-500",description:"Clean, elemental, iconic"},mechazoids:{label:"Mechazoids",icon:"",color:"bg-blue-600",description:"Digital, robotic, tech"},mystlings:{label:"Mystlings",icon:"",color:"bg-purple-600",description:"Spiritual, mystical, Japanese"},blobkins:{label:"Blobkins",icon:"",color:"bg-lime-500",description:"Bouncy, happy, DQ style"}},$r={grassland:{bg:"bg-green-600",text:"text-green-100",border:"border-green-400"},coastal:{bg:"bg-blue-600",text:"text-blue-100",border:"border-blue-400"},lava:{bg:"bg-orange-600",text:"text-orange-100",border:"border-orange-400"},city:{bg:"bg-purple-600",text:"text-purple-100",border:"border-purple-400"},sky:{bg:"bg-cyan-600",text:"text-cyan-100",border:"border-cyan-400"},all:{bg:"bg-gradient-to-r from-orange-500 to-red-500",text:"text-white",border:"border-orange-400"}},Gr={common:{bg:"bg-gray-700",text:"text-gray-200",glow:""},rare:{bg:"bg-blue-800",text:"text-blue-200",glow:"shadow-blue-500/50 shadow-lg"},legendary:{bg:"bg-gradient-to-br from-amber-800 via-amber-700 to-orange-900",text:"text-amber-100",glow:"shadow-amber-400/70 shadow-2xl ring-2 ring-amber-500/50"},mythic:{bg:"bg-gradient-to-br from-orange-600 via-red-600 to-orange-700",text:"text-orange-100",glow:"shadow-orange-400/80 shadow-2xl ring-4 ring-orange-500/60 animate-pulse"}},uv=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],cv=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function dv({onBack:e}){const[t,n]=C.useState("creatures"),[r,a]=C.useState("all"),[o,c]=C.useState("all"),[h,m]=C.useState("all"),[y,S]=C.useState(!0),[j,E]=C.useState(!1),[G,O]=C.useState(50),[M,Q]=C.useState(null),[w,x]=C.useState(120),[b,B]=C.useState(100),[K,U]=C.useState(!0),I=Ct.filter(N=>!(r!=="all"&&N.region!==r||o!=="all"&&N.rarity!==o||h!=="all"&&ga(N)!==h)),V=["sparklings","mechazoids","mystlings","blobkins"],H=V.reduce((N,ee)=>(N[ee]=Ct.filter(ie=>ga(ie)===ee).length,N),{}),z={byRegion:Cf.reduce((N,ee)=>({...N,[ee]:Ct.filter(ie=>ie.region===ee).length}),{}),byRarity:{common:Ct.filter(N=>N.rarity==="common").length,rare:Ct.filter(N=>N.rarity==="rare").length,legendary:Ct.filter(N=>N.rarity==="legendary").length,mythic:Ct.filter(N=>N.rarity==="mythic").length}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900",children:[u.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur border-b border-slate-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white flex items-center gap-2",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Graphics Debug Menu"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>n("creatures"),className:`px-4 py-2 rounded-lg transition-all ${t==="creatures"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Creatures (",Ct.length,")"]}),u.jsxs("button",{onClick:()=>n("buddies"),className:`px-4 py-2 rounded-lg transition-all ${t==="buddies"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Buddies (",oi.length,")"]})]})]})})}),t==="creatures"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Region:"}),u.jsx("button",{onClick:()=>a("all"),className:`px-3 py-1 rounded text-sm ${r==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),Cf.map(N=>u.jsxs("button",{onClick:()=>a(N),className:`px-3 py-1 rounded text-sm capitalize ${r===N?`${$r[N].bg} ${$r[N].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[N," (",z.byRegion[N],")"]},N))]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Rarity:"}),u.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded text-sm ${o==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),["common","rare","legendary","mythic"].map(N=>u.jsxs("button",{onClick:()=>c(N),className:`px-3 py-1 rounded text-sm capitalize ${o===N?`${Gr[N].bg} ${Gr[N].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[N," (",z.byRarity[N],")"]},N))]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Style:"}),u.jsx("button",{onClick:()=>m("all"),className:`px-3 py-1 rounded text-sm ${h==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),V.map(N=>u.jsxs("button",{onClick:()=>m(N),className:`px-3 py-1 rounded text-sm flex items-center gap-1 ${h===N?`${Oi[N].color} text-white font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[u.jsx("span",{children:Oi[N].icon}),Oi[N].label," (",H[N],")"]},N))]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:y,onChange:N=>S(N.target.checked),className:"w-4 h-4"}),"Animated"]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:K,onChange:N=>U(N.target.checked),className:"w-4 h-4"}),"Show Style"]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:j,onChange:N=>E(N.target.checked),className:"w-4 h-4"}),"Show Gunk"]}),j&&u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Gunk Level:",u.jsx("input",{type:"range",min:"0",max:"100",value:G,onChange:N=>O(Number(N.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-8",children:[G,"%"]})]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",u.jsx("input",{type:"range",min:"60",max:"200",value:w,onChange:N=>x(Number(N.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-10",children:[w,"px"]})]})]})]})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing ",I.length," of ",Ct.length," creatures"]}),u.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${w+40}px, 1fr))`},children:I.map(N=>u.jsxs("div",{onClick:()=>Q((M==null?void 0:M.id)===N.id?null:N),className:`relative flex flex-col items-center p-3 rounded-xl cursor-pointer transition-all ${Gr[N.rarity].bg} ${Gr[N.rarity].glow} ${(M==null?void 0:M.id)===N.id?"ring-2 ring-white scale-105":"hover:scale-102"}`,children:[u.jsx("div",{className:`absolute top-1 left-1 px-2 py-0.5 rounded text-xs ${$r[N.region].bg} ${$r[N.region].text}`,children:N.region}),N.rarity==="mythic"&&u.jsx("div",{className:"absolute top-1 right-1 text-orange-300 text-xl animate-pulse",title:"Mythic - Ultimate Boss",children:""}),N.rarity==="legendary"&&u.jsx("div",{className:"absolute top-1 right-1 text-amber-300 text-lg",title:"Legendary Dragon",children:""}),uv.includes(N.id)&&u.jsxs("div",{className:"absolute bottom-1 right-1 flex gap-0.5",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-green-500 text-white font-bold",title:"HD Raster Image",children:"HD"}),cv.includes(N.id)&&u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-red-600 text-white font-bold",title:"Has Possessed Variant",children:""})]}),u.jsx(cn,{creature:N,size:w,animated:y,showGunk:j,gunkLevel:G}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsx("div",{className:"text-white font-medium text-sm truncate max-w-full",children:N.name}),u.jsxs("div",{className:"text-slate-400 text-xs capitalize mb-1",children:[N.rarity,"  ",N.monsterType]}),K&&(()=>{if(N.rarity==="mythic")return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold animate-pulse",children:" MYTHIC ULTIMATE"})});if(N.rarity==="legendary")return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold",children:" LEGENDARY DRAGON"})});const ee=ga(N),ie=Oi[ee];return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsxs("span",{className:`px-2 py-0.5 rounded text-[9px] text-white ${ie.color} font-medium`,children:[ie.icon," ",ie.label]})})})()]})]},N.id))})]}),M&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur border-t border-slate-700 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-6",children:[u.jsx(cn,{creature:M,size:100,animated:y,showGunk:j,gunkLevel:G}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:M.name}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${$r[M.region].bg} ${$r[M.region].text}`,children:M.region}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${Gr[M.rarity].bg} ${Gr[M.rarity].text}`,children:M.rarity})]}),u.jsx("p",{className:"text-slate-400 text-sm mb-2",children:M.description}),(()=>{if(M.rarity==="mythic")return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold flex items-center gap-2 animate-pulse",children:" MYTHIC ULTIMATE BOSS"}),u.jsx("span",{className:"text-orange-400 text-xs",children:"The five-headed dragon of perfect dental hygiene - only appears after catching all other creatures!"})]});if(M.rarity==="legendary")return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold flex items-center gap-2",children:" LEGENDARY DRAGON FORM"}),u.jsx("span",{className:"text-amber-400 text-xs",children:"Unique dragon-style graphics with wings, horns, and magical aura"})]});const N=ga(M),ee=Oi[N];return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsxs("span",{className:`px-3 py-1 rounded text-sm text-white ${ee.color} font-medium flex items-center gap-2`,children:[ee.icon," ",ee.label," Style"]}),u.jsx("span",{className:"text-slate-400 text-xs",children:ee.description})]})})(),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[u.jsxs("span",{children:["ID: ",M.id]}),u.jsxs("span",{children:["Type: ",M.monsterType]})]})]}),u.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white",children:"Close"})]})})]}),t==="buddies"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:u.jsx("div",{className:"flex flex-wrap items-center gap-4",children:u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",u.jsx("input",{type:"range",min:"60",max:"200",value:b,onChange:N=>B(Number(N.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-10",children:[b,"px"]})]})})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing all ",oi.length," buddies"]}),u.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${b+60}px, 1fr))`},children:oi.map(N=>u.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-gradient-to-b from-purple-800 to-purple-900 hover:from-purple-700 hover:to-purple-800 transition-all",children:[u.jsx("div",{className:"bg-purple-950/50 rounded-lg p-2 mb-2",children:u.jsx(Lp,{buddyId:N.id,size:b})}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white font-medium text-sm",children:N.name}),u.jsxs("div",{className:"text-purple-300 text-xs capitalize",children:[N.unlockCondition,N.unlockThreshold&&` (${N.unlockThreshold})`]}),u.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["ID: ",N.id]})]})]},N.id))})]})]})]})}const fv=Ct.map(e=>({...e,capturedAt:new Date}));function hv({onBack:e}){const[t,n]=C.useState(null),[r,a]=C.useState(null),o=C.useRef(null),c=C.useRef(null),h=C.useCallback(async()=>{try{const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});c.current=S,o.current&&(o.current.srcObject=S)}catch(S){console.error("Camera error:",S),a("Could not access camera")}},[]),m=C.useCallback(()=>{c.current&&(c.current.getTracks().forEach(S=>S.stop()),c.current=null)},[]),y=C.useCallback(()=>{if(!o.current)return;const S=document.createElement("canvas");S.width=o.current.videoWidth,S.height=o.current.videoHeight;const j=S.getContext("2d");if(!j)return;j.drawImage(o.current,0,0);const E=S.toDataURL("image/jpeg",.9);n(E),m()},[m]);return C.useEffect(()=>(t||h(),()=>{m()}),[t,h,m]),t?u.jsx(Zp,{photo:t,capturedCreatures:fv,onDone:e,onBack:()=>n(null),debugMode:!0}):u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-4 bg-purple-900/50 z-10",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Photo Debug"}),u.jsx("div",{className:"w-20"})]}),u.jsx("div",{className:"flex-1 relative bg-black overflow-hidden min-h-0",children:r?u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-red-400 mb-4",children:r}),u.jsx("button",{onClick:h,className:"px-4 py-2 bg-purple-600 rounded-xl",children:"Retry"})]})}):u.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover",style:{transform:"scaleX(-1)"}})}),u.jsxs("div",{className:"flex-shrink-0 p-4 bg-purple-900/50 z-10",children:[u.jsx("button",{onClick:y,disabled:!!r,className:"w-full py-4 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl font-bold text-lg disabled:opacity-50",children:"Take Photo"}),u.jsxs("p",{className:"text-center text-purple-300 text-sm mt-2",children:["All ",Ct.length," creatures will be available as stickers"]})]})]})}function pv(){const[e,t]=C.useState("profile-select"),[n,r]=C.useState(null),[a,o]=C.useState(null),[c,h]=C.useState(null),[m,y]=C.useState(null),[S,j]=C.useState(null),[E,G]=C.useState(null);C.useEffect(()=>{O()},[]);async function O(){const ue=vi();if(ue){const me=await Wy(ue);if(me){r(me),await w(),t("home");return}}t("profile-select")}async function M(ue){r(ue),await w(),t("home")}function Q(){t("profile-select"),o(null),r(null)}async function w(){try{const ue=await ws();o(ue)}catch(ue){console.error("Failed to load user progress:",ue),t("profile-select")}}function x(){t("camera-check")}function b(){t("buddy-select")}function B(ue){h(ue),t("brushing")}async function K(ue){y(ue),t("results");const me={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:new Date,duration:Kp(),cleaningPercentage:ue.cleaningPercentage,zoneProgress:ue.zoneProgress,photos:ue.photos};try{await Vy(me),await w()}catch(Y){console.error("Failed to save session:",Y)}}function U(){t("capture")}function I(ue){j(ue),t("photos")}function V(ue){G(ue),t("editor")}function H(){G(null),t("home"),w()}function z(){t("home"),y(null),j(null),G(null),w()}function N(){t("collection")}function ee(){t("settings")}function ie(){t("buddy-debug")}function de(){t("graphics-debug")}function ke(){t("photo-debug")}return e==="profile-select"?u.jsx("div",{className:"h-full w-full overflow-hidden",children:u.jsx(ov,{onProfileSelected:M})}):!a||!n?u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsx("div",{className:"text-2xl animate-pulse",children:"Loading..."})}):u.jsxs("div",{className:"h-full w-full overflow-hidden",children:[e==="home"&&u.jsx(J0,{userProgress:a,currentProfile:n,onStartBrushing:x,onViewCollection:N,onViewSettings:ee,onSwitchProfile:Q}),e==="settings"&&u.jsx(av,{onBack:z,onBuddyDebug:ie,onGraphicsDebug:de,onPhotoDebug:ke}),e==="camera-check"&&u.jsx(ty,{onConfirm:b,onCancel:z}),e==="buddy-select"&&u.jsx(cy,{userProgress:a,onSelect:B,onBack:z}),e==="brushing"&&u.jsx(Oy,{selectedBuddy:c,capturedCreatureIds:a.capturedCreatures.map(ue=>ue.id),onComplete:K,onCancel:z}),e==="results"&&m&&u.jsx(zy,{cleaningPercentage:m.cleaningPercentage,zoneProgress:m.zoneProgress,onContinue:U}),e==="capture"&&m&&u.jsx(Yy,{cleaningPercentage:m.cleaningPercentage,userProgress:a,region:m.region,preSelectedCreature:m.creature,onComplete:I}),e==="photos"&&m&&u.jsx(Qy,{photos:m.photos,capturedCreature:S,onSelectPhoto:V,onSkip:z}),e==="editor"&&E&&u.jsx(Zp,{photo:E,capturedCreatures:S&&!a.capturedCreatures.some(ue=>ue.id===S.id)?[{...S,capturedAt:new Date},...a.capturedCreatures]:a.capturedCreatures,onDone:H,onBack:()=>t("photos")}),e==="collection"&&u.jsx(rv,{userProgress:a,onBack:z}),e==="buddy-debug"&&u.jsx(lv,{onBack:z}),e==="graphics-debug"&&u.jsx(dv,{onBack:z}),e==="photo-debug"&&u.jsx(hv,{onBack:z})]})}Bp(document.getElementById("root")).render(u.jsx(C.StrictMode,{children:u.jsx(ey,{children:u.jsx(pv,{})})}));export{gv as a,ed as c,Em as g};
