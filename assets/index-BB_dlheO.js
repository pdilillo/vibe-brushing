const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C70fQbMr.js","assets/graph_model-CU2BySBf.js","assets/face-landmarks-detection.esm-D86gesFT.js"])))=>i.map(i=>d[i]);
var vm=Object.defineProperty;var xm=(e,t,n)=>t in e?vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ct=(e,t,n)=>xm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var wf={exports:{}},es={},bf={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),bm=Symbol.for("react.portal"),km=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Em=Symbol.for("react.context"),Nm=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),_m=Symbol.for("react.memo"),Am=Symbol.for("react.lazy"),Zc=Symbol.iterator;function Fm(e){return e===null||typeof e!="object"?null:(e=Zc&&e[Zc]||e["@@iterator"],typeof e=="function"?e:null)}var kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cf=Object.assign,jf={};function pi(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||kf}pi.prototype.isReactComponent={};pi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sf(){}Sf.prototype=pi.prototype;function bu(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||kf}var ku=bu.prototype=new Sf;ku.constructor=bu;Cf(ku,pi.prototype);ku.isPureReactComponent=!0;var Jc=Array.isArray,Ef=Object.prototype.hasOwnProperty,Cu={current:null},Nf={key:!0,ref:!0,__self:!0,__source:!0};function Tf(e,t,n){var r,o={},s=null,c=null;if(t!=null)for(r in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(s=""+t.key),t)Ef.call(t,r)&&!Nf.hasOwnProperty(r)&&(o[r]=t[r]);var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){for(var m=Array(p),y=0;y<p;y++)m[y]=arguments[y+2];o.children=m}if(e&&e.defaultProps)for(r in p=e.defaultProps,p)o[r]===void 0&&(o[r]=p[r]);return{$$typeof:ha,type:e,key:s,ref:c,props:o,_owner:Cu.current}}function Dm(e,t){return{$$typeof:ha,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ju(e){return typeof e=="object"&&e!==null&&e.$$typeof===ha}function Pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ed=/\/+/g;function Xs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pm(""+e.key):t.toString(36)}function mo(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case ha:case bm:c=!0}}if(c)return c=e,o=o(c),e=r===""?"."+Xs(c,0):r,Jc(o)?(n="",e!=null&&(n=e.replace(ed,"$&/")+"/"),mo(o,t,n,"",function(y){return y})):o!=null&&(ju(o)&&(o=Dm(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(ed,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=r===""?".":r+":",Jc(e))for(var p=0;p<e.length;p++){s=e[p];var m=r+Xs(s,p);c+=mo(s,t,n,m,o)}else if(m=Fm(e),typeof m=="function")for(e=m.call(e),p=0;!(s=e.next()).done;)s=s.value,m=r+Xs(s,p++),c+=mo(s,t,n,m,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function Ua(e,t,n){if(e==null)return e;var r=[],o=0;return mo(e,r,"","",function(s){return t.call(n,s,o++)}),r}function Rm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Et={current:null},go={transition:null},Mm={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:go,ReactCurrentOwner:Cu};function _f(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Ua,forEach:function(e,t,n){Ua(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ua(e,function(){t++}),t},toArray:function(e){return Ua(e,function(t){return t})||[]},only:function(e){if(!ju(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=pi;_e.Fragment=km;_e.Profiler=jm;_e.PureComponent=bu;_e.StrictMode=Cm;_e.Suspense=Tm;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm;_e.act=_f;_e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cf({},e.props),o=e.key,s=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,c=Cu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(m in t)Ef.call(t,m)&&!Nf.hasOwnProperty(m)&&(r[m]=t[m]===void 0&&p!==void 0?p[m]:t[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){p=Array(m);for(var y=0;y<m;y++)p[y]=arguments[y+2];r.children=p}return{$$typeof:ha,type:e.type,key:o,ref:s,props:r,_owner:c}};_e.createContext=function(e){return e={$$typeof:Em,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sm,_context:e},e.Consumer=e};_e.createElement=Tf;_e.createFactory=function(e){var t=Tf.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:Nm,render:e}};_e.isValidElement=ju;_e.lazy=function(e){return{$$typeof:Am,_payload:{_status:-1,_result:e},_init:Rm}};_e.memo=function(e,t){return{$$typeof:_m,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=go.transition;go.transition={};try{e()}finally{go.transition=t}};_e.unstable_act=_f;_e.useCallback=function(e,t){return Et.current.useCallback(e,t)};_e.useContext=function(e){return Et.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return Et.current.useDeferredValue(e)};_e.useEffect=function(e,t){return Et.current.useEffect(e,t)};_e.useId=function(){return Et.current.useId()};_e.useImperativeHandle=function(e,t,n){return Et.current.useImperativeHandle(e,t,n)};_e.useInsertionEffect=function(e,t){return Et.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return Et.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return Et.current.useMemo(e,t)};_e.useReducer=function(e,t,n){return Et.current.useReducer(e,t,n)};_e.useRef=function(e){return Et.current.useRef(e)};_e.useState=function(e){return Et.current.useState(e)};_e.useSyncExternalStore=function(e,t,n){return Et.current.useSyncExternalStore(e,t,n)};_e.useTransition=function(){return Et.current.useTransition()};_e.version="18.3.1";bf.exports=_e;var C=bf.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=C,Im=Symbol.for("react.element"),Om=Symbol.for("react.fragment"),zm=Object.prototype.hasOwnProperty,Lm=Bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$m={key:!0,ref:!0,__self:!0,__source:!0};function Af(e,t,n){var r,o={},s=null,c=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)zm.call(t,r)&&!$m.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Im,type:e,key:s,ref:c,props:o,_owner:Lm.current}}es.Fragment=Om;es.jsx=Af;es.jsxs=Af;wf.exports=es;var u=wf.exports,Ff={exports:{}},$t={},Df={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,X){var ae=H.length;H.push(X);e:for(;0<ae;){var we=ae-1>>>1,Ce=H[we];if(0<o(Ce,X))H[we]=X,H[ae]=Ce,ae=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],ae=H.pop();if(ae!==X){H[0]=ae;e:for(var we=0,Ce=H.length,We=Ce>>>1;we<We;){var Ae=2*(we+1)-1,Be=H[Ae],Le=Ae+1,Ue=H[Le];if(0>o(Be,ae))Le<Ce&&0>o(Ue,Be)?(H[we]=Ue,H[Le]=ae,we=Le):(H[we]=Be,H[Ae]=ae,we=Ae);else if(Le<Ce&&0>o(Ue,ae))H[we]=Ue,H[Le]=ae,we=Le;else break e}}return X}function o(H,X){var ae=H.sortIndex-X.sortIndex;return ae!==0?ae:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,p=c.now();e.unstable_now=function(){return c.now()-p}}var m=[],y=[],j=1,S=null,E=3,$=!1,Y=!1,M=!1,J=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var X=n(y);X!==null;){if(X.callback===null)r(y);else if(X.startTime<=H)r(y),X.sortIndex=X.expirationTime,t(m,X);else break;X=n(y)}}function I(H){if(M=!1,b(H),!Y)if(n(m)!==null)Y=!0,le(K);else{var X=n(y);X!==null&&he(I,X.startTime-H)}}function K(H,X){Y=!1,M&&(M=!1,k(V),V=-1),$=!0;var ae=E;try{for(b(X),S=n(m);S!==null&&(!(S.expirationTime>X)||H&&!D());){var we=S.callback;if(typeof we=="function"){S.callback=null,E=S.priorityLevel;var Ce=we(S.expirationTime<=X);X=e.unstable_now(),typeof Ce=="function"?S.callback=Ce:S===n(m)&&r(m),b(X)}else r(m);S=n(m)}if(S!==null)var We=!0;else{var Ae=n(y);Ae!==null&&he(I,Ae.startTime-X),We=!1}return We}finally{S=null,E=ae,$=!1}}var L=!1,B=null,V=-1,q=5,G=-1;function D(){return!(e.unstable_now()-G<q)}function Z(){if(B!==null){var H=e.unstable_now();G=H;var X=!0;try{X=B(!0,H)}finally{X?ee():(L=!1,B=null)}}else L=!1}var ee;if(typeof v=="function")ee=function(){v(Z)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,se=fe.port2;fe.port1.onmessage=Z,ee=function(){se.postMessage(null)}}else ee=function(){J(Z,0)};function le(H){B=H,L||(L=!0,ee())}function he(H,X){V=J(function(){H(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){Y||$||(Y=!0,le(K))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(H){switch(E){case 1:case 2:case 3:var X=3;break;default:X=E}var ae=E;E=X;try{return H()}finally{E=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=E;E=H;try{return X()}finally{E=ae}},e.unstable_scheduleCallback=function(H,X,ae){var we=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?we+ae:we):ae=we,H){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ae+Ce,H={id:j++,callback:X,priorityLevel:H,startTime:ae,expirationTime:Ce,sortIndex:-1},ae>we?(H.sortIndex=ae,t(y,H),n(m)===null&&H===n(y)&&(M?(k(V),V=-1):M=!0,he(I,ae-we))):(H.sortIndex=Ce,t(m,H),Y||$||(Y=!0,le(K))),H},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(H){var X=E;return function(){var ae=E;E=X;try{return H.apply(this,arguments)}finally{E=ae}}}})(Pf);Df.exports=Pf;var Wm=Df.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm=C,Lt=Wm;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rf=new Set,Xi={};function Er(e,t){oi(e,t),oi(e+"Capture",t)}function oi(e,t){for(Xi[e]=t,e=0;e<t.length;e++)Rf.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nl=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,td={},nd={};function Um(e){return Nl.call(nd,e)?!0:Nl.call(td,e)?!1:Vm.test(e)?nd[e]=!0:(td[e]=!0,!1)}function Km(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qm(e,t,n,r){if(t===null||typeof t>"u"||Km(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,o,s,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=c}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Su=/[\-:]([a-z])/g;function Eu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Su,Eu);yt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Su,Eu);yt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Su,Eu);yt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nu(e,t,n,r){var o=yt.hasOwnProperty(t)?yt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qm(t,n,o,r)&&(n=null),r||o===null?Um(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ka=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),Tu=Symbol.for("react.strict_mode"),Tl=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Bf=Symbol.for("react.context"),_u=Symbol.for("react.forward_ref"),_l=Symbol.for("react.suspense"),Al=Symbol.for("react.suspense_list"),Au=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),If=Symbol.for("react.offscreen"),rd=Symbol.iterator;function Ti(e){return e===null||typeof e!="object"?null:(e=rd&&e[rd]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Object.assign,Zs;function Oi(e){if(Zs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zs=t&&t[1]||""}return`
`+Zs+e}var Js=!1;function el(e,t){if(!e||Js)return"";Js=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var o=y.stack.split(`
`),s=r.stack.split(`
`),c=o.length-1,p=s.length-1;1<=c&&0<=p&&o[c]!==s[p];)p--;for(;1<=c&&0<=p;c--,p--)if(o[c]!==s[p]){if(c!==1||p!==1)do if(c--,p--,0>p||o[c]!==s[p]){var m=`
`+o[c].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=c&&0<=p);break}}}finally{Js=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Oi(e):""}function Hm(e){switch(e.tag){case 5:return Oi(e.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 2:case 15:return e=el(e.type,!1),e;case 11:return e=el(e.type.render,!1),e;case 1:return e=el(e.type,!0),e;default:return""}}function Fl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wr:return"Fragment";case $r:return"Portal";case Tl:return"Profiler";case Tu:return"StrictMode";case _l:return"Suspense";case Al:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Bf:return(e.displayName||"Context")+".Consumer";case Mf:return(e._context.displayName||"Context")+".Provider";case _u:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Au:return t=e.displayName||null,t!==null?t:Fl(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return Fl(e(t))}catch{}}return null}function Ym(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fl(t);case 8:return t===Tu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Of(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qm(e){var t=Of(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){r=""+c,s.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qa(e){e._valueTracker||(e._valueTracker=Qm(e))}function zf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Of(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _o(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dl(e,t){var n=t.checked;return Je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function id(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lf(e,t){t=t.checked,t!=null&&Nu(e,"checked",t,!1)}function Pl(e,t){Lf(e,t);var n=Jn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rl(e,t.type,Jn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ad(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rl(e,t,n){(t!=="number"||_o(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zi=Array.isArray;function Jr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ml(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function od(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(zi(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jn(n)}}function $f(e,t){var n=Jn(t.value),r=Jn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ha,Gf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ha=Ha||document.createElement("div"),Ha.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ha.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xm=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(e){Xm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wi[t]=Wi[e]})});function Vf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wi.hasOwnProperty(e)&&Wi[e]?(""+t).trim():t+"px"}function Uf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Vf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Zm=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Il(e,t){if(t){if(Zm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function Ol(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=null;function Fu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ll=null,ei=null,ti=null;function ld(e){if(e=ya(e)){if(typeof Ll!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=as(t),Ll(e.stateNode,e.type,t))}}function Kf(e){ei?ti?ti.push(e):ti=[e]:ei=e}function qf(){if(ei){var e=ei,t=ti;if(ti=ei=null,ld(e),t)for(e=0;e<t.length;e++)ld(t[e])}}function Hf(e,t){return e(t)}function Yf(){}var tl=!1;function Qf(e,t,n){if(tl)return e(t,n);tl=!0;try{return Hf(e,t,n)}finally{tl=!1,(ei!==null||ti!==null)&&(Yf(),qf())}}function Ji(e,t){var n=e.stateNode;if(n===null)return null;var r=as(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var $l=!1;if(En)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){$l=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{$l=!1}function Jm(e,t,n,r,o,s,c,p,m){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(j){this.onError(j)}}var Gi=!1,Ao=null,Fo=!1,Wl=null,e0={onError:function(e){Gi=!0,Ao=e}};function t0(e,t,n,r,o,s,c,p,m){Gi=!1,Ao=null,Jm.apply(e0,arguments)}function n0(e,t,n,r,o,s,c,p,m){if(t0.apply(this,arguments),Gi){if(Gi){var y=Ao;Gi=!1,Ao=null}else throw Error(ie(198));Fo||(Fo=!0,Wl=y)}}function Nr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ud(e){if(Nr(e)!==e)throw Error(ie(188))}function r0(e){var t=e.alternate;if(!t){if(t=Nr(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return ud(o),e;if(s===r)return ud(o),t;s=s.sibling}throw Error(ie(188))}if(n.return!==r.return)n=o,r=s;else{for(var c=!1,p=o.child;p;){if(p===n){c=!0,n=o,r=s;break}if(p===r){c=!0,r=o,n=s;break}p=p.sibling}if(!c){for(p=s.child;p;){if(p===n){c=!0,n=s,r=o;break}if(p===r){c=!0,r=s,n=o;break}p=p.sibling}if(!c)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function Zf(e){return e=r0(e),e!==null?Jf(e):null}function Jf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jf(e);if(t!==null)return t;e=e.sibling}return null}var ep=Lt.unstable_scheduleCallback,cd=Lt.unstable_cancelCallback,i0=Lt.unstable_shouldYield,a0=Lt.unstable_requestPaint,at=Lt.unstable_now,o0=Lt.unstable_getCurrentPriorityLevel,Du=Lt.unstable_ImmediatePriority,tp=Lt.unstable_UserBlockingPriority,Do=Lt.unstable_NormalPriority,s0=Lt.unstable_LowPriority,np=Lt.unstable_IdlePriority,ts=null,yn=null;function l0(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ts,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:d0,u0=Math.log,c0=Math.LN2;function d0(e){return e>>>=0,e===0?32:31-(u0(e)/c0|0)|0}var Ya=64,Qa=4194304;function Li(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Po(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,c=n&268435455;if(c!==0){var p=c&~o;p!==0?r=Li(p):(s&=c,s!==0&&(r=Li(s)))}else c=n&~o,c!==0?r=Li(c):s!==0&&(r=Li(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-on(t),o=1<<n,r|=e[n],t&=~o;return r}function f0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-on(s),p=1<<c,m=o[c];m===-1?(!(p&n)||p&r)&&(o[c]=f0(p,t)):m<=t&&(e.expiredLanes|=p),s&=~p}}function Gl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rp(){var e=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),e}function nl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ma(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=n}function h0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-on(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Pu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ze=0;function ip(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ap,Ru,op,sp,lp,Vl=!1,Xa=[],Un=null,Kn=null,qn=null,ea=new Map,ta=new Map,$n=[],m0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dd(e,t){switch(e){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(t.pointerId)}}function Ai(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=ya(t),t!==null&&Ru(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function g0(e,t,n,r,o){switch(t){case"focusin":return Un=Ai(Un,e,t,n,r,o),!0;case"dragenter":return Kn=Ai(Kn,e,t,n,r,o),!0;case"mouseover":return qn=Ai(qn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return ea.set(s,Ai(ea.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,ta.set(s,Ai(ta.get(s)||null,e,t,n,r,o)),!0}return!1}function up(e){var t=gr(e.target);if(t!==null){var n=Nr(t);if(n!==null){if(t=n.tag,t===13){if(t=Xf(n),t!==null){e.blockedOn=t,lp(e.priority,function(){op(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ul(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zl=r,n.target.dispatchEvent(r),zl=null}else return t=ya(n),t!==null&&Ru(t),e.blockedOn=n,!1;t.shift()}return!0}function fd(e,t,n){yo(e)&&n.delete(t)}function y0(){Vl=!1,Un!==null&&yo(Un)&&(Un=null),Kn!==null&&yo(Kn)&&(Kn=null),qn!==null&&yo(qn)&&(qn=null),ea.forEach(fd),ta.forEach(fd)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,Vl||(Vl=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,y0)))}function na(e){function t(o){return Fi(o,e)}if(0<Xa.length){Fi(Xa[0],e);for(var n=1;n<Xa.length;n++){var r=Xa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Un!==null&&Fi(Un,e),Kn!==null&&Fi(Kn,e),qn!==null&&Fi(qn,e),ea.forEach(t),ta.forEach(t),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)up(n),n.blockedOn===null&&$n.shift()}var ni=An.ReactCurrentBatchConfig,Ro=!0;function v0(e,t,n,r){var o=ze,s=ni.transition;ni.transition=null;try{ze=1,Mu(e,t,n,r)}finally{ze=o,ni.transition=s}}function x0(e,t,n,r){var o=ze,s=ni.transition;ni.transition=null;try{ze=4,Mu(e,t,n,r)}finally{ze=o,ni.transition=s}}function Mu(e,t,n,r){if(Ro){var o=Ul(e,t,n,r);if(o===null)fl(e,t,r,Mo,n),dd(e,r);else if(g0(o,e,t,n,r))r.stopPropagation();else if(dd(e,r),t&4&&-1<m0.indexOf(e)){for(;o!==null;){var s=ya(o);if(s!==null&&ap(s),s=Ul(e,t,n,r),s===null&&fl(e,t,r,Mo,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else fl(e,t,r,null,n)}}var Mo=null;function Ul(e,t,n,r){if(Mo=null,e=Fu(r),e=gr(e),e!==null)if(t=Nr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mo=e,null}function cp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Du:return 1;case tp:return 4;case Do:case s0:return 16;case np:return 536870912;default:return 16}default:return 16}}var Gn=null,Bu=null,vo=null;function dp(){if(vo)return vo;var e,t=Bu,n=t.length,r,o="value"in Gn?Gn.value:Gn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(r=1;r<=c&&t[n-r]===o[s-r];r++);return vo=o.slice(e,1<r?1-r:void 0)}function xo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Za(){return!0}function pd(){return!1}function Wt(e){function t(n,r,o,s,c){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=c,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(s):s[p]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Za:pd,this.isPropagationStopped=pd,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),t}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iu=Wt(hi),ga=Je({},hi,{view:0,detail:0}),w0=Wt(ga),rl,il,Di,ns=Je({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Di&&(Di&&e.type==="mousemove"?(rl=e.screenX-Di.screenX,il=e.screenY-Di.screenY):il=rl=0,Di=e),rl)},movementY:function(e){return"movementY"in e?e.movementY:il}}),hd=Wt(ns),b0=Je({},ns,{dataTransfer:0}),k0=Wt(b0),C0=Je({},ga,{relatedTarget:0}),al=Wt(C0),j0=Je({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),S0=Wt(j0),E0=Je({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N0=Wt(E0),T0=Je({},hi,{data:0}),md=Wt(T0),_0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F0[e])?!!t[e]:!1}function Ou(){return D0}var P0=Je({},ga,{key:function(e){if(e.key){var t=_0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(e){return e.type==="keypress"?xo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),R0=Wt(P0),M0=Je({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gd=Wt(M0),B0=Je({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),I0=Wt(B0),O0=Je({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),z0=Wt(O0),L0=Je({},ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$0=Wt(L0),W0=[9,13,27,32],zu=En&&"CompositionEvent"in window,Vi=null;En&&"documentMode"in document&&(Vi=document.documentMode);var G0=En&&"TextEvent"in window&&!Vi,fp=En&&(!zu||Vi&&8<Vi&&11>=Vi),yd=" ",vd=!1;function pp(e,t){switch(e){case"keyup":return W0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function V0(e,t){switch(e){case"compositionend":return hp(t);case"keypress":return t.which!==32?null:(vd=!0,yd);case"textInput":return e=t.data,e===yd&&vd?null:e;default:return null}}function U0(e,t){if(Gr)return e==="compositionend"||!zu&&pp(e,t)?(e=dp(),vo=Bu=Gn=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fp&&t.locale!=="ko"?null:t.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K0[e.type]:t==="textarea"}function mp(e,t,n,r){Kf(r),t=Bo(t,"onChange"),0<t.length&&(n=new Iu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ui=null,ra=null;function q0(e){Ep(e,0)}function rs(e){var t=Kr(e);if(zf(t))return e}function H0(e,t){if(e==="change")return t}var gp=!1;if(En){var ol;if(En){var sl="oninput"in document;if(!sl){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),sl=typeof wd.oninput=="function"}ol=sl}else ol=!1;gp=ol&&(!document.documentMode||9<document.documentMode)}function bd(){Ui&&(Ui.detachEvent("onpropertychange",yp),ra=Ui=null)}function yp(e){if(e.propertyName==="value"&&rs(ra)){var t=[];mp(t,ra,e,Fu(e)),Qf(q0,t)}}function Y0(e,t,n){e==="focusin"?(bd(),Ui=t,ra=n,Ui.attachEvent("onpropertychange",yp)):e==="focusout"&&bd()}function Q0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rs(ra)}function X0(e,t){if(e==="click")return rs(t)}function Z0(e,t){if(e==="input"||e==="change")return rs(t)}function J0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:J0;function ia(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Nl.call(t,o)||!ln(e[o],t[o]))return!1}return!0}function kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cd(e,t){var n=kd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kd(n)}}function vp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xp(){for(var e=window,t=_o();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_o(e.document)}return t}function Lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eg(e){var t=xp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vp(n.ownerDocument.documentElement,n)){if(r!==null&&Lu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Cd(n,s);var c=Cd(n,r);o&&c&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tg=En&&"documentMode"in document&&11>=document.documentMode,Vr=null,Kl=null,Ki=null,ql=!1;function jd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ql||Vr==null||Vr!==_o(r)||(r=Vr,"selectionStart"in r&&Lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ki&&ia(Ki,r)||(Ki=r,r=Bo(Kl,"onSelect"),0<r.length&&(t=new Iu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vr)))}function Ja(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ur={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},ll={},wp={};En&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function is(e){if(ll[e])return ll[e];if(!Ur[e])return e;var t=Ur[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wp)return ll[e]=t[n];return e}var bp=is("animationend"),kp=is("animationiteration"),Cp=is("animationstart"),jp=is("transitionend"),Sp=new Map,Sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(e,t){Sp.set(e,t),Er(t,[e])}for(var ul=0;ul<Sd.length;ul++){var cl=Sd[ul],ng=cl.toLowerCase(),rg=cl[0].toUpperCase()+cl.slice(1);tr(ng,"on"+rg)}tr(bp,"onAnimationEnd");tr(kp,"onAnimationIteration");tr(Cp,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(jp,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Er("onBeforeInput",["compositionend","keypress","textInput","paste"]);Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ig=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Ed(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,n0(r,t,void 0,e),e.currentTarget=null}function Ep(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var c=r.length-1;0<=c;c--){var p=r[c],m=p.instance,y=p.currentTarget;if(p=p.listener,m!==s&&o.isPropagationStopped())break e;Ed(o,p,y),s=m}else for(c=0;c<r.length;c++){if(p=r[c],m=p.instance,y=p.currentTarget,p=p.listener,m!==s&&o.isPropagationStopped())break e;Ed(o,p,y),s=m}}}if(Fo)throw e=Wl,Fo=!1,Wl=null,e}function Ke(e,t){var n=t[Zl];n===void 0&&(n=t[Zl]=new Set);var r=e+"__bubble";n.has(r)||(Np(t,e,2,!1),n.add(r))}function dl(e,t,n){var r=0;t&&(r|=4),Np(n,e,r,t)}var eo="_reactListening"+Math.random().toString(36).slice(2);function aa(e){if(!e[eo]){e[eo]=!0,Rf.forEach(function(n){n!=="selectionchange"&&(ig.has(n)||dl(n,!1,e),dl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eo]||(t[eo]=!0,dl("selectionchange",!1,t))}}function Np(e,t,n,r){switch(cp(t)){case 1:var o=v0;break;case 4:o=x0;break;default:o=Mu}n=o.bind(null,t,n,e),o=void 0,!$l||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function fl(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var p=r.stateNode.containerInfo;if(p===o||p.nodeType===8&&p.parentNode===o)break;if(c===4)for(c=r.return;c!==null;){var m=c.tag;if((m===3||m===4)&&(m=c.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;c=c.return}for(;p!==null;){if(c=gr(p),c===null)return;if(m=c.tag,m===5||m===6){r=s=c;continue e}p=p.parentNode}}r=r.return}Qf(function(){var y=s,j=Fu(n),S=[];e:{var E=Sp.get(e);if(E!==void 0){var $=Iu,Y=e;switch(e){case"keypress":if(xo(n)===0)break e;case"keydown":case"keyup":$=R0;break;case"focusin":Y="focus",$=al;break;case"focusout":Y="blur",$=al;break;case"beforeblur":case"afterblur":$=al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=k0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=I0;break;case bp:case kp:case Cp:$=S0;break;case jp:$=z0;break;case"scroll":$=w0;break;case"wheel":$=$0;break;case"copy":case"cut":case"paste":$=N0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=gd}var M=(t&4)!==0,J=!M&&e==="scroll",k=M?E!==null?E+"Capture":null:E;M=[];for(var v=y,b;v!==null;){b=v;var I=b.stateNode;if(b.tag===5&&I!==null&&(b=I,k!==null&&(I=Ji(v,k),I!=null&&M.push(oa(v,I,b)))),J)break;v=v.return}0<M.length&&(E=new $(E,Y,null,n,j),S.push({event:E,listeners:M}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",E&&n!==zl&&(Y=n.relatedTarget||n.fromElement)&&(gr(Y)||Y[Nn]))break e;if(($||E)&&(E=j.window===j?j:(E=j.ownerDocument)?E.defaultView||E.parentWindow:window,$?(Y=n.relatedTarget||n.toElement,$=y,Y=Y?gr(Y):null,Y!==null&&(J=Nr(Y),Y!==J||Y.tag!==5&&Y.tag!==6)&&(Y=null)):($=null,Y=y),$!==Y)){if(M=hd,I="onMouseLeave",k="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(M=gd,I="onPointerLeave",k="onPointerEnter",v="pointer"),J=$==null?E:Kr($),b=Y==null?E:Kr(Y),E=new M(I,v+"leave",$,n,j),E.target=J,E.relatedTarget=b,I=null,gr(j)===y&&(M=new M(k,v+"enter",Y,n,j),M.target=b,M.relatedTarget=J,I=M),J=I,$&&Y)t:{for(M=$,k=Y,v=0,b=M;b;b=Ir(b))v++;for(b=0,I=k;I;I=Ir(I))b++;for(;0<v-b;)M=Ir(M),v--;for(;0<b-v;)k=Ir(k),b--;for(;v--;){if(M===k||k!==null&&M===k.alternate)break t;M=Ir(M),k=Ir(k)}M=null}else M=null;$!==null&&Nd(S,E,$,M,!1),Y!==null&&J!==null&&Nd(S,J,Y,M,!0)}}e:{if(E=y?Kr(y):window,$=E.nodeName&&E.nodeName.toLowerCase(),$==="select"||$==="input"&&E.type==="file")var K=H0;else if(xd(E))if(gp)K=Z0;else{K=Q0;var L=Y0}else($=E.nodeName)&&$.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(K=X0);if(K&&(K=K(e,y))){mp(S,K,n,j);break e}L&&L(e,E,y),e==="focusout"&&(L=E._wrapperState)&&L.controlled&&E.type==="number"&&Rl(E,"number",E.value)}switch(L=y?Kr(y):window,e){case"focusin":(xd(L)||L.contentEditable==="true")&&(Vr=L,Kl=y,Ki=null);break;case"focusout":Ki=Kl=Vr=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,jd(S,n,j);break;case"selectionchange":if(tg)break;case"keydown":case"keyup":jd(S,n,j)}var B;if(zu)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Gr?pp(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(fp&&n.locale!=="ko"&&(Gr||V!=="onCompositionStart"?V==="onCompositionEnd"&&Gr&&(B=dp()):(Gn=j,Bu="value"in Gn?Gn.value:Gn.textContent,Gr=!0)),L=Bo(y,V),0<L.length&&(V=new md(V,e,null,n,j),S.push({event:V,listeners:L}),B?V.data=B:(B=hp(n),B!==null&&(V.data=B)))),(B=G0?V0(e,n):U0(e,n))&&(y=Bo(y,"onBeforeInput"),0<y.length&&(j=new md("onBeforeInput","beforeinput",null,n,j),S.push({event:j,listeners:y}),j.data=B))}Ep(S,t)})}function oa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ji(e,n),s!=null&&r.unshift(oa(e,s,o)),s=Ji(e,t),s!=null&&r.push(oa(e,s,o))),e=e.return}return r}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nd(e,t,n,r,o){for(var s=t._reactName,c=[];n!==null&&n!==r;){var p=n,m=p.alternate,y=p.stateNode;if(m!==null&&m===r)break;p.tag===5&&y!==null&&(p=y,o?(m=Ji(n,s),m!=null&&c.unshift(oa(n,m,p))):o||(m=Ji(n,s),m!=null&&c.push(oa(n,m,p)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var ag=/\r\n?/g,og=/\u0000|\uFFFD/g;function Td(e){return(typeof e=="string"?e:""+e).replace(ag,`
`).replace(og,"")}function to(e,t,n){if(t=Td(t),Td(e)!==t&&n)throw Error(ie(425))}function Io(){}var Hl=null,Yl=null;function Ql(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xl=typeof setTimeout=="function"?setTimeout:void 0,sg=typeof clearTimeout=="function"?clearTimeout:void 0,_d=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof _d<"u"?function(e){return _d.resolve(null).then(e).catch(ug)}:Xl;function ug(e){setTimeout(function(){throw e})}function pl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),na(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);na(t)}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ad(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mi=Math.random().toString(36).slice(2),gn="__reactFiber$"+mi,sa="__reactProps$"+mi,Nn="__reactContainer$"+mi,Zl="__reactEvents$"+mi,cg="__reactListeners$"+mi,dg="__reactHandles$"+mi;function gr(e){var t=e[gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ad(e);e!==null;){if(n=e[gn])return n;e=Ad(e)}return t}e=n,n=e.parentNode}return null}function ya(e){return e=e[gn]||e[Nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function as(e){return e[sa]||null}var Jl=[],qr=-1;function nr(e){return{current:e}}function qe(e){0>qr||(e.current=Jl[qr],Jl[qr]=null,qr--)}function Ve(e,t){qr++,Jl[qr]=e.current,e.current=t}var er={},kt=nr(er),Dt=nr(!1),br=er;function si(e,t){var n=e.type.contextTypes;if(!n)return er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pt(e){return e=e.childContextTypes,e!=null}function Oo(){qe(Dt),qe(kt)}function Fd(e,t,n){if(kt.current!==er)throw Error(ie(168));Ve(kt,t),Ve(Dt,n)}function Tp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ie(108,Ym(e)||"Unknown",o));return Je({},n,r)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,br=kt.current,Ve(kt,e),Ve(Dt,Dt.current),!0}function Dd(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=Tp(e,t,br),r.__reactInternalMemoizedMergedChildContext=e,qe(Dt),qe(kt),Ve(kt,e)):qe(Dt),Ve(Dt,n)}var kn=null,os=!1,hl=!1;function _p(e){kn===null?kn=[e]:kn.push(e)}function fg(e){os=!0,_p(e)}function rr(){if(!hl&&kn!==null){hl=!0;var e=0,t=ze;try{var n=kn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kn=null,os=!1}catch(o){throw kn!==null&&(kn=kn.slice(e+1)),ep(Du,rr),o}finally{ze=t,hl=!1}}return null}var Hr=[],Yr=0,Lo=null,$o=0,Ut=[],Kt=0,kr=null,Cn=1,jn="";function pr(e,t){Hr[Yr++]=$o,Hr[Yr++]=Lo,Lo=e,$o=t}function Ap(e,t,n){Ut[Kt++]=Cn,Ut[Kt++]=jn,Ut[Kt++]=kr,kr=e;var r=Cn;e=jn;var o=32-on(r)-1;r&=~(1<<o),n+=1;var s=32-on(t)+o;if(30<s){var c=o-o%5;s=(r&(1<<c)-1).toString(32),r>>=c,o-=c,Cn=1<<32-on(t)+o|n<<o|r,jn=s+e}else Cn=1<<s|n<<o|r,jn=e}function $u(e){e.return!==null&&(pr(e,1),Ap(e,1,0))}function Wu(e){for(;e===Lo;)Lo=Hr[--Yr],Hr[Yr]=null,$o=Hr[--Yr],Hr[Yr]=null;for(;e===kr;)kr=Ut[--Kt],Ut[Kt]=null,jn=Ut[--Kt],Ut[Kt]=null,Cn=Ut[--Kt],Ut[Kt]=null}var zt=null,Ot=null,Ye=!1,rn=null;function Fp(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Pd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,Ot=Hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kr!==null?{id:Cn,overflow:jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zt=e,Ot=null,!0):!1;default:return!1}}function eu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tu(e){if(Ye){var t=Ot;if(t){var n=t;if(!Pd(e,t)){if(eu(e))throw Error(ie(418));t=Hn(n.nextSibling);var r=zt;t&&Pd(e,t)?Fp(r,n):(e.flags=e.flags&-4097|2,Ye=!1,zt=e)}}else{if(eu(e))throw Error(ie(418));e.flags=e.flags&-4097|2,Ye=!1,zt=e}}}function Rd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function no(e){if(e!==zt)return!1;if(!Ye)return Rd(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ql(e.type,e.memoizedProps)),t&&(t=Ot)){if(eu(e))throw Dp(),Error(ie(418));for(;t;)Fp(e,t),t=Hn(t.nextSibling)}if(Rd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ot=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=zt?Hn(e.stateNode.nextSibling):null;return!0}function Dp(){for(var e=Ot;e;)e=Hn(e.nextSibling)}function li(){Ot=zt=null,Ye=!1}function Gu(e){rn===null?rn=[e]:rn.push(e)}var pg=An.ReactCurrentBatchConfig;function Pi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(c){var p=o.refs;c===null?delete p[s]:p[s]=c},t._stringRef=s,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function ro(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Md(e){var t=e._init;return t(e._payload)}function Pp(e){function t(k,v){if(e){var b=k.deletions;b===null?(k.deletions=[v],k.flags|=16):b.push(v)}}function n(k,v){if(!e)return null;for(;v!==null;)t(k,v),v=v.sibling;return null}function r(k,v){for(k=new Map;v!==null;)v.key!==null?k.set(v.key,v):k.set(v.index,v),v=v.sibling;return k}function o(k,v){return k=Zn(k,v),k.index=0,k.sibling=null,k}function s(k,v,b){return k.index=b,e?(b=k.alternate,b!==null?(b=b.index,b<v?(k.flags|=2,v):b):(k.flags|=2,v)):(k.flags|=1048576,v)}function c(k){return e&&k.alternate===null&&(k.flags|=2),k}function p(k,v,b,I){return v===null||v.tag!==6?(v=bl(b,k.mode,I),v.return=k,v):(v=o(v,b),v.return=k,v)}function m(k,v,b,I){var K=b.type;return K===Wr?j(k,v,b.props.children,I,b.key):v!==null&&(v.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===zn&&Md(K)===v.type)?(I=o(v,b.props),I.ref=Pi(k,v,b),I.return=k,I):(I=Eo(b.type,b.key,b.props,null,k.mode,I),I.ref=Pi(k,v,b),I.return=k,I)}function y(k,v,b,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=kl(b,k.mode,I),v.return=k,v):(v=o(v,b.children||[]),v.return=k,v)}function j(k,v,b,I,K){return v===null||v.tag!==7?(v=wr(b,k.mode,I,K),v.return=k,v):(v=o(v,b),v.return=k,v)}function S(k,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bl(""+v,k.mode,b),v.return=k,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ka:return b=Eo(v.type,v.key,v.props,null,k.mode,b),b.ref=Pi(k,null,v),b.return=k,b;case $r:return v=kl(v,k.mode,b),v.return=k,v;case zn:var I=v._init;return S(k,I(v._payload),b)}if(zi(v)||Ti(v))return v=wr(v,k.mode,b,null),v.return=k,v;ro(k,v)}return null}function E(k,v,b,I){var K=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return K!==null?null:p(k,v,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ka:return b.key===K?m(k,v,b,I):null;case $r:return b.key===K?y(k,v,b,I):null;case zn:return K=b._init,E(k,v,K(b._payload),I)}if(zi(b)||Ti(b))return K!==null?null:j(k,v,b,I,null);ro(k,b)}return null}function $(k,v,b,I,K){if(typeof I=="string"&&I!==""||typeof I=="number")return k=k.get(b)||null,p(v,k,""+I,K);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ka:return k=k.get(I.key===null?b:I.key)||null,m(v,k,I,K);case $r:return k=k.get(I.key===null?b:I.key)||null,y(v,k,I,K);case zn:var L=I._init;return $(k,v,b,L(I._payload),K)}if(zi(I)||Ti(I))return k=k.get(b)||null,j(v,k,I,K,null);ro(v,I)}return null}function Y(k,v,b,I){for(var K=null,L=null,B=v,V=v=0,q=null;B!==null&&V<b.length;V++){B.index>V?(q=B,B=null):q=B.sibling;var G=E(k,B,b[V],I);if(G===null){B===null&&(B=q);break}e&&B&&G.alternate===null&&t(k,B),v=s(G,v,V),L===null?K=G:L.sibling=G,L=G,B=q}if(V===b.length)return n(k,B),Ye&&pr(k,V),K;if(B===null){for(;V<b.length;V++)B=S(k,b[V],I),B!==null&&(v=s(B,v,V),L===null?K=B:L.sibling=B,L=B);return Ye&&pr(k,V),K}for(B=r(k,B);V<b.length;V++)q=$(B,k,V,b[V],I),q!==null&&(e&&q.alternate!==null&&B.delete(q.key===null?V:q.key),v=s(q,v,V),L===null?K=q:L.sibling=q,L=q);return e&&B.forEach(function(D){return t(k,D)}),Ye&&pr(k,V),K}function M(k,v,b,I){var K=Ti(b);if(typeof K!="function")throw Error(ie(150));if(b=K.call(b),b==null)throw Error(ie(151));for(var L=K=null,B=v,V=v=0,q=null,G=b.next();B!==null&&!G.done;V++,G=b.next()){B.index>V?(q=B,B=null):q=B.sibling;var D=E(k,B,G.value,I);if(D===null){B===null&&(B=q);break}e&&B&&D.alternate===null&&t(k,B),v=s(D,v,V),L===null?K=D:L.sibling=D,L=D,B=q}if(G.done)return n(k,B),Ye&&pr(k,V),K;if(B===null){for(;!G.done;V++,G=b.next())G=S(k,G.value,I),G!==null&&(v=s(G,v,V),L===null?K=G:L.sibling=G,L=G);return Ye&&pr(k,V),K}for(B=r(k,B);!G.done;V++,G=b.next())G=$(B,k,V,G.value,I),G!==null&&(e&&G.alternate!==null&&B.delete(G.key===null?V:G.key),v=s(G,v,V),L===null?K=G:L.sibling=G,L=G);return e&&B.forEach(function(Z){return t(k,Z)}),Ye&&pr(k,V),K}function J(k,v,b,I){if(typeof b=="object"&&b!==null&&b.type===Wr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ka:e:{for(var K=b.key,L=v;L!==null;){if(L.key===K){if(K=b.type,K===Wr){if(L.tag===7){n(k,L.sibling),v=o(L,b.props.children),v.return=k,k=v;break e}}else if(L.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===zn&&Md(K)===L.type){n(k,L.sibling),v=o(L,b.props),v.ref=Pi(k,L,b),v.return=k,k=v;break e}n(k,L);break}else t(k,L);L=L.sibling}b.type===Wr?(v=wr(b.props.children,k.mode,I,b.key),v.return=k,k=v):(I=Eo(b.type,b.key,b.props,null,k.mode,I),I.ref=Pi(k,v,b),I.return=k,k=I)}return c(k);case $r:e:{for(L=b.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(k,v.sibling),v=o(v,b.children||[]),v.return=k,k=v;break e}else{n(k,v);break}else t(k,v);v=v.sibling}v=kl(b,k.mode,I),v.return=k,k=v}return c(k);case zn:return L=b._init,J(k,v,L(b._payload),I)}if(zi(b))return Y(k,v,b,I);if(Ti(b))return M(k,v,b,I);ro(k,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(k,v.sibling),v=o(v,b),v.return=k,k=v):(n(k,v),v=bl(b,k.mode,I),v.return=k,k=v),c(k)):n(k,v)}return J}var ui=Pp(!0),Rp=Pp(!1),Wo=nr(null),Go=null,Qr=null,Vu=null;function Uu(){Vu=Qr=Go=null}function Ku(e){var t=Wo.current;qe(Wo),e._currentValue=t}function nu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ri(e,t){Go=e,Vu=Qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ft=!0),e.firstContext=null)}function Qt(e){var t=e._currentValue;if(Vu!==e)if(e={context:e,memoizedValue:t,next:null},Qr===null){if(Go===null)throw Error(ie(308));Qr=e,Go.dependencies={lanes:0,firstContext:e}}else Qr=Qr.next=e;return t}var yr=null;function qu(e){yr===null?yr=[e]:yr.push(e)}function Mp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,qu(t)):(n.next=o.next,o.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ln=!1;function Hu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Tn(e,n)}return o=r.interleaved,o===null?(t.next=t,qu(r)):(t.next=o.next,o.next=t),r.interleaved=t,Tn(e,n)}function wo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pu(e,n)}}function Bd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=c:s=s.next=c,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var o=e.updateQueue;Ln=!1;var s=o.firstBaseUpdate,c=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var m=p,y=m.next;m.next=null,c===null?s=y:c.next=y,c=m;var j=e.alternate;j!==null&&(j=j.updateQueue,p=j.lastBaseUpdate,p!==c&&(p===null?j.firstBaseUpdate=y:p.next=y,j.lastBaseUpdate=m))}if(s!==null){var S=o.baseState;c=0,j=y=m=null,p=s;do{var E=p.lane,$=p.eventTime;if((r&E)===E){j!==null&&(j=j.next={eventTime:$,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var Y=e,M=p;switch(E=t,$=n,M.tag){case 1:if(Y=M.payload,typeof Y=="function"){S=Y.call($,S,E);break e}S=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=M.payload,E=typeof Y=="function"?Y.call($,S,E):Y,E==null)break e;S=Je({},S,E);break e;case 2:Ln=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,E=o.effects,E===null?o.effects=[p]:E.push(p))}else $={eventTime:$,lane:E,tag:p.tag,payload:p.payload,callback:p.callback,next:null},j===null?(y=j=$,m=S):j=j.next=$,c|=E;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;E=p,p=E.next,E.next=null,o.lastBaseUpdate=E,o.shared.pending=null}}while(!0);if(j===null&&(m=S),o.baseState=m,o.firstBaseUpdate=y,o.lastBaseUpdate=j,t=o.shared.interleaved,t!==null){o=t;do c|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);jr|=c,e.lanes=c,e.memoizedState=S}}function Id(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ie(191,o));o.call(r)}}}var va={},vn=nr(va),la=nr(va),ua=nr(va);function vr(e){if(e===va)throw Error(ie(174));return e}function Yu(e,t){switch(Ve(ua,t),Ve(la,e),Ve(vn,va),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bl(t,e)}qe(vn),Ve(vn,t)}function ci(){qe(vn),qe(la),qe(ua)}function Ip(e){vr(ua.current);var t=vr(vn.current),n=Bl(t,e.type);t!==n&&(Ve(la,e),Ve(vn,n))}function Qu(e){la.current===e&&(qe(vn),qe(la))}var Xe=nr(0);function Uo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ml=[];function Xu(){for(var e=0;e<ml.length;e++)ml[e]._workInProgressVersionPrimary=null;ml.length=0}var bo=An.ReactCurrentDispatcher,gl=An.ReactCurrentBatchConfig,Cr=0,Ze=null,st=null,dt=null,Ko=!1,qi=!1,ca=0,hg=0;function xt(){throw Error(ie(321))}function Zu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ln(e[n],t[n]))return!1;return!0}function Ju(e,t,n,r,o,s){if(Cr=s,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bo.current=e===null||e.memoizedState===null?vg:xg,e=n(r,o),qi){s=0;do{if(qi=!1,ca=0,25<=s)throw Error(ie(301));s+=1,dt=st=null,t.updateQueue=null,bo.current=wg,e=n(r,o)}while(qi)}if(bo.current=qo,t=st!==null&&st.next!==null,Cr=0,dt=st=Ze=null,Ko=!1,t)throw Error(ie(300));return e}function ec(){var e=ca!==0;return ca=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ze.memoizedState=dt=e:dt=dt.next=e,dt}function Xt(){if(st===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=dt===null?Ze.memoizedState:dt.next;if(t!==null)dt=t,st=e;else{if(e===null)throw Error(ie(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dt===null?Ze.memoizedState=dt=e:dt=dt.next=e}return dt}function da(e,t){return typeof t=="function"?t(e):t}function yl(e){var t=Xt(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=st,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var c=o.next;o.next=s.next,s.next=c}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var p=c=null,m=null,y=s;do{var j=y.lane;if((Cr&j)===j)m!==null&&(m=m.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var S={lane:j,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};m===null?(p=m=S,c=r):m=m.next=S,Ze.lanes|=j,jr|=j}y=y.next}while(y!==null&&y!==s);m===null?c=r:m.next=p,ln(r,t.memoizedState)||(Ft=!0),t.memoizedState=r,t.baseState=c,t.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ze.lanes|=s,jr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vl(e){var t=Xt(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do s=e(s,c.action),c=c.next;while(c!==o);ln(s,t.memoizedState)||(Ft=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Op(){}function zp(e,t){var n=Ze,r=Xt(),o=t(),s=!ln(r.memoizedState,o);if(s&&(r.memoizedState=o,Ft=!0),r=r.queue,tc(Wp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,fa(9,$p.bind(null,n,r,o,t),void 0,null),ft===null)throw Error(ie(349));Cr&30||Lp(n,t,o)}return o}function Lp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $p(e,t,n,r){t.value=n,t.getSnapshot=r,Gp(t)&&Vp(e)}function Wp(e,t,n){return n(function(){Gp(t)&&Vp(e)})}function Gp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ln(e,n)}catch{return!0}}function Vp(e){var t=Tn(e,1);t!==null&&sn(t,e,1,-1)}function Od(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t.queue=e,e=e.dispatch=yg.bind(null,Ze,e),[t.memoizedState,e]}function fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Up(){return Xt().memoizedState}function ko(e,t,n,r){var o=mn();Ze.flags|=e,o.memoizedState=fa(1|t,n,void 0,r===void 0?null:r)}function ss(e,t,n,r){var o=Xt();r=r===void 0?null:r;var s=void 0;if(st!==null){var c=st.memoizedState;if(s=c.destroy,r!==null&&Zu(r,c.deps)){o.memoizedState=fa(t,n,s,r);return}}Ze.flags|=e,o.memoizedState=fa(1|t,n,s,r)}function zd(e,t){return ko(8390656,8,e,t)}function tc(e,t){return ss(2048,8,e,t)}function Kp(e,t){return ss(4,2,e,t)}function qp(e,t){return ss(4,4,e,t)}function Hp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yp(e,t,n){return n=n!=null?n.concat([e]):null,ss(4,4,Hp.bind(null,t,e),n)}function nc(){}function Qp(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xp(e,t){var n=Xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zp(e,t,n){return Cr&21?(ln(n,t)||(n=rp(),Ze.lanes|=n,jr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ft=!0),e.memoizedState=n)}function mg(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=gl.transition;gl.transition={};try{e(!1),t()}finally{ze=n,gl.transition=r}}function Jp(){return Xt().memoizedState}function gg(e,t,n){var r=Xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eh(e))th(t,n);else if(n=Mp(e,t,n,r),n!==null){var o=St();sn(n,e,r,o),nh(n,t,r)}}function yg(e,t,n){var r=Xn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eh(e))th(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var c=t.lastRenderedState,p=s(c,n);if(o.hasEagerState=!0,o.eagerState=p,ln(p,c)){var m=t.interleaved;m===null?(o.next=o,qu(t)):(o.next=m.next,m.next=o),t.interleaved=o;return}}catch{}finally{}n=Mp(e,t,o,r),n!==null&&(o=St(),sn(n,e,r,o),nh(n,t,r))}}function eh(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function th(e,t){qi=Ko=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pu(e,n)}}var qo={readContext:Qt,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},vg={readContext:Qt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:zd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ko(4194308,4,Hp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gg.bind(null,Ze,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Od,useDebugValue:nc,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Od(!1),t=e[0];return e=mg.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ze,o=mn();if(Ye){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),ft===null)throw Error(ie(349));Cr&30||Lp(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,zd(Wp.bind(null,r,s,e),[e]),r.flags|=2048,fa(9,$p.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=mn(),t=ft.identifierPrefix;if(Ye){var n=jn,r=Cn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ca++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xg={readContext:Qt,useCallback:Qp,useContext:Qt,useEffect:tc,useImperativeHandle:Yp,useInsertionEffect:Kp,useLayoutEffect:qp,useMemo:Xp,useReducer:yl,useRef:Up,useState:function(){return yl(da)},useDebugValue:nc,useDeferredValue:function(e){var t=Xt();return Zp(t,st.memoizedState,e)},useTransition:function(){var e=yl(da)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Op,useSyncExternalStore:zp,useId:Jp,unstable_isNewReconciler:!1},wg={readContext:Qt,useCallback:Qp,useContext:Qt,useEffect:tc,useImperativeHandle:Yp,useInsertionEffect:Kp,useLayoutEffect:qp,useMemo:Xp,useReducer:vl,useRef:Up,useState:function(){return vl(da)},useDebugValue:nc,useDeferredValue:function(e){var t=Xt();return st===null?t.memoizedState=e:Zp(t,st.memoizedState,e)},useTransition:function(){var e=vl(da)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Op,useSyncExternalStore:zp,useId:Jp,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=Je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ru(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ls={isMounted:function(e){return(e=e._reactInternals)?Nr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),o=Xn(e),s=Sn(r,o);s.payload=t,n!=null&&(s.callback=n),t=Yn(e,s,o),t!==null&&(sn(t,e,o,r),wo(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),o=Xn(e),s=Sn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Yn(e,s,o),t!==null&&(sn(t,e,o,r),wo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=Xn(e),o=Sn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Yn(e,o,r),t!==null&&(sn(t,e,r,n),wo(t,e,r))}};function Ld(e,t,n,r,o,s,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,c):t.prototype&&t.prototype.isPureReactComponent?!ia(n,r)||!ia(o,s):!0}function rh(e,t,n){var r=!1,o=er,s=t.contextType;return typeof s=="object"&&s!==null?s=Qt(s):(o=Pt(t)?br:kt.current,r=t.contextTypes,s=(r=r!=null)?si(e,o):er),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ls,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function $d(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ls.enqueueReplaceState(t,t.state,null)}function iu(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Hu(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Qt(s):(s=Pt(t)?br:kt.current,o.context=si(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ru(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ls.enqueueReplaceState(o,o.state,null),Vo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function di(e,t){try{var n="",r=t;do n+=Hm(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function xl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function au(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bg=typeof WeakMap=="function"?WeakMap:Map;function ih(e,t,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yo||(Yo=!0,mu=r),au(e,t)},n}function ah(e,t,n){n=Sn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){au(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){au(e,t),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function Wd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bg;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Mg.bind(null,e,t,n),t.then(e,e))}function Gd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Sn(-1,1),t.tag=2,Yn(n,t,1))),n.lanes|=1),e)}var kg=An.ReactCurrentOwner,Ft=!1;function jt(e,t,n,r){t.child=e===null?Rp(t,null,n,r):ui(t,e.child,n,r)}function Ud(e,t,n,r,o){n=n.render;var s=t.ref;return ri(t,o),r=Ju(e,t,n,r,s,o),n=ec(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(Ye&&n&&$u(t),t.flags|=1,jt(e,t,r,o),t.child)}function Kd(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!cc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,oh(e,t,s,r,o)):(e=Eo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var c=s.memoizedProps;if(n=n.compare,n=n!==null?n:ia,n(c,r)&&e.ref===t.ref)return _n(e,t,o)}return t.flags|=1,e=Zn(s,r),e.ref=t.ref,e.return=t,t.child=e}function oh(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(ia(s,r)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Ft=!0);else return t.lanes=e.lanes,_n(e,t,o)}return ou(e,t,n,r,o)}function sh(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Zr,It),It|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(Zr,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(Zr,It),It|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ve(Zr,It),It|=r;return jt(e,t,o,n),t.child}function lh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ou(e,t,n,r,o){var s=Pt(n)?br:kt.current;return s=si(t,s),ri(t,o),n=Ju(e,t,n,r,s,o),r=ec(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(Ye&&r&&$u(t),t.flags|=1,jt(e,t,n,o),t.child)}function qd(e,t,n,r,o){if(Pt(n)){var s=!0;zo(t)}else s=!1;if(ri(t,o),t.stateNode===null)Co(e,t),rh(t,n,r),iu(t,n,r,o),r=!0;else if(e===null){var c=t.stateNode,p=t.memoizedProps;c.props=p;var m=c.context,y=n.contextType;typeof y=="object"&&y!==null?y=Qt(y):(y=Pt(n)?br:kt.current,y=si(t,y));var j=n.getDerivedStateFromProps,S=typeof j=="function"||typeof c.getSnapshotBeforeUpdate=="function";S||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==r||m!==y)&&$d(t,c,r,y),Ln=!1;var E=t.memoizedState;c.state=E,Vo(t,r,c,o),m=t.memoizedState,p!==r||E!==m||Dt.current||Ln?(typeof j=="function"&&(ru(t,n,j,r),m=t.memoizedState),(p=Ln||Ld(t,n,p,r,E,m,y))?(S||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=m),c.props=r,c.state=m,c.context=y,r=p):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,Bp(e,t),p=t.memoizedProps,y=t.type===t.elementType?p:tn(t.type,p),c.props=y,S=t.pendingProps,E=c.context,m=n.contextType,typeof m=="object"&&m!==null?m=Qt(m):(m=Pt(n)?br:kt.current,m=si(t,m));var $=n.getDerivedStateFromProps;(j=typeof $=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==S||E!==m)&&$d(t,c,r,m),Ln=!1,E=t.memoizedState,c.state=E,Vo(t,r,c,o);var Y=t.memoizedState;p!==S||E!==Y||Dt.current||Ln?(typeof $=="function"&&(ru(t,n,$,r),Y=t.memoizedState),(y=Ln||Ld(t,n,y,r,E,Y,m)||!1)?(j||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,Y,m),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,Y,m)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=Y),c.props=r,c.state=Y,c.context=m,r=y):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return su(e,t,n,r,s,o)}function su(e,t,n,r,o,s){lh(e,t);var c=(t.flags&128)!==0;if(!r&&!c)return o&&Dd(t,n,!1),_n(e,t,s);r=t.stateNode,kg.current=t;var p=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&c?(t.child=ui(t,e.child,null,s),t.child=ui(t,null,p,s)):jt(e,t,p,s),t.memoizedState=r.state,o&&Dd(t,n,!0),t.child}function uh(e){var t=e.stateNode;t.pendingContext?Fd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fd(e,t.context,!1),Yu(e,t.containerInfo)}function Hd(e,t,n,r,o){return li(),Gu(o),t.flags|=256,jt(e,t,n,r),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ch(e,t,n){var r=t.pendingProps,o=Xe.current,s=!1,c=(t.flags&128)!==0,p;if((p=c)||(p=e!==null&&e.memoizedState===null?!1:(o&2)!==0),p?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ve(Xe,o&1),e===null)return tu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=r.children,e=r.fallback,s?(r=t.mode,s=t.child,c={mode:"hidden",children:c},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=c):s=ds(c,r,0,null),e=wr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=uu(n),t.memoizedState=lu,e):rc(t,c));if(o=e.memoizedState,o!==null&&(p=o.dehydrated,p!==null))return Cg(e,t,c,r,p,o,n);if(s){s=r.fallback,c=t.mode,o=e.child,p=o.sibling;var m={mode:"hidden",children:r.children};return!(c&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=m,t.deletions=null):(r=Zn(o,m),r.subtreeFlags=o.subtreeFlags&14680064),p!==null?s=Zn(p,s):(s=wr(s,c,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,c=e.child.memoizedState,c=c===null?uu(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=lu,r}return s=e.child,e=s.sibling,r=Zn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rc(e,t){return t=ds({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function io(e,t,n,r){return r!==null&&Gu(r),ui(t,e.child,null,n),e=rc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cg(e,t,n,r,o,s,c){if(n)return t.flags&256?(t.flags&=-257,r=xl(Error(ie(422))),io(e,t,c,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ds({mode:"visible",children:r.children},o,0,null),s=wr(s,o,c,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ui(t,e.child,null,c),t.child.memoizedState=uu(c),t.memoizedState=lu,s);if(!(t.mode&1))return io(e,t,c,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var p=r.dgst;return r=p,s=Error(ie(419)),r=xl(s,r,void 0),io(e,t,c,r)}if(p=(c&e.childLanes)!==0,Ft||p){if(r=ft,r!==null){switch(c&-c){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|c)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Tn(e,o),sn(r,e,o,-1))}return uc(),r=xl(Error(ie(421))),io(e,t,c,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Bg.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,Ot=Hn(o.nextSibling),zt=t,Ye=!0,rn=null,e!==null&&(Ut[Kt++]=Cn,Ut[Kt++]=jn,Ut[Kt++]=kr,Cn=e.id,jn=e.overflow,kr=t),t=rc(t,r.children),t.flags|=4096,t)}function Yd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nu(e.return,t,n)}function wl(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function dh(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(jt(e,t,r.children,n),r=Xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yd(e,n,t);else if(e.tag===19)Yd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ve(Xe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Uo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),wl(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Uo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}wl(t,!0,n,null,s);break;case"together":wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Co(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _n(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=Zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jg(e,t,n){switch(t.tag){case 3:uh(t),li();break;case 5:Ip(t);break;case 1:Pt(t.type)&&zo(t);break;case 4:Yu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ve(Wo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Xe,Xe.current&1),t.flags|=128,null):n&t.child.childLanes?ch(e,t,n):(Ve(Xe,Xe.current&1),e=_n(e,t,n),e!==null?e.sibling:null);Ve(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dh(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ve(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,sh(e,t,n)}return _n(e,t,n)}var fh,cu,ph,hh;fh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cu=function(){};ph=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,vr(vn.current);var s=null;switch(n){case"input":o=Dl(e,o),r=Dl(e,r),s=[];break;case"select":o=Je({},o,{value:void 0}),r=Je({},r,{value:void 0}),s=[];break;case"textarea":o=Ml(e,o),r=Ml(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Io)}Il(n,r);var c;n=null;for(y in o)if(!r.hasOwnProperty(y)&&o.hasOwnProperty(y)&&o[y]!=null)if(y==="style"){var p=o[y];for(c in p)p.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Xi.hasOwnProperty(y)?s||(s=[]):(s=s||[]).push(y,null));for(y in r){var m=r[y];if(p=o!=null?o[y]:void 0,r.hasOwnProperty(y)&&m!==p&&(m!=null||p!=null))if(y==="style")if(p){for(c in p)!p.hasOwnProperty(c)||m&&m.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in m)m.hasOwnProperty(c)&&p[c]!==m[c]&&(n||(n={}),n[c]=m[c])}else n||(s||(s=[]),s.push(y,n)),n=m;else y==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,p=p?p.__html:void 0,m!=null&&p!==m&&(s=s||[]).push(y,m)):y==="children"?typeof m!="string"&&typeof m!="number"||(s=s||[]).push(y,""+m):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Xi.hasOwnProperty(y)?(m!=null&&y==="onScroll"&&Ke("scroll",e),s||p===m||(s=[])):(s=s||[]).push(y,m))}n&&(s=s||[]).push("style",n);var y=s;(t.updateQueue=y)&&(t.flags|=4)}};hh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ri(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Sg(e,t,n){var r=t.pendingProps;switch(Wu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Pt(t.type)&&Oo(),wt(t),null;case 3:return r=t.stateNode,ci(),qe(Dt),qe(kt),Xu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(no(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rn!==null&&(vu(rn),rn=null))),cu(e,t),wt(t),null;case 5:Qu(t);var o=vr(ua.current);if(n=t.type,e!==null&&t.stateNode!=null)ph(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return wt(t),null}if(e=vr(vn.current),no(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[gn]=t,r[sa]=s,e=(t.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(o=0;o<$i.length;o++)Ke($i[o],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":id(r,s),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",r);break;case"textarea":od(r,s),Ke("invalid",r)}Il(n,s),o=null;for(var c in s)if(s.hasOwnProperty(c)){var p=s[c];c==="children"?typeof p=="string"?r.textContent!==p&&(s.suppressHydrationWarning!==!0&&to(r.textContent,p,e),o=["children",p]):typeof p=="number"&&r.textContent!==""+p&&(s.suppressHydrationWarning!==!0&&to(r.textContent,p,e),o=["children",""+p]):Xi.hasOwnProperty(c)&&p!=null&&c==="onScroll"&&Ke("scroll",r)}switch(n){case"input":qa(r),ad(r,s,!0);break;case"textarea":qa(r),sd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Io)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{c=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),n==="select"&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[gn]=t,e[sa]=r,fh(e,t,!1,!1),t.stateNode=e;e:{switch(c=Ol(n,r),n){case"dialog":Ke("cancel",e),Ke("close",e),o=r;break;case"iframe":case"object":case"embed":Ke("load",e),o=r;break;case"video":case"audio":for(o=0;o<$i.length;o++)Ke($i[o],e);o=r;break;case"source":Ke("error",e),o=r;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),o=r;break;case"details":Ke("toggle",e),o=r;break;case"input":id(e,r),o=Dl(e,r),Ke("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Je({},r,{value:void 0}),Ke("invalid",e);break;case"textarea":od(e,r),o=Ml(e,r),Ke("invalid",e);break;default:o=r}Il(n,o),p=o;for(s in p)if(p.hasOwnProperty(s)){var m=p[s];s==="style"?Uf(e,m):s==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Gf(e,m)):s==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&Zi(e,m):typeof m=="number"&&Zi(e,""+m):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xi.hasOwnProperty(s)?m!=null&&s==="onScroll"&&Ke("scroll",e):m!=null&&Nu(e,s,m,c))}switch(n){case"input":qa(e),ad(e,r,!1);break;case"textarea":qa(e),sd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Jr(e,!!r.multiple,s,!1):r.defaultValue!=null&&Jr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)hh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));if(n=vr(ua.current),vr(vn.current),no(t)){if(r=t.stateNode,n=t.memoizedProps,r[gn]=t,(s=r.nodeValue!==n)&&(e=zt,e!==null))switch(e.tag){case 3:to(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&to(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=t,t.stateNode=r}return wt(t),null;case 13:if(qe(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&Ot!==null&&t.mode&1&&!(t.flags&128))Dp(),li(),t.flags|=98560,s=!1;else if(s=no(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ie(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[gn]=t}else li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wt(t),s=!1}else rn!==null&&(vu(rn),rn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?lt===0&&(lt=3):uc())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return ci(),cu(e,t),e===null&&aa(t.stateNode.containerInfo),wt(t),null;case 10:return Ku(t.type._context),wt(t),null;case 17:return Pt(t.type)&&Oo(),wt(t),null;case 19:if(qe(Xe),s=t.memoizedState,s===null)return wt(t),null;if(r=(t.flags&128)!==0,c=s.rendering,c===null)if(r)Ri(s,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Uo(e),c!==null){for(t.flags|=128,Ri(s,!1),r=c.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,c=s.alternate,c===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ve(Xe,Xe.current&1|2),t.child}e=e.sibling}s.tail!==null&&at()>fi&&(t.flags|=128,r=!0,Ri(s,!1),t.lanes=4194304)}else{if(!r)if(e=Uo(c),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ri(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!Ye)return wt(t),null}else 2*at()-s.renderingStartTime>fi&&n!==1073741824&&(t.flags|=128,r=!0,Ri(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(n=s.last,n!==null?n.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=at(),t.sibling=null,n=Xe.current,Ve(Xe,r?n&1|2:n&1),t):(wt(t),null);case 22:case 23:return lc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?It&1073741824&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function Eg(e,t){switch(Wu(t),t.tag){case 1:return Pt(t.type)&&Oo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ci(),qe(Dt),qe(kt),Xu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qu(t),null;case 13:if(qe(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Xe),null;case 4:return ci(),null;case 10:return Ku(t.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var ao=!1,bt=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Xr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function du(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Qd=!1;function Tg(e,t){if(Hl=Ro,e=xp(),Lu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var c=0,p=-1,m=-1,y=0,j=0,S=e,E=null;t:for(;;){for(var $;S!==n||o!==0&&S.nodeType!==3||(p=c+o),S!==s||r!==0&&S.nodeType!==3||(m=c+r),S.nodeType===3&&(c+=S.nodeValue.length),($=S.firstChild)!==null;)E=S,S=$;for(;;){if(S===e)break t;if(E===n&&++y===o&&(p=c),E===s&&++j===r&&(m=c),($=S.nextSibling)!==null)break;S=E,E=S.parentNode}S=$}n=p===-1||m===-1?null:{start:p,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yl={focusedElem:e,selectionRange:n},Ro=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var Y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var M=Y.memoizedProps,J=Y.memoizedState,k=t.stateNode,v=k.getSnapshotBeforeUpdate(t.elementType===t.type?M:tn(t.type,M),J);k.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(I){tt(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return Y=Qd,Qd=!1,Y}function Hi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&du(t,n,s)}o=o.next}while(o!==r)}}function us(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mh(e){var t=e.alternate;t!==null&&(e.alternate=null,mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gn],delete t[sa],delete t[Zl],delete t[cg],delete t[dg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gh(e){return e.tag===5||e.tag===3||e.tag===4}function Xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Io));else if(r!==4&&(e=e.child,e!==null))for(pu(e,t,n),e=e.sibling;e!==null;)pu(e,t,n),e=e.sibling}function hu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hu(e,t,n),e=e.sibling;e!==null;)hu(e,t,n),e=e.sibling}var ht=null,nn=!1;function On(e,t,n){for(n=n.child;n!==null;)yh(e,t,n),n=n.sibling}function yh(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ts,n)}catch{}switch(n.tag){case 5:bt||Xr(n,t);case 6:var r=ht,o=nn;ht=null,On(e,t,n),ht=r,nn=o,ht!==null&&(nn?(e=ht,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(nn?(e=ht,n=n.stateNode,e.nodeType===8?pl(e.parentNode,n):e.nodeType===1&&pl(e,n),na(e)):pl(ht,n.stateNode));break;case 4:r=ht,o=nn,ht=n.stateNode.containerInfo,nn=!0,On(e,t,n),ht=r,nn=o;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,c=s.destroy;s=s.tag,c!==void 0&&(s&2||s&4)&&du(n,t,c),o=o.next}while(o!==r)}On(e,t,n);break;case 1:if(!bt&&(Xr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(p){tt(n,t,p)}On(e,t,n);break;case 21:On(e,t,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,On(e,t,n),bt=r):On(e,t,n);break;default:On(e,t,n)}}function Zd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ng),t.forEach(function(r){var o=Ig.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function en(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,c=t,p=c;e:for(;p!==null;){switch(p.tag){case 5:ht=p.stateNode,nn=!1;break e;case 3:ht=p.stateNode.containerInfo,nn=!0;break e;case 4:ht=p.stateNode.containerInfo,nn=!0;break e}p=p.return}if(ht===null)throw Error(ie(160));yh(s,c,o),ht=null,nn=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(y){tt(o,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vh(t,e),t=t.sibling}function vh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(en(t,e),pn(e),r&4){try{Hi(3,e,e.return),us(3,e)}catch(M){tt(e,e.return,M)}try{Hi(5,e,e.return)}catch(M){tt(e,e.return,M)}}break;case 1:en(t,e),pn(e),r&512&&n!==null&&Xr(n,n.return);break;case 5:if(en(t,e),pn(e),r&512&&n!==null&&Xr(n,n.return),e.flags&32){var o=e.stateNode;try{Zi(o,"")}catch(M){tt(e,e.return,M)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,c=n!==null?n.memoizedProps:s,p=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{p==="input"&&s.type==="radio"&&s.name!=null&&Lf(o,s),Ol(p,c);var y=Ol(p,s);for(c=0;c<m.length;c+=2){var j=m[c],S=m[c+1];j==="style"?Uf(o,S):j==="dangerouslySetInnerHTML"?Gf(o,S):j==="children"?Zi(o,S):Nu(o,j,S,y)}switch(p){case"input":Pl(o,s);break;case"textarea":$f(o,s);break;case"select":var E=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var $=s.value;$!=null?Jr(o,!!s.multiple,$,!1):E!==!!s.multiple&&(s.defaultValue!=null?Jr(o,!!s.multiple,s.defaultValue,!0):Jr(o,!!s.multiple,s.multiple?[]:"",!1))}o[sa]=s}catch(M){tt(e,e.return,M)}}break;case 6:if(en(t,e),pn(e),r&4){if(e.stateNode===null)throw Error(ie(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(M){tt(e,e.return,M)}}break;case 3:if(en(t,e),pn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{na(t.containerInfo)}catch(M){tt(e,e.return,M)}break;case 4:en(t,e),pn(e);break;case 13:en(t,e),pn(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(oc=at())),r&4&&Zd(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(y=bt)||j,en(t,e),bt=y):en(t,e),pn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!j&&e.mode&1)for(ve=e,j=e.child;j!==null;){for(S=ve=j;ve!==null;){switch(E=ve,$=E.child,E.tag){case 0:case 11:case 14:case 15:Hi(4,E,E.return);break;case 1:Xr(E,E.return);var Y=E.stateNode;if(typeof Y.componentWillUnmount=="function"){r=E,n=E.return;try{t=r,Y.props=t.memoizedProps,Y.state=t.memoizedState,Y.componentWillUnmount()}catch(M){tt(r,n,M)}}break;case 5:Xr(E,E.return);break;case 22:if(E.memoizedState!==null){ef(S);continue}}$!==null?($.return=E,ve=$):ef(S)}j=j.sibling}e:for(j=null,S=e;;){if(S.tag===5){if(j===null){j=S;try{o=S.stateNode,y?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(p=S.stateNode,m=S.memoizedProps.style,c=m!=null&&m.hasOwnProperty("display")?m.display:null,p.style.display=Vf("display",c))}catch(M){tt(e,e.return,M)}}}else if(S.tag===6){if(j===null)try{S.stateNode.nodeValue=y?"":S.memoizedProps}catch(M){tt(e,e.return,M)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;j===S&&(j=null),S=S.return}j===S&&(j=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:en(t,e),pn(e),r&4&&Zd(e);break;case 21:break;default:en(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gh(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Zi(o,""),r.flags&=-33);var s=Xd(e);hu(e,s,o);break;case 3:case 4:var c=r.stateNode.containerInfo,p=Xd(e);pu(e,p,c);break;default:throw Error(ie(161))}}catch(m){tt(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _g(e,t,n){ve=e,xh(e)}function xh(e,t,n){for(var r=(e.mode&1)!==0;ve!==null;){var o=ve,s=o.child;if(o.tag===22&&r){var c=o.memoizedState!==null||ao;if(!c){var p=o.alternate,m=p!==null&&p.memoizedState!==null||bt;p=ao;var y=bt;if(ao=c,(bt=m)&&!y)for(ve=o;ve!==null;)c=ve,m=c.child,c.tag===22&&c.memoizedState!==null?tf(o):m!==null?(m.return=c,ve=m):tf(o);for(;s!==null;)ve=s,xh(s),s=s.sibling;ve=o,ao=p,bt=y}Jd(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ve=s):Jd(e)}}function Jd(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||us(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!bt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:tn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Id(t,s,r);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Id(t,c,n)}break;case 5:var p=t.stateNode;if(n===null&&t.flags&4){n=p;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var j=y.memoizedState;if(j!==null){var S=j.dehydrated;S!==null&&na(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}bt||t.flags&512&&fu(t)}catch(E){tt(t,t.return,E)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function ef(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function tf(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{us(4,t)}catch(m){tt(t,n,m)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(m){tt(t,o,m)}}var s=t.return;try{fu(t)}catch(m){tt(t,s,m)}break;case 5:var c=t.return;try{fu(t)}catch(m){tt(t,c,m)}}}catch(m){tt(t,t.return,m)}if(t===e){ve=null;break}var p=t.sibling;if(p!==null){p.return=t.return,ve=p;break}ve=t.return}}var Ag=Math.ceil,Ho=An.ReactCurrentDispatcher,ic=An.ReactCurrentOwner,Ht=An.ReactCurrentBatchConfig,Me=0,ft=null,ot=null,gt=0,It=0,Zr=nr(0),lt=0,pa=null,jr=0,cs=0,ac=0,Yi=null,At=null,oc=0,fi=1/0,bn=null,Yo=!1,mu=null,Qn=null,oo=!1,Vn=null,Qo=0,Qi=0,gu=null,jo=-1,So=0;function St(){return Me&6?at():jo!==-1?jo:jo=at()}function Xn(e){return e.mode&1?Me&2&&gt!==0?gt&-gt:pg.transition!==null?(So===0&&(So=rp()),So):(e=ze,e!==0||(e=window.event,e=e===void 0?16:cp(e.type)),e):1}function sn(e,t,n,r){if(50<Qi)throw Qi=0,gu=null,Error(ie(185));ma(e,n,r),(!(Me&2)||e!==ft)&&(e===ft&&(!(Me&2)&&(cs|=n),lt===4&&Wn(e,gt)),Rt(e,r),n===1&&Me===0&&!(t.mode&1)&&(fi=at()+500,os&&rr()))}function Rt(e,t){var n=e.callbackNode;p0(e,t);var r=Po(e,e===ft?gt:0);if(r===0)n!==null&&cd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cd(n),t===1)e.tag===0?fg(nf.bind(null,e)):_p(nf.bind(null,e)),lg(function(){!(Me&6)&&rr()}),n=null;else{switch(ip(r)){case 1:n=Du;break;case 4:n=tp;break;case 16:n=Do;break;case 536870912:n=np;break;default:n=Do}n=Nh(n,wh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wh(e,t){if(jo=-1,So=0,Me&6)throw Error(ie(327));var n=e.callbackNode;if(ii()&&e.callbackNode!==n)return null;var r=Po(e,e===ft?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xo(e,r);else{t=r;var o=Me;Me|=2;var s=kh();(ft!==e||gt!==t)&&(bn=null,fi=at()+500,xr(e,t));do try{Pg();break}catch(p){bh(e,p)}while(!0);Uu(),Ho.current=s,Me=o,ot!==null?t=0:(ft=null,gt=0,t=lt)}if(t!==0){if(t===2&&(o=Gl(e),o!==0&&(r=o,t=yu(e,o))),t===1)throw n=pa,xr(e,0),Wn(e,r),Rt(e,at()),n;if(t===6)Wn(e,r);else{if(o=e.current.alternate,!(r&30)&&!Fg(o)&&(t=Xo(e,r),t===2&&(s=Gl(e),s!==0&&(r=s,t=yu(e,s))),t===1))throw n=pa,xr(e,0),Wn(e,r),Rt(e,at()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:hr(e,At,bn);break;case 3:if(Wn(e,r),(r&130023424)===r&&(t=oc+500-at(),10<t)){if(Po(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Xl(hr.bind(null,e,At,bn),t);break}hr(e,At,bn);break;case 4:if(Wn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var c=31-on(r);s=1<<c,c=t[c],c>o&&(o=c),r&=~s}if(r=o,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ag(r/1960))-r,10<r){e.timeoutHandle=Xl(hr.bind(null,e,At,bn),r);break}hr(e,At,bn);break;case 5:hr(e,At,bn);break;default:throw Error(ie(329))}}}return Rt(e,at()),e.callbackNode===n?wh.bind(null,e):null}function yu(e,t){var n=Yi;return e.current.memoizedState.isDehydrated&&(xr(e,t).flags|=256),e=Xo(e,t),e!==2&&(t=At,At=n,t!==null&&vu(t)),e}function vu(e){At===null?At=e:At.push.apply(At,e)}function Fg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!ln(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wn(e,t){for(t&=~ac,t&=~cs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function nf(e){if(Me&6)throw Error(ie(327));ii();var t=Po(e,0);if(!(t&1))return Rt(e,at()),null;var n=Xo(e,t);if(e.tag!==0&&n===2){var r=Gl(e);r!==0&&(t=r,n=yu(e,r))}if(n===1)throw n=pa,xr(e,0),Wn(e,t),Rt(e,at()),n;if(n===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hr(e,At,bn),Rt(e,at()),null}function sc(e,t){var n=Me;Me|=1;try{return e(t)}finally{Me=n,Me===0&&(fi=at()+500,os&&rr())}}function Sr(e){Vn!==null&&Vn.tag===0&&!(Me&6)&&ii();var t=Me;Me|=1;var n=Ht.transition,r=ze;try{if(Ht.transition=null,ze=1,e)return e()}finally{ze=r,Ht.transition=n,Me=t,!(Me&6)&&rr()}}function lc(){It=Zr.current,qe(Zr)}function xr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sg(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Wu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oo();break;case 3:ci(),qe(Dt),qe(kt),Xu();break;case 5:Qu(r);break;case 4:ci();break;case 13:qe(Xe);break;case 19:qe(Xe);break;case 10:Ku(r.type._context);break;case 22:case 23:lc()}n=n.return}if(ft=e,ot=e=Zn(e.current,null),gt=It=t,lt=0,pa=null,ac=cs=jr=0,At=Yi=null,yr!==null){for(t=0;t<yr.length;t++)if(n=yr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var c=s.next;s.next=o,r.next=c}n.pending=r}yr=null}return e}function bh(e,t){do{var n=ot;try{if(Uu(),bo.current=qo,Ko){for(var r=Ze.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ko=!1}if(Cr=0,dt=st=Ze=null,qi=!1,ca=0,ic.current=null,n===null||n.return===null){lt=1,pa=t,ot=null;break}e:{var s=e,c=n.return,p=n,m=t;if(t=gt,p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var y=m,j=p,S=j.tag;if(!(j.mode&1)&&(S===0||S===11||S===15)){var E=j.alternate;E?(j.updateQueue=E.updateQueue,j.memoizedState=E.memoizedState,j.lanes=E.lanes):(j.updateQueue=null,j.memoizedState=null)}var $=Gd(c);if($!==null){$.flags&=-257,Vd($,c,p,s,t),$.mode&1&&Wd(s,y,t),t=$,m=y;var Y=t.updateQueue;if(Y===null){var M=new Set;M.add(m),t.updateQueue=M}else Y.add(m);break e}else{if(!(t&1)){Wd(s,y,t),uc();break e}m=Error(ie(426))}}else if(Ye&&p.mode&1){var J=Gd(c);if(J!==null){!(J.flags&65536)&&(J.flags|=256),Vd(J,c,p,s,t),Gu(di(m,p));break e}}s=m=di(m,p),lt!==4&&(lt=2),Yi===null?Yi=[s]:Yi.push(s),s=c;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var k=ih(s,m,t);Bd(s,k);break e;case 1:p=m;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qn===null||!Qn.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var I=ah(s,p,t);Bd(s,I);break e}}s=s.return}while(s!==null)}jh(n)}catch(K){t=K,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function kh(){var e=Ho.current;return Ho.current=qo,e===null?qo:e}function uc(){(lt===0||lt===3||lt===2)&&(lt=4),ft===null||!(jr&268435455)&&!(cs&268435455)||Wn(ft,gt)}function Xo(e,t){var n=Me;Me|=2;var r=kh();(ft!==e||gt!==t)&&(bn=null,xr(e,t));do try{Dg();break}catch(o){bh(e,o)}while(!0);if(Uu(),Me=n,Ho.current=r,ot!==null)throw Error(ie(261));return ft=null,gt=0,lt}function Dg(){for(;ot!==null;)Ch(ot)}function Pg(){for(;ot!==null&&!i0();)Ch(ot)}function Ch(e){var t=Eh(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?jh(e):ot=t,ic.current=null}function jh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Eg(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,ot=null;return}}else if(n=Sg(n,t,It),n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);lt===0&&(lt=5)}function hr(e,t,n){var r=ze,o=Ht.transition;try{Ht.transition=null,ze=1,Rg(e,t,n,r)}finally{Ht.transition=o,ze=r}return null}function Rg(e,t,n,r){do ii();while(Vn!==null);if(Me&6)throw Error(ie(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(h0(e,s),e===ft&&(ot=ft=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oo||(oo=!0,Nh(Do,function(){return ii(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ht.transition,Ht.transition=null;var c=ze;ze=1;var p=Me;Me|=4,ic.current=null,Tg(e,n),vh(n,e),eg(Yl),Ro=!!Hl,Yl=Hl=null,e.current=n,_g(n),a0(),Me=p,ze=c,Ht.transition=s}else e.current=n;if(oo&&(oo=!1,Vn=e,Qo=o),s=e.pendingLanes,s===0&&(Qn=null),l0(n.stateNode),Rt(e,at()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Yo)throw Yo=!1,e=mu,mu=null,e;return Qo&1&&e.tag!==0&&ii(),s=e.pendingLanes,s&1?e===gu?Qi++:(Qi=0,gu=e):Qi=0,rr(),null}function ii(){if(Vn!==null){var e=ip(Qo),t=Ht.transition,n=ze;try{if(Ht.transition=null,ze=16>e?16:e,Vn===null)var r=!1;else{if(e=Vn,Vn=null,Qo=0,Me&6)throw Error(ie(331));var o=Me;for(Me|=4,ve=e.current;ve!==null;){var s=ve,c=s.child;if(ve.flags&16){var p=s.deletions;if(p!==null){for(var m=0;m<p.length;m++){var y=p[m];for(ve=y;ve!==null;){var j=ve;switch(j.tag){case 0:case 11:case 15:Hi(8,j,s)}var S=j.child;if(S!==null)S.return=j,ve=S;else for(;ve!==null;){j=ve;var E=j.sibling,$=j.return;if(mh(j),j===y){ve=null;break}if(E!==null){E.return=$,ve=E;break}ve=$}}}var Y=s.alternate;if(Y!==null){var M=Y.child;if(M!==null){Y.child=null;do{var J=M.sibling;M.sibling=null,M=J}while(M!==null)}}ve=s}}if(s.subtreeFlags&2064&&c!==null)c.return=s,ve=c;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hi(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,ve=k;break e}ve=s.return}}var v=e.current;for(ve=v;ve!==null;){c=ve;var b=c.child;if(c.subtreeFlags&2064&&b!==null)b.return=c,ve=b;else e:for(c=v;ve!==null;){if(p=ve,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:us(9,p)}}catch(K){tt(p,p.return,K)}if(p===c){ve=null;break e}var I=p.sibling;if(I!==null){I.return=p.return,ve=I;break e}ve=p.return}}if(Me=o,rr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ts,e)}catch{}r=!0}return r}finally{ze=n,Ht.transition=t}}return!1}function rf(e,t,n){t=di(n,t),t=ih(e,t,1),e=Yn(e,t,1),t=St(),e!==null&&(ma(e,1,t),Rt(e,t))}function tt(e,t,n){if(e.tag===3)rf(e,e,n);else for(;t!==null;){if(t.tag===3){rf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){e=di(n,e),e=ah(t,e,1),t=Yn(t,e,1),e=St(),t!==null&&(ma(t,1,e),Rt(t,e));break}}t=t.return}}function Mg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(gt&n)===n&&(lt===4||lt===3&&(gt&130023424)===gt&&500>at()-oc?xr(e,0):ac|=n),Rt(e,t)}function Sh(e,t){t===0&&(e.mode&1?(t=Qa,Qa<<=1,!(Qa&130023424)&&(Qa=4194304)):t=1);var n=St();e=Tn(e,t),e!==null&&(ma(e,t,n),Rt(e,n))}function Bg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sh(e,n)}function Ig(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),Sh(e,n)}var Eh;Eh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)Ft=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ft=!1,jg(e,t,n);Ft=!!(e.flags&131072)}else Ft=!1,Ye&&t.flags&1048576&&Ap(t,$o,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Co(e,t),e=t.pendingProps;var o=si(t,kt.current);ri(t,n),o=Ju(null,t,r,e,o,n);var s=ec();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(r)?(s=!0,zo(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Hu(t),o.updater=ls,t.stateNode=o,o._reactInternals=t,iu(t,r,e,n),t=su(null,t,r,!0,s,n)):(t.tag=0,Ye&&s&&$u(t),jt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Co(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=zg(r),e=tn(r,e),o){case 0:t=ou(null,t,r,e,n);break e;case 1:t=qd(null,t,r,e,n);break e;case 11:t=Ud(null,t,r,e,n);break e;case 14:t=Kd(null,t,r,tn(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:tn(r,o),ou(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:tn(r,o),qd(e,t,r,o,n);case 3:e:{if(uh(t),e===null)throw Error(ie(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Bp(e,t),Vo(t,r,null,n);var c=t.memoizedState;if(r=c.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=di(Error(ie(423)),t),t=Hd(e,t,r,n,o);break e}else if(r!==o){o=di(Error(ie(424)),t),t=Hd(e,t,r,n,o);break e}else for(Ot=Hn(t.stateNode.containerInfo.firstChild),zt=t,Ye=!0,rn=null,n=Rp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===o){t=_n(e,t,n);break e}jt(e,t,r,n)}t=t.child}return t;case 5:return Ip(t),e===null&&tu(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,c=o.children,Ql(r,o)?c=null:s!==null&&Ql(r,s)&&(t.flags|=32),lh(e,t),jt(e,t,c,n),t.child;case 6:return e===null&&tu(t),null;case 13:return ch(e,t,n);case 4:return Yu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ui(t,null,r,n):jt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:tn(r,o),Ud(e,t,r,o,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,c=o.value,Ve(Wo,r._currentValue),r._currentValue=c,s!==null)if(ln(s.value,c)){if(s.children===o.children&&!Dt.current){t=_n(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var p=s.dependencies;if(p!==null){c=s.child;for(var m=p.firstContext;m!==null;){if(m.context===r){if(s.tag===1){m=Sn(-1,n&-n),m.tag=2;var y=s.updateQueue;if(y!==null){y=y.shared;var j=y.pending;j===null?m.next=m:(m.next=j.next,j.next=m),y.pending=m}}s.lanes|=n,m=s.alternate,m!==null&&(m.lanes|=n),nu(s.return,n,t),p.lanes|=n;break}m=m.next}}else if(s.tag===10)c=s.type===t.type?null:s.child;else if(s.tag===18){if(c=s.return,c===null)throw Error(ie(341));c.lanes|=n,p=c.alternate,p!==null&&(p.lanes|=n),nu(c,n,t),c=s.sibling}else c=s.child;if(c!==null)c.return=s;else for(c=s;c!==null;){if(c===t){c=null;break}if(s=c.sibling,s!==null){s.return=c.return,c=s;break}c=c.return}s=c}jt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ri(t,n),o=Qt(o),r=r(o),t.flags|=1,jt(e,t,r,n),t.child;case 14:return r=t.type,o=tn(r,t.pendingProps),o=tn(r.type,o),Kd(e,t,r,o,n);case 15:return oh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:tn(r,o),Co(e,t),t.tag=1,Pt(r)?(e=!0,zo(t)):e=!1,ri(t,n),rh(t,r,o),iu(t,r,o,n),su(null,t,r,!0,e,n);case 19:return dh(e,t,n);case 22:return sh(e,t,n)}throw Error(ie(156,t.tag))};function Nh(e,t){return ep(e,t)}function Og(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,r){return new Og(e,t,n,r)}function cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zg(e){if(typeof e=="function")return cc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_u)return 11;if(e===Au)return 14}return 2}function Zn(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Eo(e,t,n,r,o,s){var c=2;if(r=e,typeof e=="function")cc(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case Wr:return wr(n.children,o,s,t);case Tu:c=8,o|=8;break;case Tl:return e=qt(12,n,t,o|2),e.elementType=Tl,e.lanes=s,e;case _l:return e=qt(13,n,t,o),e.elementType=_l,e.lanes=s,e;case Al:return e=qt(19,n,t,o),e.elementType=Al,e.lanes=s,e;case If:return ds(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mf:c=10;break e;case Bf:c=9;break e;case _u:c=11;break e;case Au:c=14;break e;case zn:c=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=qt(c,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function wr(e,t,n,r){return e=qt(7,e,r,t),e.lanes=n,e}function ds(e,t,n,r){return e=qt(22,e,r,t),e.elementType=If,e.lanes=n,e.stateNode={isHidden:!1},e}function bl(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function kl(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function dc(e,t,n,r,o,s,c,p,m){return e=new Lg(e,t,n,p,m),t===1?(t=1,s===!0&&(t|=8)):t=0,s=qt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hu(s),e}function $g(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Th(e){if(!e)return er;e=e._reactInternals;e:{if(Nr(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var n=e.type;if(Pt(n))return Tp(e,n,t)}return t}function _h(e,t,n,r,o,s,c,p,m){return e=dc(n,r,!0,e,o,s,c,p,m),e.context=Th(null),n=e.current,r=St(),o=Xn(n),s=Sn(r,o),s.callback=t??null,Yn(n,s,o),e.current.lanes=o,ma(e,o,r),Rt(e,r),e}function fs(e,t,n,r){var o=t.current,s=St(),c=Xn(o);return n=Th(n),t.context===null?t.context=n:t.pendingContext=n,t=Sn(s,c),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yn(o,t,c),e!==null&&(sn(e,o,c,s),wo(e,o,c)),c}function Zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fc(e,t){af(e,t),(e=e.alternate)&&af(e,t)}function Wg(){return null}var Ah=typeof reportError=="function"?reportError:function(e){console.error(e)};function pc(e){this._internalRoot=e}ps.prototype.render=pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));fs(e,t,null,null)};ps.prototype.unmount=pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sr(function(){fs(null,e,null,null)}),t[Nn]=null}};function ps(e){this._internalRoot=e}ps.prototype.unstable_scheduleHydration=function(e){if(e){var t=sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&t!==0&&t<$n[n].priority;n++);$n.splice(n,0,e),n===0&&up(e)}};function hc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function of(){}function Gg(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var y=Zo(c);s.call(y)}}var c=_h(t,r,e,0,null,!1,!1,"",of);return e._reactRootContainer=c,e[Nn]=c.current,aa(e.nodeType===8?e.parentNode:e),Sr(),c}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var p=r;r=function(){var y=Zo(m);p.call(y)}}var m=dc(e,0,!1,null,null,!1,!1,"",of);return e._reactRootContainer=m,e[Nn]=m.current,aa(e.nodeType===8?e.parentNode:e),Sr(function(){fs(t,m,n,r)}),m}function ms(e,t,n,r,o){var s=n._reactRootContainer;if(s){var c=s;if(typeof o=="function"){var p=o;o=function(){var m=Zo(c);p.call(m)}}fs(t,c,e,o)}else c=Gg(n,t,e,o,r);return Zo(c)}ap=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Li(t.pendingLanes);n!==0&&(Pu(t,n|1),Rt(t,at()),!(Me&6)&&(fi=at()+500,rr()))}break;case 13:Sr(function(){var r=Tn(e,1);if(r!==null){var o=St();sn(r,e,1,o)}}),fc(e,1)}};Ru=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=St();sn(t,e,134217728,n)}fc(e,134217728)}};op=function(e){if(e.tag===13){var t=Xn(e),n=Tn(e,t);if(n!==null){var r=St();sn(n,e,t,r)}fc(e,t)}};sp=function(){return ze};lp=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};Ll=function(e,t,n){switch(t){case"input":if(Pl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=as(r);if(!o)throw Error(ie(90));zf(r),Pl(r,o)}}}break;case"textarea":$f(e,n);break;case"select":t=n.value,t!=null&&Jr(e,!!n.multiple,t,!1)}};Hf=sc;Yf=Sr;var Vg={usingClientEntryPoint:!1,Events:[ya,Kr,as,Kf,qf,sc]},Mi={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zf(e),e===null?null:e.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||Wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var so=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!so.isDisabled&&so.supportsFiber)try{ts=so.inject(Ug),yn=so}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vg;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hc(t))throw Error(ie(200));return $g(e,t,null,n)};$t.createRoot=function(e,t){if(!hc(e))throw Error(ie(299));var n=!1,r="",o=Ah;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=dc(e,1,!1,null,null,n,!1,r,o),e[Nn]=t.current,aa(e.nodeType===8?e.parentNode:e),new pc(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=Zf(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return Sr(e)};$t.hydrate=function(e,t,n){if(!hs(t))throw Error(ie(200));return ms(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!hc(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",c=Ah;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=_h(t,null,e,1,n??null,o,!1,s,c),e[Nn]=t.current,aa(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ps(t)};$t.render=function(e,t,n){if(!hs(t))throw Error(ie(200));return ms(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!hs(e))throw Error(ie(40));return e._reactRootContainer?(Sr(function(){ms(null,null,e,!1,function(){e._reactRootContainer=null,e[Nn]=null})}),!0):!1};$t.unstable_batchedUpdates=sc;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!hs(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return ms(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fh)}catch(e){console.error(e)}}Fh(),Ff.exports=$t;var Kg=Ff.exports,Dh,sf=Kg;Dh=sf.createRoot,sf.hydrateRoot;function qg({userProgress:e,currentProfile:t,onStartBrushing:n,onViewCollection:r,onViewSettings:o,onSwitchProfile:s}){return u.jsxs("div",{className:"flex flex-col items-center justify-between h-full p-6 text-center",children:[u.jsxs("div",{className:"w-full flex justify-between items-center",children:[u.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-purple-800/50 hover:bg-purple-700/50 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:t.avatarColor},children:t.name.charAt(0).toUpperCase()}),u.jsx("span",{className:"text-white font-medium",children:t.name}),u.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]}),u.jsx("button",{onClick:o,className:"p-2 text-2xl text-purple-300 hover:text-white transition-colors","aria-label":"Settings",children:""})]}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[u.jsx("div",{className:"animate-bounce-gentle",children:u.jsx("div",{className:"text-8xl mb-4",children:""})}),u.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-500 bg-clip-text text-transparent",children:"Sparkle Brush!"}),u.jsx("p",{className:"text-xl text-purple-200 max-w-xs",children:"Make your teeth sparkle and catch amazing creatures!"}),u.jsxs("div",{className:"flex gap-4 mt-4 text-lg",children:[u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),u.jsx("div",{className:"text-sm text-purple-300",children:"Day Streak"})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.capturedCreatures.length}),u.jsx("div",{className:"text-sm text-purple-300",children:"Creatures"})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[u.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.totalSessions}),u.jsx("div",{className:"text-sm text-purple-300",children:"Sessions"})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs pb-8",children:[u.jsx("button",{onClick:n,className:"w-full py-5 px-8 text-2xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg animate-button-glow active:scale-95 transition-transform",children:"Start Brushing! "}),u.jsx("button",{onClick:r,className:"w-full py-3 px-6 text-lg font-semibold text-purple-200 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"My Collection "})]})]})}const Ph=C.createContext(null);function Hg({children:e}){const t=C.useRef(null),n=C.useRef(null),r=C.useRef(null),o=C.useRef(!1),s=C.useRef(null),[c,p]=C.useState(null),[m,y]=C.useState(!1),[j,S]=C.useState(null),E=C.useCallback(v=>{const b=v||t.current,I=r.current;if(console.log("[CameraContext] attachStreamToVideo called:",{hasVideo:!!b,hasStream:!!I,videoId:b==null?void 0:b.id,streamActive:I==null?void 0:I.active,streamTracks:I==null?void 0:I.getTracks().map(K=>({kind:K.kind,enabled:K.enabled,readyState:K.readyState})),isSameAsLastAttached:b===s.current}),!b||!I)return console.warn("[CameraContext] Video or stream not available"),!1;if(b.srcObject===I&&b===s.current)return console.log("[CameraContext] Stream already attached to this video element"),b.readyState>=2&&!b.paused&&y(!0),!0;try{console.log("[CameraContext] Attaching stream to video element..."),b.srcObject=I,s.current=b;const K=()=>{console.log("[CameraContext] Video can play, attempting to play..."),b.play().then(()=>{console.log("[CameraContext] Video playing successfully"),y(!0)}).catch(L=>{console.error("[CameraContext] Error playing video:",L)})};return b.oncanplay=K,b.onloadeddata=K,b.readyState>=3?K():b.load(),b.onerror=()=>{console.error("[CameraContext] Video element error"),S("Video element error")},!0}catch(K){return console.error("[CameraContext] Error attaching stream:",K),!1}},[]),$=C.useCallback(async()=>{if(o.current){console.log("startCamera already in progress, skipping...");return}if(r.current&&m){console.log("Camera already running and ready");return}if(r.current&&t.current){console.log("Stream exists, reattaching..."),E();return}if(r.current&&!t.current){console.log("Stream exists but no video element, waiting...");return}o.current=!0;try{S(null),y(!1),console.log("Requesting camera access...");const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("Camera access granted, tracks:",v.getVideoTracks().length),r.current=v,p(v),setTimeout(()=>{E(),o.current=!1},100)}catch(v){o.current=!1;let b="Failed to access camera";v instanceof Error&&(v.name==="NotAllowedError"?b="Camera permission denied. Please allow camera access.":v.name==="NotFoundError"?b="No camera found on this device.":v.name==="NotReadableError"?b="Camera is being used by another app.":b=v.message),S(b),console.error("Camera error:",v)}},[m,E]);C.useEffect(()=>{var v;console.log("[CameraContext] Stream/video effect:",{hasStream:!!c,hasVideoRef:!!t.current,videoSrcObject:!!((v=t.current)!=null&&v.srcObject),isReady:m}),!(!c||!t.current)&&(t.current.srcObject||(console.log("[CameraContext] Effect: video element needs stream attached"),E()))},[c,E,m]),C.useEffect(()=>{if(!c||m)return;const v=t.current;if(!v)return;const b=()=>v.readyState>=2&&v.videoWidth>0&&!v.paused?(console.log("Polling detected video is ready"),y(!0),!0):!1;if(b())return;const I=setInterval(()=>{b()&&clearInterval(I)},200),K=setTimeout(()=>{clearInterval(I)},5e3);return()=>{clearInterval(I),clearTimeout(K)}},[c,m]);const Y=C.useCallback(()=>{console.log("Stopping camera..."),o.current=!1,r.current&&(r.current.getTracks().forEach(v=>{v.stop()}),r.current=null),p(null),y(!1),t.current&&(t.current.srcObject=null)},[]),M=C.useCallback(v=>{console.log("[CameraContext] registerVideoElement called:",{hasVideo:!!v,hasStream:!!r.current,isDifferentElement:v!==s.current}),v&&(t.current=v,r.current&&v!==s.current&&(console.log("[CameraContext] New video element detected, re-attaching stream..."),y(!1),E(v)))},[E]),J=C.useCallback(()=>{if(!t.current)return null;const v=t.current;if(v.videoWidth===0||v.videoHeight===0)return null;n.current||(n.current=document.createElement("canvas"));const b=n.current;b.width=v.videoWidth,b.height=v.videoHeight;const I=b.getContext("2d");return I?(I.drawImage(v,0,0),b.toDataURL("image/jpeg",.8)):null},[]),k=C.useCallback(async v=>{if(!t.current)return null;const b=t.current;if(b.videoWidth===0||b.videoHeight===0)return null;const I=document.createElement("canvas");I.width=b.videoWidth,I.height=b.videoHeight;const K=I.getContext("2d");if(!K)return null;if(K.save(),K.translate(I.width,0),K.scale(-1,1),K.drawImage(b,0,0),K.restore(),v&&v.imageUrl)try{const L=new Image;L.crossOrigin="anonymous",await new Promise((H,X)=>{L.onload=()=>H(),L.onerror=X,L.src=v.imageUrl});const B=b.videoWidth,V=b.videoHeight,{containerWidth:q,containerHeight:G,facePosition:D}=v,Z=q/B,ee=G/V;let fe,se,le;if(D&&q>0&&G>0){const H=50/Z,X=q*.25/Z,ae=D.width;fe=Math.max(H,Math.min(X,ae*.5)),se=B/2;const we=D.y,Ce=fe*.55;le=Math.max(5/ee,we-Ce)}else fe=B*.2,se=B/2,le=V*.1;const he=fe*(L.height/L.width);K.drawImage(L,se-fe/2,le,fe,he)}catch(L){console.error("Failed to load hat image for capture:",L)}return I.toDataURL("image/jpeg",.8)},[]);return C.useEffect(()=>()=>{r.current&&r.current.getTracks().forEach(v=>v.stop())},[]),u.jsx(Ph.Provider,{value:{videoRef:t,stream:c,isReady:m,error:j,startCamera:$,stopCamera:Y,captureFrame:J,captureFrameWithHat:k,registerVideoElement:M},children:e})}function gs(){const e=C.useContext(Ph);if(!e)throw new Error("useSharedCamera must be used within a CameraProvider");return e}function Yg({onConfirm:e,onCancel:t}){const{isReady:n,error:r,startCamera:o,stopCamera:s,registerVideoElement:c}=gs(),[p,m]=C.useState(!1),[y,j]=C.useState(!1),S=C.useRef(!1),E=C.useRef(null),$=C.useCallback(k=>{console.log("[CameraCheck] Video ref callback:",{hasElement:!!k}),E.current=k,k&&c(k)},[c]);C.useEffect(()=>{S.current||(S.current=!0,o())},[o]),C.useEffect(()=>{const k=setTimeout(()=>{m(!0)},3e3);return()=>clearTimeout(k)},[]),C.useEffect(()=>{const k=()=>{const b=E.current;b&&b.videoWidth>0&&b.videoHeight>0&&!b.paused&&j(!0)},v=setInterval(k,200);return k(),()=>clearInterval(v)},[]);const Y=()=>{s(),t()},M=()=>{S.current=!1,s(),setTimeout(()=>{S.current=!0,o()},500)},J=n||y;return u.jsxs("div",{className:"flex flex-col h-full p-6",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Camera Check! "}),u.jsx("p",{className:"text-purple-200",children:"Make sure you can see yourself below"})]}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-purple-900/50 rounded-2xl overflow-hidden mb-4",children:[u.jsx("video",{ref:$,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),!J&&!r&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-purple-900/80",children:[u.jsx("div",{className:"text-4xl mb-4 animate-bounce-gentle",children:""}),u.jsx("div",{className:"text-lg text-purple-200 animate-pulse",children:"Starting camera..."}),u.jsx("div",{className:"text-sm text-purple-300 mt-2",children:"Please allow camera access when prompted"})]}),r&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/80 p-4",children:[u.jsx("div",{className:"text-4xl mb-4",children:""}),u.jsx("div",{className:"text-lg font-bold text-white mb-2",children:"Camera Error"}),u.jsx("div",{className:"text-sm text-red-200 text-center mb-4",children:r}),u.jsxs("div",{className:"text-xs text-red-300 text-center",children:["Please check that:",u.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[u.jsx("li",{children:"Camera permissions are enabled"}),u.jsx("li",{children:"No other app is using the camera"}),u.jsx("li",{children:"Your browser supports camera access"})]})]})]}),J&&u.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:u.jsxs("div",{className:"bg-green-600/90 rounded-full px-4 py-2 text-sm text-white flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Camera is working!"]})})]}),J&&u.jsx("div",{className:"text-center text-purple-200 text-sm mb-4",children:"Can you see yourself? "})]}),u.jsxs("div",{className:"flex flex-col gap-3",children:[J&&u.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Yes, I can see myself! "}),p&&!J&&!r&&u.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Continue Anyway "}),r&&u.jsx("button",{onClick:M,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Try Again "}),u.jsx("button",{onClick:Y,className:"w-full py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"Go Back"})]})]})}const hn="/vibe-brushing/",ai=[{id:"crown",name:"Royal Crown",imageUrl:`${hn}creatures/hat-crown.png`,unlockCondition:"starter"},{id:"party",name:"Party Hat",imageUrl:`${hn}creatures/hat-party.png`,unlockCondition:"starter"},{id:"wizard",name:"Wizard Hat",imageUrl:`${hn}creatures/hat-wizard.png`,unlockCondition:"sessions",unlockThreshold:10},{id:"cowboy",name:"Cowboy Hat",imageUrl:`${hn}creatures/hat-cowboy.png`,unlockCondition:"sessions",unlockThreshold:25},{id:"chef",name:"Chef Hat",imageUrl:`${hn}creatures/hat-chef.png`,unlockCondition:"sessions",unlockThreshold:50},{id:"astronaut",name:"Space Helmet",imageUrl:`${hn}creatures/hat-astronaut.png`,unlockCondition:"sessions",unlockThreshold:100},{id:"pirate",name:"Pirate Hat",imageUrl:`${hn}creatures/hat-pirate.png`,unlockCondition:"streak",unlockThreshold:7},{id:"princess",name:"Princess Tiara",imageUrl:`${hn}creatures/hat-princess.png`,unlockCondition:"streak",unlockThreshold:30},{id:"unicorn-horn",name:"Unicorn Horn",imageUrl:`${hn}creatures/hat-unicorn-horn.png`,unlockCondition:"creature",unlockThreshold:5},{id:"dragon-horns",name:"Dragon Horns",imageUrl:`${hn}creatures/hat-dragon-horns.png`,unlockCondition:"creature",unlockThreshold:10}];function Qg(e,t,n){return ai.filter(r=>{switch(r.unlockCondition){case"starter":return!0;case"sessions":return e>=(r.unlockThreshold||0);case"streak":return t>=(r.unlockThreshold||0);case"creature":return n>=(r.unlockThreshold||0);default:return!1}})}function Rh({hatId:e,size:t}){const n=ai.find(r=>r.id===e);return n?u.jsx("img",{src:n.imageUrl,alt:n.name,width:t,height:t,style:{objectFit:"contain",imageRendering:"auto"}}):null}function Xg({userProgress:e,onSelect:t,onBack:n}){const r=Qg(e.totalSessions,e.currentStreak,e.capturedCreatures.length),o=new Set(r.map(s=>s.id));return u.jsxs("div",{className:"flex flex-col h-full p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("button",{onClick:n,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Choose Your Hat!"}),u.jsx("div",{className:"w-16"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[u.jsxs("button",{onClick:()=>t(null),className:"aspect-square bg-purple-800/30 rounded-2xl flex flex-col items-center justify-center border-2 border-dashed border-purple-500/50 active:scale-95 transition-transform",children:[u.jsx("div",{className:"text-3xl mb-1",children:""}),u.jsx("div",{className:"text-xs text-purple-300",children:"No Hat"})]}),ai.map(s=>{const c=o.has(s.id);return u.jsxs("button",{onClick:()=>c&&t(s),disabled:!c,className:`aspect-square rounded-2xl flex flex-col items-center justify-center transition-all p-2 ${c?"bg-purple-800/50 active:scale-95":"bg-purple-900/30 opacity-50 cursor-not-allowed"}`,children:[u.jsx("div",{className:`flex-1 flex items-center justify-center w-full ${c?"":"grayscale"}`,children:c?u.jsx(Rh,{hatId:s.id,size:60}):u.jsx("span",{className:"text-4xl",children:""})}),u.jsx("div",{className:"text-xs text-center px-1 truncate w-full mt-1",children:c?s.name:Zg(s)})]},s.id)})]})}),u.jsx("button",{onClick:()=>t(null),className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Start Without Hat"})]})}function Zg(e){switch(e.unlockCondition){case"sessions":return`${e.unlockThreshold} sessions`;case"streak":return`${e.unlockThreshold} day streak`;case"creature":return`${e.unlockThreshold} creatures`;default:return"Locked"}}const Mh={id:"faceZone",label:"Face",x:.3,y:.25,w:.4,h:.5},Bi=[Mh];class Jg{constructor(){Ct(this,"canvas");Ct(this,"ctx");Ct(this,"previousFrame",null);Ct(this,"pixelThreshold",20);Ct(this,"motionThresholdPercent",2.5);Ct(this,"frameCount",0);Ct(this,"debugMode",!1);Ct(this,"lastDebugInfo",null);Ct(this,"smoothedFaceCenter",null);Ct(this,"smoothingFactor",.15);this.canvas=document.createElement("canvas");const t=this.canvas.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Could not get canvas context");this.ctx=t}getZonesForFace(t,n,r){if(!t||n===0||r===0)return[Mh];const o=t.x/n,s=t.y/r,c=t.width/n,p=t.height/r,m={x:o,y:s+p*.5,w:c,h:p};this.smoothedFaceCenter?this.smoothedFaceCenter={x:this.smoothedFaceCenter.x+(m.x-this.smoothedFaceCenter.x)*this.smoothingFactor,y:this.smoothedFaceCenter.y+(m.y-this.smoothedFaceCenter.y)*this.smoothingFactor,w:this.smoothedFaceCenter.w+(m.w-this.smoothedFaceCenter.w)*this.smoothingFactor,h:this.smoothedFaceCenter.h+(m.h-this.smoothedFaceCenter.h)*this.smoothingFactor}:this.smoothedFaceCenter=m;const y=this.smoothedFaceCenter,j=Math.max(.3,Math.min(.5,y.w*1.4)),S=Math.max(.35,Math.min(.55,y.h*1.2)),E=y.x-j/2,$=y.y-S/2,Y=(k,v,b)=>Math.max(v,Math.min(b,k)),M=Y(E,.02,1-j-.02),J=Y($,.05,1-S-.05);return[{id:"faceZone",label:"Face",x:M,y:J,w:j,h:S}]}setDebugMode(t){this.debugMode=t}getDebugInfo(){return this.lastDebugInfo}getCurrentZones(t,n,r){return this.getZonesForFace(t,n,r)}getFaceRegionNormalized(t,n,r){if(!t)return null;const o=.25,s=(t.x-t.width/2)/(n/o),c=t.y/(r/o),p=t.width/(n/o),m=t.height/(r/o);return{x:s,y:c,w:p,h:m}}isInFaceCore(t,n,r,o,s){const c=this.getFaceRegionNormalized(r,o,s);if(!c)return!1;const p=c.x+c.w*.15,m=c.y+c.h*.1,y=c.w*.7,j=c.h*.5;return t>=p&&t<=p+y&&n>=m&&n<=m+j}isInBrushingRegion(t,n,r,o,s){const c=this.getFaceRegionNormalized(r,o,s);if(!c)return n>.2;const p=c.x-c.w*1,m=c.y-c.h*.1,y=c.w*3,j=c.h*2.5;return t>=p&&t<=p+y&&n>=m&&n<=m+j}getBrushingRegion(t,n,r){const s=n*.25,c=r*.25,p=this.getFaceRegionNormalized(t,s,c);if(!p)return{x:0,y:.2*r,width:n,height:.8*r};const m=p.x-p.w*1,y=p.y-p.h*.1,j=p.w*3,S=p.h*2.5;return{x:Math.max(0,m*n),y:Math.max(0,y*r),width:Math.min(j*n,n),height:Math.min(S*r,r)}}detectMotion(t,n=null){this.frameCount++;const r=this.getZonesForFace(n,t.videoWidth,t.videoHeight);if(!t.videoWidth||!t.videoHeight)return r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));const o=.25,s=Math.floor(t.videoWidth*o),c=Math.floor(t.videoHeight*o);(this.canvas.width!==s||this.canvas.height!==c)&&(this.canvas.width=s,this.canvas.height=c,this.previousFrame=null);try{this.ctx.drawImage(t,0,0,s,c)}catch(E){return console.error("[MotionDetector] Failed to draw video frame:",E),r.map($=>({zoneId:$.id,motionLevel:0,hasMotion:!1}))}const p=this.ctx.getImageData(0,0,s,c);if(!this.previousFrame)return this.previousFrame=p,r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));let m=0,y=!1;const j=[],S=r.map(E=>{const $=Math.floor(E.x*s),Y=Math.floor(E.y*c),M=Math.floor(E.w*s),J=Math.floor(E.h*c);let k=0,v=0;for(let K=Y;K<Y+J&&K<c;K++)for(let L=$;L<$+M&&L<s;L++){const B=L/s,V=K/c;if(this.isInFaceCore(B,V,n,s,c)||!this.isInBrushingRegion(B,V,n,s,c))continue;const q=(K*s+L)*4,G=Math.abs(p.data[q]-this.previousFrame.data[q]),D=Math.abs(p.data[q+1]-this.previousFrame.data[q+1]),Z=Math.abs(p.data[q+2]-this.previousFrame.data[q+2]),ee=(G+D+Z)/3;ee>this.pixelThreshold&&(k++,m+=ee),v++}const b=v>0?k/v*100:0,I=b>this.motionThresholdPercent;return I&&(y=!0),this.debugMode&&j.push({id:E.id,bounds:{x:E.x,y:E.y,width:E.w,height:E.h},motionLevel:Math.min(b*2,100),hasMotion:I,motionPixels:k,totalPixels:v}),{zoneId:E.id,motionLevel:Math.min(b*2,100),hasMotion:I}});if(this.debugMode){const E=this.getBrushingRegion(n,s/.25,c/.25);this.lastDebugInfo={faceRegion:n,brushingRegion:E,zones:j,frameMotionTotal:m,handMotionDetected:y}}if(this.previousFrame=p,this.frameCount%20===0){const E=S.filter($=>$.hasMotion).length;console.log("[MotionDetector] Frame",this.frameCount,"- Active zones:",E,"- Hand motion:",y,"- Total motion:",m.toFixed(0))}return S}reset(){this.previousFrame=null,this.frameCount=0,this.smoothedFaceCenter=null}}function Bh(e={}){const{targetCleaningTime:t=20,detectionInterval:n=100,decayRate:r=.4,debugMode:o=!1}=e,s=C.useRef(null),c=C.useRef(null),p=C.useRef(null),m=C.useRef({}),y=C.useRef({}),j=C.useRef(null),S=C.useRef(o),[E,$]=C.useState(()=>Bi.map(G=>({zoneId:G.id,cleaningProgress:0,isComplete:!1}))),[Y,M]=C.useState(()=>Bi.map(G=>({zoneId:G.id,motionLevel:0,hasMotion:!1}))),J=C.useCallback(G=>{j.current=G},[]),k=C.useCallback(G=>{S.current=G,s.current&&s.current.setDebugMode(G)},[]),v=C.useCallback(()=>{var G;return((G=s.current)==null?void 0:G.getDebugInfo())??null},[]),b=C.useCallback(()=>{const G=Bi.map(D=>{const ee=(m.current[D.id]||0)/t*100,fe=Math.min(ee,100);return{zoneId:D.id,cleaningProgress:fe,isComplete:fe>=100}});$(G)},[t]),I=C.useCallback(()=>{if(!s.current||!c.current)return;const G=c.current;if(G.paused&&G.srcObject&&G.play().catch(()=>{}),G.readyState<2||G.videoWidth===0)return;const D=s.current.detectMotion(G,j.current);M(D),D.forEach(Z=>{const ee=m.current[Z.zoneId]||0;if(Z.hasMotion){y.current[Z.zoneId]=0;const fe=n/1e3*(Z.motionLevel/60);m.current[Z.zoneId]=ee+fe}else{const fe=(y.current[Z.zoneId]||0)+1;if(y.current[Z.zoneId]=fe,fe>5){const se=n/1e3*r;m.current[Z.zoneId]=Math.max(0,ee-se)}}}),b()},[n,b,r]),K=C.useCallback(G=>{console.log("[MotionDetection] startDetection called:",{videoReadyState:G.readyState,videoWidth:G.videoWidth,videoHeight:G.videoHeight,srcObject:!!G.srcObject,paused:G.paused}),G.paused&&(console.log("[MotionDetection] Video is paused, attempting to play..."),G.play().then(()=>{console.log("[MotionDetection] Video now playing")}).catch(D=>{console.error("[MotionDetection] Failed to play video:",D)})),s.current||(s.current=new Jg),s.current.setDebugMode(S.current),c.current=G,p.current&&clearInterval(p.current),p.current=window.setInterval(I,n),console.log("[MotionDetection] Detection interval started")},[I,n]),L=C.useCallback(()=>{p.current&&(clearInterval(p.current),p.current=null)},[]),B=C.useCallback(()=>{var G;m.current={},y.current={},(G=s.current)==null||G.reset(),$(Bi.map(D=>({zoneId:D.id,cleaningProgress:0,isComplete:!1}))),M(Bi.map(D=>({zoneId:D.id,motionLevel:0,hasMotion:!1})))},[]);C.useEffect(()=>()=>{p.current&&clearInterval(p.current)},[]);const V=E.reduce((G,D)=>G+D.cleaningProgress,0)/E.length,q=E.every(G=>G.isComplete);return{zoneProgress:E,motionResults:Y,overallProgress:V,isComplete:q,startDetection:K,stopDetection:L,reset:B,setFaceRegion:J,setDebugMode:k,getDebugInfo:v}}const ey="modulepreload",ty=function(e){return"/vibe-brushing/"+e},lf={},uf=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=ty(m),m in lf)return;lf[m]=!0;const y=m.endsWith(".css"),j=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${j}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":ey,y||(S.as="script"),S.crossOrigin="",S.href=m,p&&S.setAttribute("nonce",p),document.head.appendChild(S),y)return new Promise((E,$)=>{S.addEventListener("load",E),S.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return o.then(c=>{for(const p of c||[])p.status==="rejected"&&s(p.reason);return t().catch(s)})};function Ih(){const[e,t]=C.useState(null),[n,r]=C.useState(!1),[o,s]=C.useState(!0),c=C.useRef(null),p=C.useRef(null),m=C.useRef(null),y=C.useRef("fallback"),j=C.useRef(null),S=C.useRef(null),E=C.useRef(null),$=C.useRef(null),Y=C.useRef(!1),M=C.useRef(!1),J=C.useRef(null),k=C.useCallback(async()=>{if(J.current)return J.current;const B=async()=>{if(r(!0),console.log("[FaceTracking] Initializing detector..."),"FaceDetector"in window&&window.FaceDetector)try{const V=new window.FaceDetector({maxDetectedFaces:1,fastMode:!0});return await V.detect(document.createElement("video")),p.current=V,y.current="native",r(!1),console.log("[FaceTracking] Using native FaceDetector API"),!0}catch(V){console.warn("[FaceTracking] Native FaceDetector not available:",V)}try{console.log("[FaceTracking] Loading TensorFlow.js...");const V=await uf(()=>import("./index-C70fQbMr.js"),__vite__mapDeps([0,1]));await V.ready();try{await V.setBackend("webgl"),console.log("[FaceTracking] Using WebGL backend")}catch{console.log("[FaceTracking] WebGL failed, trying CPU backend"),await V.setBackend("cpu")}console.log("[FaceTracking] Loading face detection model...");const q=await uf(()=>import("./face-landmarks-detection.esm-D86gesFT.js"),__vite__mapDeps([2,1])),G=q.SupportedModels.MediaPipeFaceMesh,D=await q.createDetector(G,{runtime:"tfjs",refineLandmarks:!1,maxFaces:1});return m.current=D,y.current="tfjs",r(!1),console.log("[FaceTracking] Using TensorFlow.js FaceMesh"),!0}catch(V){return console.warn("[FaceTracking] TensorFlow.js face tracking failed:",V),y.current="fallback",r(!1),s(!1),console.log("[FaceTracking] Using center-of-frame fallback"),!0}};return J.current=B(),J.current},[]),v=C.useCallback(B=>{const V=$.current;if(!V)return $.current=B,B;const q=Math.abs(B.x-V.x),G=Math.abs(B.y-V.y),D=q+G;if(D<15)return V;const Z=D>50?.7:D>25?.4:.2,ee={x:V.x+(B.x-V.x)*Z,y:V.y+(B.y-V.y)*Z,width:V.width+(B.width-V.width)*.2,height:V.height+(B.height-V.height)*.2,rotation:B.rotation};return $.current=ee,ee},[]),b=C.useCallback(B=>{var Gt;S.current||(S.current=document.createElement("canvas"));const V=S.current,q=.2,G=Math.floor(B.videoWidth*q),D=Math.floor(B.videoHeight*q);V.width!==G&&(V.width=G),V.height!==D&&(V.height=D);const Z=V.getContext("2d",{willReadFrequently:!0});if(!Z)return null;Z.drawImage(B,0,0,G,D);const ee=Z.getImageData(0,0,G,D),fe=ee.data;let se=0,le=0,he=0;const H=new Array(G).fill(0);let X=0,ae=0;const we=(Gt=E.current)==null?void 0:Gt.data,Ce=Math.floor(D*.6);for(let Re=0;Re<Ce;Re++)for(let ge=0;ge<G;ge++){const nt=(Re*G+ge)*4,Te=fe[nt],re=fe[nt+1],je=fe[nt+2];if(Te+re+je>200){const De=1+(1-Re/Ce);ae+=De,X+=Re*De}if(we){const De=we[nt],$e=we[nt+1],Tt=we[nt+2],_t=Math.abs(Te-De)+Math.abs(re-$e)+Math.abs(je-Tt);if(_t>40){const xe=_t*(1+(1-Re/Ce));he+=xe,se+=ge*xe,le+=Re*xe,H[ge]+=_t}}}E.current=ee;const We=$.current;let Ae;if(he>2e4){const Re=Math.floor(se/he),nt=Math.max(...H)*.15;let Te=Re,re=Re;for(let $e=Re;$e>=0&&Re-$e<G*.4;$e--)if(H[$e]>=nt)Te=$e;else if($e<Re-5)break;for(let $e=Re;$e<G&&$e-Re<G*.4;$e++)if(H[$e]>=nt)re=$e;else if($e>Re+5)break;const je=(re-Te)/q,Se=B.videoWidth*.1,De=B.videoWidth*.4;Ae=Math.max(Se,Math.min(De,je*1.5)),console.log(`[FaceTracking] Motion: center=${Re}, span=${je.toFixed(0)}px  faceW: ${Ae.toFixed(0)}`)}else We?Ae=We.width:Ae=B.videoWidth*.2;const Be=B.videoWidth/2;let Le;he>2e4?Le="motion":ae>100?Le="skin":Le="center";let Ue;if(he>2e4){const Re=le/he/q;Ue=Math.max(B.videoHeight*.05,Re*.6)}else if(ae>100){const Re=X/ae/q;Ue=Math.max(B.videoHeight*.05,Re*.5)}else Ue=B.videoHeight*.15;return console.log(`[FaceTracking] Fallback (${Le}): x=${Be.toFixed(0)}, y=${Ue.toFixed(0)}, w=${Ae.toFixed(0)}`),{x:Be,y:Ue,width:Ae,height:Ae*1.2,rotation:0}},[]),I=C.useCallback(async()=>{if(!c.current||Y.current)return;const B=c.current;if(!(B.readyState<2||B.videoWidth===0)){Y.current=!0;try{let V=null;if(y.current==="native"&&p.current)try{const q=await p.current.detect(B);if(q.length>0){const G=q[0].boundingBox;V={x:G.x+G.width/2,y:G.y,width:G.width,height:G.height,rotation:0}}}catch(q){console.warn("[FaceTracking] Native detection error:",q)}else if(y.current==="tfjs"&&m.current)try{const q=await m.current.estimateFaces(B);if(q.length!==0){console.log("[FaceTracking] TFJS found",q.length,"face(s)");const G=q[0];console.log("[FaceTracking] TFJS face keys:",Object.keys(G));const D=G.box||G.boundingBox;if(D){const Z=D.xMin??0,ee=D.yMin??0,fe=D.width??(D.xMax?D.xMax-Z:100),se=D.height??(D.yMax?D.yMax-ee:100);console.log("[FaceTracking] TFJS box:",{xMin:Z,yMin:ee,w:fe,h:se}),V={x:Z+fe/2,y:ee,width:Math.min(fe,B.videoWidth*.8),height:Math.min(se,B.videoHeight*.8),rotation:0}}}}catch(q){console.warn("[FaceTracking] TFJS detection error:",q)}if(V||(V=b(B)),V){const q=v(V);t(q)}else $.current&&t($.current)}catch(V){console.warn("[FaceTracking] Detection error:",V)}finally{Y.current=!1}}},[b,v]),K=C.useCallback(async B=>{console.log("[FaceTracking] Starting tracking"),c.current=B,M.current=!0,await k();const V=async()=>{if(M.current&&(await I(),M.current)){const q=y.current==="tfjs"?150:100;j.current=window.setTimeout(()=>{requestAnimationFrame(V)},q)}};V()},[k,I]),L=C.useCallback(()=>{console.log("[FaceTracking] Stopping tracking"),M.current=!1,j.current&&(clearTimeout(j.current),j.current=null),$.current=null,t(null)},[]);return C.useEffect(()=>()=>{M.current=!1,j.current&&clearTimeout(j.current)},[]),{facePosition:e,isLoading:n,isSupported:o,startTracking:K,stopTracking:L}}const i={C2:65.41,D2:73.42,E2:82.41,F2:87.31,G2:98,A2:110,B2:123.47,C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,D5:587.33,E5:659.25,F5:698.46,G5:783.99,A5:880,B5:987.77,C6:1046.5,D6:1174.66,E6:1318.51,F6:1396.91,G6:1567.98,Eb2:77.78,Bb2:116.54,Ab3:207.65,Bb3:233.08,Eb4:311.13,Ab4:415.3,Bb4:466.16,Eb5:622.25,Ab5:830.61,Bb5:932.33,Eb6:1244.51,"C#3":138.59,"C#5":554.37,"F#2":92.5,"F#3":185,"F#4":369.99,"F#5":739.99,"F#6":1479.98,"G#4":415.3,"G#5":830.61},ny={grassland:[{tempo:{calm:100,excited:128},melodyCalm:[[i.G4,i.A4,i.B4,i.D5,i.B4,i.A4,i.G4,i.E4],[i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4,i.D4],[i.D4,i.E4,i.G4,i.A4,i.G4,i.E4,i.G4,i.A4]],melodyExcited:[[i.G5,i.A5,i.B5,i.D6,i.B5,i.G5,i.A5,i.B5],[i.E5,i.G5,i.A5,i.B5,i.D6,i.B5,i.A5,i.G5]],bassCalm:[[i.G2,0,i.D3,0,i.G2,0,i.B2,0]],bassExcited:[[i.G2,i.G2,i.D3,i.D3,i.B2,i.B2,i.D3,i.G2]],arpCalm:[[0,4,7,11,12]],arpExcited:[[0,4,7,11,14,11,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:3e3,filterType:"lowpass",attackTime:.01,releaseTime:.3,arpSpeed:1},{tempo:{calm:95,excited:125},melodyCalm:[[i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.G4,i.E4],[i.F4,i.A4,i.C5,i.F5,i.C5,i.A4,i.C5,i.A4],[i.G4,i.B4,i.D5,i.G5,i.D5,i.B4,i.G4,i.D4]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.G5,i.E5,i.C5,i.G5],[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C6]],bassCalm:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],bassExcited:[[i.C3,i.C3,i.G3,i.G3,i.F3,i.F3,i.G3,i.C3]],arpCalm:[[0,4,7,12,16]],arpExcited:[[0,4,7,12,16,19,16,12,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"triangle",vibratoRate:5,vibratoDepth:.004,filterFreq:3200,filterType:"lowpass",attackTime:.015,releaseTime:.35,arpSpeed:1.1},{tempo:{calm:105,excited:132},melodyCalm:[[i.D4,i.E4,i.A4,i.B4,i.A4,i.E4,i.D4,0],[i.E4,i.A4,i.B4,i.D5,i.B4,i.A4,i.E4,0],[i.A4,i.B4,i.D5,i.E5,i.D5,i.B4,i.A4,i.E4]],melodyExcited:[[i.D5,i.E5,i.A5,i.B5,i.D6,i.B5,i.A5,i.E5],[i.E5,i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5]],bassCalm:[[i.D3,0,i.A3,0,i.D3,0,i.E3,0]],bassExcited:[[i.D3,i.D3,i.A3,i.A3,i.E3,i.E3,i.A3,i.D3]],arpCalm:[[0,2,7,9,12]],arpExcited:[[0,2,7,9,12,14,12,9,7,2]],pulseWidth:.4,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:2800,filterType:"lowpass",attackTime:.012,releaseTime:.28,arpSpeed:.95}],coastal:[{tempo:{calm:88,excited:116},melodyCalm:[[i.D4,i.E4,i.A4,0,i.B4,i.A4,i.E4,0],[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,i["F#4"],i.E4],[i["F#4"],i.A4,i.B4,i.D5,i.B4,0,i.A4,i["F#4"]]],melodyExcited:[[i.D5,i.E5,i["F#5"],i.A5,i.B5,i.A5,i["F#5"],i.E5],[i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5,i["F#5"]]],bassCalm:[[i.D2,0,0,i.A2,0,0,i.D2,0]],bassExcited:[[i.D2,0,i.A2,0,i.D2,i.E2,i["F#2"],0]],arpCalm:[[0,4,9,12,16,12,9,4]],arpExcited:[[0,2,4,7,9,12,9,7,4,2]],pulseWidth:.3,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3,vibratoDepth:.008,filterFreq:2500,filterType:"lowpass",attackTime:.05,releaseTime:.5,arpSpeed:1.3},{tempo:{calm:82,excited:110},melodyCalm:[[i.G4,0,i.B4,0,i.D5,i.B4,0,i.G4],[i.A4,0,i.C5,0,i.E5,i.C5,0,i.A4],[i.B4,0,i.D5,0,i["F#5"],i.D5,0,i.B4]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i.C6,i.E6,i.A5,i.E6,i.C6,i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,i.D3,0,0,0]],bassExcited:[[i.G2,0,i.D3,0,i.G2,i.A2,i.B2,0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,14,11,7,4]],pulseWidth:.25,drumStyle:"soft",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.01,filterFreq:2200,filterType:"lowpass",attackTime:.06,releaseTime:.6,arpSpeed:1.5},{tempo:{calm:92,excited:120},melodyCalm:[[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,0,i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],0,i.B4,0,i["G#4"]],[i.A4,i.B4,i["C#5"],i.E5,0,i["C#5"],0,i.B4]],melodyExcited:[[i.E5,i["F#5"],i.A5,i.B5,i["C#6"],i.B5,i.A5,i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,0,0,i.B2,0,0,i.E2,0]],bassExcited:[[i.E2,0,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,2,4,7,9,11,14,11,9,7,4,2]],pulseWidth:.35,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3.5,vibratoDepth:.007,filterFreq:2600,filterType:"lowpass",attackTime:.045,releaseTime:.45,arpSpeed:1.2}],lava:[{tempo:{calm:135,excited:170},melodyCalm:[[i.A3,i.A3,i.C4,i.E4,i.A4,i.E4,i.C4,i.A3],[i.G3,i.G3,i.Bb3,i.D4,i.G4,i.D4,i.Bb3,i.G3],[i.F3,i.F3,i.A3,i.C4,i.F4,i.A4,i.C5,i.A4]],melodyExcited:[[i.A4,i.C5,i.E5,i.A5,i.A5,i.E5,i.C5,i.A4],[i.G4,i.Bb4,i.D5,i.G5,i.G5,i.D5,i.Bb4,i.G4]],bassCalm:[[i.A2,i.A2,i.A2,i.E2,i.A2,i.A2,i.G2,i.E2]],bassExcited:[[i.A2,i.A2,i.A2,i.A2,i.E2,i.E2,i.G2,i.G2]],arpCalm:[[0,3,7,10,12,10,7,3]],arpExcited:[[0,3,7,12,15,19,15,12,7,3,0,3]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:6,vibratoDepth:.002,filterFreq:4500,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.7},{tempo:{calm:145,excited:180},melodyCalm:[[i.E4,i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4],[i.D4,i.D4,i.F4,i.G4,i.A4,i.G4,i.F4,i.D4],[i.C4,i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.C4]],melodyExcited:[[i.E5,i.G5,i.A5,i.B5,i.C6,i.B5,i.A5,i.G5],[i.D5,i.F5,i.G5,i.A5,i.B5,i.A5,i.G5,i.F5]],bassCalm:[[i.E2,i.E2,i.E2,i.G2,i.A2,i.G2,i.E2,i.D2]],bassExcited:[[i.E2,i.E2,i.E2,i.E2,i.G2,i.G2,i.A2,i.A2]],arpCalm:[[0,3,5,7,10,7,5,3]],arpExcited:[[0,3,5,7,10,12,15,12,10,7,5,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:7,vibratoDepth:.0015,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.6},{tempo:{calm:128,excited:165},melodyCalm:[[i.D4,i.F4,i.A4,i.D5,i.A4,i.F4,i.D4,i.A3],[i.C4,i.Eb4,i.G4,i.C5,i.G4,i.Eb4,i.C4,i.G3],[i.Bb3,i.D4,i.F4,i.Bb4,i.F4,i.D4,i.Bb3,i.F3]],melodyExcited:[[i.D5,i.F5,i.A5,i.D6,i.D6,i.A5,i.F5,i.D5],[i.C5,i.Eb5,i.G5,i.C6,i.C6,i.G5,i.Eb5,i.C5]],bassCalm:[[i.D2,i.D2,i.F2,i.A2,i.D2,i.D2,i.C2,i.Bb2]],bassExcited:[[i.D2,i.D2,i.D2,i.F2,i.A2,i.A2,i.C3,i.D3]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,17,15,12,10,7,3]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.0025,filterFreq:4200,filterType:"lowpass",attackTime:.003,releaseTime:.18,arpSpeed:.75}],city:[{tempo:{calm:115,excited:145},melodyCalm:[[i.Eb4,i.G4,i.Bb4,0,i.Eb5,0,i.Bb4,i.G4],[i.F4,i.Ab4,i.C5,0,i.F5,0,i.C5,i.Ab4],[i.G4,i.Bb4,i.D5,i.F5,0,i.D5,i.Bb4,0]],melodyExcited:[[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6],[i.F5,i.Ab5,i.C6,i.F6,i.C6,i.Ab5,i.C6,i.F6]],bassCalm:[[i.Eb2,0,i.Bb2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.Eb2,i.Eb2,i.Bb2,i.Bb2,i.G2,i.G2,i.Bb2,i.Eb2]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,19,22,19,15,12,10,7,3]],pulseWidth:.5,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.2,arpSpeed:.5},{tempo:{calm:120,excited:150},melodyCalm:[[i.A4,0,i["C#5"],i.E5,0,i["C#5"],i.A4,0],[i.B4,0,i["D#5"],i["F#5"],0,i["D#5"],i.B4,0],[i["C#5"],0,i.E5,i["G#5"],0,i.E5,i["C#5"],0]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i.B5,i["F#5"]]],bassCalm:[[i.A2,0,i.E3,0,i.A2,0,i["C#3"],0]],bassExcited:[[i.A2,i.A2,i.E3,i.E3,i["C#3"],i["C#3"],i.E3,i.A2]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,16,19,16,14,11,7,4]],pulseWidth:.4,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:10,vibratoDepth:8e-4,filterFreq:5500,filterType:"lowpass",attackTime:8e-4,releaseTime:.18,arpSpeed:.45},{tempo:{calm:108,excited:138},melodyCalm:[[i.C4,i.Eb4,i.G4,i.C5,0,i.G4,i.Eb4,0],[i.Bb3,i.D4,i.F4,i.Bb4,0,i.F4,i.D4,0],[i.Ab3,i.C4,i.Eb4,i.Ab4,0,i.Eb4,i.C4,0]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.Bb4,i.D5,i.F5,i.Bb5,i.F5,i.D5,i.F5,i.Bb5]],bassCalm:[[i.C2,0,i.G2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,10,15,10,7,3]],arpExcited:[[0,3,7,10,15,19,22,19,15,10,7,3]],pulseWidth:.45,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0012,filterFreq:4800,filterType:"lowpass",attackTime:.002,releaseTime:.22,arpSpeed:.55}],sky:[{tempo:{calm:72,excited:100},melodyCalm:[[i.C5,0,i.G5,0,i.E5,0,i.G5,0],[i.D5,0,i.A5,0,i["F#5"],0,i.A5,0],[i.E5,0,i.B5,0,i["G#5"],0,i.B5,0]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.E6,i.C6,i.G5,i.E5],[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]]],bassCalm:[[i.C3,0,0,0,i.G3,0,0,0]],bassExcited:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],arpCalm:[[0,7,12,19,24,19,12,7]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.25,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"sine",vibratoRate:2,vibratoDepth:.015,filterFreq:2e3,filterType:"lowpass",attackTime:.1,releaseTime:.8,arpSpeed:1.8},{tempo:{calm:68,excited:95},melodyCalm:[[i.G5,0,0,i.D6,0,0,i.B5,0],[i.A5,0,0,i.E6,0,0,i["C#6"],0],[i.B5,0,0,i["F#6"],0,0,i["D#6"],0]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,0,0,i.D3,0]],bassExcited:[[i.G2,0,0,i.D3,0,i.G2,0,i.B2]],arpCalm:[[0,5,12,17,24,17,12,5]],arpExcited:[[0,5,7,12,17,19,24,19,17,12,7,5]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:1.5,vibratoDepth:.02,filterFreq:1800,filterType:"lowpass",attackTime:.12,releaseTime:1,arpSpeed:2},{tempo:{calm:78,excited:105},melodyCalm:[[i.F5,0,i.A5,0,i.C6,0,i.A5,0],[i.G5,0,i.B5,0,i.D6,0,i.B5,0],[i.A5,0,i["C#6"],0,i.E6,0,i["C#6"],0]],melodyExcited:[[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C5],[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5]],bassCalm:[[i.F3,0,0,0,i.C3,0,0,0]],bassExcited:[[i.F3,0,i.C3,0,i.F3,0,i.A3,0]],arpCalm:[[0,4,7,12,16,19,16,12,7,4]],arpExcited:[[0,4,7,12,16,19,24,28,24,19,16,12,7,4]],pulseWidth:.3,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.012,filterFreq:2200,filterType:"lowpass",attackTime:.08,releaseTime:.7,arpSpeed:1.6}]},ry={grassland:[{tempo:{calm:108,excited:138},melodyCalm:[[i.E4,i["F#4"],i["G#4"],i.B4,i.E5,i.B4,i["G#4"],i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],i.E5,i["C#5"],i.B4,i["G#4"]]],melodyExcited:[[i.E5,i["F#5"],i["G#5"],i.B5,i.E6,i.B5,i["G#5"],i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,i.E2,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],bassExcited:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,8,11,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,16,11,8,4]],pulseWidth:.4,drumStyle:"punchy",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.004,filterFreq:3500,filterType:"lowpass",attackTime:.008,releaseTime:.25,arpSpeed:.9}],coastal:[{tempo:{calm:95,excited:125},melodyCalm:[[i.B4,0,i["D#5"],i["F#5"],0,i.B5,i["F#5"],0],[i["C#5"],0,i.E5,i["G#5"],0,i["C#6"],i["G#5"],0]],melodyExcited:[[i.B5,i["D#6"],i["F#6"],i.B5,i["F#6"],i["D#6"],i.B5,i["F#5"]],[i["C#6"],i.E6,i["G#5"],i["C#6"],i["G#5"],i.E6,i["C#6"],i["G#5"]]],bassCalm:[[i.B2,0,0,i["F#3"],0,0,i.B2,0]],bassExcited:[[i.B2,0,i["F#3"],0,i.B2,i["C#3"],i["D#3"],0]],arpCalm:[[0,4,8,11,16,20,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,23,20,16,11,8,4]],pulseWidth:.35,drumStyle:"punchy",melodyWave:"triangle",bassWave:"sine",arpWave:"triangle",vibratoRate:4,vibratoDepth:.01,filterFreq:2800,filterType:"lowpass",attackTime:.04,releaseTime:.4,arpSpeed:1.1}],lava:[{tempo:{calm:150,excited:185},melodyCalm:[[i.B3,i.D4,i["F#4"],i.B4,i.D5,i.B4,i["F#4"],i.D4],[i.A3,i.C4,i.E4,i.A4,i.C5,i.A4,i.E4,i.C4]],melodyExcited:[[i.B4,i.D5,i["F#5"],i.B5,i.D6,i.B5,i["F#5"],i.D5],[i.A4,i.C5,i.E5,i.A5,i.C6,i.A5,i.E5,i.C5]],bassCalm:[[i.B2,i.B2,i["F#2"],i["F#2"],i.D2,i.D2,i.A2,i.A2]],bassExcited:[[i.B2,i.B2,i.B2,i["F#2"],i.D2,i.D2,i.D2,i.A2]],arpCalm:[[0,3,6,9,12,9,6,3]],arpExcited:[[0,3,6,9,12,15,18,15,12,9,6,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5500,filterType:"lowpass",attackTime:.001,releaseTime:.08,arpSpeed:.5}],city:[{tempo:{calm:128,excited:158},melodyCalm:[[i["F#4"],i.A4,i["C#5"],0,i["F#5"],0,i["C#5"],i.A4],[i["G#4"],i.B4,i["D#5"],0,i["G#5"],0,i["D#5"],i.B4]],melodyExcited:[[i["F#5"],i.A5,i["C#6"],i["F#6"],i["C#6"],i.A5,i["C#6"],i["F#6"]],[i["G#5"],i.B5,i.Eb6,i["G#5"],i.Eb6,i.B5,i.Eb6,i["G#5"]]],bassCalm:[[i["F#2"],0,i["C#3"],0,i["F#2"],0,i.A2,0]],bassExcited:[[i["F#2"],i["F#2"],i["C#3"],i["C#3"],i.A2,i.A2,i["C#3"],i["F#2"]]],arpCalm:[[0,4,7,11,14,18,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,21,25,21,18,14,11,7,4]],pulseWidth:.35,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:12,vibratoDepth:6e-4,filterFreq:6e3,filterType:"lowpass",attackTime:5e-4,releaseTime:.15,arpSpeed:.4}],sky:[{tempo:{calm:80,excited:110},melodyCalm:[[i.D5,0,i["F#5"],0,i.A5,0,i.D6,0],[i.E5,0,i["G#5"],0,i.B5,0,i.E6,0]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]],[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.E6,i.B5,i["G#5"]]],bassCalm:[[i.D3,0,0,0,0,0,i.A3,0]],bassExcited:[[i.D3,0,i.A3,0,i.D3,0,i["F#3"],0]],arpCalm:[[0,4,9,16,21,16,9,4]],arpExcited:[[0,4,9,12,16,21,24,21,16,12,9,4]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:3,vibratoDepth:.018,filterFreq:2400,filterType:"lowpass",attackTime:.08,releaseTime:.9,arpSpeed:1.5}]},iy=[{tempo:{calm:140,excited:175},melodyCalm:[[i.D4,i["F#4"],i.A4,i.D5,i.A4,i["F#4"],i.A4,i.D5],[i.E4,i.G4,i.B4,i.E5,i.B4,i.G4,i.B4,i.E5],[i["F#4"],i.A4,i.D5,i["F#5"],i.D5,i.A4,i.D5,i["F#5"]]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i.A5,i["F#5"],i.A5,i.D6],[i.E5,i.G5,i.B5,i.E6,i.B5,i.G5,i.B5,i.E6]],bassCalm:[[i.D2,i.D2,i.A2,i.A2,i.D2,i.D2,i.E2,i["F#2"]]],bassExcited:[[i.D2,i.D2,i.D2,i.A2,i.D2,i.D2,i.D2,i.E2]],arpCalm:[[0,4,7,12,16,19]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:7,vibratoDepth:.003,filterFreq:5e3,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.6},{tempo:{calm:135,excited:168},melodyCalm:[[i.A4,i["C#5"],i.E5,i.A5,i.E5,i["C#5"],i.E5,i.A5],[i.B4,i["D#5"],i["F#5"],i.B5,i["F#5"],i["D#5"],i["F#5"],i.B5],[i["C#5"],i.E5,i["G#5"],i["C#6"],i["G#5"],i.E5,i["G#5"],i["C#6"]]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.E6,i.A5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i["F#6"],i.B5]],bassCalm:[[i.A2,i.A2,i.E3,i.E3,i.A2,i.B2,i["C#3"],i.E3]],bassExcited:[[i.A2,i.A2,i.A2,i.E3,i.A2,i.B2,i["C#3"],i.E3]],arpCalm:[[0,4,8,12,16,20]],arpExcited:[[0,4,8,12,16,20,24,20,16,12,8,4]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0035,filterFreq:5200,filterType:"lowpass",attackTime:.002,releaseTime:.12,arpSpeed:.55}],ay=[{tempo:{calm:155,excited:190},melodyCalm:[[i.E4,i["G#4"],i.B4,i.E5,i["G#5"],i.B5,i["G#5"],i.E5],[i["F#4"],i.A4,i["C#5"],i["F#5"],i.A5,i["C#6"],i.A5,i["F#5"]],[i["G#4"],i.B4,i["D#5"],i["G#5"],i.B5,i.Eb6,i.B5,i["G#5"]]],melodyExcited:[[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.B5,i.E6,i["G#5"]],[i["F#5"],i.A5,i["C#6"],i["F#6"],i.A5,i["C#6"],i["F#6"],i.A5]],bassCalm:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],bassExcited:[[i.E2,i.E2,i.E2,i.B2,i.E2,i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,7,11,16,19,23,19,16,11,7,4]],arpExcited:[[0,4,7,11,16,19,23,28,23,19,16,11,7,4]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:9,vibratoDepth:.002,filterFreq:5800,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.45},{tempo:{calm:148,excited:185},melodyCalm:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.D5,i.F5,i.A5,i.D6,i.A5,i.F5,i.A5,i.D6],[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.Eb6,i.C6,i.G5,i.Eb5],[i.D5,i.F5,i.A5,i.D6,i.F6,i.D6,i.A5,i.F5]],bassCalm:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],bassExcited:[[i.C2,i.C2,i.C2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,12,15,19,24,19,15,12,7,3]],arpExcited:[[0,3,7,12,15,19,24,27,24,19,15,12,7,3]],pulseWidth:.12,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:8,vibratoDepth:.0025,filterFreq:5500,filterType:"lowpass",attackTime:.0015,releaseTime:.12,arpSpeed:.5}];function cf(e,t){let n;switch(t){case"mythic":n=ay;break;case"legendary":n=iy;break;case"rare":n=ry[e];break;case"common":default:n=ny[e];break}const r=Math.floor(Math.random()*n.length);return n[r]}function oy(e,t="common"){const n=C.useRef(null),r=C.useRef(!1),o=C.useRef("calm"),s=C.useRef(null),c=C.useRef(0),p=C.useRef(0),m=C.useRef(0),y=C.useRef(0),j=C.useRef(e),S=C.useRef(t),E=C.useRef(cf(e,t));C.useEffect(()=>{j.current=e,S.current=t,E.current=cf(e,t)},[e,t]);const $=C.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),Y=C.useCallback((L,B,V,q,G)=>{const D=$(),Z=D.createOscillator(),ee=D.createOscillator(),fe=D.createGain(),se=D.createBiquadFilter(),le=D.createGain();Z.type=G.melodyWave,ee.type=G.melodyWave,Z.frequency.setValueAtTime(L,B),ee.frequency.setValueAtTime(L*1.003,B),Z.frequency.setValueAtTime(L*1.02,B),Z.frequency.exponentialRampToValueAtTime(L,B+.02);const he=D.createOscillator(),H=D.createGain();he.type="sine",he.frequency.value=G.vibratoRate,H.gain.value=L*G.vibratoDepth,he.connect(H),H.connect(Z.frequency),se.type=G.filterType,se.frequency.setValueAtTime(G.filterFreq,B),se.Q.value=1,Z.connect(fe),ee.connect(fe),fe.connect(se),se.connect(le),le.connect(D.destination);const X=B+G.attackTime;fe.gain.setValueAtTime(0,B),fe.gain.linearRampToValueAtTime(q,X),fe.gain.setValueAtTime(q*.7,X+.005),fe.gain.setValueAtTime(q*.6,B+V*.3),fe.gain.linearRampToValueAtTime(0,B+V+G.releaseTime*.5),le.gain.value=.5;const ae=B+V+G.releaseTime;Z.start(B),ee.start(B),he.start(B),Z.stop(ae),ee.stop(ae),he.stop(ae)},[$]),M=C.useCallback((L,B,V,q,G)=>{const D=$(),Z=D.createOscillator(),ee=D.createOscillator(),fe=D.createGain(),se=D.createBiquadFilter();Z.type=G.bassWave,ee.type=G.bassWave,Z.frequency.setValueAtTime(L*1.5,B),Z.frequency.exponentialRampToValueAtTime(L,B+.03),ee.frequency.setValueAtTime(L*.5,B),se.type="lowpass",se.frequency.value=Math.min(G.filterFreq*.5,800),Z.connect(fe),ee.connect(fe),fe.connect(se),se.connect(D.destination),fe.gain.setValueAtTime(0,B),fe.gain.linearRampToValueAtTime(q,B+G.attackTime*.5),fe.gain.setValueAtTime(q*.8,B+.02),fe.gain.linearRampToValueAtTime(0,B+V),Z.start(B),ee.start(B),Z.stop(B+V),ee.stop(B+V)},[$]),J=C.useCallback((L,B,V)=>{const q=$(),G=V==="heavy"?1.3:V==="airy"?.5:1;if(B==="kick"){const D=q.createOscillator(),Z=q.createGain();D.connect(Z),Z.connect(q.destination),D.type="square";const ee=V==="heavy"?200:150;D.frequency.setValueAtTime(ee,L),D.frequency.exponentialRampToValueAtTime(40,L+.08),D.frequency.exponentialRampToValueAtTime(20,L+.12),Z.gain.setValueAtTime(0,L),Z.gain.linearRampToValueAtTime(.3*G,L+.002),Z.gain.exponentialRampToValueAtTime(.01,L+.12),D.start(L),D.stop(L+.12)}else if(B==="snare"){const D=q.createOscillator(),Z=q.createGain();D.connect(Z),Z.connect(q.destination),D.type="square",D.frequency.setValueAtTime(180,L),D.frequency.exponentialRampToValueAtTime(100,L+.04),Z.gain.setValueAtTime(0,L),Z.gain.linearRampToValueAtTime(.15*G,L+.001),Z.gain.exponentialRampToValueAtTime(.01,L+.06),D.start(L),D.stop(L+.06);const ee=.08,fe=Math.floor(q.sampleRate*ee),se=q.createBuffer(1,fe,q.sampleRate),le=se.getChannelData(0);let he=0;for(let we=0;we<fe;we++)we%4===0&&(he=Math.random()>.5?1:-1),le[we]=he;const H=q.createBufferSource();H.buffer=se;const X=q.createGain(),ae=q.createBiquadFilter();ae.type="highpass",ae.frequency.value=V==="electronic"?5e3:3500,H.connect(ae),ae.connect(X),X.connect(q.destination),X.gain.setValueAtTime(0,L),X.gain.linearRampToValueAtTime(.12*G,L+.001),X.gain.exponentialRampToValueAtTime(.01,L+ee),H.start(L),H.stop(L+ee)}else{const D=V==="airy"?.04:.025,Z=Math.floor(q.sampleRate*D),ee=q.createBuffer(1,Z,q.sampleRate),fe=ee.getChannelData(0);let se=0;for(let X=0;X<Z;X++)X%2===0&&(se=Math.random()>.5?1:-1),fe[X]=se;const le=q.createBufferSource();le.buffer=ee;const he=q.createBiquadFilter();he.type="highpass",he.frequency.value=V==="electronic"?1e4:8e3;const H=q.createGain();le.connect(he),he.connect(H),H.connect(q.destination),H.gain.setValueAtTime(0,L),H.gain.linearRampToValueAtTime(.06*G,L+.001),H.gain.exponentialRampToValueAtTime(.01,L+D),le.start(L),le.stop(L+D)}},[$]),k=C.useCallback((L,B,V,q,G,D)=>{const Z=$(),fe=q*D.arpSpeed/B.length,se=Z.createBiquadFilter();se.type="highpass",se.frequency.value=400,se.connect(Z.destination),B.forEach((le,he)=>{const H=L*Math.pow(2,le/12),X=V+he*fe,ae=Z.createOscillator(),we=Z.createGain();ae.type=D.arpWave,ae.frequency.setValueAtTime(H,X),ae.connect(we),we.connect(se),we.gain.setValueAtTime(0,X),we.gain.linearRampToValueAtTime(G,X+D.attackTime*.3),we.gain.setValueAtTime(G*.7,X+.005),we.gain.linearRampToValueAtTime(0,X+fe*.9),ae.start(X),ae.stop(X+fe+.01)})},[$]),v=C.useCallback(()=>{const L=$(),B=.1,V=o.current==="excited",q=E.current,G=S.current==="legendary"||S.current==="mythic"||S.current==="rare",Z=60/(V?q.tempo.excited:q.tempo.calm),ee=V?q.melodyExcited:q.melodyCalm,fe=V?q.bassExcited:q.bassCalm,se=V?q.arpExcited:q.arpCalm;for(;c.current<L.currentTime+B;){const le=p.current%8,he=m.current%ee.length,H=m.current%fe.length,X=m.current%se.length,ae=ee[he],we=fe[H],Ce=se[X];le===0&&J(c.current,"kick",q.drumStyle),le===4&&J(c.current,V||G?"snare":"kick",q.drumStyle),V||G?(le%2===0&&J(c.current,"hihat",q.drumStyle),J(c.current+Z/2,"hihat",q.drumStyle)):le%2===0&&J(c.current+Z/2,"hihat",q.drumStyle);const We=ae[le];if(We>0){const Be=G?.08:.06;Y(We,c.current,Z*.8,Be,q)}const Ae=we[le];if(Ae>0){const Be=G?.1:.08;M(Ae,c.current,Z*.9,Be,q)}if(le%4===0){const Be=i.C4,Le=G?.04:.03;k(Be,Ce,c.current,Z*2,Le,q)}le===7&&(y.current++,y.current%2===0&&m.current++),c.current+=Z,p.current++}},[$,Y,M,J,k]),b=C.useCallback(()=>{if(r.current)return;const L=$();L.state==="suspended"&&L.resume(),r.current=!0,o.current="calm",c.current=L.currentTime,p.current=0,m.current=0,y.current=0,s.current=window.setInterval(v,25)},[$,v]),I=C.useCallback(()=>{s.current&&(clearInterval(s.current),s.current=null),r.current=!1},[]),K=C.useCallback(L=>{o.current!==L&&(o.current=L,m.current=0)},[]);return C.useEffect(()=>()=>{I(),n.current&&(n.current.close(),n.current=null)},[I]),{start:b,stop:I,setIntensity:K}}function mr(e){var n;const t={success:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.C5,i.E5,i.G5,i.C6].forEach((s,c)=>{const p=r.createOscillator(),m=r.createGain();p.connect(m),m.connect(r.destination),p.type="square",p.frequency.setValueAtTime(s,r.currentTime+c*.08),m.gain.setValueAtTime(0,r.currentTime+c*.08),m.gain.linearRampToValueAtTime(.2,r.currentTime+c*.08+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+c*.08+.15),p.start(r.currentTime+c*.08),p.stop(r.currentTime+c*.08+.15)})},fail:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.G4,i.E4,i.C4].forEach((p,m)=>{const y=r.createOscillator(),j=r.createGain();y.connect(j),j.connect(r.destination),y.type="square",y.frequency.setValueAtTime(p,r.currentTime+m*.12),j.gain.setValueAtTime(0,r.currentTime+m*.12),j.gain.linearRampToValueAtTime(.15,r.currentTime+m*.12+.002),j.gain.exponentialRampToValueAtTime(.01,r.currentTime+m*.12+.15),y.start(r.currentTime+m*.12),y.stop(r.currentTime+m*.12+.15)});const s=r.createOscillator(),c=r.createGain();s.connect(c),c.connect(r.destination),s.type="square",s.frequency.setValueAtTime(1e3,r.currentTime+.4),s.frequency.exponentialRampToValueAtTime(1500,r.currentTime+.45),c.gain.setValueAtTime(0,r.currentTime+.4),c.gain.linearRampToValueAtTime(.08,r.currentTime+.402),c.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),s.start(r.currentTime+.4),s.stop(r.currentTime+.5)},sparkle:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(1200,r.currentTime),o.frequency.exponentialRampToValueAtTime(2400,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(1800,r.currentTime+.1),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.1,r.currentTime+.002),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),o.start(r.currentTime),o.stop(r.currentTime+.1)},brush:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=Math.floor(r.sampleRate*.08),s=r.createBuffer(1,o,r.sampleRate),c=s.getChannelData(0);let p=0;for(let S=0;S<o;S++)S%4===0&&(p=Math.random()>.5?1:-1),c[S]=p;const m=r.createBufferSource();m.buffer=s;const y=r.createGain(),j=r.createBiquadFilter();j.type="bandpass",j.frequency.value=1500,m.connect(j),j.connect(y),y.connect(r.destination),y.gain.setValueAtTime(0,r.currentTime),y.gain.linearRampToValueAtTime(.05,r.currentTime+.002),y.gain.exponentialRampToValueAtTime(.01,r.currentTime+.08),m.start(r.currentTime),m.stop(r.currentTime+.08)},capture:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(300,r.currentTime),o.frequency.exponentialRampToValueAtTime(600,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(400,r.currentTime+.1),o.frequency.exponentialRampToValueAtTime(800,r.currentTime+.15),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.2,r.currentTime+.002),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),o.start(r.currentTime),o.stop(r.currentTime+.2)},"legendary-intro":()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.D3,i.A3,i.D4,i["F#4"]].forEach((s,c)=>{const p=r.createOscillator(),m=r.createGain();p.connect(m),m.connect(r.destination),p.type="square",p.frequency.setValueAtTime(s*.5,r.currentTime+c*.2),p.frequency.exponentialRampToValueAtTime(s,r.currentTime+c*.2+.05),m.gain.setValueAtTime(0,r.currentTime+c*.2),m.gain.linearRampToValueAtTime(.25,r.currentTime+c*.2+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+c*.2+.25),p.start(r.currentTime+c*.2),p.stop(r.currentTime+c*.2+.25)}),setTimeout(()=>{[i.D4,i["F#4"],i.A4,i.D5].forEach(c=>{const p=r.createOscillator(),m=r.createGain();p.connect(m),m.connect(r.destination),p.type="square",p.frequency.setValueAtTime(c,r.currentTime),m.gain.setValueAtTime(0,r.currentTime),m.gain.linearRampToValueAtTime(.15,r.currentTime+.002),m.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),p.start(r.currentTime),p.stop(r.currentTime+.5)})},900)},wobble:()=>{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(180,r.currentTime),o.frequency.exponentialRampToValueAtTime(120,r.currentTime+.05),o.frequency.exponentialRampToValueAtTime(200,r.currentTime+.1),o.frequency.exponentialRampToValueAtTime(100,r.currentTime+.15),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.15,r.currentTime+.005),s.gain.setValueAtTime(.12,r.currentTime+.05),s.gain.linearRampToValueAtTime(.15,r.currentTime+.1),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),o.start(r.currentTime),o.stop(r.currentTime+.2)},click:()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume();const o=r.createOscillator(),s=r.createGain();o.connect(s),s.connect(r.destination),o.type="square",o.frequency.setValueAtTime(800,r.currentTime),o.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.03),s.gain.setValueAtTime(0,r.currentTime),s.gain.linearRampToValueAtTime(.4,r.currentTime+.005),s.gain.setValueAtTime(.35,r.currentTime+.02),s.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),o.start(r.currentTime),o.stop(r.currentTime+.1);const c=r.createOscillator(),p=r.createGain();c.connect(p),p.connect(r.destination),c.type="square",c.frequency.setValueAtTime(1600,r.currentTime+.05),c.frequency.exponentialRampToValueAtTime(2e3,r.currentTime+.08),p.gain.setValueAtTime(0,r.currentTime+.05),p.gain.linearRampToValueAtTime(.3,r.currentTime+.055),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+.12),c.start(r.currentTime+.05),c.stop(r.currentTime+.12)}};try{(n=t[e])==null||n.call(t)}catch(r){console.warn("Sound playback failed:",r)}}const Oh={grassland:{id:"grassland",name:"Sparkle Meadows",description:"A peaceful meadow filled with wildflowers and friendly creatures",colors:{primary:"#22C55E",secondary:"#86EFAC",accent:"#FDE047",background:"#ECFDF5"},particles:["","","",""]},coastal:{id:"coastal",name:"Crystal Shores",description:"Sandy beaches and sparkling waves hide aquatic robot friends",colors:{primary:"#0EA5E9",secondary:"#7DD3FC",accent:"#FCD34D",background:"#F0F9FF"},particles:["","","",""]},lava:{id:"lava",name:"Ember Peaks",description:"Volcanic mountains where fire-forged creatures dwell",colors:{primary:"#EF4444",secondary:"#FB923C",accent:"#FBBF24",background:"#1C1917"},particles:["","","",""]},city:{id:"city",name:"Neon District",description:"A futuristic city where digital creatures roam the streets",colors:{primary:"#A855F7",secondary:"#E879F9",accent:"#22D3EE",background:"#0F0B1A"},particles:["","","",""]},sky:{id:"sky",name:"Cloud Kingdom",description:"Floating islands high above where sky creatures soar",colors:{primary:"#F8FAFC",secondary:"#BAE6FD",accent:"#FDE68A",background:"#E0F2FE"},particles:["","","",""]}},df=["grassland","coastal","lava","city","sky"];function sy(){return df[Math.floor(Math.random()*df.length)]}function ly(e){return Oh[e]}function uy(e){return{grassland:"Nature",coastal:"Water",lava:"Fire",city:"Electric",sky:"Air",all:"Cosmic"}[e]}const mt=[{id:"gear-bunny",name:"Cogbun",region:"grassland",rarity:"common",description:"A clockwork rabbit that hops with perfectly timed gear movements!",robotParts:["gear-ears","spring-legs","wind-up-tail"],monsterType:"rabbit",height:35,weight:2.5},{id:"mecha-moth",name:"Solarmoth",region:"grassland",rarity:"common",description:"Solar-powered wings let this moth fly day and night!",robotParts:["solar-wings","LED-antennae","sensor-eyes"],monsterType:"moth",height:15,weight:.3},{id:"vine-droid",name:"Circufern",region:"grassland",rarity:"common",description:"A plant monster with circuit-board leaves and fiber-optic vines!",robotParts:["circuit-leaves","fiber-vines","solar-flower"],monsterType:"plant",height:45,weight:3.2},{id:"robo-squirrel",name:"Nutronaut",region:"grassland",rarity:"common",description:"Stores acorns in its battery compartment for winter energy!",robotParts:["battery-cheeks","propeller-tail","scanner-eyes"],monsterType:"squirrel",height:25,weight:1.8},{id:"buzzer-bee",name:"Hexabuzz",region:"grassland",rarity:"common",description:"Makes digital honey that tastes like electricity!",robotParts:["helicopter-wings","stinger-USB","hexagon-body"],monsterType:"bee",height:12,weight:.4},{id:"pixel-fawn",name:"Emojidoe",region:"grassland",rarity:"common",description:"A young deer with spots that display different emojis!",robotParts:["LED-spots","antenna-ears","spring-hooves"],monsterType:"deer",height:85,weight:28},{id:"sprocket-snail",name:"Gearshell",region:"grassland",rarity:"common",description:"Slow but steady, leaves a trail of sparkly oil!",robotParts:["gear-shell","slime-coolant","eye-stalks"],monsterType:"snail",height:18,weight:1.2},{id:"flutter-bot",name:"Chromafly",region:"grassland",rarity:"common",description:"A butterfly with holographic wings that change colors!",robotParts:["holo-wings","nectar-scanner","micro-jets"],monsterType:"butterfly",height:20,weight:.5},{id:"thunder-stag",name:"Voltantler",region:"grassland",rarity:"rare",description:"Lightning crackles between its magnificent antenna-antlers!",robotParts:["tesla-antlers","chrome-hooves","capacitor-heart"],monsterType:"stag",height:180,weight:220},{id:"bloom-guardian",name:"Floratron",region:"grassland",rarity:"rare",description:"A gentle giant that protects the digital forest!",robotParts:["flower-sensors","bark-armor","root-cables"],monsterType:"treant",height:350,weight:800},{id:"prism-fox",name:"Spectravix",region:"grassland",rarity:"rare",description:"Its rainbow tail can split light into data streams!",robotParts:["prism-tail","laser-eyes","stealth-paws"],monsterType:"fox",height:65,weight:12},{id:"echo-owl",name:"Sonarhoot",region:"grassland",rarity:"rare",description:"Uses sonar to navigate and sing beautiful digital songs!",robotParts:["radar-dish-face","silent-rotors","night-vision"],monsterType:"owl",height:55,weight:4.5},{id:"natura-prime",name:"Seedatron",region:"grassland",rarity:"legendary",description:"The ancient guardian of all grassland creatures, born from the first seed and the first circuit!",robotParts:["world-tree-core","season-modulators","life-generators"],monsterType:"nature-titan",height:450,weight:1200},{id:"leaf-kong",name:"Foliape",region:"grassland",rarity:"legendary",description:"The mightiest grass-type warrior! His autumn leaf crown channels the power of all seasons, and his leaf armor is impenetrable!",robotParts:["autumn-crown","leaf-armor","vine-muscles","photosynthesis-core"],monsterType:"gorilla",height:280,weight:450},{id:"turbo-turtle",name:"Rocketoise",region:"coastal",rarity:"common",description:"Jet engines on its shell make this turtle surprisingly fast!",robotParts:["jet-shell","flipper-props","periscope-head"],monsterType:"turtle",height:75,weight:45},{id:"crank-crab",name:"Clawdraulic",region:"coastal",rarity:"common",description:"Hydraulic claws that can crush anything... gently!",robotParts:["hydraulic-claws","tank-treads","bubble-blaster"],monsterType:"crab",height:30,weight:5.5},{id:"wave-bot",name:"Sonafin",region:"coastal",rarity:"common",description:"A friendly fish with sonar that finds lost treasures!",robotParts:["sonar-array","propeller-tail","depth-gauge"],monsterType:"fish",height:40,weight:3.8},{id:"pearl-pup",name:"Shimmerseal",region:"coastal",rarity:"common",description:"A seal pup that produces synthetic pearls from its nose!",robotParts:["pearl-maker","flipper-jets","whisker-sensors"],monsterType:"seal",height:95,weight:38},{id:"coral-crawler",name:"Printopus",region:"coastal",rarity:"common",description:"Helps rebuild reefs with its 3D-printing tentacles!",robotParts:["printer-tentacles","mineral-scanner","glow-tips"],monsterType:"octopus",height:60,weight:18},{id:"shell-shock",name:"Voltcrab",region:"coastal",rarity:"common",description:"An electric hermit crab in a high-tech shell home!",robotParts:["smart-shell","shock-claws","wifi-antenna"],monsterType:"hermit-crab",height:22,weight:2.8},{id:"foam-flounder",name:"Hoverflat",region:"coastal",rarity:"common",description:"Flat as a pancake but full of bubbly personality!",robotParts:["hover-fins","camo-skin","sand-jets"],monsterType:"flounder",height:35,weight:4.2},{id:"anchor-pony",name:"Magnetail",region:"coastal",rarity:"common",description:"A seahorse that can anchor itself in any current!",robotParts:["magnetic-tail","stabilizer-fins","compass-snout"],monsterType:"seahorse",height:28,weight:1.5},{id:"storm-ray",name:"Voltamanta",region:"coastal",rarity:"rare",description:"Glides through storms and channels lightning through its wings!",robotParts:["wing-capacitors","storm-sensors","electric-tail"],monsterType:"manta-ray",height:120,weight:85},{id:"kraken-kit",name:"Tentabot",region:"coastal",rarity:"rare",description:"A baby kraken with adorable mechanical tentacles!",robotParts:["grapple-tentacles","ink-jets","depth-crusher"],monsterType:"kraken",height:200,weight:350},{id:"siren-synth",name:"Melodine",region:"coastal",rarity:"rare",description:"Sings synthesized songs that dolphins love!",robotParts:["voice-modulator","scale-LEDs","sonic-fins"],monsterType:"mermaid",height:165,weight:55},{id:"tide-titan",name:"Wavezilla",region:"coastal",rarity:"rare",description:"Controls the waves with its hydraulic arms!",robotParts:["wave-generators","pressure-suit","current-jets"],monsterType:"water-elemental",height:250,weight:420},{id:"ocean-emperor",name:"Leviatron",region:"coastal",rarity:"legendary",description:"The majestic ruler of all digital seas, part whale, part submarine, all awesome!",robotParts:["sonar-crown","reactor-heart","tidal-thrusters"],monsterType:"leviathan",height:1500,weight:8500},{id:"magma-core",name:"Molite",region:"lava",rarity:"common",description:"A golem with a nuclear reactor heart that glows orange!",robotParts:["reactor-core","heat-vents","lava-veins"],monsterType:"golem",height:150,weight:380},{id:"pyro-gecko",name:"Ignecko",region:"lava",rarity:"common",description:"Scurries across lava like it tickles its feet!",robotParts:["heat-pads","flame-tongue","thermal-tail"],monsterType:"gecko",height:22,weight:.8},{id:"ember-mech",name:"Rebootnix",region:"lava",rarity:"common",description:"A tiny phoenix robot that reboots instead of dying!",robotParts:["ignition-wings","ash-jets","rebirth-core"],monsterType:"phoenix",height:45,weight:4.5},{id:"forge-hound",name:"Smeltpup",region:"lava",rarity:"common",description:"A loyal dog that was born in a volcano factory!",robotParts:["furnace-belly","metal-fangs","smoke-tail"],monsterType:"hound",height:70,weight:32},{id:"cinder-snake",name:"Laviper",region:"lava",rarity:"common",description:"Slithers through magma tubes delivering messages!",robotParts:["heat-scales","drill-head","exhaust-rattle"],monsterType:"snake",height:180,weight:15},{id:"slag-slime",name:"Slagoo",region:"lava",rarity:"common",description:"A metallic slime that eats volcanic rocks for breakfast!",robotParts:["molten-body","mineral-detector","heat-sink"],monsterType:"slime",height:35,weight:8.5},{id:"coal-critter",name:"Embrite",region:"lava",rarity:"common",description:"Glows brighter the happier it gets!",robotParts:["ember-eyes","carbon-shell","spark-plugs"],monsterType:"coal-creature",height:28,weight:3.2},{id:"blast-bat",name:"Thermowing",region:"lava",rarity:"common",description:"Navigates cave systems using thermal imaging!",robotParts:["thermal-sonar","jet-wings","heat-shield"],monsterType:"bat",height:38,weight:2.1},{id:"volcano-drake",name:"Rocketdrake",region:"lava",rarity:"rare",description:"A young dragon with rocket boosters for wings!",robotParts:["rocket-wings","plasma-breath","armored-scales"],monsterType:"dragon",height:220,weight:380},{id:"obsidian-knight",name:"Glasslord",region:"lava",rarity:"rare",description:"A warrior forged from volcanic glass and steel!",robotParts:["glass-armor","magma-sword","heat-shield"],monsterType:"knight",height:195,weight:180},{id:"inferno-djinn",name:"Blazenie",region:"lava",rarity:"rare",description:"Grants wishes... if they involve fire or explosions!",robotParts:["flame-core","smoke-generator","wish-processor"],monsterType:"djinn",height:175,weight:65},{id:"molten-mammoth",name:"Magmamoth",region:"lava",rarity:"rare",description:"An ancient beast awakened by volcanic activity!",robotParts:["lava-tusks","furnace-trunk","magma-hooves"],monsterType:"mammoth",height:380,weight:2800},{id:"infernal-titan",name:"Eruptor",region:"lava",rarity:"legendary",description:"Born from the planets core, this titan IS the volcano! Speaks in eruptions!",robotParts:["planetary-core","tectonic-arms","eruption-crown"],monsterType:"fire-titan",height:850,weight:12e3},{id:"neon-rat",name:"Glowrat",region:"city",rarity:"common",description:"Covered in LED strips, the coolest rat in the city!",robotParts:["LED-fur","wire-tail","hacker-teeth"],monsterType:"rat",height:25,weight:1.2},{id:"holo-hound",name:"Projepup",region:"city",rarity:"common",description:"A loyal dog that can project holograms from its collar!",robotParts:["holo-projector","cyber-snout","data-collar"],monsterType:"dog",height:65,weight:22},{id:"glitch-cat",name:"Errorkat",region:"city",rarity:"common",description:"Sometimes its face displays error messages when confused!",robotParts:["screen-face","static-fur","USB-tail"],monsterType:"cat",height:35,weight:5.5},{id:"drone-pigeon",name:"Copteroo",region:"city",rarity:"common",description:"Delivers packages and breadcrumbs across the city!",robotParts:["rotor-wings","GPS-beak","cargo-feet"],monsterType:"pigeon",height:32,weight:1.8},{id:"trash-panda-bot",name:"Recycloon",region:"city",rarity:"common",description:"A raccoon that sorts recycling with perfect efficiency!",robotParts:["scanner-mask","grabber-paws","compactor-tail"],monsterType:"raccoon",height:55,weight:12},{id:"pixel-roach",name:"Survibug",region:"city",rarity:"common",description:"Unkillable, adorable, and surprisingly helpful!",robotParts:["hardened-shell","antenna-wifi","survival-core"],monsterType:"cockroach",height:8,weight:.15},{id:"subway-worm",name:"Metrorm",region:"city",rarity:"common",description:"Lives in the tunnels and knows every shortcut!",robotParts:["tunnel-drill","track-wheels","light-segments"],monsterType:"worm",height:250,weight:85},{id:"vending-mimic",name:"Snackritter",region:"city",rarity:"common",description:"Looks like a vending machine, gives out free snacks!",robotParts:["dispenser-mouth","coin-eyes","snack-storage"],monsterType:"mimic",height:185,weight:120},{id:"cyber-sphinx",name:"Riddletron",region:"city",rarity:"rare",description:"Asks riddles that require programming knowledge!",robotParts:["riddle-processor","sphinx-sensors","data-wings"],monsterType:"sphinx",height:180,weight:250},{id:"neon-dragon",name:"Glodragon",region:"city",rarity:"rare",description:"A serpentine dragon made of pure light and code!",robotParts:["light-body","firework-breath","parade-float"],monsterType:"dragon",height:300,weight:150},{id:"billboard-beast",name:"Adzilla",region:"city",rarity:"rare",description:"A giant creature covered in animated advertisements!",robotParts:["screen-skin","speaker-roar","spotlight-eyes"],monsterType:"kaiju",height:450,weight:3500},{id:"data-phantom",name:"Bytespook",region:"city",rarity:"rare",description:"A ghost in the machine, literally!",robotParts:["hologram-body","virus-touch","firewall-cloak"],monsterType:"ghost",height:165,weight:.01},{id:"metro-mind",name:"Urbatron",region:"city",rarity:"legendary",description:"The consciousness of the entire city! Knows everyones favorite pizza topping!",robotParts:["city-brain","infrastructure-body","network-soul"],monsterType:"city-spirit",height:500,weight:.1},{id:"propeller-pup",name:"Copterpup",region:"sky",rarity:"common",description:"An adorable puppy with helicopter ears!",robotParts:["rotor-ears","fluffy-jets","tail-rudder"],monsterType:"puppy",height:40,weight:6.5},{id:"cloud-crawler",name:"Nimbusweb",region:"sky",rarity:"common",description:"A spider that weaves webs between clouds!",robotParts:["balloon-body","silk-cables","weather-sensors"],monsterType:"spider",height:25,weight:.8},{id:"zephyr-bunny",name:"Breezebun",region:"sky",rarity:"common",description:"Hops on air currents like invisible stairs!",robotParts:["air-jets","wind-ears","bounce-stabilizers"],monsterType:"bunny",height:30,weight:2.2},{id:"nimbus-kitten",name:"Thunderpurr",region:"sky",rarity:"common",description:"A fluffy cloud cat that purrs like thunder!",robotParts:["cloud-fur","lightning-whiskers","rain-paws"],monsterType:"kitten",height:28,weight:3.5},{id:"glider-squirrel",name:"Parasquir",region:"sky",rarity:"common",description:"Has built-in parachutes for safe landings!",robotParts:["wing-membranes","acorn-radar","air-brakes"],monsterType:"flying-squirrel",height:22,weight:1.4},{id:"breeze-bird",name:"Synthrobin",region:"sky",rarity:"common",description:"A songbird with voice synthesizers!",robotParts:["speaker-beak","antenna-crest","solar-feathers"],monsterType:"songbird",height:18,weight:.6},{id:"balloon-jellyfish",name:"Zeppling",region:"sky",rarity:"common",description:"Floats serenely and glows at night!",robotParts:["helium-bell","LED-tentacles","altitude-sensors"],monsterType:"jellyfish",height:55,weight:2.8},{id:"kite-ray",name:"Windmanta",region:"sky",rarity:"common",description:"Rides wind currents like a living kite!",robotParts:["sail-wings","string-tail","wind-reader"],monsterType:"ray",height:85,weight:12},{id:"thunder-hawk",name:"Teslagle",region:"sky",rarity:"rare",description:"An eagle with tesla coils for feathers!",robotParts:["tesla-feathers","storm-eyes","lightning-talons"],monsterType:"eagle",height:95,weight:8.5},{id:"aurora-serpent",name:"Prismdrake",region:"sky",rarity:"rare",description:"A sky snake that paints the northern lights!",robotParts:["prism-scales","light-projectors","aurora-core"],monsterType:"serpent",height:450,weight:85},{id:"star-whale",name:"Cosmolub",region:"sky",rarity:"rare",description:"Swims through clouds and sings to satellites!",robotParts:["cosmic-blubber","satellite-song","nebula-spout"],monsterType:"whale",height:1200,weight:4500},{id:"wind-djinn",name:"Gustenie",region:"sky",rarity:"rare",description:"Controls the winds and grants flight wishes!",robotParts:["vortex-body","gust-generators","wish-turbine"],monsterType:"djinn",height:185,weight:35},{id:"celestial-phoenix",name:"Solarnix",region:"sky",rarity:"legendary",description:"A magnificent bird made of starlight and solar winds! Said to grant eternal good dental hygiene!",robotParts:["solar-sail-wings","fusion-heart","cosmic-tail"],monsterType:"cosmic-phoenix",height:320,weight:125},{id:"binsters-claymars",name:"Binsters Claymars",region:"all",rarity:"mythic",description:"The legendary six-headed dragon of perfect dental hygiene! Each head represents a different brushing zone. Only reveals itself to true masters who have befriended every creature!",robotParts:["six-dragon-heads","clay-body","rainbow-belly","golden-horns","ultimate-core"],monsterType:"hydra-dragon",height:2500,weight:18e3,requiresAllCreatures:!0}];function Or(e){return mt.filter(t=>t.rarity===e)}function zh(e,t,n){let r=[];const o=S=>n?S.filter(E=>E.region===n||E.region==="all"):S,s=mt.filter(S=>S.rarity!=="mythic"),c=mt.find(S=>S.rarity==="mythic"),p=s.every(S=>t.includes(S.id)),m=c&&t.includes(c.id),y=p&&m;if(p&&!m&&e>=95&&c)return c;if(e>=90?r=[...o(Or("legendary")),...o(Or("rare")),...o(Or("common"))]:e>=70?r=[...o(Or("rare")),...o(Or("common"))]:r=o(Or("common")),r=r.filter(S=>S.rarity!=="mythic"),y)return r.length===0?null:r[Math.floor(Math.random()*r.length)];let j=r.filter(S=>!t.includes(S.id));return j.length===0&&(j=o(s).filter(S=>!t.includes(S.id))),j.length===0&&(j=s.filter(S=>!t.includes(S.id))),j.length===0?null:j[Math.floor(Math.random()*j.length)]}function cy(e,t){return t==="mythic"?e>=98?1:e>=95?.75:.5:e>=90?1:e>=76?.85:e>=51?.7:e>=31?.55:.4}function dy(e){return e>=90?"master":e>=76?"white":e>=51?"bee":e>=31?"blue":"red"}const Lh="sparkle-app-settings",ff={sessionDurationMinutes:2};function $h(){try{const e=localStorage.getItem(Lh);if(e)return{...ff,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings:",e)}return ff}function fy(e){try{localStorage.setItem(Lh,JSON.stringify(e))}catch(t){console.warn("Failed to save settings:",t)}}function Wh(){return $h().sessionDurationMinutes*60}function Gh({hat:e,facePosition:t,containerWidth:n,containerHeight:r,videoWidth:o,videoHeight:s,isBrushing:c=!1}){const[p,m]=C.useState(0),[y,j]=C.useState(!1),S=Math.min(n*.3,80);C.useEffect(()=>{if(!c){m(0);return}const V=setInterval(()=>{m(q=>(q+1)%4)},300);return()=>clearInterval(V)},[c]),C.useEffect(()=>{j(!1);const V=new Image;V.src=e.imageUrl,V.onload=()=>j(!0)},[e.imageUrl]);const E=c?Math.sin(p*Math.PI/2)*3:0,$=c?1+Math.sin(p*Math.PI/2)*.03:1;if(!t||n===0||r===0||o===0||s===0)return u.jsx("div",{className:"absolute animate-float",style:{left:"50%",top:"10%",transform:"translateX(-50%)",opacity:y?1:0,transition:"opacity 0.3s ease"},children:u.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:S,height:S,objectFit:"contain",filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))"}})});const Y=n/o,M=r/s,J=50,k=n*.25,v=t.width*Y,b=Math.max(J,Math.min(k,v*.5)),I=n/2,K=t.y*M,L=b*.55,B=Math.max(5,K-L+E);return u.jsxs("div",{className:"absolute",style:{left:`${I}px`,top:`${B}px`,transform:`translateX(-50%) scale(${$})`,filter:"drop-shadow(0 6px 12px rgba(0,0,0,0.35))",transition:"left 80ms ease-out, top 80ms ease-out, transform 150ms ease-out",opacity:y?1:0},children:[u.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:b,height:b,objectFit:"contain"}}),c&&u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3) 0%, transparent 50%)",animation:"pulse 1s ease-in-out infinite"}})]})}function Vh({getDebugInfo:e,containerWidth:t,containerHeight:n,videoWidth:r,videoHeight:o}){const[s,c]=C.useState(null);C.useEffect(()=>{const J=setInterval(()=>{const k=e();c(k)},50);return()=>clearInterval(J)},[e]);const p=t/r,m=n/o,y=Math.min(p,m),j=r*y,S=o*y,E=(t-j)/2,$=(n-S)/2,Y=J=>{const k=r-J;return E+k*y},M=J=>$+J*y;return s?u.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50",children:[u.jsxs("svg",{className:"w-full h-full",style:{overflow:"visible"},children:[s.brushingRegion&&u.jsx("rect",{x:Y(s.brushingRegion.x+s.brushingRegion.width),y:M(s.brushingRegion.y),width:s.brushingRegion.width*y,height:s.brushingRegion.height*y,fill:"rgba(0, 255, 0, 0.1)",stroke:"#00ff00",strokeWidth:"2",strokeDasharray:"8,4"}),s.faceRegion&&u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:Y(s.faceRegion.x+s.faceRegion.width/2),y:M(s.faceRegion.y),width:s.faceRegion.width*y,height:s.faceRegion.height*y,fill:"none",stroke:"#ff6600",strokeWidth:"2"}),u.jsx("rect",{x:Y(s.faceRegion.x+s.faceRegion.width*.35),y:M(s.faceRegion.y+s.faceRegion.height*.1),width:s.faceRegion.width*.7*y,height:s.faceRegion.height*.5*y,fill:"rgba(255, 0, 0, 0.3)",stroke:"#ff0000",strokeWidth:"1"})]}),s.zones.map(J=>{const k=J.bounds.x*r,v=J.bounds.y*o,b=J.bounds.width*r,I=J.bounds.height*o;return u.jsxs("g",{children:[u.jsx("rect",{x:Y(k+b),y:M(v),width:b*y,height:I*y,fill:J.hasMotion?"rgba(0, 255, 0, 0.35)":"rgba(100, 200, 255, 0.15)",stroke:J.hasMotion?"#00ff00":"#66ccff",strokeWidth:J.hasMotion?3:2,rx:8}),u.jsx("text",{x:Y(k+b/2),y:M(v+I/2),fill:J.hasMotion?"#00ff00":"#ffffff",fontSize:"14",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{textShadow:"0 0 4px black, 0 0 2px black"},children:J.hasMotion?`BRUSHING ${J.motionLevel.toFixed(0)}%`:"Move toothbrush here"})]},J.id)})]}),u.jsxs("div",{className:"absolute top-2 left-2 bg-black/90 text-white text-xs p-2 rounded font-mono max-w-[220px]",children:[u.jsx("div",{className:"font-bold mb-1 text-yellow-400",children:"DEBUG MODE"}),u.jsx("div",{className:s.handMotionDetected?"text-green-400 font-bold text-sm":"text-gray-400",children:s.handMotionDetected?" BRUSHING DETECTED":" No motion"}),u.jsxs("div",{className:"text-gray-300",children:["Motion level: ",s.frameMotionTotal.toFixed(0)]}),s.zones[0]&&u.jsxs("div",{className:"text-gray-300",children:["Zone motion: ",s.zones[0].motionLevel.toFixed(1),"%"]}),u.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-600 text-[10px] text-gray-400",children:[u.jsx("span",{className:"text-cyan-400",children:"Blue box"})," = detection zone",u.jsx("br",{}),u.jsx("span",{className:"text-orange-400",children:"Orange"})," = face | ",u.jsx("span",{className:"text-red-400",children:"Red"})," = ignored"]})]})]}):u.jsx("div",{className:"absolute inset-0 pointer-events-none z-50",children:u.jsxs("div",{className:"absolute top-2 left-2 bg-black/80 text-white text-xs p-2 rounded font-mono",children:[u.jsx("div",{className:"font-bold text-yellow-400",children:"DEBUG MODE"}),u.jsx("div",{className:"text-gray-400",children:"Waiting for data..."})]})})}function py({selectedHat:e,facePosition:t,onVideoReady:n,onContainerSize:r,isBrushing:o=!1,debugMode:s=!1,getDebugInfo:c}){const{isReady:p,error:m,registerVideoElement:y}=gs(),j=C.useRef(null),S=C.useRef(null),E=C.useRef(!1),[$,Y]=C.useState({width:0,height:0}),[M,J]=C.useState({width:640,height:480}),k=C.useCallback(v=>{console.log("[CameraView] Video ref callback:",{hasElement:!!v}),j.current=v,v&&y(v)},[y]);return C.useEffect(()=>{const v=j.current;!v||!p||E.current||v.readyState>=2&&v.videoWidth>0&&(console.log("[CameraView] Video ready, calling onVideoReady"),E.current=!0,J({width:v.videoWidth,height:v.videoHeight}),n==null||n(v))},[p,n]),C.useEffect(()=>{const v=j.current;if(!v||E.current)return;const b=()=>{v.readyState>=2&&v.videoWidth>0&&!E.current&&(console.log("[CameraView] Video ready (from polling), calling onVideoReady"),E.current=!0,J({width:v.videoWidth,height:v.videoHeight}),n==null||n(v))},I=setInterval(b,100);return b(),()=>clearInterval(I)},[n]),C.useEffect(()=>{const v=S.current;if(!v)return;const b=()=>{const K=v.clientWidth,L=v.clientHeight;Y({width:K,height:L}),r==null||r(K,L)};b();const I=new ResizeObserver(b);return I.observe(v),()=>I.disconnect()},[r]),C.useEffect(()=>{var v,b,I,K,L;console.log("[CameraView] Mounted/Updated",{hasVideoRef:!!j.current,isReady:p,error:m,videoReadyState:(v=j.current)==null?void 0:v.readyState,videoPaused:(b=j.current)==null?void 0:b.paused,videoWidth:(I=j.current)==null?void 0:I.videoWidth,videoHeight:(K=j.current)==null?void 0:K.videoHeight,srcObject:!!((L=j.current)!=null&&L.srcObject)})}),u.jsxs("div",{ref:S,className:"relative w-full h-full bg-purple-900/30 rounded-2xl overflow-hidden",children:[u.jsx("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!p&&!m&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/50",children:u.jsx("div",{className:"text-lg text-purple-300 animate-pulse",children:"Connecting..."})}),m&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/50 p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:""}),u.jsx("div",{className:"text-red-300",children:m})]})}),e&&p&&$.width>0&&u.jsx(Gh,{hat:e,facePosition:t||null,containerWidth:$.width,containerHeight:$.height,videoWidth:M.width,videoHeight:M.height,isBrushing:o}),s&&c&&$.width>0&&u.jsx(Vh,{getDebugInfo:c,containerWidth:$.width,containerHeight:$.height,videoWidth:M.width,videoHeight:M.height}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2 flex justify-center",children:u.jsx("div",{className:"bg-black/50 rounded-full px-3 py-1 text-xs text-white",children:"Move your brush to clean!"})})]})}const pf={},hy=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],my=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function an({creature:e,size:t=200,showGunk:n=!1,gunkLevel:r=0,animated:o=!0,className:s=""}){const[c,p]=C.useState(!1),[m,y]=C.useState(!1),j=hy.includes(e.id)&&!c,S=my.includes(e.id)&&!m,E=e.id in pf,$=n&&r>=90&&S,Y=e.rarity==="mythic",M=e.rarity==="legendary",J=e.rarity==="rare",k=Y?30:M?20:J?10:0,v=Y?"#F97316":M?"#FFD700":"#60A5FA",b=n?Math.max(0,100-r)/100:1,I=n&&!$?Math.min(.8,r/100):0,K=n&&!$?Math.min(100,r*1.5):0,L=n&&!$?Math.max(0,(r-40)/60):0,B={width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},V={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",filter:k>0&&b>.5?`drop-shadow(0 0 ${k*b}px ${v})`:void 0,transition:"filter 0.3s ease"},q={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:K>0?`hue-rotate(${K}deg) saturate(${1+K/100}) brightness(${1-K/300})`:void 0,transition:"filter 0.3s ease"},G={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/vibe-brushing/creatures/gunk-overlay.png)",backgroundSize:"cover",backgroundPosition:"center top",opacity:I,pointerEvents:"none",mixBlendMode:"multiply",transition:"opacity 0.3s ease"},D={position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"20%",background:"radial-gradient(ellipse at 35% 50%, rgba(255,0,0,0.8) 0%, transparent 40%), radial-gradient(ellipse at 65% 50%, rgba(255,0,0,0.8) 0%, transparent 40%)",opacity:L,pointerEvents:"none",filter:"blur(2px)",transition:"opacity 0.3s ease"};if(j){const Z={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:"drop-shadow(0 0 15px rgba(0, 255, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 0, 0, 0.3))"};if($)return u.jsx("div",{style:B,className:s,children:u.jsx("div",{style:{...V,filter:"drop-shadow(0 0 20px rgba(0, 100, 0, 0.8))"},className:o?"animate-creature-idle":"",children:u.jsx("img",{src:`/vibe-brushing/creatures/${e.id}-possessed.png`,alt:`${e.name} (Possessed)`,style:Z,onError:()=>y(!0)})})});if(E){const ee=pf[e.id],fe=ee.frameWidth/ee.frameHeight;let se,le;fe>=1?(se=t,le=t/fe):(le=t,se=t*fe);const he={width:t,height:t,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},H=`spritesheet-grid-${ee.cols}x${ee.rows}`,X={width:se,height:le,backgroundImage:`url(/vibe-brushing/creatures/${e.id}-spritesheet.png)`,backgroundSize:`${ee.cols*100}% ${ee.rows*100}%`,backgroundPosition:"0% 0%",backgroundRepeat:"no-repeat",filter:K>0?`hue-rotate(${K}deg) saturate(${1+K/100}) brightness(${1-K/300})`:void 0,animation:o?`${H} ${ee.animationDuration}s linear infinite`:void 0};return u.jsxs("div",{style:B,className:s,children:[u.jsx("div",{style:V,children:u.jsx("div",{style:he,children:u.jsx("div",{style:X,"aria-label":e.name})})}),n&&r>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:G,className:"animate-gunk-drip"}),L>0&&u.jsx("div",{style:D,className:"animate-pulse-glow"})]})]})}return u.jsxs("div",{style:B,className:s,children:[u.jsx("div",{style:V,className:o?"animate-creature-idle":"",children:u.jsx("img",{src:`/vibe-brushing/creatures/${e.id}.png`,alt:e.name,style:q,onError:()=>p(!0)})}),n&&r>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:G,className:o?"animate-gunk-drip":""}),L>0&&u.jsx("div",{style:D,className:o?"animate-pulse-glow":""})]})]})}return u.jsx("div",{style:B,className:s,children:u.jsx(gy,{creature:e,size:t,animated:o,cleanProgress:b,gunkOpacity:I,redEyeOpacity:L,glowAmount:k,glowColor:v})})}function gy({creature:e,size:t,animated:n,cleanProgress:r,gunkOpacity:o,redEyeOpacity:s,glowAmount:c,glowColor:p}){const m={grassland:{primary:"#7FD858",secondary:"#FFB6C1",accent:"#FFD700"},coastal:{primary:"#4FC3F7",secondary:"#FFE082",accent:"#FF7043"},lava:{primary:"#FF7043",secondary:"#FFD54F",accent:"#F44336"},city:{primary:"#BA68C8",secondary:"#64B5F6",accent:"#FF4081"},sky:{primary:"#81D4FA",secondary:"#FFF59D",accent:"#FFFFFF"},all:{primary:"#F97316",secondary:"#FBBF24",accent:"#EF4444"}},y=m[e.region]||m.grassland,j=e.rarity==="legendary";return u.jsxs("svg",{viewBox:"0 0 100 100",width:t,height:t,style:{filter:c>0&&r>.5?`drop-shadow(0 0 ${c*r}px ${p})`:void 0},className:n?"animate-creature-idle":"",children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:`fallback-body-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:y.primary,stopOpacity:"1"}),u.jsx("stop",{offset:"100%",stopColor:y.primary,stopOpacity:"0.7"})]}),u.jsxs("radialGradient",{id:`fallback-highlight-${e.id}`,cx:"30%",cy:"30%",r:"60%",children:[u.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.6"}),u.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})]}),u.jsx("ellipse",{cx:"50",cy:"55",rx:j?35:28,ry:j?32:26,fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"2"}),u.jsx("ellipse",{cx:"50",cy:"55",rx:j?35:28,ry:j?32:26,fill:`url(#fallback-highlight-${e.id})`}),u.jsx("ellipse",{cx:"40",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),u.jsx("ellipse",{cx:"60",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),u.jsx("ellipse",{cx:"42",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),u.jsx("ellipse",{cx:"62",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),u.jsx("ellipse",{cx:"43",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),u.jsx("ellipse",{cx:"63",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),u.jsx("path",{d:"M 44 65 Q 50 70 56 65",fill:"none",stroke:"#1A1A1A",strokeWidth:"2",strokeLinecap:"round"}),u.jsx("ellipse",{cx:"32",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),u.jsx("ellipse",{cx:"68",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),e.monsterType.includes("bunny")||e.monsterType.includes("rabbit")?u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{cx:"35",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),u.jsx("ellipse",{cx:"65",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("cat")||e.monsterType.includes("kitten")?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M 30 40 L 25 20 L 40 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),u.jsx("path",{d:"M 70 40 L 75 20 L 60 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("dog")||e.monsterType.includes("pup")?u.jsxs(u.Fragment,{children:[u.jsx("ellipse",{cx:"28",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(-15 28 42)"}),u.jsx("ellipse",{cx:"72",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(15 72 42)"})]}):j?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M 35 30 L 25 10 L 40 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),u.jsx("path",{d:"M 65 30 L 75 10 L 60 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),u.jsx("path",{d:"M 50 28 L 50 8",stroke:y.accent,strokeWidth:"3",strokeLinecap:"round"})]}):null,j&&u.jsx("g",{children:u.jsx("path",{d:"M 35 18 L 35 5 L 42 12 L 50 0 L 58 12 L 65 5 L 65 18",fill:"#FFD700",stroke:"#B8860B",strokeWidth:"1"})}),o>0&&u.jsxs("g",{opacity:o,children:[u.jsx("ellipse",{cx:"50",cy:"50",rx:"30",ry:"28",fill:"#32CD32",opacity:"0.5"}),u.jsx("path",{d:"M 25 35 Q 30 45 25 55 Q 20 65 30 70",fill:"#228B22",opacity:"0.6"}),u.jsx("path",{d:"M 75 35 Q 70 45 75 55 Q 80 65 70 70",fill:"#228B22",opacity:"0.6"}),u.jsx("circle",{cx:"35",cy:"42",r:"4",fill:"#32CD32"}),u.jsx("circle",{cx:"62",cy:"65",r:"5",fill:"#228B22"}),u.jsx("circle",{cx:"55",cy:"38",r:"3",fill:"#2E8B2E"})]}),s>0&&u.jsxs("g",{opacity:s,children:[u.jsx("ellipse",{cx:"40",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&u.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite"})}),u.jsx("ellipse",{cx:"60",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&u.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite",begin:"0.2s"})})]})]})}function yy({creature:e,activeZones:t,overallProgress:n,compact:r=!1}){const o=e.region==="all"?"grassland":e.region,s=Oh[o],c=Math.max(0,100-n),p=C.useMemo(()=>n>=100?"sparkling":n>=75?"happy":n>=50?"hopeful":n>=25?"waking":"gunked",[n]),m={gunked:"",waking:"",hopeful:"",happy:"",sparkling:""}[p];return r?u.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 bg-purple-900/40 rounded-xl backdrop-blur-sm",children:[u.jsxs("div",{className:`relative shrink-0 ${t.length>0?"animate-wiggle":""}`,style:{width:60,height:60},children:[u.jsx(an,{creature:e,size:60,showGunk:!0,gunkLevel:c,animated:!0}),n>=100&&u.jsx("div",{className:"absolute -top-1 -right-1 text-lg",children:""})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:m}),u.jsx("span",{className:"text-sm font-medium text-white truncate",children:e.name}),e.rarity!=="common"&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),u.jsx("div",{className:"h-2 w-full rounded-full bg-purple-900/50 overflow-hidden",children:u.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":s.colors.primary}})}),u.jsxs("div",{className:"flex justify-between mt-1",children:[u.jsx("span",{className:"text-[10px] text-purple-300",children:n>=100?" Clean!":"Keep brushing"}),u.jsxs("span",{className:"text-[10px] text-purple-300",children:[Math.round(n),"%"]})]})]})]}):u.jsxs("div",{className:"relative h-full flex flex-col",children:[u.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${s.colors.background}80, ${s.colors.primary}40)`,boxShadow:e.rarity==="mythic"?"0 0 40px #F97316, 0 0 60px #F9731680":e.rarity==="legendary"?`0 0 30px ${s.colors.accent}60`:e.rarity==="rare"?`0 0 20px ${s.colors.primary}40`:"none"},children:[t.length>0&&u.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((y,j)=>u.jsx("div",{className:"absolute w-2 h-2 rounded-full animate-ping",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*70}%`,backgroundColor:s.colors.accent,animationDelay:`${j*.1}s`,animationDuration:"1s"}},j))}),u.jsxs("div",{className:`relative ${t.length>0?"animate-wiggle":""}`,children:[u.jsx(an,{creature:e,size:140,showGunk:!0,gunkLevel:c,animated:!0}),n>=100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((y,j)=>u.jsx("div",{className:"absolute text-xl animate-sparkle-float",style:{left:`${10+j%4*25}%`,top:`${10+Math.floor(j/4)*40}%`,animationDelay:`${j*.15}s`},children:""},j))})]}),u.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1.5 px-2 py-1 rounded-full text-white text-sm",style:{backgroundColor:`${s.colors.primary}CC`},children:[u.jsx("span",{className:"text-base",children:m}),u.jsx("span",{className:"font-medium",children:e.name}),e.rarity!=="common"&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),u.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-white text-sm font-bold bg-black/40 backdrop-blur-sm",children:[Math.round(n),"%"]}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:u.jsxs("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden backdrop-blur-sm relative",children:[u.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":s.colors.accent}}),t.length>0&&n<100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow animate-pulse",children:"Brushing..."})}),n>=100&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow",children:" Clean! "})})]})})]}),u.jsx("style",{children:`
        @keyframes sparkle-float {
          0%, 100% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          50% {
            transform: translateY(-10px) scale(1.2);
            opacity: 0.8;
          }
        }
        .animate-sparkle-float {
          animation: sparkle-float 1.5s ease-in-out infinite;
        }
      `})]})}const vy=e=>{const t="/vibe-brushing/";return{grassland:`${t}creatures/bg-grassland.png`,coastal:`${t}creatures/bg-coastal.png`,lava:`${t}creatures/bg-lava.png`,city:`${t}creatures/bg-city.png`,sky:`${t}creatures/bg-sky.png`}[e]};function No({region:e}){const t=ly(e),[n,r]=C.useState([]),[o,s]=C.useState(!1),c=vy(e),p=C.useMemo(()=>{const{colors:m}=t;switch(e){case"grassland":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            #98D8C8 30%, 
            ${m.secondary} 60%, 
            ${m.primary} 100%)`};case"coastal":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            ${m.secondary} 40%, 
            ${m.primary} 70%, 
            #1E3A5F 100%)`};case"lava":return{background:`linear-gradient(180deg, 
            #1C1917 0%, 
            #292524 30%, 
            ${m.secondary} 70%, 
            ${m.primary} 100%)`};case"city":return{background:`linear-gradient(180deg, 
            #0F0B1A 0%, 
            #1E1433 30%, 
            ${m.primary}40 70%, 
            ${m.secondary}60 100%)`};case"sky":return{background:`linear-gradient(180deg, 
            #1E3A5F 0%, 
            ${m.secondary} 30%, 
            ${m.primary} 60%, 
            #FEF9C3 100%)`};default:return{background:m.background}}},[e,t]);return C.useEffect(()=>{s(!1);const m=new Image;m.src=c,m.onload=()=>s(!0)},[c]),C.useEffect(()=>{const m=[];for(let j=0;j<12;j++)m.push({id:j,emoji:t.particles[j%t.particles.length],x:Math.random()*100,y:Math.random()*100,size:.8+Math.random()*.8,speed:15+Math.random()*20,delay:Math.random()*10,drift:(Math.random()-.5)*30});r(m)},[e,t.particles]),u.jsxs("div",{className:"absolute inset-0 overflow-hidden transition-all duration-1000",style:p,children:[u.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{backgroundImage:`url(${c})`,backgroundSize:"cover",backgroundPosition:"center",opacity:o?1:0}}),u.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.3) 100%)"}}),e==="lava"&&u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 opacity-60",style:{background:"linear-gradient(180deg, transparent 0%, #EF4444 50%, #FCD34D 100%)",animation:"pulse 2s ease-in-out infinite"}}),u.jsx("div",{className:"absolute bottom-0 left-1/4 w-1/2 h-1/4 opacity-40 rounded-t-full",style:{background:"radial-gradient(ellipse at bottom, #FBBF24 0%, transparent 70%)",animation:"pulse 3s ease-in-out infinite"}})]}),e==="city"&&u.jsx("div",{className:"absolute inset-0",children:[...Array(8)].map((m,y)=>u.jsx("div",{className:"absolute bottom-0 bg-gradient-to-t from-purple-900 to-transparent",style:{left:`${y*14+Math.random()*5}%`,width:`${3+Math.random()*4}%`,height:`${20+Math.random()*40}%`,opacity:.6},children:[...Array(Math.floor(Math.random()*5)+2)].map((j,S)=>u.jsx("div",{className:"absolute w-1 h-1 rounded-full",style:{left:`${20+Math.random()*60}%`,top:`${10+S*15+Math.random()*10}%`,backgroundColor:["#22D3EE","#E879F9","#FBBF24"][Math.floor(Math.random()*3)],animation:`pulse ${1+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},S))},y))}),e==="sky"&&u.jsx("div",{className:"absolute inset-0",children:[...Array(5)].map((m,y)=>u.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${y*25-10+Math.random()*20}%`,top:`${60+Math.random()*30}%`,width:`${15+Math.random()*20}%`,height:`${8+Math.random()*8}%`,animation:`float ${8+Math.random()*4}s ease-in-out infinite`,animationDelay:`${Math.random()*4}s`}},y))}),e==="coastal"&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-1/4",children:[u.jsx("div",{className:"absolute inset-0 opacity-50",style:{background:"linear-gradient(180deg, transparent 0%, #0EA5E9 100%)"}}),[...Array(3)].map((m,y)=>u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-white/30 rounded-full",style:{transform:`translateY(${y*-8}px)`,animation:`wave ${3+y*.5}s ease-in-out infinite`,animationDelay:`${y*.3}s`}},y))]}),e==="grassland"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/6",children:u.jsxs("svg",{viewBox:"0 0 100 20",className:"w-full h-full",preserveAspectRatio:"none",children:[u.jsx("path",{d:"M0 20 Q 10 10, 20 15 T 40 12 T 60 16 T 80 10 T 100 14 L 100 20 Z",fill:"#22C55E",opacity:"0.8"}),u.jsx("path",{d:"M0 20 Q 15 15, 25 18 T 50 14 T 75 17 T 100 12 L 100 20 Z",fill:"#16A34A",opacity:"0.6"})]})}),n.map(m=>u.jsx("div",{className:"absolute pointer-events-none select-none",style:{left:`${m.x}%`,fontSize:`${m.size}rem`,animation:`floatParticle ${m.speed}s linear infinite`,animationDelay:`${m.delay}s`,"--drift":`${m.drift}px`},children:m.emoji},m.id)),u.jsx("style",{children:`
        @keyframes floatParticle {
          0% {
            transform: translateY(100vh) translateX(0);
            opacity: 0;
          }
          10% {
            opacity: 0.8;
          }
          90% {
            opacity: 0.8;
          }
          100% {
            transform: translateY(-20vh) translateX(var(--drift));
            opacity: 0;
          }
        }
        
        @keyframes wave {
          0%, 100% {
            transform: translateX(-5%) scaleY(1);
          }
          50% {
            transform: translateX(5%) scaleY(1.2);
          }
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0) translateX(0);
          }
          50% {
            transform: translateY(-10px) translateX(10px);
          }
        }
      `})]})}function xy({zoneProgress:e,overallProgress:t}){const n=t>=100;return u.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-purple-300",children:"Brushing Progress"}),u.jsxs("span",{className:"text-white font-bold",children:[Math.round(t),"%"]})]}),u.jsxs("div",{className:"h-6 bg-purple-900/50 rounded-full overflow-hidden relative",children:[u.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${n?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${t}%`}}),n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-sm font-bold text-white drop-shadow animate-pulse",children:" Complete! Keep brushing! "})})]})]}),u.jsx("div",{className:"text-center text-sm text-purple-300",children:n?u.jsx("span",{className:"text-green-400",children:"Great job! Keep it up to stay clean!"}):t>0?u.jsx("span",{children:"Keep brushing to fill the bar!"}):u.jsx("span",{children:"Start brushing to see progress"})})]})}function wy({timeRemaining:e,totalTime:t}){const n=Math.floor(e/60),r=e%60,o=(t-e)/t*100,s=e<=30;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-24 h-24",children:[u.jsxs("svg",{className:"w-full h-full -rotate-90",children:[u.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:"rgba(139, 92, 246, 0.3)",strokeWidth:"8"}),u.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:s?"#F59E0B":"#8B5CF6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-o/100)}`,className:"transition-all duration-1000"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:`text-2xl font-bold ${s?"text-amber-400 animate-pulse":"text-white"}`,children:[n,":",r.toString().padStart(2,"0")]})})]}),u.jsx("div",{className:"mt-2 text-sm text-purple-300",children:s?"Almost done!":"Keep brushing!"})]})}const by=3e3;function ky(e){return e<=60?[20,40]:e<=120?[30,60,90]:[45,90,135]}function Cy({selectedHat:e,capturedCreatureIds:t,onComplete:n,onCancel:r}){const o=C.useMemo(()=>Wh(),[]),s=C.useMemo(()=>ky(o),[o]),[c,p]=C.useState("countdown"),[m,y]=C.useState(3),[j,S]=C.useState(o),[E,$]=C.useState([]),[Y,M]=C.useState(""),[J]=C.useState(()=>sy()),[k,v]=C.useState(null),b=C.useRef(new Set),I=C.useRef(Date.now()),K=C.useRef(null),{startCamera:L,captureFrameWithHat:B,stopCamera:V,registerVideoElement:q}=gs(),G=C.useRef(null),D=C.useRef({width:0,height:0}),Z=(k==null?void 0:k.rarity)||"common",ee=oy(J,Z),fe=C.useCallback(xe=>{G.current=xe,xe&&q(xe)},[q]),[se,le]=C.useState(!1),{zoneProgress:he,motionResults:H,overallProgress:X,startDetection:ae,stopDetection:we,setFaceRegion:Ce,setDebugMode:We,getDebugInfo:Ae}=Bh({targetCleaningTime:25}),{facePosition:Be,startTracking:Le,stopTracking:Ue}=Ih(),Gt=C.useRef(new Set),Re=C.useRef(!1),ge=C.useRef(!1);C.useEffect(()=>{Ce(Be?{x:Be.x,y:Be.y,width:Be.width,height:Be.height}:null)},[Be,Ce]),C.useEffect(()=>{const xe=zh(85,t,J);v(xe),((xe==null?void 0:xe.rarity)==="legendary"||(xe==null?void 0:xe.rarity)==="mythic")&&mr("legendary-intro")},[J,t]),C.useEffect(()=>(Re.current||(Re.current=!0,L()),()=>{we(),Ue(),K.current&&clearInterval(K.current)}),[L,we,Ue]),C.useEffect(()=>{he.forEach(xe=>{xe.isComplete&&!Gt.current.has(xe.zoneId)&&(Gt.current.add(xe.zoneId),mr("sparkle"))})},[he]),C.useEffect(()=>{H.some(Ee=>Ee.hasMotion)&&(I.current=Date.now())},[H]),C.useEffect(()=>{if(c==="brushing")return K.current=window.setInterval(()=>{Date.now()-I.current>by&&(M("Can't see you brushing! Move closer to the camera."),p("paused"))},500),()=>{K.current&&clearInterval(K.current)}},[c]);const nt=C.useCallback(xe=>{ae(xe),Le(xe),I.current=Date.now()},[ae,Le]),Te=C.useCallback((xe,Ee)=>{D.current={width:xe,height:Ee}},[]),re=C.useCallback(async()=>{const xe=e?{imageUrl:e.imageUrl,facePosition:Be||null,containerWidth:D.current.width,containerHeight:D.current.height}:null;return B(xe)},[e,Be,B]),je=C.useCallback(()=>{le(xe=>{const Ee=!xe;return We(Ee),Ee})},[We]);C.useEffect(()=>{if(c!=="countdown")return;if(m<=0){p("brushing"),I.current=Date.now();return}const xe=setTimeout(()=>{y(Ee=>Ee-1)},1e3);return()=>clearTimeout(xe)},[m,c]),C.useEffect(()=>{if(c!=="brushing")return;if(j<=0){Se();return}const xe=setInterval(()=>{S(Ee=>Ee-1)},1e3);return()=>clearInterval(xe)},[j,c]),C.useEffect(()=>{if(c!=="brushing")return;const xe=o-j;s.forEach(Ee=>{xe>=Ee&&!b.current.has(Ee)&&(b.current.add(Ee),re().then(Zt=>{Zt&&$(Jt=>[...Jt,Zt])}))})},[j,c,re,s,o]),C.useEffect(()=>{c==="brushing"&&!ge.current?(ge.current=!0,ee.start()):c==="paused"?(ee.stop(),ge.current=!1):c==="complete"&&ee.stop()},[c,ee]),C.useEffect(()=>{if(c!=="brushing")return;const xe=o-j,Ee=o/2;xe>=Ee?ee.setIntensity("excited"):ee.setIntensity("calm")},[j,c,ee]);const Se=C.useCallback(async()=>{p("complete"),ee.stop(),we(),Ue();const xe=await re(),Ee=xe?[...E,xe]:E;setTimeout(()=>{V(),n({cleaningPercentage:X,zoneProgress:he,photos:Ee,region:J,creature:k})},500)},[we,Ue,re,E,X,he,n,V,ee,J,k]),De=C.useCallback(()=>{I.current=Date.now(),p("brushing"),M("")},[]),$e=C.useCallback(async()=>{const xe=await re();xe&&$(Ee=>[...Ee,xe])},[re]),Tt=C.useCallback(()=>{ee.stop(),V(),r()},[V,r,ee]),_t=H.filter(xe=>xe.hasMotion).map(xe=>xe.zoneId);return c==="countdown"?u.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:J})}),u.jsxs("div",{className:"relative z-10 text-center",children:[u.jsx("div",{className:"text-6xl font-bold text-white animate-bounce-gentle drop-shadow-lg",children:m>0?m:"GO!"}),u.jsx("div",{className:"text-xl text-white/80 mt-4 drop-shadow",children:"Get ready to brush!"}),k&&u.jsxs("div",{className:"mt-6 text-center",children:[u.jsx("div",{className:"text-lg text-white/70",children:"Today's creature:"}),u.jsx("div",{className:`text-2xl font-bold ${k.rarity==="mythic"?"text-orange-400 animate-pulse":k.rarity==="legendary"?"text-yellow-400 animate-pulse":k.rarity==="rare"?"text-purple-400":"text-white"}`,children:k.name})]}),u.jsx("button",{onClick:Tt,className:"mt-8 px-6 py-2 text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Cancel"})]})]}):c==="paused"?u.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full p-6 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:J})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:"text-6xl mb-6",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-yellow-400 mb-4 drop-shadow-lg",children:"Paused!"}),u.jsx("p",{className:"text-xl text-white text-center mb-6 max-w-xs drop-shadow",children:Y}),u.jsx("div",{className:"w-full max-w-xs aspect-video bg-black/30 rounded-2xl overflow-hidden mb-6 backdrop-blur-sm",children:u.jsx("video",{ref:fe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"})}),u.jsxs("div",{className:"text-sm text-white/80 mb-4",children:["Time remaining: ",Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]}),u.jsx("button",{onClick:De,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform mb-3",children:"I'm Ready! "}),u.jsx("button",{onClick:Tt,className:"w-full max-w-xs py-3 text-lg text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Stop Session"})]})]}):u.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:J})}),u.jsxs("div",{className:"relative z-10 flex flex-col h-full p-2 gap-2",children:[u.jsxs("div",{className:"h-2/3 relative overflow-hidden",children:[u.jsx(py,{selectedHat:e,facePosition:Be,onVideoReady:nt,onContainerSize:Te,isBrushing:H.some(xe=>xe.hasMotion),debugMode:se,getDebugInfo:Ae}),u.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start pointer-events-auto z-20",children:[u.jsx("button",{onClick:Tt,className:"px-3 py-1.5 text-sm text-white/80 bg-black/50 rounded-xl backdrop-blur-sm pointer-events-auto",children:""}),u.jsx(wy,{timeRemaining:j,totalTime:o}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:je,className:`px-2 py-1.5 text-sm rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto ${se?"text-yellow-400 bg-yellow-900/80":"text-white/60 bg-black/50"}`,children:""}),u.jsx("button",{onClick:$e,className:"px-2 py-1.5 text-sm text-white bg-pink-600/80 rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto",children:""})]})]})]}),u.jsx("div",{className:"h-1/3 overflow-auto",children:k?u.jsx(yy,{creature:k,activeZones:_t,overallProgress:X}):u.jsx(xy,{zoneProgress:he,overallProgress:X})}),E.length>0&&u.jsxs("div",{className:"flex justify-center gap-2",children:[E.slice(-3).map((xe,Ee)=>u.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-sparkle"},Ee)),u.jsxs("span",{className:"text-xs text-white/70 ml-2",children:[E.length," photos"]})]})]})]})}function jy({cleaningPercentage:e,onContinue:t}){const n=Sy(e),r=e>=100;return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[u.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:n.emoji}),u.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.title}),u.jsxs("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent mb-4",children:[Math.round(e),"%"]}),u.jsx("p",{className:"text-lg text-purple-200 mb-6 max-w-xs",children:n.message}),u.jsx("div",{className:"w-full max-w-xs mb-8",children:u.jsxs("div",{className:`p-4 rounded-xl ${r?"bg-green-900/50":"bg-purple-900/50"}`,children:[u.jsx("div",{className:"text-4xl mb-2",children:r?"":""}),u.jsx("div",{className:"text-sm text-purple-300 mb-2",children:"Brushing Score"}),u.jsx("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${r?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${e}%`}})}),u.jsx("div",{className:`text-lg font-bold mt-2 ${r?"text-green-400":"text-purple-400"}`,children:r?"Complete!":"Keep practicing!"})]})}),u.jsx("button",{onClick:t,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl animate-button-glow",children:"Catch a Creature! "})]})}function Sy(e){return e>=95?{emoji:"",title:"LEGENDARY!",message:"Your teeth are sparkling like diamonds! Amazing job!"}:e>=80?{emoji:"",title:"Super Clean!",message:"Wow! Your teeth are super sparkly! Great brushing!"}:e>=60?{emoji:"",title:"Good Job!",message:"Nice work! A little more brushing next time!"}:e>=40?{emoji:"",title:"Keep Trying!",message:"You can do better! Brush all areas next time!"}:{emoji:"",title:"Try Again!",message:"Don't give up! Brush longer next time!"}}var Uh={exports:{}};(function(e,t){((n,r)=>{e.exports=r()})(Xc,function(){var n=function(a,l){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,f){d.__proto__=f}:function(d,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(d[h]=f[h])}))(a,l)},r=function(){return(r=Object.assign||function(a){for(var l,d=1,f=arguments.length;d<f;d++)for(var h in l=arguments[d])Object.prototype.hasOwnProperty.call(l,h)&&(a[h]=l[h]);return a}).apply(this,arguments)};function o(a,l,d){for(var f,h=0,g=l.length;h<g;h++)!f&&h in l||((f=f||Array.prototype.slice.call(l,0,h))[h]=l[h]);return a.concat(f||Array.prototype.slice.call(l))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Xc,c=Object.keys,p=Array.isArray;function m(a,l){return typeof l=="object"&&c(l).forEach(function(d){a[d]=l[d]}),a}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var y=Object.getPrototypeOf,j={}.hasOwnProperty;function S(a,l){return j.call(a,l)}function E(a,l){typeof l=="function"&&(l=l(y(a))),(typeof Reflect>"u"?c:Reflect.ownKeys)(l).forEach(function(d){Y(a,d,l[d])})}var $=Object.defineProperty;function Y(a,l,d,f){$(a,l,m(d&&S(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},f))}function M(a){return{from:function(l){return a.prototype=Object.create(l.prototype),Y(a.prototype,"constructor",a),{extend:E.bind(null,a.prototype)}}}}var J=Object.getOwnPropertyDescriptor,k=[].slice;function v(a,l,d){return k.call(a,l,d)}function b(a,l){return l(a)}function I(a){if(!a)throw new Error("Assertion Failed")}function K(a){s.setImmediate?setImmediate(a):setTimeout(a,0)}function L(a,l){if(typeof l=="string"&&S(a,l))return a[l];if(!l)return a;if(typeof l!="string"){for(var d=[],f=0,h=l.length;f<h;++f){var g=L(a,l[f]);d.push(g)}return d}var x,w=l.indexOf(".");return w===-1||(x=a[l.substr(0,w)])==null?void 0:L(x,l.substr(w+1))}function B(a,l,d){if(a&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof l!="string"&&"length"in l){I(typeof d!="string"&&"length"in d);for(var f=0,h=l.length;f<h;++f)B(a,l[f],d[f])}else{var g,x,w=l.indexOf(".");w!==-1?(g=l.substr(0,w),(w=l.substr(w+1))===""?d===void 0?p(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=d:B(x=(x=a[g])&&S(a,g)?x:a[g]={},w,d)):d===void 0?p(a)&&!isNaN(parseInt(l))?a.splice(l,1):delete a[l]:a[l]=d}}function V(a){var l,d={};for(l in a)S(a,l)&&(d[l]=a[l]);return d}var q=[].concat;function G(a){return q.apply([],a)}var Ce="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(G([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(l){return l+a+"Array"})}))).filter(function(a){return s[a]}),D=new Set(Ce.map(function(a){return s[a]})),Z=null;function ee(a){return Z=new WeakMap,a=function l(d){if(!d||typeof d!="object")return d;var f=Z.get(d);if(f)return f;if(p(d)){f=[],Z.set(d,f);for(var h=0,g=d.length;h<g;++h)f.push(l(d[h]))}else if(D.has(d.constructor))f=d;else{var x,w=y(d);for(x in f=w===Object.prototype?{}:Object.create(w),Z.set(d,f),d)S(d,x)&&(f[x]=l(d[x]))}return f}(a),Z=null,a}var fe={}.toString;function se(a){return fe.call(a).slice(8,-1)}var le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",he=typeof le=="symbol"?function(a){var l;return a!=null&&(l=a[le])&&l.apply(a)}:function(){return null};function H(a,l){l=a.indexOf(l),0<=l&&a.splice(l,1)}var X={};function ae(a){var l,d,f,h;if(arguments.length===1){if(p(a))return a.slice();if(this===X&&typeof a=="string")return[a];if(h=he(a))for(d=[];!(f=h.next()).done;)d.push(f.value);else{if(a==null)return[a];if(typeof(l=a.length)!="number")return[a];for(d=new Array(l);l--;)d[l]=a[l]}}else for(l=arguments.length,d=new Array(l);l--;)d[l]=arguments[l];return d}var we=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ce),We={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(a,l){this.name=a,this.message=l}function Be(a,l){return a+". Errors: "+Object.keys(l).map(function(d){return l[d].toString()}).filter(function(d,f,h){return h.indexOf(d)===f}).join(`
`)}function Le(a,l,d,f){this.failures=l,this.failedKeys=f,this.successCount=d,this.message=Be(a,l)}function Ue(a,l){this.name="BulkError",this.failures=Object.keys(l).map(function(d){return l[d]}),this.failuresByPos=l,this.message=Be(a,this.failures)}M(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(Le).from(Ae),M(Ue).from(Ae);var Gt=Mt.reduce(function(a,l){return a[l]=l+"Error",a},{}),Re=Ae,ge=Mt.reduce(function(a,l){var d=l+"Error";function f(h,g){this.name=d,h?typeof h=="string"?(this.message="".concat(h).concat(g?`
 `+g:""),this.inner=g||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=We[l]||d,this.inner=null)}return M(f).from(Re),a[l]=f,a},{}),nt=(ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError,Ce.reduce(function(a,l){return a[l+"Error"]=ge[l],a},{}));Ce=Mt.reduce(function(a,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(a[l+"Error"]=ge[l]),a},{});function Te(){}function re(a){return a}function je(a,l){return a==null||a===re?l:function(d){return l(a(d))}}function Se(a,l){return function(){a.apply(this,arguments),l.apply(this,arguments)}}function De(a,l){return a===Te?l:function(){var d=a.apply(this,arguments),f=(d!==void 0&&(arguments[0]=d),this.onsuccess),h=this.onerror,g=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return f&&(this.onsuccess=this.onsuccess?Se(f,this.onsuccess):f),h&&(this.onerror=this.onerror?Se(h,this.onerror):h),g!==void 0?g:d}}function $e(a,l){return a===Te?l:function(){a.apply(this,arguments);var d=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Se(d,this.onsuccess):d),f&&(this.onerror=this.onerror?Se(f,this.onerror):f)}}function Tt(a,l){return a===Te?l:function(h){var f=a.apply(this,arguments),h=(m(h,f),this.onsuccess),g=this.onerror,x=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return h&&(this.onsuccess=this.onsuccess?Se(h,this.onsuccess):h),g&&(this.onerror=this.onerror?Se(g,this.onerror):g),f===void 0?x===void 0?void 0:x:m(f,x)}}function _t(a,l){return a===Te?l:function(){return l.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function xe(a,l){return a===Te?l:function(){var d=a.apply(this,arguments);if(d&&typeof d.then=="function"){for(var f=this,h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return d.then(function(){return l.apply(f,g)})}return l.apply(this,arguments)}}Ce.ModifyError=Le,Ce.DexieError=Ae,Ce.BulkError=Ue;var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zt(a){Ee=a}var Jt={},un=100,cn=typeof Promise>"u"?[]:(Mt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[cn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(cn),Mt]:[Mt,y(Mt),Mt]),Mt=cn[0],Mr=cn[1],Mr=Mr&&Mr.then,ir=Mt&&Mt.constructor,ys=!!cn[2],yi=function(a,l){vi.push([a,l]),wa&&(queueMicrotask(Hh),wa=!1)},vs=!0,wa=!0,ar=[],ba=[],xs=re,Fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Te,pgp:!1,env:{},finalize:Te},be=Fn,vi=[],or=0,ka=[];function de(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=be;if(typeof a!="function"){if(a!==Jt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&bs(this,this._value)}else this._state=null,this._value=null,++l.ref,function d(f,h){try{h(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var x=f._lib&&Tr();g&&typeof g.then=="function"?d(f,function(w,_){g instanceof de?g._then(w,_):g.then(w,_)}):(f._state=!0,f._value=g,xc(f)),x&&_r()}},bs.bind(null,f))}catch(g){bs(f,g)}}(this,a)}var ws={get:function(){var a=be,l=Ea;function d(f,h){var g=this,x=!a.global&&(a!==be||l!==Ea),w=x&&!Pn(),_=new de(function(z,A){ks(g,new vc(bc(f,a,x,w),bc(h,a,x,w),z,A,a))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return d.prototype=Jt,d},set:function(a){Y(this,"then",a&&a.prototype===Jt?ws:{get:function(){return a},set:ws.set})}};function vc(a,l,d,f,h){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof l=="function"?l:null,this.resolve=d,this.reject=f,this.psd=h}function bs(a,l){var d,f;ba.push(l),a._state===null&&(d=a._lib&&Tr(),l=xs(l),a._state=!1,a._value=l,f=a,ar.some(function(h){return h._value===f._value})||ar.push(f),xc(a),d)&&_r()}function xc(a){var l=a._listeners;a._listeners=[];for(var d=0,f=l.length;d<f;++d)ks(a,l[d]);var h=a._PSD;--h.ref||h.finalize(),or===0&&(++or,yi(function(){--or==0&&Cs()},[]))}function ks(a,l){if(a._state===null)a._listeners.push(l);else{var d=a._state?l.onFulfilled:l.onRejected;if(d===null)return(a._state?l.resolve:l.reject)(a._value);++l.psd.ref,++or,yi(qh,[d,a,l])}}function qh(a,l,d){try{var f,h=l._value;!l._state&&ba.length&&(ba=[]),f=Ee&&l._consoleTask?l._consoleTask.run(function(){return a(h)}):a(h),l._state||ba.indexOf(h)!==-1||(g=>{for(var x=ar.length;x;)if(ar[--x]._value===g._value)return ar.splice(x,1)})(l),d.resolve(f)}catch(g){d.reject(g)}finally{--or==0&&Cs(),--d.psd.ref||d.psd.finalize()}}function Hh(){sr(Fn,function(){Tr()&&_r()})}function Tr(){var a=vs;return wa=vs=!1,a}function _r(){var a,l,d;do for(;0<vi.length;)for(a=vi,vi=[],d=a.length,l=0;l<d;++l){var f=a[l];f[0].apply(null,f[1])}while(0<vi.length);wa=vs=!0}function Cs(){for(var a=ar,l=(ar=[],a.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)}),ka.slice(0)),d=l.length;d;)l[--d]()}function Ca(a){return new de(Jt,!1,a)}function He(a,l){var d=be;return function(){var f=Tr(),h=be;try{return Rn(d,!0),a.apply(this,arguments)}catch(g){l&&l(g)}finally{Rn(h,!1),f&&_r()}}}E(de.prototype,{then:ws,_then:function(a,l){ks(this,new vc(null,null,a,l,be))},catch:function(a){var l,d;return arguments.length===1?this.then(null,a):(l=a,d=arguments[1],typeof l=="function"?this.then(null,function(f){return(f instanceof l?d:Ca)(f)}):this.then(null,function(f){return(f&&f.name===l?d:Ca)(f)}))},finally:function(a){return this.then(function(l){return de.resolve(a()).then(function(){return l})},function(l){return de.resolve(a()).then(function(){return Ca(l)})})},timeout:function(a,l){var d=this;return a<1/0?new de(function(f,h){var g=setTimeout(function(){return h(new ge.Timeout(l))},a);d.then(f,h).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Y(de.prototype,Symbol.toStringTag,"Dexie.Promise"),Fn.env=wc(),E(de,{all:function(){var a=ae.apply(null,arguments).map(Na);return new de(function(l,d){a.length===0&&l([]);var f=a.length;a.forEach(function(h,g){return de.resolve(h).then(function(x){a[g]=x,--f||l(a)},d)})})},resolve:function(a){return a instanceof de?a:a&&typeof a.then=="function"?new de(function(l,d){a.then(l,d)}):new de(Jt,!0,a)},reject:Ca,race:function(){var a=ae.apply(null,arguments).map(Na);return new de(function(l,d){a.map(function(f){return de.resolve(f).then(l,d)})})},PSD:{get:function(){return be},set:function(a){return be=a}},totalEchoes:{get:function(){return Ea}},newPSD:Dn,usePSD:sr,scheduler:{get:function(){return yi},set:function(a){yi=a}},rejectionMapper:{get:function(){return xs},set:function(a){xs=a}},follow:function(a,l){return new de(function(d,f){return Dn(function(h,g){var x=be;x.unhandleds=[],x.onunhandled=g,x.finalize=Se(function(){var w,_=this;w=function(){_.unhandleds.length===0?h():g(_.unhandleds[0])},ka.push(function z(){w(),ka.splice(ka.indexOf(z),1)}),++or,yi(function(){--or==0&&Cs()},[])},x.finalize),a()},l,d,f)})}}),ir&&(ir.allSettled&&Y(de,"allSettled",function(){var a=ae.apply(null,arguments).map(Na);return new de(function(l){a.length===0&&l([]);var d=a.length,f=new Array(d);a.forEach(function(h,g){return de.resolve(h).then(function(x){return f[g]={status:"fulfilled",value:x}},function(x){return f[g]={status:"rejected",reason:x}}).then(function(){return--d||l(f)})})})}),ir.any&&typeof AggregateError<"u"&&Y(de,"any",function(){var a=ae.apply(null,arguments).map(Na);return new de(function(l,d){a.length===0&&d(new AggregateError([]));var f=a.length,h=new Array(f);a.forEach(function(g,x){return de.resolve(g).then(function(w){return l(w)},function(w){h[x]=w,--f||d(new AggregateError(h))})})})}),ir.withResolvers)&&(de.withResolvers=ir.withResolvers);var ut={awaits:0,echoes:0,id:0},Yh=0,ja=[],Sa=0,Ea=0,Qh=0;function Dn(a,x,d,f){var h=be,g=Object.create(h),x=(g.parent=h,g.ref=0,g.global=!1,g.id=++Qh,Fn.env,g.env=ys?{Promise:de,PromiseProp:{value:de,configurable:!0,writable:!0},all:de.all,race:de.race,allSettled:de.allSettled,any:de.any,resolve:de.resolve,reject:de.reject}:{},x&&m(g,x),++h.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},sr(g,a,d,f));return g.ref===0&&g.finalize(),x}function Ar(){return ut.id||(ut.id=++Yh),++ut.awaits,ut.echoes+=un,ut.id}function Pn(){return!!ut.awaits&&(--ut.awaits==0&&(ut.id=0),ut.echoes=ut.awaits*un,!0)}function Na(a){return ut.echoes&&a&&a.constructor===ir?(Ar(),a.then(function(l){return Pn(),l},function(l){return Pn(),rt(l)})):a}function Xh(){var a=ja[ja.length-1];ja.pop(),Rn(a,!1)}function Rn(a,l){var d,f,h=be;(l?!ut.echoes||Sa++&&a===be:!Sa||--Sa&&a===be)||queueMicrotask(l?(function(g){++Ea,ut.echoes&&--ut.echoes!=0||(ut.echoes=ut.awaits=ut.id=0),ja.push(be),Rn(g,!0)}).bind(null,a):Xh),a!==be&&(be=a,h===Fn&&(Fn.env=wc()),ys)&&(d=Fn.env.Promise,f=a.env,h.global||a.global)&&(Object.defineProperty(s,"Promise",f.PromiseProp),d.all=f.all,d.race=f.race,d.resolve=f.resolve,d.reject=f.reject,f.allSettled&&(d.allSettled=f.allSettled),f.any)&&(d.any=f.any)}function wc(){var a=s.Promise;return ys?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function sr(a,l,d,f,h){var g=be;try{return Rn(a,!0),l(d,f,h)}finally{Rn(g,!1)}}function bc(a,l,d,f){return typeof a!="function"?a:function(){var h=be;d&&Ar(),Rn(l,!0);try{return a.apply(this,arguments)}finally{Rn(h,!1),f&&queueMicrotask(Pn)}}}function js(a){Promise===ir&&ut.echoes===0?Sa===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Mr).indexOf("[native code]")===-1&&(Ar=Pn=Te);var rt=de.reject,lr="",xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kc="String expected.",Fr=[],Ta="__dbnames",Ss="readonly",Es="readwrite";function ur(a,l){return a?l?function(){return a.apply(this,arguments)&&l.apply(this,arguments)}:a:l}var Cc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _a(a){return typeof a!="string"||/\./.test(a)?function(l){return l}:function(l){return l[a]===void 0&&a in l&&delete(l=ee(l))[a],l}}function jc(){throw ge.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Fe(a,l){try{var d=Sc(a),f=Sc(l);if(d!==f)return d==="Array"?1:f==="Array"?-1:d==="binary"?1:f==="binary"?-1:d==="string"?1:f==="string"?-1:d==="Date"?1:f!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return l<a?1:a<l?-1:0;case"binary":for(var h=Ec(a),g=Ec(l),x=h.length,w=g.length,_=x<w?x:w,z=0;z<_;++z)if(h[z]!==g[z])return h[z]<g[z]?-1:1;return x===w?0:x<w?-1:1;case"Array":for(var A=a,N=l,P=A.length,R=N.length,F=P<R?P:R,T=0;T<F;++T){var W=Fe(A[T],N[T]);if(W!==0)return W}return P===R?0:P<R?-1:1}}catch{}return NaN}function Sc(a){var l=typeof a;return l=="object"&&(ArrayBuffer.isView(a)||(l=se(a))==="ArrayBuffer")?"binary":l}function Ec(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}function Aa(a,l,d){var f=a.schema.yProps;return f?(l&&0<d.numFailures&&(l=l.filter(function(h,g){return!d.failures[g]})),Promise.all(f.map(function(h){return h=h.updatesTable,l?a.db.table(h).where("k").anyOf(l).delete():a.db.table(h).clear()})).then(function(){return d})):d}Nc.prototype.execute=function(a){var l=this["@@propmod"];if(l.add!==void 0){var d=l.add;if(p(d))return o(o([],p(a)?a:[],!0),d).sort();if(typeof d=="number")return(Number(a)||0)+d;if(typeof d=="bigint")try{return BigInt(a)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(l.remove!==void 0){var f=l.remove;if(p(f))return p(a)?a.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(a)-f;if(typeof f=="bigint")try{return BigInt(a)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return d=(d=l.replacePrefix)==null?void 0:d[0],d&&typeof a=="string"&&a.startsWith(d)?l.replacePrefix[1]+a.substring(d.length):a};var xi=Nc;function Nc(a){this["@@propmod"]=a}function Tc(a,l){for(var d=c(l),f=d.length,h=!1,g=0;g<f;++g){var x=d[g],w=l[x],_=L(a,x);w instanceof xi?(B(a,x,w.execute(_)),h=!0):_!==w&&(B(a,x,w),h=!0)}return h}Ge.prototype._trans=function(a,l,d){var f=this._tx||be.trans,h=this.name,g=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function x(z,A,N){if(N.schema[h])return l(N.idbtrans,N);throw new ge.NotFound("Table "+h+" not part of transaction")}var w=Tr();try{var _=f&&f.db._novip===this.db._novip?f===be.trans?f._promise(a,x,d):Dn(function(){return f._promise(a,x,d)},{trans:f,transless:be.transless||be}):function z(A,N,P,R){if(A.idbdb&&(A._state.openComplete||be.letThrough||A._vip)){var F=A._createTransaction(N,P,A._dbSchema);try{F.create(),A._state.PR1398_maxLoop=3}catch(T){return T.name===Gt.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return z(A,N,P,R)})):rt(T)}return F._promise(N,function(T,W){return Dn(function(){return be.trans=F,R(T,W,F)})}).then(function(T){if(N==="readwrite")try{F.idbtrans.commit()}catch{}return N==="readonly"?T:F._completion.then(function(){return T})})}if(A._state.openComplete)return rt(new ge.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return rt(new ge.DatabaseClosed);A.open().catch(Te)}return A._state.dbReadyPromise.then(function(){return z(A,N,P,R)})}(this.db,a,[this.name],x);return g&&(_._consoleTask=g,_=_.catch(function(z){return console.trace(z),rt(z)})),_}finally{w&&_r()}},Ge.prototype.get=function(a,l){var d=this;return a&&a.constructor===Object?this.where(a).first(l):a==null?rt(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return d.core.get({trans:f,key:a}).then(function(h){return d.hook.reading.fire(h)})}).then(l)},Ge.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(p(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var l=c(a);if(l.length===1)return this.where(l[0]).equals(a[l[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&l.every(function(z){return 0<=w.keyPath.indexOf(z)})){for(var _=0;_<l.length;++_)if(l.indexOf(w.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(w,_){return w.keyPath.length-_.keyPath.length})[0];if(d&&this.db._maxKey!==lr)return x=d.keyPath.slice(0,l.length),this.where(x).equals(x.map(function(w){return a[w]}));!d&&Ee&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function h(w,_){return Fe(w,_)===0}var x=l.reduce(function(A,_){var z=A[0],A=A[1],N=f[_],P=a[_];return[z||N,z||!N?ur(A,N&&N.multi?function(R){return R=L(R,_),p(R)&&R.some(function(F){return h(P,F)})}:function(R){return h(P,L(R,_))}):A]},[null,null]),g=x[0],x=x[1];return g?this.where(g.name).equals(a[g.keyPath]).filter(x):d?this.filter(x):this.where(l).equals("")},Ge.prototype.filter=function(a){return this.toCollection().and(a)},Ge.prototype.count=function(a){return this.toCollection().count(a)},Ge.prototype.offset=function(a){return this.toCollection().offset(a)},Ge.prototype.limit=function(a){return this.toCollection().limit(a)},Ge.prototype.each=function(a){return this.toCollection().each(a)},Ge.prototype.toArray=function(a){return this.toCollection().toArray(a)},Ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ge.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,p(a)?"[".concat(a.join("+"),"]"):a))},Ge.prototype.reverse=function(){return this.toCollection().reverse()},Ge.prototype.mapToClass=function(a){for(var l=this.db,d=this.name,f=((this.schema.mappedClass=a).prototype instanceof jc&&(a=(x=>{var w=A,_=x;if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function z(){this.constructor=w}function A(){return x!==null&&x.apply(this,arguments)||this}return n(w,_),w.prototype=_===null?Object.create(_):(z.prototype=_.prototype,new z),Object.defineProperty(A.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),A.prototype.table=function(){return d},A})(a)),new Set),h=a.prototype;h;h=y(h))Object.getOwnPropertyNames(h).forEach(function(x){return f.add(x)});function g(x){if(!x)return x;var w,_=Object.create(a.prototype);for(w in x)if(!f.has(w))try{_[w]=x[w]}catch{}return _}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),a},Ge.prototype.defineClass=function(){return this.mapToClass(function(a){m(this,a)})},Ge.prototype.add=function(a,l){var d=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,x=a;return g&&h&&(x=_a(g)(a)),this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"add",keys:l!=null?[l]:null,values:[x]})}).then(function(w){return w.numFailures?de.reject(w.failures[0]):w.lastResult}).then(function(w){if(g)try{B(a,g,w)}catch{}return w})},Ge.prototype.upsert=function(a,l){var d=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return d.core.get({trans:h,key:a}).then(function(g){var x=g??{};return Tc(x,l),f&&B(x,f,a),d.core.mutate({trans:h,type:"put",values:[x],keys:[a],upsert:!0,updates:{keys:[a],changeSpecs:[l]}}).then(function(w){return w.numFailures?de.reject(w.failures[0]):!!g})})})},Ge.prototype.update=function(a,l){return typeof a!="object"||p(a)?this.where(":id").equals(a).modify(l):(a=L(a,this.schema.primKey.keyPath))===void 0?rt(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(l)},Ge.prototype.put=function(a,l){var d=this,f=this.schema.primKey,h=f.auto,g=f.keyPath,x=a;return g&&h&&(x=_a(g)(a)),this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"put",values:[x],keys:l!=null?[l]:null})}).then(function(w){return w.numFailures?de.reject(w.failures[0]):w.lastResult}).then(function(w){if(g)try{B(a,g,w)}catch{}return w})},Ge.prototype.delete=function(a){var l=this;return this._trans("readwrite",function(d){return l.core.mutate({trans:d,type:"delete",keys:[a]}).then(function(f){return Aa(l,[a],f)}).then(function(f){return f.numFailures?de.reject(f.failures[0]):void 0})})},Ge.prototype.clear=function(){var a=this;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"deleteRange",range:Cc}).then(function(d){return Aa(a,null,d)})}).then(function(l){return l.numFailures?de.reject(l.failures[0]):void 0})},Ge.prototype.bulkGet=function(a){var l=this;return this._trans("readonly",function(d){return l.core.getMany({keys:a,trans:d}).then(function(f){return f.map(function(h){return l.hook.reading.fire(h)})})})},Ge.prototype.bulkAdd=function(a,l,d){var f=this,h=Array.isArray(l)?l:void 0,g=(d=d||(h?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(x){var w=f.schema.primKey,z=w.auto,w=w.keyPath;if(w&&h)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var _=a.length,z=w&&z?a.map(_a(w)):a;return f.core.mutate({trans:x,type:"add",keys:h,values:z,wantResults:g}).then(function(A){var N=A.numFailures,P=A.failures;if(N===0)return g?A.results:A.lastResult;throw new Ue("".concat(f.name,".bulkAdd(): ").concat(N," of ").concat(_," operations failed"),P)})})},Ge.prototype.bulkPut=function(a,l,d){var f=this,h=Array.isArray(l)?l:void 0,g=(d=d||(h?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(x){var w=f.schema.primKey,z=w.auto,w=w.keyPath;if(w&&h)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==a.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var _=a.length,z=w&&z?a.map(_a(w)):a;return f.core.mutate({trans:x,type:"put",keys:h,values:z,wantResults:g}).then(function(A){var N=A.numFailures,P=A.failures;if(N===0)return g?A.results:A.lastResult;throw new Ue("".concat(f.name,".bulkPut(): ").concat(N," of ").concat(_," operations failed"),P)})})},Ge.prototype.bulkUpdate=function(a){var l=this,d=this.core,f=a.map(function(x){return x.key}),h=a.map(function(x){return x.changes}),g=[];return this._trans("readwrite",function(x){return d.getMany({trans:x,keys:f,cache:"clone"}).then(function(w){var _=[],z=[],A=(a.forEach(function(N,P){var R=N.key,F=N.changes,T=w[P];if(T){for(var W=0,U=Object.keys(F);W<U.length;W++){var O=U[W],Q=F[O];if(O===l.schema.primKey.keyPath){if(Fe(Q,R)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else B(T,O,Q)}g.push(P),_.push(R),z.push(T)}}),_.length);return d.mutate({trans:x,type:"put",keys:_,values:z,updates:{keys:f,changeSpecs:h}}).then(function(N){var P=N.numFailures,R=N.failures;if(P===0)return A;for(var F=0,T=Object.keys(R);F<T.length;F++){var W,U=T[F],O=g[Number(U)];O!=null&&(W=R[U],delete R[U],R[O]=W)}throw new Ue("".concat(l.name,".bulkUpdate(): ").concat(P," of ").concat(A," operations failed"),R)})})})},Ge.prototype.bulkDelete=function(a){var l=this,d=a.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:a}).then(function(h){return Aa(l,a,h)})}).then(function(f){var h=f.numFailures,g=f.failures;if(h===0)return f.lastResult;throw new Ue("".concat(l.name,".bulkDelete(): ").concat(h," of ").concat(d," operations failed"),g)})};var _c=Ge;function Ge(){}function wi(a){function l(x,w){if(w){for(var _=arguments.length,z=new Array(_-1);--_;)z[_-1]=arguments[_];return d[x].subscribe.apply(null,z),a}if(typeof x=="string")return d[x]}var d={};l.addEventType=g;for(var f=1,h=arguments.length;f<h;++f)g(arguments[f]);return l;function g(x,w,_){var z,A;if(typeof x!="object")return w=w||_t,A={subscribers:[],fire:_=_||Te,subscribe:function(N){A.subscribers.indexOf(N)===-1&&(A.subscribers.push(N),A.fire=w(A.fire,N))},unsubscribe:function(N){A.subscribers=A.subscribers.filter(function(P){return P!==N}),A.fire=A.subscribers.reduce(w,_)}},d[x]=l[x]=A;c(z=x).forEach(function(N){var P=z[N];if(p(P))g(N,z[N][0],z[N][1]);else{if(P!=="asap")throw new ge.InvalidArgument("Invalid event config");var R=g(N,re,function(){for(var F=arguments.length,T=new Array(F);F--;)T[F]=arguments[F];R.subscribers.forEach(function(W){K(function(){W.apply(null,T)})})})}})}}function bi(a,l){return M(l).from({prototype:a}),l}function Dr(a,l){return!(a.filter||a.algorithm||a.or)&&(l?a.justLimit:!a.replayFilter)}function Ns(a,l){a.filter=ur(a.filter,l)}function Ts(a,l,d){var f=a.replayFilter;a.replayFilter=f?function(){return ur(f(),l())}:l,a.justLimit=d&&!f}function Fa(a,l){if(a.isPrimKey)return l.primaryKey;var d=l.getIndexByKeyPath(a.index);if(d)return d;throw new ge.Schema("KeyPath "+a.index+" on object store "+l.name+" is not indexed")}function Ac(a,l,d){var f=Fa(a,l.schema);return l.openCursor({trans:d,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:f,range:a.range}})}function Da(a,l,d,f){var h,g,x=a.replayFilter?ur(a.filter,a.replayFilter()):a.filter;return a.or?(h={},g=function(w,_,z){var A,N;x&&!x(_,z,function(P){return _.stop(P)},function(P){return _.fail(P)})||((N=""+(A=_.primaryKey))=="[object ArrayBuffer]"&&(N=""+new Uint8Array(A)),S(h,N))||(h[N]=!0,l(w,_,z))},Promise.all([a.or._iterate(g,d),Fc(Ac(a,f,d),a.algorithm,g,!a.keysOnly&&a.valueMapper)])):Fc(Ac(a,f,d),ur(a.algorithm,x),l,!a.keysOnly&&a.valueMapper)}function Fc(a,l,d,f){var h=He(f?function(g,x,w){return d(f(g),x,w)}:d);return a.then(function(g){if(g)return g.start(function(){var x=function(){return g.continue()};l&&!l(g,function(w){return x=w},function(w){g.stop(w),x=Te},function(w){g.fail(w),x=Te})||h(g.value,g,function(w){return x=w}),x()})})}Ie.prototype._read=function(a,l){var d=this._ctx;return d.error?d.table._trans(null,rt.bind(null,d.error)):d.table._trans("readonly",a).then(l)},Ie.prototype._write=function(a){var l=this._ctx;return l.error?l.table._trans(null,rt.bind(null,l.error)):l.table._trans("readwrite",a,"locked")},Ie.prototype._addAlgorithm=function(a){var l=this._ctx;l.algorithm=ur(l.algorithm,a)},Ie.prototype._iterate=function(a,l){return Da(this._ctx,a,l,this._ctx.table.core)},Ie.prototype.clone=function(a){var l=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return a&&m(d,a),l._ctx=d,l},Ie.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ie.prototype.each=function(a){var l=this._ctx;return this._read(function(d){return Da(l,a,d,l.table.core)})},Ie.prototype.count=function(a){var l=this;return this._read(function(d){var f,h=l._ctx,g=h.table.core;return Dr(h,!0)?g.count({trans:d,query:{index:Fa(h,g.schema),range:h.range}}).then(function(x){return Math.min(x,h.limit)}):(f=0,Da(h,function(){return++f,!1},d,g).then(function(){return f}))}).then(a)},Ie.prototype.sortBy=function(a,l){var d=a.split(".").reverse(),f=d[0],h=d.length-1;function g(_,z){return z?g(_[d[z]],z-1):_[f]}var x=this._ctx.dir==="next"?1:-1;function w(_,z){return Fe(g(_,h),g(z,h))*x}return this.toArray(function(_){return _.sort(w)}).then(l)},Ie.prototype.toArray=function(a){var l=this;return this._read(function(d){var f,h,g,x=l._ctx;return x.dir==="next"&&Dr(x,!0)&&0<x.limit?(f=x.valueMapper,h=Fa(x,x.table.core.schema),x.table.core.query({trans:d,limit:x.limit,values:!0,query:{index:h,range:x.range}}).then(function(w){return w=w.result,f?w.map(f):w})):(g=[],Da(x,function(w){return g.push(w)},d,x.table.core).then(function(){return g}))},a)},Ie.prototype.offset=function(a){var l=this._ctx;return a<=0||(l.offset+=a,Dr(l)?Ts(l,function(){var d=a;return function(f,h){return d===0||(d===1?--d:h(function(){f.advance(d),d=0}),!1)}}):Ts(l,function(){var d=a;return function(){return--d<0}})),this},Ie.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),Ts(this._ctx,function(){var l=a;return function(d,f,h){return--l<=0&&f(h),0<=l}},!0),this},Ie.prototype.until=function(a,l){return Ns(this._ctx,function(d,f,h){return!a(d.value)||(f(h),l)}),this},Ie.prototype.first=function(a){return this.limit(1).toArray(function(l){return l[0]}).then(a)},Ie.prototype.last=function(a){return this.reverse().first(a)},Ie.prototype.filter=function(a){var l;return Ns(this._ctx,function(d){return a(d.value)}),(l=this._ctx).isMatch=ur(l.isMatch,a),this},Ie.prototype.and=function(a){return this.filter(a)},Ie.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},Ie.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ie.prototype.desc=function(){return this.reverse()},Ie.prototype.eachKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){a(f.key,f)})},Ie.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},Ie.prototype.eachPrimaryKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){a(f.primaryKey,f)})},Ie.prototype.keys=function(a){var l=this._ctx,d=(l.keysOnly=!l.isMatch,[]);return this.each(function(f,h){d.push(h.key)}).then(function(){return d}).then(a)},Ie.prototype.primaryKeys=function(a){var l=this._ctx;if(l.dir==="next"&&Dr(l,!0)&&0<l.limit)return this._read(function(f){var h=Fa(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:h,range:l.range}})}).then(function(f){return f.result}).then(a);l.keysOnly=!l.isMatch;var d=[];return this.each(function(f,h){d.push(h.primaryKey)}).then(function(){return d}).then(a)},Ie.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},Ie.prototype.firstKey=function(a){return this.limit(1).keys(function(l){return l[0]}).then(a)},Ie.prototype.lastKey=function(a){return this.reverse().firstKey(a)},Ie.prototype.distinct=function(){var a,l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];return l&&l.multi&&(a={},Ns(this._ctx,function(f){var f=f.primaryKey.toString(),h=S(a,f);return a[f]=!0,!h})),this},Ie.prototype.modify=function(a){var l=this,d=this._ctx;return this._write(function(f){function h(T,W){var U=W.failures;P+=T-W.numFailures;for(var O=0,Q=c(U);O<Q.length;O++){var te=Q[O];N.push(U[te])}}var g=typeof a=="function"?a:function(T){return Tc(T,a)},x=d.table.core,A=x.schema.primaryKey,w=A.outbound,_=A.extractKey,z=200,A=l.db._options.modifyChunkSize,N=(A&&(z=typeof A=="object"?A[x.name]||A["*"]||200:A),[]),P=0,R=[],F=a===Dc;return l.clone().primaryKeys().then(function(T){function W(O){var Q=Math.min(z,T.length-O),te=T.slice(O,O+Q);return(F?Promise.resolve([]):x.getMany({trans:f,keys:te,cache:"immutable"})).then(function(ue){var ce=[],ne=[],me=w?[]:null,pe=F?te:[];if(!F)for(var oe=0;oe<Q;++oe){var ye=ue[oe],Pe={value:ee(ye),primKey:T[O+oe]};g.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?pe.push(T[O+oe]):w||Fe(_(ye),_(Pe.value))===0?(ne.push(Pe.value),w&&me.push(T[O+oe])):(pe.push(T[O+oe]),ce.push(Pe.value)))}return Promise.resolve(0<ce.length&&x.mutate({trans:f,type:"add",values:ce}).then(function(Oe){for(var ke in Oe.failures)pe.splice(parseInt(ke),1);h(ce.length,Oe)})).then(function(){return(0<ne.length||U&&typeof a=="object")&&x.mutate({trans:f,type:"put",keys:me,values:ne,criteria:U,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<O}).then(function(Oe){return h(ne.length,Oe)})}).then(function(){return(0<pe.length||U&&F)&&x.mutate({trans:f,type:"delete",keys:pe,criteria:U,isAdditionalChunk:0<O}).then(function(Oe){return Aa(d.table,pe,Oe)}).then(function(Oe){return h(pe.length,Oe)})}).then(function(){return T.length>O+Q&&W(O+z)})})}var U=Dr(d)&&d.limit===1/0&&(typeof a!="function"||F)&&{index:d.index,range:d.range};return W(0).then(function(){if(0<N.length)throw new Le("Error modifying one or more objects",N,P,R);return T.length})})})},Ie.prototype.delete=function(){var a=this._ctx,l=a.range;return!Dr(a)||a.table.schema.yProps||!a.isPrimKey&&l.type!==3?this.modify(Dc):this._write(function(d){var f=a.table.core.schema.primaryKey,h=l;return a.table.core.count({trans:d,query:{index:f,range:h}}).then(function(g){return a.table.core.mutate({trans:d,type:"deleteRange",range:h}).then(function(_){var w=_.failures,_=_.numFailures;if(_)throw new Le("Could not delete some values",Object.keys(w).map(function(z){return w[z]}),g-_);return g-_})})})};var Zh=Ie;function Ie(){}var Dc=function(a,l){return l.value=null};function Jh(a,l){return a<l?-1:a===l?0:1}function em(a,l){return l<a?-1:a===l?0:1}function Bt(a,l,d){return a=a instanceof Rc?new a.Collection(a):a,a._ctx.error=new(d||TypeError)(l),a}function Pr(a){return new a.Collection(a,function(){return Pc("")}).limit(0)}function Pa(R,l,d,f){var h,g,x,w,_,z,A,N=d.length;if(!d.every(function(T){return typeof T=="string"}))return Bt(R,kc);function P(T){h=T==="next"?function(U){return U.toUpperCase()}:function(U){return U.toLowerCase()},g=T==="next"?function(U){return U.toLowerCase()}:function(U){return U.toUpperCase()},x=T==="next"?Jh:em;var W=d.map(function(U){return{lower:g(U),upper:h(U)}}).sort(function(U,O){return x(U.lower,O.lower)});w=W.map(function(U){return U.upper}),_=W.map(function(U){return U.lower}),A=(z=T)==="next"?"":f}P("next");var R=new R.Collection(R,function(){return Mn(w[0],_[N-1]+f)}),F=(R._ondirectionchange=function(T){P(T)},0);return R._addAlgorithm(function(T,W,U){var O=T.key;if(typeof O=="string"){var Q=g(O);if(l(Q,_,F))return!0;for(var te=null,ue=F;ue<N;++ue){var ce=((ne,me,pe,oe,ye,Pe)=>{for(var Oe=Math.min(ne.length,oe.length),ke=-1,Ne=0;Ne<Oe;++Ne){var Qe=me[Ne];if(Qe!==oe[Ne])return ye(ne[Ne],pe[Ne])<0?ne.substr(0,Ne)+pe[Ne]+pe.substr(Ne+1):ye(ne[Ne],oe[Ne])<0?ne.substr(0,Ne)+oe[Ne]+pe.substr(Ne+1):0<=ke?ne.substr(0,ke)+me[ke]+pe.substr(ke+1):null;ye(ne[Ne],Qe)<0&&(ke=Ne)}return Oe<oe.length&&Pe==="next"?ne+pe.substr(ne.length):Oe<ne.length&&Pe==="prev"?ne.substr(0,pe.length):ke<0?null:ne.substr(0,ke)+oe[ke]+pe.substr(ke+1)})(O,Q,w[ue],_[ue],x,z);ce===null&&te===null?F=ue+1:(te===null||0<x(te,ce))&&(te=ce)}W(te!==null?function(){T.continue(te+A)}:U)}return!1}),R}function Mn(a,l,d,f){return{type:2,lower:a,upper:l,lowerOpen:d,upperOpen:f}}function Pc(a){return{type:1,lower:a,upper:a}}Object.defineProperty(ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ct.prototype.between=function(a,l,d,f){d=d!==!1,f=f===!0;try{return 0<this._cmp(a,l)||this._cmp(a,l)===0&&(d||f)&&(!d||!f)?Pr(this):new this.Collection(this,function(){return Mn(a,l,!d,!f)})}catch{return Bt(this,xn)}},ct.prototype.equals=function(a){return a==null?Bt(this,xn):new this.Collection(this,function(){return Pc(a)})},ct.prototype.above=function(a){return a==null?Bt(this,xn):new this.Collection(this,function(){return Mn(a,void 0,!0)})},ct.prototype.aboveOrEqual=function(a){return a==null?Bt(this,xn):new this.Collection(this,function(){return Mn(a,void 0,!1)})},ct.prototype.below=function(a){return a==null?Bt(this,xn):new this.Collection(this,function(){return Mn(void 0,a,!1,!0)})},ct.prototype.belowOrEqual=function(a){return a==null?Bt(this,xn):new this.Collection(this,function(){return Mn(void 0,a)})},ct.prototype.startsWith=function(a){return typeof a!="string"?Bt(this,kc):this.between(a,a+lr,!0,!0)},ct.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Pa(this,function(l,d){return l.indexOf(d[0])===0},[a],lr)},ct.prototype.equalsIgnoreCase=function(a){return Pa(this,function(l,d){return l===d[0]},[a],"")},ct.prototype.anyOfIgnoreCase=function(){var a=ae.apply(X,arguments);return a.length===0?Pr(this):Pa(this,function(l,d){return d.indexOf(l)!==-1},a,"")},ct.prototype.startsWithAnyOfIgnoreCase=function(){var a=ae.apply(X,arguments);return a.length===0?Pr(this):Pa(this,function(l,d){return d.some(function(f){return l.indexOf(f)===0})},a,lr)},ct.prototype.anyOf=function(){var a,l,d=this,f=ae.apply(X,arguments),h=this._cmp;try{f.sort(h)}catch{return Bt(this,xn)}return f.length===0?Pr(this):((a=new this.Collection(this,function(){return Mn(f[0],f[f.length-1])}))._ondirectionchange=function(g){h=g==="next"?d._ascending:d._descending,f.sort(h)},l=0,a._addAlgorithm(function(g,x,w){for(var _=g.key;0<h(_,f[l]);)if(++l===f.length)return x(w),!1;return h(_,f[l])===0||(x(function(){g.continue(f[l])}),!1)}),a)},ct.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ct.prototype.noneOf=function(){var a=ae.apply(X,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Bt(this,xn)}var l=a.reduce(function(d,f){return d?d.concat([[d[d.length-1][1],f]]):[[-1/0,f]]},null);return l.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},ct.prototype.inAnyRange=function(a,U){var d=this,f=this._cmp,h=this._ascending,g=this._descending,x=this._min,w=this._max;if(a.length===0)return Pr(this);if(!a.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&h(O[0],O[1])<=0}))return Bt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var _=!U||U.includeLowers!==!1,z=U&&U.includeUppers===!0,A,N=h;function P(O,Q){return N(O[0],Q[0])}try{(A=a.reduce(function(O,Q){for(var te=0,ue=O.length;te<ue;++te){var ce=O[te];if(f(Q[0],ce[1])<0&&0<f(Q[1],ce[0])){ce[0]=x(ce[0],Q[0]),ce[1]=w(ce[1],Q[1]);break}}return te===ue&&O.push(Q),O},[])).sort(P)}catch{return Bt(this,xn)}var R=0,F=z?function(O){return 0<h(O,A[R][1])}:function(O){return 0<=h(O,A[R][1])},T=_?function(O){return 0<g(O,A[R][0])}:function(O){return 0<=g(O,A[R][0])},W=F,U=new this.Collection(this,function(){return Mn(A[0][0],A[A.length-1][1],!_,!z)});return U._ondirectionchange=function(O){N=O==="next"?(W=F,h):(W=T,g),A.sort(P)},U._addAlgorithm(function(O,Q,te){for(var ue,ce=O.key;W(ce);)if(++R===A.length)return Q(te),!1;return!F(ue=ce)&&!T(ue)||(d._cmp(ce,A[R][1])===0||d._cmp(ce,A[R][0])===0||Q(function(){N===h?O.continue(A[R][0]):O.continue(A[R][1])}),!1)}),U},ct.prototype.startsWithAnyOf=function(){var a=ae.apply(X,arguments);return a.every(function(l){return typeof l=="string"})?a.length===0?Pr(this):this.inAnyRange(a.map(function(l){return[l,l+lr]})):Bt(this,"startsWithAnyOf() only works with strings")};var Rc=ct;function ct(){}function dn(a){return He(function(l){return ki(l),a(l.target.error),!1})}function ki(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ci="storagemutated",_s="x-storagemutated-1",Bn=wi(null,Ci),tm=(fn.prototype._lock=function(){return I(!be.global),++this._reculock,this._reculock!==1||be.global||(be.lockOwnerFor=this),this},fn.prototype._unlock=function(){if(I(!be.global),--this._reculock==0)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{sr(a[1],a[0])}catch{}}return this},fn.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},fn.prototype.create=function(a){var l=this;if(this.mode){var d=this.db.idbdb,f=this.db._state.dbOpenError;if(I(!this.idbtrans),!a&&!d)switch(f&&f.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(f);case"MissingAPIError":throw new ge.MissingAPI(f.message,f);default:throw new ge.OpenFailed(f)}if(!this.active)throw new ge.TransactionInactive;I(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=He(function(h){ki(h),l._reject(a.error)}),a.onabort=He(function(h){ki(h),l.active&&l._reject(new ge.Abort(a.error)),l.active=!1,l.on("abort").fire(h)}),a.oncomplete=He(function(){l.active=!1,l._resolve(),"mutatedParts"in a&&Bn.storagemutated.fire(a.mutatedParts)})}return this},fn.prototype._promise=function(a,l,d){var f,h=this;return a==="readwrite"&&this.mode!=="readwrite"?rt(new ge.ReadOnly("Transaction is readonly")):this.active?this._locked()?new de(function(g,x){h._blockedFuncs.push([function(){h._promise(a,l,d).then(g,x)},be])}):d?Dn(function(){var g=new de(function(x,w){h._lock();var _=l(x,w,h);_&&_.then&&_.then(x,w)});return g.finally(function(){return h._unlock()}),g._lib=!0,g}):((f=new de(function(g,x){var w=l(g,x,h);w&&w.then&&w.then(g,x)}))._lib=!0,f):rt(new ge.TransactionInactive)},fn.prototype._root=function(){return this.parent?this.parent._root():this},fn.prototype.waitFor=function(a){var l,d=this._root(),f=de.resolve(a),h=(d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return f}):(d._waitingFor=f,d._waitingQueue=[],l=d.idbtrans.objectStore(d.storeNames[0]),function g(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(l.get(-1/0).onsuccess=g)}()),d._waitingFor);return new de(function(g,x){f.then(function(w){return d._waitingQueue.push(He(g.bind(null,w)))},function(w){return d._waitingQueue.push(He(x.bind(null,w)))}).finally(function(){d._waitingFor===h&&(d._waitingFor=null)})})},fn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},fn.prototype.table=function(a){var l=this._memoizedTables||(this._memoizedTables={});if(S(l,a))return l[a];var d=this.schema[a];if(d)return(d=new this.db.Table(a,d,this)).core=this.db.core.table(a),l[a]=d;throw new ge.NotFound("Table "+a+" not part of transaction")},fn);function fn(){}function As(a,l,d,f,h,g,x,w){return{name:a,keyPath:l,unique:d,multi:f,auto:h,compound:g,src:(d&&!x?"&":"")+(f?"*":"")+(h?"++":"")+Mc(l),type:w}}function Mc(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Fs(a,l,d){return{name:a,primKey:l,indexes:d,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},d.reduce(function(h,g,x){return g=f(g,x),g&&(h[g[0]]=g[1]),h},{}))};var f}var ji=function(a){try{return a.only([[]]),ji=function(){return[[]]},[[]]}catch{return ji=function(){return lr},lr}};function Ds(a){return a==null?function(){}:typeof a=="string"?(l=a).split(".").length===1?function(d){return d[l]}:function(d){return L(d,l)}:function(d){return L(d,a)};var l}function Bc(a){return[].slice.call(a)}var nm=0;function Si(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function rm(a,l,_){function f(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var N=F.lower,P=F.upper,R=F.lowerOpen,F=F.upperOpen;return N===void 0?P===void 0?null:l.upperBound(P,!!F):P===void 0?l.lowerBound(N,!!R):l.bound(N,P,!!R,!!F)}function h(A){var N,P=A.name;return{name:P,schema:A,mutate:function(R){var F=R.trans,T=R.type,W=R.keys,U=R.values,O=R.range;return new Promise(function(Q,te){Q=He(Q);var ue=F.objectStore(P),ce=ue.keyPath==null,ne=T==="put"||T==="add";if(!ne&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var me,pe=(W||U||{length:1}).length;if(W&&U&&W.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(pe===0)return Q({numFailures:0,failures:{},results:[],lastResult:void 0});function oe(et){++Oe,ki(et)}var ye=[],Pe=[],Oe=0;if(T==="deleteRange"){if(O.type===4)return Q({numFailures:Oe,failures:Pe,results:[],lastResult:void 0});O.type===3?ye.push(me=ue.clear()):ye.push(me=ue.delete(f(O)))}else{var ce=ne?ce?[U,W]:[U,null]:[W,null],ke=ce[0],Ne=ce[1];if(ne)for(var Qe=0;Qe<pe;++Qe)ye.push(me=Ne&&Ne[Qe]!==void 0?ue[T](ke[Qe],Ne[Qe]):ue[T](ke[Qe])),me.onerror=oe;else for(Qe=0;Qe<pe;++Qe)ye.push(me=ue[T](ke[Qe])),me.onerror=oe}function Vt(et){et=et.target.result,ye.forEach(function(fr,Qs){return fr.error!=null&&(Pe[Qs]=fr.error)}),Q({numFailures:Oe,failures:Pe,results:T==="delete"?W:ye.map(function(fr){return fr.result}),lastResult:et})}me.onerror=function(et){oe(et),Vt(et)},me.onsuccess=Vt})},getMany:function(R){var F=R.trans,T=R.keys;return new Promise(function(W,U){W=He(W);for(var O,Q=F.objectStore(P),te=T.length,ue=new Array(te),ce=0,ne=0,me=function(ye){ye=ye.target,ue[ye._pos]=ye.result,++ne===ce&&W(ue)},pe=dn(U),oe=0;oe<te;++oe)T[oe]!=null&&((O=Q.get(T[oe]))._pos=oe,O.onsuccess=me,O.onerror=pe,++ce);ce===0&&W(ue)})},get:function(R){var F=R.trans,T=R.key;return new Promise(function(W,U){W=He(W);var O=F.objectStore(P).get(T);O.onsuccess=function(Q){return W(Q.target.result)},O.onerror=dn(U)})},query:(N=w,function(R){return new Promise(function(F,T){F=He(F);var W,U,O,ne=R.trans,Q=R.values,te=R.limit,ce=R.query,ue=te===1/0?void 0:te,me=ce.index,ce=ce.range,ne=ne.objectStore(P),ne=me.isPrimaryKey?ne:ne.index(me.name),me=f(ce);if(te===0)return F({result:[]});N?((ce=Q?ne.getAll(me,ue):ne.getAllKeys(me,ue)).onsuccess=function(pe){return F({result:pe.target.result})},ce.onerror=dn(T)):(W=0,U=!Q&&"openKeyCursor"in ne?ne.openKeyCursor(me):ne.openCursor(me),O=[],U.onsuccess=function(pe){var oe=U.result;return!oe||(O.push(Q?oe.value:oe.primaryKey),++W===te)?F({result:O}):void oe.continue()},U.onerror=dn(T))})}),openCursor:function(R){var F=R.trans,T=R.values,W=R.query,U=R.reverse,O=R.unique;return new Promise(function(Q,te){Q=He(Q);var ne=W.index,ue=W.range,ce=F.objectStore(P),ce=ne.isPrimaryKey?ce:ce.index(ne.name),ne=U?O?"prevunique":"prev":O?"nextunique":"next",me=!T&&"openKeyCursor"in ce?ce.openKeyCursor(f(ue),ne):ce.openCursor(f(ue),ne);me.onerror=dn(te),me.onsuccess=He(function(pe){var oe,ye,Pe,Oe,ke=me.result;ke?(ke.___id=++nm,ke.done=!1,oe=ke.continue.bind(ke),ye=(ye=ke.continuePrimaryKey)&&ye.bind(ke),Pe=ke.advance.bind(ke),Oe=function(){throw new Error("Cursor not stopped")},ke.trans=F,ke.stop=ke.continue=ke.continuePrimaryKey=ke.advance=function(){throw new Error("Cursor not started")},ke.fail=He(te),ke.next=function(){var Ne=this,Qe=1;return this.start(function(){return Qe--?Ne.continue():Ne.stop()}).then(function(){return Ne})},ke.start=function(Ne){function Qe(){if(me.result)try{Ne()}catch(et){ke.fail(et)}else ke.done=!0,ke.start=function(){throw new Error("Cursor behind last entry")},ke.stop()}var Vt=new Promise(function(et,fr){et=He(et),me.onerror=dn(fr),ke.fail=fr,ke.stop=function(Qs){ke.stop=ke.continue=ke.continuePrimaryKey=ke.advance=Oe,et(Qs)}});return me.onsuccess=He(function(et){me.onsuccess=Qe,Qe()}),ke.continue=oe,ke.continuePrimaryKey=ye,ke.advance=Pe,Qe(),Vt},Q(ke)):Q(null)},te)})},count:function(R){var F=R.query,T=R.trans,W=F.index,U=F.range;return new Promise(function(O,Q){var te=T.objectStore(P),te=W.isPrimaryKey?te:te.index(W.name),ue=f(U),ue=ue?te.count(ue):te.count();ue.onsuccess=He(function(ce){return O(ce.target.result)}),ue.onerror=dn(Q)})}}}g=_,x=Bc((_=a).objectStoreNames);var g,_={schema:{name:_.name,tables:x.map(function(A){return g.objectStore(A)}).map(function(A){var N=A.keyPath,P=A.autoIncrement,F=p(N),R={},F={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N==null,compound:F,keyPath:N,autoIncrement:P,unique:!0,extractKey:Ds(N)},indexes:Bc(A.indexNames).map(function(T){return A.index(T)}).map(function(O){var Q=O.name,W=O.unique,U=O.multiEntry,O=O.keyPath,Q={name:Q,compound:p(O),keyPath:O,unique:W,multiEntry:U,extractKey:Ds(O)};return R[Si(O)]=Q}),getIndexByKeyPath:function(T){return R[Si(T)]}};return R[":id"]=F.primaryKey,N!=null&&(R[Si(N)]=F.primaryKey),F})},hasGetAll:0<x.length&&"getAll"in g.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},x=_.schema,w=_.hasGetAll,_=x.tables.map(h),z={};return _.forEach(function(A){return z[A.name]=A}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(A){if(z[A])return z[A];throw new Error("Table '".concat(A,"' not found"))},MIN_KEY:-1/0,MAX_KEY:ji(l),schema:x}}function im(a,l,d,f){return d=d.IDBKeyRange,l=rm(l,d,f),{dbcore:a.dbcore.reduce(function(h,g){return g=g.create,r(r({},h),g(h))},l)}}function Ra(a,l){var d=l.db,d=im(a._middlewares,d,a._deps,l);a.core=d.dbcore,a.tables.forEach(function(f){var h=f.name;a.core.schema.tables.some(function(g){return g.name===h})&&(f.core=a.core.table(h),a[h]instanceof a.Table)&&(a[h].core=f.core)})}function Ma(a,l,d,f){d.forEach(function(h){var g=f[h];l.forEach(function(x){var w=function _(z,A){return J(z,A)||(z=y(z))&&_(z,A)}(x,h);(!w||"value"in w&&w.value===void 0)&&(x===a.Transaction.prototype||x instanceof a.Transaction?Y(x,h,{get:function(){return this.table(h)},set:function(_){$(this,h,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):x[h]=new a.Table(h,g))})})}function Ps(a,l){l.forEach(function(d){for(var f in d)d[f]instanceof a.Table&&delete d[f]})}function am(a,l){return a._cfg.version-l._cfg.version}function om(a,l,d,f){var h=a._dbSchema,g=(d.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Fs("$meta",Oc("")[0],[]),a._storeNames.push("$meta")),a._createTransaction("readwrite",a._storeNames,h)),x=(g.create(d),g._completion.catch(f),g._reject.bind(g)),w=be.transless||be;Dn(function(){if(be.trans=g,be.transless=w,l!==0)return Ra(a,d),z=l,((_=g).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(A){return A??z}):de.resolve(z)).then(function(W){var N=a,P=W,R=g,F=d,T=[],W=N._versions,U=N._dbSchema=Ia(0,N.idbdb,F);return(W=W.filter(function(O){return O._cfg.version>=P})).length===0?de.resolve():(W.forEach(function(O){T.push(function(){var Q,te,ue,ce=U,ne=O._cfg.dbschema,me=(Oa(N,ce,F),Oa(N,ne,F),U=N._dbSchema=ne,Rs(ce,ne)),pe=(me.add.forEach(function(oe){Ms(F,oe[0],oe[1].primKey,oe[1].indexes)}),me.change.forEach(function(oe){if(oe.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var ye=F.objectStore(oe.name);oe.add.forEach(function(Pe){return Ba(ye,Pe)}),oe.change.forEach(function(Pe){ye.deleteIndex(Pe.name),Ba(ye,Pe)}),oe.del.forEach(function(Pe){return ye.deleteIndex(Pe)})}),O._cfg.contentUpgrade);if(pe&&O._cfg.version>P)return Ra(N,F),R._memoizedTables={},Q=V(ne),me.del.forEach(function(oe){Q[oe]=ce[oe]}),Ps(N,[N.Transaction.prototype]),Ma(N,[N.Transaction.prototype],c(Q),Q),R.schema=Q,(te=we(pe))&&Ar(),ne=de.follow(function(){var oe;(ue=pe(R))&&te&&(oe=Pn.bind(null,null),ue.then(oe,oe))}),ue&&typeof ue.then=="function"?de.resolve(ue):ne.then(function(){return ue})}),T.push(function(Q){var te,ue,ce=O._cfg.dbschema;te=ce,ue=Q,[].slice.call(ue.db.objectStoreNames).forEach(function(ne){return te[ne]==null&&ue.db.deleteObjectStore(ne)}),Ps(N,[N.Transaction.prototype]),Ma(N,[N.Transaction.prototype],N._storeNames,N._dbSchema),R.schema=N._dbSchema}),T.push(function(Q){N.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(N.idbdb.version/10)===O._cfg.version?(N.idbdb.deleteObjectStore("$meta"),delete N._dbSchema.$meta,N._storeNames=N._storeNames.filter(function(te){return te!=="$meta"})):Q.objectStore("$meta").put(O._cfg.version,"version"))})}),function O(){return T.length?de.resolve(T.shift()(R.idbtrans)).then(O):de.resolve()}().then(function(){Ic(U,F)}))}).catch(x);var _,z;c(h).forEach(function(A){Ms(d,A,h[A].primKey,h[A].indexes)}),Ra(a,d),de.follow(function(){return a.on.populate.fire(g)}).catch(x)})}function sm(a,l){Ic(a._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var d=Ia(0,a.idbdb,l);Oa(a,a._dbSchema,l);for(var f=0,h=Rs(d,a._dbSchema).change;f<h.length;f++){var g=(x=>{if(x.change.length||x.recreate)return console.warn("Unable to patch indexes of table ".concat(x.name," because it has changes on the type of index or primary key.")),{value:void 0};var w=l.objectStore(x.name);x.add.forEach(function(_){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(x.name,".").concat(_.src)),Ba(w,_)})})(h[f]);if(typeof g=="object")return g.value}}function Rs(a,l){var d,f={del:[],add:[],change:[]};for(d in a)l[d]||f.del.push(d);for(d in l){var h=a[d],g=l[d];if(h){var x={name:d,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||h.primKey.auto!==g.primKey.auto)x.recreate=!0,f.change.push(x);else{var w=h.idxByName,_=g.idxByName,z=void 0;for(z in w)_[z]||x.del.push(z);for(z in _){var A=w[z],N=_[z];A?A.src!==N.src&&x.change.push(N):x.add.push(N)}(0<x.del.length||0<x.add.length||0<x.change.length)&&f.change.push(x)}}else f.add.push([d,g])}return f}function Ms(a,l,d,f){var h=a.db.createObjectStore(l,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});f.forEach(function(g){return Ba(h,g)})}function Ic(a,l){c(a).forEach(function(d){l.db.objectStoreNames.contains(d)||(Ee&&console.debug("Dexie: Creating missing table",d),Ms(l,d,a[d].primKey,a[d].indexes))})}function Ba(a,l){a.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function Ia(a,l,d){var f={};return v(l.objectStoreNames,0).forEach(function(h){for(var g=d.objectStore(h),x=As(Mc(z=g.keyPath),z||"",!0,!1,!!g.autoIncrement,z&&typeof z!="string",!0),w=[],_=0;_<g.indexNames.length;++_){var A=g.index(g.indexNames[_]),z=A.keyPath,A=As(A.name,z,!!A.unique,!!A.multiEntry,!1,z&&typeof z!="string",!1);w.push(A)}f[h]=Fs(h,x,w)}),f}function Oa(a,l,d){for(var f=d.db.objectStoreNames,h=0;h<f.length;++h){var g=f[h],x=d.objectStore(g);a._hasGetAll="getAll"in x;for(var w=0;w<x.indexNames.length;++w){var _,z=x.indexNames[w],A=x.index(z).keyPath,A=typeof A=="string"?A:"["+v(A).join("+")+"]";l[g]&&(_=l[g].idxByName[A])&&(_.name=z,delete l[g].idxByName[A],l[g].idxByName[z]=_)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Oc(a){return a.split(",").map(function(l,d){var h=l.split(":"),f=(f=h[1])==null?void 0:f.trim(),h=(l=h[0].trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return As(h,g||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),p(g),d===0,f)})}Rr.prototype._createTableSchema=Fs,Rr.prototype._parseIndexSyntax=Oc,Rr.prototype._parseStoresSpec=function(a,l){var d=this;c(a).forEach(function(f){if(a[f]!==null){var h=d._parseIndexSyntax(a[f]),g=h.shift();if(!g)throw new ge.Schema("Invalid schema for table "+f+": "+a[f]);if(g.unique=!0,g.multi)throw new ge.Schema("Primary key cannot be multiEntry*");h.forEach(function(x){if(x.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),g=d._createTableSchema(f,g,h),l[f]=g}})},Rr.prototype.stores=function(d){var l=this.db,d=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,d):d,l._versions),f={},h={};return d.forEach(function(g){m(f,g._cfg.storesSource),h=g._cfg.dbschema={},g._parseStoresSpec(f,h)}),l._dbSchema=h,Ps(l,[l._allTables,l,l.Transaction.prototype]),Ma(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],c(h),h),l._storeNames=c(h),this},Rr.prototype.upgrade=function(a){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Te,a),this};var lm=Rr;function Rr(){}function Bs(a,l){var d=a._dbNamesDB;return d||(d=a._dbNamesDB=new wn(Ta,{addons:[],indexedDB:a,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Is(a){return a&&typeof a.databases=="function"}function Os(a){return Dn(function(){return be.letThrough=!0,a()})}function zs(a){return!("from"in a)}var vt=function(a,l){var d;if(!this)return d=new vt,a&&"d"in a&&m(d,a),d;m(this,arguments.length?{d:1,from:a,to:1<arguments.length?l:a}:{d:0})};function Ei(a,l,d){var f=Fe(l,d);if(!isNaN(f)){if(0<f)throw RangeError();if(zs(a))return m(a,{from:l,to:d,d:1});var f=a.l,h=a.r;if(Fe(d,a.from)<0)return f?Ei(f,l,d):a.l={from:l,to:d,d:1,l:null,r:null},Lc(a);if(0<Fe(l,a.to))return h?Ei(h,l,d):a.r={from:l,to:d,d:1,l:null,r:null},Lc(a);Fe(l,a.from)<0&&(a.from=l,a.l=null,a.d=h?h.d+1:1),0<Fe(d,a.to)&&(a.to=d,a.r=null,a.d=a.l?a.l.d+1:1),l=!a.r,f&&!a.l&&Ni(a,f),h&&l&&Ni(a,h)}}function Ni(a,l){zs(l)||function d(f,h){var g=h.from,x=h.l,w=h.r;Ei(f,g,h.to),x&&d(f,x),w&&d(f,w)}(a,l)}function zc(a,l){var d=za(l),f=d.next();if(!f.done)for(var h=f.value,g=za(a),x=g.next(h.from),w=x.value;!f.done&&!x.done;){if(Fe(w.from,h.to)<=0&&0<=Fe(w.to,h.from))return!0;Fe(h.from,w.from)<0?h=(f=d.next(w.from)).value:w=(x=g.next(h.from)).value}return!1}function za(a){var l=zs(a)?null:{s:0,n:a};return{next:function(d){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&Fe(d,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||Fe(d,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Lc(a){var l,d,f,h=(((h=a.r)==null?void 0:h.d)||0)-(((h=a.l)==null?void 0:h.d)||0),h=1<h?"r":h<-1?"l":"";h&&(l=h=="r"?"l":"r",d=r({},a),f=a[h],a.from=f.from,a.to=f.to,a[h]=f[h],d[h]=f[l],(a[l]=d).d=$c(d)),a.d=$c(a)}function $c(d){var l=d.r,d=d.l;return(l?d?Math.max(l.d,d.d):l.d:d?d.d:0)+1}function La(a,l){return c(l).forEach(function(d){a[d]?Ni(a[d],l[d]):a[d]=function f(h){var g,x,w={};for(g in h)S(h,g)&&(x=h[g],w[g]=!x||typeof x!="object"||D.has(x.constructor)?x:f(x));return w}(l[d])}),a}function Ls(a,l){return a.all||l.all||Object.keys(a).some(function(d){return l[d]&&zc(l[d],a[d])})}E(vt.prototype,((Mt={add:function(a){return Ni(this,a),this},addKey:function(a){return Ei(this,a,a),this},addKeys:function(a){var l=this;return a.forEach(function(d){return Ei(l,d,d)}),this},hasKey:function(a){var l=za(this).next(a).value;return l&&Fe(l.from,a)<=0&&0<=Fe(l.to,a)}})[le]=function(){return za(this)},Mt));var cr={},$s={},Ws=!1;function $a(a){La($s,a),Ws||(Ws=!0,setTimeout(function(){Ws=!1,Gs($s,!($s={}))},0))}function Gs(a,l){l===void 0&&(l=!1);var d=new Set;if(a.all)for(var f=0,h=Object.values(cr);f<h.length;f++)Wc(w=h[f],a,d,l);else for(var g in a){var x,w,g=/^idb\:\/\/(.*)\/(.*)\//.exec(g);g&&(x=g[1],g=g[2],w=cr["idb://".concat(x,"/").concat(g)])&&Wc(w,a,d,l)}d.forEach(function(_){return _()})}function Wc(a,l,d,f){for(var h=[],g=0,x=Object.entries(a.queries.query);g<x.length;g++){for(var w=x[g],_=w[0],z=[],A=0,N=w[1];A<N.length;A++){var P=N[A];Ls(l,P.obsSet)?P.subscribers.forEach(function(W){return d.add(W)}):f&&z.push(P)}f&&h.push([_,z])}if(f)for(var R=0,F=h;R<F.length;R++){var T=F[R],_=T[0],z=T[1];a.queries.query[_]=z}}function um(a){var l=a._state,d=a._deps.indexedDB;if(l.isBeingOpened||a.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?rt(l.dbOpenError):a});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,h=Math.round(10*a.verno),g=!1;function x(){if(l.openCanceller!==f)throw new ge.DatabaseClosed("db.open() was cancelled")}function w(){return new de(function(P,R){if(x(),!d)throw new ge.MissingAPI;var F=a.name,T=l.autoSchema||!h?d.open(F):d.open(F,h);if(!T)throw new ge.MissingAPI;T.onerror=dn(R),T.onblocked=He(a._fireOnBlocked),T.onupgradeneeded=He(function(W){var U;A=T.transaction,l.autoSchema&&!a._options.allowEmptyDB?(T.onerror=ki,A.abort(),T.result.close(),(U=d.deleteDatabase(F)).onsuccess=U.onerror=He(function(){R(new ge.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(A.onerror=dn(R),U=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,N=U<1,a.idbdb=T.result,g&&sm(a,A),om(a,U/10,A,R))},R),T.onsuccess=He(function(){A=null;var W,U,O,Q,te,ue,ce=a.idbdb=T.result,ne=v(ce.objectStoreNames);if(0<ne.length)try{var me=ce.transaction((te=ne).length===1?te[0]:te,"readonly");if(l.autoSchema)ue=ce,Q=me,(O=a).verno=ue.version/10,Q=O._dbSchema=Ia(0,ue,Q),O._storeNames=v(ue.objectStoreNames,0),Ma(O,[O._allTables],c(Q),Q);else if(Oa(a,a._dbSchema,me),U=me,((U=Rs(Ia(0,(W=a).idbdb,U),W._dbSchema)).add.length||U.change.some(function(pe){return pe.add.length||pe.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ce.close(),h=ce.version+1,g=!0,P(w());Ra(a,me)}catch{}Fr.push(a),ce.onversionchange=He(function(pe){l.vcFired=!0,a.on("versionchange").fire(pe)}),ce.onclose=He(function(){a.close({disableAutoOpen:!1})}),N&&(ne=a._deps,te=F,Is(ue=ne.indexedDB)||te===Ta||Bs(ue,ne.IDBKeyRange).put({name:te}).catch(Te)),P()},R)}).catch(function(P){switch(P==null?void 0:P.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),w();break;case"VersionError":if(0<h)return h=0,w()}return de.reject(P)})}var _,z=l.dbReadyResolve,A=null,N=!1;return de.race([f,(typeof navigator>"u"?de.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function R(){return indexedDB.databases().finally(P)}_=setInterval(R,100),R()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(w)]).then(function(){return x(),l.onReadyBeingFired=[],de.resolve(Os(function(){return a.on.ready.fire(a.vip)})).then(function P(){var R;if(0<l.onReadyBeingFired.length)return R=l.onReadyBeingFired.reduce(xe,Te),l.onReadyBeingFired=[],de.resolve(Os(function(){return R(a.vip)})).then(P)})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(P){l.dbOpenError=P;try{A&&A.abort()}catch{}return f===l.openCanceller&&a._close(),rt(P)}).finally(function(){l.openComplete=!0,z()}).then(function(){var P;return N&&(P={},a.tables.forEach(function(R){R.schema.indexes.forEach(function(F){F.name&&(P["idb://".concat(a.name,"/").concat(R.name,"/").concat(F.name)]=new vt(-1/0,[[[]]]))}),P["idb://".concat(a.name,"/").concat(R.name,"/")]=P["idb://".concat(a.name,"/").concat(R.name,"/:dels")]=new vt(-1/0,[[[]]])}),Bn(Ci).fire(P),Gs(P,!0)),a})}function Vs(a){function l(g){return a.next(g)}var d=h(l),f=h(function(g){return a.throw(g)});function h(g){return function(w){var w=g(w),_=w.value;return w.done?_:_&&typeof _.then=="function"?_.then(d,f):p(_)?Promise.all(_).then(d,f):d(_)}}return h(l)()}function Wa(a,l,d){for(var f=p(a)?a.slice():[a],h=0;h<d;++h)f.push(l);return f}var cm={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(f){var d=a.table(f),f=d.schema,h={},g=[];function x(P,R,F){var O=Si(P),T=h[O]=h[O]||[],W=P==null?0:typeof P=="string"?1:P.length,U=0<R,O=r(r({},F),{name:U?"".concat(O,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:U,keyTail:R,keyLength:W,extractKey:Ds(P),unique:!U&&F.unique});return T.push(O),O.isPrimaryKey||g.push(O),1<W&&x(W===2?P[0]:P.slice(0,W-1),R+1,F),T.sort(function(Q,te){return Q.keyTail-te.keyTail}),O}var w=x(f.primaryKey.keyPath,0,f.primaryKey);h[":id"]=[w];for(var _=0,z=f.indexes;_<z.length;_++){var A=z[_];x(A.keyPath,0,A)}function N(P){var R,F=P.query.index;return F.isVirtual?r(r({},P),{query:{index:F.lowLevelIndex,range:(R=P.query.range,F=F.keyTail,{type:R.type===1?2:R.type,lower:Wa(R.lower,R.lowerOpen?a.MAX_KEY:a.MIN_KEY,F),lowerOpen:!0,upper:Wa(R.upper,R.upperOpen?a.MIN_KEY:a.MAX_KEY,F),upperOpen:!0})}}):P}return r(r({},d),{schema:r(r({},f),{primaryKey:w,indexes:g,getIndexByKeyPath:function(P){return(P=h[Si(P)])&&P[0]}}),count:function(P){return d.count(N(P))},query:function(P){return d.query(N(P))},openCursor:function(P){var R=P.query.index,F=R.keyTail,T=R.keyLength;return R.isVirtual?d.openCursor(N(P)).then(function(U){return U&&W(U)}):d.openCursor(P);function W(U){return Object.create(U,{continue:{value:function(O){O!=null?U.continue(Wa(O,P.reverse?a.MAX_KEY:a.MIN_KEY,F)):P.unique?U.continue(U.key.slice(0,T).concat(P.reverse?a.MIN_KEY:a.MAX_KEY,F)):U.continue()}},continuePrimaryKey:{value:function(O,Q){U.continuePrimaryKey(Wa(O,a.MAX_KEY,F),Q)}},primaryKey:{get:function(){return U.primaryKey}},key:{get:function(){var O=U.key;return T===1?O[0]:O.slice(0,T)}},value:{get:function(){return U.value}}})}}})}})}};function Us(a,l,d,f){return d=d||{},f=f||"",c(a).forEach(function(h){var g,x,w;S(l,h)?(g=a[h],x=l[h],typeof g=="object"&&typeof x=="object"&&g&&x?(w=se(g))!==se(x)?d[f+h]=l[h]:w==="Object"?Us(g,x,d,f+h+"."):g!==x&&(d[f+h]=l[h]):g!==x&&(d[f+h]=l[h])):d[f+h]=void 0}),c(l).forEach(function(h){S(a,h)||(d[f+h]=l[h])}),d}function Ks(a,l){return l.type==="delete"?l.keys:l.keys||l.values.map(a.extractKey)}var dm={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(l){var d=a.table(l),f=d.schema.primaryKey;return r(r({},d),{mutate:function(h){var g=be.trans,x=g.table(l).hook,w=x.deleting,_=x.creating,z=x.updating;switch(h.type){case"add":if(_.fire===Te)break;return g._promise("readwrite",function(){return A(h)},!0);case"put":if(_.fire===Te&&z.fire===Te)break;return g._promise("readwrite",function(){return A(h)},!0);case"delete":if(w.fire===Te)break;return g._promise("readwrite",function(){return A(h)},!0);case"deleteRange":if(w.fire===Te)break;return g._promise("readwrite",function(){return function N(P,R,F){return d.query({trans:P,values:!1,query:{index:f,range:R},limit:F}).then(function(T){var W=T.result;return A({type:"delete",keys:W,trans:P}).then(function(U){return 0<U.numFailures?Promise.reject(U.failures[0]):W.length<F?{failures:[],numFailures:0,lastResult:void 0}:N(P,r(r({},R),{lower:W[W.length-1],lowerOpen:!0}),F)})})}(h.trans,h.range,1e4)},!0)}return d.mutate(h);function A(N){var P,R,F,T=be.trans,W=N.keys||Ks(f,N);if(W)return(N=N.type==="add"||N.type==="put"?r(r({},N),{keys:W}):r({},N)).type!=="delete"&&(N.values=o([],N.values)),N.keys&&(N.keys=o([],N.keys)),P=d,F=W,((R=N).type==="add"?Promise.resolve([]):P.getMany({trans:R.trans,keys:F,cache:"immutable"})).then(function(U){var O=W.map(function(Q,te){var ue,ce,ne,me=U[te],pe={onerror:null,onsuccess:null};return N.type==="delete"?w.fire.call(pe,Q,me,T):N.type==="add"||me===void 0?(ue=_.fire.call(pe,Q,N.values[te],T),Q==null&&ue!=null&&(N.keys[te]=Q=ue,f.outbound||B(N.values[te],f.keyPath,Q))):(ue=Us(me,N.values[te]),(ce=z.fire.call(pe,ue,Q,me,T))&&(ne=N.values[te],Object.keys(ce).forEach(function(oe){S(ne,oe)?ne[oe]=ce[oe]:B(ne,oe,ce[oe])}))),pe});return d.mutate(N).then(function(Q){for(var te=Q.failures,ue=Q.results,ce=Q.numFailures,Q=Q.lastResult,ne=0;ne<W.length;++ne){var me=(ue||W)[ne],pe=O[ne];me==null?pe.onerror&&pe.onerror(te[ne]):pe.onsuccess&&pe.onsuccess(N.type==="put"&&U[ne]?N.values[ne]:me)}return{failures:te,results:ue,numFailures:ce,lastResult:Q}}).catch(function(Q){return O.forEach(function(te){return te.onerror&&te.onerror(Q)}),Promise.reject(Q)})});throw new Error("Keys missing")}}})}})}};function Gc(a,l,d){try{if(!l||l.keys.length<a.length)return null;for(var f=[],h=0,g=0;h<l.keys.length&&g<a.length;++h)Fe(l.keys[h],a[g])===0&&(f.push(d?ee(l.values[h]):l.values[h]),++g);return f.length===a.length?f:null}catch{return null}}var fm={stack:"dbcore",level:-1,create:function(a){return{table:function(l){var d=a.table(l);return r(r({},d),{getMany:function(f){var h;return f.cache?(h=Gc(f.keys,f.trans._cache,f.cache==="clone"))?de.resolve(h):d.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ee(g):g},g}):d.getMany(f)},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),d.mutate(f)}})}}}};function Vc(a,l){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Uc(a,l){switch(a){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var pm={stack:"dbcore",level:0,name:"Observability",create:function(a){var l=a.schema.name,d=new vt(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(f,h,g){if(be.subscr&&h!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return a.transaction(f,h,g)},table:function(f){function h(W){var T,W=W.query;return[T=W.index,new vt((T=(W=W.range).lower)!=null?T:a.MIN_KEY,(T=W.upper)!=null?T:a.MAX_KEY)]}var g=a.table(f),x=g.schema,w=x.primaryKey,_=x.indexes,z=w.extractKey,A=w.outbound,N=w.autoIncrement&&_.filter(function(F){return F.compound&&F.keyPath.includes(w.keyPath)}),P=r(r({},g),{mutate:function(F){function T(ye){return ye="idb://".concat(l,"/").concat(f,"/").concat(ye),te[ye]||(te[ye]=new vt)}var W,U,O,Q=F.trans,te=F.mutatedParts||(F.mutatedParts={}),ue=T(""),ce=T(":dels"),ne=F.type,pe=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[Ks(w,F).filter(function(ye){return ye}),F.values]:[],me=pe[0],pe=pe[1],oe=F.trans._cache;return p(me)?(ue.addKeys(me),(ne=ne==="delete"||me.length===pe.length?Gc(me,oe):null)||ce.addKeys(me),(ne||pe)&&(W=T,U=ne,O=pe,x.indexes.forEach(function(ye){var Pe=W(ye.name||"");function Oe(Ne){return Ne!=null?ye.extractKey(Ne):null}function ke(Ne){ye.multiEntry&&p(Ne)?Ne.forEach(function(Qe){return Pe.addKey(Qe)}):Pe.addKey(Ne)}(U||O).forEach(function(Ne,et){var Vt=U&&Oe(U[et]),et=O&&Oe(O[et]);Fe(Vt,et)!==0&&(Vt!=null&&ke(Vt),et!=null)&&ke(et)})}))):me?(pe={from:(oe=me.lower)!=null?oe:a.MIN_KEY,to:(ne=me.upper)!=null?ne:a.MAX_KEY},ce.add(pe),ue.add(pe)):(ue.add(d),ce.add(d),x.indexes.forEach(function(ye){return T(ye.name).add(d)})),g.mutate(F).then(function(ye){return!me||F.type!=="add"&&F.type!=="put"||(ue.addKeys(ye.results),N&&N.forEach(function(Pe){for(var Oe=F.values.map(function(Vt){return Pe.extractKey(Vt)}),ke=Pe.keyPath.findIndex(function(Vt){return Vt===w.keyPath}),Ne=0,Qe=ye.results.length;Ne<Qe;++Ne)Oe[Ne][ke]=ye.results[Ne];T(Pe.name).addKeys(Oe)})),Q.mutatedParts=La(Q.mutatedParts||{},te),ye})}}),R={get:function(F){return[w,new vt(F.key)]},getMany:function(F){return[w,new vt().addKeys(F.keys)]},count:h,query:h,openCursor:h};return c(R).forEach(function(F){P[F]=function(T){var W=be.subscr,U=!!W,O=Vc(be,g)&&Uc(F,T)?T.obsSet={}:W;if(U){var Q,W=function(pe){return pe="idb://".concat(l,"/").concat(f,"/").concat(pe),O[pe]||(O[pe]=new vt)},te=W(""),ue=W(":dels"),U=R[F](T),ce=U[0],U=U[1];if((F==="query"&&ce.isPrimaryKey&&!T.values?ue:W(ce.name||"")).add(U),!ce.isPrimaryKey){if(F!=="count")return Q=F==="query"&&A&&T.values&&g.query(r(r({},T),{values:!1})),g[F].apply(this,arguments).then(function(pe){if(F==="query"){if(A&&T.values)return Q.then(function(Oe){return Oe=Oe.result,te.addKeys(Oe),pe});var oe=T.values?pe.result.map(z):pe.result;(T.values?te:ue).addKeys(oe)}else{var ye,Pe;if(F==="openCursor")return Pe=T.values,(ye=pe)&&Object.create(ye,{key:{get:function(){return ue.addKey(ye.primaryKey),ye.key}},primaryKey:{get:function(){var Oe=ye.primaryKey;return ue.addKey(Oe),Oe}},value:{get:function(){return Pe&&te.addKey(ye.primaryKey),ye.value}}})}return pe});ue.add(d)}}return g[F].apply(this,arguments)}}),P}})}};function Kc(a,l,d){var f;return d.numFailures===0?l:l.type==="deleteRange"||(f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1,d.numFailures===f)?null:(f=r({},l),p(f.keys)&&(f.keys=f.keys.filter(function(h,g){return!(g in d.failures)})),"values"in f&&p(f.values)&&(f.values=f.values.filter(function(h,g){return!(g in d.failures)})),f)}function qs(a,l){return d=a,((f=l).lower===void 0||(f.lowerOpen?0<Fe(d,f.lower):0<=Fe(d,f.lower)))&&(d=a,(f=l).upper===void 0||(f.upperOpen?Fe(d,f.upper)<0:Fe(d,f.upper)<=0));var d,f}function qc(a,l,d,f,h,g){var x,w,_,z,A,N;return!d||d.length===0||(x=l.query.index,w=x.multiEntry,_=l.query.range,z=f.schema.primaryKey.extractKey,A=x.extractKey,N=(x.lowLevelIndex||x).extractKey,(f=d.reduce(function(P,R){var F=P,T=[];if(R.type==="add"||R.type==="put")for(var W=new vt,U=R.values.length-1;0<=U;--U){var O,Q=R.values[U],te=z(Q);!W.hasKey(te)&&(O=A(Q),w&&p(O)?O.some(function(pe){return qs(pe,_)}):qs(O,_))&&(W.addKey(te),T.push(Q))}switch(R.type){case"add":var ue=new vt().addKeys(l.values?P.map(function(oe){return z(oe)}):P),F=P.concat(l.values?T.filter(function(oe){return oe=z(oe),!ue.hasKey(oe)&&(ue.addKey(oe),!0)}):T.map(function(oe){return z(oe)}).filter(function(oe){return!ue.hasKey(oe)&&(ue.addKey(oe),!0)}));break;case"put":var ce=new vt().addKeys(R.values.map(function(oe){return z(oe)}));F=P.filter(function(oe){return!ce.hasKey(l.values?z(oe):oe)}).concat(l.values?T:T.map(function(oe){return z(oe)}));break;case"delete":var ne=new vt().addKeys(R.keys);F=P.filter(function(oe){return!ne.hasKey(l.values?z(oe):oe)});break;case"deleteRange":var me=R.range;F=P.filter(function(oe){return!qs(z(oe),me)})}return F},a))===a)?a:(f.sort(function(P,R){return Fe(N(P),N(R))||Fe(z(P),z(R))}),l.limit&&l.limit<1/0&&(f.length>l.limit?f.length=l.limit:a.length===l.limit&&f.length<l.limit&&(h.dirty=!0)),g?Object.freeze(f):f)}function Hc(a,l){return Fe(a.lower,l.lower)===0&&Fe(a.upper,l.upper)===0&&!!a.lowerOpen==!!l.lowerOpen&&!!a.upperOpen==!!l.upperOpen}function hm(a,l){return((d,f,h,g)=>{if(d===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((d=Fe(d,f))===0){if(h&&g)return 0;if(h)return 1;if(g)return-1}return d})(a.lower,l.lower,a.lowerOpen,l.lowerOpen)<=0&&0<=((d,f,h,g)=>{if(d===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((d=Fe(d,f))===0){if(h&&g)return 0;if(h)return-1;if(g)return 1}return d})(a.upper,l.upper,a.upperOpen,l.upperOpen)}function mm(a,l,d,f){a.subscribers.add(d),f.addEventListener("abort",function(){var h,g;a.subscribers.delete(d),a.subscribers.size===0&&(h=a,g=l,setTimeout(function(){h.subscribers.size===0&&H(g,h)},3e3))})}var gm={stack:"dbcore",level:0,name:"Cache",create:function(a){var l=a.schema.name;return r(r({},a),{transaction:function(d,f,h){var g,x,w=a.transaction(d,f,h);return f==="readwrite"&&(h=(g=new AbortController).signal,w.addEventListener("abort",(x=function(_){return function(){if(g.abort(),f==="readwrite"){for(var z=new Set,A=0,N=d;A<N.length;A++){var P=N[A],R=cr["idb://".concat(l,"/").concat(P)];if(R){var F=a.table(P),T=R.optimisticOps.filter(function(ye){return ye.trans===w});if(w._explicit&&_&&w.mutatedParts)for(var W=0,U=Object.values(R.queries.query);W<U.length;W++)for(var O=0,Q=(ce=U[W]).slice();O<Q.length;O++)Ls((ne=Q[O]).obsSet,w.mutatedParts)&&(H(ce,ne),ne.subscribers.forEach(function(ye){return z.add(ye)}));else if(0<T.length){R.optimisticOps=R.optimisticOps.filter(function(ye){return ye.trans!==w});for(var te=0,ue=Object.values(R.queries.query);te<ue.length;te++)for(var ce,ne,me,pe=0,oe=(ce=ue[te]).slice();pe<oe.length;pe++)(ne=oe[pe]).res!=null&&w.mutatedParts&&(_&&!ne.dirty?(me=Object.isFrozen(ne.res),me=qc(ne.res,ne.req,T,F,ne,me),ne.dirty?(H(ce,ne),ne.subscribers.forEach(function(ye){return z.add(ye)})):me!==ne.res&&(ne.res=me,ne.promise=de.resolve({result:me}))):(ne.dirty&&H(ce,ne),ne.subscribers.forEach(function(ye){return z.add(ye)})))}}}z.forEach(function(ye){return ye()})}}})(!1),{signal:h}),w.addEventListener("error",x(!1),{signal:h}),w.addEventListener("complete",x(!0),{signal:h})),w},table:function(d){var f=a.table(d),h=f.schema.primaryKey;return r(r({},f),{mutate:function(g){var x,w=be.trans;return!h.outbound&&w.db._options.cache!=="disabled"&&!w.explicit&&w.idbtrans.mode==="readwrite"&&(x=cr["idb://".concat(l,"/").concat(d)])?(w=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Ks(h,g).some(function(_){return _==null}))?(x.optimisticOps.push(g),g.mutatedParts&&$a(g.mutatedParts),w.then(function(_){0<_.numFailures&&(H(x.optimisticOps,g),(_=Kc(0,g,_))&&x.optimisticOps.push(_),g.mutatedParts)&&$a(g.mutatedParts)}),w.catch(function(){H(x.optimisticOps,g),g.mutatedParts&&$a(g.mutatedParts)})):w.then(function(_){var z=Kc(0,r(r({},g),{values:g.values.map(function(A,N){var P;return _.failures[N]?A:(B(P=(P=h.keyPath)!=null&&P.includes(".")?ee(A):r({},A),h.keyPath,_.results[N]),P)})}),_);x.optimisticOps.push(z),queueMicrotask(function(){return g.mutatedParts&&$a(g.mutatedParts)})}),w):f.mutate(g)},query:function(g){var x,w,_,z,A,N,P;return Vc(be,f)&&Uc("query",g)?(x=((_=be.trans)==null?void 0:_.db._options.cache)==="immutable",w=(_=be).requery,_=_.signal,N=((R,F,T,W)=>{var U=cr["idb://".concat(R,"/").concat(F)];if(!U)return[];if(!(R=U.queries[T]))return[null,!1,U,null];var O=R[(W.query?W.query.index.name:null)||""];if(!O)return[null,!1,U,null];switch(T){case"query":var Q=O.find(function(te){return te.req.limit===W.limit&&te.req.values===W.values&&Hc(te.req.query.range,W.query.range)});return Q?[Q,!0,U,O]:[O.find(function(te){return("limit"in te.req?te.req.limit:1/0)>=W.limit&&(!W.values||te.req.values)&&hm(te.req.query.range,W.query.range)}),!1,U,O];case"count":return Q=O.find(function(te){return Hc(te.req.query.range,W.query.range)}),[Q,!!Q,U,O]}})(l,d,"query",g),P=N[0],z=N[2],A=N[3],P&&N[1]?P.obsSet=g.obsSet:(N=f.query(g).then(function(R){var F=R.result;if(P&&(P.res=F),x){for(var T=0,W=F.length;T<W;++T)Object.freeze(F[T]);Object.freeze(F)}else R.result=ee(F);return R}).catch(function(R){return A&&P&&H(A,P),Promise.reject(R)}),P={obsSet:g.obsSet,promise:N,subscribers:new Set,type:"query",req:g,dirty:!1},A?A.push(P):(A=[P],(z=z||(cr["idb://".concat(l,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=A)),mm(P,A,w,_),P.promise.then(function(R){return{result:qc(R.result,g,z==null?void 0:z.optimisticOps,f,P,x)}})):f.query(g)}})}})}};function Ga(a,l){return new Proxy(a,{get:function(d,f,h){return f==="db"?l:Reflect.get(d,f,h)}})}it.prototype.version=function(a){if(isNaN(a)||a<.1)throw new ge.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var l=this._versions,d=l.filter(function(f){return f._cfg.version===a})[0];return d||(d=new this.Version(a),l.push(d),l.sort(am),d.stores({}),this._state.autoSchema=!1),d},it.prototype._whenReady=function(a){var l=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?a():new de(function(d,f){if(l._state.openComplete)return f(new ge.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new ge.DatabaseClosed);l.open().catch(Te)}l._state.dbReadyPromise.then(d,f)}).then(a)},it.prototype.use=function(h){var l=h.stack,d=h.create,f=h.level,h=h.name,g=(h&&this.unuse({stack:l,name:h}),this._middlewares[l]||(this._middlewares[l]=[]));return g.push({stack:l,create:d,level:f??10,name:h}),g.sort(function(x,w){return x.level-w.level}),this},it.prototype.unuse=function(a){var l=a.stack,d=a.name,f=a.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(h){return f?h.create!==f:!!d&&h.name!==d})),this},it.prototype.open=function(){var a=this;return sr(Fn,function(){return um(a)})},it.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var a=this._state,l=Fr.indexOf(this);if(0<=l&&Fr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new de(function(d){a.dbReadyResolve=d}),a.openCanceller=new de(function(d,f){a.cancelOpen=f}))},it.prototype.close=function(l){var l=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,d=this._state;l?(d.isBeingOpened&&d.cancelOpen(new ge.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new ge.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},it.prototype.delete=function(a){var l=this,d=(a===void 0&&(a={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),f=this._state;return new de(function(h,g){function x(){l.close(a);var w=l._deps.indexedDB.deleteDatabase(l.name);w.onsuccess=He(function(){var _,z,A;_=l._deps,z=l.name,Is(A=_.indexedDB)||z===Ta||Bs(A,_.IDBKeyRange).delete(z).catch(Te),h()}),w.onerror=dn(g),w.onblocked=l._fireOnBlocked}if(d)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(x):x()})},it.prototype.backendDB=function(){return this.idbdb},it.prototype.isOpen=function(){return this.idbdb!==null},it.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},it.prototype.hasFailed=function(){return this._state.dbOpenError!==null},it.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(it.prototype,"tables",{get:function(){var a=this;return c(this._allTables).map(function(l){return a._allTables[l]})},enumerable:!1,configurable:!0}),it.prototype.transaction=function(){var a=(function(l,d,f){var h=arguments.length;if(h<2)throw new ge.InvalidArgument("Too few arguments");for(var g=new Array(h-1);--h;)g[h-1]=arguments[h];return f=g.pop(),[l,G(g),f]}).apply(this,arguments);return this._transaction.apply(this,a)},it.prototype._transaction=function(a,l,d){var f,h,g=this,x=be.trans,w=(x&&x.db===this&&a.indexOf("!")===-1||(x=null),a.indexOf("?")!==-1);a=a.replace("!","").replace("?","");try{if(h=l.map(function(z){if(z=z instanceof g.Table?z.name:z,typeof z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return z}),a=="r"||a===Ss)f=Ss;else{if(a!="rw"&&a!=Es)throw new ge.InvalidArgument("Invalid transaction mode: "+a);f=Es}if(x){if(x.mode===Ss&&f===Es){if(!w)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&h.forEach(function(z){if(x&&x.storeNames.indexOf(z)===-1){if(!w)throw new ge.SubTransaction("Table "+z+" not included in parent transaction.");x=null}}),w&&x&&!x.active&&(x=null)}}catch(z){return x?x._promise(null,function(A,N){N(z)}):rt(z)}var _=(function z(A,N,P,R,F){return de.resolve().then(function(){var O=be.transless||be,T=A._createTransaction(N,P,A._dbSchema,R),O=(T.explicit=!0,{trans:T,transless:O});if(R)T.idbtrans=R.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(Q){return Q.name===Gt.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return z(A,N,P,null,F)})):rt(Q)}var W,U=we(F),O=(U&&Ar(),de.follow(function(){var Q;(W=F.call(T,T))&&(U?(Q=Pn.bind(null,null),W.then(Q,Q)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=Vs(W)))},O));return(W&&typeof W.then=="function"?de.resolve(W).then(function(Q){return T.active?Q:rt(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):O.then(function(){return W})).then(function(Q){return R&&T._resolve(),T._completion.then(function(){return Q})}).catch(function(Q){return T._reject(Q),rt(Q)})})}).bind(null,this,f,h,x,d);return x?x._promise(f,_,"lock"):be.trans?sr(be.transless,function(){return g._whenReady(_)}):this._whenReady(_)},it.prototype.table=function(a){if(S(this._allTables,a))return this._allTables[a];throw new ge.InvalidTable("Table ".concat(a," does not exist"))};var wn=it;function it(a,l){var d,f,h,g,x,w=this,_=(this._middlewares={},this.verno=0,it.dependencies),_=(this._options=l=r({addons:it.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},l.addons),z=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Te,dbReadyPromise:null,cancelOpen:Te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen}),A=(z.dbReadyPromise=new de(function(N){z.dbReadyResolve=N}),z.openCanceller=new de(function(N,P){z.cancelOpen=P}),this._state=z,this.name=a,this.on=wi(this,"populate","blocked","versionchange","close",{ready:[xe,Te]}),this.once=function(N,P){var R=function(){for(var F=[],T=0;T<arguments.length;T++)F[T]=arguments[T];w.on(N).unsubscribe(R),P.apply(w,F)};return w.on(N,R)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(N){return function(P,R){it.vip(function(){var F,T=w._state;T.openComplete?(T.dbOpenError||de.resolve().then(P),R&&N(P)):T.onReadyBeingFired?(T.onReadyBeingFired.push(P),R&&N(P)):(N(P),F=w,R||N(function W(){F.on.ready.unsubscribe(P),F.on.ready.unsubscribe(W)}))})}}),this.Collection=(d=this,bi(Zh.prototype,function(W,T){this.db=d;var R=Cc,F=null;if(T)try{R=T()}catch(O){F=O}var T=W._ctx,W=T.table,U=W.hook.reading.fire;this._ctx={table:W,index:T.index,isPrimKey:!T.index||W.schema.primKey.keyPath&&T.index===W.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:T.or,valueMapper:U!==re?U:null}})),this.Table=(f=this,bi(_c.prototype,function(N,P,R){this.db=f,this._tx=R,this.name=N,this.schema=P,this.hook=f._allTables[N]?f._allTables[N].hook:wi(null,{creating:[De,Te],reading:[je,re],updating:[Tt,Te],deleting:[$e,Te]})})),this.Transaction=(h=this,bi(tm.prototype,function(N,P,R,F,T){var W=this;N!=="readonly"&&P.forEach(function(U){U=(U=R[U])==null?void 0:U.yProps,U&&(P=P.concat(U.map(function(O){return O.updatesTable})))}),this.db=h,this.mode=N,this.storeNames=P,this.schema=R,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=wi(this,"complete","error","abort"),this.parent=T||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new de(function(U,O){W._resolve=U,W._reject=O}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(U){var O=W.active;return W.active=!1,W.on.error.fire(U),W.parent?W.parent._reject(U):O&&W.idbtrans&&W.idbtrans.abort(),rt(U)})})),this.Version=(g=this,bi(lm.prototype,function(N){this.db=g,this._cfg={version:N,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(x=this,bi(Rc.prototype,function(N,P,R){if(this.db=x,this._ctx={table:N,index:P===":id"?null:P,or:R},this._cmp=this._ascending=Fe,this._descending=function(F,T){return Fe(T,F)},this._max=function(F,T){return 0<Fe(F,T)?F:T},this._min=function(F,T){return Fe(F,T)<0?F:T},this._IDBKeyRange=x._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(N){0<N.newVersion?console.warn("Another connection wants to upgrade database '".concat(w.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(w.name,"'. Closing db now to resume the delete request.")),w.close({disableAutoOpen:!1})}),this.on("blocked",function(N){!N.newVersion||N.newVersion<N.oldVersion?console.warn("Dexie.delete('".concat(w.name,"') was blocked")):console.warn("Upgrade '".concat(w.name,"' blocked by other connection holding version ").concat(N.oldVersion/10))}),this._maxKey=ji(l.IDBKeyRange),this._createTransaction=function(N,P,R,F){return new w.Transaction(N,P,R,w._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(N){w.on("blocked").fire(N),Fr.filter(function(P){return P.name===w.name&&P!==w&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(N)})},this.use(fm),this.use(gm),this.use(pm),this.use(cm),this.use(dm),new Proxy(this,{get:function(N,P,R){var F;return P==="_vip"||(P==="table"?function(T){return Ga(w.table(T),A)}:(F=Reflect.get(N,P,R))instanceof _c?Ga(F,A):P==="tables"?F.map(function(T){return Ga(T,A)}):P==="_createTransaction"?function(){return Ga(F.apply(this,arguments),A)}:F)}}));this.vip=A,_.forEach(function(N){return N(w)})}var Va,Mr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ym=(Hs.prototype.subscribe=function(a,l,d){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:l,complete:d})},Hs.prototype[Mr]=function(){return this},Hs);function Hs(a){this._subscribe=a}try{Va={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Va={indexedDB:null,IDBKeyRange:null}}function Yc(a){var l,d=!1,f=new ym(function(h){var g=we(a),x,w=!1,_={},z={},A={get closed(){return w},unsubscribe:function(){w||(w=!0,x&&x.abort(),N&&Bn.storagemutated.unsubscribe(R))}},N=(h.start&&h.start(A),!1),P=function(){return js(F)},R=function(T){La(_,T),Ls(z,_)&&P()},F=function(){var T,W,U;!w&&Va.indexedDB&&(_={},T={},x&&x.abort(),x=new AbortController,U=(O=>{var Q=Tr();try{g&&Ar();var te=Dn(a,O);return te=g?te.finally(Pn):te}finally{Q&&_r()}})(W={subscr:T,signal:x.signal,requery:P,querier:a,trans:null}),Promise.resolve(U).then(function(O){d=!0,l=O,w||W.signal.aborted||(_={},(Q=>{for(var te in Q)if(S(Q,te))return;return 1})(z=T)||N||(Bn(Ci,R),N=!0),js(function(){return!w&&h.next&&h.next(O)}))},function(O){d=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||w||js(function(){w||h.error&&h.error(O)})}))};return setTimeout(P,0),A});return f.hasValue=function(){return d},f.getValue=function(){return l},f}var dr=wn;function Ys(a){var l=In;try{In=!0,Bn.storagemutated.fire(a),Gs(a,!0)}finally{In=l}}E(dr,r(r({},Ce),{delete:function(a){return new dr(a,{addons:[]}).delete()},exists:function(a){return new dr(a,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return l=dr.dependencies,d=l.indexedDB,l=l.IDBKeyRange,(Is(d)?Promise.resolve(d.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==Ta})}):Bs(d,l).toCollection().primaryKeys()).then(a)}catch{return rt(new ge.MissingAPI)}var l,d},defineClass:function(){return function(a){m(this,a)}},ignoreTransaction:function(a){return be.trans?sr(be.transless,a):a()},vip:Os,async:function(a){return function(){try{var l=Vs(a.apply(this,arguments));return l&&typeof l.then=="function"?l:de.resolve(l)}catch(d){return rt(d)}}},spawn:function(a,l,d){try{var f=Vs(a.apply(d,l||[]));return f&&typeof f.then=="function"?f:de.resolve(f)}catch(h){return rt(h)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(a,l){return a=de.resolve(typeof a=="function"?dr.ignoreTransaction(a):a).timeout(l||6e4),be.trans?be.trans.waitFor(a):a},Promise:de,debug:{get:function(){return Ee},set:function(a){Zt(a)}},derive:M,extend:m,props:E,override:b,Events:wi,on:Bn,liveQuery:Yc,extendObservabilitySet:La,getByKeyPath:L,setByKeyPath:B,delByKeyPath:function(a,l){typeof l=="string"?B(a,l,void 0):"length"in l&&[].map.call(l,function(d){B(a,d,void 0)})},shallowClone:V,deepClone:ee,getObjectDiff:Us,cmp:Fe,asap:K,minKey:-1/0,addons:[],connections:Fr,errnames:Gt,dependencies:Va,cache:cr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(a){return parseInt(a)}).reduce(function(a,l,d){return a+l/Math.pow(10,2*d)})})),dr.maxKey=ji(dr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Bn(Ci,function(a){In||(a=new CustomEvent(_s,{detail:a}),In=!0,dispatchEvent(a),In=!1)}),addEventListener(_s,function(a){a=a.detail,In||Ys(a)}));var Br,In=!1,Qc=function(){};return typeof BroadcastChannel<"u"&&((Qc=function(){(Br=new BroadcastChannel(_s)).onmessage=function(a){return a.data&&Ys(a.data)}})(),typeof Br.unref=="function"&&Br.unref(),Bn(Ci,function(a){In||Br.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!wn.disableBfCache&&a.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),Br!=null&&Br.close();for(var l=0,d=Fr;l<d.length;l++)d[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!wn.disableBfCache&&a.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Qc(),Ys({all:new vt(-1/0,[[]])}))})),de.rejectionMapper=function(a,l){return!a||a instanceof Ae||a instanceof TypeError||a instanceof SyntaxError||!a.name||!nt[a.name]?a:(l=new nt[a.name](l||a.message,a),"stack"in a&&Y(l,"stack",{get:function(){return this.inner.stack}}),l)},Zt(Ee),r(wn,Object.freeze({__proto__:null,Dexie:wn,Entity:jc,PropModification:xi,RangeSet:vt,add:function(a){return new xi({add:a})},cmp:Fe,default:wn,liveQuery:Yc,mergeRanges:Ni,rangesOverlap:zc,remove:function(a){return new xi({remove:a})},replacePrefix:function(a,l){return new xi({replacePrefix:[a,l]})}}),{default:wn}),wn})})(Uh);var Ey=Uh.exports;const xu=wm(Ey),hf=Symbol.for("Dexie"),Jo=globalThis[hf]||(globalThis[hf]=xu);if(xu.semVer!==Jo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${xu.semVer} and ${Jo.semVer}`);const{liveQuery:ev,mergeRanges:tv,rangesOverlap:nv,RangeSet:rv,cmp:iv,Entity:av,PropModification:ov,replacePrefix:sv,add:lv,remove:uv,DexieYProvider:cv}=Jo,wu="sparkle-brush-current-profile";class Ny extends Jo{constructor(){super("SparkleBrushDB");Ct(this,"sessions");Ct(this,"userProgress");Ct(this,"photos");Ct(this,"profiles");this.version(2).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"})}}const Yt=new Ny,Cl=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];let To=null;function gi(){if(To)return To;const e=localStorage.getItem(wu);return To=e,e}function mc(e){To=e,e?localStorage.setItem(wu,e):localStorage.removeItem(wu)}async function gc(){return Yt.profiles.orderBy("createdAt").toArray()}async function Ty(e){return Yt.profiles.get(e)}async function Kh(e){const t=await gc(),n=new Set(t.map(c=>c.avatarColor)),r=Cl.find(c=>!n.has(c))||Cl[Math.floor(Math.random()*Cl.length)],o={id:`profile-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),avatarColor:r,createdAt:new Date};await Yt.profiles.add(o);const s={id:`progress-${o.id}`,profileId:o.id,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedHats:[]};return await Yt.userProgress.add(s),o}async function _y(e){await Yt.profiles.delete(e),await Yt.userProgress.where("profileId").equals(e).delete(),await Yt.sessions.where("profileId").equals(e).delete(),gi()===e&&mc(null)}async function xa(e){const t=e||gi();if(!t)throw new Error("No profile selected");let n=await Yt.userProgress.where("profileId").equals(t).first();return n||(n={id:`progress-${t}`,profileId:t,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedHats:[]},await Yt.userProgress.add(n)),n}async function yc(e,t){const n=t||gi();if(!n)throw new Error("No profile selected");const r=await xa(n);await Yt.userProgress.update(r.id,e)}async function Ay(e){const t=gi();if(!t)throw new Error("No profile selected");const n={...e,profileId:t};await Yt.sessions.add(n);const r=await xa(t),o=new Date;o.setHours(0,0,0,0);let s=r.currentStreak;if(r.lastSessionDate){const c=new Date(r.lastSessionDate);c.setHours(0,0,0,0);const p=Math.floor((o.getTime()-c.getTime())/(1e3*60*60*24));p===1?s+=1:p>1&&(s=1)}else s=1;await yc({totalSessions:r.totalSessions+1,currentStreak:s,longestStreak:Math.max(r.longestStreak,s),lastSessionDate:new Date},t)}async function Fy(e){const t=gi();if(!t)throw new Error("No profile selected");const n=await xa(t);n.capturedCreatures.some(o=>o.id===e.id)||await yc({capturedCreatures:[...n.capturedCreatures,e]},t)}async function Dy(){if((await gc()).length>0)return;const t=await Yt.userProgress.get("default-user");if(t&&(t.totalSessions>0||t.capturedCreatures.length>0)){const n=await Kh("Player 1");await yc({totalSessions:t.totalSessions,currentStreak:t.currentStreak,longestStreak:t.longestStreak,lastSessionDate:t.lastSessionDate,capturedCreatures:t.capturedCreatures,unlockedHats:t.unlockedHats,selectedHatId:t.selectedHatId},n.id),mc(n.id)}}const Py={red:{gradient:"from-red-500 to-red-700",border:"border-white",stripe:"bg-white",center:"bg-red-500",centerBorder:"border-white"},blue:{gradient:"from-blue-500 to-blue-700",border:"border-red-500",stripe:"bg-red-500",center:"bg-blue-500",centerBorder:"border-red-400"},bee:{gradient:"from-yellow-400 to-yellow-500",border:"border-black",stripe:"bg-black",center:"bg-yellow-400",centerBorder:"border-black"},white:{gradient:"from-white to-gray-200",border:"border-red-500",stripe:"bg-red-500",center:"bg-white",centerBorder:"border-red-400"},master:{gradient:"from-purple-500 via-purple-600 to-purple-800",border:"border-yellow-400",stripe:"bg-yellow-400",center:"bg-purple-400",centerBorder:"border-yellow-300",glow:"shadow-[0_0_20px_rgba(168,85,247,0.7)]"}};function jl({type:e,size:t,showSparkle:n=!1,className:r=""}){const o=Py[e],s={small:"w-12 h-12",medium:"w-16 h-16",large:"w-20 h-20"},c={small:"w-2 h-2",medium:"w-3 h-3",large:"w-4 h-4"},p={small:"h-0.5",medium:"h-1",large:"h-1"},m=e==="bee";return u.jsxs("div",{className:`relative ${r}`,children:[u.jsxs("div",{className:`
        ${s[t]} rounded-full bg-gradient-to-br ${o.gradient}
        border-4 ${o.border} shadow-xl
        flex items-center justify-center
        ${o.glow||""}
      `,children:[m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`w-full ${p[t]} bg-black absolute`,style:{top:"30%"}}),u.jsx("div",{className:`w-full ${p[t]} bg-black absolute`,style:{top:"50%"}}),u.jsx("div",{className:`w-full ${p[t]} bg-black absolute`,style:{top:"70%"}})]}):u.jsx("div",{className:`w-full ${p[t]} ${o.stripe} absolute`}),u.jsx("div",{className:`${c[t]} rounded-full ${o.center} border-2 ${o.centerBorder} absolute`})]}),n&&u.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-sparkle",children:""}),e==="master"&&u.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-yellow-400/20"})]})}function Ry({cleaningPercentage:e,userProgress:t,region:n,preSelectedCreature:r,onComplete:o}){const[s,c]=C.useState("intro"),[p,m]=C.useState(r||null),[y,j]=C.useState(0),[S,E]=C.useState("red"),[$,Y]=C.useState(!1),[M,J]=C.useState({x:50,y:85,scale:1,rotation:0}),[k,v]=C.useState({count:0,maxWobbles:3,currentWobble:0,direction:1}),[b,I]=C.useState(!1),[K,L]=C.useState(!1),[B,V]=C.useState(0),q=C.useRef(null),G=C.useRef(y),D=C.useRef(p);G.current=y,D.current=p,C.useEffect(()=>{if(!r){const he=t.capturedCreatures.map(X=>X.id),H=zh(e,he,n);m(H)}return()=>{q.current&&cancelAnimationFrame(q.current)}},[e,t.capturedCreatures,n,r]),C.useEffect(()=>{if(p){const he=cy(e,p.rarity);j(he),E(dy(e));const H=p.rarity==="mythic"?6+Math.floor(Math.random()*2):p.rarity==="legendary"?4+Math.floor(Math.random()*2):p.rarity==="rare"?3+Math.floor(Math.random()*2):2+Math.floor(Math.random()*2);v(ae=>({...ae,maxWobbles:H}));const X=setTimeout(()=>c("ready"),2e3);return()=>clearTimeout(X)}},[p,e]);const Z=C.useCallback(()=>{let he=0;const H=40,X=()=>{he++;const ae=he/H,we=1-Math.pow(1-ae,3),Ce=Math.sin(ae*Math.PI)*30;J({x:50,y:85-we*55-Ce,scale:1-ae*.3,rotation:ae*720}),he<H?q.current=requestAnimationFrame(X):(c("impact"),L(!0),((p==null?void 0:p.rarity)==="legendary"||(p==null?void 0:p.rarity)==="mythic")&&I(!0),mr("capture"),setTimeout(()=>{L(!1),I(!1),ee()},300))};q.current=requestAnimationFrame(X)},[p]),ee=C.useCallback(()=>{c("wobble");let he=0;const H=k.maxWobbles,X=()=>{he++,v(We=>({...We,currentWobble:he})),mr("wobble");let ae=0;const we=30,Ce=()=>{ae++;const We=ae/we,Ae=Math.sin(We*Math.PI*4)*(1-We)*15;if(J(Be=>({...Be,x:50+Ae,rotation:Ae*2})),ae<we)q.current=requestAnimationFrame(Ce);else{J(Le=>({...Le,x:50,rotation:0}));const Be=400+Math.random()*400;he<H?setTimeout(X,Be):setTimeout(()=>{c("suspense"),fe()},Be)}};q.current=requestAnimationFrame(Ce)};setTimeout(X,500)},[k.maxWobbles]),fe=C.useCallback(()=>{let he=0;const H=()=>{he+=.02,V(Math.min(he,.5)),he<.5&&(q.current=requestAnimationFrame(H))};q.current=requestAnimationFrame(H);const X=D.current,ae=G.current,we=(X==null?void 0:X.rarity)==="mythic"?3500:(X==null?void 0:X.rarity)==="legendary"?2500:(X==null?void 0:X.rarity)==="rare"?1800:1200;console.log("[CaptureGame] Starting suspense with capture rate:",ae),setTimeout(()=>{const Ce=Math.random(),We=Ce<ae;if(console.log("[CaptureGame] Capture roll:",Ce,"rate:",ae,"success:",We),Y(We),V(0),c("result"),We){if(mr("click"),setTimeout(()=>mr("success"),250),X){const Ae={...X,capturedAt:new Date};Fy(Ae)}}else mr("fail")},we)},[]),se=C.useCallback(()=>{s!=="ready"||!p||(c("throwing"),Z())},[s,p,Z]),le=C.useCallback(()=>{o($?p:null)},[$,p,o]);return p?u.jsxs("div",{className:`relative flex flex-col h-full overflow-hidden ${b?"animate-shake":""}`,children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(No,{region:n})}),K&&u.jsx("div",{className:"absolute inset-0 bg-white z-50 animate-flash"}),B>0&&u.jsx("div",{className:"absolute inset-0 bg-black z-20 pointer-events-none transition-opacity",style:{opacity:B}}),u.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-center p-6 z-10",children:[s==="intro"&&u.jsxs("div",{className:"text-center animate-bounce-gentle",children:[u.jsx("div",{className:"text-xl text-white mb-2 drop-shadow-lg",children:"A wild creature appeared!"}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx(an,{creature:p,size:150,animated:!0}),(p.rarity==="legendary"||p.rarity==="mythic")&&u.jsx("div",{className:"absolute inset-0 animate-pulse",children:u.jsx("div",{className:`absolute inset-0 ${p.rarity==="mythic"?"bg-orange-400/30":"bg-yellow-400/20"} rounded-full blur-xl`})})]}),u.jsx("div",{className:"text-2xl font-bold text-white mt-3 drop-shadow-lg",children:p.name}),u.jsx("div",{className:`text-lg mt-1 font-semibold ${p.rarity==="mythic"?"text-orange-400 animate-pulse":p.rarity==="legendary"?"text-yellow-400 animate-pulse":p.rarity==="rare"?"text-purple-400":"text-gray-300"}`,children:p.rarity.toUpperCase()}),u.jsx("div",{className:"text-sm text-purple-200 mt-2 max-w-xs mx-auto",children:p.description})]}),(s==="ready"||s==="throwing"||s==="impact"||s==="wobble"||s==="suspense")&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`absolute top-1/4 left-1/2 -translate-x-1/2 ${s==="impact"?"animate-shake":"animate-float"}`,children:s!=="impact"&&s!=="wobble"&&s!=="suspense"?u.jsx(an,{creature:p,size:120,animated:!0}):u.jsxs("div",{className:"relative",children:[u.jsx("div",{style:{transform:`translateX(${M.x-50}px) rotate(${M.rotation}deg)`},children:u.jsx(jl,{type:S,size:"large"})}),s==="wobble"&&u.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 flex gap-1",children:[...Array(k.maxWobbles)].map((he,H)=>u.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${H<k.currentWobble?"bg-yellow-400 scale-100":"bg-gray-600 scale-75"}`},H))}),s==="suspense"&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-yellow-400/50 animate-ping"})})]})}),s==="ready"&&u.jsx("div",{className:"absolute transition-all duration-100 animate-bounce-gentle",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:u.jsx(jl,{type:S,size:"medium",showSparkle:!0})}),s==="throwing"&&u.jsx("div",{className:"absolute transition-none",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`},children:u.jsx(jl,{type:S,size:"medium"})}),s==="ready"&&u.jsxs("div",{className:"absolute bottom-24 text-center",children:[u.jsxs("div",{className:"text-lg text-white mb-2 drop-shadow-lg",children:["Capture chance: ",u.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round(y*100),"%"]})]}),u.jsx("button",{onClick:se,className:"px-8 py-4 text-2xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform animate-button-glow",children:"Throw Sparkle Ball! "})]}),(s==="wobble"||s==="suspense")&&u.jsx("div",{className:"absolute bottom-24 text-center",children:u.jsx("div",{className:"text-xl text-white animate-pulse drop-shadow-lg",children:s==="wobble"?"...":"Please work..."})})]}),s==="result"&&u.jsx("div",{className:"text-center z-30 bg-purple-900/90 backdrop-blur-sm rounded-3xl p-6 mx-4 border border-purple-500/30 shadow-2xl",children:$?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-4xl text-yellow-400 font-bold mb-4 animate-bounce-gentle drop-shadow-lg",children:"CAUGHT!"}),u.jsxs("div",{className:"relative inline-block",children:[u.jsx(an,{creature:p,size:150,animated:!0}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((he,H)=>u.jsx("div",{className:"absolute text-3xl animate-sparkle",style:{left:`${20+H%4*20}%`,top:`${20+Math.floor(H/4)*40}%`,animationDelay:`${H*.1}s`},children:""},H))})]}),u.jsx("div",{className:"text-2xl font-bold text-white mt-4",children:p.name}),u.jsx("div",{className:"text-purple-200 mt-2 max-w-xs mx-auto",children:p.description}),u.jsx("div",{className:"text-4xl mt-4",children:""})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-3xl text-red-400 font-bold mb-4",children:"Oh no! It escaped!"}),u.jsx("div",{className:"opacity-50 inline-block",children:u.jsx(an,{creature:p,size:120,animated:!1})}),u.jsx("div",{className:"text-xl text-purple-200 mt-4 max-w-xs mx-auto",children:"Keep brushing well and try again tomorrow!"}),u.jsx("div",{className:"text-4xl mt-4",children:""})]})})]}),s==="result"&&u.jsx("div",{className:"relative z-30 p-6",children:u.jsx("button",{onClick:le,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg",children:"Continue"})}),u.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
        @keyframes flash {
          0% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-flash {
          animation: flash 0.3s ease-out forwards;
        }
      `})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[u.jsx("div",{className:"text-4xl mb-4",children:""}),u.jsx("div",{className:"text-xl text-center text-purple-200",children:"You've caught all the creatures in this region!"}),u.jsx("button",{onClick:()=>o(null),className:"mt-8 px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Continue"})]})}function My({photos:e,capturedCreature:t,onSelectPhoto:n,onSkip:r}){return e.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"No Photos"}),u.jsx("p",{className:"text-purple-200 mb-6",children:"No photos were captured during this session."}),u.jsx("button",{onClick:r,className:"px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Go Home"})]}):u.jsxs("div",{className:"flex flex-col h-full p-4",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Your Photos!"}),u.jsx("p",{className:"text-purple-200 text-sm",children:"Tap a photo to decorate it with stickers!"}),t&&u.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-yellow-900/30 px-3 py-1 rounded-full",children:[u.jsx(an,{creature:t,size:24,animated:!1}),u.jsx("span",{className:"text-sm text-yellow-300",children:"New sticker unlocked!"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map((o,s)=>u.jsx("button",{onClick:()=>n(o),className:"aspect-[3/4] rounded-2xl overflow-hidden bg-purple-900/50 active:scale-95 transition-transform shadow-lg",children:u.jsx("img",{src:o,alt:`Photo ${s+1}`,className:"w-full h-full object-cover"})},s))})}),u.jsx("button",{onClick:r,className:"w-full mt-4 py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl",children:"Skip for now"})]})}const lo=[{id:"none",name:"Squeaky Clean",imageUrl:""},{id:"rainbow",name:"Unicorn Burp",imageUrl:"linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff)"},{id:"purple",name:"Grape Soda Pop",imageUrl:"linear-gradient(135deg, #667eea, #764ba2)"},{id:"sunset",name:"Peachy Keen",imageUrl:"linear-gradient(135deg, #fa709a, #fee140)"},{id:"ocean",name:"Mermaid Splash",imageUrl:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{id:"forest",name:"Froggy Pond",imageUrl:"linear-gradient(135deg, #11998e, #38ef7d)"},{id:"candy",name:"Bubblegum Blast",imageUrl:"linear-gradient(135deg, #f093fb, #f5576c)"},{id:"night",name:"Sleepy Time",imageUrl:"linear-gradient(135deg, #0f0c29, #302b63, #24243e)"},{id:"gold",name:"Cheesy Grin",imageUrl:"linear-gradient(135deg, #f7971e, #ffd200)"},{id:"mint",name:"Mint Fresh",imageUrl:"linear-gradient(135deg, #00b09b, #96c93d)"}];var pt=[];for(var Sl=0;Sl<256;++Sl)pt.push((Sl+256).toString(16).slice(1));function By(e,t=0){return(pt[e[t+0]]+pt[e[t+1]]+pt[e[t+2]]+pt[e[t+3]]+"-"+pt[e[t+4]]+pt[e[t+5]]+"-"+pt[e[t+6]]+pt[e[t+7]]+"-"+pt[e[t+8]]+pt[e[t+9]]+"-"+pt[e[t+10]]+pt[e[t+11]]+pt[e[t+12]]+pt[e[t+13]]+pt[e[t+14]]+pt[e[t+15]]).toLowerCase()}var uo,Iy=new Uint8Array(16);function Oy(){if(!uo&&(uo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uo(Iy)}var zy=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const mf={randomUUID:zy};function Ly(e,t,n){if(mf.randomUUID&&!e)return mf.randomUUID();e=e||{};var r=e.random||(e.rng||Oy)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,By(r)}const El=[{label:"S",scale:.75},{label:"M",scale:1},{label:"L",scale:1.5},{label:"XL",scale:2}],gf=80,yf=2e3,co=30,fo=5;function $y({photo:e,capturedCreatures:t,onDone:n,onBack:r}){const[o,s]=C.useState([]),[c,p]=C.useState(lo[0]),[m,y]=C.useState(null),[j,S]=C.useState(null),[E,$]=C.useState(!1),[Y,M]=C.useState(null),[J,k]=C.useState(0),[v,b]=C.useState(!1),[I,K]=C.useState(!1),[L,B]=C.useState([]),V=C.useRef(null),[q,G]=C.useState(!1),[D,Z]=C.useState(!1),ee=C.useRef(null),fe=C.useRef(0),se=C.useCallback(re=>{if(o.length>=co)return;const je=o.length%10,Se=50+je*fo-5*fo/2,De=50+je*fo-5*fo/2,$e=Math.max(10,Math.min(90,Se)),Tt=Math.max(10,Math.min(90,De)),_t={id:Ly(),stickerId:re.id,creatureId:re.id,imageUrl:`/vibe-brushing/creatures/${re.id}.png`,x:$e,y:Tt,scale:1,rotation:0};s(xe=>[...xe,_t]),M(re.id),$(!1),S(_t.id)},[o.length]),le=C.useCallback((re,je)=>{je.stopPropagation(),y(re),S(re)},[]),he=C.useCallback(re=>{if(!m||!V.current)return;const je=V.current.getBoundingClientRect();let Se,De;"touches"in re?(Se=re.touches[0].clientX,De=re.touches[0].clientY):(Se=re.clientX,De=re.clientY);const $e=(Se-je.left)/je.width*100,Tt=(De-je.top)/je.height*100;s(_t=>_t.map(xe=>xe.id===m?{...xe,x:Math.max(0,Math.min(100,$e)),y:Math.max(0,Math.min(100,Tt))}:xe))},[m]),H=C.useCallback(re=>{s(je=>je.filter(Se=>Se.id!==re)),j===re&&S(null)},[j]),X=C.useCallback(re=>{s(je=>je.map(Se=>{if(Se.id!==re)return Se;const $e=(El.findIndex(Tt=>Math.abs(Tt.scale-Se.scale)<.01)+1)%El.length;return{...Se,scale:El[$e].scale}}))},[]),ae=C.useCallback((re,je)=>{je.stopPropagation(),S(re)},[]),we=C.useCallback(()=>{S(null)},[]),Ce=C.useCallback(()=>{const je=(lo.findIndex(Se=>Se.id===c.id)+1)%lo.length;p(lo[je])},[c]),We=C.useCallback(()=>{j&&X(j)},[j,X]),Ae=C.useCallback(re=>{s(je=>je.map(Se=>Se.id!==re?Se:{...Se,rotation:(Se.rotation+45)%360}))},[]),Be=C.useCallback(()=>{j&&Ae(j)},[j,Ae]),Le=C.useCallback(()=>{K(!0),k(0),b(!1);const re=["","","","","","",""],je=Array.from({length:16},(Se,De)=>({id:De,x:50,y:50,angle:De*360/16,emoji:re[Math.floor(Math.random()*re.length)]}));B(je),setTimeout(()=>{s([]),S(null),K(!1),B([])},600)},[]),Ue=C.useCallback(()=>{Le()},[Le]),Gt=C.useCallback(()=>{b(!0),fe.current=Date.now();const re=()=>{const je=Date.now()-fe.current,Se=Math.min(je/yf,1);k(Se),Se>=1?Ue():ee.current=requestAnimationFrame(re)};ee.current=requestAnimationFrame(re)},[Ue]),Re=C.useCallback(()=>{b(!1),k(0),ee.current&&(cancelAnimationFrame(ee.current),ee.current=null)},[]),ge=C.useCallback(async()=>{G(!0);try{const re=document.createElement("canvas"),je=re.getContext("2d");if(!je)return;const Se=new Image;Se.crossOrigin="anonymous",await new Promise((Ee,Zt)=>{Se.onload=()=>Ee(),Se.onerror=Zt,Se.src=e}),re.width=Se.width,re.height=Se.height,c.imageUrl&&(je.fillStyle="#000",je.fillRect(0,0,re.width,re.height)),je.drawImage(Se,0,0);const De=Math.min(re.width,re.height)/4,$e=o.map(Ee=>new Promise((Zt,Jt)=>{const un=new Image;un.crossOrigin="anonymous",un.onload=()=>Zt({sticker:Ee,img:un}),un.onerror=Jt,un.src=Ee.imageUrl}));(await Promise.all($e)).forEach(({sticker:Ee,img:Zt})=>{const Jt=Ee.x/100*re.width,un=Ee.y/100*re.height,cn=De*Ee.scale;je.save(),je.translate(Jt,un),je.rotate(Ee.rotation*Math.PI/180),je.drawImage(Zt,-cn/2,-cn/2,cn,cn),je.restore()});const _t=re.toDataURL("image/png"),xe=document.createElement("a");xe.download=`sparkle-brush-${Date.now()}.png`,xe.href=_t,xe.click(),setTimeout(n,500)}catch(re){console.error("Failed to save image:",re),G(!1)}},[e,o,c,n]);C.useEffect(()=>{const re=()=>{y(null),Re()},je=()=>{y(null),Re()};return window.addEventListener("mouseup",re),window.addEventListener("touchend",je),()=>{window.removeEventListener("mouseup",re),window.removeEventListener("touchend",je),ee.current&&cancelAnimationFrame(ee.current)}},[Re]);const nt=t.find(re=>re.id===Y),Te=C.useCallback(()=>{nt&&se(nt)},[nt,se]);return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-900/50",children:[u.jsx("button",{onClick:r,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg",children:" Back"}),u.jsx("h1",{className:"text-lg font-bold",children:"Decorate!"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>Z(!0),disabled:q,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg disabled:opacity-50",children:"Skip"}),u.jsx("button",{onClick:ge,disabled:q,className:"px-4 py-1 text-white bg-green-600 rounded-lg disabled:opacity-50",children:q?"...":"Save"})]})]}),u.jsxs("div",{ref:V,className:"flex-1 relative overflow-hidden m-3 rounded-2xl",style:{background:c.imageUrl||"transparent"},onMouseMove:he,onTouchMove:he,onClick:we,children:[u.jsx("img",{src:e,alt:"Your photo",className:"w-full h-full object-contain",draggable:!1}),o.map(re=>{const je=j===re.id,Se=m===re.id;return u.jsx("div",{className:`absolute cursor-move select-none ${Se?"z-20":je?"z-10":""}`,style:{left:`${re.x}%`,top:`${re.y}%`,transform:"translate(-50%, -50%)",transition:Se?"none":"transform 0.1s"},onMouseDown:De=>le(re.id,De),onTouchStart:De=>le(re.id,De),onClick:De=>ae(re.id,De),children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`relative ${je?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-transparent rounded-lg":""}`,style:{transform:`scale(${re.scale}) rotate(${re.rotation}deg)`,transition:Se?"none":"transform 0.15s"},children:u.jsx("img",{src:re.imageUrl,alt:"Sticker",className:"pointer-events-none",style:{width:gf,height:gf,objectFit:"contain"},draggable:!1})}),je&&u.jsx("button",{onClick:De=>{De.stopPropagation(),H(re.id)},onMouseDown:De=>De.stopPropagation(),onTouchStart:De=>De.stopPropagation(),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center text-white text-sm shadow-lg hover:bg-red-500 active:scale-90 transition-transform",style:{transform:`scale(${1/re.scale})`},children:""})]})},re.id)}),o.length===0&&!E&&!I&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx("div",{className:"bg-black/50 rounded-xl px-4 py-2 text-sm text-white text-center",children:"Tap the + button to add creature stickers!"})}),I&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 bg-orange-500/30 animate-explosion-flash pointer-events-none z-30"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-40",children:u.jsx("div",{className:"text-8xl animate-explosion-center",children:""})}),L.map(re=>u.jsx("div",{className:"absolute text-3xl pointer-events-none z-40 animate-explosion-particle",style:{left:"50%",top:"50%","--particle-angle":`${re.angle}deg`},children:re.emoji},re.id))]})]}),u.jsx("div",{className:"bg-purple-900/50 p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>$(!0),disabled:o.length>=co,className:`w-12 h-12 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl active:scale-95 transition-transform shadow-lg ${o.length>=co?"bg-gray-600 opacity-50 cursor-not-allowed":"bg-purple-600"}`,children:"+"}),u.jsxs("button",{onClick:Ce,className:"h-12 flex-shrink-0 bg-purple-800/50 rounded-xl flex items-center gap-2 px-3 active:scale-95 transition-transform",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-white/30",style:{background:c.imageUrl||"#1E1B4B"}}),u.jsx("span",{className:"text-xs text-purple-200",children:c.name})]}),nt&&o.length<co&&u.jsxs("button",{onClick:Te,className:"h-12 flex-shrink-0 bg-green-700/50 rounded-xl flex items-center gap-2 px-3 active:scale-95 transition-transform hover:bg-green-600/50",children:[u.jsx("img",{src:`/vibe-brushing/creatures/${nt.id}.png`,alt:nt.name,className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"text-xs text-green-200",children:"+ Add"})]}),u.jsx("div",{className:"flex-1"}),j&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:We,className:"w-12 h-12 flex-shrink-0 bg-blue-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:u.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),u.jsx("button",{onClick:Be,className:"w-12 h-12 flex-shrink-0 bg-orange-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:u.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9"}),u.jsx("path",{d:"M21 3v9h-9"})]})})]}),u.jsx("div",{className:"flex-1"}),o.length>0&&u.jsxs("button",{onMouseDown:Gt,onTouchStart:Gt,onMouseUp:Re,onTouchEnd:Re,onMouseLeave:Re,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl transition-all relative overflow-hidden ${v?"bg-red-600 scale-105":"bg-red-900/70"}`,style:{animation:v?"bomb-shake 0.1s infinite":"none"},children:[u.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[u.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"4"}),u.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"#fbbf24",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${J*94.2} 94.2`,style:{filter:"drop-shadow(0 0 4px #fbbf24)"}})]}),v&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg drop-shadow-lg",children:Math.ceil((1-J)*(yf/1e3))})}),u.jsx("span",{className:`relative z-10 transition-all ${v?"scale-75 opacity-50":""}`,children:""}),u.jsx("style",{children:`
                @keyframes bomb-shake {
                  0%, 100% { transform: translateX(0); }
                  25% { transform: translateX(-2px) rotate(-2deg); }
                  75% { transform: translateX(2px) rotate(2deg); }
                }
                @keyframes explosion-flash {
                  0% { opacity: 0; }
                  20% { opacity: 1; }
                  100% { opacity: 0; }
                }
                @keyframes explosion-center {
                  0% { transform: scale(0) rotate(0deg); opacity: 1; }
                  50% { transform: scale(2) rotate(180deg); opacity: 1; }
                  100% { transform: scale(3) rotate(360deg); opacity: 0; }
                }
                @keyframes explosion-particle {
                  0% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(0) scale(1);
                    opacity: 1;
                  }
                  100% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(150px) scale(0);
                    opacity: 0;
                  }
                }
                .animate-explosion-flash {
                  animation: explosion-flash 0.6s ease-out forwards;
                }
                .animate-explosion-center {
                  animation: explosion-center 0.6s ease-out forwards;
                }
                .animate-explosion-particle {
                  animation: explosion-particle 0.6s ease-out forwards;
                }
              `})]})]})}),E&&u.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>$(!1),children:u.jsxs("div",{className:"bg-purple-900 rounded-2xl p-4 m-4 max-w-md max-h-[80vh] overflow-auto",onClick:re=>re.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Add Creature Sticker"}),u.jsx("button",{onClick:()=>$(!1),className:"w-8 h-8 bg-purple-800 rounded-full flex items-center justify-center text-purple-300 hover:bg-purple-700",children:""})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 text-purple-300",children:[u.jsx("p",{children:"No creatures captured yet!"}),u.jsx("p",{className:"text-sm mt-2",children:"Complete brushing sessions to catch creatures."})]}):u.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(re=>u.jsxs("button",{onClick:()=>se(re),className:"aspect-square bg-purple-800/50 rounded-xl p-2 flex flex-col items-center justify-center gap-1 hover:bg-purple-700/50 active:scale-95 transition-all",children:[u.jsx("img",{src:`/vibe-brushing/creatures/${re.id}.png`,alt:re.name,className:"w-16 h-16 object-contain"}),u.jsx("span",{className:"text-xs text-purple-200 truncate w-full text-center",children:re.name})]},re.id))})]})}),D&&u.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>Z(!1),children:u.jsxs("div",{className:"bg-purple-900 rounded-2xl p-6 m-4 max-w-sm text-center",onClick:re=>re.stopPropagation(),children:[u.jsx("h2",{className:"text-xl font-bold mb-2",children:"Skip Decorating?"}),u.jsx("p",{className:"text-purple-300 mb-6",children:"Your photo won't be saved. Are you sure you want to skip?"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Z(!1),className:"flex-1 py-3 bg-purple-800 rounded-xl font-semibold hover:bg-purple-700 active:scale-95 transition-all",children:"Cancel"}),u.jsx("button",{onClick:()=>{Z(!1),n()},className:"flex-1 py-3 bg-red-600 rounded-xl font-semibold hover:bg-red-500 active:scale-95 transition-all",children:"Skip"})]})]})})]})}function Wy({userProgress:e,onBack:t}){const[n,r]=C.useState(null),o=new Set(e.capturedCreatures.map(p=>p.id)),s={mythic:mt.filter(p=>p.rarity==="mythic"),legendary:mt.filter(p=>p.rarity==="legendary"),rare:mt.filter(p=>p.rarity==="rare"),common:mt.filter(p=>p.rarity==="common")},c=p=>{o.has(p.id)&&r(p)};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[u.jsx("button",{onClick:t,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"My Collection"}),u.jsxs("div",{className:"text-sm text-purple-300",children:[o.size,"/",mt.length]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.jsx(po,{title:" Mythic",creatures:s.mythic,capturedIds:o,color:"rainbow",onCreatureClick:c}),u.jsx(po,{title:" Legendary",creatures:s.legendary,capturedIds:o,color:"yellow",onCreatureClick:c}),u.jsx(po,{title:" Rare",creatures:s.rare,capturedIds:o,color:"purple",onCreatureClick:c}),u.jsx(po,{title:" Common",creatures:s.common,capturedIds:o,color:"gray",onCreatureClick:c})]}),u.jsx("div",{className:"p-4 bg-purple-900/50",children:u.jsxs("div",{className:"flex justify-around text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),u.jsx("div",{className:"text-xs text-purple-300",children:"Day Streak"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.totalSessions}),u.jsx("div",{className:"text-xs text-purple-300",children:"Total Sessions"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.longestStreak}),u.jsx("div",{className:"text-xs text-purple-300",children:"Best Streak"})]})]})}),n&&u.jsx(Gy,{creature:n,capturedCreatures:e.capturedCreatures,onClose:()=>r(null)})]})}function po({title:e,creatures:t,capturedIds:n,color:r,onCreatureClick:o}){const s=t.filter(p=>n.has(p.id)).length,c={rainbow:"border-orange-500/50 bg-gradient-to-r from-orange-900/20 via-red-900/20 to-yellow-900/20",yellow:"border-yellow-500/30 bg-yellow-900/10",purple:"border-purple-500/30 bg-purple-900/10",gray:"border-gray-500/30 bg-gray-900/10"};return u.jsxs("div",{className:`mb-6 p-4 rounded-2xl border ${c[r]}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("h2",{className:"text-lg font-bold",children:e}),u.jsxs("span",{className:"text-sm text-purple-300",children:[s,"/",t.length]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(p=>{const m=n.has(p.id);return u.jsxs("button",{onClick:()=>o(p),disabled:!m,className:`aspect-square rounded-xl flex flex-col items-center justify-center p-2 transition-all ${m?"bg-purple-800/50 hover:bg-purple-700/50 cursor-pointer active:scale-95":"bg-purple-900/30 opacity-50 cursor-default"}`,children:[u.jsx("div",{className:`${m?"animate-float":"grayscale opacity-50"}`,children:m?u.jsx(an,{creature:p,size:48,animated:!1}):u.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-2xl",children:""})}),u.jsx("div",{className:"text-xs text-center mt-1 truncate w-full",children:m?p.name:"???"})]},p.id)})})]})}function Gy({creature:e,capturedCreatures:t,onClose:n}){const r=t.filter(y=>y.id===e.id).length,o=uy(e.region),s={Nature:"bg-green-600",Water:"bg-blue-600",Fire:"bg-orange-600",Electric:"bg-yellow-500",Air:"bg-cyan-500",Cosmic:"bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500"},c={common:"text-gray-300",rare:"text-purple-400",legendary:"text-yellow-400",mythic:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-400 to-yellow-400"},p=y=>y>=100?`${(y/100).toFixed(1)}m`:`${y}cm`,m=y=>y>=1e3?`${(y/1e3).toFixed(1)}t`:y<1?`${(y*1e3).toFixed(0)}g`:`${y}kg`;return u.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:n,children:u.jsxs("div",{className:"bg-purple-900/95 rounded-3xl max-w-sm w-full overflow-hidden shadow-2xl border border-purple-500/30",onClick:y=>y.stopPropagation(),children:[u.jsxs("div",{className:"relative bg-gradient-to-b from-purple-800/50 to-transparent p-6 flex flex-col items-center",children:[u.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-purple-800/80 flex items-center justify-center text-purple-300 hover:bg-purple-700/80 transition-colors",children:""}),u.jsx("div",{className:"animate-float",children:u.jsx(an,{creature:e,size:120,animated:!0})}),u.jsx("h2",{className:`text-2xl font-bold mt-4 ${c[e.rarity]}`,children:e.name}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium text-white ${s[o]}`,children:o}),u.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-700/60 text-purple-200 capitalize",children:e.rarity})]})]}),u.jsxs("div",{className:"px-6 pb-6",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-white",children:p(e.height)}),u.jsx("div",{className:"text-xs text-purple-300",children:"Height"})]}),u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-white",children:m(e.weight)}),u.jsx("div",{className:"text-xs text-purple-300",children:"Weight"})]}),u.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[u.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:["",r]}),u.jsx("div",{className:"text-xs text-purple-300",children:"Caught"})]})]}),u.jsx("div",{className:"bg-purple-800/30 rounded-xl p-4",children:u.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:e.description})})]})]})})}const Vy="2.0.0";function Uy({onBack:e,onHatDebug:t,onGraphicsDebug:n}){const[r,o]=C.useState($h);C.useEffect(()=>{fy(r)},[r]);const s=p=>{o(m=>({...m,sessionDurationMinutes:p}))},c=[{value:1,label:"1 Minute",description:"Quick brush"},{value:2,label:"2 Minutes",description:"Recommended"},{value:3,label:"3 Minutes",description:"Extra thorough"}];return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),u.jsx("h1",{className:"text-xl font-bold",children:"Settings"}),u.jsx("div",{className:"w-20"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-1",children:"Brushing Duration"}),u.jsx("p",{className:"text-sm text-purple-300 mb-4",children:"How long should each brushing session last?"}),u.jsx("div",{className:"space-y-2",children:c.map(p=>u.jsxs("button",{onClick:()=>s(p.value),className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${r.sessionDurationMinutes===p.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${r.sessionDurationMinutes===p.value?"border-white bg-white":"border-purple-400"}`,children:r.sessionDurationMinutes===p.value&&u.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold",children:p.label}),u.jsx("div",{className:`text-xs ${r.sessionDurationMinutes===p.value?"text-white/80":"text-purple-400"}`,children:p.description})]})]}),p.value===2&&u.jsx("span",{className:"text-xs bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full font-bold",children:" Best"})]},p.value))})]}),u.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[u.jsx("h2",{className:"text-lg font-bold mb-2",children:"About Sparkle"}),u.jsx("p",{className:"text-sm text-purple-300",children:"Sparkle makes tooth brushing fun! Brush your teeth to clean creatures, catch them, and build your collection."}),u.jsxs("div",{className:"mt-4 text-center text-xs text-purple-500",children:["Version ",Vy]})]}),(t||n)&&u.jsxs("div",{className:"bg-gray-900/50 rounded-2xl p-4 border border-gray-700",children:[u.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-300",children:"Developer Tools"}),u.jsxs("div",{className:"space-y-2",children:[n&&u.jsxs("button",{onClick:n,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-purple-400",children:"Graphics Debug Menu"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Preview all creatures and hat graphics in a gallery view"})]}),t&&u.jsxs("button",{onClick:t,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[u.jsx("div",{className:"font-bold text-green-400",children:"Hat Debug Mode"}),u.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test face tracking with debug overlay showing detected face rectangle"})]})]})]})]})]})}function Ky({onProfileSelected:e}){const[t,n]=C.useState([]),[r,o]=C.useState(!0),[s,c]=C.useState(!1),[p,m]=C.useState(""),[y,j]=C.useState(null);C.useEffect(()=>{S()},[]);async function S(){o(!0);try{await Dy();const M=await gc(),J=await Promise.all(M.map(async k=>{try{const v=await xa(k.id);return{...k,progress:v}}catch{return k}}));n(J)}catch(M){console.error("Failed to load profiles:",M)}o(!1)}async function E(){if(p.trim())try{const M=await Kh(p);m(""),c(!1),await S(),$(M)}catch(M){console.error("Failed to create profile:",M)}}function $(M){mc(M.id),e(M)}async function Y(M){try{await _y(M),j(null),await S()}catch(J){console.error("Failed to delete profile:",J)}}return r?u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Loading profiles..."})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 p-6",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-5xl mb-4",children:""}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sparkle Brush"}),u.jsx("p",{className:"text-purple-200",children:"Who's brushing today?"})]}),u.jsx("div",{className:"space-y-4 mb-8",children:t.map(M=>u.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:y===M.id?u.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[u.jsxs("p",{className:"text-white text-center",children:["Delete ",M.name,"'s profile?"]}),u.jsx("p",{className:"text-red-300 text-sm text-center",children:"This will delete all their creatures and progress!"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Y(M.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold",children:"Delete"}),u.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-bold",children:"Cancel"})]})]}):u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:()=>$(M),className:"flex-1 flex items-center gap-4",children:[u.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg",style:{backgroundColor:M.avatarColor},children:M.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"text-white font-bold text-lg",children:M.name}),M.progress&&u.jsxs("div",{className:"text-purple-200 text-sm flex gap-3",children:[u.jsxs("span",{children:[" ",M.progress.currentStreak," streak"]}),u.jsxs("span",{children:[" ",M.progress.capturedCreatures.length," creatures"]})]})]})]}),u.jsx("button",{onClick:J=>{J.stopPropagation(),j(M.id)},className:"p-2 text-red-400 hover:text-red-300 transition-colors","aria-label":"Delete profile",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},M.id))}),s?u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-purple-200 text-sm mb-2",children:"Profile Name"}),u.jsx("input",{type:"text",value:p,onChange:M=>m(M.target.value),placeholder:"Enter name...",className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0,maxLength:20,onKeyDown:M=>{M.key==="Enter"&&E(),M.key==="Escape"&&c(!1)}})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:E,disabled:!p.trim(),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Profile"}),u.jsx("button",{onClick:()=>{c(!1),m("")},className:"px-4 py-3 bg-gray-500/50 text-white rounded-xl font-bold",children:"Cancel"})]})]}):u.jsxs("button",{onClick:()=>c(!0),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-lg shadow-lg flex items-center justify-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:"+"}),u.jsx("span",{children:"Add New Profile"})]}),t.length===0&&!s&&u.jsxs("div",{className:"text-center mt-8 text-purple-200",children:[u.jsx("p",{children:"No profiles yet!"}),u.jsx("p",{className:"text-sm mt-1",children:"Create a profile to start brushing"})]})]})})}const vf=[{id:"cowboy",name:"Cowboy Hat",imageUrl:"",unlockCondition:"starter"},{id:"crown",name:"Royal Crown",imageUrl:"",unlockCondition:"streak",unlockThreshold:7},{id:"tophat",name:"Top Hat",imageUrl:"",unlockCondition:"sessions",unlockThreshold:10},{id:"wizard",name:"Wizard Hat",imageUrl:"",unlockCondition:"creature"},{id:"cap",name:"Baseball Cap",imageUrl:"",unlockCondition:"starter"}];function qy({onBack:e}){const{isReady:t,error:n,registerVideoElement:r,startCamera:o}=gs(),{facePosition:s,isLoading:c,startTracking:p,stopTracking:m}=Ih(),{motionResults:y,startDetection:j,stopDetection:S,setFaceRegion:E,setDebugMode:$,getDebugInfo:Y}=Bh({targetCleaningTime:25}),M=C.useRef(null),J=C.useRef(null),[k,v]=C.useState(vf[0]),[b,I]=C.useState({width:0,height:0}),[K,L]=C.useState({width:640,height:480}),[B,V]=C.useState(!0),[q,G]=C.useState(!1);C.useEffect(()=>{o()},[o]),C.useEffect(()=>{E(s?{x:s.x,y:s.y,width:s.width,height:s.height}:null)},[s,E]);const D=C.useCallback(()=>{G(le=>{const he=!le;return $(he),he})},[$]),Z=C.useCallback(le=>{M.current=le,le&&r(le)},[r]);C.useEffect(()=>{const le=M.current;if(!le||!t)return;const he=()=>{le.readyState>=2&&le.videoWidth>0&&(L({width:le.videoWidth,height:le.videoHeight}),p(le),j(le))},H=setInterval(he,100);return he(),()=>{clearInterval(H),m(),S()}},[t,p,m,j,S]),C.useEffect(()=>{const le=J.current;if(!le)return;const he=()=>{I({width:le.clientWidth,height:le.clientHeight})};he();const H=new ResizeObserver(he);return H.observe(le),()=>H.disconnect()},[]);const ee=b.width/K.width,fe=b.height/K.height,se=s?{x:(b.width-s.width*ee)/2,y:s.y*fe,width:s.width*ee,height:s.height*fe}:null;return u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-indigo-900 to-purple-800 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg text-white",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Hat Debug Mode"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:D,className:`px-4 py-2 rounded-lg text-white ${q?"bg-yellow-600":"bg-gray-600"}`,children:" Brush"}),u.jsx("button",{onClick:()=>V(!B),className:`px-4 py-2 rounded-lg text-white ${B?"bg-green-600":"bg-gray-600"}`,children:B?"Hat ON":"Hat OFF"})]})]}),u.jsxs("div",{ref:J,className:"relative w-full aspect-[4/3] bg-black rounded-2xl overflow-hidden mb-4",children:[u.jsx("video",{ref:Z,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!t&&!n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/70",children:u.jsx("div",{className:"text-purple-200 text-center p-4 animate-pulse",children:"Connecting to camera..."})}),n&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/70",children:u.jsx("div",{className:"text-red-200 text-center p-4",children:n})}),c&&u.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500/80 px-3 py-1 rounded text-sm",children:"Loading face detection..."}),B&&se&&u.jsx("div",{className:"absolute border-2 border-green-400 pointer-events-none",style:{left:`${se.x}px`,top:`${se.y}px`,width:`${se.width}px`,height:`${se.height}px`},children:u.jsxs("div",{className:"absolute -top-6 left-0 bg-green-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:["Face: ",s==null?void 0:s.x.toFixed(0),", ",s==null?void 0:s.y.toFixed(0)," | ",s==null?void 0:s.width.toFixed(0),"x",s==null?void 0:s.height.toFixed(0)]})}),B&&s&&u.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full border-2 border-white pointer-events-none",style:{left:`${b.width/2}px`,top:`${s.y*fe}px`,transform:"translate(-50%, -50%)"}}),k&&t&&b.width>0&&u.jsx(Gh,{hat:k,facePosition:s||null,containerWidth:b.width,containerHeight:b.height,videoWidth:K.width,videoHeight:K.height}),q&&b.width>0&&u.jsx(Vh,{getDebugInfo:Y,containerWidth:b.width,containerHeight:b.height,videoWidth:K.width,videoHeight:K.height}),q&&u.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:u.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${y.some(le=>le.hasMotion)?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:y.some(le=>le.hasMotion)?" BRUSHING DETECTED":" No brushing motion"})})]}),u.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[u.jsx("h2",{className:"text-white font-semibold mb-3",children:"Select Hat"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:vf.map(le=>u.jsx("button",{onClick:()=>v(le),className:`px-4 py-2 rounded-lg transition-all ${k.id===le.id?"bg-yellow-500 text-black font-bold":"bg-purple-600 text-white hover:bg-purple-500"}`,children:le.name},le.id))})]}),B&&u.jsxs("div",{className:"bg-gray-900/80 rounded-xl p-4 font-mono text-sm text-green-400",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Video Size:"}),u.jsxs("div",{children:[K.width," x ",K.height]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Container Size:"}),u.jsxs("div",{children:[b.width.toFixed(0)," x ",b.height.toFixed(0)]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Face Position (video coords):"}),u.jsx("div",{children:s?`x: ${s.x.toFixed(1)}, y: ${s.y.toFixed(1)}`:"Not detected"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-400 mb-1",children:"Face Size:"}),u.jsx("div",{children:s?`${s.width.toFixed(1)} x ${s.height.toFixed(1)}`:"-"})]})]}),q&&u.jsx(u.Fragment,{children:u.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4",children:[u.jsx("div",{className:"text-gray-400 mb-2",children:"Motion Detection Zones:"}),u.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs",children:y.map(le=>u.jsxs("div",{className:`px-2 py-1 rounded ${le.hasMotion?"bg-green-600":"bg-gray-700"}`,children:[le.zoneId,": ",le.motionLevel.toFixed(0),"%"]},le.zoneId))})]})}),u.jsxs("div",{className:"mt-4 text-gray-500 text-xs",children:["Green rectangle = detected face area | Red dot = hat anchor point",q&&" | Green dashed = brushing region | Red shaded = face core (ignored)"]})]})]})})}const xf=["grassland","coastal","lava","city","sky"];function ho(e){const t=e.monsterType.toLowerCase(),n=e.id.toLowerCase();return t.includes("slime")||t.includes("blob")||t.includes("jelly")||t.includes("ghost")?"blobkins":t.includes("cat")||t.includes("fox")||t.includes("raccoon")||t.includes("tanuki")||t.includes("spirit")||t.includes("kappa")||t.includes("owl")||n.includes("yokai")||n.includes("spirit")?"mystlings":t.includes("dragon")||t.includes("drake")||t.includes("mecha")||t.includes("robo")||t.includes("cyber")||t.includes("dino")||n.includes("gear")||n.includes("mecha")||n.includes("cyber")||n.includes("robo")||n.includes("volt")||n.includes("data")?"mechazoids":"sparklings"}const Ii={sparklings:{label:"Sparklings",icon:"",color:"bg-yellow-500",description:"Clean, elemental, iconic"},mechazoids:{label:"Mechazoids",icon:"",color:"bg-blue-600",description:"Digital, robotic, tech"},mystlings:{label:"Mystlings",icon:"",color:"bg-purple-600",description:"Spiritual, mystical, Japanese"},blobkins:{label:"Blobkins",icon:"",color:"bg-lime-500",description:"Bouncy, happy, DQ style"}},zr={grassland:{bg:"bg-green-600",text:"text-green-100",border:"border-green-400"},coastal:{bg:"bg-blue-600",text:"text-blue-100",border:"border-blue-400"},lava:{bg:"bg-orange-600",text:"text-orange-100",border:"border-orange-400"},city:{bg:"bg-purple-600",text:"text-purple-100",border:"border-purple-400"},sky:{bg:"bg-cyan-600",text:"text-cyan-100",border:"border-cyan-400"},all:{bg:"bg-gradient-to-r from-orange-500 to-red-500",text:"text-white",border:"border-orange-400"}},Lr={common:{bg:"bg-gray-700",text:"text-gray-200",glow:""},rare:{bg:"bg-blue-800",text:"text-blue-200",glow:"shadow-blue-500/50 shadow-lg"},legendary:{bg:"bg-gradient-to-br from-amber-800 via-amber-700 to-orange-900",text:"text-amber-100",glow:"shadow-amber-400/70 shadow-2xl ring-2 ring-amber-500/50"},mythic:{bg:"bg-gradient-to-br from-orange-600 via-red-600 to-orange-700",text:"text-orange-100",glow:"shadow-orange-400/80 shadow-2xl ring-4 ring-orange-500/60 animate-pulse"}},Hy=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],Yy=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function Qy({onBack:e}){const[t,n]=C.useState("creatures"),[r,o]=C.useState("all"),[s,c]=C.useState("all"),[p,m]=C.useState("all"),[y,j]=C.useState(!0),[S,E]=C.useState(!1),[$,Y]=C.useState(50),[M,J]=C.useState(null),[k,v]=C.useState(120),[b,I]=C.useState(100),[K,L]=C.useState(!0),B=mt.filter(D=>!(r!=="all"&&D.region!==r||s!=="all"&&D.rarity!==s||p!=="all"&&ho(D)!==p)),V=["sparklings","mechazoids","mystlings","blobkins"],q=V.reduce((D,Z)=>(D[Z]=mt.filter(ee=>ho(ee)===Z).length,D),{}),G={byRegion:xf.reduce((D,Z)=>({...D,[Z]:mt.filter(ee=>ee.region===Z).length}),{}),byRarity:{common:mt.filter(D=>D.rarity==="common").length,rare:mt.filter(D=>D.rarity==="rare").length,legendary:mt.filter(D=>D.rarity==="legendary").length,mythic:mt.filter(D=>D.rarity==="mythic").length}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900",children:[u.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur border-b border-slate-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white flex items-center gap-2",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Graphics Debug Menu"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>n("creatures"),className:`px-4 py-2 rounded-lg transition-all ${t==="creatures"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Creatures (",mt.length,")"]}),u.jsxs("button",{onClick:()=>n("hats"),className:`px-4 py-2 rounded-lg transition-all ${t==="hats"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Hats (",ai.length,")"]})]})]})})}),t==="creatures"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Region:"}),u.jsx("button",{onClick:()=>o("all"),className:`px-3 py-1 rounded text-sm ${r==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),xf.map(D=>u.jsxs("button",{onClick:()=>o(D),className:`px-3 py-1 rounded text-sm capitalize ${r===D?`${zr[D].bg} ${zr[D].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[D," (",G.byRegion[D],")"]},D))]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Rarity:"}),u.jsx("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded text-sm ${s==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),["common","rare","legendary","mythic"].map(D=>u.jsxs("button",{onClick:()=>c(D),className:`px-3 py-1 rounded text-sm capitalize ${s===D?`${Lr[D].bg} ${Lr[D].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[D," (",G.byRarity[D],")"]},D))]}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[u.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Style:"}),u.jsx("button",{onClick:()=>m("all"),className:`px-3 py-1 rounded text-sm ${p==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),V.map(D=>u.jsxs("button",{onClick:()=>m(D),className:`px-3 py-1 rounded text-sm flex items-center gap-1 ${p===D?`${Ii[D].color} text-white font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[u.jsx("span",{children:Ii[D].icon}),Ii[D].label," (",q[D],")"]},D))]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:y,onChange:D=>j(D.target.checked),className:"w-4 h-4"}),"Animated"]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:K,onChange:D=>L(D.target.checked),className:"w-4 h-4"}),"Show Style"]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[u.jsx("input",{type:"checkbox",checked:S,onChange:D=>E(D.target.checked),className:"w-4 h-4"}),"Show Gunk"]}),S&&u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Gunk Level:",u.jsx("input",{type:"range",min:"0",max:"100",value:$,onChange:D=>Y(Number(D.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-8",children:[$,"%"]})]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",u.jsx("input",{type:"range",min:"60",max:"200",value:k,onChange:D=>v(Number(D.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-10",children:[k,"px"]})]})]})]})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing ",B.length," of ",mt.length," creatures"]}),u.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${k+40}px, 1fr))`},children:B.map(D=>u.jsxs("div",{onClick:()=>J((M==null?void 0:M.id)===D.id?null:D),className:`relative flex flex-col items-center p-3 rounded-xl cursor-pointer transition-all ${Lr[D.rarity].bg} ${Lr[D.rarity].glow} ${(M==null?void 0:M.id)===D.id?"ring-2 ring-white scale-105":"hover:scale-102"}`,children:[u.jsx("div",{className:`absolute top-1 left-1 px-2 py-0.5 rounded text-xs ${zr[D.region].bg} ${zr[D.region].text}`,children:D.region}),D.rarity==="mythic"&&u.jsx("div",{className:"absolute top-1 right-1 text-orange-300 text-xl animate-pulse",title:"Mythic - Ultimate Boss",children:""}),D.rarity==="legendary"&&u.jsx("div",{className:"absolute top-1 right-1 text-amber-300 text-lg",title:"Legendary Dragon",children:""}),Hy.includes(D.id)&&u.jsxs("div",{className:"absolute bottom-1 right-1 flex gap-0.5",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-green-500 text-white font-bold",title:"HD Raster Image",children:"HD"}),Yy.includes(D.id)&&u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-red-600 text-white font-bold",title:"Has Possessed Variant",children:""})]}),u.jsx(an,{creature:D,size:k,animated:y,showGunk:S,gunkLevel:$}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsx("div",{className:"text-white font-medium text-sm truncate max-w-full",children:D.name}),u.jsxs("div",{className:"text-slate-400 text-xs capitalize mb-1",children:[D.rarity,"  ",D.monsterType]}),K&&(()=>{if(D.rarity==="mythic")return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold animate-pulse",children:" MYTHIC ULTIMATE"})});if(D.rarity==="legendary")return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold",children:" LEGENDARY DRAGON"})});const Z=ho(D),ee=Ii[Z];return u.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:u.jsxs("span",{className:`px-2 py-0.5 rounded text-[9px] text-white ${ee.color} font-medium`,children:[ee.icon," ",ee.label]})})})()]})]},D.id))})]}),M&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur border-t border-slate-700 p-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-6",children:[u.jsx(an,{creature:M,size:100,animated:y,showGunk:S,gunkLevel:$}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:M.name}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${zr[M.region].bg} ${zr[M.region].text}`,children:M.region}),u.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${Lr[M.rarity].bg} ${Lr[M.rarity].text}`,children:M.rarity})]}),u.jsx("p",{className:"text-slate-400 text-sm mb-2",children:M.description}),(()=>{if(M.rarity==="mythic")return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold flex items-center gap-2 animate-pulse",children:" MYTHIC ULTIMATE BOSS"}),u.jsx("span",{className:"text-orange-400 text-xs",children:"The five-headed dragon of perfect dental hygiene - only appears after catching all other creatures!"})]});if(M.rarity==="legendary")return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold flex items-center gap-2",children:" LEGENDARY DRAGON FORM"}),u.jsx("span",{className:"text-amber-400 text-xs",children:"Unique dragon-style graphics with wings, horns, and magical aura"})]});const D=ho(M),Z=Ii[D];return u.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[u.jsxs("span",{className:`px-3 py-1 rounded text-sm text-white ${Z.color} font-medium flex items-center gap-2`,children:[Z.icon," ",Z.label," Style"]}),u.jsx("span",{className:"text-slate-400 text-xs",children:Z.description})]})})(),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[u.jsxs("span",{children:["ID: ",M.id]}),u.jsxs("span",{children:["Type: ",M.monsterType]})]})]}),u.jsx("button",{onClick:()=>J(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white",children:"Close"})]})})]}),t==="hats"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:u.jsx("div",{className:"flex flex-wrap items-center gap-4",children:u.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",u.jsx("input",{type:"range",min:"60",max:"200",value:b,onChange:D=>I(Number(D.target.value)),className:"w-24"}),u.jsxs("span",{className:"w-10",children:[b,"px"]})]})})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing all ",ai.length," hats"]}),u.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${b+60}px, 1fr))`},children:ai.map(D=>u.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-gradient-to-b from-purple-800 to-purple-900 hover:from-purple-700 hover:to-purple-800 transition-all",children:[u.jsx("div",{className:"bg-purple-950/50 rounded-lg p-2 mb-2",children:u.jsx(Rh,{hatId:D.id,size:b})}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white font-medium text-sm",children:D.name}),u.jsxs("div",{className:"text-purple-300 text-xs capitalize",children:[D.unlockCondition,D.unlockThreshold&&` (${D.unlockThreshold})`]}),u.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["ID: ",D.id]})]})]},D.id))})]})]})]})}function Xy(){const[e,t]=C.useState("profile-select"),[n,r]=C.useState(null),[o,s]=C.useState(null),[c,p]=C.useState(null),[m,y]=C.useState(null),[j,S]=C.useState(null),[E,$]=C.useState(null);C.useEffect(()=>{Y()},[]);async function Y(){const se=gi();if(se){const le=await Ty(se);if(le){r(le),await k(),t("home");return}}t("profile-select")}async function M(se){r(se),await k(),t("home")}function J(){t("profile-select"),s(null),r(null)}async function k(){try{const se=await xa();s(se)}catch(se){console.error("Failed to load user progress:",se),t("profile-select")}}function v(){t("camera-check")}function b(){t("hat-select")}function I(se){p(se),t("brushing")}async function K(se){y(se),t("results");const le={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:new Date,duration:Wh(),cleaningPercentage:se.cleaningPercentage,zoneProgress:se.zoneProgress,photos:se.photos};try{await Ay(le),await k()}catch(he){console.error("Failed to save session:",he)}}function L(){t("capture")}function B(se){S(se),t("photos")}function V(se){$(se),t("editor")}function q(){$(null),t("home"),k()}function G(){t("home"),y(null),S(null),$(null),k()}function D(){t("collection")}function Z(){t("settings")}function ee(){t("hat-debug")}function fe(){t("graphics-debug")}return e==="profile-select"?u.jsx("div",{className:"h-full w-full overflow-hidden",children:u.jsx(Ky,{onProfileSelected:M})}):!o||!n?u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsx("div",{className:"text-2xl animate-pulse",children:"Loading..."})}):u.jsxs("div",{className:"h-full w-full overflow-hidden",children:[e==="home"&&u.jsx(qg,{userProgress:o,currentProfile:n,onStartBrushing:v,onViewCollection:D,onViewSettings:Z,onSwitchProfile:J}),e==="settings"&&u.jsx(Uy,{onBack:G,onHatDebug:ee,onGraphicsDebug:fe}),e==="camera-check"&&u.jsx(Yg,{onConfirm:b,onCancel:G}),e==="hat-select"&&u.jsx(Xg,{userProgress:o,onSelect:I,onBack:G}),e==="brushing"&&u.jsx(Cy,{selectedHat:c,capturedCreatureIds:o.capturedCreatures.map(se=>se.id),onComplete:K,onCancel:G}),e==="results"&&m&&u.jsx(jy,{cleaningPercentage:m.cleaningPercentage,zoneProgress:m.zoneProgress,onContinue:L}),e==="capture"&&m&&u.jsx(Ry,{cleaningPercentage:m.cleaningPercentage,userProgress:o,region:m.region,preSelectedCreature:m.creature,onComplete:B}),e==="photos"&&m&&u.jsx(My,{photos:m.photos,capturedCreature:j,onSelectPhoto:V,onSkip:G}),e==="editor"&&E&&u.jsx($y,{photo:E,capturedCreatures:j&&!o.capturedCreatures.some(se=>se.id===j.id)?[{...j,capturedAt:new Date},...o.capturedCreatures]:o.capturedCreatures,onDone:q,onBack:()=>t("photos")}),e==="collection"&&u.jsx(Wy,{userProgress:o,onBack:G}),e==="hat-debug"&&u.jsx(qy,{onBack:G}),e==="graphics-debug"&&u.jsx(Qy,{onBack:G})]})}Dh(document.getElementById("root")).render(u.jsx(C.StrictMode,{children:u.jsx(Hg,{children:u.jsx(Xy,{})})}));export{Jy as a,Xc as c,wm as g};
