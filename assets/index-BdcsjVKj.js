const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-qLcj4pmu.js","assets/graph_model-C26YqnFQ.js","assets/face-landmarks-detection.esm-GBPXGIpd.js"])))=>i.map(i=>d[i]);
var Sm=Object.defineProperty;var jm=(e,t,n)=>t in e?Sm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Nt=(e,t,n)=>jm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var Sf={exports:{}},ro={},jf={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=Symbol.for("react.element"),Em=Symbol.for("react.portal"),Nm=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Pm=Symbol.for("react.profiler"),_m=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Mm=Symbol.for("react.memo"),Bm=Symbol.for("react.lazy"),td=Symbol.iterator;function Im(e){return e===null||typeof e!="object"?null:(e=td&&e[td]||e["@@iterator"],typeof e=="function"?e:null)}var Tf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ef=Object.assign,Nf={};function gi(e,t,n){this.props=e,this.context=t,this.refs=Nf,this.updater=n||Tf}gi.prototype.isReactComponent={};gi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Af(){}Af.prototype=gi.prototype;function jc(e,t,n){this.props=e,this.context=t,this.refs=Nf,this.updater=n||Tf}var Tc=jc.prototype=new Af;Tc.constructor=jc;Ef(Tc,gi.prototype);Tc.isPureReactComponent=!0;var nd=Array.isArray,Pf=Object.prototype.hasOwnProperty,Ec={current:null},_f={key:!0,ref:!0,__self:!0,__source:!0};function Df(e,t,n){var r,a={},o=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)Pf.call(t,r)&&!_f.hasOwnProperty(r)&&(a[r]=t[r]);var h=arguments.length-2;if(h===1)a.children=n;else if(1<h){for(var p=Array(h),y=0;y<h;y++)p[y]=arguments[y+2];a.children=p}if(e&&e.defaultProps)for(r in h=e.defaultProps,h)a[r]===void 0&&(a[r]=h[r]);return{$$typeof:gs,type:e,key:o,ref:u,props:a,_owner:Ec.current}}function Om(e,t){return{$$typeof:gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nc(e){return typeof e=="object"&&e!==null&&e.$$typeof===gs}function zm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rd=/\/+/g;function tl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zm(""+e.key):t.toString(36)}function ya(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case gs:case Em:u=!0}}if(u)return u=e,a=a(u),e=r===""?"."+tl(u,0):r,nd(a)?(n="",e!=null&&(n=e.replace(rd,"$&/")+"/"),ya(a,t,n,"",function(y){return y})):a!=null&&(Nc(a)&&(a=Om(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(rd,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=r===""?".":r+":",nd(e))for(var h=0;h<e.length;h++){o=e[h];var p=r+tl(o,h);u+=ya(o,t,n,p,a)}else if(p=Im(e),typeof p=="function")for(e=p.call(e),h=0;!(o=e.next()).done;)o=o.value,p=r+tl(o,h++),u+=ya(o,t,n,p,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function qs(e,t,n){if(e==null)return e;var r=[],a=0;return ya(e,r,"","",function(o){return t.call(n,o,a++)}),r}function Lm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},va={transition:null},$m={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:va,ReactCurrentOwner:Ec};function Ff(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!Nc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=gi;Ne.Fragment=Nm;Ne.Profiler=Pm;Ne.PureComponent=jc;Ne.StrictMode=Am;Ne.Suspense=Rm;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$m;Ne.act=Ff;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ef({},e.props),a=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=Ec.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(p in t)Pf.call(t,p)&&!_f.hasOwnProperty(p)&&(r[p]=t[p]===void 0&&h!==void 0?h[p]:t[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){h=Array(p);for(var y=0;y<p;y++)h[y]=arguments[y+2];r.children=h}return{$$typeof:gs,type:e.type,key:a,ref:o,props:r,_owner:u}};Ne.createContext=function(e){return e={$$typeof:Dm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_m,_context:e},e.Consumer=e};Ne.createElement=Df;Ne.createFactory=function(e){var t=Df.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:Fm,render:e}};Ne.isValidElement=Nc;Ne.lazy=function(e){return{$$typeof:Bm,_payload:{_status:-1,_result:e},_init:Lm}};Ne.memo=function(e,t){return{$$typeof:Mm,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=va.transition;va.transition={};try{e()}finally{va.transition=t}};Ne.unstable_act=Ff;Ne.useCallback=function(e,t){return _t.current.useCallback(e,t)};Ne.useContext=function(e){return _t.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return _t.current.useEffect(e,t)};Ne.useId=function(){return _t.current.useId()};Ne.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return _t.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};Ne.useRef=function(e){return _t.current.useRef(e)};Ne.useState=function(e){return _t.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return _t.current.useTransition()};Ne.version="18.3.1";jf.exports=Ne;var k=jf.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=k,Gm=Symbol.for("react.element"),Wm=Symbol.for("react.fragment"),Um=Object.prototype.hasOwnProperty,qm=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Km={key:!0,ref:!0,__self:!0,__source:!0};function Rf(e,t,n){var r,a={},o=null,u=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)Um.call(t,r)&&!Km.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Gm,type:e,key:o,ref:u,props:a,_owner:qm.current}}ro.Fragment=Wm;ro.jsx=Rf;ro.jsxs=Rf;Sf.exports=ro;var c=Sf.exports,Mf={exports:{}},Kt={},Bf={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,ee){var Z=Q.length;Q.push(ee);e:for(;0<Z;){var he=Z-1>>>1,ke=Q[he];if(0<a(ke,ee))Q[he]=ee,Q[Z]=ke,Z=he;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],Z=Q.pop();if(Z!==ee){Q[0]=Z;e:for(var he=0,ke=Q.length,Le=ke>>>1;he<Le;){var Ae=2*(he+1)-1,Ue=Q[Ae],Ie=Ae+1,Je=Q[Ie];if(0>a(Ue,Z))Ie<ke&&0>a(Je,Ue)?(Q[he]=Je,Q[Ie]=Z,he=Ie):(Q[he]=Ue,Q[Ae]=Z,he=Ae);else if(Ie<ke&&0>a(Je,Z))Q[he]=Je,Q[Ie]=Z,he=Ie;else break e}}return ee}function a(Q,ee){var Z=Q.sortIndex-ee.sortIndex;return Z!==0?Z:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var p=[],y=[],j=1,S=null,E=3,W=!1,$=!1,I=!1,V=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var ee=n(y);ee!==null;){if(ee.callback===null)r(y);else if(ee.startTime<=Q)r(y),ee.sortIndex=ee.expirationTime,t(p,ee);else break;ee=n(y)}}function _(Q){if(I=!1,b(Q),!$)if(n(p)!==null)$=!0,we(G);else{var ee=n(y);ee!==null&&le(_,ee.startTime-Q)}}function G(Q,ee){$=!1,I&&(I=!1,x(L),L=-1),W=!0;var Z=E;try{for(b(ee),S=n(p);S!==null&&(!(S.expirationTime>ee)||Q&&!T());){var he=S.callback;if(typeof he=="function"){S.callback=null,E=S.priorityLevel;var ke=he(S.expirationTime<=ee);ee=e.unstable_now(),typeof ke=="function"?S.callback=ke:S===n(p)&&r(p),b(ee)}else r(p);S=n(p)}if(S!==null)var Le=!0;else{var Ae=n(y);Ae!==null&&le(_,Ae.startTime-ee),Le=!1}return Le}finally{S=null,E=Z,W=!1}}var z=!1,N=null,L=-1,H=5,O=-1;function T(){return!(e.unstable_now()-O<H)}function X(){if(N!==null){var Q=e.unstable_now();O=Q;var ee=!0;try{ee=N(!0,Q)}finally{ee?te():(z=!1,N=null)}}else z=!1}var te;if(typeof v=="function")te=function(){v(X)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,xe=oe.port2;oe.port1.onmessage=X,te=function(){xe.postMessage(null)}}else te=function(){V(X,0)};function we(Q){N=Q,z||(z=!0,te())}function le(Q,ee){L=V(function(){Q(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){$||W||($=!0,we(G))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(Q){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var Z=E;E=ee;try{return Q()}finally{E=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Z=E;E=Q;try{return ee()}finally{E=Z}},e.unstable_scheduleCallback=function(Q,ee,Z){var he=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?he+Z:he):Z=he,Q){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=Z+ke,Q={id:j++,callback:ee,priorityLevel:Q,startTime:Z,expirationTime:ke,sortIndex:-1},Z>he?(Q.sortIndex=Z,t(y,Q),n(p)===null&&Q===n(y)&&(I?(x(L),L=-1):I=!0,le(_,Z-he))):(Q.sortIndex=ke,t(p,Q),$||W||($=!0,we(G))),Q},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(Q){var ee=E;return function(){var Z=E;E=ee;try{return Q.apply(this,arguments)}finally{E=Z}}}})(If);Bf.exports=If;var Hm=Bf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=k,qt=Hm;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Of=new Set,Ji={};function Pr(e,t){ci(e,t),ci(e+"Capture",t)}function ci(e,t){for(Ji[e]=t,e=0;e<t.length;e++)Of.add(t[e])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_l=Object.prototype.hasOwnProperty,Qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,id={},sd={};function Xm(e){return _l.call(sd,e)?!0:_l.call(id,e)?!1:Qm.test(e)?sd[e]=!0:(id[e]=!0,!1)}function Zm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jm(e,t,n,r){if(t===null||typeof t>"u"||Zm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dt(e,t,n,r,a,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ac=/[\-:]([a-z])/g;function Pc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ac,Pc);vt[t]=new Dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ac,Pc);vt[t]=new Dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ac,Pc);vt[t]=new Dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function _c(e,t,n,r){var a=vt.hasOwnProperty(t)?vt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jm(t,n,a,r)&&(n=null),r||a===null?Xm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=Ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),Ur=Symbol.for("react.portal"),qr=Symbol.for("react.fragment"),Dc=Symbol.for("react.strict_mode"),Dl=Symbol.for("react.profiler"),zf=Symbol.for("react.provider"),Lf=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Rc=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),$f=Symbol.for("react.offscreen"),ad=Symbol.iterator;function Pi(e){return e===null||typeof e!="object"?null:(e=ad&&e[ad]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,nl;function Li(e){if(nl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nl=t&&t[1]||""}return`
`+nl+e}var rl=!1;function il(e,t){if(!e||rl)return"";rl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),o=r.stack.split(`
`),u=a.length-1,h=o.length-1;1<=u&&0<=h&&a[u]!==o[h];)h--;for(;1<=u&&0<=h;u--,h--)if(a[u]!==o[h]){if(u!==1||h!==1)do if(u--,h--,0>h||a[u]!==o[h]){var p=`
`+a[u].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=u&&0<=h);break}}}finally{rl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Li(e):""}function e0(e){switch(e.tag){case 5:return Li(e.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return e=il(e.type,!1),e;case 11:return e=il(e.type.render,!1),e;case 1:return e=il(e.type,!0),e;default:return""}}function Ml(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qr:return"Fragment";case Ur:return"Portal";case Dl:return"Profiler";case Dc:return"StrictMode";case Fl:return"Suspense";case Rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lf:return(e.displayName||"Context")+".Consumer";case zf:return(e._context.displayName||"Context")+".Provider";case Fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rc:return t=e.displayName||null,t!==null?t:Ml(e.type)||"Memo";case Gn:t=e._payload,e=e._init;try{return Ml(e(t))}catch{}}return null}function t0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ml(t);case 8:return t===Dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n0(e){var t=Vf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hs(e){e._valueTracker||(e._valueTracker=n0(e))}function Gf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bl(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function od(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=rr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wf(e,t){t=t.checked,t!=null&&_c(e,"checked",t,!1)}function Il(e,t){Wf(e,t);var n=rr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ol(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ol(e,t.type,rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ld(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ol(e,t,n){(t!=="number"||Da(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $i=Array.isArray;function ri(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+rr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function zl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if($i(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:rr(n)}}function Uf(e,t){var n=rr(t.value),r=rr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ud(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,Kf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function es(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r0=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(e){r0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wi[t]=Wi[e]})});function Hf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wi.hasOwnProperty(e)&&Wi[e]?(""+t).trim():t+"px"}function Yf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Hf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var i0=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $l(e,t){if(t){if(i0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Vl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function Mc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wl=null,ii=null,si=null;function dd(e){if(e=xs(e)){if(typeof Wl!="function")throw Error(se(280));var t=e.stateNode;t&&(t=lo(t),Wl(e.stateNode,e.type,t))}}function Qf(e){ii?si?si.push(e):si=[e]:ii=e}function Xf(){if(ii){var e=ii,t=si;if(si=ii=null,dd(e),t)for(e=0;e<t.length;e++)dd(t[e])}}function Zf(e,t){return e(t)}function Jf(){}var sl=!1;function eh(e,t,n){if(sl)return e(t,n);sl=!0;try{return Zf(e,t,n)}finally{sl=!1,(ii!==null||si!==null)&&(Jf(),Xf())}}function ts(e,t){var n=e.stateNode;if(n===null)return null;var r=lo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var Ul=!1;if(Pn)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{Ul=!1}function s0(e,t,n,r,a,o,u,h,p){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(j){this.onError(j)}}var Ui=!1,Fa=null,Ra=!1,ql=null,a0={onError:function(e){Ui=!0,Fa=e}};function o0(e,t,n,r,a,o,u,h,p){Ui=!1,Fa=null,s0.apply(a0,arguments)}function l0(e,t,n,r,a,o,u,h,p){if(o0.apply(this,arguments),Ui){if(Ui){var y=Fa;Ui=!1,Fa=null}else throw Error(se(198));Ra||(Ra=!0,ql=y)}}function _r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function th(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fd(e){if(_r(e)!==e)throw Error(se(188))}function c0(e){var t=e.alternate;if(!t){if(t=_r(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return fd(a),e;if(o===r)return fd(a),t;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=a,r=o;else{for(var u=!1,h=a.child;h;){if(h===n){u=!0,n=a,r=o;break}if(h===r){u=!0,r=a,n=o;break}h=h.sibling}if(!u){for(h=o.child;h;){if(h===n){u=!0,n=o,r=a;break}if(h===r){u=!0,r=o,n=a;break}h=h.sibling}if(!u)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function nh(e){return e=c0(e),e!==null?rh(e):null}function rh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rh(e);if(t!==null)return t;e=e.sibling}return null}var ih=qt.unstable_scheduleCallback,hd=qt.unstable_cancelCallback,u0=qt.unstable_shouldYield,d0=qt.unstable_requestPaint,st=qt.unstable_now,f0=qt.unstable_getCurrentPriorityLevel,Bc=qt.unstable_ImmediatePriority,sh=qt.unstable_UserBlockingPriority,Ma=qt.unstable_NormalPriority,h0=qt.unstable_LowPriority,ah=qt.unstable_IdlePriority,io=null,wn=null;function p0(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:y0,m0=Math.log,g0=Math.LN2;function y0(e){return e>>>=0,e===0?32:31-(m0(e)/g0|0)|0}var Qs=64,Xs=4194304;function Vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ba(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,u=n&268435455;if(u!==0){var h=u&~a;h!==0?r=Vi(h):(o&=u,o!==0&&(r=Vi(o)))}else u=n&~a,u!==0?r=Vi(u):o!==0&&(r=Vi(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dn(t),a=1<<n,r|=e[n],t&=~a;return r}function v0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-dn(o),h=1<<u,p=a[u];p===-1?(!(h&n)||h&r)&&(a[u]=v0(h,t)):p<=t&&(e.expiredLanes|=h),o&=~h}}function Kl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oh(){var e=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),e}function al(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ys(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dn(t),e[t]=n}function w0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-dn(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function Ic(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ze=0;function lh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ch,Oc,uh,dh,fh,Hl=!1,Zs=[],Yn=null,Qn=null,Xn=null,ns=new Map,rs=new Map,Un=[],b0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pd(e,t){switch(e){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(t.pointerId)}}function Di(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=xs(t),t!==null&&Oc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function k0(e,t,n,r,a){switch(t){case"focusin":return Yn=Di(Yn,e,t,n,r,a),!0;case"dragenter":return Qn=Di(Qn,e,t,n,r,a),!0;case"mouseover":return Xn=Di(Xn,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return ns.set(o,Di(ns.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,rs.set(o,Di(rs.get(o)||null,e,t,n,r,a)),!0}return!1}function hh(e){var t=vr(e.target);if(t!==null){var n=_r(t);if(n!==null){if(t=n.tag,t===13){if(t=th(n),t!==null){e.blockedOn=t,fh(e.priority,function(){uh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Gl=r,n.target.dispatchEvent(r),Gl=null}else return t=xs(n),t!==null&&Oc(t),e.blockedOn=n,!1;t.shift()}return!0}function md(e,t,n){xa(e)&&n.delete(t)}function C0(){Hl=!1,Yn!==null&&xa(Yn)&&(Yn=null),Qn!==null&&xa(Qn)&&(Qn=null),Xn!==null&&xa(Xn)&&(Xn=null),ns.forEach(md),rs.forEach(md)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,Hl||(Hl=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,C0)))}function is(e){function t(a){return Fi(a,e)}if(0<Zs.length){Fi(Zs[0],e);for(var n=1;n<Zs.length;n++){var r=Zs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yn!==null&&Fi(Yn,e),Qn!==null&&Fi(Qn,e),Xn!==null&&Fi(Xn,e),ns.forEach(t),rs.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)hh(n),n.blockedOn===null&&Un.shift()}var ai=Rn.ReactCurrentBatchConfig,Ia=!0;function S0(e,t,n,r){var a=ze,o=ai.transition;ai.transition=null;try{ze=1,zc(e,t,n,r)}finally{ze=a,ai.transition=o}}function j0(e,t,n,r){var a=ze,o=ai.transition;ai.transition=null;try{ze=4,zc(e,t,n,r)}finally{ze=a,ai.transition=o}}function zc(e,t,n,r){if(Ia){var a=Yl(e,t,n,r);if(a===null)gl(e,t,r,Oa,n),pd(e,r);else if(k0(a,e,t,n,r))r.stopPropagation();else if(pd(e,r),t&4&&-1<b0.indexOf(e)){for(;a!==null;){var o=xs(a);if(o!==null&&ch(o),o=Yl(e,t,n,r),o===null&&gl(e,t,r,Oa,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else gl(e,t,r,null,n)}}var Oa=null;function Yl(e,t,n,r){if(Oa=null,e=Mc(r),e=vr(e),e!==null)if(t=_r(e),t===null)e=null;else if(n=t.tag,n===13){if(e=th(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oa=e,null}function ph(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f0()){case Bc:return 1;case sh:return 4;case Ma:case h0:return 16;case ah:return 536870912;default:return 16}default:return 16}}var Kn=null,Lc=null,wa=null;function mh(){if(wa)return wa;var e,t=Lc,n=t.length,r,a="value"in Kn?Kn.value:Kn.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===a[o-r];r++);return wa=a.slice(e,1<r?1-r:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function gd(){return!1}function Ht(e){function t(n,r,a,o,u){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Js:gd,this.isPropagationStopped=gd,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=Ht(yi),vs=Ze({},yi,{view:0,detail:0}),T0=Ht(vs),ol,ll,Ri,so=Ze({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(ol=e.screenX-Ri.screenX,ll=e.screenY-Ri.screenY):ll=ol=0,Ri=e),ol)},movementY:function(e){return"movementY"in e?e.movementY:ll}}),yd=Ht(so),E0=Ze({},so,{dataTransfer:0}),N0=Ht(E0),A0=Ze({},vs,{relatedTarget:0}),cl=Ht(A0),P0=Ze({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=Ht(P0),D0=Ze({},yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F0=Ht(D0),R0=Ze({},yi,{data:0}),vd=Ht(R0),M0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I0[e])?!!t[e]:!1}function Vc(){return O0}var z0=Ze({},vs,{key:function(e){if(e.key){var t=M0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?B0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vc,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),L0=Ht(z0),$0=Ze({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xd=Ht($0),V0=Ze({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vc}),G0=Ht(V0),W0=Ze({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U0=Ht(W0),q0=Ze({},so,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=Ht(q0),H0=[9,13,27,32],Gc=Pn&&"CompositionEvent"in window,qi=null;Pn&&"documentMode"in document&&(qi=document.documentMode);var Y0=Pn&&"TextEvent"in window&&!qi,gh=Pn&&(!Gc||qi&&8<qi&&11>=qi),wd=" ",bd=!1;function yh(e,t){switch(e){case"keyup":return H0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function Q0(e,t){switch(e){case"compositionend":return vh(t);case"keypress":return t.which!==32?null:(bd=!0,wd);case"textInput":return e=t.data,e===wd&&bd?null:e;default:return null}}function X0(e,t){if(Kr)return e==="compositionend"||!Gc&&yh(e,t)?(e=mh(),wa=Lc=Kn=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gh&&t.locale!=="ko"?null:t.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z0[e.type]:t==="textarea"}function xh(e,t,n,r){Qf(r),t=za(t,"onChange"),0<t.length&&(n=new $c("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ki=null,ss=null;function J0(e){Ph(e,0)}function ao(e){var t=Qr(e);if(Gf(t))return e}function eg(e,t){if(e==="change")return t}var wh=!1;if(Pn){var ul;if(Pn){var dl="oninput"in document;if(!dl){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),dl=typeof Cd.oninput=="function"}ul=dl}else ul=!1;wh=ul&&(!document.documentMode||9<document.documentMode)}function Sd(){Ki&&(Ki.detachEvent("onpropertychange",bh),ss=Ki=null)}function bh(e){if(e.propertyName==="value"&&ao(ss)){var t=[];xh(t,ss,e,Mc(e)),eh(J0,t)}}function tg(e,t,n){e==="focusin"?(Sd(),Ki=t,ss=n,Ki.attachEvent("onpropertychange",bh)):e==="focusout"&&Sd()}function ng(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(ss)}function rg(e,t){if(e==="click")return ao(t)}function ig(e,t){if(e==="input"||e==="change")return ao(t)}function sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:sg;function as(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!_l.call(t,a)||!hn(e[a],t[a]))return!1}return!0}function jd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Td(e,t){var n=jd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jd(n)}}function kh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ch(){for(var e=window,t=Da();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Da(e.document)}return t}function Wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ag(e){var t=Ch(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kh(n.ownerDocument.documentElement,n)){if(r!==null&&Wc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=Td(n,o);var u=Td(n,r);a&&u&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var og=Pn&&"documentMode"in document&&11>=document.documentMode,Hr=null,Ql=null,Hi=null,Xl=!1;function Ed(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xl||Hr==null||Hr!==Da(r)||(r=Hr,"selectionStart"in r&&Wc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hi&&as(Hi,r)||(Hi=r,r=za(Ql,"onSelect"),0<r.length&&(t=new $c("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hr)))}function ea(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yr={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},fl={},Sh={};Pn&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function oo(e){if(fl[e])return fl[e];if(!Yr[e])return e;var t=Yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sh)return fl[e]=t[n];return e}var jh=oo("animationend"),Th=oo("animationiteration"),Eh=oo("animationstart"),Nh=oo("transitionend"),Ah=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(e,t){Ah.set(e,t),Pr(t,[e])}for(var hl=0;hl<Nd.length;hl++){var pl=Nd[hl],lg=pl.toLowerCase(),cg=pl[0].toUpperCase()+pl.slice(1);sr(lg,"on"+cg)}sr(jh,"onAnimationEnd");sr(Th,"onAnimationIteration");sr(Eh,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(Nh,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function Ad(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,l0(r,t,void 0,e),e.currentTarget=null}function Ph(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var u=r.length-1;0<=u;u--){var h=r[u],p=h.instance,y=h.currentTarget;if(h=h.listener,p!==o&&a.isPropagationStopped())break e;Ad(a,h,y),o=p}else for(u=0;u<r.length;u++){if(h=r[u],p=h.instance,y=h.currentTarget,h=h.listener,p!==o&&a.isPropagationStopped())break e;Ad(a,h,y),o=p}}}if(Ra)throw e=ql,Ra=!1,ql=null,e}function Ge(e,t){var n=t[nc];n===void 0&&(n=t[nc]=new Set);var r=e+"__bubble";n.has(r)||(_h(t,e,2,!1),n.add(r))}function ml(e,t,n){var r=0;t&&(r|=4),_h(n,e,r,t)}var ta="_reactListening"+Math.random().toString(36).slice(2);function os(e){if(!e[ta]){e[ta]=!0,Of.forEach(function(n){n!=="selectionchange"&&(ug.has(n)||ml(n,!1,e),ml(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ta]||(t[ta]=!0,ml("selectionchange",!1,t))}}function _h(e,t,n,r){switch(ph(t)){case 1:var a=S0;break;case 4:a=j0;break;default:a=zc}n=a.bind(null,t,n,e),a=void 0,!Ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function gl(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(u===4)for(u=r.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;u=u.return}for(;h!==null;){if(u=vr(h),u===null)return;if(p=u.tag,p===5||p===6){r=o=u;continue e}h=h.parentNode}}r=r.return}eh(function(){var y=o,j=Mc(n),S=[];e:{var E=Ah.get(e);if(E!==void 0){var W=$c,$=e;switch(e){case"keypress":if(ba(n)===0)break e;case"keydown":case"keyup":W=L0;break;case"focusin":$="focus",W=cl;break;case"focusout":$="blur",W=cl;break;case"beforeblur":case"afterblur":W=cl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=N0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=G0;break;case jh:case Th:case Eh:W=_0;break;case Nh:W=U0;break;case"scroll":W=T0;break;case"wheel":W=K0;break;case"copy":case"cut":case"paste":W=F0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=xd}var I=(t&4)!==0,V=!I&&e==="scroll",x=I?E!==null?E+"Capture":null:E;I=[];for(var v=y,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,x!==null&&(_=ts(v,x),_!=null&&I.push(ls(v,_,b)))),V)break;v=v.return}0<I.length&&(E=new W(E,$,null,n,j),S.push({event:E,listeners:I}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",E&&n!==Gl&&($=n.relatedTarget||n.fromElement)&&(vr($)||$[_n]))break e;if((W||E)&&(E=j.window===j?j:(E=j.ownerDocument)?E.defaultView||E.parentWindow:window,W?($=n.relatedTarget||n.toElement,W=y,$=$?vr($):null,$!==null&&(V=_r($),$!==V||$.tag!==5&&$.tag!==6)&&($=null)):(W=null,$=y),W!==$)){if(I=yd,_="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(I=xd,_="onPointerLeave",x="onPointerEnter",v="pointer"),V=W==null?E:Qr(W),b=$==null?E:Qr($),E=new I(_,v+"leave",W,n,j),E.target=V,E.relatedTarget=b,_=null,vr(j)===y&&(I=new I(x,v+"enter",$,n,j),I.target=b,I.relatedTarget=V,_=I),V=_,W&&$)t:{for(I=W,x=$,v=0,b=I;b;b=Vr(b))v++;for(b=0,_=x;_;_=Vr(_))b++;for(;0<v-b;)I=Vr(I),v--;for(;0<b-v;)x=Vr(x),b--;for(;v--;){if(I===x||x!==null&&I===x.alternate)break t;I=Vr(I),x=Vr(x)}I=null}else I=null;W!==null&&Pd(S,E,W,I,!1),$!==null&&V!==null&&Pd(S,V,$,I,!0)}}e:{if(E=y?Qr(y):window,W=E.nodeName&&E.nodeName.toLowerCase(),W==="select"||W==="input"&&E.type==="file")var G=eg;else if(kd(E))if(wh)G=ig;else{G=ng;var z=tg}else(W=E.nodeName)&&W.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(G=rg);if(G&&(G=G(e,y))){xh(S,G,n,j);break e}z&&z(e,E,y),e==="focusout"&&(z=E._wrapperState)&&z.controlled&&E.type==="number"&&Ol(E,"number",E.value)}switch(z=y?Qr(y):window,e){case"focusin":(kd(z)||z.contentEditable==="true")&&(Hr=z,Ql=y,Hi=null);break;case"focusout":Hi=Ql=Hr=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,Ed(S,n,j);break;case"selectionchange":if(og)break;case"keydown":case"keyup":Ed(S,n,j)}var N;if(Gc)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Kr?yh(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(gh&&n.locale!=="ko"&&(Kr||L!=="onCompositionStart"?L==="onCompositionEnd"&&Kr&&(N=mh()):(Kn=j,Lc="value"in Kn?Kn.value:Kn.textContent,Kr=!0)),z=za(y,L),0<z.length&&(L=new vd(L,e,null,n,j),S.push({event:L,listeners:z}),N?L.data=N:(N=vh(n),N!==null&&(L.data=N)))),(N=Y0?Q0(e,n):X0(e,n))&&(y=za(y,"onBeforeInput"),0<y.length&&(j=new vd("onBeforeInput","beforeinput",null,n,j),S.push({event:j,listeners:y}),j.data=N))}Ph(S,t)})}function ls(e,t,n){return{instance:e,listener:t,currentTarget:n}}function za(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=ts(e,n),o!=null&&r.unshift(ls(e,o,a)),o=ts(e,t),o!=null&&r.push(ls(e,o,a))),e=e.return}return r}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pd(e,t,n,r,a){for(var o=t._reactName,u=[];n!==null&&n!==r;){var h=n,p=h.alternate,y=h.stateNode;if(p!==null&&p===r)break;h.tag===5&&y!==null&&(h=y,a?(p=ts(n,o),p!=null&&u.unshift(ls(n,p,h))):a||(p=ts(n,o),p!=null&&u.push(ls(n,p,h)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var dg=/\r\n?/g,fg=/\u0000|\uFFFD/g;function _d(e){return(typeof e=="string"?e:""+e).replace(dg,`
`).replace(fg,"")}function na(e,t,n){if(t=_d(t),_d(e)!==t&&n)throw Error(se(425))}function La(){}var Zl=null,Jl=null;function ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,hg=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,pg=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(mg)}:tc;function mg(e){setTimeout(function(){throw e})}function yl(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),is(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);is(t)}function Zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var vi=Math.random().toString(36).slice(2),xn="__reactFiber$"+vi,cs="__reactProps$"+vi,_n="__reactContainer$"+vi,nc="__reactEvents$"+vi,gg="__reactListeners$"+vi,yg="__reactHandles$"+vi;function vr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_n]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fd(e);e!==null;){if(n=e[xn])return n;e=Fd(e)}return t}e=n,n=e.parentNode}return null}function xs(e){return e=e[xn]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function lo(e){return e[cs]||null}var rc=[],Xr=-1;function ar(e){return{current:e}}function We(e){0>Xr||(e.current=rc[Xr],rc[Xr]=null,Xr--)}function Ve(e,t){Xr++,rc[Xr]=e.current,e.current=t}var ir={},jt=ar(ir),Ot=ar(!1),jr=ir;function ui(e,t){var n=e.type.contextTypes;if(!n)return ir;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zt(e){return e=e.childContextTypes,e!=null}function $a(){We(Ot),We(jt)}function Rd(e,t,n){if(jt.current!==ir)throw Error(se(168));Ve(jt,t),Ve(Ot,n)}function Dh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(se(108,t0(e)||"Unknown",a));return Ze({},n,r)}function Va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ir,jr=jt.current,Ve(jt,e),Ve(Ot,Ot.current),!0}function Md(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=Dh(e,t,jr),r.__reactInternalMemoizedMergedChildContext=e,We(Ot),We(jt),Ve(jt,e)):We(Ot),Ve(Ot,n)}var jn=null,co=!1,vl=!1;function Fh(e){jn===null?jn=[e]:jn.push(e)}function vg(e){co=!0,Fh(e)}function or(){if(!vl&&jn!==null){vl=!0;var e=0,t=ze;try{var n=jn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,co=!1}catch(a){throw jn!==null&&(jn=jn.slice(e+1)),ih(Bc,or),a}finally{ze=t,vl=!1}}return null}var Zr=[],Jr=0,Ga=null,Wa=0,Qt=[],Xt=0,Tr=null,En=1,Nn="";function gr(e,t){Zr[Jr++]=Wa,Zr[Jr++]=Ga,Ga=e,Wa=t}function Rh(e,t,n){Qt[Xt++]=En,Qt[Xt++]=Nn,Qt[Xt++]=Tr,Tr=e;var r=En;e=Nn;var a=32-dn(r)-1;r&=~(1<<a),n+=1;var o=32-dn(t)+a;if(30<o){var u=a-a%5;o=(r&(1<<u)-1).toString(32),r>>=u,a-=u,En=1<<32-dn(t)+a|n<<a|r,Nn=o+e}else En=1<<o|n<<a|r,Nn=e}function Uc(e){e.return!==null&&(gr(e,1),Rh(e,1,0))}function qc(e){for(;e===Ga;)Ga=Zr[--Jr],Zr[Jr]=null,Wa=Zr[--Jr],Zr[Jr]=null;for(;e===Tr;)Tr=Qt[--Xt],Qt[Xt]=null,Nn=Qt[--Xt],Qt[Xt]=null,En=Qt[--Xt],Qt[Xt]=null}var Ut=null,Wt=null,Ke=!1,cn=null;function Mh(e,t){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ut=e,Wt=Zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ut=e,Wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Tr!==null?{id:En,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ut=e,Wt=null,!0):!1;default:return!1}}function ic(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sc(e){if(Ke){var t=Wt;if(t){var n=t;if(!Bd(e,t)){if(ic(e))throw Error(se(418));t=Zn(n.nextSibling);var r=Ut;t&&Bd(e,t)?Mh(r,n):(e.flags=e.flags&-4097|2,Ke=!1,Ut=e)}}else{if(ic(e))throw Error(se(418));e.flags=e.flags&-4097|2,Ke=!1,Ut=e}}}function Id(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ut=e}function ra(e){if(e!==Ut)return!1;if(!Ke)return Id(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ec(e.type,e.memoizedProps)),t&&(t=Wt)){if(ic(e))throw Bh(),Error(se(418));for(;t;)Mh(e,t),t=Zn(t.nextSibling)}if(Id(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wt=Zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wt=null}}else Wt=Ut?Zn(e.stateNode.nextSibling):null;return!0}function Bh(){for(var e=Wt;e;)e=Zn(e.nextSibling)}function di(){Wt=Ut=null,Ke=!1}function Kc(e){cn===null?cn=[e]:cn.push(e)}var xg=Rn.ReactCurrentBatchConfig;function Mi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var h=a.refs;u===null?delete h[o]:h[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function ia(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Od(e){var t=e._init;return t(e._payload)}function Ih(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function a(x,v){return x=nr(x,v),x.index=0,x.sibling=null,x}function o(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function u(x){return e&&x.alternate===null&&(x.flags|=2),x}function h(x,v,b,_){return v===null||v.tag!==6?(v=jl(b,x.mode,_),v.return=x,v):(v=a(v,b),v.return=x,v)}function p(x,v,b,_){var G=b.type;return G===qr?j(x,v,b.props.children,_,b.key):v!==null&&(v.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Gn&&Od(G)===v.type)?(_=a(v,b.props),_.ref=Mi(x,v,b),_.return=x,_):(_=Na(b.type,b.key,b.props,null,x.mode,_),_.ref=Mi(x,v,b),_.return=x,_)}function y(x,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Tl(b,x.mode,_),v.return=x,v):(v=a(v,b.children||[]),v.return=x,v)}function j(x,v,b,_,G){return v===null||v.tag!==7?(v=kr(b,x.mode,_,G),v.return=x,v):(v=a(v,b),v.return=x,v)}function S(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=jl(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ks:return b=Na(v.type,v.key,v.props,null,x.mode,b),b.ref=Mi(x,null,v),b.return=x,b;case Ur:return v=Tl(v,x.mode,b),v.return=x,v;case Gn:var _=v._init;return S(x,_(v._payload),b)}if($i(v)||Pi(v))return v=kr(v,x.mode,b,null),v.return=x,v;ia(x,v)}return null}function E(x,v,b,_){var G=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return G!==null?null:h(x,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ks:return b.key===G?p(x,v,b,_):null;case Ur:return b.key===G?y(x,v,b,_):null;case Gn:return G=b._init,E(x,v,G(b._payload),_)}if($i(b)||Pi(b))return G!==null?null:j(x,v,b,_,null);ia(x,b)}return null}function W(x,v,b,_,G){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(b)||null,h(v,x,""+_,G);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ks:return x=x.get(_.key===null?b:_.key)||null,p(v,x,_,G);case Ur:return x=x.get(_.key===null?b:_.key)||null,y(v,x,_,G);case Gn:var z=_._init;return W(x,v,b,z(_._payload),G)}if($i(_)||Pi(_))return x=x.get(b)||null,j(v,x,_,G,null);ia(v,_)}return null}function $(x,v,b,_){for(var G=null,z=null,N=v,L=v=0,H=null;N!==null&&L<b.length;L++){N.index>L?(H=N,N=null):H=N.sibling;var O=E(x,N,b[L],_);if(O===null){N===null&&(N=H);break}e&&N&&O.alternate===null&&t(x,N),v=o(O,v,L),z===null?G=O:z.sibling=O,z=O,N=H}if(L===b.length)return n(x,N),Ke&&gr(x,L),G;if(N===null){for(;L<b.length;L++)N=S(x,b[L],_),N!==null&&(v=o(N,v,L),z===null?G=N:z.sibling=N,z=N);return Ke&&gr(x,L),G}for(N=r(x,N);L<b.length;L++)H=W(N,x,L,b[L],_),H!==null&&(e&&H.alternate!==null&&N.delete(H.key===null?L:H.key),v=o(H,v,L),z===null?G=H:z.sibling=H,z=H);return e&&N.forEach(function(T){return t(x,T)}),Ke&&gr(x,L),G}function I(x,v,b,_){var G=Pi(b);if(typeof G!="function")throw Error(se(150));if(b=G.call(b),b==null)throw Error(se(151));for(var z=G=null,N=v,L=v=0,H=null,O=b.next();N!==null&&!O.done;L++,O=b.next()){N.index>L?(H=N,N=null):H=N.sibling;var T=E(x,N,O.value,_);if(T===null){N===null&&(N=H);break}e&&N&&T.alternate===null&&t(x,N),v=o(T,v,L),z===null?G=T:z.sibling=T,z=T,N=H}if(O.done)return n(x,N),Ke&&gr(x,L),G;if(N===null){for(;!O.done;L++,O=b.next())O=S(x,O.value,_),O!==null&&(v=o(O,v,L),z===null?G=O:z.sibling=O,z=O);return Ke&&gr(x,L),G}for(N=r(x,N);!O.done;L++,O=b.next())O=W(N,x,L,O.value,_),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?L:O.key),v=o(O,v,L),z===null?G=O:z.sibling=O,z=O);return e&&N.forEach(function(X){return t(x,X)}),Ke&&gr(x,L),G}function V(x,v,b,_){if(typeof b=="object"&&b!==null&&b.type===qr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ks:e:{for(var G=b.key,z=v;z!==null;){if(z.key===G){if(G=b.type,G===qr){if(z.tag===7){n(x,z.sibling),v=a(z,b.props.children),v.return=x,x=v;break e}}else if(z.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Gn&&Od(G)===z.type){n(x,z.sibling),v=a(z,b.props),v.ref=Mi(x,z,b),v.return=x,x=v;break e}n(x,z);break}else t(x,z);z=z.sibling}b.type===qr?(v=kr(b.props.children,x.mode,_,b.key),v.return=x,x=v):(_=Na(b.type,b.key,b.props,null,x.mode,_),_.ref=Mi(x,v,b),_.return=x,x=_)}return u(x);case Ur:e:{for(z=b.key;v!==null;){if(v.key===z)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=a(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Tl(b,x.mode,_),v.return=x,x=v}return u(x);case Gn:return z=b._init,V(x,v,z(b._payload),_)}if($i(b))return $(x,v,b,_);if(Pi(b))return I(x,v,b,_);ia(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=a(v,b),v.return=x,x=v):(n(x,v),v=jl(b,x.mode,_),v.return=x,x=v),u(x)):n(x,v)}return V}var fi=Ih(!0),Oh=Ih(!1),Ua=ar(null),qa=null,ei=null,Hc=null;function Yc(){Hc=ei=qa=null}function Qc(e){var t=Ua.current;We(Ua),e._currentValue=t}function ac(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function oi(e,t){qa=e,Hc=ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function tn(e){var t=e._currentValue;if(Hc!==e)if(e={context:e,memoizedValue:t,next:null},ei===null){if(qa===null)throw Error(se(308));ei=e,qa.dependencies={lanes:0,firstContext:e}}else ei=ei.next=e;return t}var xr=null;function Xc(e){xr===null?xr=[e]:xr.push(e)}function zh(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Xc(t)):(n.next=a.next,a.next=n),t.interleaved=n,Dn(e,r)}function Dn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Dn(e,n)}return a=r.interleaved,a===null?(t.next=t,Xc(r)):(t.next=a.next,a.next=t),r.interleaved=t,Dn(e,n)}function ka(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ic(e,n)}}function zd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ka(e,t,n,r){var a=e.updateQueue;Wn=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var p=h,y=p.next;p.next=null,u===null?o=y:u.next=y,u=p;var j=e.alternate;j!==null&&(j=j.updateQueue,h=j.lastBaseUpdate,h!==u&&(h===null?j.firstBaseUpdate=y:h.next=y,j.lastBaseUpdate=p))}if(o!==null){var S=a.baseState;u=0,j=y=p=null,h=o;do{var E=h.lane,W=h.eventTime;if((r&E)===E){j!==null&&(j=j.next={eventTime:W,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var $=e,I=h;switch(E=t,W=n,I.tag){case 1:if($=I.payload,typeof $=="function"){S=$.call(W,S,E);break e}S=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=I.payload,E=typeof $=="function"?$.call(W,S,E):$,E==null)break e;S=Ze({},S,E);break e;case 2:Wn=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,E=a.effects,E===null?a.effects=[h]:E.push(h))}else W={eventTime:W,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},j===null?(y=j=W,p=S):j=j.next=W,u|=E;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;E=h,h=E.next,E.next=null,a.lastBaseUpdate=E,a.shared.pending=null}}while(!0);if(j===null&&(p=S),a.baseState=p,a.firstBaseUpdate=y,a.lastBaseUpdate=j,t=a.shared.interleaved,t!==null){a=t;do u|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Nr|=u,e.lanes=u,e.memoizedState=S}}function Ld(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(se(191,a));a.call(r)}}}var ws={},bn=ar(ws),us=ar(ws),ds=ar(ws);function wr(e){if(e===ws)throw Error(se(174));return e}function Jc(e,t){switch(Ve(ds,t),Ve(us,e),Ve(bn,ws),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ll(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ll(t,e)}We(bn),Ve(bn,t)}function hi(){We(bn),We(us),We(ds)}function $h(e){wr(ds.current);var t=wr(bn.current),n=Ll(t,e.type);t!==n&&(Ve(us,e),Ve(bn,n))}function eu(e){us.current===e&&(We(bn),We(us))}var Qe=ar(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xl=[];function tu(){for(var e=0;e<xl.length;e++)xl[e]._workInProgressVersionPrimary=null;xl.length=0}var Ca=Rn.ReactCurrentDispatcher,wl=Rn.ReactCurrentBatchConfig,Er=0,Xe=null,ct=null,ht=null,Ya=!1,Yi=!1,fs=0,wg=0;function bt(){throw Error(se(321))}function nu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hn(e[n],t[n]))return!1;return!0}function ru(e,t,n,r,a,o){if(Er=o,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ca.current=e===null||e.memoizedState===null?Sg:jg,e=n(r,a),Yi){o=0;do{if(Yi=!1,fs=0,25<=o)throw Error(se(301));o+=1,ht=ct=null,t.updateQueue=null,Ca.current=Tg,e=n(r,a)}while(Yi)}if(Ca.current=Qa,t=ct!==null&&ct.next!==null,Er=0,ht=ct=Xe=null,Ya=!1,t)throw Error(se(300));return e}function iu(){var e=fs!==0;return fs=0,e}function vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Xe.memoizedState=ht=e:ht=ht.next=e,ht}function nn(){if(ct===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=ht===null?Xe.memoizedState:ht.next;if(t!==null)ht=t,ct=e;else{if(e===null)throw Error(se(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ht===null?Xe.memoizedState=ht=e:ht=ht.next=e}return ht}function hs(e,t){return typeof t=="function"?t(e):t}function bl(e){var t=nn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=ct,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var u=a.next;a.next=o.next,o.next=u}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var h=u=null,p=null,y=o;do{var j=y.lane;if((Er&j)===j)p!==null&&(p=p.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var S={lane:j,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};p===null?(h=p=S,u=r):p=p.next=S,Xe.lanes|=j,Nr|=j}y=y.next}while(y!==null&&y!==o);p===null?u=r:p.next=h,hn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=p,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Xe.lanes|=o,Nr|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function kl(e){var t=nn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var u=a=a.next;do o=e(o,u.action),u=u.next;while(u!==a);hn(o,t.memoizedState)||(It=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Vh(){}function Gh(e,t){var n=Xe,r=nn(),a=t(),o=!hn(r.memoizedState,a);if(o&&(r.memoizedState=a,It=!0),r=r.queue,su(qh.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,ps(9,Uh.bind(null,n,r,a,t),void 0,null),pt===null)throw Error(se(349));Er&30||Wh(n,t,a)}return a}function Wh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Uh(e,t,n,r){t.value=n,t.getSnapshot=r,Kh(t)&&Hh(e)}function qh(e,t,n){return n(function(){Kh(t)&&Hh(e)})}function Kh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hn(e,n)}catch{return!0}}function Hh(e){var t=Dn(e,1);t!==null&&fn(t,e,1,-1)}function $d(e){var t=vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:e},t.queue=e,e=e.dispatch=Cg.bind(null,Xe,e),[t.memoizedState,e]}function ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Yh(){return nn().memoizedState}function Sa(e,t,n,r){var a=vn();Xe.flags|=e,a.memoizedState=ps(1|t,n,void 0,r===void 0?null:r)}function uo(e,t,n,r){var a=nn();r=r===void 0?null:r;var o=void 0;if(ct!==null){var u=ct.memoizedState;if(o=u.destroy,r!==null&&nu(r,u.deps)){a.memoizedState=ps(t,n,o,r);return}}Xe.flags|=e,a.memoizedState=ps(1|t,n,o,r)}function Vd(e,t){return Sa(8390656,8,e,t)}function su(e,t){return uo(2048,8,e,t)}function Qh(e,t){return uo(4,2,e,t)}function Xh(e,t){return uo(4,4,e,t)}function Zh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jh(e,t,n){return n=n!=null?n.concat([e]):null,uo(4,4,Zh.bind(null,t,e),n)}function au(){}function ep(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tp(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function np(e,t,n){return Er&21?(hn(n,t)||(n=oh(),Xe.lanes|=n,Nr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function bg(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=wl.transition;wl.transition={};try{e(!1),t()}finally{ze=n,wl.transition=r}}function rp(){return nn().memoizedState}function kg(e,t,n){var r=tr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ip(e))sp(t,n);else if(n=zh(e,t,n,r),n!==null){var a=Pt();fn(n,e,r,a),ap(n,t,r)}}function Cg(e,t,n){var r=tr(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ip(e))sp(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,h=o(u,n);if(a.hasEagerState=!0,a.eagerState=h,hn(h,u)){var p=t.interleaved;p===null?(a.next=a,Xc(t)):(a.next=p.next,p.next=a),t.interleaved=a;return}}catch{}finally{}n=zh(e,t,a,r),n!==null&&(a=Pt(),fn(n,e,r,a),ap(n,t,r))}}function ip(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function sp(e,t){Yi=Ya=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ap(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ic(e,n)}}var Qa={readContext:tn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},Sg={readContext:tn,useCallback:function(e,t){return vn().memoizedState=[e,t===void 0?null:t],e},useContext:tn,useEffect:Vd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Sa(4194308,4,Zh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sa(4,2,e,t)},useMemo:function(e,t){var n=vn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kg.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=vn();return e={current:e},t.memoizedState=e},useState:$d,useDebugValue:au,useDeferredValue:function(e){return vn().memoizedState=e},useTransition:function(){var e=$d(!1),t=e[0];return e=bg.bind(null,e[1]),vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,a=vn();if(Ke){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),pt===null)throw Error(se(349));Er&30||Wh(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Vd(qh.bind(null,r,o,e),[e]),r.flags|=2048,ps(9,Uh.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vn(),t=pt.identifierPrefix;if(Ke){var n=Nn,r=En;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=fs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jg={readContext:tn,useCallback:ep,useContext:tn,useEffect:su,useImperativeHandle:Jh,useInsertionEffect:Qh,useLayoutEffect:Xh,useMemo:tp,useReducer:bl,useRef:Yh,useState:function(){return bl(hs)},useDebugValue:au,useDeferredValue:function(e){var t=nn();return np(t,ct.memoizedState,e)},useTransition:function(){var e=bl(hs)[0],t=nn().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Gh,useId:rp,unstable_isNewReconciler:!1},Tg={readContext:tn,useCallback:ep,useContext:tn,useEffect:su,useImperativeHandle:Jh,useInsertionEffect:Qh,useLayoutEffect:Xh,useMemo:tp,useReducer:kl,useRef:Yh,useState:function(){return kl(hs)},useDebugValue:au,useDeferredValue:function(e){var t=nn();return ct===null?t.memoizedState=e:np(t,ct.memoizedState,e)},useTransition:function(){var e=kl(hs)[0],t=nn().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Gh,useId:rp,unstable_isNewReconciler:!1};function on(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function oc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return(e=e._reactInternals)?_r(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),a=tr(e),o=An(r,a);o.payload=t,n!=null&&(o.callback=n),t=Jn(e,o,a),t!==null&&(fn(t,e,a,r),ka(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),a=tr(e),o=An(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Jn(e,o,a),t!==null&&(fn(t,e,a,r),ka(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=tr(e),a=An(n,r);a.tag=2,t!=null&&(a.callback=t),t=Jn(e,a,r),t!==null&&(fn(t,e,r,n),ka(t,e,r))}};function Gd(e,t,n,r,a,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,u):t.prototype&&t.prototype.isPureReactComponent?!as(n,r)||!as(a,o):!0}function op(e,t,n){var r=!1,a=ir,o=t.contextType;return typeof o=="object"&&o!==null?o=tn(o):(a=zt(t)?jr:jt.current,r=t.contextTypes,o=(r=r!=null)?ui(e,a):ir),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function lc(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Zc(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=tn(o):(o=zt(t)?jr:jt.current,a.context=ui(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(oc(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&fo.enqueueReplaceState(a,a.state,null),Ka(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function pi(e,t){try{var n="",r=t;do n+=e0(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Cl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Eg=typeof WeakMap=="function"?WeakMap:Map;function lp(e,t,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,xc=r),cc(e,t)},n}function cp(e,t,n){n=An(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){cc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){cc(e,t),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Ud(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Eg;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=$g.bind(null,e,t,n),t.then(e,e))}function qd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kd(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=An(-1,1),t.tag=2,Jn(n,t,1))),n.lanes|=1),e)}var Ng=Rn.ReactCurrentOwner,It=!1;function At(e,t,n,r){t.child=e===null?Oh(t,null,n,r):fi(t,e.child,n,r)}function Hd(e,t,n,r,a){n=n.render;var o=t.ref;return oi(t,a),r=ru(e,t,n,r,o,a),n=iu(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fn(e,t,a)):(Ke&&n&&Uc(t),t.flags|=1,At(e,t,r,a),t.child)}function Yd(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!pu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,up(e,t,o,r,a)):(e=Na(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:as,n(u,r)&&e.ref===t.ref)return Fn(e,t,a)}return t.flags|=1,e=nr(o,r),e.ref=t.ref,e.return=t,t.child=e}function up(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(as(o,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,Fn(e,t,a)}return uc(e,t,n,r,a)}function dp(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(ni,Gt),Gt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(ni,Gt),Gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ve(ni,Gt),Gt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ve(ni,Gt),Gt|=r;return At(e,t,a,n),t.child}function fp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uc(e,t,n,r,a){var o=zt(n)?jr:jt.current;return o=ui(t,o),oi(t,a),n=ru(e,t,n,r,o,a),r=iu(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Fn(e,t,a)):(Ke&&r&&Uc(t),t.flags|=1,At(e,t,n,a),t.child)}function Qd(e,t,n,r,a){if(zt(n)){var o=!0;Va(t)}else o=!1;if(oi(t,a),t.stateNode===null)ja(e,t),op(t,n,r),lc(t,n,r,a),r=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var p=u.context,y=n.contextType;typeof y=="object"&&y!==null?y=tn(y):(y=zt(n)?jr:jt.current,y=ui(t,y));var j=n.getDerivedStateFromProps,S=typeof j=="function"||typeof u.getSnapshotBeforeUpdate=="function";S||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||p!==y)&&Wd(t,u,r,y),Wn=!1;var E=t.memoizedState;u.state=E,Ka(t,r,u,a),p=t.memoizedState,h!==r||E!==p||Ot.current||Wn?(typeof j=="function"&&(oc(t,n,j,r),p=t.memoizedState),(h=Wn||Gd(t,n,h,r,E,p,y))?(S||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=p),u.props=r,u.state=p,u.context=y,r=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Lh(e,t),h=t.memoizedProps,y=t.type===t.elementType?h:on(t.type,h),u.props=y,S=t.pendingProps,E=u.context,p=n.contextType,typeof p=="object"&&p!==null?p=tn(p):(p=zt(n)?jr:jt.current,p=ui(t,p));var W=n.getDerivedStateFromProps;(j=typeof W=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==S||E!==p)&&Wd(t,u,r,p),Wn=!1,E=t.memoizedState,u.state=E,Ka(t,r,u,a);var $=t.memoizedState;h!==S||E!==$||Ot.current||Wn?(typeof W=="function"&&(oc(t,n,W,r),$=t.memoizedState),(y=Wn||Gd(t,n,y,r,E,$,p)||!1)?(j||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,$,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,$,p)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=$),u.props=r,u.state=$,u.context=p,r=y):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return dc(e,t,n,r,o,a)}function dc(e,t,n,r,a,o){fp(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return a&&Md(t,n,!1),Fn(e,t,o);r=t.stateNode,Ng.current=t;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=fi(t,e.child,null,o),t.child=fi(t,null,h,o)):At(e,t,h,o),t.memoizedState=r.state,a&&Md(t,n,!0),t.child}function hp(e){var t=e.stateNode;t.pendingContext?Rd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rd(e,t.context,!1),Jc(e,t.containerInfo)}function Xd(e,t,n,r,a){return di(),Kc(a),t.flags|=256,At(e,t,n,r),t.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function pp(e,t,n){var r=t.pendingProps,a=Qe.current,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ve(Qe,a&1),e===null)return sc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=mo(u,r,0,null),e=kr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=hc(n),t.memoizedState=fc,e):ou(t,u));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return Ag(e,t,u,r,h,a,n);if(o){o=r.fallback,u=t.mode,a=e.child,h=a.sibling;var p={mode:"hidden",children:r.children};return!(u&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=p,t.deletions=null):(r=nr(a,p),r.subtreeFlags=a.subtreeFlags&14680064),h!==null?o=nr(h,o):(o=kr(o,u,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=e.child.memoizedState,u=u===null?hc(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=fc,r}return o=e.child,e=o.sibling,r=nr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ou(e,t){return t=mo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sa(e,t,n,r){return r!==null&&Kc(r),fi(t,e.child,null,n),e=ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ag(e,t,n,r,a,o,u){if(n)return t.flags&256?(t.flags&=-257,r=Cl(Error(se(422))),sa(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=mo({mode:"visible",children:r.children},a,0,null),o=kr(o,a,u,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&fi(t,e.child,null,u),t.child.memoizedState=hc(u),t.memoizedState=fc,o);if(!(t.mode&1))return sa(e,t,u,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(se(419)),r=Cl(o,r,void 0),sa(e,t,u,r)}if(h=(u&e.childLanes)!==0,It||h){if(r=pt,r!==null){switch(u&-u){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|u)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Dn(e,a),fn(r,e,a,-1))}return hu(),r=Cl(Error(se(421))),sa(e,t,u,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Vg.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Wt=Zn(a.nextSibling),Ut=t,Ke=!0,cn=null,e!==null&&(Qt[Xt++]=En,Qt[Xt++]=Nn,Qt[Xt++]=Tr,En=e.id,Nn=e.overflow,Tr=t),t=ou(t,r.children),t.flags|=4096,t)}function Zd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ac(e.return,t,n)}function Sl(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function mp(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(At(e,t,r.children,n),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zd(e,n,t);else if(e.tag===19)Zd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ve(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ha(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Sl(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ha(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Sl(t,!0,n,null,o);break;case"together":Sl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Nr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pg(e,t,n){switch(t.tag){case 3:hp(t),di();break;case 5:$h(t);break;case 1:zt(t.type)&&Va(t);break;case 4:Jc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ve(Ua,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?pp(e,t,n):(Ve(Qe,Qe.current&1),e=Fn(e,t,n),e!==null?e.sibling:null);Ve(Qe,Qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mp(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ve(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,dp(e,t,n)}return Fn(e,t,n)}var gp,pc,yp,vp;gp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};yp=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,wr(bn.current);var o=null;switch(n){case"input":a=Bl(e,a),r=Bl(e,r),o=[];break;case"select":a=Ze({},a,{value:void 0}),r=Ze({},r,{value:void 0}),o=[];break;case"textarea":a=zl(e,a),r=zl(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=La)}$l(n,r);var u;n=null;for(y in a)if(!r.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var h=a[y];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Ji.hasOwnProperty(y)?o||(o=[]):(o=o||[]).push(y,null));for(y in r){var p=r[y];if(h=a!=null?a[y]:void 0,r.hasOwnProperty(y)&&p!==h&&(p!=null||h!=null))if(y==="style")if(h){for(u in h)!h.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in p)p.hasOwnProperty(u)&&h[u]!==p[u]&&(n||(n={}),n[u]=p[u])}else n||(o||(o=[]),o.push(y,n)),n=p;else y==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,h=h?h.__html:void 0,p!=null&&h!==p&&(o=o||[]).push(y,p)):y==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(y,""+p):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Ji.hasOwnProperty(y)?(p!=null&&y==="onScroll"&&Ge("scroll",e),o||h===p||(o=[])):(o=o||[]).push(y,p))}n&&(o=o||[]).push("style",n);var y=o;(t.updateQueue=y)&&(t.flags|=4)}};vp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bi(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _g(e,t,n){var r=t.pendingProps;switch(qc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return zt(t.type)&&$a(),kt(t),null;case 3:return r=t.stateNode,hi(),We(Ot),We(jt),tu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cn!==null&&(kc(cn),cn=null))),pc(e,t),kt(t),null;case 5:eu(t);var a=wr(ds.current);if(n=t.type,e!==null&&t.stateNode!=null)yp(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return kt(t),null}if(e=wr(bn.current),ra(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[xn]=t,r[cs]=o,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(a=0;a<Gi.length;a++)Ge(Gi[a],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":od(r,o),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ge("invalid",r);break;case"textarea":cd(r,o),Ge("invalid",r)}$l(n,o),a=null;for(var u in o)if(o.hasOwnProperty(u)){var h=o[u];u==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&na(r.textContent,h,e),a=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&na(r.textContent,h,e),a=["children",""+h]):Ji.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Hs(r),ld(r,o,!0);break;case"textarea":Hs(r),ud(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=La)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[xn]=t,e[cs]=r,gp(e,t,!1,!1),t.stateNode=e;e:{switch(u=Vl(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),a=r;break;case"iframe":case"object":case"embed":Ge("load",e),a=r;break;case"video":case"audio":for(a=0;a<Gi.length;a++)Ge(Gi[a],e);a=r;break;case"source":Ge("error",e),a=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),a=r;break;case"details":Ge("toggle",e),a=r;break;case"input":od(e,r),a=Bl(e,r),Ge("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ze({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":cd(e,r),a=zl(e,r),Ge("invalid",e);break;default:a=r}$l(n,a),h=a;for(o in h)if(h.hasOwnProperty(o)){var p=h[o];o==="style"?Yf(e,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Kf(e,p)):o==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&es(e,p):typeof p=="number"&&es(e,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ji.hasOwnProperty(o)?p!=null&&o==="onScroll"&&Ge("scroll",e):p!=null&&_c(e,o,p,u))}switch(n){case"input":Hs(e),ld(e,r,!1);break;case"textarea":Hs(e),ud(e);break;case"option":r.value!=null&&e.setAttribute("value",""+rr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ri(e,!!r.multiple,o,!1):r.defaultValue!=null&&ri(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=La)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)vp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=wr(ds.current),wr(bn.current),ra(t)){if(r=t.stateNode,n=t.memoizedProps,r[xn]=t,(o=r.nodeValue!==n)&&(e=Ut,e!==null))switch(e.tag){case 3:na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&na(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=t,t.stateNode=r}return kt(t),null;case 13:if(We(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Wt!==null&&t.mode&1&&!(t.flags&128))Bh(),di(),t.flags|=98560,o=!1;else if(o=ra(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(se(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(se(317));o[xn]=t}else di(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),o=!1}else cn!==null&&(kc(cn),cn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?ut===0&&(ut=3):hu())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return hi(),pc(e,t),e===null&&os(t.stateNode.containerInfo),kt(t),null;case 10:return Qc(t.type._context),kt(t),null;case 17:return zt(t.type)&&$a(),kt(t),null;case 19:if(We(Qe),o=t.memoizedState,o===null)return kt(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)Bi(o,!1);else{if(ut!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Ha(e),u!==null){for(t.flags|=128,Bi(o,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ve(Qe,Qe.current&1|2),t.child}e=e.sibling}o.tail!==null&&st()>mi&&(t.flags|=128,r=!0,Bi(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ha(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Ke)return kt(t),null}else 2*st()-o.renderingStartTime>mi&&n!==1073741824&&(t.flags|=128,r=!0,Bi(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(n=o.last,n!==null?n.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=st(),t.sibling=null,n=Qe.current,Ve(Qe,r?n&1|2:n&1),t):(kt(t),null);case 22:case 23:return fu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function Dg(e,t){switch(qc(t),t.tag){case 1:return zt(t.type)&&$a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hi(),We(Ot),We(jt),tu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return eu(t),null;case 13:if(We(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));di()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Qe),null;case 4:return hi(),null;case 10:return Qc(t.type._context),null;case 22:case 23:return fu(),null;case 24:return null;default:return null}}var aa=!1,St=!1,Fg=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ti(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function mc(e,t,n){try{n()}catch(r){tt(e,t,r)}}var Jd=!1;function Rg(e,t){if(Zl=Ia,e=Ch(),Wc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,h=-1,p=-1,y=0,j=0,S=e,E=null;t:for(;;){for(var W;S!==n||a!==0&&S.nodeType!==3||(h=u+a),S!==o||r!==0&&S.nodeType!==3||(p=u+r),S.nodeType===3&&(u+=S.nodeValue.length),(W=S.firstChild)!==null;)E=S,S=W;for(;;){if(S===e)break t;if(E===n&&++y===a&&(h=u),E===o&&++j===r&&(p=u),(W=S.nextSibling)!==null)break;S=E,E=S.parentNode}S=W}n=h===-1||p===-1?null:{start:h,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jl={focusedElem:e,selectionRange:n},Ia=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var I=$.memoizedProps,V=$.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?I:on(t.type,I),V);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(_){tt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return $=Jd,Jd=!1,$}function Qi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&mc(t,n,o)}a=a.next}while(a!==r)}}function ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xp(e){var t=e.alternate;t!==null&&(e.alternate=null,xp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[cs],delete t[nc],delete t[gg],delete t[yg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wp(e){return e.tag===5||e.tag===3||e.tag===4}function ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=La));else if(r!==4&&(e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}function vc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(vc(e,t,n),e=e.sibling;e!==null;)vc(e,t,n),e=e.sibling}var gt=null,ln=!1;function Vn(e,t,n){for(n=n.child;n!==null;)bp(e,t,n),n=n.sibling}function bp(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(io,n)}catch{}switch(n.tag){case 5:St||ti(n,t);case 6:var r=gt,a=ln;gt=null,Vn(e,t,n),gt=r,ln=a,gt!==null&&(ln?(e=gt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(ln?(e=gt,n=n.stateNode,e.nodeType===8?yl(e.parentNode,n):e.nodeType===1&&yl(e,n),is(e)):yl(gt,n.stateNode));break;case 4:r=gt,a=ln,gt=n.stateNode.containerInfo,ln=!0,Vn(e,t,n),gt=r,ln=a;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&mc(n,t,u),a=a.next}while(a!==r)}Vn(e,t,n);break;case 1:if(!St&&(ti(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){tt(n,t,h)}Vn(e,t,n);break;case 21:Vn(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,Vn(e,t,n),St=r):Vn(e,t,n);break;default:Vn(e,t,n)}}function tf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fg),t.forEach(function(r){var a=Gg.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function an(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:gt=h.stateNode,ln=!1;break e;case 3:gt=h.stateNode.containerInfo,ln=!0;break e;case 4:gt=h.stateNode.containerInfo,ln=!0;break e}h=h.return}if(gt===null)throw Error(se(160));bp(o,u,a),gt=null,ln=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(y){tt(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kp(t,e),t=t.sibling}function kp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(an(t,e),yn(e),r&4){try{Qi(3,e,e.return),ho(3,e)}catch(I){tt(e,e.return,I)}try{Qi(5,e,e.return)}catch(I){tt(e,e.return,I)}}break;case 1:an(t,e),yn(e),r&512&&n!==null&&ti(n,n.return);break;case 5:if(an(t,e),yn(e),r&512&&n!==null&&ti(n,n.return),e.flags&32){var a=e.stateNode;try{es(a,"")}catch(I){tt(e,e.return,I)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,u=n!==null?n.memoizedProps:o,h=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Wf(a,o),Vl(h,u);var y=Vl(h,o);for(u=0;u<p.length;u+=2){var j=p[u],S=p[u+1];j==="style"?Yf(a,S):j==="dangerouslySetInnerHTML"?Kf(a,S):j==="children"?es(a,S):_c(a,j,S,y)}switch(h){case"input":Il(a,o);break;case"textarea":Uf(a,o);break;case"select":var E=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var W=o.value;W!=null?ri(a,!!o.multiple,W,!1):E!==!!o.multiple&&(o.defaultValue!=null?ri(a,!!o.multiple,o.defaultValue,!0):ri(a,!!o.multiple,o.multiple?[]:"",!1))}a[cs]=o}catch(I){tt(e,e.return,I)}}break;case 6:if(an(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(I){tt(e,e.return,I)}}break;case 3:if(an(t,e),yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(I){tt(e,e.return,I)}break;case 4:an(t,e),yn(e);break;case 13:an(t,e),yn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(uu=st())),r&4&&tf(e);break;case 22:if(j=n!==null&&n.memoizedState!==null,e.mode&1?(St=(y=St)||j,an(t,e),St=y):an(t,e),yn(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!j&&e.mode&1)for(ve=e,j=e.child;j!==null;){for(S=ve=j;ve!==null;){switch(E=ve,W=E.child,E.tag){case 0:case 11:case 14:case 15:Qi(4,E,E.return);break;case 1:ti(E,E.return);var $=E.stateNode;if(typeof $.componentWillUnmount=="function"){r=E,n=E.return;try{t=r,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(I){tt(r,n,I)}}break;case 5:ti(E,E.return);break;case 22:if(E.memoizedState!==null){rf(S);continue}}W!==null?(W.return=E,ve=W):rf(S)}j=j.sibling}e:for(j=null,S=e;;){if(S.tag===5){if(j===null){j=S;try{a=S.stateNode,y?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=S.stateNode,p=S.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,h.style.display=Hf("display",u))}catch(I){tt(e,e.return,I)}}}else if(S.tag===6){if(j===null)try{S.stateNode.nodeValue=y?"":S.memoizedProps}catch(I){tt(e,e.return,I)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;j===S&&(j=null),S=S.return}j===S&&(j=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:an(t,e),yn(e),r&4&&tf(e);break;case 21:break;default:an(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wp(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(es(a,""),r.flags&=-33);var o=ef(e);vc(e,o,a);break;case 3:case 4:var u=r.stateNode.containerInfo,h=ef(e);yc(e,h,u);break;default:throw Error(se(161))}}catch(p){tt(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mg(e,t,n){ve=e,Cp(e)}function Cp(e,t,n){for(var r=(e.mode&1)!==0;ve!==null;){var a=ve,o=a.child;if(a.tag===22&&r){var u=a.memoizedState!==null||aa;if(!u){var h=a.alternate,p=h!==null&&h.memoizedState!==null||St;h=aa;var y=St;if(aa=u,(St=p)&&!y)for(ve=a;ve!==null;)u=ve,p=u.child,u.tag===22&&u.memoizedState!==null?sf(a):p!==null?(p.return=u,ve=p):sf(a);for(;o!==null;)ve=o,Cp(o),o=o.sibling;ve=a,aa=h,St=y}nf(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,ve=o):nf(e)}}function nf(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||ho(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ld(t,o,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ld(t,u,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var j=y.memoizedState;if(j!==null){var S=j.dehydrated;S!==null&&is(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}St||t.flags&512&&gc(t)}catch(E){tt(t,t.return,E)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function rf(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function sf(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ho(4,t)}catch(p){tt(t,n,p)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(p){tt(t,a,p)}}var o=t.return;try{gc(t)}catch(p){tt(t,o,p)}break;case 5:var u=t.return;try{gc(t)}catch(p){tt(t,u,p)}}}catch(p){tt(t,t.return,p)}if(t===e){ve=null;break}var h=t.sibling;if(h!==null){h.return=t.return,ve=h;break}ve=t.return}}var Bg=Math.ceil,Xa=Rn.ReactCurrentDispatcher,lu=Rn.ReactCurrentOwner,Jt=Rn.ReactCurrentBatchConfig,Re=0,pt=null,at=null,yt=0,Gt=0,ni=ar(0),ut=0,ms=null,Nr=0,po=0,cu=0,Xi=null,Bt=null,uu=0,mi=1/0,Sn=null,Za=!1,xc=null,er=null,oa=!1,Hn=null,Ja=0,Zi=0,wc=null,Ta=-1,Ea=0;function Pt(){return Re&6?st():Ta!==-1?Ta:Ta=st()}function tr(e){return e.mode&1?Re&2&&yt!==0?yt&-yt:xg.transition!==null?(Ea===0&&(Ea=oh()),Ea):(e=ze,e!==0||(e=window.event,e=e===void 0?16:ph(e.type)),e):1}function fn(e,t,n,r){if(50<Zi)throw Zi=0,wc=null,Error(se(185));ys(e,n,r),(!(Re&2)||e!==pt)&&(e===pt&&(!(Re&2)&&(po|=n),ut===4&&qn(e,yt)),Lt(e,r),n===1&&Re===0&&!(t.mode&1)&&(mi=st()+500,co&&or()))}function Lt(e,t){var n=e.callbackNode;x0(e,t);var r=Ba(e,e===pt?yt:0);if(r===0)n!==null&&hd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hd(n),t===1)e.tag===0?vg(af.bind(null,e)):Fh(af.bind(null,e)),pg(function(){!(Re&6)&&or()}),n=null;else{switch(lh(r)){case 1:n=Bc;break;case 4:n=sh;break;case 16:n=Ma;break;case 536870912:n=ah;break;default:n=Ma}n=_p(n,Sp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sp(e,t){if(Ta=-1,Ea=0,Re&6)throw Error(se(327));var n=e.callbackNode;if(li()&&e.callbackNode!==n)return null;var r=Ba(e,e===pt?yt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=eo(e,r);else{t=r;var a=Re;Re|=2;var o=Tp();(pt!==e||yt!==t)&&(Sn=null,mi=st()+500,br(e,t));do try{zg();break}catch(h){jp(e,h)}while(!0);Yc(),Xa.current=o,Re=a,at!==null?t=0:(pt=null,yt=0,t=ut)}if(t!==0){if(t===2&&(a=Kl(e),a!==0&&(r=a,t=bc(e,a))),t===1)throw n=ms,br(e,0),qn(e,r),Lt(e,st()),n;if(t===6)qn(e,r);else{if(a=e.current.alternate,!(r&30)&&!Ig(a)&&(t=eo(e,r),t===2&&(o=Kl(e),o!==0&&(r=o,t=bc(e,o))),t===1))throw n=ms,br(e,0),qn(e,r),Lt(e,st()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:yr(e,Bt,Sn);break;case 3:if(qn(e,r),(r&130023424)===r&&(t=uu+500-st(),10<t)){if(Ba(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=tc(yr.bind(null,e,Bt,Sn),t);break}yr(e,Bt,Sn);break;case 4:if(qn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var u=31-dn(r);o=1<<u,u=t[u],u>a&&(a=u),r&=~o}if(r=a,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bg(r/1960))-r,10<r){e.timeoutHandle=tc(yr.bind(null,e,Bt,Sn),r);break}yr(e,Bt,Sn);break;case 5:yr(e,Bt,Sn);break;default:throw Error(se(329))}}}return Lt(e,st()),e.callbackNode===n?Sp.bind(null,e):null}function bc(e,t){var n=Xi;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=eo(e,t),e!==2&&(t=Bt,Bt=n,t!==null&&kc(t)),e}function kc(e){Bt===null?Bt=e:Bt.push.apply(Bt,e)}function Ig(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!hn(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qn(e,t){for(t&=~cu,t&=~po,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dn(t),r=1<<n;e[n]=-1,t&=~r}}function af(e){if(Re&6)throw Error(se(327));li();var t=Ba(e,0);if(!(t&1))return Lt(e,st()),null;var n=eo(e,t);if(e.tag!==0&&n===2){var r=Kl(e);r!==0&&(t=r,n=bc(e,r))}if(n===1)throw n=ms,br(e,0),qn(e,t),Lt(e,st()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,Bt,Sn),Lt(e,st()),null}function du(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(mi=st()+500,co&&or())}}function Ar(e){Hn!==null&&Hn.tag===0&&!(Re&6)&&li();var t=Re;Re|=1;var n=Jt.transition,r=ze;try{if(Jt.transition=null,ze=1,e)return e()}finally{ze=r,Jt.transition=n,Re=t,!(Re&6)&&or()}}function fu(){Gt=ni.current,We(ni)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hg(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(qc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:hi(),We(Ot),We(jt),tu();break;case 5:eu(r);break;case 4:hi();break;case 13:We(Qe);break;case 19:We(Qe);break;case 10:Qc(r.type._context);break;case 22:case 23:fu()}n=n.return}if(pt=e,at=e=nr(e.current,null),yt=Gt=t,ut=0,ms=null,cu=po=Nr=0,Bt=Xi=null,xr!==null){for(t=0;t<xr.length;t++)if(n=xr[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=a,r.next=u}n.pending=r}xr=null}return e}function jp(e,t){do{var n=at;try{if(Yc(),Ca.current=Qa,Ya){for(var r=Xe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ya=!1}if(Er=0,ht=ct=Xe=null,Yi=!1,fs=0,lu.current=null,n===null||n.return===null){ut=1,ms=t,at=null;break}e:{var o=e,u=n.return,h=n,p=t;if(t=yt,h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var y=p,j=h,S=j.tag;if(!(j.mode&1)&&(S===0||S===11||S===15)){var E=j.alternate;E?(j.updateQueue=E.updateQueue,j.memoizedState=E.memoizedState,j.lanes=E.lanes):(j.updateQueue=null,j.memoizedState=null)}var W=qd(u);if(W!==null){W.flags&=-257,Kd(W,u,h,o,t),W.mode&1&&Ud(o,y,t),t=W,p=y;var $=t.updateQueue;if($===null){var I=new Set;I.add(p),t.updateQueue=I}else $.add(p);break e}else{if(!(t&1)){Ud(o,y,t),hu();break e}p=Error(se(426))}}else if(Ke&&h.mode&1){var V=qd(u);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Kd(V,u,h,o,t),Kc(pi(p,h));break e}}o=p=pi(p,h),ut!==4&&(ut=2),Xi===null?Xi=[o]:Xi.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=lp(o,p,t);zd(o,x);break e;case 1:h=p;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(er===null||!er.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=cp(o,h,t);zd(o,_);break e}}o=o.return}while(o!==null)}Np(n)}catch(G){t=G,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Tp(){var e=Xa.current;return Xa.current=Qa,e===null?Qa:e}function hu(){(ut===0||ut===3||ut===2)&&(ut=4),pt===null||!(Nr&268435455)&&!(po&268435455)||qn(pt,yt)}function eo(e,t){var n=Re;Re|=2;var r=Tp();(pt!==e||yt!==t)&&(Sn=null,br(e,t));do try{Og();break}catch(a){jp(e,a)}while(!0);if(Yc(),Re=n,Xa.current=r,at!==null)throw Error(se(261));return pt=null,yt=0,ut}function Og(){for(;at!==null;)Ep(at)}function zg(){for(;at!==null&&!u0();)Ep(at)}function Ep(e){var t=Pp(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,t===null?Np(e):at=t,lu.current=null}function Np(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Dg(n,t),n!==null){n.flags&=32767,at=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,at=null;return}}else if(n=_g(n,t,Gt),n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);ut===0&&(ut=5)}function yr(e,t,n){var r=ze,a=Jt.transition;try{Jt.transition=null,ze=1,Lg(e,t,n,r)}finally{Jt.transition=a,ze=r}return null}function Lg(e,t,n,r){do li();while(Hn!==null);if(Re&6)throw Error(se(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(w0(e,o),e===pt&&(at=pt=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oa||(oa=!0,_p(Ma,function(){return li(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Jt.transition,Jt.transition=null;var u=ze;ze=1;var h=Re;Re|=4,lu.current=null,Rg(e,n),kp(n,e),ag(Jl),Ia=!!Zl,Jl=Zl=null,e.current=n,Mg(n),d0(),Re=h,ze=u,Jt.transition=o}else e.current=n;if(oa&&(oa=!1,Hn=e,Ja=a),o=e.pendingLanes,o===0&&(er=null),p0(n.stateNode),Lt(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Za)throw Za=!1,e=xc,xc=null,e;return Ja&1&&e.tag!==0&&li(),o=e.pendingLanes,o&1?e===wc?Zi++:(Zi=0,wc=e):Zi=0,or(),null}function li(){if(Hn!==null){var e=lh(Ja),t=Jt.transition,n=ze;try{if(Jt.transition=null,ze=16>e?16:e,Hn===null)var r=!1;else{if(e=Hn,Hn=null,Ja=0,Re&6)throw Error(se(331));var a=Re;for(Re|=4,ve=e.current;ve!==null;){var o=ve,u=o.child;if(ve.flags&16){var h=o.deletions;if(h!==null){for(var p=0;p<h.length;p++){var y=h[p];for(ve=y;ve!==null;){var j=ve;switch(j.tag){case 0:case 11:case 15:Qi(8,j,o)}var S=j.child;if(S!==null)S.return=j,ve=S;else for(;ve!==null;){j=ve;var E=j.sibling,W=j.return;if(xp(j),j===y){ve=null;break}if(E!==null){E.return=W,ve=E;break}ve=W}}}var $=o.alternate;if($!==null){var I=$.child;if(I!==null){$.child=null;do{var V=I.sibling;I.sibling=null,I=V}while(I!==null)}}ve=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,ve=u;else e:for(;ve!==null;){if(o=ve,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qi(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ve=x;break e}ve=o.return}}var v=e.current;for(ve=v;ve!==null;){u=ve;var b=u.child;if(u.subtreeFlags&2064&&b!==null)b.return=u,ve=b;else e:for(u=v;ve!==null;){if(h=ve,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:ho(9,h)}}catch(G){tt(h,h.return,G)}if(h===u){ve=null;break e}var _=h.sibling;if(_!==null){_.return=h.return,ve=_;break e}ve=h.return}}if(Re=a,or(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(io,e)}catch{}r=!0}return r}finally{ze=n,Jt.transition=t}}return!1}function of(e,t,n){t=pi(n,t),t=lp(e,t,1),e=Jn(e,t,1),t=Pt(),e!==null&&(ys(e,1,t),Lt(e,t))}function tt(e,t,n){if(e.tag===3)of(e,e,n);else for(;t!==null;){if(t.tag===3){of(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){e=pi(n,e),e=cp(t,e,1),t=Jn(t,e,1),e=Pt(),t!==null&&(ys(t,1,e),Lt(t,e));break}}t=t.return}}function $g(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,pt===e&&(yt&n)===n&&(ut===4||ut===3&&(yt&130023424)===yt&&500>st()-uu?br(e,0):cu|=n),Lt(e,t)}function Ap(e,t){t===0&&(e.mode&1?(t=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):t=1);var n=Pt();e=Dn(e,t),e!==null&&(ys(e,t,n),Lt(e,n))}function Vg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ap(e,n)}function Gg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),Ap(e,n)}var Pp;Pp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ot.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,Pg(e,t,n);It=!!(e.flags&131072)}else It=!1,Ke&&t.flags&1048576&&Rh(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ja(e,t),e=t.pendingProps;var a=ui(t,jt.current);oi(t,n),a=ru(null,t,r,e,a,n);var o=iu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(r)?(o=!0,Va(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Zc(t),a.updater=fo,t.stateNode=a,a._reactInternals=t,lc(t,r,e,n),t=dc(null,t,r,!0,o,n)):(t.tag=0,Ke&&o&&Uc(t),At(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Ug(r),e=on(r,e),a){case 0:t=uc(null,t,r,e,n);break e;case 1:t=Qd(null,t,r,e,n);break e;case 11:t=Hd(null,t,r,e,n);break e;case 14:t=Yd(null,t,r,on(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),uc(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),Qd(e,t,r,a,n);case 3:e:{if(hp(t),e===null)throw Error(se(387));r=t.pendingProps,o=t.memoizedState,a=o.element,Lh(e,t),Ka(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=pi(Error(se(423)),t),t=Xd(e,t,r,n,a);break e}else if(r!==a){a=pi(Error(se(424)),t),t=Xd(e,t,r,n,a);break e}else for(Wt=Zn(t.stateNode.containerInfo.firstChild),Ut=t,Ke=!0,cn=null,n=Oh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(di(),r===a){t=Fn(e,t,n);break e}At(e,t,r,n)}t=t.child}return t;case 5:return $h(t),e===null&&sc(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,u=a.children,ec(r,a)?u=null:o!==null&&ec(r,o)&&(t.flags|=32),fp(e,t),At(e,t,u,n),t.child;case 6:return e===null&&sc(t),null;case 13:return pp(e,t,n);case 4:return Jc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fi(t,null,r,n):At(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),Hd(e,t,r,a,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,u=a.value,Ve(Ua,r._currentValue),r._currentValue=u,o!==null)if(hn(o.value,u)){if(o.children===a.children&&!Ot.current){t=Fn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var h=o.dependencies;if(h!==null){u=o.child;for(var p=h.firstContext;p!==null;){if(p.context===r){if(o.tag===1){p=An(-1,n&-n),p.tag=2;var y=o.updateQueue;if(y!==null){y=y.shared;var j=y.pending;j===null?p.next=p:(p.next=j.next,j.next=p),y.pending=p}}o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),ac(o.return,n,t),h.lanes|=n;break}p=p.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(se(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),ac(u,n,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}At(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,oi(t,n),a=tn(a),r=r(a),t.flags|=1,At(e,t,r,n),t.child;case 14:return r=t.type,a=on(r,t.pendingProps),a=on(r.type,a),Yd(e,t,r,a,n);case 15:return up(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:on(r,a),ja(e,t),t.tag=1,zt(r)?(e=!0,Va(t)):e=!1,oi(t,n),op(t,r,a),lc(t,r,a,n),dc(null,t,r,!0,e,n);case 19:return mp(e,t,n);case 22:return dp(e,t,n)}throw Error(se(156,t.tag))};function _p(e,t){return ih(e,t)}function Wg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(e,t,n,r){return new Wg(e,t,n,r)}function pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ug(e){if(typeof e=="function")return pu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fc)return 11;if(e===Rc)return 14}return 2}function nr(e,t){var n=e.alternate;return n===null?(n=Zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Na(e,t,n,r,a,o){var u=2;if(r=e,typeof e=="function")pu(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case qr:return kr(n.children,a,o,t);case Dc:u=8,a|=8;break;case Dl:return e=Zt(12,n,t,a|2),e.elementType=Dl,e.lanes=o,e;case Fl:return e=Zt(13,n,t,a),e.elementType=Fl,e.lanes=o,e;case Rl:return e=Zt(19,n,t,a),e.elementType=Rl,e.lanes=o,e;case $f:return mo(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zf:u=10;break e;case Lf:u=9;break e;case Fc:u=11;break e;case Rc:u=14;break e;case Gn:u=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Zt(u,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function kr(e,t,n,r){return e=Zt(7,e,r,t),e.lanes=n,e}function mo(e,t,n,r){return e=Zt(22,e,r,t),e.elementType=$f,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return e=Zt(6,e,null,t),e.lanes=n,e}function Tl(e,t,n){return t=Zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qg(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=al(0),this.expirationTimes=al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mu(e,t,n,r,a,o,u,h,p){return e=new qg(e,t,n,h,p),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Zt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(o),e}function Kg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Dp(e){if(!e)return ir;e=e._reactInternals;e:{if(_r(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(zt(n))return Dh(e,n,t)}return t}function Fp(e,t,n,r,a,o,u,h,p){return e=mu(n,r,!0,e,a,o,u,h,p),e.context=Dp(null),n=e.current,r=Pt(),a=tr(n),o=An(r,a),o.callback=t??null,Jn(n,o,a),e.current.lanes=a,ys(e,a,r),Lt(e,r),e}function go(e,t,n,r){var a=t.current,o=Pt(),u=tr(a);return n=Dp(n),t.context===null?t.context=n:t.pendingContext=n,t=An(o,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Jn(a,t,u),e!==null&&(fn(e,a,u,o),ka(e,a,u)),u}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gu(e,t){lf(e,t),(e=e.alternate)&&lf(e,t)}function Hg(){return null}var Rp=typeof reportError=="function"?reportError:function(e){console.error(e)};function yu(e){this._internalRoot=e}yo.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));go(e,t,null,null)};yo.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ar(function(){go(null,e,null,null)}),t[_n]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=dh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&hh(e)}};function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cf(){}function Yg(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var y=to(u);o.call(y)}}var u=Fp(t,r,e,0,null,!1,!1,"",cf);return e._reactRootContainer=u,e[_n]=u.current,os(e.nodeType===8?e.parentNode:e),Ar(),u}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var h=r;r=function(){var y=to(p);h.call(y)}}var p=mu(e,0,!1,null,null,!1,!1,"",cf);return e._reactRootContainer=p,e[_n]=p.current,os(e.nodeType===8?e.parentNode:e),Ar(function(){go(t,p,n,r)}),p}function xo(e,t,n,r,a){var o=n._reactRootContainer;if(o){var u=o;if(typeof a=="function"){var h=a;a=function(){var p=to(u);h.call(p)}}go(t,u,e,a)}else u=Yg(n,t,e,a,r);return to(u)}ch=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vi(t.pendingLanes);n!==0&&(Ic(t,n|1),Lt(t,st()),!(Re&6)&&(mi=st()+500,or()))}break;case 13:Ar(function(){var r=Dn(e,1);if(r!==null){var a=Pt();fn(r,e,1,a)}}),gu(e,1)}};Oc=function(e){if(e.tag===13){var t=Dn(e,134217728);if(t!==null){var n=Pt();fn(t,e,134217728,n)}gu(e,134217728)}};uh=function(e){if(e.tag===13){var t=tr(e),n=Dn(e,t);if(n!==null){var r=Pt();fn(n,e,t,r)}gu(e,t)}};dh=function(){return ze};fh=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};Wl=function(e,t,n){switch(t){case"input":if(Il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=lo(r);if(!a)throw Error(se(90));Gf(r),Il(r,a)}}}break;case"textarea":Uf(e,n);break;case"select":t=n.value,t!=null&&ri(e,!!n.multiple,t,!1)}};Zf=du;Jf=Ar;var Qg={usingClientEntryPoint:!1,Events:[xs,Qr,lo,Qf,Xf,du]},Ii={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xg={bundleType:Ii.bundleType,version:Ii.version,rendererPackageName:Ii.rendererPackageName,rendererConfig:Ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nh(e),e===null?null:e.stateNode},findFiberByHostInstance:Ii.findFiberByHostInstance||Hg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{io=la.inject(Xg),wn=la}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qg;Kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vu(t))throw Error(se(200));return Kg(e,t,null,n)};Kt.createRoot=function(e,t){if(!vu(e))throw Error(se(299));var n=!1,r="",a=Rp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=mu(e,1,!1,null,null,n,!1,r,a),e[_n]=t.current,os(e.nodeType===8?e.parentNode:e),new yu(t)};Kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=nh(t),e=e===null?null:e.stateNode,e};Kt.flushSync=function(e){return Ar(e)};Kt.hydrate=function(e,t,n){if(!vo(t))throw Error(se(200));return xo(null,e,t,!0,n)};Kt.hydrateRoot=function(e,t,n){if(!vu(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",u=Rp;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=Fp(t,null,e,1,n??null,a,!1,o,u),e[_n]=t.current,os(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new yo(t)};Kt.render=function(e,t,n){if(!vo(t))throw Error(se(200));return xo(null,e,t,!1,n)};Kt.unmountComponentAtNode=function(e){if(!vo(e))throw Error(se(40));return e._reactRootContainer?(Ar(function(){xo(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1};Kt.unstable_batchedUpdates=du;Kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vo(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return xo(e,t,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function Mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mp)}catch(e){console.error(e)}}Mp(),Mf.exports=Kt;var Zg=Mf.exports,Bp,uf=Zg;Bp=uf.createRoot,uf.hydrateRoot;const i={C2:65.41,D2:73.42,E2:82.41,F2:87.31,G2:98,A2:110,B2:123.47,C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,D5:587.33,E5:659.25,F5:698.46,G5:783.99,A5:880,B5:987.77,C6:1046.5,D6:1174.66,E6:1318.51,F6:1396.91,G6:1567.98,Eb2:77.78,Bb2:116.54,Ab3:207.65,Bb3:233.08,Eb4:311.13,Ab4:415.3,Bb4:466.16,Eb5:622.25,Ab5:830.61,Bb5:932.33,Eb6:1244.51,"C#3":138.59,"C#5":554.37,"F#2":92.5,"F#3":185,"F#4":369.99,"F#5":739.99,"F#6":1479.98,"G#4":415.3,"G#5":830.61},Jg={grassland:[{tempo:{calm:100,excited:128},melodyCalm:[[i.G4,i.A4,i.B4,i.D5,i.B4,i.A4,i.G4,i.E4],[i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4,i.D4],[i.D4,i.E4,i.G4,i.A4,i.G4,i.E4,i.G4,i.A4]],melodyExcited:[[i.G5,i.A5,i.B5,i.D6,i.B5,i.G5,i.A5,i.B5],[i.E5,i.G5,i.A5,i.B5,i.D6,i.B5,i.A5,i.G5]],bassCalm:[[i.G2,0,i.D3,0,i.G2,0,i.B2,0]],bassExcited:[[i.G2,i.G2,i.D3,i.D3,i.B2,i.B2,i.D3,i.G2]],arpCalm:[[0,4,7,11,12]],arpExcited:[[0,4,7,11,14,11,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:3e3,filterType:"lowpass",attackTime:.01,releaseTime:.3,arpSpeed:1},{tempo:{calm:95,excited:125},melodyCalm:[[i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.G4,i.E4],[i.F4,i.A4,i.C5,i.F5,i.C5,i.A4,i.C5,i.A4],[i.G4,i.B4,i.D5,i.G5,i.D5,i.B4,i.G4,i.D4]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.G5,i.E5,i.C5,i.G5],[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C6]],bassCalm:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],bassExcited:[[i.C3,i.C3,i.G3,i.G3,i.F3,i.F3,i.G3,i.C3]],arpCalm:[[0,4,7,12,16]],arpExcited:[[0,4,7,12,16,19,16,12,7,4]],pulseWidth:.5,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"triangle",vibratoRate:5,vibratoDepth:.004,filterFreq:3200,filterType:"lowpass",attackTime:.015,releaseTime:.35,arpSpeed:1.1},{tempo:{calm:105,excited:132},melodyCalm:[[i.D4,i.E4,i.A4,i.B4,i.A4,i.E4,i.D4,0],[i.E4,i.A4,i.B4,i.D5,i.B4,i.A4,i.E4,0],[i.A4,i.B4,i.D5,i.E5,i.D5,i.B4,i.A4,i.E4]],melodyExcited:[[i.D5,i.E5,i.A5,i.B5,i.D6,i.B5,i.A5,i.E5],[i.E5,i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5]],bassCalm:[[i.D3,0,i.A3,0,i.D3,0,i.E3,0]],bassExcited:[[i.D3,i.D3,i.A3,i.A3,i.E3,i.E3,i.A3,i.D3]],arpCalm:[[0,2,7,9,12]],arpExcited:[[0,2,7,9,12,14,12,9,7,2]],pulseWidth:.4,drumStyle:"soft",melodyWave:"square",bassWave:"triangle",arpWave:"square",vibratoRate:4,vibratoDepth:.003,filterFreq:2800,filterType:"lowpass",attackTime:.012,releaseTime:.28,arpSpeed:.95}],coastal:[{tempo:{calm:88,excited:116},melodyCalm:[[i.D4,i.E4,i.A4,0,i.B4,i.A4,i.E4,0],[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,i["F#4"],i.E4],[i["F#4"],i.A4,i.B4,i.D5,i.B4,0,i.A4,i["F#4"]]],melodyExcited:[[i.D5,i.E5,i["F#5"],i.A5,i.B5,i.A5,i["F#5"],i.E5],[i.A5,i.B5,i.D6,i.E6,i.D6,i.B5,i.A5,i["F#5"]]],bassCalm:[[i.D2,0,0,i.A2,0,0,i.D2,0]],bassExcited:[[i.D2,0,i.A2,0,i.D2,i.E2,i["F#2"],0]],arpCalm:[[0,4,9,12,16,12,9,4]],arpExcited:[[0,2,4,7,9,12,9,7,4,2]],pulseWidth:.3,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3,vibratoDepth:.008,filterFreq:2500,filterType:"lowpass",attackTime:.05,releaseTime:.5,arpSpeed:1.3},{tempo:{calm:82,excited:110},melodyCalm:[[i.G4,0,i.B4,0,i.D5,i.B4,0,i.G4],[i.A4,0,i.C5,0,i.E5,i.C5,0,i.A4],[i.B4,0,i.D5,0,i["F#5"],i.D5,0,i.B4]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i.C6,i.E6,i.A5,i.E6,i.C6,i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,i.D3,0,0,0]],bassExcited:[[i.G2,0,i.D3,0,i.G2,i.A2,i.B2,0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,14,11,7,4]],pulseWidth:.25,drumStyle:"soft",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.01,filterFreq:2200,filterType:"lowpass",attackTime:.06,releaseTime:.6,arpSpeed:1.5},{tempo:{calm:92,excited:120},melodyCalm:[[i.E4,i["F#4"],i.A4,i.B4,0,i.A4,0,i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],0,i.B4,0,i["G#4"]],[i.A4,i.B4,i["C#5"],i.E5,0,i["C#5"],0,i.B4]],melodyExcited:[[i.E5,i["F#5"],i.A5,i.B5,i["C#6"],i.B5,i.A5,i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,0,0,i.B2,0,0,i.E2,0]],bassExcited:[[i.E2,0,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,2,4,7,9,11,14,11,9,7,4,2]],pulseWidth:.35,drumStyle:"soft",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:3.5,vibratoDepth:.007,filterFreq:2600,filterType:"lowpass",attackTime:.045,releaseTime:.45,arpSpeed:1.2}],lava:[{tempo:{calm:135,excited:170},melodyCalm:[[i.A3,i.A3,i.C4,i.E4,i.A4,i.E4,i.C4,i.A3],[i.G3,i.G3,i.Bb3,i.D4,i.G4,i.D4,i.Bb3,i.G3],[i.F3,i.F3,i.A3,i.C4,i.F4,i.A4,i.C5,i.A4]],melodyExcited:[[i.A4,i.C5,i.E5,i.A5,i.A5,i.E5,i.C5,i.A4],[i.G4,i.Bb4,i.D5,i.G5,i.G5,i.D5,i.Bb4,i.G4]],bassCalm:[[i.A2,i.A2,i.A2,i.E2,i.A2,i.A2,i.G2,i.E2]],bassExcited:[[i.A2,i.A2,i.A2,i.A2,i.E2,i.E2,i.G2,i.G2]],arpCalm:[[0,3,7,10,12,10,7,3]],arpExcited:[[0,3,7,12,15,19,15,12,7,3,0,3]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:6,vibratoDepth:.002,filterFreq:4500,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.7},{tempo:{calm:145,excited:180},melodyCalm:[[i.E4,i.E4,i.G4,i.A4,i.B4,i.A4,i.G4,i.E4],[i.D4,i.D4,i.F4,i.G4,i.A4,i.G4,i.F4,i.D4],[i.C4,i.C4,i.E4,i.G4,i.C5,i.G4,i.E4,i.C4]],melodyExcited:[[i.E5,i.G5,i.A5,i.B5,i.C6,i.B5,i.A5,i.G5],[i.D5,i.F5,i.G5,i.A5,i.B5,i.A5,i.G5,i.F5]],bassCalm:[[i.E2,i.E2,i.E2,i.G2,i.A2,i.G2,i.E2,i.D2]],bassExcited:[[i.E2,i.E2,i.E2,i.E2,i.G2,i.G2,i.A2,i.A2]],arpCalm:[[0,3,5,7,10,7,5,3]],arpExcited:[[0,3,5,7,10,12,15,12,10,7,5,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:7,vibratoDepth:.0015,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.6},{tempo:{calm:128,excited:165},melodyCalm:[[i.D4,i.F4,i.A4,i.D5,i.A4,i.F4,i.D4,i.A3],[i.C4,i.Eb4,i.G4,i.C5,i.G4,i.Eb4,i.C4,i.G3],[i.Bb3,i.D4,i.F4,i.Bb4,i.F4,i.D4,i.Bb3,i.F3]],melodyExcited:[[i.D5,i.F5,i.A5,i.D6,i.D6,i.A5,i.F5,i.D5],[i.C5,i.Eb5,i.G5,i.C6,i.C6,i.G5,i.Eb5,i.C5]],bassCalm:[[i.D2,i.D2,i.F2,i.A2,i.D2,i.D2,i.C2,i.Bb2]],bassExcited:[[i.D2,i.D2,i.D2,i.F2,i.A2,i.A2,i.C3,i.D3]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,17,15,12,10,7,3]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.0025,filterFreq:4200,filterType:"lowpass",attackTime:.003,releaseTime:.18,arpSpeed:.75}],city:[{tempo:{calm:115,excited:145},melodyCalm:[[i.Eb4,i.G4,i.Bb4,0,i.Eb5,0,i.Bb4,i.G4],[i.F4,i.Ab4,i.C5,0,i.F5,0,i.C5,i.Ab4],[i.G4,i.Bb4,i.D5,i.F5,0,i.D5,i.Bb4,0]],melodyExcited:[[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6],[i.F5,i.Ab5,i.C6,i.F6,i.C6,i.Ab5,i.C6,i.F6]],bassCalm:[[i.Eb2,0,i.Bb2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.Eb2,i.Eb2,i.Bb2,i.Bb2,i.G2,i.G2,i.Bb2,i.Eb2]],arpCalm:[[0,3,7,10,12,15,12,10,7,3]],arpExcited:[[0,3,7,10,12,15,19,22,19,15,12,10,7,3]],pulseWidth:.5,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5e3,filterType:"lowpass",attackTime:.001,releaseTime:.2,arpSpeed:.5},{tempo:{calm:120,excited:150},melodyCalm:[[i.A4,0,i["C#5"],i.E5,0,i["C#5"],i.A4,0],[i.B4,0,i["D#5"],i["F#5"],0,i["D#5"],i.B4,0],[i["C#5"],0,i.E5,i["G#5"],0,i.E5,i["C#5"],0]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i.B5,i["F#5"]]],bassCalm:[[i.A2,0,i.E3,0,i.A2,0,i["C#3"],0]],bassExcited:[[i.A2,i.A2,i.E3,i.E3,i["C#3"],i["C#3"],i.E3,i.A2]],arpCalm:[[0,4,7,11,14,11,7,4]],arpExcited:[[0,4,7,11,14,16,19,16,14,11,7,4]],pulseWidth:.4,drumStyle:"electronic",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:10,vibratoDepth:8e-4,filterFreq:5500,filterType:"lowpass",attackTime:8e-4,releaseTime:.18,arpSpeed:.45},{tempo:{calm:108,excited:138},melodyCalm:[[i.C4,i.Eb4,i.G4,i.C5,0,i.G4,i.Eb4,0],[i.Bb3,i.D4,i.F4,i.Bb4,0,i.F4,i.D4,0],[i.Ab3,i.C4,i.Eb4,i.Ab4,0,i.Eb4,i.C4,0]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.Bb4,i.D5,i.F5,i.Bb5,i.F5,i.D5,i.F5,i.Bb5]],bassCalm:[[i.C2,0,i.G2,0,i.Eb2,0,i.G2,0]],bassExcited:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,10,15,10,7,3]],arpExcited:[[0,3,7,10,15,19,22,19,15,10,7,3]],pulseWidth:.45,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0012,filterFreq:4800,filterType:"lowpass",attackTime:.002,releaseTime:.22,arpSpeed:.55}],sky:[{tempo:{calm:72,excited:100},melodyCalm:[[i.C5,0,i.G5,0,i.E5,0,i.G5,0],[i.D5,0,i.A5,0,i["F#5"],0,i.A5,0],[i.E5,0,i.B5,0,i["G#5"],0,i.B5,0]],melodyExcited:[[i.C5,i.E5,i.G5,i.C6,i.E6,i.C6,i.G5,i.E5],[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]]],bassCalm:[[i.C3,0,0,0,i.G3,0,0,0]],bassExcited:[[i.C3,0,i.G3,0,i.C3,0,i.E3,0]],arpCalm:[[0,7,12,19,24,19,12,7]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.25,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"sine",vibratoRate:2,vibratoDepth:.015,filterFreq:2e3,filterType:"lowpass",attackTime:.1,releaseTime:.8,arpSpeed:1.8},{tempo:{calm:68,excited:95},melodyCalm:[[i.G5,0,0,i.D6,0,0,i.B5,0],[i.A5,0,0,i.E6,0,0,i["C#6"],0],[i.B5,0,0,i["F#6"],0,0,i["D#6"],0]],melodyExcited:[[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5],[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.A5,i.E5]],bassCalm:[[i.G2,0,0,0,0,0,i.D3,0]],bassExcited:[[i.G2,0,0,i.D3,0,i.G2,0,i.B2]],arpCalm:[[0,5,12,17,24,17,12,5]],arpExcited:[[0,5,7,12,17,19,24,19,17,12,7,5]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"sine",arpWave:"triangle",vibratoRate:1.5,vibratoDepth:.02,filterFreq:1800,filterType:"lowpass",attackTime:.12,releaseTime:1,arpSpeed:2},{tempo:{calm:78,excited:105},melodyCalm:[[i.F5,0,i.A5,0,i.C6,0,i.A5,0],[i.G5,0,i.B5,0,i.D6,0,i.B5,0],[i.A5,0,i["C#6"],0,i.E6,0,i["C#6"],0]],melodyExcited:[[i.F5,i.A5,i.C6,i.F6,i.C6,i.A5,i.F5,i.C5],[i.G5,i.B5,i.D6,i.G6,i.D6,i.B5,i.G5,i.D5]],bassCalm:[[i.F3,0,0,0,i.C3,0,0,0]],bassExcited:[[i.F3,0,i.C3,0,i.F3,0,i.A3,0]],arpCalm:[[0,4,7,12,16,19,16,12,7,4]],arpExcited:[[0,4,7,12,16,19,24,28,24,19,16,12,7,4]],pulseWidth:.3,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:2.5,vibratoDepth:.012,filterFreq:2200,filterType:"lowpass",attackTime:.08,releaseTime:.7,arpSpeed:1.6}]},ey={grassland:[{tempo:{calm:108,excited:138},melodyCalm:[[i.E4,i["F#4"],i["G#4"],i.B4,i.E5,i.B4,i["G#4"],i["F#4"]],[i["F#4"],i["G#4"],i.B4,i["C#5"],i.E5,i["C#5"],i.B4,i["G#4"]]],melodyExcited:[[i.E5,i["F#5"],i["G#5"],i.B5,i.E6,i.B5,i["G#5"],i["F#5"]],[i["F#5"],i["G#5"],i.B5,i["C#6"],i.E6,i["C#6"],i.B5,i["G#5"]]],bassCalm:[[i.E2,i.E2,i.B2,0,i.E2,i["F#2"],i["G#2"],0]],bassExcited:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,8,11,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,16,11,8,4]],pulseWidth:.4,drumStyle:"punchy",melodyWave:"square",bassWave:"sawtooth",arpWave:"square",vibratoRate:5,vibratoDepth:.004,filterFreq:3500,filterType:"lowpass",attackTime:.008,releaseTime:.25,arpSpeed:.9}],coastal:[{tempo:{calm:95,excited:125},melodyCalm:[[i.B4,0,i["D#5"],i["F#5"],0,i.B5,i["F#5"],0],[i["C#5"],0,i.E5,i["G#5"],0,i["C#6"],i["G#5"],0]],melodyExcited:[[i.B5,i["D#6"],i["F#6"],i.B5,i["F#6"],i["D#6"],i.B5,i["F#5"]],[i["C#6"],i.E6,i["G#5"],i["C#6"],i["G#5"],i.E6,i["C#6"],i["G#5"]]],bassCalm:[[i.B2,0,0,i["F#3"],0,0,i.B2,0]],bassExcited:[[i.B2,0,i["F#3"],0,i.B2,i["C#3"],i["D#3"],0]],arpCalm:[[0,4,8,11,16,20,16,11,8,4]],arpExcited:[[0,4,8,11,16,20,23,20,16,11,8,4]],pulseWidth:.35,drumStyle:"punchy",melodyWave:"triangle",bassWave:"sine",arpWave:"triangle",vibratoRate:4,vibratoDepth:.01,filterFreq:2800,filterType:"lowpass",attackTime:.04,releaseTime:.4,arpSpeed:1.1}],lava:[{tempo:{calm:150,excited:185},melodyCalm:[[i.B3,i.D4,i["F#4"],i.B4,i.D5,i.B4,i["F#4"],i.D4],[i.A3,i.C4,i.E4,i.A4,i.C5,i.A4,i.E4,i.C4]],melodyExcited:[[i.B4,i.D5,i["F#5"],i.B5,i.D6,i.B5,i["F#5"],i.D5],[i.A4,i.C5,i.E5,i.A5,i.C6,i.A5,i.E5,i.C5]],bassCalm:[[i.B2,i.B2,i["F#2"],i["F#2"],i.D2,i.D2,i.A2,i.A2]],bassExcited:[[i.B2,i.B2,i.B2,i["F#2"],i.D2,i.D2,i.D2,i.A2]],arpCalm:[[0,3,6,9,12,9,6,3]],arpExcited:[[0,3,6,9,12,15,18,15,12,9,6,3]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:8,vibratoDepth:.001,filterFreq:5500,filterType:"lowpass",attackTime:.001,releaseTime:.08,arpSpeed:.5}],city:[{tempo:{calm:128,excited:158},melodyCalm:[[i["F#4"],i.A4,i["C#5"],0,i["F#5"],0,i["C#5"],i.A4],[i["G#4"],i.B4,i["D#5"],0,i["G#5"],0,i["D#5"],i.B4]],melodyExcited:[[i["F#5"],i.A5,i["C#6"],i["F#6"],i["C#6"],i.A5,i["C#6"],i["F#6"]],[i["G#5"],i.B5,i.Eb6,i["G#5"],i.Eb6,i.B5,i.Eb6,i["G#5"]]],bassCalm:[[i["F#2"],0,i["C#3"],0,i["F#2"],0,i.A2,0]],bassExcited:[[i["F#2"],i["F#2"],i["C#3"],i["C#3"],i.A2,i.A2,i["C#3"],i["F#2"]]],arpCalm:[[0,4,7,11,14,18,14,11,7,4]],arpExcited:[[0,4,7,11,14,18,21,25,21,18,14,11,7,4]],pulseWidth:.35,drumStyle:"electronic",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:12,vibratoDepth:6e-4,filterFreq:6e3,filterType:"lowpass",attackTime:5e-4,releaseTime:.15,arpSpeed:.4}],sky:[{tempo:{calm:80,excited:110},melodyCalm:[[i.D5,0,i["F#5"],0,i.A5,0,i.D6,0],[i.E5,0,i["G#5"],0,i.B5,0,i.E6,0]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i["F#6"],i.D6,i.A5,i["F#5"]],[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.E6,i.B5,i["G#5"]]],bassCalm:[[i.D3,0,0,0,0,0,i.A3,0]],bassExcited:[[i.D3,0,i.A3,0,i.D3,0,i["F#3"],0]],arpCalm:[[0,4,9,16,21,16,9,4]],arpExcited:[[0,4,9,12,16,21,24,21,16,12,9,4]],pulseWidth:.2,drumStyle:"airy",melodyWave:"sine",bassWave:"triangle",arpWave:"sine",vibratoRate:3,vibratoDepth:.018,filterFreq:2400,filterType:"lowpass",attackTime:.08,releaseTime:.9,arpSpeed:1.5}]},ty=[{tempo:{calm:140,excited:175},melodyCalm:[[i.D4,i["F#4"],i.A4,i.D5,i.A4,i["F#4"],i.A4,i.D5],[i.E4,i.G4,i.B4,i.E5,i.B4,i.G4,i.B4,i.E5],[i["F#4"],i.A4,i.D5,i["F#5"],i.D5,i.A4,i.D5,i["F#5"]]],melodyExcited:[[i.D5,i["F#5"],i.A5,i.D6,i.A5,i["F#5"],i.A5,i.D6],[i.E5,i.G5,i.B5,i.E6,i.B5,i.G5,i.B5,i.E6]],bassCalm:[[i.D2,i.D2,i.A2,i.A2,i.D2,i.D2,i.E2,i["F#2"]]],bassExcited:[[i.D2,i.D2,i.D2,i.A2,i.D2,i.D2,i.D2,i.E2]],arpCalm:[[0,4,7,12,16,19]],arpExcited:[[0,4,7,12,16,19,24,19,16,12,7,4]],pulseWidth:.125,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:7,vibratoDepth:.003,filterFreq:5e3,filterType:"lowpass",attackTime:.002,releaseTime:.15,arpSpeed:.6},{tempo:{calm:135,excited:168},melodyCalm:[[i.A4,i["C#5"],i.E5,i.A5,i.E5,i["C#5"],i.E5,i.A5],[i.B4,i["D#5"],i["F#5"],i.B5,i["F#5"],i["D#5"],i["F#5"],i.B5],[i["C#5"],i.E5,i["G#5"],i["C#6"],i["G#5"],i.E5,i["G#5"],i["C#6"]]],melodyExcited:[[i.A5,i["C#6"],i.E6,i.A5,i.E6,i["C#6"],i.E6,i.A5],[i.B5,i.Eb6,i["F#6"],i.B5,i["F#6"],i.Eb6,i["F#6"],i.B5]],bassCalm:[[i.A2,i.A2,i.E3,i.E3,i.A2,i.B2,i["C#3"],i.E3]],bassExcited:[[i.A2,i.A2,i.A2,i.E3,i.A2,i.B2,i["C#3"],i.E3]],arpCalm:[[0,4,8,12,16,20]],arpExcited:[[0,4,8,12,16,20,24,20,16,12,8,4]],pulseWidth:.15,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"sawtooth",vibratoRate:6,vibratoDepth:.0035,filterFreq:5200,filterType:"lowpass",attackTime:.002,releaseTime:.12,arpSpeed:.55}],ny=[{tempo:{calm:155,excited:190},melodyCalm:[[i.E4,i["G#4"],i.B4,i.E5,i["G#5"],i.B5,i["G#5"],i.E5],[i["F#4"],i.A4,i["C#5"],i["F#5"],i.A5,i["C#6"],i.A5,i["F#5"]],[i["G#4"],i.B4,i["D#5"],i["G#5"],i.B5,i.Eb6,i.B5,i["G#5"]]],melodyExcited:[[i.E5,i["G#5"],i.B5,i.E6,i["G#5"],i.B5,i.E6,i["G#5"]],[i["F#5"],i.A5,i["C#6"],i["F#6"],i.A5,i["C#6"],i["F#6"],i.A5]],bassCalm:[[i.E2,i.E2,i.B2,i.B2,i["G#2"],i["G#2"],i.B2,i.E2]],bassExcited:[[i.E2,i.E2,i.E2,i.B2,i.E2,i["G#2"],i.B2,i.E2]],arpCalm:[[0,4,7,11,16,19,23,19,16,11,7,4]],arpExcited:[[0,4,7,11,16,19,23,28,23,19,16,11,7,4]],pulseWidth:.1,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"square",arpWave:"sawtooth",vibratoRate:9,vibratoDepth:.002,filterFreq:5800,filterType:"lowpass",attackTime:.001,releaseTime:.1,arpSpeed:.45},{tempo:{calm:148,excited:185},melodyCalm:[[i.C5,i.Eb5,i.G5,i.C6,i.G5,i.Eb5,i.G5,i.C6],[i.D5,i.F5,i.A5,i.D6,i.A5,i.F5,i.A5,i.D6],[i.Eb5,i.G5,i.Bb5,i.Eb6,i.Bb5,i.G5,i.Bb5,i.Eb6]],melodyExcited:[[i.C5,i.Eb5,i.G5,i.C6,i.Eb6,i.C6,i.G5,i.Eb5],[i.D5,i.F5,i.A5,i.D6,i.F6,i.D6,i.A5,i.F5]],bassCalm:[[i.C2,i.C2,i.G2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],bassExcited:[[i.C2,i.C2,i.C2,i.G2,i.Eb2,i.Eb2,i.G2,i.C2]],arpCalm:[[0,3,7,12,15,19,24,19,15,12,7,3]],arpExcited:[[0,3,7,12,15,19,24,27,24,19,15,12,7,3]],pulseWidth:.12,drumStyle:"heavy",melodyWave:"sawtooth",bassWave:"sawtooth",arpWave:"square",vibratoRate:8,vibratoDepth:.0025,filterFreq:5500,filterType:"lowpass",attackTime:.0015,releaseTime:.12,arpSpeed:.5}],ry={tempo:{calm:95},melodyCalm:[[i.F4,0,i.C5,0,i.A4,0,i.F4,0],[i.G4,0,i.A4,0,i.C5,0,i.A4,0],[i.A4,0,i.C5,0,i.F5,0,i.C5,0],[i.C5,0,i.A4,0,i.F4,0,i.F4,0]],bassCalm:[[i.F2,0,0,0,i.C3,0,0,0],[i.F2,0,i.C3,0,0,0,i.F2,0]],arpCalm:[[0,4,7,12,16,12,7,4]],melodyWave:"triangle",bassWave:"sine",arpWave:"triangle",vibratoRate:3.5,vibratoDepth:.006,filterFreq:2800,filterType:"lowpass",attackTime:.045,releaseTime:.42};function df(e,t){let n;switch(t){case"mythic":n=ny;break;case"legendary":n=ty;break;case"rare":n=ey[e];break;case"common":default:n=Jg[e];break}const r=Math.floor(Math.random()*n.length);return n[r]}function iy(e,t="common"){const n=k.useRef(null),r=k.useRef(!1),a=k.useRef("calm"),o=k.useRef(null),u=k.useRef(0),h=k.useRef(0),p=k.useRef(0),y=k.useRef(0),j=k.useRef(e),S=k.useRef(t),E=k.useRef(df(e,t));k.useEffect(()=>{j.current=e,S.current=t,E.current=df(e,t)},[e,t]);const W=k.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),$=k.useCallback((z,N,L,H,O)=>{const T=W(),X=T.createOscillator(),te=T.createOscillator(),oe=T.createGain(),xe=T.createBiquadFilter(),we=T.createGain();X.type=O.melodyWave,te.type=O.melodyWave,X.frequency.setValueAtTime(z,N),te.frequency.setValueAtTime(z*1.003,N),X.frequency.setValueAtTime(z*1.02,N),X.frequency.exponentialRampToValueAtTime(z,N+.02);const le=T.createOscillator(),Q=T.createGain();le.type="sine",le.frequency.value=O.vibratoRate,Q.gain.value=z*O.vibratoDepth,le.connect(Q),Q.connect(X.frequency),xe.type=O.filterType,xe.frequency.setValueAtTime(O.filterFreq,N),xe.Q.value=1,X.connect(oe),te.connect(oe),oe.connect(xe),xe.connect(we),we.connect(T.destination);const ee=N+O.attackTime;oe.gain.setValueAtTime(0,N),oe.gain.linearRampToValueAtTime(H,ee),oe.gain.setValueAtTime(H*.7,ee+.005),oe.gain.setValueAtTime(H*.6,N+L*.3),oe.gain.linearRampToValueAtTime(0,N+L+O.releaseTime*.5),we.gain.value=.5;const Z=N+L+O.releaseTime;X.start(N),te.start(N),le.start(N),X.stop(Z),te.stop(Z),le.stop(Z)},[W]),I=k.useCallback((z,N,L,H,O)=>{const T=W(),X=T.createOscillator(),te=T.createOscillator(),oe=T.createGain(),xe=T.createBiquadFilter();X.type=O.bassWave,te.type=O.bassWave,X.frequency.setValueAtTime(z*1.5,N),X.frequency.exponentialRampToValueAtTime(z,N+.03),te.frequency.setValueAtTime(z*.5,N),xe.type="lowpass",xe.frequency.value=Math.min(O.filterFreq*.5,800),X.connect(oe),te.connect(oe),oe.connect(xe),xe.connect(T.destination),oe.gain.setValueAtTime(0,N),oe.gain.linearRampToValueAtTime(H,N+O.attackTime*.5),oe.gain.setValueAtTime(H*.8,N+.02),oe.gain.linearRampToValueAtTime(0,N+L),X.start(N),te.start(N),X.stop(N+L),te.stop(N+L)},[W]),V=k.useCallback((z,N,L)=>{const H=W(),O=L==="heavy"?1.3:L==="airy"?.5:1;if(N==="kick"){const T=H.createOscillator(),X=H.createGain();T.connect(X),X.connect(H.destination),T.type="square";const te=L==="heavy"?200:150;T.frequency.setValueAtTime(te,z),T.frequency.exponentialRampToValueAtTime(40,z+.08),T.frequency.exponentialRampToValueAtTime(20,z+.12),X.gain.setValueAtTime(0,z),X.gain.linearRampToValueAtTime(.3*O,z+.002),X.gain.exponentialRampToValueAtTime(.01,z+.12),T.start(z),T.stop(z+.12)}else if(N==="snare"){const T=H.createOscillator(),X=H.createGain();T.connect(X),X.connect(H.destination),T.type="square",T.frequency.setValueAtTime(180,z),T.frequency.exponentialRampToValueAtTime(100,z+.04),X.gain.setValueAtTime(0,z),X.gain.linearRampToValueAtTime(.15*O,z+.001),X.gain.exponentialRampToValueAtTime(.01,z+.06),T.start(z),T.stop(z+.06);const te=.08,oe=Math.floor(H.sampleRate*te),xe=H.createBuffer(1,oe,H.sampleRate),we=xe.getChannelData(0);let le=0;for(let he=0;he<oe;he++)he%4===0&&(le=Math.random()>.5?1:-1),we[he]=le;const Q=H.createBufferSource();Q.buffer=xe;const ee=H.createGain(),Z=H.createBiquadFilter();Z.type="highpass",Z.frequency.value=L==="electronic"?5e3:3500,Q.connect(Z),Z.connect(ee),ee.connect(H.destination),ee.gain.setValueAtTime(0,z),ee.gain.linearRampToValueAtTime(.12*O,z+.001),ee.gain.exponentialRampToValueAtTime(.01,z+te),Q.start(z),Q.stop(z+te)}else{const T=L==="airy"?.04:.025,X=Math.floor(H.sampleRate*T),te=H.createBuffer(1,X,H.sampleRate),oe=te.getChannelData(0);let xe=0;for(let ee=0;ee<X;ee++)ee%2===0&&(xe=Math.random()>.5?1:-1),oe[ee]=xe;const we=H.createBufferSource();we.buffer=te;const le=H.createBiquadFilter();le.type="highpass",le.frequency.value=L==="electronic"?1e4:8e3;const Q=H.createGain();we.connect(le),le.connect(Q),Q.connect(H.destination),Q.gain.setValueAtTime(0,z),Q.gain.linearRampToValueAtTime(.06*O,z+.001),Q.gain.exponentialRampToValueAtTime(.01,z+T),we.start(z),we.stop(z+T)}},[W]),x=k.useCallback((z,N,L,H,O,T)=>{const X=W(),oe=H*T.arpSpeed/N.length,xe=X.createBiquadFilter();xe.type="highpass",xe.frequency.value=400,xe.connect(X.destination),N.forEach((we,le)=>{const Q=z*Math.pow(2,we/12),ee=L+le*oe,Z=X.createOscillator(),he=X.createGain();Z.type=T.arpWave,Z.frequency.setValueAtTime(Q,ee),Z.connect(he),he.connect(xe),he.gain.setValueAtTime(0,ee),he.gain.linearRampToValueAtTime(O,ee+T.attackTime*.3),he.gain.setValueAtTime(O*.7,ee+.005),he.gain.linearRampToValueAtTime(0,ee+oe*.9),Z.start(ee),Z.stop(ee+oe+.01)})},[W]),v=k.useCallback(()=>{const z=W(),N=.1,L=a.current==="excited",H=E.current,O=S.current==="legendary"||S.current==="mythic"||S.current==="rare",X=60/(L?H.tempo.excited:H.tempo.calm),te=L?H.melodyExcited:H.melodyCalm,oe=L?H.bassExcited:H.bassCalm,xe=L?H.arpExcited:H.arpCalm;for(;u.current<z.currentTime+N;){const we=h.current%8,le=p.current%te.length,Q=p.current%oe.length,ee=p.current%xe.length,Z=te[le],he=oe[Q],ke=xe[ee];we===0&&V(u.current,"kick",H.drumStyle),we===4&&V(u.current,L||O?"snare":"kick",H.drumStyle),L||O?(we%2===0&&V(u.current,"hihat",H.drumStyle),V(u.current+X/2,"hihat",H.drumStyle)):we%2===0&&V(u.current+X/2,"hihat",H.drumStyle);const Le=Z[we];if(Le>0){const Ue=O?.08:.06;$(Le,u.current,X*.8,Ue,H)}const Ae=he[we];if(Ae>0){const Ue=O?.1:.08;I(Ae,u.current,X*.9,Ue,H)}if(we%4===0){const Ue=i.C4,Ie=O?.04:.03;x(Ue,ke,u.current,X*2,Ie,H)}we===7&&(y.current++,y.current%2===0&&p.current++),u.current+=X,h.current++}},[W,$,I,V,x]),b=k.useCallback(()=>{if(r.current)return;const z=W();z.state==="suspended"&&z.resume(),r.current=!0,a.current="calm",u.current=z.currentTime,h.current=0,p.current=0,y.current=0,o.current=window.setInterval(v,25)},[W,v]),_=k.useCallback(()=>{o.current&&(clearInterval(o.current),o.current=null),r.current=!1},[]),G=k.useCallback(z=>{a.current!==z&&(a.current=z,p.current=0)},[]);return k.useEffect(()=>()=>{_(),n.current&&(n.current.close(),n.current=null)},[_]),{start:b,stop:_,setIntensity:G}}function sy(){const e=k.useRef(null),t=k.useRef(!1),n=k.useRef(null),r=k.useRef(0),a=k.useRef(0),o=k.useRef(0),u=k.useRef(0),h=ry,p=k.useCallback(()=>(e.current||(e.current=new(window.AudioContext||window.webkitAudioContext)),e.current),[]),y=k.useCallback((V,x,v,b)=>{const _=p(),G=_.createOscillator(),z=_.createOscillator(),N=_.createGain(),L=_.createBiquadFilter(),H=_.createGain();G.type=h.melodyWave,z.type=h.melodyWave,G.frequency.setValueAtTime(V,x),z.frequency.setValueAtTime(V*1.003,x);const O=_.createOscillator(),T=_.createGain();O.type="sine",O.frequency.value=h.vibratoRate,T.gain.value=V*h.vibratoDepth,O.connect(T),T.connect(G.frequency),L.type=h.filterType,L.frequency.setValueAtTime(h.filterFreq,x),G.connect(N),z.connect(N),N.connect(L),L.connect(H),H.connect(_.destination),N.gain.setValueAtTime(0,x),N.gain.linearRampToValueAtTime(b,x+h.attackTime),N.gain.setValueAtTime(b*.6,x+v*.5),N.gain.linearRampToValueAtTime(0,x+v+h.releaseTime*.5),H.gain.value=.45;const X=x+v+h.releaseTime+.05;G.start(x),z.start(x),O.start(x),G.stop(X),z.stop(X),O.stop(X)},[p]),j=k.useCallback((V,x,v,b)=>{const _=p(),G=_.createOscillator(),z=_.createGain(),N=_.createBiquadFilter();G.type=h.bassWave,G.frequency.setValueAtTime(V*1.5,x),G.frequency.exponentialRampToValueAtTime(V,x+.05),N.type="lowpass",N.frequency.value=600,G.connect(z),z.connect(N),N.connect(_.destination),z.gain.setValueAtTime(0,x),z.gain.linearRampToValueAtTime(b,x+h.attackTime*.5),z.gain.setValueAtTime(b*.8,x+v*.3),z.gain.linearRampToValueAtTime(0,x+v+h.releaseTime*.3),G.start(x),G.stop(x+v+h.releaseTime)},[p]),S=k.useCallback((V,x)=>{const v=p(),b=.22,_=.16,G=.11,z=.045;if(x==="kick"){const N=v.createOscillator(),L=v.createGain();N.connect(L),L.connect(v.destination),N.type="triangle",N.frequency.setValueAtTime(130,V),N.frequency.exponentialRampToValueAtTime(40,V+.1),L.gain.setValueAtTime(0,V),L.gain.linearRampToValueAtTime(b,V+.008),L.gain.exponentialRampToValueAtTime(.01,V+_),N.start(V),N.stop(V+_)}else if(x==="snare"){const N=v.createOscillator(),L=v.createGain();N.connect(L),L.connect(v.destination),N.type="triangle",N.frequency.setValueAtTime(180,V),N.frequency.exponentialRampToValueAtTime(100,V+.04),L.gain.setValueAtTime(0,V),L.gain.linearRampToValueAtTime(G,V+.001),L.gain.exponentialRampToValueAtTime(.01,V+.08),N.start(V),N.stop(V+.06);const H=Math.floor(v.sampleRate*.06),O=v.createBuffer(1,H,v.sampleRate),T=O.getChannelData(0);let X=0;for(let we=0;we<H;we++)we%4===0&&(X=Math.random()>.5?1:-1),T[we]=X;const te=v.createBufferSource();te.buffer=O;const oe=v.createGain(),xe=v.createBiquadFilter();xe.type="highpass",xe.frequency.value=3e3,te.connect(xe),xe.connect(oe),oe.connect(v.destination),oe.gain.setValueAtTime(0,V),oe.gain.linearRampToValueAtTime(.09,V+.001),oe.gain.exponentialRampToValueAtTime(.01,V+.07),te.start(V),te.stop(V+.07)}else{const N=Math.floor(v.sampleRate*.022),L=v.createBuffer(1,N,v.sampleRate),H=L.getChannelData(0);let O=0;for(let oe=0;oe<N;oe++)oe%2===0&&(O=Math.random()>.5?1:-1),H[oe]=O;const T=v.createBufferSource();T.buffer=L;const X=v.createBiquadFilter();X.type="highpass",X.frequency.value=8e3;const te=v.createGain();T.connect(X),X.connect(te),te.connect(v.destination),te.gain.setValueAtTime(0,V),te.gain.linearRampToValueAtTime(z,V+.001),te.gain.exponentialRampToValueAtTime(.01,V+.022),T.start(V),T.stop(V+.024)}},[p]),E=k.useCallback((V,x,v,b,_)=>{const G=p(),z=b/x.length;x.forEach((N,L)=>{const H=V*Math.pow(2,N/12),O=v+L*z,T=G.createOscillator(),X=G.createGain();T.type=h.arpWave,T.frequency.setValueAtTime(H,O),T.connect(X),X.connect(G.destination),X.gain.setValueAtTime(0,O),X.gain.linearRampToValueAtTime(_,O+.002),X.gain.linearRampToValueAtTime(0,O+z*.9),T.start(O),T.stop(O+z)})},[p]),W=k.useCallback(()=>{const V=p(),x=.1,b=60/h.tempo.calm,_=h.melodyCalm,G=h.bassCalm,z=h.arpCalm;for(;r.current<V.currentTime+x;){const N=a.current%8,L=o.current%_.length,H=o.current%G.length,O=z[0],T=_[L],X=G[H];N===0&&S(r.current,"kick"),N===4&&S(r.current,"snare"),(N===2||N===6)&&S(r.current+b/2,"hihat");const te=T[N];te>0&&y(te,r.current,b*.8,.065);const oe=X[N];oe>0&&j(oe,r.current,b*.9,.085),N===0&&E(i.F4,O,r.current,b*4,.032),N===7&&(u.current++,u.current%2===0&&o.current++),r.current+=b,a.current++}},[p,y,j,S,E]),$=k.useCallback(()=>{if(t.current)return;const V=p();V.state==="suspended"&&V.resume(),t.current=!0,r.current=V.currentTime,a.current=0,o.current=0,u.current=0,n.current=window.setInterval(W,25)},[p,W]),I=k.useCallback(()=>{n.current&&(clearInterval(n.current),n.current=null),t.current=!1},[]);return k.useEffect(()=>()=>{I(),e.current&&(e.current.close(),e.current=null)},[I]),{start:$,stop:I}}function Tn(e){var n;const t={success:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.C5,i.E5,i.G5,i.C6].forEach((o,u)=>{const h=r.createOscillator(),p=r.createGain();h.connect(p),p.connect(r.destination),h.type="square",h.frequency.setValueAtTime(o,r.currentTime+u*.08),p.gain.setValueAtTime(0,r.currentTime+u*.08),p.gain.linearRampToValueAtTime(.2,r.currentTime+u*.08+.002),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+u*.08+.15),h.start(r.currentTime+u*.08),h.stop(r.currentTime+u*.08+.15)})},fail:()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.G4,i.E4,i.C4].forEach((h,p)=>{const y=r.createOscillator(),j=r.createGain();y.connect(j),j.connect(r.destination),y.type="square",y.frequency.setValueAtTime(h,r.currentTime+p*.12),j.gain.setValueAtTime(0,r.currentTime+p*.12),j.gain.linearRampToValueAtTime(.15,r.currentTime+p*.12+.002),j.gain.exponentialRampToValueAtTime(.01,r.currentTime+p*.12+.15),y.start(r.currentTime+p*.12),y.stop(r.currentTime+p*.12+.15)});const o=r.createOscillator(),u=r.createGain();o.connect(u),u.connect(r.destination),o.type="square",o.frequency.setValueAtTime(1e3,r.currentTime+.4),o.frequency.exponentialRampToValueAtTime(1500,r.currentTime+.45),u.gain.setValueAtTime(0,r.currentTime+.4),u.gain.linearRampToValueAtTime(.08,r.currentTime+.402),u.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),o.start(r.currentTime+.4),o.stop(r.currentTime+.5)},sparkle:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(1200,r.currentTime),a.frequency.exponentialRampToValueAtTime(2400,r.currentTime+.05),a.frequency.exponentialRampToValueAtTime(1800,r.currentTime+.1),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.1,r.currentTime+.002),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),a.start(r.currentTime),a.stop(r.currentTime+.1)},brush:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=Math.floor(r.sampleRate*.08),o=r.createBuffer(1,a,r.sampleRate),u=o.getChannelData(0);let h=0;for(let S=0;S<a;S++)S%4===0&&(h=Math.random()>.5?1:-1),u[S]=h;const p=r.createBufferSource();p.buffer=o;const y=r.createGain(),j=r.createBiquadFilter();j.type="bandpass",j.frequency.value=1500,p.connect(j),j.connect(y),y.connect(r.destination),y.gain.setValueAtTime(0,r.currentTime),y.gain.linearRampToValueAtTime(.05,r.currentTime+.002),y.gain.exponentialRampToValueAtTime(.01,r.currentTime+.08),p.start(r.currentTime),p.stop(r.currentTime+.08)},capture:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(300,r.currentTime),a.frequency.exponentialRampToValueAtTime(600,r.currentTime+.05),a.frequency.exponentialRampToValueAtTime(400,r.currentTime+.1),a.frequency.exponentialRampToValueAtTime(800,r.currentTime+.15),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.2,r.currentTime+.002),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),a.start(r.currentTime),a.stop(r.currentTime+.2)},"legendary-intro":()=>{const r=new(window.AudioContext||window.webkitAudioContext);[i.D3,i.A3,i.D4,i["F#4"]].forEach((o,u)=>{const h=r.createOscillator(),p=r.createGain();h.connect(p),p.connect(r.destination),h.type="square",h.frequency.setValueAtTime(o*.5,r.currentTime+u*.2),h.frequency.exponentialRampToValueAtTime(o,r.currentTime+u*.2+.05),p.gain.setValueAtTime(0,r.currentTime+u*.2),p.gain.linearRampToValueAtTime(.25,r.currentTime+u*.2+.002),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+u*.2+.25),h.start(r.currentTime+u*.2),h.stop(r.currentTime+u*.2+.25)}),setTimeout(()=>{[i.D4,i["F#4"],i.A4,i.D5].forEach(u=>{const h=r.createOscillator(),p=r.createGain();h.connect(p),p.connect(r.destination),h.type="square",h.frequency.setValueAtTime(u,r.currentTime),p.gain.setValueAtTime(0,r.currentTime),p.gain.linearRampToValueAtTime(.15,r.currentTime+.002),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),h.start(r.currentTime),h.stop(r.currentTime+.5)})},900)},wobble:()=>{const r=new(window.AudioContext||window.webkitAudioContext),a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(180,r.currentTime),a.frequency.exponentialRampToValueAtTime(120,r.currentTime+.05),a.frequency.exponentialRampToValueAtTime(200,r.currentTime+.1),a.frequency.exponentialRampToValueAtTime(100,r.currentTime+.15),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.15,r.currentTime+.005),o.gain.setValueAtTime(.12,r.currentTime+.05),o.gain.linearRampToValueAtTime(.15,r.currentTime+.1),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.2),a.start(r.currentTime),a.stop(r.currentTime+.2)},click:()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume();const a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="square",a.frequency.setValueAtTime(800,r.currentTime),a.frequency.exponentialRampToValueAtTime(1200,r.currentTime+.03),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.4,r.currentTime+.005),o.gain.setValueAtTime(.35,r.currentTime+.02),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.1),a.start(r.currentTime),a.stop(r.currentTime+.1);const u=r.createOscillator(),h=r.createGain();u.connect(h),h.connect(r.destination),u.type="square",u.frequency.setValueAtTime(1600,r.currentTime+.05),u.frequency.exponentialRampToValueAtTime(2e3,r.currentTime+.08),h.gain.setValueAtTime(0,r.currentTime+.05),h.gain.linearRampToValueAtTime(.3,r.currentTime+.055),h.gain.exponentialRampToValueAtTime(.01,r.currentTime+.12),u.start(r.currentTime+.05),u.stop(r.currentTime+.12)},"tooth-bounce":()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume();const a=r.createOscillator(),o=r.createGain();a.connect(o),o.connect(r.destination),a.type="sine",a.frequency.setValueAtTime(400,r.currentTime),a.frequency.exponentialRampToValueAtTime(600,r.currentTime+.06),a.frequency.exponentialRampToValueAtTime(350,r.currentTime+.12),o.gain.setValueAtTime(0,r.currentTime),o.gain.linearRampToValueAtTime(.2,r.currentTime+.01),o.gain.exponentialRampToValueAtTime(.01,r.currentTime+.14),a.start(r.currentTime),a.stop(r.currentTime+.14)},"tooth-fly":()=>{const r=new(window.AudioContext||window.webkitAudioContext);r.state==="suspended"&&r.resume(),[i.C5,i.E5,i.G5,i.C6,i.G6].forEach((o,u)=>{const h=r.createOscillator(),p=r.createGain();h.connect(p),p.connect(r.destination),h.type="square",h.frequency.setValueAtTime(o,r.currentTime+u*.06),p.gain.setValueAtTime(0,r.currentTime+u*.06),p.gain.linearRampToValueAtTime(.18,r.currentTime+u*.06+.005),p.gain.exponentialRampToValueAtTime(.01,r.currentTime+u*.06+.1),h.start(r.currentTime+u*.06),h.stop(r.currentTime+u*.06+.1)})}};try{(n=t[e])==null||n.call(t)}catch(r){console.warn("Sound playback failed:",r)}}function ay(e){return{grassland:"Nature",coastal:"Water",lava:"Fire",city:"Electric",sky:"Air",all:"Cosmic"}[e]}const oy=[{id:"gear-bunny",name:"Cogbun",region:"grassland",rarity:"common",description:"A clockwork rabbit that hops with perfectly timed gear movements!",robotParts:["gear-ears","spring-legs","wind-up-tail"],monsterType:"rabbit",height:35,weight:2.5,series:1},{id:"mecha-moth",name:"Solarmoth",region:"grassland",rarity:"common",description:"Solar-powered wings let this moth fly day and night!",robotParts:["solar-wings","LED-antennae","sensor-eyes"],monsterType:"moth",height:15,weight:.3,series:1},{id:"vine-droid",name:"Circufern",region:"grassland",rarity:"common",description:"A plant monster with circuit-board leaves and fiber-optic vines!",robotParts:["circuit-leaves","fiber-vines","solar-flower"],monsterType:"plant",height:45,weight:3.2,series:1},{id:"robo-squirrel",name:"Nutronaut",region:"grassland",rarity:"common",description:"Stores acorns in its battery compartment for winter energy!",robotParts:["battery-cheeks","propeller-tail","scanner-eyes"],monsterType:"squirrel",height:25,weight:1.8,series:1},{id:"buzzer-bee",name:"Hexabuzz",region:"grassland",rarity:"common",description:"Makes digital honey that tastes like electricity!",robotParts:["helicopter-wings","stinger-USB","hexagon-body"],monsterType:"bee",height:12,weight:.4,series:1},{id:"pixel-fawn",name:"Emojidoe",region:"grassland",rarity:"common",description:"A young deer with spots that display different emojis!",robotParts:["LED-spots","antenna-ears","spring-hooves"],monsterType:"deer",height:85,weight:28,series:1},{id:"sprocket-snail",name:"Gearshell",region:"grassland",rarity:"common",description:"Slow but steady, leaves a trail of sparkly oil!",robotParts:["gear-shell","slime-coolant","eye-stalks"],monsterType:"snail",height:18,weight:1.2,series:1},{id:"flutter-bot",name:"Chromafly",region:"grassland",rarity:"common",description:"A butterfly with holographic wings that change colors!",robotParts:["holo-wings","nectar-scanner","micro-jets"],monsterType:"butterfly",height:20,weight:.5,series:1},{id:"thunder-stag",name:"Voltantler",region:"grassland",rarity:"rare",description:"Lightning crackles between its magnificent antenna-antlers!",robotParts:["tesla-antlers","chrome-hooves","capacitor-heart"],monsterType:"stag",height:180,weight:220,series:1},{id:"bloom-guardian",name:"Floratron",region:"grassland",rarity:"rare",description:"A gentle giant that protects the digital forest!",robotParts:["flower-sensors","bark-armor","root-cables"],monsterType:"treant",height:350,weight:800,series:1},{id:"prism-fox",name:"Spectravix",region:"grassland",rarity:"rare",description:"Its rainbow tail can split light into data streams!",robotParts:["prism-tail","laser-eyes","stealth-paws"],monsterType:"fox",height:65,weight:12,series:1},{id:"echo-owl",name:"Sonarhoot",region:"grassland",rarity:"rare",description:"Uses sonar to navigate and sing beautiful digital songs!",robotParts:["radar-dish-face","silent-rotors","night-vision"],monsterType:"owl",height:55,weight:4.5,series:1},{id:"natura-prime",name:"Seedatron",region:"grassland",rarity:"legendary",description:"The ancient guardian of all grassland creatures, born from the first seed and the first circuit!",robotParts:["world-tree-core","season-modulators","life-generators"],monsterType:"nature-titan",height:450,weight:1200,series:1},{id:"turbo-turtle",name:"Rocketoise",region:"coastal",rarity:"common",description:"Jet engines on its shell make this turtle surprisingly fast!",robotParts:["jet-shell","flipper-props","periscope-head"],monsterType:"turtle",height:75,weight:45,series:1},{id:"crank-crab",name:"Clawdraulic",region:"coastal",rarity:"common",description:"Hydraulic claws that can crush anything... gently!",robotParts:["hydraulic-claws","tank-treads","bubble-blaster"],monsterType:"crab",height:30,weight:5.5,series:1},{id:"wave-bot",name:"Sonafin",region:"coastal",rarity:"common",description:"A friendly fish with sonar that finds lost treasures!",robotParts:["sonar-array","propeller-tail","depth-gauge"],monsterType:"fish",height:40,weight:3.8,series:1},{id:"pearl-pup",name:"Shimmerseal",region:"coastal",rarity:"common",description:"A seal pup that produces synthetic pearls from its nose!",robotParts:["pearl-maker","flipper-jets","whisker-sensors"],monsterType:"seal",height:95,weight:38,series:1},{id:"coral-crawler",name:"Printopus",region:"coastal",rarity:"common",description:"Helps rebuild reefs with its 3D-printing tentacles!",robotParts:["printer-tentacles","mineral-scanner","glow-tips"],monsterType:"octopus",height:60,weight:18,series:1},{id:"shell-shock",name:"Voltcrab",region:"coastal",rarity:"common",description:"An electric hermit crab in a high-tech shell home!",robotParts:["smart-shell","shock-claws","wifi-antenna"],monsterType:"hermit-crab",height:22,weight:2.8,series:1},{id:"foam-flounder",name:"Hoverflat",region:"coastal",rarity:"common",description:"Flat as a pancake but full of bubbly personality!",robotParts:["hover-fins","camo-skin","sand-jets"],monsterType:"flounder",height:35,weight:4.2,series:1},{id:"anchor-pony",name:"Magnetail",region:"coastal",rarity:"common",description:"A seahorse that can anchor itself in any current!",robotParts:["magnetic-tail","stabilizer-fins","compass-snout"],monsterType:"seahorse",height:28,weight:1.5,series:1},{id:"storm-ray",name:"Voltamanta",region:"coastal",rarity:"rare",description:"Glides through storms and channels lightning through its wings!",robotParts:["wing-capacitors","storm-sensors","electric-tail"],monsterType:"manta-ray",height:120,weight:85,series:1},{id:"kraken-kit",name:"Tentabot",region:"coastal",rarity:"rare",description:"A baby kraken with adorable mechanical tentacles!",robotParts:["grapple-tentacles","ink-jets","depth-crusher"],monsterType:"kraken",height:200,weight:350,series:1},{id:"siren-synth",name:"Melodine",region:"coastal",rarity:"rare",description:"Sings synthesized songs that dolphins love!",robotParts:["voice-modulator","scale-LEDs","sonic-fins"],monsterType:"mermaid",height:165,weight:55,series:1},{id:"tide-titan",name:"Wavezilla",region:"coastal",rarity:"rare",description:"Controls the waves with its hydraulic arms!",robotParts:["wave-generators","pressure-suit","current-jets"],monsterType:"water-elemental",height:250,weight:420,series:1},{id:"ocean-emperor",name:"Leviatron",region:"coastal",rarity:"legendary",description:"The majestic ruler of all digital seas, part whale, part submarine, all awesome!",robotParts:["sonar-crown","reactor-heart","tidal-thrusters"],monsterType:"leviathan",height:1500,weight:8500,series:1},{id:"magma-core",name:"Molite",region:"lava",rarity:"common",description:"A golem with a nuclear reactor heart that glows orange!",robotParts:["reactor-core","heat-vents","lava-veins"],monsterType:"golem",height:150,weight:380,series:1},{id:"pyro-gecko",name:"Ignecko",region:"lava",rarity:"common",description:"Scurries across lava like it tickles its feet!",robotParts:["heat-pads","flame-tongue","thermal-tail"],monsterType:"gecko",height:22,weight:.8,series:1},{id:"ember-mech",name:"Rebootnix",region:"lava",rarity:"common",description:"A tiny phoenix robot that reboots instead of dying!",robotParts:["ignition-wings","ash-jets","rebirth-core"],monsterType:"phoenix",height:45,weight:4.5,series:1},{id:"forge-hound",name:"Smeltpup",region:"lava",rarity:"common",description:"A loyal dog that was born in a volcano factory!",robotParts:["furnace-belly","metal-fangs","smoke-tail"],monsterType:"hound",height:70,weight:32,series:1},{id:"cinder-snake",name:"Laviper",region:"lava",rarity:"common",description:"Slithers through magma tubes delivering messages!",robotParts:["heat-scales","drill-head","exhaust-rattle"],monsterType:"snake",height:180,weight:15,series:1},{id:"slag-slime",name:"Slagoo",region:"lava",rarity:"common",description:"A metallic slime that eats volcanic rocks for breakfast!",robotParts:["molten-body","mineral-detector","heat-sink"],monsterType:"slime",height:35,weight:8.5,series:1},{id:"coal-critter",name:"Embrite",region:"lava",rarity:"common",description:"Glows brighter the happier it gets!",robotParts:["ember-eyes","carbon-shell","spark-plugs"],monsterType:"coal-creature",height:28,weight:3.2,series:1},{id:"blast-bat",name:"Thermowing",region:"lava",rarity:"common",description:"Navigates cave systems using thermal imaging!",robotParts:["thermal-sonar","jet-wings","heat-shield"],monsterType:"bat",height:38,weight:2.1,series:1},{id:"volcano-drake",name:"Rocketdrake",region:"lava",rarity:"rare",description:"A young dragon with rocket boosters for wings!",robotParts:["rocket-wings","plasma-breath","armored-scales"],monsterType:"dragon",height:220,weight:380,series:1},{id:"obsidian-knight",name:"Glasslord",region:"lava",rarity:"rare",description:"A warrior forged from volcanic glass and steel!",robotParts:["glass-armor","magma-sword","heat-shield"],monsterType:"knight",height:195,weight:180,series:1},{id:"inferno-djinn",name:"Blazenie",region:"lava",rarity:"rare",description:"Grants wishes... if they involve fire or explosions!",robotParts:["flame-core","smoke-generator","wish-processor"],monsterType:"djinn",height:175,weight:65,series:1},{id:"molten-mammoth",name:"Magmamoth",region:"lava",rarity:"rare",description:"An ancient beast awakened by volcanic activity!",robotParts:["lava-tusks","furnace-trunk","magma-hooves"],monsterType:"mammoth",height:380,weight:2800,series:1},{id:"infernal-titan",name:"Eruptor",region:"lava",rarity:"legendary",description:"Born from the planets core, this titan IS the volcano! Speaks in eruptions!",robotParts:["planetary-core","tectonic-arms","eruption-crown"],monsterType:"fire-titan",height:850,weight:12e3,series:1},{id:"neon-rat",name:"Glowrat",region:"city",rarity:"common",description:"Covered in LED strips, the coolest rat in the city!",robotParts:["LED-fur","wire-tail","hacker-teeth"],monsterType:"rat",height:25,weight:1.2,series:1},{id:"holo-hound",name:"Projepup",region:"city",rarity:"common",description:"A loyal dog that can project holograms from its collar!",robotParts:["holo-projector","cyber-snout","data-collar"],monsterType:"dog",height:65,weight:22,series:1},{id:"glitch-cat",name:"Errorkat",region:"city",rarity:"common",description:"Sometimes its face displays error messages when confused!",robotParts:["screen-face","static-fur","USB-tail"],monsterType:"cat",height:35,weight:5.5,series:1},{id:"drone-pigeon",name:"Copteroo",region:"city",rarity:"common",description:"Delivers packages and breadcrumbs across the city!",robotParts:["rotor-wings","GPS-beak","cargo-feet"],monsterType:"pigeon",height:32,weight:1.8,series:1},{id:"trash-panda-bot",name:"Recycloon",region:"city",rarity:"common",description:"A raccoon that sorts recycling with perfect efficiency!",robotParts:["scanner-mask","grabber-paws","compactor-tail"],monsterType:"raccoon",height:55,weight:12,series:1},{id:"pixel-roach",name:"Survibug",region:"city",rarity:"common",description:"Unkillable, adorable, and surprisingly helpful!",robotParts:["hardened-shell","antenna-wifi","survival-core"],monsterType:"cockroach",height:8,weight:.15,series:1},{id:"subway-worm",name:"Metrorm",region:"city",rarity:"common",description:"Lives in the tunnels and knows every shortcut!",robotParts:["tunnel-drill","track-wheels","light-segments"],monsterType:"worm",height:250,weight:85,series:1},{id:"vending-mimic",name:"Snackritter",region:"city",rarity:"common",description:"Looks like a vending machine, gives out free snacks!",robotParts:["dispenser-mouth","coin-eyes","snack-storage"],monsterType:"mimic",height:185,weight:120,series:1},{id:"cyber-sphinx",name:"Riddletron",region:"city",rarity:"rare",description:"Asks riddles that require programming knowledge!",robotParts:["riddle-processor","sphinx-sensors","data-wings"],monsterType:"sphinx",height:180,weight:250,series:1},{id:"neon-dragon",name:"Glodragon",region:"city",rarity:"rare",description:"A serpentine dragon made of pure light and code!",robotParts:["light-body","firework-breath","parade-float"],monsterType:"dragon",height:300,weight:150,series:1},{id:"billboard-beast",name:"Adzilla",region:"city",rarity:"rare",description:"A giant creature covered in animated advertisements!",robotParts:["screen-skin","speaker-roar","spotlight-eyes"],monsterType:"kaiju",height:450,weight:3500,series:1},{id:"data-phantom",name:"Bytespook",region:"city",rarity:"rare",description:"A ghost in the machine, literally!",robotParts:["hologram-body","virus-touch","firewall-cloak"],monsterType:"ghost",height:165,weight:.01,series:1},{id:"metro-mind",name:"Urbatron",region:"city",rarity:"legendary",description:"The consciousness of the entire city! Knows everyones favorite pizza topping!",robotParts:["city-brain","infrastructure-body","network-soul"],monsterType:"city-spirit",height:500,weight:.1,series:1},{id:"propeller-pup",name:"Copterpup",region:"sky",rarity:"common",description:"An adorable puppy with helicopter ears!",robotParts:["rotor-ears","fluffy-jets","tail-rudder"],monsterType:"puppy",height:40,weight:6.5,series:1},{id:"cloud-crawler",name:"Nimbusweb",region:"sky",rarity:"common",description:"A spider that weaves webs between clouds!",robotParts:["balloon-body","silk-cables","weather-sensors"],monsterType:"spider",height:25,weight:.8,series:1},{id:"zephyr-bunny",name:"Breezebun",region:"sky",rarity:"common",description:"Hops on air currents like invisible stairs!",robotParts:["air-jets","wind-ears","bounce-stabilizers"],monsterType:"bunny",height:30,weight:2.2,series:1},{id:"nimbus-kitten",name:"Thunderpurr",region:"sky",rarity:"common",description:"A fluffy cloud cat that purrs like thunder!",robotParts:["cloud-fur","lightning-whiskers","rain-paws"],monsterType:"kitten",height:28,weight:3.5,series:1},{id:"glider-squirrel",name:"Parasquir",region:"sky",rarity:"common",description:"Has built-in parachutes for safe landings!",robotParts:["wing-membranes","acorn-radar","air-brakes"],monsterType:"flying-squirrel",height:22,weight:1.4,series:1},{id:"breeze-bird",name:"Synthrobin",region:"sky",rarity:"common",description:"A songbird with voice synthesizers!",robotParts:["speaker-beak","antenna-crest","solar-feathers"],monsterType:"songbird",height:18,weight:.6,series:1},{id:"balloon-jellyfish",name:"Zeppling",region:"sky",rarity:"common",description:"Floats serenely and glows at night!",robotParts:["helium-bell","LED-tentacles","altitude-sensors"],monsterType:"jellyfish",height:55,weight:2.8,series:1},{id:"kite-ray",name:"Windmanta",region:"sky",rarity:"common",description:"Rides wind currents like a living kite!",robotParts:["sail-wings","string-tail","wind-reader"],monsterType:"ray",height:85,weight:12,series:1},{id:"thunder-hawk",name:"Teslagle",region:"sky",rarity:"rare",description:"An eagle with tesla coils for feathers!",robotParts:["tesla-feathers","storm-eyes","lightning-talons"],monsterType:"eagle",height:95,weight:8.5,series:1},{id:"aurora-serpent",name:"Prismdrake",region:"sky",rarity:"rare",description:"A sky snake that paints the northern lights!",robotParts:["prism-scales","light-projectors","aurora-core"],monsterType:"serpent",height:450,weight:85,series:1},{id:"star-whale",name:"Cosmolub",region:"sky",rarity:"rare",description:"Swims through clouds and sings to satellites!",robotParts:["cosmic-blubber","satellite-song","nebula-spout"],monsterType:"whale",height:1200,weight:4500,series:1},{id:"wind-djinn",name:"Gustenie",region:"sky",rarity:"rare",description:"Controls the winds and grants flight wishes!",robotParts:["vortex-body","gust-generators","wish-turbine"],monsterType:"djinn",height:185,weight:35,series:1},{id:"celestial-phoenix",name:"Solarnix",region:"sky",rarity:"legendary",description:"A magnificent bird made of starlight and solar winds! Said to grant eternal good dental hygiene!",robotParts:["solar-sail-wings","fusion-heart","cosmic-tail"],monsterType:"cosmic-phoenix",height:320,weight:125,series:1}],ly=[{id:"s2-moss-mole",name:"Tunnelsprout",region:"grassland",rarity:"common",description:"Digs through soil with drill-nose and plants seeds wherever it goes!",robotParts:["drill-snout","root-claws","seed-dispenser"],monsterType:"mole",height:28,weight:3.5,series:2},{id:"s2-crystal-caterpillar",name:"Prismapillar",region:"grassland",rarity:"common",description:"Each segment is a different colored crystal that chimes when it moves!",robotParts:["crystal-segments","rainbow-sensors","gem-feet"],monsterType:"crystal-caterpillar",height:20,weight:1.8,series:2},{id:"s2-hedge-hog",name:"Thorntank",region:"grassland",rarity:"common",description:"A tiny tank disguised as a hedgehog! Its spines are actually antennae!",robotParts:["antenna-spines","tread-feet","leaf-camo"],monsterType:"hedgehog",height:18,weight:2.2,series:2},{id:"s2-pollen-bot",name:"Sneezeling",region:"grassland",rarity:"common",description:"Spreads joy and pollen! Everyone near it starts giggling!",robotParts:["pollen-jets","flower-head","giggle-generator"],monsterType:"pollen-sprite",height:15,weight:.5,series:2},{id:"s2-grass-slime",name:"Meadowgoo",region:"grassland",rarity:"common",description:"A jiggly slime that absorbs nutrients from the grass and glows green!",robotParts:["chlorophyll-core","sticky-membrane","photosynthesis-nodes"],monsterType:"grass-slime",height:25,weight:4,series:2},{id:"s2-acorn-knight",name:"Oakling",region:"grassland",rarity:"common",description:"A tiny warrior born from an enchanted acorn! Very brave!",robotParts:["acorn-helmet","twig-sword","leaf-shield"],monsterType:"acorn-warrior",height:12,weight:.8,series:2},{id:"s2-daisy-drone",name:"Petalcopter",region:"grassland",rarity:"common",description:"Petals spin like helicopter blades! Smells amazing!",robotParts:["petal-rotors","stem-body","nectar-tank"],monsterType:"flower-drone",height:22,weight:.9,series:2},{id:"s2-cricket-bot",name:"Chiptune",region:"grassland",rarity:"common",description:"Chirps in 8-bit melodies! A favorite among retro fans!",robotParts:["speaker-legs","antenna-mixer","sound-chip"],monsterType:"cricket",height:8,weight:.2,series:2},{id:"s2-emerald-elk",name:"Crystalope",region:"grassland",rarity:"rare",description:"Its antlers are pure emerald crystal that can heal other creatures!",robotParts:["emerald-antlers","healing-aura","forest-camo"],monsterType:"crystal-elk",height:210,weight:280,series:2},{id:"s2-mushroom-giant",name:"Sporegiant",region:"grassland",rarity:"rare",description:"A gentle giant made of interconnected mushrooms and circuits!",robotParts:["spore-network","mycelium-cables","cap-sensor"],monsterType:"mushroom-golem",height:400,weight:650,series:2},{id:"s2-willow-wisp",name:"Ghostweep",region:"grassland",rarity:"rare",description:"A spirit that lives in willow trees and guides lost travelers!",robotParts:["spectral-core","branch-tendrils","guide-light"],monsterType:"tree-spirit",height:150,weight:8,series:2},{id:"s2-mega-slime",name:"Blobzilla",region:"grassland",rarity:"rare",description:"The king of all grass slimes! Can split into smaller slimes!",robotParts:["nucleus-core","division-matrix","absorption-membrane"],monsterType:"mega-slime",height:200,weight:500,series:2},{id:"s2-crystal-guardian",name:"Geodiatron",region:"grassland",rarity:"legendary",description:"Born from the heart of a crystal cave that grew into the meadow! Protects all gem-type creatures!",robotParts:["diamond-core","crystal-wings","geode-armor"],monsterType:"crystal-titan",height:500,weight:1800,series:2},{id:"s2-nature-computer",name:"Motherboard",region:"grassland",rarity:"legendary",description:"A sentient supercomputer that became one with nature! Processes photosynthesis data!",robotParts:["bio-processors","vine-cables","solar-RAM"],monsterType:"nature-AI",height:320,weight:890,series:2},{id:"s2-sand-dollar-bot",name:"Coinfish",region:"coastal",rarity:"common",description:"Collects shiny things and stores them in its flat body!",robotParts:["coin-body","magnet-sensors","treasure-storage"],monsterType:"sand-dollar",height:15,weight:.8,series:2},{id:"s2-crystal-urchin",name:"Sparkspine",region:"coastal",rarity:"common",description:"Every spine is a different colored crystal that lights up!",robotParts:["crystal-spines","LED-core","water-sensors"],monsterType:"crystal-urchin",height:20,weight:2.5,series:2},{id:"s2-bubble-blob",name:"Foamgoo",region:"coastal",rarity:"common",description:"A slime made entirely of ocean foam! Very bubbly personality!",robotParts:["bubble-matrix","foam-generator","salt-filter"],monsterType:"foam-slime",height:35,weight:1.2,series:2},{id:"s2-starfish-drone",name:"Pentabot",region:"coastal",rarity:"common",description:"Can detach its arms to explore five places at once!",robotParts:["detach-arms","regrow-core","multi-eyes"],monsterType:"starfish",height:40,weight:3,series:2},{id:"s2-barnacle-cluster",name:"Clingtron",region:"coastal",rarity:"common",description:"A friendly barnacle colony that hitchhikes on bigger creatures!",robotParts:["suction-bases","filter-feeders","colony-mind"],monsterType:"barnacle",height:12,weight:1.5,series:2},{id:"s2-kelp-dancer",name:"Swayling",region:"coastal",rarity:"common",description:"Dances with the currents and creates beautiful underwater ballets!",robotParts:["ribbon-fronds","current-sensors","anchor-root"],monsterType:"kelp-creature",height:180,weight:12,series:2},{id:"s2-puffer-tank",name:"Spikeball",region:"coastal",rarity:"common",description:"Inflates into a spiky ball when scared! Very round!",robotParts:["inflate-bladder","spike-array","pressure-gauge"],monsterType:"pufferfish",height:25,weight:2.8,series:2},{id:"s2-anemone-bot",name:"Tickletips",region:"coastal",rarity:"common",description:"Its tentacles give gentle tickles instead of stings!",robotParts:["tickle-tentacles","root-anchor","happiness-sensors"],monsterType:"anemone",height:30,weight:4.5,series:2},{id:"s2-pearl-dragon",name:"Lusterwyrm",region:"coastal",rarity:"rare",description:"A serpentine dragon covered in iridescent pearl scales!",robotParts:["pearl-scales","rainbow-breath","tide-fins"],monsterType:"pearl-dragon",height:350,weight:200,series:2},{id:"s2-giant-clam",name:"Shellfortress",region:"coastal",rarity:"rare",description:"Houses an entire ecosystem inside its massive shell!",robotParts:["fortress-shell","ecosystem-core","pearl-generator"],monsterType:"mega-clam",height:280,weight:1200,series:2},{id:"s2-coral-golem",name:"Reefrock",region:"coastal",rarity:"rare",description:"A walking coral reef! Hundreds of tiny creatures live on it!",robotParts:["coral-armor","habitat-zones","calcium-core"],monsterType:"coral-golem",height:300,weight:950,series:2},{id:"s2-crystal-shark",name:"Diamondjaw",region:"coastal",rarity:"rare",description:"Teeth made of pure crystal! Hunts by refracting light!",robotParts:["crystal-teeth","prism-eyes","stealth-fins"],monsterType:"crystal-shark",height:280,weight:450,series:2},{id:"s2-deep-crystal",name:"Abyssalith",region:"coastal",rarity:"legendary",description:"A massive crystal formation from the deepest trench! Glows with ancient power!",robotParts:["abyss-core","pressure-crystal","bioluminescence-array"],monsterType:"deep-crystal-titan",height:1200,weight:15e3,series:2},{id:"s2-ember-sprite",name:"Flickerling",region:"lava",rarity:"common",description:"A tiny fire spirit that loves to dance in flames!",robotParts:["flame-body","spark-wings","ember-heart"],monsterType:"fire-sprite",height:15,weight:.3,series:2},{id:"s2-ruby-beetle",name:"Garnix",region:"lava",rarity:"common",description:"Shell made of heat-formed rubies! Very fashionable!",robotParts:["ruby-shell","gem-horns","heat-legs"],monsterType:"crystal-beetle",height:18,weight:3.2,series:2},{id:"s2-lava-slime",name:"Magmagoo",region:"lava",rarity:"common",description:"A slime made of liquid rock! Surprisingly cuddly if you have heat shields!",robotParts:["magma-body","heat-core","cooling-membrane"],monsterType:"lava-slime",height:40,weight:85,series:2},{id:"s2-smoke-puff",name:"Ashling",region:"lava",rarity:"common",description:"A creature made of volcanic ash that changes shape constantly!",robotParts:["ash-cloud-body","ember-eyes","smoke-trail"],monsterType:"ash-creature",height:50,weight:2.5,series:2},{id:"s2-fire-ant",name:"Inferant",region:"lava",rarity:"common",description:"Works in colonies to build amazing fire sculptures!",robotParts:["heat-mandibles","forge-abdomen","colony-link"],monsterType:"fire-ant",height:5,weight:.05,series:2},{id:"s2-sulfur-frog",name:"Brimhop",region:"lava",rarity:"common",description:"Hops across lava pools! Its tongue catches fire flies!",robotParts:["heat-pads","flame-tongue","sulfur-skin"],monsterType:"volcanic-frog",height:22,weight:1.8,series:2},{id:"s2-obsidian-crab",name:"Glassback",region:"lava",rarity:"common",description:"Shell forms from cooled lava! Cracks and reforms constantly!",robotParts:["glass-shell","lava-claws","thermal-sensors"],monsterType:"obsidian-crab",height:28,weight:8.5,series:2},{id:"s2-spark-lizard",name:"Igniscale",region:"lava",rarity:"common",description:"Leaves trails of sparks wherever it runs!",robotParts:["spark-scales","ember-tail","heat-vision"],monsterType:"spark-lizard",height:35,weight:4.2,series:2},{id:"s2-ruby-serpent",name:"Crimsoncoil",region:"lava",rarity:"rare",description:"A snake made entirely of linked ruby crystals!",robotParts:["ruby-segments","gem-fangs","heat-rattle"],monsterType:"crystal-snake",height:400,weight:120,series:2},{id:"s2-forge-titan",name:"Anvillion",region:"lava",rarity:"rare",description:"A giant that forges weapons for legendary creatures!",robotParts:["anvil-arms","forge-heart","hammer-fists"],monsterType:"forge-giant",height:450,weight:2200,series:2},{id:"s2-fire-elemental",name:"Blazeborn",region:"lava",rarity:"rare",description:"Pure fire given consciousness and a playful personality!",robotParts:["plasma-core","flame-limbs","heat-aura"],monsterType:"fire-elemental",height:280,weight:45,series:2},{id:"s2-crystal-wyrm",name:"Carbuncle",region:"lava",rarity:"rare",description:"A dragon that breathes crystal shards instead of fire!",robotParts:["crystal-breath","gem-scales","mineral-wings"],monsterType:"crystal-dragon",height:320,weight:580,series:2},{id:"s2-planet-core",name:"Geothermia",region:"lava",rarity:"legendary",description:"A sentient piece of the planets inner core! Contains the heat of a thousand volcanoes!",robotParts:["core-fragment","magma-veins","planetary-heart"],monsterType:"core-titan",height:680,weight:25e3,series:2},{id:"s2-wifi-wisp",name:"Signalwisp",region:"city",rarity:"common",description:"A glowing wisp attracted to wifi signals!",robotParts:["antenna-glow","signal-sensors","data-trail"],monsterType:"wifi-wisp",height:20,weight:.1,series:2},{id:"s2-graffiti-blob",name:"Sprayblob",region:"city",rarity:"common",description:"A colorful blob that leaves art wherever it bounces!",robotParts:["paint-body","color-shift","art-AI"],monsterType:"paint-blob",height:35,weight:6,series:2},{id:"s2-pipe-critter",name:"Pipeling",region:"city",rarity:"common",description:"Lives in the city pipes and keeps them clean!",robotParts:["pipe-body","wrench-arms","flow-sensors"],monsterType:"pipe-creature",height:40,weight:8,series:2},{id:"s2-alley-cat",name:"Neoncat",region:"city",rarity:"common",description:"A cyber cat that prowls the neon-lit alleys!",robotParts:["neon-fur","night-vision","stealth-paws"],monsterType:"alley-cat",height:45,weight:5,series:2},{id:"s2-meter-mite",name:"Tickmeter",region:"city",rarity:"common",description:"A tiny creature that lives inside parking meters!",robotParts:["coin-counter","timer-brain","tick-legs"],monsterType:"meter-mite",height:8,weight:.3,series:2},{id:"s2-cable-snake",name:"Wireviper",region:"city",rarity:"common",description:"Slithers through cable bundles delivering data!",robotParts:["cable-body","connector-fangs","signal-scales"],monsterType:"cable-snake",height:100,weight:3,series:2},{id:"s2-vent-crawler",name:"Ventling",region:"city",rarity:"common",description:"Crawls through ventilation systems keeping air fresh!",robotParts:["filter-body","fan-legs","dust-sensors"],monsterType:"vent-crawler",height:25,weight:2,series:2},{id:"s2-hydrant-hound",name:"Hydropup",region:"city",rarity:"common",description:"A fire hydrant that came to life! Very helpful in emergencies!",robotParts:["hydrant-body","water-jets","rescue-sensors"],monsterType:"hydrant-hound",height:80,weight:120,series:2},{id:"s2-arcade-boss",name:"Pixelord",region:"city",rarity:"rare",description:"Escaped from an arcade machine! Still thinks life is a game!",robotParts:["pixel-body","game-logic","power-up-core"],monsterType:"arcade-creature",height:200,weight:85,series:2},{id:"s2-skyscraper-golem",name:"Towerrock",region:"city",rarity:"rare",description:"A building that woke up! Very slow but very friendly!",robotParts:["concrete-body","window-eyes","elevator-heart"],monsterType:"building-golem",height:800,weight:5e4,series:2},{id:"s2-crystal-spider",name:"Webgem",region:"city",rarity:"rare",description:"Spins webs made of crystal threads! Beautiful but strong!",robotParts:["crystal-spinnerets","gem-legs","prism-eyes"],monsterType:"crystal-spider",height:150,weight:45,series:2},{id:"s2-junk-dragon",name:"Scrapling",region:"city",rarity:"rare",description:"A dragon made entirely of recycled junk! Eco-friendly!",robotParts:["scrap-wings","junk-breath","recycle-heart"],monsterType:"junk-dragon",height:350,weight:420,series:2},{id:"s2-internet-spirit",name:"Webweaver",region:"city",rarity:"legendary",description:"The collective spirit of the entire internet! Knows every meme ever made!",robotParts:["data-stream-body","meme-core","connection-web"],monsterType:"internet-spirit",height:400,weight:.001,series:2},{id:"s2-breeze-sprite",name:"Zephyrling",region:"sky",rarity:"common",description:"A gentle breeze that became alive! Always playful!",robotParts:["wind-body","breeze-wings","air-core"],monsterType:"breeze-sprite",height:25,weight:.05,series:2},{id:"s2-cloud-puff",name:"Fluffcloud",region:"sky",rarity:"common",description:"A tiny living cloud! Super soft and floaty!",robotParts:["vapor-body","rain-core","fluff-aura"],monsterType:"cloud-puff",height:50,weight:.3,series:2},{id:"s2-thunder-bird",name:"Sparkwing",region:"sky",rarity:"common",description:"A small bird that crackles with static electricity!",robotParts:["storm-feathers","spark-beak","thunder-heart"],monsterType:"thunder-bird",height:30,weight:1.5,series:2},{id:"s2-balloon-bug",name:"Floatbug",region:"sky",rarity:"common",description:"A bug with a balloon-like body that drifts on the wind!",robotParts:["balloon-body","tiny-wings","helium-sacs"],monsterType:"balloon-bug",height:20,weight:.1,series:2},{id:"s2-contrail-cat",name:"Jetstream",region:"sky",rarity:"common",description:"A cat that leaves contrails when it runs through the sky!",robotParts:["jet-paws","vapor-tail","altitude-sensors"],monsterType:"contrail-cat",height:40,weight:4,series:2},{id:"s2-mist-sprite",name:"Hazekin",region:"sky",rarity:"common",description:"A sprite made of morning mist! Appears at dawn!",robotParts:["mist-body","dew-core","fade-aura"],monsterType:"mist-sprite",height:25,weight:.08,series:2},{id:"s2-thermal-rider",name:"Heatglide",region:"sky",rarity:"common",description:"Rides thermal currents to soar endlessly without effort!",robotParts:["thermal-wings","heat-sensors","glide-tail"],monsterType:"thermal-rider",height:60,weight:3,series:2},{id:"s2-snowflake-sprite",name:"Frostling",region:"sky",rarity:"common",description:"A tiny ice sprite with a unique crystalline pattern!",robotParts:["ice-body","snow-core","frost-aura"],monsterType:"snowflake-sprite",height:15,weight:.02,series:2},{id:"s2-storm-giant",name:"Thundercoil",region:"sky",rarity:"rare",description:"A massive creature made of storm clouds and lightning!",robotParts:["storm-body","lightning-veins","thunder-heart"],monsterType:"storm-giant",height:600,weight:200,series:2},{id:"s2-crystal-griffin",name:"Gemtalon",region:"sky",rarity:"rare",description:"A majestic griffin with crystal feathers and gem-encrusted claws!",robotParts:["crystal-wings","gem-claws","diamond-beak"],monsterType:"crystal-griffin",height:280,weight:180,series:2},{id:"s2-aurora-whale",name:"Borealisk",region:"sky",rarity:"rare",description:"A massive sky whale that creates aurora borealis as it swims!",robotParts:["aurora-skin","polar-heart","light-spout"],monsterType:"aurora-whale",height:1500,weight:3500,series:2},{id:"s2-moon-moth",name:"Lunawing",region:"sky",rarity:"rare",description:"Only visible during full moons! Grants wishes to believers!",robotParts:["moonbeam-wings","lunar-dust","wish-antenna"],monsterType:"moon-moth",height:120,weight:8,series:2},{id:"s2-sky-leviathan",name:"Aethermaw",region:"sky",rarity:"legendary",description:"The ancient guardian of the upper atmosphere! Swallows storms to protect the land below!",robotParts:["storm-stomach","cloud-fins","atmosphere-core"],monsterType:"sky-leviathan",height:2500,weight:8e3,series:2}],cy=[{id:"s3-phantom-rabbit",name:"Ghosthop",region:"grassland",rarity:"common",description:"A spectral bunny that phases through solid objects!",robotParts:["ecto-ears","phase-legs","spirit-fluff"],monsterType:"phantom-rabbit",height:30,weight:.1,series:3},{id:"s3-dino-beetle",name:"Trilobot",region:"grassland",rarity:"common",description:"An ancient trilobite brought back with robot technology!",robotParts:["fossil-shell","ancient-sensors","primitive-legs"],monsterType:"mecha-trilobite",height:25,weight:4.5,series:3},{id:"s3-ghost-flower",name:"Spectrabloom",region:"grassland",rarity:"common",description:"A flower spirit that only blooms in moonlight!",robotParts:["petal-ecto","ghost-pollen","spirit-stem"],monsterType:"phantom-flower",height:35,weight:.05,series:3},{id:"s3-mini-raptor",name:"Velocibyte",region:"grassland",rarity:"common",description:"A tiny raptor with incredible processing speed!",robotParts:["cyber-claws","speed-legs","hunt-AI"],monsterType:"mecha-raptor",height:60,weight:18,series:3},{id:"s3-wisp-bug",name:"Glimmergeist",region:"grassland",rarity:"common",description:"A ghostly firefly that lights the way for lost souls!",robotParts:["spirit-glow","phase-wings","guide-light"],monsterType:"phantom-firefly",height:8,weight:.01,series:3},{id:"s3-fossil-frog",name:"Cretacehopper",region:"grassland",rarity:"common",description:"A prehistoric frog preserved in amber and reactivated!",robotParts:["amber-skin","ancient-tongue","fossil-hop"],monsterType:"ancient-frog",height:20,weight:1.5,series:3},{id:"s3-shade-snake",name:"Spectherp",region:"grassland",rarity:"common",description:"A ghostly serpent that slithers between dimensions!",robotParts:["shadow-scales","phase-fangs","dimension-rattle"],monsterType:"phantom-snake",height:150,weight:.5,series:3},{id:"s3-dino-chick",name:"Chickosaurus",region:"grassland",rarity:"common",description:"A baby dinosaur with fluffy proto-feathers and robot parts!",robotParts:["proto-feathers","tiny-claws","chirp-speaker"],monsterType:"baby-dinosaur",height:35,weight:5,series:3},{id:"s3-phantom-stag",name:"Spectralbuck",region:"grassland",rarity:"rare",description:"A majestic ghost deer! Its antlers glow with otherworldly light!",robotParts:["ecto-antlers","spirit-hooves","phantom-heart"],monsterType:"phantom-stag",height:200,weight:15,series:3},{id:"s3-tricerabot",name:"Tritanium",region:"grassland",rarity:"rare",description:"A full-sized triceratops with titanium horns!",robotParts:["titanium-horns","armor-frill","charge-legs"],monsterType:"mecha-triceratops",height:350,weight:6e3,series:3},{id:"s3-ghost-treant",name:"Hollowoak",region:"grassland",rarity:"rare",description:"The spirit of an ancient tree! Still protects the forest!",robotParts:["spirit-bark","ghost-roots","phantom-leaves"],monsterType:"phantom-treant",height:500,weight:50,series:3},{id:"s3-stego-tank",name:"Stegotron",region:"grassland",rarity:"rare",description:"A stegosaurus with solar panel plates on its back!",robotParts:["solar-plates","spike-tail","armor-body"],monsterType:"mecha-stegosaurus",height:400,weight:4500,series:3},{id:"s3-spirit-king",name:"Phantomarch",region:"grassland",rarity:"legendary",description:"The ruler of all grass-type phantoms! Guides spirits to peace!",robotParts:["crown-ecto","royal-aura","peace-scepter"],monsterType:"phantom-king",height:380,weight:5,series:3},{id:"s3-brachiobot",name:"Titaneck",region:"grassland",rarity:"legendary",description:"A towering brachiosaurus with a neck full of advanced tech!",robotParts:["tower-neck","radar-head","titan-legs"],monsterType:"mecha-brachiosaurus",height:1500,weight:35e3,series:3},{id:"s3-ghost-fish",name:"Spectralfin",region:"coastal",rarity:"common",description:"A transparent ghostly fish! You can see right through it!",robotParts:["ecto-scales","phase-fins","spirit-gills"],monsterType:"phantom-fish",height:30,weight:.1,series:3},{id:"s3-ammonite-bot",name:"Spiralshell",region:"coastal",rarity:"common",description:"An ancient ammonite brought back with propulsion jets!",robotParts:["spiral-shell","jet-siphon","ancient-eyes"],monsterType:"mecha-ammonite",height:80,weight:25,series:3},{id:"s3-phantom-crab",name:"Ghostpinch",region:"coastal",rarity:"common",description:"A spectral crab! Its claws phase through matter!",robotParts:["ecto-claws","phantom-shell","spirit-legs"],monsterType:"phantom-crab",height:25,weight:.2,series:3},{id:"s3-dunkle-pup",name:"Dunklebot",region:"coastal",rarity:"common",description:"A baby Dunkleosteus with armored jaws!",robotParts:["armor-jaws","plate-head","ancient-fins"],monsterType:"mecha-placoderm",height:120,weight:85,series:3},{id:"s3-wraith-jellyfish",name:"Spooksting",region:"coastal",rarity:"common",description:"A ghostly jellyfish with ethereal tentacles!",robotParts:["ecto-bell","phantom-tentacles","spirit-glow"],monsterType:"phantom-jellyfish",height:50,weight:.05,series:3},{id:"s3-sea-scorpion",name:"Eurypteroid",region:"coastal",rarity:"common",description:"An ancient sea scorpion with crushing pincers!",robotParts:["fossil-pincers","armor-tail","ancient-eyes"],monsterType:"mecha-eurypterid",height:180,weight:45,series:3},{id:"s3-ghost-eel",name:"Phanteel",region:"coastal",rarity:"common",description:"A spectral eel that sparks with ghostly electricity!",robotParts:["ecto-coils","spirit-shock","phantom-slither"],monsterType:"phantom-eel",height:200,weight:.3,series:3},{id:"s3-nautilus-bot",name:"Chambertron",region:"coastal",rarity:"common",description:"A living submarine based on ancient nautilus design!",robotParts:["chamber-shell","jet-propulsion","tentacle-arms"],monsterType:"mecha-nautilus",height:65,weight:20,series:3},{id:"s3-phantom-kraken",name:"Ghostentacle",region:"coastal",rarity:"rare",description:"A spectral kraken that haunts sunken ships!",robotParts:["ecto-tentacles","phantom-ink","spirit-beak"],monsterType:"phantom-kraken",height:400,weight:20,series:3},{id:"s3-mega-shark",name:"Megalobot",region:"coastal",rarity:"rare",description:"A massive megalodon with reinforced steel teeth!",robotParts:["mega-jaws","armor-skin","hunt-sensors"],monsterType:"mecha-megalodon",height:1800,weight:5e4,series:3},{id:"s3-ship-ghost",name:"Galleongeist",region:"coastal",rarity:"rare",description:"The ghost of an entire pirate ship! Sails through water and air!",robotParts:["spectral-hull","ghost-sails","phantom-crew"],monsterType:"ghost-ship",height:800,weight:100,series:3},{id:"s3-plesio-sub",name:"Plesiotron",region:"coastal",rarity:"rare",description:"A plesiosaur converted into a living submarine!",robotParts:["sonar-neck","flipper-props","deep-armor"],monsterType:"mecha-plesiosaur",height:1200,weight:8e3,series:3},{id:"s3-sea-phantom",name:"Abyssalghast",region:"coastal",rarity:"legendary",description:"The ultimate phantom of the deep! Rules all ocean spirits!",robotParts:["abyss-ecto","depth-crown","spirit-trident"],monsterType:"sea-phantom-lord",height:2e3,weight:50,series:3},{id:"s3-solar-wisp",name:"Sunsprite",region:"lava",rarity:"common",description:"A tiny sun spirit that dances in volcanic heat!",robotParts:["solar-core","heat-glow","flame-trail"],monsterType:"solar-wisp",height:25,weight:.01,series:3},{id:"s3-basalt-golem",name:"Rockforge",region:"lava",rarity:"common",description:"Made of hardened volcanic basalt! Very sturdy!",robotParts:["basalt-body","lava-veins","stone-fists"],monsterType:"basalt-golem",height:180,weight:800,series:3},{id:"s3-lava-slug",name:"Magmaslug",region:"lava",rarity:"common",description:"A slug that oozes molten rock! Leaves a glowing trail!",robotParts:["lava-body","heat-slime","glow-trail"],monsterType:"lava-slug",height:30,weight:15,series:3},{id:"s3-vent-worm",name:"Steamworm",region:"lava",rarity:"common",description:"Lives in volcanic vents and loves steam baths!",robotParts:["heat-segments","vent-gills","steam-body"],monsterType:"vent-worm",height:60,weight:8,series:3},{id:"s3-flame-moth",name:"Emberwing",region:"lava",rarity:"common",description:"A moth with wings of living flame! Beautiful and warm!",robotParts:["flame-wings","heat-antennae","fire-dust"],monsterType:"flame-moth",height:15,weight:.2,series:3},{id:"s3-boiling-blob",name:"Bubblava",region:"lava",rarity:"common",description:"A blob of constantly boiling magma! Always bubbling!",robotParts:["magma-body","bubble-core","heat-goo"],monsterType:"boiling-blob",height:50,weight:40,series:3},{id:"s3-glass-shard",name:"Obsidling",region:"lava",rarity:"common",description:"Made of volcanic glass! Sharp but friendly!",robotParts:["obsidian-body","glass-spikes","prism-core"],monsterType:"glass-shard",height:35,weight:12,series:3},{id:"s3-volcano-phantom",name:"Eruptgeist",region:"lava",rarity:"rare",description:"The spirit of an ancient volcano! Erupts with ghostly fire!",robotParts:["volcano-ecto","eruption-spirit","lava-crown"],monsterType:"volcano-phantom",height:500,weight:10,series:3},{id:"s3-rex-supreme",name:"Tyrannotron",region:"lava",rarity:"rare",description:"The king of mecha-dinosaurs! A T-Rex with plasma breath!",robotParts:["plasma-jaws","titan-legs","roar-amplifier"],monsterType:"mecha-tyrannosaurus",height:600,weight:9e3,series:3},{id:"s3-phoenix-ghost",name:"Spiritnix",region:"lava",rarity:"rare",description:"A phantom phoenix! Reborn from ghostly ashes!",robotParts:["ecto-flames","rebirth-spirit","ash-wings"],monsterType:"phantom-phoenix",height:200,weight:2,series:3},{id:"s3-allo-hunter",name:"Allorazer",region:"lava",rarity:"rare",description:"An allosaurus with razor-sharp metal claws!",robotParts:["razor-claws","heat-vision","pack-link"],monsterType:"mecha-allosaurus",height:450,weight:2500,series:3},{id:"s3-inferno-lord",name:"Blazephantom",region:"lava",rarity:"legendary",description:"The supreme phantom of all flames! Commands fire itself!",robotParts:["inferno-ecto","flame-crown","fire-scepter"],monsterType:"fire-phantom-lord",height:800,weight:25,series:3},{id:"s3-arcade-ghost",name:"Pixelgeist",region:"city",rarity:"common",description:"The spirit of old arcade games! Still wants to play!",robotParts:["pixel-ecto","game-spirit","coin-aura"],monsterType:"arcade-phantom",height:120,weight:.1,series:3},{id:"s3-concrete-fossil",name:"Sidewalker",region:"city",rarity:"common",description:"A fossil that came alive from city concrete!",robotParts:["concrete-bones","urban-shell","sidewalk-feet"],monsterType:"concrete-fossil",height:80,weight:200,series:3},{id:"s3-neon-phantom",name:"Signspook",region:"city",rarity:"common",description:"A ghost that lives in neon signs! Flickers mysteriously!",robotParts:["neon-ecto","light-spirit","buzz-aura"],monsterType:"neon-phantom",height:100,weight:.05,series:3},{id:"s3-steam-bot",name:"Pipesteam",region:"city",rarity:"common",description:"A robot powered by city steam! Very old-fashioned!",robotParts:["steam-engine","pipe-arms","whistle-head"],monsterType:"steam-bot",height:150,weight:180,series:3},{id:"s3-holo-owl",name:"Glitchowl",region:"city",rarity:"common",description:"A holographic owl that watches over the city at night!",robotParts:["holo-feathers","laser-eyes","data-wings"],monsterType:"holo-owl",height:45,weight:.01,series:3},{id:"s3-sonar-bat",name:"Echowing",region:"city",rarity:"common",description:"Uses sonar to navigate the urban jungle!",robotParts:["sonar-ears","echo-wings","radar-nose"],monsterType:"sonar-bat",height:30,weight:.8,series:3},{id:"s3-power-grid",name:"Gridling",region:"city",rarity:"common",description:"A creature made of living electricity from power lines!",robotParts:["spark-body","wire-arms","volt-core"],monsterType:"power-grid",height:60,weight:.02,series:3},{id:"s3-error-sprite",name:"Glitchkin",region:"city",rarity:"common",description:"A sprite born from computer errors! Causes minor bugs!",robotParts:["error-body","crash-wings","reboot-core"],monsterType:"error-sprite",height:20,weight:.001,series:3},{id:"s3-train-phantom",name:"Locomotgeist",region:"city",rarity:"rare",description:"The ghost of an old steam train! Still runs the midnight route!",robotParts:["train-ecto","steam-spirit","track-phase"],monsterType:"train-phantom",height:400,weight:50,series:3},{id:"s3-carno-cop",name:"Carnoforce",region:"city",rarity:"rare",description:"A carnotaurus that serves as the city dino-police!",robotParts:["siren-horns","pursuit-legs","justice-core"],monsterType:"mecha-carnotaurus",height:400,weight:2e3,series:3},{id:"s3-theater-ghost",name:"Phantomask",region:"city",rarity:"rare",description:"The spirit of an old theater! Loves dramatic entrances!",robotParts:["mask-ecto","stage-spirit","spotlight-aura"],monsterType:"theater-phantom",height:250,weight:5,series:3},{id:"s3-urban-raptor",name:"Parkouraptor",region:"city",rarity:"rare",description:"Master of urban acrobatics! Runs on walls and rooftops!",robotParts:["grip-claws","jump-jets","wall-sensors"],monsterType:"parkour-raptor",height:200,weight:120,series:3},{id:"s3-city-specter",name:"Metropolgeist",region:"city",rarity:"legendary",description:"The collective phantom of everyone who ever lived in the city! Knows all its secrets!",robotParts:["city-memory","crowd-ecto","history-core"],monsterType:"city-phantom-lord",height:600,weight:1,series:3},{id:"s3-aurora-wisp",name:"Aurorakin",region:"sky",rarity:"common",description:"A wisp made of aurora light! Dances in the polar sky!",robotParts:["aurora-glow","polar-core","light-trail"],monsterType:"aurora-wisp",height:30,weight:.01,series:3},{id:"s3-moon-moth",name:"Lunamoth",region:"sky",rarity:"common",description:"A moth that flies by moonlight! Wings glow silver!",robotParts:["lunar-wings","moon-antennae","silver-dust"],monsterType:"moon-moth",height:25,weight:.3,series:3},{id:"s3-strato-sphinx",name:"Skysphynx",region:"sky",rarity:"common",description:"A sphinx that guards the stratosphere! Asks sky riddles!",robotParts:["cloud-body","wing-mane","riddle-core"],monsterType:"strato-sphinx",height:200,weight:400,series:3},{id:"s3-jet-rider",name:"Streakwing",region:"sky",rarity:"common",description:"Rides jet streams at incredible speeds! Always racing!",robotParts:["jet-fins","speed-body","stream-sensors"],monsterType:"jet-rider",height:80,weight:12,series:3},{id:"s3-cosmic-dust",name:"Stardust",region:"sky",rarity:"common",description:"Made of space dust that drifted down! Sparkles constantly!",robotParts:["dust-body","cosmic-glow","space-particles"],monsterType:"cosmic-dust",height:15,weight:.001,series:3},{id:"s3-rainbow-owl",name:"Prismowl",region:"sky",rarity:"common",description:"An owl with rainbow feathers! Spreads color wherever it flies!",robotParts:["rainbow-feathers","prism-eyes","color-wings"],monsterType:"rainbow-owl",height:40,weight:2,series:3},{id:"s3-hail-hopper",name:"Frosthop",region:"sky",rarity:"common",description:"Jumps between hailstones! Creates small ice storms!",robotParts:["ice-legs","frost-body","hail-core"],monsterType:"hail-hopper",height:20,weight:.5,series:3},{id:"s3-sky-whale",name:"Cloudwhale",region:"sky",rarity:"common",description:"A whale that swims through clouds! Sings beautiful sky songs!",robotParts:["cloud-fins","sky-blowhole","song-core"],monsterType:"sky-whale",height:800,weight:2e3,series:3},{id:"s3-moon-phantom",name:"Lunageist",region:"sky",rarity:"rare",description:"A spirit from the moon itself! Grants dreams to sleepers!",robotParts:["lunar-ecto","dream-spirit","moon-glow"],monsterType:"lunar-phantom",height:300,weight:3,series:3},{id:"s3-quetz-carrier",name:"Quetzalcraft",region:"sky",rarity:"rare",description:"A quetzalcoatlus that serves as a flying aircraft carrier!",robotParts:["carrier-back","mega-wings","hangar-body"],monsterType:"mecha-quetzalcoatlus",height:1e3,weight:25e3,series:3},{id:"s3-comet-specter",name:"Cometwraith",region:"sky",rarity:"rare",description:"The ghost of a comet! Leaves a spectral tail across the sky!",robotParts:["comet-ecto","tail-spirit","cosmic-ice"],monsterType:"comet-phantom",height:500,weight:10,series:3},{id:"s3-ptero-titan",name:"Skywarden",region:"sky",rarity:"rare",description:"A massive pterosaur that guards the upper atmosphere!",robotParts:["guardian-wings","watch-eyes","patrol-beak"],monsterType:"titan-pterosaur",height:1200,weight:2e3,series:3},{id:"s3-sky-spirit",name:"Aethergeist",region:"sky",rarity:"legendary",description:"The supreme phantom of the sky! Commands all aerial spirits and dinosaurs!",robotParts:["sky-crown","cloud-scepter","wind-throne"],monsterType:"sky-phantom-lord",height:2e3,weight:100,series:3}],uy={id:"binsters-claymars",name:"Binsters Claymars",region:"all",rarity:"mythic",description:"The legendary six-headed dragon of perfect dental hygiene! Each head represents a different brushing zone. Only reveals itself to true masters who have befriended every creature across all dimensions!",robotParts:["six-dragon-heads","clay-body","rainbow-belly","golden-horns","ultimate-core"],monsterType:"hydra-dragon",height:2500,weight:18e3,series:1,requiresAllCreatures:!0},dy={id:"leaf-kong",name:"Foliape",region:"all",rarity:"mythic",description:"The ultimate nature guardian! This colossal forest ape commands the power of all seasons. His autumn leaf crown channels ancient forest magic, and his living leaf armor regenerates endlessly. Only appears to those who have proven themselves as true protectors of all creatures!",robotParts:["autumn-crown","leaf-armor","vine-muscles","photosynthesis-core","forest-heart"],monsterType:"nature-titan-gorilla",height:800,weight:2500,series:1,requiresAllCreatures:!0},fy=[uy,dy],Ct=[...oy,...ly,...cy,...fy];function Aa(e){return Ct.filter(t=>t.series===e&&t.rarity!=="mythic")}function Cr(e,t){return Aa(e).every(r=>t.includes(r.id))}function Ip(e){const t=[1];return Cr(1,e)&&t.push(2),Cr(2,e)&&t.push(3),t}function Op(e,t,n){const r=Ip(t);let a=[];const o=$=>n?$.filter(I=>I.region===n||I.region==="all"):$,u=$=>$.filter(I=>r.includes(I.series)),h=Ct.filter($=>$.rarity!=="mythic"),p=Ct.find($=>$.rarity==="mythic"),y=Cr(1,t)&&Cr(2,t)&&Cr(3,t),j=p&&t.includes(p.id);if(y&&!j&&e>=95&&p)return p;const S=u(o(h));if(e>=90?a=[...S.filter($=>$.rarity==="legendary"),...S.filter($=>$.rarity==="rare"),...S.filter($=>$.rarity==="common")]:e>=70?a=[...S.filter($=>$.rarity==="rare"),...S.filter($=>$.rarity==="common")]:a=S.filter($=>$.rarity==="common"),a=a.filter($=>$.rarity!=="mythic"),S.every($=>t.includes($.id))&&y&&j)return a.length===0?null:a[Math.floor(Math.random()*a.length)];let W=a.filter($=>!t.includes($.id));return W.length===0&&(W=S.filter($=>!t.includes($.id))),W.length===0&&(W=u(h).filter($=>!t.includes($.id))),W.length===0?null:W[Math.floor(Math.random()*W.length)]}function hy(e,t){return t==="mythic"?e>=98?1:e>=95?.75:.5:e>=90?1:e>=76?.85:e>=51?.7:e>=31?.55:.4}function py(e){return e>=90?"master":e>=76?"white":e>=51?"bee":e>=31?"blue":"red"}const Ye="/vibe-brushing/",Sr=[{id:"crown",name:"Royal Crown",imageUrl:`${Ye}creatures/hat-crown.png`,unlockCondition:"starter"},{id:"party",name:"Party Hat",imageUrl:`${Ye}creatures/hat-party.png`,unlockCondition:"starter"},{id:"wizard",name:"Wizard Hat",imageUrl:`${Ye}creatures/hat-wizard.png`,unlockCondition:"sessions",unlockThreshold:10},{id:"cowboy",name:"Cowboy Hat",imageUrl:`${Ye}creatures/hat-cowboy.png`,unlockCondition:"sessions",unlockThreshold:25},{id:"chef",name:"Chef Hat",imageUrl:`${Ye}creatures/hat-chef.png`,unlockCondition:"sessions",unlockThreshold:50},{id:"astronaut",name:"Space Helmet",imageUrl:`${Ye}creatures/hat-astronaut.png`,unlockCondition:"sessions",unlockThreshold:100},{id:"pirate",name:"Pirate Hat",imageUrl:`${Ye}creatures/hat-pirate.png`,unlockCondition:"streak",unlockThreshold:7},{id:"princess",name:"Princess Tiara",imageUrl:`${Ye}creatures/hat-princess.png`,unlockCondition:"streak",unlockThreshold:30},{id:"unicorn-horn",name:"Unicorn Horn",imageUrl:`${Ye}creatures/hat-unicorn-horn.png`,unlockCondition:"creature",unlockThreshold:5},{id:"dragon-horns",name:"Dragon Horns",imageUrl:`${Ye}creatures/hat-dragon-horns.png`,unlockCondition:"creature",unlockThreshold:10},{id:"nature-crown",name:"Nature Crown",imageUrl:`${Ye}creatures/hat-nature-crown.png`,unlockCondition:"series",unlockSeries:1},{id:"robo-antennae",name:"Robo Antennae",imageUrl:`${Ye}creatures/hat-robo-antennae.png`,unlockCondition:"series",unlockSeries:1},{id:"flame-mohawk",name:"Flame Mohawk",imageUrl:`${Ye}creatures/hat-flame-mohawk.png`,unlockCondition:"series",unlockSeries:1},{id:"crystal-crown",name:"Crystal Crown",imageUrl:`${Ye}creatures/hat-crystal-crown.png`,unlockCondition:"series",unlockSeries:2},{id:"slime-cap",name:"Slime Cap",imageUrl:`${Ye}creatures/hat-slime-cap.png`,unlockCondition:"series",unlockSeries:2},{id:"gem-tiara",name:"Gem Tiara",imageUrl:`${Ye}creatures/hat-gem-tiara.png`,unlockCondition:"series",unlockSeries:2},{id:"prism-visor",name:"Prism Visor",imageUrl:`${Ye}creatures/hat-prism-visor.png`,unlockCondition:"series",unlockSeries:2},{id:"dino-skull",name:"Dino Skull",imageUrl:`${Ye}creatures/hat-dino-skull.png`,unlockCondition:"series",unlockSeries:3},{id:"phantom-hood",name:"Phantom Hood",imageUrl:`${Ye}creatures/hat-phantom-hood.png`,unlockCondition:"series",unlockSeries:3},{id:"fossil-helmet",name:"Fossil Helmet",imageUrl:`${Ye}creatures/hat-fossil-helmet.png`,unlockCondition:"series",unlockSeries:3},{id:"spirit-halo",name:"Spirit Halo",imageUrl:`${Ye}creatures/hat-spirit-halo.png`,unlockCondition:"series",unlockSeries:3},{id:"trex-jaws",name:"T-Rex Jaws",imageUrl:`${Ye}creatures/hat-trex-jaws.png`,unlockCondition:"series",unlockSeries:3},{id:"tooth-buddy",name:"Toothy",imageUrl:`${Ye}creatures/hat-tooth-buddy.png`,unlockCondition:"secret"}];function my(e,t,n,r=[]){return Sr.filter(a=>{switch(a.unlockCondition){case"starter":return!0;case"sessions":return e>=(a.unlockThreshold||0);case"streak":return t>=(a.unlockThreshold||0);case"creature":return n>=(a.unlockThreshold||0);case"series":return a.unlockSeries?Cr(a.unlockSeries,r):!1;case"secret":return!1;default:return!1}})}const gy=7;function yy({userProgress:e,currentProfile:t,onStartBrushing:n,onViewCollection:r,onViewSettings:a,onSwitchProfile:o,onUnlockSecretBuddy:u}){const h=sy(),[p,y]=k.useState(0),[j,S]=k.useState({x:0,y:0}),[E,W]=k.useState(!1),[$,I]=k.useState(!1);k.useEffect(()=>(h.start(),()=>h.stop()),[]);const V=e.unlockedBuddies.some(b=>b.id==="tooth-buddy"),x=Sr.find(b=>b.id==="tooth-buddy"),v=k.useCallback(()=>{if(E||$)return;const b=p+1;if(y(b),Tn("tooth-bounce"),S({x:(Math.random()-.5)*60,y:(Math.random()-.5)*40}),b>=gy){W(!0),Tn("tooth-fly");const _=Math.random()*Math.PI*.6+Math.PI*.2,G=Math.cos(_)*400*(Math.random()>.5?1:-1),z=-Math.abs(Math.sin(_)*400)-100;S({x:G,y:z}),window.setTimeout(()=>{if(I(!0),x&&!V&&u){const N={...x,unlockedAt:new Date};u(N).catch(()=>{})}},400)}},[p,E,$,x,V,u]);return c.jsxs("div",{className:"flex flex-col items-center justify-between h-full p-6 text-center",children:[c.jsxs("div",{className:"w-full flex justify-between items-center",children:[c.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-purple-800/50 hover:bg-purple-700/50 transition-colors",children:[c.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:t.avatarColor},children:t.name.charAt(0).toUpperCase()}),c.jsx("span",{className:"text-white font-medium",children:t.name}),c.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})]}),c.jsx("button",{onClick:a,className:"p-2 text-2xl text-purple-300 hover:text-white transition-colors","aria-label":"Settings",children:""})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[c.jsxs("div",{className:"relative mb-4 flex items-center justify-center min-h-[6rem]",children:[c.jsx("div",{className:"text-6xl",children:""}),!$&&c.jsx("button",{type:"button",onClick:v,className:"absolute text-8xl cursor-pointer select-none touch-manipulation active:scale-95 transition-transform duration-75 hover:scale-110 focus:outline-none focus:ring-0",style:{transform:`translate(${j.x}px, ${j.y}px)`,transition:E?"transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)":"transform 0.2s ease-out"},"aria-label":"Tap the tooth",children:""}),c.jsx("div",{className:"text-6xl",children:""})]}),c.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-500 bg-clip-text text-transparent",children:"Sparkle Brush!"}),c.jsx("p",{className:"text-xl text-purple-200 max-w-xs",children:"Make your teeth sparkle and catch amazing creatures!"}),c.jsxs("div",{className:"flex gap-4 mt-4 text-lg",children:[c.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),c.jsx("div",{className:"text-sm text-purple-300",children:"Day Streak"})]}),c.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[c.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.capturedCreatures.length}),c.jsx("div",{className:"text-sm text-purple-300",children:"Creatures"})]}),c.jsxs("div",{className:"bg-purple-800/50 rounded-xl px-4 py-2",children:[c.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.totalSessions}),c.jsx("div",{className:"text-sm text-purple-300",children:"Sessions"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-xs pb-8",children:[c.jsx("button",{onClick:n,className:"w-full py-5 px-8 text-2xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg animate-button-glow active:scale-95 transition-transform",children:"Start Brushing! "}),c.jsx("button",{onClick:r,className:"w-full py-3 px-6 text-lg font-semibold text-purple-200 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"My Collection "})]})]})}const zp=k.createContext(null);function vy({children:e}){const t=k.useRef(null),n=k.useRef(null),r=k.useRef(null),a=k.useRef(!1),o=k.useRef(null),[u,h]=k.useState(null),[p,y]=k.useState(!1),[j,S]=k.useState(null),E=k.useCallback(v=>{const b=v||t.current,_=r.current;if(console.log("[CameraContext] attachStreamToVideo called:",{hasVideo:!!b,hasStream:!!_,videoId:b==null?void 0:b.id,streamActive:_==null?void 0:_.active,streamTracks:_==null?void 0:_.getTracks().map(G=>({kind:G.kind,enabled:G.enabled,readyState:G.readyState})),isSameAsLastAttached:b===o.current}),!b||!_)return console.warn("[CameraContext] Video or stream not available"),!1;if(b.srcObject===_&&b===o.current)return console.log("[CameraContext] Stream already attached to this video element"),b.readyState>=2&&!b.paused&&y(!0),!0;try{console.log("[CameraContext] Attaching stream to video element..."),b.srcObject=_,o.current=b;const G=()=>{console.log("[CameraContext] Video can play, attempting to play..."),b.play().then(()=>{console.log("[CameraContext] Video playing successfully"),y(!0)}).catch(z=>{console.error("[CameraContext] Error playing video:",z)})};return b.oncanplay=G,b.onloadeddata=G,b.readyState>=3?G():b.load(),b.onerror=()=>{console.error("[CameraContext] Video element error"),S("Video element error")},!0}catch(G){return console.error("[CameraContext] Error attaching stream:",G),!1}},[]),W=k.useCallback(async()=>{if(a.current){console.log("startCamera already in progress, skipping...");return}if(r.current&&p){console.log("Camera already running and ready");return}if(r.current&&t.current){console.log("Stream exists, reattaching..."),E();return}if(r.current&&!t.current){console.log("Stream exists but no video element, waiting...");return}a.current=!0;try{S(null),y(!1),console.log("Requesting camera access...");const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("Camera access granted, tracks:",v.getVideoTracks().length),r.current=v,h(v),setTimeout(()=>{E(),a.current=!1},100)}catch(v){a.current=!1;let b="Failed to access camera";v instanceof Error&&(v.name==="NotAllowedError"?b="Camera permission denied. Please allow camera access.":v.name==="NotFoundError"?b="No camera found on this device.":v.name==="NotReadableError"?b="Camera is being used by another app.":b=v.message),S(b),console.error("Camera error:",v)}},[p,E]);k.useEffect(()=>{var v;console.log("[CameraContext] Stream/video effect:",{hasStream:!!u,hasVideoRef:!!t.current,videoSrcObject:!!((v=t.current)!=null&&v.srcObject),isReady:p}),!(!u||!t.current)&&(t.current.srcObject||(console.log("[CameraContext] Effect: video element needs stream attached"),E()))},[u,E,p]),k.useEffect(()=>{if(!u||p)return;const v=t.current;if(!v)return;const b=()=>v.readyState>=2&&v.videoWidth>0&&!v.paused?(console.log("Polling detected video is ready"),y(!0),!0):!1;if(b())return;const _=setInterval(()=>{b()&&clearInterval(_)},200),G=setTimeout(()=>{clearInterval(_)},5e3);return()=>{clearInterval(_),clearTimeout(G)}},[u,p]);const $=k.useCallback(()=>{console.log("Stopping camera..."),a.current=!1,r.current&&(r.current.getTracks().forEach(v=>{v.stop()}),r.current=null),h(null),y(!1),t.current&&(t.current.srcObject=null)},[]),I=k.useCallback(v=>{console.log("[CameraContext] registerVideoElement called:",{hasVideo:!!v,hasStream:!!r.current,isDifferentElement:v!==o.current}),v&&(t.current=v,r.current&&v!==o.current&&(console.log("[CameraContext] New video element detected, re-attaching stream..."),y(!1),E(v)))},[E]),V=k.useCallback(()=>{if(!t.current)return null;const v=t.current;if(v.videoWidth===0||v.videoHeight===0)return null;n.current||(n.current=document.createElement("canvas"));const b=n.current;b.width=v.videoWidth,b.height=v.videoHeight;const _=b.getContext("2d");return _?(_.drawImage(v,0,0),b.toDataURL("image/jpeg",.8)):null},[]),x=k.useCallback(async v=>{if(!t.current)return null;const b=t.current;if(b.videoWidth===0||b.videoHeight===0)return null;const _=document.createElement("canvas");_.width=b.videoWidth,_.height=b.videoHeight;const G=_.getContext("2d");if(!G)return null;if(G.save(),G.translate(_.width,0),G.scale(-1,1),G.drawImage(b,0,0),G.restore(),v&&v.imageUrl)try{const z=new Image;z.crossOrigin="anonymous",await new Promise((X,te)=>{z.onload=()=>X(),z.onerror=te,z.src=v.imageUrl});const{x:N,y:L,size:H,rotation:O,flipX:T}=v;G.save(),G.translate(N,L),G.rotate(O*Math.PI/180),G.scale(T?-1:1,1),G.drawImage(z,-H/2,-H/2,H,H),G.restore()}catch(z){console.error("Failed to load buddy image for capture:",z)}return _.toDataURL("image/jpeg",.8)},[]);return k.useEffect(()=>()=>{r.current&&r.current.getTracks().forEach(v=>v.stop())},[]),c.jsx(zp.Provider,{value:{videoRef:t,stream:u,isReady:p,error:j,startCamera:W,stopCamera:$,captureFrame:V,captureFrameWithBuddy:x,registerVideoElement:I},children:e})}function wo(){const e=k.useContext(zp);if(!e)throw new Error("useSharedCamera must be used within a CameraProvider");return e}function xy({onConfirm:e,onCancel:t}){const{isReady:n,error:r,startCamera:a,stopCamera:o,registerVideoElement:u}=wo(),[h,p]=k.useState(!1),[y,j]=k.useState(!1),S=k.useRef(!1),E=k.useRef(null),W=k.useCallback(x=>{console.log("[CameraCheck] Video ref callback:",{hasElement:!!x}),E.current=x,x&&u(x)},[u]);k.useEffect(()=>{S.current||(S.current=!0,a())},[a]),k.useEffect(()=>{const x=setTimeout(()=>{p(!0)},3e3);return()=>clearTimeout(x)},[]),k.useEffect(()=>{const x=()=>{const b=E.current;b&&b.videoWidth>0&&b.videoHeight>0&&!b.paused&&j(!0)},v=setInterval(x,200);return x(),()=>clearInterval(v)},[]);const $=()=>{o(),t()},I=()=>{S.current=!1,o(),setTimeout(()=>{S.current=!0,a()},500)},V=n||y;return c.jsxs("div",{className:"flex flex-col h-full p-6",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Camera Check! "}),c.jsx("p",{className:"text-purple-200",children:"Make sure you can see yourself below"})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-purple-900/50 rounded-2xl overflow-hidden mb-4",children:[c.jsx("video",{ref:W,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),!V&&!r&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-purple-900/80",children:[c.jsx("div",{className:"text-4xl mb-4 animate-bounce-gentle",children:""}),c.jsx("div",{className:"text-lg text-purple-200 animate-pulse",children:"Starting camera..."}),c.jsx("div",{className:"text-sm text-purple-300 mt-2",children:"Please allow camera access when prompted"})]}),r&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/80 p-4",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("div",{className:"text-lg font-bold text-white mb-2",children:"Camera Error"}),c.jsx("div",{className:"text-sm text-red-200 text-center mb-4",children:r}),c.jsxs("div",{className:"text-xs text-red-300 text-center",children:["Please check that:",c.jsxs("ul",{className:"list-disc list-inside mt-2 text-left",children:[c.jsx("li",{children:"Camera permissions are enabled"}),c.jsx("li",{children:"No other app is using the camera"}),c.jsx("li",{children:"Your browser supports camera access"})]})]})]}),V&&c.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:c.jsxs("div",{className:"bg-green-600/90 rounded-full px-4 py-2 text-sm text-white flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Camera is working!"]})})]}),V&&c.jsx("div",{className:"text-center text-purple-200 text-sm mb-4",children:"Can you see yourself? "})]}),c.jsxs("div",{className:"flex flex-col gap-3",children:[V&&c.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Yes, I can see myself! "}),h&&!V&&!r&&c.jsx("button",{onClick:e,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Continue Anyway "}),r&&c.jsx("button",{onClick:I,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl shadow-lg active:scale-95 transition-transform",children:"Try Again "}),c.jsx("button",{onClick:$,className:"w-full py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl active:scale-95 transition-transform",children:"Go Back"})]})]})}function Lp({buddyId:e,size:t}){const n=Sr.find(r=>r.id===e);return n?c.jsx("img",{src:n.imageUrl,alt:n.name,width:t,height:t,style:{objectFit:"contain",imageRendering:"auto"}}):null}function wy({userProgress:e,onSelect:t,onBack:n}){const r=e.capturedCreatures.map(u=>u.id),a=my(e.totalSessions,e.currentStreak,e.capturedCreatures.length,r),o=new Set([...a.map(u=>u.id),...e.unlockedBuddies.map(u=>u.id)]);return c.jsxs("div",{className:"flex flex-col h-full p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("button",{onClick:n,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),c.jsx("h1",{className:"text-xl font-bold",children:"Choose Your Buddy!"}),c.jsx("div",{className:"w-16"})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[c.jsxs("button",{onClick:()=>t(null),className:"aspect-square bg-purple-800/30 rounded-2xl flex flex-col items-center justify-center border-2 border-dashed border-purple-500/50 active:scale-95 transition-transform",children:[c.jsx("div",{className:"text-3xl mb-1",children:""}),c.jsx("div",{className:"text-xs text-purple-300",children:"No Buddy"})]}),Sr.map(u=>{const h=o.has(u.id);return c.jsxs("button",{onClick:()=>h&&t(u),disabled:!h,className:`aspect-square rounded-2xl flex flex-col items-center justify-center transition-all p-2 ${h?"bg-purple-800/50 active:scale-95":"bg-purple-900/30 opacity-50 cursor-not-allowed"}`,children:[c.jsx("div",{className:`flex-1 flex items-center justify-center w-full ${h?"":"grayscale"}`,children:h?c.jsx(Lp,{buddyId:u.id,size:90}):c.jsx("span",{className:"text-4xl",children:""})}),c.jsx("div",{className:"text-xs text-center px-1 truncate w-full mt-1",children:h?u.name:by(u)})]},u.id)})]})}),c.jsx("button",{onClick:()=>t(null),className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Start Without Buddy"})]})}function by(e){switch(e.unlockCondition){case"sessions":return`${e.unlockThreshold} sessions`;case"streak":return`${e.unlockThreshold} day streak`;case"creature":return`${e.unlockThreshold} creatures`;case"series":return`Complete Series ${e.unlockSeries}`;case"secret":return"???";default:return"Locked"}}const $p={id:"faceZone",label:"Face",x:.3,y:.25,w:.4,h:.5},Oi=[$p];class ky{constructor(){Nt(this,"canvas");Nt(this,"ctx");Nt(this,"previousFrame",null);Nt(this,"pixelThreshold",20);Nt(this,"motionThresholdPercent",2.5);Nt(this,"frameCount",0);Nt(this,"debugMode",!1);Nt(this,"lastDebugInfo",null);Nt(this,"smoothedFaceCenter",null);Nt(this,"smoothingFactor",.15);this.canvas=document.createElement("canvas");const t=this.canvas.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Could not get canvas context");this.ctx=t}getZonesForFace(t,n,r){if(!t||n===0||r===0)return[$p];const a=t.x/n,o=t.y/r,u=t.width/n,h=t.height/r,p={x:a,y:o+h*.5,w:u,h};this.smoothedFaceCenter?this.smoothedFaceCenter={x:this.smoothedFaceCenter.x+(p.x-this.smoothedFaceCenter.x)*this.smoothingFactor,y:this.smoothedFaceCenter.y+(p.y-this.smoothedFaceCenter.y)*this.smoothingFactor,w:this.smoothedFaceCenter.w+(p.w-this.smoothedFaceCenter.w)*this.smoothingFactor,h:this.smoothedFaceCenter.h+(p.h-this.smoothedFaceCenter.h)*this.smoothingFactor}:this.smoothedFaceCenter=p;const y=this.smoothedFaceCenter,j=Math.max(.3,Math.min(.5,y.w*1.4)),S=Math.max(.35,Math.min(.55,y.h*1.2)),E=y.x-j/2,W=y.y-S/2,$=(x,v,b)=>Math.max(v,Math.min(b,x)),I=$(E,.02,1-j-.02),V=$(W,.05,1-S-.05);return[{id:"faceZone",label:"Face",x:I,y:V,w:j,h:S}]}setDebugMode(t){this.debugMode=t}getDebugInfo(){return this.lastDebugInfo}getCurrentZones(t,n,r){return this.getZonesForFace(t,n,r)}getFaceRegionNormalized(t,n,r){if(!t)return null;const a=.25,o=(t.x-t.width/2)/(n/a),u=t.y/(r/a),h=t.width/(n/a),p=t.height/(r/a);return{x:o,y:u,w:h,h:p}}isInFaceCore(t,n,r,a,o){const u=this.getFaceRegionNormalized(r,a,o);if(!u)return!1;const h=u.x+u.w*.15,p=u.y+u.h*.1,y=u.w*.7,j=u.h*.5;return t>=h&&t<=h+y&&n>=p&&n<=p+j}isInBrushingRegion(t,n,r,a,o){const u=this.getFaceRegionNormalized(r,a,o);if(!u)return n>.2;const h=u.x-u.w*1,p=u.y-u.h*.1,y=u.w*3,j=u.h*2.5;return t>=h&&t<=h+y&&n>=p&&n<=p+j}getBrushingRegion(t,n,r){const o=n*.25,u=r*.25,h=this.getFaceRegionNormalized(t,o,u);if(!h)return{x:0,y:.2*r,width:n,height:.8*r};const p=h.x-h.w*1,y=h.y-h.h*.1,j=h.w*3,S=h.h*2.5;return{x:Math.max(0,p*n),y:Math.max(0,y*r),width:Math.min(j*n,n),height:Math.min(S*r,r)}}detectMotion(t,n=null){this.frameCount++;const r=this.getZonesForFace(n,t.videoWidth,t.videoHeight);if(!t.videoWidth||!t.videoHeight)return r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));const a=.25,o=Math.floor(t.videoWidth*a),u=Math.floor(t.videoHeight*a);(this.canvas.width!==o||this.canvas.height!==u)&&(this.canvas.width=o,this.canvas.height=u,this.previousFrame=null);try{this.ctx.drawImage(t,0,0,o,u)}catch(E){return console.error("[MotionDetector] Failed to draw video frame:",E),r.map(W=>({zoneId:W.id,motionLevel:0,hasMotion:!1}))}const h=this.ctx.getImageData(0,0,o,u);if(!this.previousFrame)return this.previousFrame=h,r.map(E=>({zoneId:E.id,motionLevel:0,hasMotion:!1}));let p=0,y=!1;const j=[],S=r.map(E=>{const W=Math.floor(E.x*o),$=Math.floor(E.y*u),I=Math.floor(E.w*o),V=Math.floor(E.h*u);let x=0,v=0;for(let G=$;G<$+V&&G<u;G++)for(let z=W;z<W+I&&z<o;z++){const N=z/o,L=G/u;if(this.isInFaceCore(N,L,n,o,u)||!this.isInBrushingRegion(N,L,n,o,u))continue;const H=(G*o+z)*4,O=Math.abs(h.data[H]-this.previousFrame.data[H]),T=Math.abs(h.data[H+1]-this.previousFrame.data[H+1]),X=Math.abs(h.data[H+2]-this.previousFrame.data[H+2]),te=(O+T+X)/3;te>this.pixelThreshold&&(x++,p+=te),v++}const b=v>0?x/v*100:0,_=b>this.motionThresholdPercent;return _&&(y=!0),this.debugMode&&j.push({id:E.id,bounds:{x:E.x,y:E.y,width:E.w,height:E.h},motionLevel:Math.min(b*2,100),hasMotion:_,motionPixels:x,totalPixels:v}),{zoneId:E.id,motionLevel:Math.min(b*2,100),hasMotion:_}});if(this.debugMode){const E=this.getBrushingRegion(n,o/.25,u/.25);this.lastDebugInfo={faceRegion:n,brushingRegion:E,zones:j,frameMotionTotal:p,handMotionDetected:y}}if(this.previousFrame=h,this.frameCount%20===0){const E=S.filter(W=>W.hasMotion).length;console.log("[MotionDetector] Frame",this.frameCount,"- Active zones:",E,"- Hand motion:",y,"- Total motion:",p.toFixed(0))}return S}reset(){this.previousFrame=null,this.frameCount=0,this.smoothedFaceCenter=null}}function Vp(e={}){const{targetCleaningTime:t=20,detectionInterval:n=100,decayRate:r=.8,debugMode:a=!1}=e,o=k.useRef(null),u=k.useRef(null),h=k.useRef(null),p=k.useRef({}),y=k.useRef({}),j=k.useRef(null),S=k.useRef(a),[E,W]=k.useState(()=>Oi.map(O=>({zoneId:O.id,cleaningProgress:0,isComplete:!1}))),[$,I]=k.useState(()=>Oi.map(O=>({zoneId:O.id,motionLevel:0,hasMotion:!1}))),V=k.useCallback(O=>{j.current=O},[]),x=k.useCallback(O=>{S.current=O,o.current&&o.current.setDebugMode(O)},[]),v=k.useCallback(()=>{var O;return((O=o.current)==null?void 0:O.getDebugInfo())??null},[]),b=k.useCallback(()=>{const O=Oi.map(T=>{const te=(p.current[T.id]||0)/t*100;return{zoneId:T.id,cleaningProgress:te,isComplete:te>=100}});W(O)},[t]),_=k.useCallback(()=>{if(!o.current||!u.current)return;const O=u.current;if(O.paused&&O.srcObject&&O.play().catch(()=>{}),O.readyState<2||O.videoWidth===0)return;const T=o.current.detectMotion(O,j.current);I(T),T.forEach(X=>{const te=p.current[X.zoneId]||0;if(X.hasMotion){y.current[X.zoneId]=0;const oe=n/1e3*(X.motionLevel/60);p.current[X.zoneId]=Math.min(te+oe,t)}else{const oe=(y.current[X.zoneId]||0)+1;if(y.current[X.zoneId]=oe,oe>5){const xe=n/1e3*r;p.current[X.zoneId]=Math.max(0,te-xe)}}}),b()},[n,b,r]),G=k.useCallback(O=>{console.log("[MotionDetection] startDetection called:",{videoReadyState:O.readyState,videoWidth:O.videoWidth,videoHeight:O.videoHeight,srcObject:!!O.srcObject,paused:O.paused}),O.paused&&(console.log("[MotionDetection] Video is paused, attempting to play..."),O.play().then(()=>{console.log("[MotionDetection] Video now playing")}).catch(T=>{console.error("[MotionDetection] Failed to play video:",T)})),o.current||(o.current=new ky),o.current.setDebugMode(S.current),u.current=O,h.current&&clearInterval(h.current),h.current=window.setInterval(_,n),console.log("[MotionDetection] Detection interval started")},[_,n]),z=k.useCallback(()=>{h.current&&(clearInterval(h.current),h.current=null)},[]),N=k.useCallback(()=>{var O;p.current={},y.current={},(O=o.current)==null||O.reset(),W(Oi.map(T=>({zoneId:T.id,cleaningProgress:0,isComplete:!1}))),I(Oi.map(T=>({zoneId:T.id,motionLevel:0,hasMotion:!1})))},[]);k.useEffect(()=>()=>{h.current&&clearInterval(h.current)},[]);const L=E.reduce((O,T)=>O+T.cleaningProgress,0)/E.length,H=E.every(O=>O.isComplete);return{zoneProgress:E,motionResults:$,overallProgress:L,isComplete:H,startDetection:G,stopDetection:z,reset:N,setFaceRegion:V,setDebugMode:x,getDebugInfo:v}}const Cy="modulepreload",Sy=function(e){return"/vibe-brushing/"+e},ff={},hf=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(n.map(p=>{if(p=Sy(p),p in ff)return;ff[p]=!0;const y=p.endsWith(".css"),j=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":Cy,y||(S.as="script"),S.crossOrigin="",S.href=p,h&&S.setAttribute("nonce",h),document.head.appendChild(S),y)return new Promise((E,W)=>{S.addEventListener("load",E),S.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};function Gp(){const[e,t]=k.useState(null),[n,r]=k.useState(!1),[a,o]=k.useState(!0),u=k.useRef(null),h=k.useRef(null),p=k.useRef(null),y=k.useRef("fallback"),j=k.useRef(null),S=k.useRef(null),E=k.useRef(null),W=k.useRef(null),$=k.useRef(!1),I=k.useRef(!1),V=k.useRef(null),x=k.useCallback(async()=>{if(V.current)return V.current;const N=async()=>{if(r(!0),console.log("[FaceTracking] Initializing detector..."),"FaceDetector"in window&&window.FaceDetector)try{const L=new window.FaceDetector({maxDetectedFaces:1,fastMode:!0});return await L.detect(document.createElement("video")),h.current=L,y.current="native",r(!1),console.log("[FaceTracking] Using native FaceDetector API"),!0}catch(L){console.warn("[FaceTracking] Native FaceDetector not available:",L)}try{console.log("[FaceTracking] Loading TensorFlow.js...");const L=await hf(()=>import("./index-qLcj4pmu.js"),__vite__mapDeps([0,1]));await L.ready();try{await L.setBackend("webgl"),console.log("[FaceTracking] Using WebGL backend")}catch{console.log("[FaceTracking] WebGL failed, trying CPU backend"),await L.setBackend("cpu")}console.log("[FaceTracking] Loading face detection model...");const H=await hf(()=>import("./face-landmarks-detection.esm-GBPXGIpd.js"),__vite__mapDeps([2,1])),O=H.SupportedModels.MediaPipeFaceMesh,T=await H.createDetector(O,{runtime:"tfjs",refineLandmarks:!1,maxFaces:1});return p.current=T,y.current="tfjs",r(!1),console.log("[FaceTracking] Using TensorFlow.js FaceMesh"),!0}catch(L){return console.warn("[FaceTracking] TensorFlow.js face tracking failed:",L),y.current="fallback",r(!1),o(!1),console.log("[FaceTracking] Using center-of-frame fallback"),!0}};return V.current=N(),V.current},[]),v=k.useCallback(N=>{const L=W.current;if(!L)return W.current=N,N;const H=Math.abs(N.x-L.x),O=Math.abs(N.y-L.y),T=H+O;if(T<15)return L;const X=T>50?.7:T>25?.4:.2,te={x:L.x+(N.x-L.x)*X,y:L.y+(N.y-L.y)*X,width:L.width+(N.width-L.width)*.2,height:L.height+(N.height-L.height)*.2,rotation:N.rotation};return W.current=te,te},[]),b=k.useCallback(N=>{var $t;S.current||(S.current=document.createElement("canvas"));const L=S.current,H=.2,O=Math.floor(N.videoWidth*H),T=Math.floor(N.videoHeight*H);L.width!==O&&(L.width=O),L.height!==T&&(L.height=T);const X=L.getContext("2d",{willReadFrequently:!0});if(!X)return null;X.drawImage(N,0,0,O,T);const te=X.getImageData(0,0,O,T),oe=te.data;let xe=0,we=0,le=0;const Q=new Array(O).fill(0);let ee=0,Z=0;const he=($t=E.current)==null?void 0:$t.data,ke=Math.floor(T*.6);for(let Oe=0;Oe<ke;Oe++)for(let me=0;me<O;me++){const ot=(Oe*O+me)*4,Te=oe[ot],xt=oe[ot+1],nt=oe[ot+2];if(Te+xt+nt>200){const Rt=1+(1-Oe/ke);Z+=Rt,ee+=Oe*Rt}if(he){const Rt=he[ot],ie=he[ot+1],Se=he[ot+2],je=Math.abs(Te-Rt)+Math.abs(xt-ie)+Math.abs(nt-Se);if(je>40){const Pe=je*(1+(1-Oe/ke));le+=Pe,xe+=me*Pe,we+=Oe*Pe,Q[me]+=je}}}E.current=te;const Le=W.current;let Ae;if(le>2e4){const Oe=Math.floor(xe/le),ot=Math.max(...Q)*.15;let Te=Oe,xt=Oe;for(let ie=Oe;ie>=0&&Oe-ie<O*.4;ie--)if(Q[ie]>=ot)Te=ie;else if(ie<Oe-5)break;for(let ie=Oe;ie<O&&ie-Oe<O*.4;ie++)if(Q[ie]>=ot)xt=ie;else if(ie>Oe+5)break;const nt=(xt-Te)/H,Ft=N.videoWidth*.1,Rt=N.videoWidth*.4;Ae=Math.max(Ft,Math.min(Rt,nt*1.5)),console.log(`[FaceTracking] Motion: center=${Oe}, span=${nt.toFixed(0)}px  faceW: ${Ae.toFixed(0)}`)}else Le?Ae=Le.width:Ae=N.videoWidth*.2;const Ue=N.videoWidth/2;let Ie;le>2e4?Ie="motion":Z>100?Ie="skin":Ie="center";let Je;if(le>2e4){const Oe=we/le/H;Je=Math.max(N.videoHeight*.05,Oe*.6)}else if(Z>100){const Oe=ee/Z/H;Je=Math.max(N.videoHeight*.05,Oe*.5)}else Je=N.videoHeight*.15;return console.log(`[FaceTracking] Fallback (${Ie}): x=${Ue.toFixed(0)}, y=${Je.toFixed(0)}, w=${Ae.toFixed(0)}`),{x:Ue,y:Je,width:Ae,height:Ae*1.2,rotation:0}},[]),_=k.useCallback(async()=>{if(!u.current||$.current)return;const N=u.current;if(!(N.readyState<2||N.videoWidth===0)){$.current=!0;try{let L=null;if(y.current==="native"&&h.current)try{const H=await h.current.detect(N);if(H.length>0){const O=H[0].boundingBox;L={x:O.x+O.width/2,y:O.y,width:O.width,height:O.height,rotation:0}}}catch(H){console.warn("[FaceTracking] Native detection error:",H)}else if(y.current==="tfjs"&&p.current)try{const H=await p.current.estimateFaces(N);if(H.length!==0){console.log("[FaceTracking] TFJS found",H.length,"face(s)");const O=H[0];console.log("[FaceTracking] TFJS face keys:",Object.keys(O));const T=O.box||O.boundingBox;if(T){const X=T.xMin??0,te=T.yMin??0,oe=T.width??(T.xMax?T.xMax-X:100),xe=T.height??(T.yMax?T.yMax-te:100);console.log("[FaceTracking] TFJS box:",{xMin:X,yMin:te,w:oe,h:xe}),L={x:X+oe/2,y:te,width:Math.min(oe,N.videoWidth*.8),height:Math.min(xe,N.videoHeight*.8),rotation:0}}}}catch(H){console.warn("[FaceTracking] TFJS detection error:",H)}if(L||(L=b(N)),L){const H=v(L);t(H)}else W.current&&t(W.current)}catch(L){console.warn("[FaceTracking] Detection error:",L)}finally{$.current=!1}}},[b,v]),G=k.useCallback(async N=>{console.log("[FaceTracking] Starting tracking"),u.current=N,I.current=!0,await x();const L=async()=>{if(I.current&&(await _(),I.current)){const H=y.current==="tfjs"?150:100;j.current=window.setTimeout(()=>{requestAnimationFrame(L)},H)}};L()},[x,_]),z=k.useCallback(()=>{console.log("[FaceTracking] Stopping tracking"),I.current=!1,j.current&&(clearTimeout(j.current),j.current=null),W.current=null,t(null)},[]);return k.useEffect(()=>()=>{I.current=!1,j.current&&clearTimeout(j.current)},[]),{facePosition:e,isLoading:n,isSupported:a,startTracking:G,stopTracking:z}}const Wp={grassland:{id:"grassland",name:"Sparkle Meadows",description:"A peaceful meadow filled with wildflowers and friendly creatures",colors:{primary:"#22C55E",secondary:"#86EFAC",accent:"#FDE047",background:"#ECFDF5"},particles:["","","",""]},coastal:{id:"coastal",name:"Crystal Shores",description:"Sandy beaches and sparkling waves hide aquatic robot friends",colors:{primary:"#0EA5E9",secondary:"#7DD3FC",accent:"#FCD34D",background:"#F0F9FF"},particles:["","","",""]},lava:{id:"lava",name:"Ember Peaks",description:"Volcanic mountains where fire-forged creatures dwell",colors:{primary:"#EF4444",secondary:"#FB923C",accent:"#FBBF24",background:"#1C1917"},particles:["","","",""]},city:{id:"city",name:"Neon District",description:"A futuristic city where digital creatures roam the streets",colors:{primary:"#A855F7",secondary:"#E879F9",accent:"#22D3EE",background:"#0F0B1A"},particles:["","","",""]},sky:{id:"sky",name:"Cloud Kingdom",description:"Floating islands high above where sky creatures soar",colors:{primary:"#F8FAFC",secondary:"#BAE6FD",accent:"#FDE68A",background:"#E0F2FE"},particles:["","","",""]}},pf=["grassland","coastal","lava","city","sky"];function jy(){return pf[Math.floor(Math.random()*pf.length)]}function Ty(e){return Wp[e]}const Up="sparkle-app-settings",mf={sessionDurationSeconds:120};function qp(){try{const e=localStorage.getItem(Up);if(e)return{...mf,...JSON.parse(e)}}catch(e){console.warn("Failed to load settings:",e)}return mf}function Ey(e){try{localStorage.setItem(Up,JSON.stringify(e))}catch(t){console.warn("Failed to save settings:",t)}}function Kp(){return qp().sessionDurationSeconds}const gf=1,Ny=6,yf=1,Ay=10,Py=.24,_y=160,Dy=80,ca=10;function Hp({buddy:e,containerWidth:t,containerHeight:n,activityScore:r=0}){const[a,o]=k.useState(!1),u=k.useRef(null),h=k.useRef(null),[p,y]=k.useState(null),j=k.useRef(0),S=Math.min(_y,Math.max(Dy,t*Py));if(k.useEffect(()=>{o(!1);const $=new Image;$.src=e.imageUrl,$.onload=()=>o(!0)},[e.imageUrl]),k.useEffect(()=>{t===0||n===0||h.current||(h.current={x:t*.7,y:n*.15,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,rotation:0,rotationSpeed:(Math.random()-.5)*2,flipX:!1},y({...h.current}))},[t,n]),k.useEffect(()=>{if(t===0||n===0||!h.current)return;const $=1+r/100*(Ny-1),I=1+r/100*(Ay/yf-1),V=x=>{if(!h.current)return;const v=j.current?Math.min((x-j.current)/16.67,3):1;j.current=x;const b=h.current,_=S/2,G=ca+_,z=t-ca-_,N=ca+_,L=n-ca-_;let H=b.x+b.vx*gf*$*v,O=b.y+b.vy*gf*$*v,T=b.vx,X=b.vy,te=b.flipX;H<=G?(H=G,T=Math.abs(T),te=!te):H>=z&&(H=z,T=-Math.abs(T),te=!te),O<=N?(O=N,X=Math.abs(X)):O>=L&&(O=L,X=-Math.abs(X));const oe=b.rotation+b.rotationSpeed*yf*I*v;r>50&&Math.random()<.005*v&&(b.rotationSpeed=(Math.random()-.5)*4),h.current={x:H,y:O,vx:T,vy:X,rotation:oe,rotationSpeed:b.rotationSpeed,flipX:te},y({...h.current}),u.current=requestAnimationFrame(V)};return u.current=requestAnimationFrame(V),()=>{u.current&&cancelAnimationFrame(u.current)}},[t,n,r,S]),!p||t===0||n===0)return null;const E=1+r/100*.1*Math.sin(Date.now()/200),W=r/100;return c.jsxs("div",{className:"absolute pointer-events-none",style:{left:`${p.x}px`,top:`${p.y}px`,transform:`
          translate(-50%, -50%) 
          rotate(${p.rotation}deg) 
          scaleX(${p.flipX?-1:1})
          scale(${E})
        `,filter:`drop-shadow(0 4px 8px rgba(0,0,0,0.3)) ${W>.3?`drop-shadow(0 0 ${8*W}px rgba(255, 200, 100, ${W*.6}))`:""}`,opacity:a?1:0,transition:"opacity 0.3s ease",willChange:"transform"},children:[c.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:S,height:S,objectFit:"contain"}}),r>70&&c.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4) 0%, transparent 50%)",animation:"pulse 0.5s ease-in-out infinite"}})]})}function Yp({getDebugInfo:e,containerWidth:t,containerHeight:n,videoWidth:r,videoHeight:a}){const[o,u]=k.useState(null);k.useEffect(()=>{const V=setInterval(()=>{const x=e();u(x)},50);return()=>clearInterval(V)},[e]);const h=t/r,p=n/a,y=Math.min(h,p),j=r*y,S=a*y,E=(t-j)/2,W=(n-S)/2,$=V=>{const x=r-V;return E+x*y},I=V=>W+V*y;return o?c.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50",children:[c.jsxs("svg",{className:"w-full h-full",style:{overflow:"visible"},children:[o.brushingRegion&&c.jsx("rect",{x:$(o.brushingRegion.x+o.brushingRegion.width),y:I(o.brushingRegion.y),width:o.brushingRegion.width*y,height:o.brushingRegion.height*y,fill:"rgba(0, 255, 0, 0.1)",stroke:"#00ff00",strokeWidth:"2",strokeDasharray:"8,4"}),o.faceRegion&&c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:$(o.faceRegion.x+o.faceRegion.width/2),y:I(o.faceRegion.y),width:o.faceRegion.width*y,height:o.faceRegion.height*y,fill:"none",stroke:"#ff6600",strokeWidth:"2"}),c.jsx("rect",{x:$(o.faceRegion.x+o.faceRegion.width*.35),y:I(o.faceRegion.y+o.faceRegion.height*.1),width:o.faceRegion.width*.7*y,height:o.faceRegion.height*.5*y,fill:"rgba(255, 0, 0, 0.3)",stroke:"#ff0000",strokeWidth:"1"})]}),o.zones.map(V=>{const x=V.bounds.x*r,v=V.bounds.y*a,b=V.bounds.width*r,_=V.bounds.height*a;return c.jsxs("g",{children:[c.jsx("rect",{x:$(x+b),y:I(v),width:b*y,height:_*y,fill:V.hasMotion?"rgba(0, 255, 0, 0.35)":"rgba(100, 200, 255, 0.15)",stroke:V.hasMotion?"#00ff00":"#66ccff",strokeWidth:V.hasMotion?3:2,rx:8}),c.jsx("text",{x:$(x+b/2),y:I(v+_/2),fill:V.hasMotion?"#00ff00":"#ffffff",fontSize:"14",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{textShadow:"0 0 4px black, 0 0 2px black"},children:V.hasMotion?`BRUSHING ${V.motionLevel.toFixed(0)}%`:"Move toothbrush here"})]},V.id)})]}),c.jsxs("div",{className:"absolute top-2 left-2 bg-black/90 text-white text-xs p-2 rounded font-mono max-w-[220px]",children:[c.jsx("div",{className:"font-bold mb-1 text-yellow-400",children:"DEBUG MODE"}),c.jsx("div",{className:o.handMotionDetected?"text-green-400 font-bold text-sm":"text-gray-400",children:o.handMotionDetected?" BRUSHING DETECTED":" No motion"}),c.jsxs("div",{className:"text-gray-300",children:["Motion level: ",o.frameMotionTotal.toFixed(0)]}),o.zones[0]&&c.jsxs("div",{className:"text-gray-300",children:["Zone motion: ",o.zones[0].motionLevel.toFixed(1),"%"]}),c.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-600 text-[10px] text-gray-400",children:[c.jsx("span",{className:"text-cyan-400",children:"Blue box"})," = detection zone",c.jsx("br",{}),c.jsx("span",{className:"text-orange-400",children:"Orange"})," = face | ",c.jsx("span",{className:"text-red-400",children:"Red"})," = ignored"]})]})]}):c.jsx("div",{className:"absolute inset-0 pointer-events-none z-50",children:c.jsxs("div",{className:"absolute top-2 left-2 bg-black/80 text-white text-xs p-2 rounded font-mono",children:[c.jsx("div",{className:"font-bold text-yellow-400",children:"DEBUG MODE"}),c.jsx("div",{className:"text-gray-400",children:"Waiting for data..."})]})})}function Fy({selectedBuddy:e,onVideoReady:t,onContainerSize:n,activityScore:r=0,debugMode:a=!1,getDebugInfo:o}){const{isReady:u,error:h,registerVideoElement:p}=wo(),y=k.useRef(null),j=k.useRef(null),S=k.useRef(!1),[E,W]=k.useState({width:0,height:0}),[$,I]=k.useState({width:640,height:480}),V=k.useCallback(x=>{console.log("[CameraView] Video ref callback:",{hasElement:!!x}),y.current=x,x&&p(x)},[p]);return k.useEffect(()=>{const x=y.current;!x||!u||S.current||x.readyState>=2&&x.videoWidth>0&&(console.log("[CameraView] Video ready, calling onVideoReady"),S.current=!0,I({width:x.videoWidth,height:x.videoHeight}),t==null||t(x))},[u,t]),k.useEffect(()=>{const x=y.current;if(!x||S.current)return;const v=()=>{x.readyState>=2&&x.videoWidth>0&&!S.current&&(console.log("[CameraView] Video ready (from polling), calling onVideoReady"),S.current=!0,I({width:x.videoWidth,height:x.videoHeight}),t==null||t(x))},b=setInterval(v,100);return v(),()=>clearInterval(b)},[t]),k.useEffect(()=>{const x=j.current;if(!x)return;const v=()=>{const _=x.clientWidth,G=x.clientHeight;W({width:_,height:G}),n==null||n(_,G)};v();const b=new ResizeObserver(v);return b.observe(x),()=>b.disconnect()},[n]),k.useEffect(()=>{var x,v,b,_,G;console.log("[CameraView] Mounted/Updated",{hasVideoRef:!!y.current,isReady:u,error:h,videoReadyState:(x=y.current)==null?void 0:x.readyState,videoPaused:(v=y.current)==null?void 0:v.paused,videoWidth:(b=y.current)==null?void 0:b.videoWidth,videoHeight:(_=y.current)==null?void 0:_.videoHeight,srcObject:!!((G=y.current)!=null&&G.srcObject)})}),c.jsxs("div",{ref:j,className:"relative w-full h-full bg-purple-900/30 rounded-2xl overflow-hidden",children:[c.jsx("video",{ref:V,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!u&&!h&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/50",children:c.jsx("div",{className:"text-lg text-purple-300 animate-pulse",children:"Connecting..."})}),h&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/50 p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("div",{className:"text-red-300",children:h})]})}),e&&u&&E.width>0&&c.jsx(Hp,{buddy:e,containerWidth:E.width,containerHeight:E.height,activityScore:r}),a&&o&&E.width>0&&c.jsx(Yp,{getDebugInfo:o,containerWidth:E.width,containerHeight:E.height,videoWidth:$.width,videoHeight:$.height}),c.jsx("div",{className:"absolute bottom-2 left-2 right-2 flex justify-center",children:c.jsx("div",{className:"bg-black/50 rounded-full px-3 py-1 text-xs text-white",children:"Move your brush to clean!"})})]})}const vf={},Ry=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","s2-moss-mole","s2-crystal-caterpillar","s2-hedge-hog","s2-pollen-bot","s2-grass-slime","s2-acorn-knight","s2-daisy-drone","s2-cricket-bot","s2-emerald-elk","s2-mushroom-giant","s2-willow-wisp","s2-mega-slime","s2-crystal-guardian","s2-nature-computer","s3-phantom-rabbit","s3-dino-beetle","s3-ghost-flower","s3-mini-raptor","s3-wisp-bug","s3-fossil-frog","s3-shade-snake","s3-dino-chick","s3-phantom-stag","s3-tricerabot","s3-ghost-treant","s3-stego-tank","s3-spirit-king","s3-brachiobot","s2-sand-dollar-bot","s2-crystal-urchin","s2-bubble-blob","s2-starfish-drone","s2-barnacle-cluster","s2-kelp-dancer","s2-puffer-tank","s2-anemone-bot","s2-pearl-dragon","s2-giant-clam","s2-coral-golem","s2-crystal-shark","s2-deep-crystal","s3-ghost-fish","s3-ammonite-bot","s3-phantom-crab","s3-dunkle-pup","s3-wraith-jellyfish","s3-sea-scorpion","s3-ghost-eel","s3-nautilus-bot","s3-phantom-kraken","s3-mega-shark","s3-ship-ghost","s3-plesio-sub","s3-sea-phantom","s2-ember-sprite","s2-ruby-beetle","s2-lava-slime","s2-smoke-puff","s2-fire-ant","s2-sulfur-frog","s2-obsidian-crab","s2-spark-lizard","s2-ruby-serpent","s2-forge-titan","s2-fire-elemental","s2-crystal-wyrm","s2-planet-core","s3-solar-wisp","s3-basalt-golem","s3-lava-slug","s3-vent-worm","s3-flame-moth","s3-boiling-blob","s3-glass-shard","s3-volcano-phantom","s3-rex-supreme","s3-phoenix-ghost","s3-allo-hunter","s3-inferno-lord","s2-wifi-wisp","s2-graffiti-blob","s2-pipe-critter","s2-alley-cat","s2-meter-mite","s2-cable-snake","s2-vent-crawler","s2-hydrant-hound","s2-arcade-boss","s2-skyscraper-golem","s2-crystal-spider","s2-junk-dragon","s2-internet-spirit","s3-arcade-ghost","s3-concrete-fossil","s3-neon-phantom","s3-steam-bot","s3-holo-owl","s3-sonar-bat","s3-power-grid","s3-error-sprite","s3-train-phantom","s3-carno-cop","s3-theater-ghost","s3-urban-raptor","s3-city-specter","s2-breeze-sprite","s2-cloud-puff","s2-thunder-bird","s2-balloon-bug","s2-contrail-cat","s2-mist-sprite","s2-thermal-rider","s2-snowflake-sprite","s2-storm-giant","s2-crystal-griffin","s2-aurora-whale","s2-moon-moth","s2-sky-leviathan","s3-aurora-wisp","s3-moon-moth","s3-strato-sphinx","s3-jet-rider","s3-cosmic-dust","s3-rainbow-owl","s3-hail-hopper","s3-sky-whale","s3-moon-phantom","s3-quetz-carrier","s3-comet-specter","s3-ptero-titan","s3-sky-spirit","binsters-claymars","leaf-kong"],My=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function un({creature:e,size:t=200,showGunk:n=!1,gunkLevel:r=0,animated:a=!0,className:o=""}){const[u,h]=k.useState(!1),[p,y]=k.useState(!1),j=Ry.includes(e.id)&&!u,S=My.includes(e.id)&&!p,E=e.id in vf,W=n&&r>=90&&S,$=e.rarity==="mythic",I=e.rarity==="legendary",V=e.rarity==="rare",x=$?30:I?20:V?10:0,v=$?"#F97316":I?"#FFD700":"#60A5FA",b=n?Math.max(0,100-r)/100:1,_=n&&!W?Math.min(.8,r/100):0,G=n&&!W?Math.min(100,r*1.5):0,z=n&&!W?Math.max(0,(r-40)/60):0,N={width:t,height:t,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},L={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",filter:x>0&&b>.5?`drop-shadow(0 0 ${x*b}px ${v})`:void 0,transition:"filter 0.3s ease"},H={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:G>0?`hue-rotate(${G}deg) saturate(${1+G/100}) brightness(${1-G/300})`:void 0,transition:"filter 0.3s ease"},O={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(/vibe-brushing/creatures/gunk-overlay.png)",backgroundSize:"cover",backgroundPosition:"center top",opacity:_,pointerEvents:"none",mixBlendMode:"multiply",transition:"opacity 0.3s ease"},T={position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"20%",background:"radial-gradient(ellipse at 35% 50%, rgba(255,0,0,0.8) 0%, transparent 40%), radial-gradient(ellipse at 65% 50%, rgba(255,0,0,0.8) 0%, transparent 40%)",opacity:z,pointerEvents:"none",filter:"blur(2px)",transition:"opacity 0.3s ease"};if(j){const X={maxWidth:"100%",maxHeight:"100%",objectFit:"contain",filter:"drop-shadow(0 0 15px rgba(0, 255, 0, 0.5)) drop-shadow(0 0 30px rgba(255, 0, 0, 0.3))"};if(W)return c.jsx("div",{style:N,className:o,children:c.jsx("div",{style:{...L,filter:"drop-shadow(0 0 20px rgba(0, 100, 0, 0.8))"},className:a?"animate-creature-idle":"",children:c.jsx("img",{src:`/vibe-brushing/creatures/${e.id}-possessed.png`,alt:`${e.name} (Possessed)`,style:X,onError:()=>y(!0)})})});if(E){const te=vf[e.id],oe=te.frameWidth/te.frameHeight;let xe,we;oe>=1?(xe=t,we=t/oe):(we=t,xe=t*oe);const le={width:t,height:t,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},Q=`spritesheet-grid-${te.cols}x${te.rows}`,ee={width:xe,height:we,backgroundImage:`url(/vibe-brushing/creatures/${e.id}-spritesheet.png)`,backgroundSize:`${te.cols*100}% ${te.rows*100}%`,backgroundPosition:"0% 0%",backgroundRepeat:"no-repeat",filter:G>0?`hue-rotate(${G}deg) saturate(${1+G/100}) brightness(${1-G/300})`:void 0,animation:a?`${Q} ${te.animationDuration}s linear infinite`:void 0};return c.jsxs("div",{style:N,className:o,children:[c.jsx("div",{style:L,children:c.jsx("div",{style:le,children:c.jsx("div",{style:ee,"aria-label":e.name})})}),n&&r>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:O,className:"animate-gunk-drip"}),z>0&&c.jsx("div",{style:T,className:"animate-pulse-glow"})]})]})}return c.jsxs("div",{style:N,className:o,children:[c.jsx("div",{style:L,className:a?"animate-creature-idle":"",children:c.jsx("img",{src:`/vibe-brushing/creatures/${e.id}.png`,alt:e.name,style:H,onError:()=>h(!0)})}),n&&r>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{style:O,className:a?"animate-gunk-drip":""}),z>0&&c.jsx("div",{style:T,className:a?"animate-pulse-glow":""})]})]})}return c.jsx("div",{style:N,className:o,children:c.jsx(By,{creature:e,size:t,animated:a,cleanProgress:b,gunkOpacity:_,redEyeOpacity:z,glowAmount:x,glowColor:v})})}function By({creature:e,size:t,animated:n,cleanProgress:r,gunkOpacity:a,redEyeOpacity:o,glowAmount:u,glowColor:h}){const p={grassland:{primary:"#7FD858",secondary:"#FFB6C1",accent:"#FFD700"},coastal:{primary:"#4FC3F7",secondary:"#FFE082",accent:"#FF7043"},lava:{primary:"#FF7043",secondary:"#FFD54F",accent:"#F44336"},city:{primary:"#BA68C8",secondary:"#64B5F6",accent:"#FF4081"},sky:{primary:"#81D4FA",secondary:"#FFF59D",accent:"#FFFFFF"},all:{primary:"#F97316",secondary:"#FBBF24",accent:"#EF4444"}},y=p[e.region]||p.grassland,j=e.rarity==="legendary";return c.jsxs("svg",{viewBox:"0 0 100 100",width:t,height:t,style:{filter:u>0&&r>.5?`drop-shadow(0 0 ${u*r}px ${h})`:void 0},className:n?"animate-creature-idle":"",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:`fallback-body-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:y.primary,stopOpacity:"1"}),c.jsx("stop",{offset:"100%",stopColor:y.primary,stopOpacity:"0.7"})]}),c.jsxs("radialGradient",{id:`fallback-highlight-${e.id}`,cx:"30%",cy:"30%",r:"60%",children:[c.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.6"}),c.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})]}),c.jsx("ellipse",{cx:"50",cy:"55",rx:j?35:28,ry:j?32:26,fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"2"}),c.jsx("ellipse",{cx:"50",cy:"55",rx:j?35:28,ry:j?32:26,fill:`url(#fallback-highlight-${e.id})`}),c.jsx("ellipse",{cx:"40",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),c.jsx("ellipse",{cx:"60",cy:"50",rx:"6",ry:"7",fill:"white",stroke:"#333",strokeWidth:"0.5"}),c.jsx("ellipse",{cx:"42",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),c.jsx("ellipse",{cx:"62",cy:"51",rx:"3",ry:"4",fill:"#1A1A1A"}),c.jsx("ellipse",{cx:"43",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),c.jsx("ellipse",{cx:"63",cy:"49",rx:"1.2",ry:"1.5",fill:"white"}),c.jsx("path",{d:"M 44 65 Q 50 70 56 65",fill:"none",stroke:"#1A1A1A",strokeWidth:"2",strokeLinecap:"round"}),c.jsx("ellipse",{cx:"32",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),c.jsx("ellipse",{cx:"68",cy:"58",rx:"5",ry:"3",fill:y.secondary,opacity:"0.6"}),e.monsterType.includes("bunny")||e.monsterType.includes("rabbit")?c.jsxs(c.Fragment,{children:[c.jsx("ellipse",{cx:"35",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),c.jsx("ellipse",{cx:"65",cy:"25",rx:"6",ry:"18",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("cat")||e.monsterType.includes("kitten")?c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M 30 40 L 25 20 L 40 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"}),c.jsx("path",{d:"M 70 40 L 75 20 L 60 35",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1"})]}):e.monsterType.includes("dog")||e.monsterType.includes("pup")?c.jsxs(c.Fragment,{children:[c.jsx("ellipse",{cx:"28",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(-15 28 42)"}),c.jsx("ellipse",{cx:"72",cy:"42",rx:"8",ry:"14",fill:`url(#fallback-body-${e.id})`,stroke:y.accent,strokeWidth:"1",transform:"rotate(15 72 42)"})]}):j?c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M 35 30 L 25 10 L 40 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),c.jsx("path",{d:"M 65 30 L 75 10 L 60 25",fill:y.accent,stroke:"#333",strokeWidth:"1"}),c.jsx("path",{d:"M 50 28 L 50 8",stroke:y.accent,strokeWidth:"3",strokeLinecap:"round"})]}):null,j&&c.jsx("g",{children:c.jsx("path",{d:"M 35 18 L 35 5 L 42 12 L 50 0 L 58 12 L 65 5 L 65 18",fill:"#FFD700",stroke:"#B8860B",strokeWidth:"1"})}),a>0&&c.jsxs("g",{opacity:a,children:[c.jsx("ellipse",{cx:"50",cy:"50",rx:"30",ry:"28",fill:"#32CD32",opacity:"0.5"}),c.jsx("path",{d:"M 25 35 Q 30 45 25 55 Q 20 65 30 70",fill:"#228B22",opacity:"0.6"}),c.jsx("path",{d:"M 75 35 Q 70 45 75 55 Q 80 65 70 70",fill:"#228B22",opacity:"0.6"}),c.jsx("circle",{cx:"35",cy:"42",r:"4",fill:"#32CD32"}),c.jsx("circle",{cx:"62",cy:"65",r:"5",fill:"#228B22"}),c.jsx("circle",{cx:"55",cy:"38",r:"3",fill:"#2E8B2E"})]}),o>0&&c.jsxs("g",{opacity:o,children:[c.jsx("ellipse",{cx:"40",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&c.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite"})}),c.jsx("ellipse",{cx:"60",cy:"50",rx:"7",ry:"8",fill:"#FF0000",filter:"url(#glow)",children:n&&c.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1.5s",repeatCount:"indefinite",begin:"0.2s"})})]})]})}function Iy({creature:e,activeZones:t,overallProgress:n,compact:r=!1}){const a=e.region==="all"?"grassland":e.region,o=Wp[a],u=Math.max(0,100-n),h=k.useMemo(()=>n>=100?"sparkling":n>=75?"happy":n>=50?"hopeful":n>=25?"waking":"gunked",[n]),p={gunked:"",waking:"",hopeful:"",happy:"",sparkling:""}[h];return r?c.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 bg-purple-900/40 rounded-xl backdrop-blur-sm",children:[c.jsxs("div",{className:`relative shrink-0 ${t.length>0?"animate-wiggle":""}`,style:{width:60,height:60},children:[c.jsx(un,{creature:e,size:60,showGunk:!0,gunkLevel:u,animated:!0}),n>=100&&c.jsx("div",{className:"absolute -top-1 -right-1 text-lg",children:""})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-sm",children:p}),c.jsx("span",{className:"text-sm font-medium text-white truncate",children:e.name}),e.rarity!=="common"&&c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),c.jsx("div",{className:"h-2 w-full rounded-full bg-purple-900/50 overflow-hidden",children:c.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":o.colors.primary}})}),c.jsxs("div",{className:"flex justify-between mt-1",children:[c.jsx("span",{className:"text-[10px] text-purple-300",children:n>=100?" Clean!":"Keep brushing"}),c.jsxs("span",{className:"text-[10px] text-purple-300",children:[Math.round(n),"%"]})]})]})]}):c.jsxs("div",{className:"relative h-full flex flex-col",children:[c.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${o.colors.background}80, ${o.colors.primary}40)`,boxShadow:e.rarity==="mythic"?"0 0 40px #F97316, 0 0 60px #F9731680":e.rarity==="legendary"?`0 0 30px ${o.colors.accent}60`:e.rarity==="rare"?`0 0 20px ${o.colors.primary}40`:"none"},children:[t.length>0&&c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((y,j)=>c.jsx("div",{className:"absolute w-2 h-2 rounded-full animate-ping",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*70}%`,backgroundColor:o.colors.accent,animationDelay:`${j*.1}s`,animationDuration:"1s"}},j))}),c.jsxs("div",{className:`relative ${t.length>0?"animate-wiggle":""}`,children:[c.jsx(un,{creature:e,size:140,showGunk:!0,gunkLevel:u,animated:!0}),n>=100&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((y,j)=>c.jsx("div",{className:"absolute text-xl animate-sparkle-float",style:{left:`${10+j%4*25}%`,top:`${10+Math.floor(j/4)*40}%`,animationDelay:`${j*.15}s`},children:""},j))})]}),c.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1.5 px-2 py-1 rounded-full text-white text-sm",style:{backgroundColor:`${o.colors.primary}CC`},children:[c.jsx("span",{className:"text-base",children:p}),c.jsx("span",{className:"font-medium",children:e.name}),e.rarity!=="common"&&c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${e.rarity==="mythic"?"bg-orange-500":e.rarity==="legendary"?"bg-yellow-500":"bg-purple-500"}`,children:e.rarity==="mythic"?"":e.rarity==="legendary"?"":""})]}),c.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-white text-sm font-bold bg-black/40 backdrop-blur-sm",children:[Math.round(n),"%"]}),c.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:c.jsxs("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden backdrop-blur-sm relative",children:[c.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:n>=100?"#22C55E":o.colors.accent}}),t.length>0&&n<100&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow animate-pulse",children:"Brushing..."})}),n>=100&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("span",{className:"text-[10px] font-bold text-white drop-shadow",children:" Clean! "})})]})})]}),c.jsx("style",{children:`
        @keyframes sparkle-float {
          0%, 100% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          50% {
            transform: translateY(-10px) scale(1.2);
            opacity: 0.8;
          }
        }
        .animate-sparkle-float {
          animation: sparkle-float 1.5s ease-in-out infinite;
        }
      `})]})}const Oy=e=>{const t="/vibe-brushing/";return{grassland:`${t}creatures/bg-grassland.png`,coastal:`${t}creatures/bg-coastal.png`,lava:`${t}creatures/bg-lava.png`,city:`${t}creatures/bg-city.png`,sky:`${t}creatures/bg-sky.png`}[e]};function Pa({region:e}){const t=Ty(e),[n,r]=k.useState([]),[a,o]=k.useState(!1),u=Oy(e),h=k.useMemo(()=>{const{colors:p}=t;switch(e){case"grassland":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            #98D8C8 30%, 
            ${p.secondary} 60%, 
            ${p.primary} 100%)`};case"coastal":return{background:`linear-gradient(180deg, 
            #87CEEB 0%, 
            ${p.secondary} 40%, 
            ${p.primary} 70%, 
            #1E3A5F 100%)`};case"lava":return{background:`linear-gradient(180deg, 
            #1C1917 0%, 
            #292524 30%, 
            ${p.secondary} 70%, 
            ${p.primary} 100%)`};case"city":return{background:`linear-gradient(180deg, 
            #0F0B1A 0%, 
            #1E1433 30%, 
            ${p.primary}40 70%, 
            ${p.secondary}60 100%)`};case"sky":return{background:`linear-gradient(180deg, 
            #1E3A5F 0%, 
            ${p.secondary} 30%, 
            ${p.primary} 60%, 
            #FEF9C3 100%)`};default:return{background:p.background}}},[e,t]);return k.useEffect(()=>{o(!1);const p=new Image;p.src=u,p.onload=()=>o(!0)},[u]),k.useEffect(()=>{const p=[];for(let j=0;j<12;j++)p.push({id:j,emoji:t.particles[j%t.particles.length],x:Math.random()*100,y:Math.random()*100,size:.8+Math.random()*.8,speed:15+Math.random()*20,delay:Math.random()*10,drift:(Math.random()-.5)*30});r(p)},[e,t.particles]),c.jsxs("div",{className:"absolute inset-0 overflow-hidden transition-all duration-1000",style:h,children:[c.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{backgroundImage:`url(${u})`,backgroundSize:"cover",backgroundPosition:"center",opacity:a?1:0}}),c.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(180deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.3) 100%)"}}),e==="lava"&&c.jsxs("div",{className:"absolute inset-0",children:[c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 opacity-60",style:{background:"linear-gradient(180deg, transparent 0%, #EF4444 50%, #FCD34D 100%)",animation:"pulse 2s ease-in-out infinite"}}),c.jsx("div",{className:"absolute bottom-0 left-1/4 w-1/2 h-1/4 opacity-40 rounded-t-full",style:{background:"radial-gradient(ellipse at bottom, #FBBF24 0%, transparent 70%)",animation:"pulse 3s ease-in-out infinite"}})]}),e==="city"&&c.jsx("div",{className:"absolute inset-0",children:[...Array(8)].map((p,y)=>c.jsx("div",{className:"absolute bottom-0 bg-gradient-to-t from-purple-900 to-transparent",style:{left:`${y*14+Math.random()*5}%`,width:`${3+Math.random()*4}%`,height:`${20+Math.random()*40}%`,opacity:.6},children:[...Array(Math.floor(Math.random()*5)+2)].map((j,S)=>c.jsx("div",{className:"absolute w-1 h-1 rounded-full",style:{left:`${20+Math.random()*60}%`,top:`${10+S*15+Math.random()*10}%`,backgroundColor:["#22D3EE","#E879F9","#FBBF24"][Math.floor(Math.random()*3)],animation:`pulse ${1+Math.random()*2}s ease-in-out infinite`,animationDelay:`${Math.random()*2}s`}},S))},y))}),e==="sky"&&c.jsx("div",{className:"absolute inset-0",children:[...Array(5)].map((p,y)=>c.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${y*25-10+Math.random()*20}%`,top:`${60+Math.random()*30}%`,width:`${15+Math.random()*20}%`,height:`${8+Math.random()*8}%`,animation:`float ${8+Math.random()*4}s ease-in-out infinite`,animationDelay:`${Math.random()*4}s`}},y))}),e==="coastal"&&c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-1/4",children:[c.jsx("div",{className:"absolute inset-0 opacity-50",style:{background:"linear-gradient(180deg, transparent 0%, #0EA5E9 100%)"}}),[...Array(3)].map((p,y)=>c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-white/30 rounded-full",style:{transform:`translateY(${y*-8}px)`,animation:`wave ${3+y*.5}s ease-in-out infinite`,animationDelay:`${y*.3}s`}},y))]}),e==="grassland"&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/6",children:c.jsxs("svg",{viewBox:"0 0 100 20",className:"w-full h-full",preserveAspectRatio:"none",children:[c.jsx("path",{d:"M0 20 Q 10 10, 20 15 T 40 12 T 60 16 T 80 10 T 100 14 L 100 20 Z",fill:"#22C55E",opacity:"0.8"}),c.jsx("path",{d:"M0 20 Q 15 15, 25 18 T 50 14 T 75 17 T 100 12 L 100 20 Z",fill:"#16A34A",opacity:"0.6"})]})}),n.map(p=>c.jsx("div",{className:"absolute pointer-events-none select-none",style:{left:`${p.x}%`,fontSize:`${p.size}rem`,animation:`floatParticle ${p.speed}s linear infinite`,animationDelay:`${p.delay}s`,"--drift":`${p.drift}px`},children:p.emoji},p.id)),c.jsx("style",{children:`
        @keyframes floatParticle {
          0% {
            transform: translateY(100vh) translateX(0);
            opacity: 0;
          }
          10% {
            opacity: 0.8;
          }
          90% {
            opacity: 0.8;
          }
          100% {
            transform: translateY(-20vh) translateX(var(--drift));
            opacity: 0;
          }
        }
        
        @keyframes wave {
          0%, 100% {
            transform: translateX(-5%) scaleY(1);
          }
          50% {
            transform: translateX(5%) scaleY(1.2);
          }
        }
        
        @keyframes float {
          0%, 100% {
            transform: translateY(0) translateX(0);
          }
          50% {
            transform: translateY(-10px) translateX(10px);
          }
        }
      `})]})}function zy({zoneProgress:e,overallProgress:t}){const n=t>=100;return c.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-purple-300",children:"Brushing Progress"}),c.jsxs("span",{className:"text-white font-bold",children:[Math.round(t),"%"]})]}),c.jsxs("div",{className:"h-6 bg-purple-900/50 rounded-full overflow-hidden relative",children:[c.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${n?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`,style:{width:`${t}%`}}),n&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-bold text-white drop-shadow animate-pulse",children:" Complete! Keep brushing! "})})]})]}),c.jsx("div",{className:"text-center text-sm text-purple-300",children:n?c.jsx("span",{className:"text-green-400",children:"Great job! Keep it up to stay clean!"}):t>0?c.jsx("span",{children:"Keep brushing to fill the bar!"}):c.jsx("span",{children:"Start brushing to see progress"})})]})}function Ly({timeRemaining:e,totalTime:t}){const n=Math.floor(e/60),r=e%60,a=(t-e)/t*100,o=e<=30;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("div",{className:"relative w-24 h-24",children:[c.jsxs("svg",{className:"w-full h-full -rotate-90",children:[c.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:"rgba(139, 92, 246, 0.3)",strokeWidth:"8"}),c.jsx("circle",{cx:"48",cy:"48",r:"44",fill:"none",stroke:o?"#F59E0B":"#8B5CF6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*44}`,strokeDashoffset:`${2*Math.PI*44*(1-a/100)}`,className:"transition-all duration-1000"})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:`text-2xl font-bold ${o?"text-amber-400 animate-pulse":"text-white"}`,children:[n,":",r.toString().padStart(2,"0")]})})]}),c.jsx("div",{className:"mt-2 text-sm text-purple-300",children:o?"Almost done!":"Keep brushing!"})]})}const $y=3e3;function Vy(e){return e<=60?[20,40]:e<=120?[30,60,90]:[45,90,135]}function Gy({selectedBuddy:e,capturedCreatureIds:t,onComplete:n,onCancel:r}){const a=k.useMemo(()=>Kp(),[]),o=k.useMemo(()=>Vy(a),[a]),[u,h]=k.useState("countdown"),[p,y]=k.useState(3),[j,S]=k.useState(a),[E,W]=k.useState([]),[$,I]=k.useState(""),[V]=k.useState(()=>jy()),[x,v]=k.useState(null),b=k.useRef(new Set),_=k.useRef(Date.now()),G=k.useRef(null),{startCamera:z,captureFrameWithBuddy:N,stopCamera:L,registerVideoElement:H}=wo(),O=k.useRef(null),T=k.useRef(null),X=k.useRef({width:0,height:0}),te=(x==null?void 0:x.rarity)||"common",oe=iy(V,te),xe=k.useCallback(ge=>{T.current=ge,ge&&H(ge)},[H]),[we,le]=k.useState(!1),{zoneProgress:Q,motionResults:ee,overallProgress:Z,startDetection:he,stopDetection:ke,setFaceRegion:Le,setDebugMode:Ae,getDebugInfo:Ue}=Vp({targetCleaningTime:25}),{facePosition:Ie,startTracking:Je,stopTracking:$t}=Gp(),Oe=k.useRef(new Set),me=k.useRef(!1),ot=k.useRef(!1);k.useEffect(()=>{Le(Ie?{x:Ie.x,y:Ie.y,width:Ie.width,height:Ie.height}:null)},[Ie,Le]),k.useEffect(()=>{const ge=Op(85,t,V);v(ge),((ge==null?void 0:ge.rarity)==="legendary"||(ge==null?void 0:ge.rarity)==="mythic")&&Tn("legendary-intro")},[V,t]),k.useEffect(()=>(me.current||(me.current=!0,z()),()=>{ke(),$t(),G.current&&clearInterval(G.current)}),[z,ke,$t]),k.useEffect(()=>{Q.forEach(ge=>{ge.isComplete&&!Oe.current.has(ge.zoneId)&&(Oe.current.add(ge.zoneId),Tn("sparkle"))})},[Q]),k.useEffect(()=>{ee.some(De=>De.hasMotion)&&(_.current=Date.now())},[ee]),k.useEffect(()=>{if(u==="brushing")return G.current=window.setInterval(()=>{Date.now()-_.current>$y&&(I("Can't see you brushing! Move closer to the camera."),h("paused"))},500),()=>{G.current&&clearInterval(G.current)}},[u]);const Te=k.useCallback(ge=>{he(ge),Je(ge),_.current=Date.now()},[he,Je]),xt=k.useCallback((ge,De)=>{X.current={width:ge,height:De}},[]),nt=k.useCallback(async()=>{const ge=e&&O.current?{imageUrl:e.imageUrl,x:O.current.x,y:O.current.y,size:60,rotation:O.current.rotation,flipX:O.current.flipX}:null;return N(ge)},[e,N]),Ft=k.useCallback(()=>{le(ge=>{const De=!ge;return Ae(De),De})},[Ae]);k.useEffect(()=>{if(u!=="countdown")return;if(p<=0){h("brushing"),_.current=Date.now();return}const ge=setTimeout(()=>{y(De=>De-1)},1e3);return()=>clearTimeout(ge)},[p,u]),k.useEffect(()=>{if(u!=="brushing")return;if(j<=0){Rt();return}const ge=setInterval(()=>{S(De=>De-1)},1e3);return()=>clearInterval(ge)},[j,u]),k.useEffect(()=>{if(u!=="brushing")return;const ge=a-j;o.forEach(De=>{ge>=De&&!b.current.has(De)&&(b.current.add(De),nt().then(Tt=>{Tt&&W(Mt=>[...Mt,Tt])}))})},[j,u,nt,o,a]),k.useEffect(()=>{u==="brushing"&&!ot.current?(ot.current=!0,oe.start()):u==="paused"?(oe.stop(),ot.current=!1):u==="complete"&&oe.stop()},[u,oe]),k.useEffect(()=>{if(u!=="brushing")return;const ge=a-j,De=a/2;ge>=De?oe.setIntensity("excited"):oe.setIntensity("calm")},[j,u,oe]);const Rt=k.useCallback(async()=>{h("complete"),oe.stop(),ke(),$t();const ge=await nt(),De=ge?[...E,ge]:E;setTimeout(()=>{L(),n({cleaningPercentage:Z,zoneProgress:Q,photos:De,region:V,creature:x})},500)},[ke,$t,nt,E,Z,Q,n,L,oe,V,x]),ie=k.useCallback(()=>{_.current=Date.now(),h("brushing"),I("")},[]),Se=k.useCallback(async()=>{const ge=await nt();ge&&W(De=>[...De,ge])},[nt]),je=k.useCallback(()=>{oe.stop(),L(),r()},[L,r,oe]),Pe=ee.filter(ge=>ge.hasMotion).map(ge=>ge.zoneId);return u==="countdown"?c.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0",children:c.jsx(Pa,{region:V})}),c.jsxs("div",{className:"relative z-10 text-center",children:[c.jsx("div",{className:"text-6xl font-bold text-white animate-bounce-gentle drop-shadow-lg",children:p>0?p:"GO!"}),c.jsx("div",{className:"text-xl text-white/80 mt-4 drop-shadow",children:"Get ready to brush!"}),x&&c.jsxs("div",{className:"mt-6 text-center",children:[c.jsx("div",{className:"text-lg text-white/70",children:"Today's creature:"}),c.jsx("div",{className:`text-2xl font-bold ${x.rarity==="mythic"?"text-orange-400 animate-pulse":x.rarity==="legendary"?"text-yellow-400 animate-pulse":x.rarity==="rare"?"text-purple-400":"text-white"}`,children:x.name})]}),c.jsx("button",{onClick:je,className:"mt-8 px-6 py-2 text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Cancel"})]})]}):u==="paused"?c.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full p-6 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0",children:c.jsx(Pa,{region:V})}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("div",{className:"text-6xl mb-6",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-yellow-400 mb-4 drop-shadow-lg",children:"Paused!"}),c.jsx("p",{className:"text-xl text-white text-center mb-6 max-w-xs drop-shadow",children:$}),c.jsx("div",{className:"w-full max-w-xs aspect-video bg-black/30 rounded-2xl overflow-hidden mb-6 backdrop-blur-sm",children:c.jsx("video",{ref:xe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"})}),c.jsxs("div",{className:"text-sm text-white/80 mb-4",children:["Time remaining: ",Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]}),c.jsx("button",{onClick:ie,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl shadow-lg active:scale-95 transition-transform mb-3",children:"I'm Ready! "}),c.jsx("button",{onClick:je,className:"w-full max-w-xs py-3 text-lg text-white/80 bg-black/30 rounded-xl backdrop-blur-sm",children:"Stop Session"})]})]}):c.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0",children:c.jsx(Pa,{region:V})}),c.jsxs("div",{className:"relative z-10 flex flex-col h-full p-2 gap-2",children:[c.jsxs("div",{className:"h-2/3 relative overflow-hidden",children:[c.jsx(Fy,{selectedBuddy:e,onVideoReady:Te,onContainerSize:xt,activityScore:ee.reduce((ge,De)=>ge+De.motionLevel,0)/Math.max(ee.length,1),debugMode:we,getDebugInfo:Ue}),c.jsxs("div",{className:"absolute top-2 left-2 right-2 flex justify-between items-start pointer-events-auto z-20",children:[c.jsx("button",{onClick:je,className:"px-3 py-1.5 text-sm text-white/80 bg-black/50 rounded-xl backdrop-blur-sm pointer-events-auto",children:""}),c.jsx(Ly,{timeRemaining:j,totalTime:a}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Ft,className:`px-2 py-1.5 text-sm rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto ${we?"text-yellow-400 bg-yellow-900/80":"text-white/60 bg-black/50"}`,children:""}),c.jsx("button",{onClick:Se,className:"px-2 py-1.5 text-sm text-white bg-pink-600/80 rounded-xl active:scale-95 backdrop-blur-sm pointer-events-auto",children:""})]})]})]}),c.jsx("div",{className:"h-1/3 overflow-auto",children:x?c.jsx(Iy,{creature:x,activeZones:Pe,overallProgress:Z}):c.jsx(zy,{zoneProgress:Q,overallProgress:Z})}),E.length>0&&c.jsxs("div",{className:"flex justify-center gap-2",children:[E.slice(-3).map((ge,De)=>c.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-sparkle"},De)),c.jsxs("span",{className:"text-xs text-white/70 ml-2",children:[E.length," photos"]})]})]})]})}function Wy({cleaningPercentage:e,onContinue:t}){const n=Uy(e),r=e>=100;return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[c.jsx("div",{className:"text-6xl mb-4 animate-bounce-gentle",children:n.emoji}),c.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.title}),c.jsxs("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 bg-clip-text text-transparent mb-4",children:[Math.round(e),"%"]}),c.jsx("p",{className:"text-lg text-purple-200 mb-6 max-w-xs",children:n.message}),c.jsx("div",{className:"w-full max-w-xs mb-8",children:c.jsxs("div",{className:`p-4 rounded-xl ${r?"bg-green-900/50":"bg-purple-900/50"}`,children:[c.jsx("div",{className:"text-4xl mb-2",children:r?"":""}),c.jsx("div",{className:"text-sm text-purple-300 mb-2",children:"Brushing Score"}),c.jsx("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${r?"bg-gradient-to-r from-yellow-400 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${e}%`}})}),c.jsx("div",{className:`text-lg font-bold mt-2 ${r?"text-green-400":"text-purple-400"}`,children:r?"Complete!":"Keep practicing!"})]})}),c.jsx("button",{onClick:t,className:"w-full max-w-xs py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl animate-button-glow",children:"Catch a Creature! "})]})}function Uy(e){return e>=95?{emoji:"",title:"LEGENDARY!",message:"Your teeth are sparkling like diamonds! Amazing job!"}:e>=80?{emoji:"",title:"Super Clean!",message:"Wow! Your teeth are super sparkly! Great brushing!"}:e>=60?{emoji:"",title:"Good Job!",message:"Nice work! A little more brushing next time!"}:e>=40?{emoji:"",title:"Keep Trying!",message:"You can do better! Brush all areas next time!"}:{emoji:"",title:"Try Again!",message:"Don't give up! Brush longer next time!"}}var Qp={exports:{}};(function(e,t){((n,r)=>{e.exports=r()})(ed,function(){var n=function(s,l){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,f){d.__proto__=f}:function(d,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(d[m]=f[m])}))(s,l)},r=function(){return(r=Object.assign||function(s){for(var l,d=1,f=arguments.length;d<f;d++)for(var m in l=arguments[d])Object.prototype.hasOwnProperty.call(l,m)&&(s[m]=l[m]);return s}).apply(this,arguments)};function a(s,l,d){for(var f,m=0,g=l.length;m<g;m++)!f&&m in l||((f=f||Array.prototype.slice.call(l,0,m))[m]=l[m]);return s.concat(f||Array.prototype.slice.call(l))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ed,u=Object.keys,h=Array.isArray;function p(s,l){return typeof l=="object"&&u(l).forEach(function(d){s[d]=l[d]}),s}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var y=Object.getPrototypeOf,j={}.hasOwnProperty;function S(s,l){return j.call(s,l)}function E(s,l){typeof l=="function"&&(l=l(y(s))),(typeof Reflect>"u"?u:Reflect.ownKeys)(l).forEach(function(d){$(s,d,l[d])})}var W=Object.defineProperty;function $(s,l,d,f){W(s,l,p(d&&S(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},f))}function I(s){return{from:function(l){return s.prototype=Object.create(l.prototype),$(s.prototype,"constructor",s),{extend:E.bind(null,s.prototype)}}}}var V=Object.getOwnPropertyDescriptor,x=[].slice;function v(s,l,d){return x.call(s,l,d)}function b(s,l){return l(s)}function _(s){if(!s)throw new Error("Assertion Failed")}function G(s){o.setImmediate?setImmediate(s):setTimeout(s,0)}function z(s,l){if(typeof l=="string"&&S(s,l))return s[l];if(!l)return s;if(typeof l!="string"){for(var d=[],f=0,m=l.length;f<m;++f){var g=z(s,l[f]);d.push(g)}return d}var w,C=l.indexOf(".");return C===-1||(w=s[l.substr(0,C)])==null?void 0:z(w,l.substr(C+1))}function N(s,l,d){if(s&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof l!="string"&&"length"in l){_(typeof d!="string"&&"length"in d);for(var f=0,m=l.length;f<m;++f)N(s,l[f],d[f])}else{var g,w,C=l.indexOf(".");C!==-1?(g=l.substr(0,C),(C=l.substr(C+1))===""?d===void 0?h(s)&&!isNaN(parseInt(g))?s.splice(g,1):delete s[g]:s[g]=d:N(w=(w=s[g])&&S(s,g)?w:s[g]={},C,d)):d===void 0?h(s)&&!isNaN(parseInt(l))?s.splice(l,1):delete s[l]:s[l]=d}}function L(s){var l,d={};for(l in s)S(s,l)&&(d[l]=s[l]);return d}var H=[].concat;function O(s){return H.apply([],s)}var ke="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(l){return l+s+"Array"})}))).filter(function(s){return o[s]}),T=new Set(ke.map(function(s){return o[s]})),X=null;function te(s){return X=new WeakMap,s=function l(d){if(!d||typeof d!="object")return d;var f=X.get(d);if(f)return f;if(h(d)){f=[],X.set(d,f);for(var m=0,g=d.length;m<g;++m)f.push(l(d[m]))}else if(T.has(d.constructor))f=d;else{var w,C=y(d);for(w in f=C===Object.prototype?{}:Object.create(C),X.set(d,f),d)S(d,w)&&(f[w]=l(d[w]))}return f}(s),X=null,s}var oe={}.toString;function xe(s){return oe.call(s).slice(8,-1)}var we=typeof Symbol<"u"?Symbol.iterator:"@@iterator",le=typeof we=="symbol"?function(s){var l;return s!=null&&(l=s[we])&&l.apply(s)}:function(){return null};function Q(s,l){l=s.indexOf(l),0<=l&&s.splice(l,1)}var ee={};function Z(s){var l,d,f,m;if(arguments.length===1){if(h(s))return s.slice();if(this===ee&&typeof s=="string")return[s];if(m=le(s))for(d=[];!(f=m.next()).done;)d.push(f.value);else{if(s==null)return[s];if(typeof(l=s.length)!="number")return[s];for(d=new Array(l);l--;)d[l]=s[l]}}else for(l=arguments.length,d=new Array(l);l--;)d[l]=arguments[l];return d}var he=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ke=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],lt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ke),Le={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(s,l){this.name=s,this.message=l}function Ue(s,l){return s+". Errors: "+Object.keys(l).map(function(d){return l[d].toString()}).filter(function(d,f,m){return m.indexOf(d)===f}).join(`
`)}function Ie(s,l,d,f){this.failures=l,this.failedKeys=f,this.successCount=d,this.message=Ue(s,l)}function Je(s,l){this.name="BulkError",this.failures=Object.keys(l).map(function(d){return l[d]}),this.failuresByPos=l,this.message=Ue(s,this.failures)}I(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(Ie).from(Ae),I(Je).from(Ae);var $t=lt.reduce(function(s,l){return s[l]=l+"Error",s},{}),Oe=Ae,me=lt.reduce(function(s,l){var d=l+"Error";function f(m,g){this.name=d,m?typeof m=="string"?(this.message="".concat(m).concat(g?`
 `+g:""),this.inner=g||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=Le[l]||d,this.inner=null)}return I(f).from(Oe),s[l]=f,s},{}),ot=(me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError,ke.reduce(function(s,l){return s[l+"Error"]=me[l],s},{}));ke=lt.reduce(function(s,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(s[l+"Error"]=me[l]),s},{});function Te(){}function xt(s){return s}function nt(s,l){return s==null||s===xt?l:function(d){return l(s(d))}}function Ft(s,l){return function(){s.apply(this,arguments),l.apply(this,arguments)}}function Rt(s,l){return s===Te?l:function(){var d=s.apply(this,arguments),f=(d!==void 0&&(arguments[0]=d),this.onsuccess),m=this.onerror,g=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return f&&(this.onsuccess=this.onsuccess?Ft(f,this.onsuccess):f),m&&(this.onerror=this.onerror?Ft(m,this.onerror):m),g!==void 0?g:d}}function ie(s,l){return s===Te?l:function(){s.apply(this,arguments);var d=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Ft(d,this.onsuccess):d),f&&(this.onerror=this.onerror?Ft(f,this.onerror):f)}}function Se(s,l){return s===Te?l:function(m){var f=s.apply(this,arguments),m=(p(m,f),this.onsuccess),g=this.onerror,w=(this.onsuccess=null,this.onerror=null,l.apply(this,arguments));return m&&(this.onsuccess=this.onsuccess?Ft(m,this.onsuccess):m),g&&(this.onerror=this.onerror?Ft(g,this.onerror):g),f===void 0?w===void 0?void 0:w:p(f,w)}}function je(s,l){return s===Te?l:function(){return l.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Pe(s,l){return s===Te?l:function(){var d=s.apply(this,arguments);if(d&&typeof d.then=="function"){for(var f=this,m=arguments.length,g=new Array(m);m--;)g[m]=arguments[m];return d.then(function(){return l.apply(f,g)})}return l.apply(this,arguments)}}ke.ModifyError=Ie,ke.DexieError=Ae,ke.BulkError=Je;var ge=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function De(s){ge=s}var Tt={},Mt=100,Et=typeof Promise>"u"?[]:(lt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Et=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(Et),lt]:[lt,y(lt),lt]),lt=Et[0],Lr=Et[1],Lr=Lr&&Lr.then,rn=lt&&lt.constructor,sn=!!Et[2],pn=function(s,l){wi.push([s,l]),bs&&(queueMicrotask(em),bs=!1)},ko=!0,bs=!0,lr=[],ks=[],Co=xt,Mn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Te,pgp:!1,env:{},finalize:Te},be=Mn,wi=[],cr=0,Cs=[];function de(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=be;if(typeof s!="function"){if(s!==Tt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&jo(this,this._value)}else this._state=null,this._value=null,++l.ref,function d(f,m){try{m(function(g){if(f._state===null){if(g===f)throw new TypeError("A promise cannot be resolved with itself.");var w=f._lib&&Fr();g&&typeof g.then=="function"?d(f,function(C,D){g instanceof de?g._then(C,D):g.then(C,D)}):(f._state=!0,f._value=g,ku(f)),w&&Rr()}},jo.bind(null,f))}catch(g){jo(f,g)}}(this,s)}var So={get:function(){var s=be,l=Es;function d(f,m){var g=this,w=!s.global&&(s!==be||l!==Es),C=w&&!In(),D=new de(function(q,F){To(g,new bu(Su(f,s,w,C),Su(m,s,w,C),q,F,s))});return this._consoleTask&&(D._consoleTask=this._consoleTask),D}return d.prototype=Tt,d},set:function(s){$(this,"then",s&&s.prototype===Tt?So:{get:function(){return s},set:So.set})}};function bu(s,l,d,f,m){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof l=="function"?l:null,this.resolve=d,this.reject=f,this.psd=m}function jo(s,l){var d,f;ks.push(l),s._state===null&&(d=s._lib&&Fr(),l=Co(l),s._state=!1,s._value=l,f=s,lr.some(function(m){return m._value===f._value})||lr.push(f),ku(s),d)&&Rr()}function ku(s){var l=s._listeners;s._listeners=[];for(var d=0,f=l.length;d<f;++d)To(s,l[d]);var m=s._PSD;--m.ref||m.finalize(),cr===0&&(++cr,pn(function(){--cr==0&&Eo()},[]))}function To(s,l){if(s._state===null)s._listeners.push(l);else{var d=s._state?l.onFulfilled:l.onRejected;if(d===null)return(s._state?l.resolve:l.reject)(s._value);++l.psd.ref,++cr,pn(Jp,[d,s,l])}}function Jp(s,l,d){try{var f,m=l._value;!l._state&&ks.length&&(ks=[]),f=ge&&l._consoleTask?l._consoleTask.run(function(){return s(m)}):s(m),l._state||ks.indexOf(m)!==-1||(g=>{for(var w=lr.length;w;)if(lr[--w]._value===g._value)return lr.splice(w,1)})(l),d.resolve(f)}catch(g){d.reject(g)}finally{--cr==0&&Eo(),--d.psd.ref||d.psd.finalize()}}function em(){ur(Mn,function(){Fr()&&Rr()})}function Fr(){var s=ko;return bs=ko=!1,s}function Rr(){var s,l,d;do for(;0<wi.length;)for(s=wi,wi=[],d=s.length,l=0;l<d;++l){var f=s[l];f[0].apply(null,f[1])}while(0<wi.length);bs=ko=!0}function Eo(){for(var s=lr,l=(lr=[],s.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)}),Cs.slice(0)),d=l.length;d;)l[--d]()}function Ss(s){return new de(Tt,!1,s)}function qe(s,l){var d=be;return function(){var f=Fr(),m=be;try{return On(d,!0),s.apply(this,arguments)}catch(g){l&&l(g)}finally{On(m,!1),f&&Rr()}}}E(de.prototype,{then:So,_then:function(s,l){To(this,new bu(null,null,s,l,be))},catch:function(s){var l,d;return arguments.length===1?this.then(null,s):(l=s,d=arguments[1],typeof l=="function"?this.then(null,function(f){return(f instanceof l?d:Ss)(f)}):this.then(null,function(f){return(f&&f.name===l?d:Ss)(f)}))},finally:function(s){return this.then(function(l){return de.resolve(s()).then(function(){return l})},function(l){return de.resolve(s()).then(function(){return Ss(l)})})},timeout:function(s,l){var d=this;return s<1/0?new de(function(f,m){var g=setTimeout(function(){return m(new me.Timeout(l))},s);d.then(f,m).finally(clearTimeout.bind(null,g))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&$(de.prototype,Symbol.toStringTag,"Dexie.Promise"),Mn.env=Cu(),E(de,{all:function(){var s=Z.apply(null,arguments).map(Ns);return new de(function(l,d){s.length===0&&l([]);var f=s.length;s.forEach(function(m,g){return de.resolve(m).then(function(w){s[g]=w,--f||l(s)},d)})})},resolve:function(s){return s instanceof de?s:s&&typeof s.then=="function"?new de(function(l,d){s.then(l,d)}):new de(Tt,!0,s)},reject:Ss,race:function(){var s=Z.apply(null,arguments).map(Ns);return new de(function(l,d){s.map(function(f){return de.resolve(f).then(l,d)})})},PSD:{get:function(){return be},set:function(s){return be=s}},totalEchoes:{get:function(){return Es}},newPSD:Bn,usePSD:ur,scheduler:{get:function(){return pn},set:function(s){pn=s}},rejectionMapper:{get:function(){return Co},set:function(s){Co=s}},follow:function(s,l){return new de(function(d,f){return Bn(function(m,g){var w=be;w.unhandleds=[],w.onunhandled=g,w.finalize=Ft(function(){var C,D=this;C=function(){D.unhandleds.length===0?m():g(D.unhandleds[0])},Cs.push(function q(){C(),Cs.splice(Cs.indexOf(q),1)}),++cr,pn(function(){--cr==0&&Eo()},[])},w.finalize),s()},l,d,f)})}}),rn&&(rn.allSettled&&$(de,"allSettled",function(){var s=Z.apply(null,arguments).map(Ns);return new de(function(l){s.length===0&&l([]);var d=s.length,f=new Array(d);s.forEach(function(m,g){return de.resolve(m).then(function(w){return f[g]={status:"fulfilled",value:w}},function(w){return f[g]={status:"rejected",reason:w}}).then(function(){return--d||l(f)})})})}),rn.any&&typeof AggregateError<"u"&&$(de,"any",function(){var s=Z.apply(null,arguments).map(Ns);return new de(function(l,d){s.length===0&&d(new AggregateError([]));var f=s.length,m=new Array(f);s.forEach(function(g,w){return de.resolve(g).then(function(C){return l(C)},function(C){m[w]=C,--f||d(new AggregateError(m))})})})}),rn.withResolvers)&&(de.withResolvers=rn.withResolvers);var dt={awaits:0,echoes:0,id:0},tm=0,js=[],Ts=0,Es=0,nm=0;function Bn(s,w,d,f){var m=be,g=Object.create(m),w=(g.parent=m,g.ref=0,g.global=!1,g.id=++nm,Mn.env,g.env=sn?{Promise:de,PromiseProp:{value:de,configurable:!0,writable:!0},all:de.all,race:de.race,allSettled:de.allSettled,any:de.any,resolve:de.resolve,reject:de.reject}:{},w&&p(g,w),++m.ref,g.finalize=function(){--this.parent.ref||this.parent.finalize()},ur(g,s,d,f));return g.ref===0&&g.finalize(),w}function Mr(){return dt.id||(dt.id=++tm),++dt.awaits,dt.echoes+=Mt,dt.id}function In(){return!!dt.awaits&&(--dt.awaits==0&&(dt.id=0),dt.echoes=dt.awaits*Mt,!0)}function Ns(s){return dt.echoes&&s&&s.constructor===rn?(Mr(),s.then(function(l){return In(),l},function(l){return In(),rt(l)})):s}function rm(){var s=js[js.length-1];js.pop(),On(s,!1)}function On(s,l){var d,f,m=be;(l?!dt.echoes||Ts++&&s===be:!Ts||--Ts&&s===be)||queueMicrotask(l?(function(g){++Es,dt.echoes&&--dt.echoes!=0||(dt.echoes=dt.awaits=dt.id=0),js.push(be),On(g,!0)}).bind(null,s):rm),s!==be&&(be=s,m===Mn&&(Mn.env=Cu()),sn)&&(d=Mn.env.Promise,f=s.env,m.global||s.global)&&(Object.defineProperty(o,"Promise",f.PromiseProp),d.all=f.all,d.race=f.race,d.resolve=f.resolve,d.reject=f.reject,f.allSettled&&(d.allSettled=f.allSettled),f.any)&&(d.any=f.any)}function Cu(){var s=o.Promise;return sn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function ur(s,l,d,f,m){var g=be;try{return On(s,!0),l(d,f,m)}finally{On(g,!1)}}function Su(s,l,d,f){return typeof s!="function"?s:function(){var m=be;d&&Mr(),On(l,!0);try{return s.apply(this,arguments)}finally{On(m,!1),f&&queueMicrotask(In)}}}function No(s){Promise===rn&&dt.echoes===0?Ts===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Lr).indexOf("[native code]")===-1&&(Mr=In=Te);var rt=de.reject,dr="",kn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ju="String expected.",Br=[],As="__dbnames",Ao="readonly",Po="readwrite";function fr(s,l){return s?l?function(){return s.apply(this,arguments)&&l.apply(this,arguments)}:s:l}var Tu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ps(s){return typeof s!="string"||/\./.test(s)?function(l){return l}:function(l){return l[s]===void 0&&s in l&&delete(l=te(l))[s],l}}function Eu(){throw me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function _e(s,l){try{var d=Nu(s),f=Nu(l);if(d!==f)return d==="Array"?1:f==="Array"?-1:d==="binary"?1:f==="binary"?-1:d==="string"?1:f==="string"?-1:d==="Date"?1:f!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return l<s?1:s<l?-1:0;case"binary":for(var m=Au(s),g=Au(l),w=m.length,C=g.length,D=w<C?w:C,q=0;q<D;++q)if(m[q]!==g[q])return m[q]<g[q]?-1:1;return w===C?0:w<C?-1:1;case"Array":for(var F=s,A=l,M=F.length,B=A.length,R=M<B?M:B,P=0;P<R;++P){var K=_e(F[P],A[P]);if(K!==0)return K}return M===B?0:M<B?-1:1}}catch{}return NaN}function Nu(s){var l=typeof s;return l=="object"&&(ArrayBuffer.isView(s)||(l=xe(s))==="ArrayBuffer")?"binary":l}function Au(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function _s(s,l,d){var f=s.schema.yProps;return f?(l&&0<d.numFailures&&(l=l.filter(function(m,g){return!d.failures[g]})),Promise.all(f.map(function(m){return m=m.updatesTable,l?s.db.table(m).where("k").anyOf(l).delete():s.db.table(m).clear()})).then(function(){return d})):d}Pu.prototype.execute=function(s){var l=this["@@propmod"];if(l.add!==void 0){var d=l.add;if(h(d))return a(a([],h(s)?s:[],!0),d).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(l.remove!==void 0){var f=l.remove;if(h(f))return h(s)?s.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(s)-f;if(typeof f=="bigint")try{return BigInt(s)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return d=(d=l.replacePrefix)==null?void 0:d[0],d&&typeof s=="string"&&s.startsWith(d)?l.replacePrefix[1]+s.substring(d.length):s};var bi=Pu;function Pu(s){this["@@propmod"]=s}function _u(s,l){for(var d=u(l),f=d.length,m=!1,g=0;g<f;++g){var w=d[g],C=l[w],D=z(s,w);C instanceof bi?(N(s,w,C.execute(D)),m=!0):D!==C&&(N(s,w,C),m=!0)}return m}$e.prototype._trans=function(s,l,d){var f=this._tx||be.trans,m=this.name,g=ge&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function w(q,F,A){if(A.schema[m])return l(A.idbtrans,A);throw new me.NotFound("Table "+m+" not part of transaction")}var C=Fr();try{var D=f&&f.db._novip===this.db._novip?f===be.trans?f._promise(s,w,d):Bn(function(){return f._promise(s,w,d)},{trans:f,transless:be.transless||be}):function q(F,A,M,B){if(F.idbdb&&(F._state.openComplete||be.letThrough||F._vip)){var R=F._createTransaction(A,M,F._dbSchema);try{R.create(),F._state.PR1398_maxLoop=3}catch(P){return P.name===$t.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return q(F,A,M,B)})):rt(P)}return R._promise(A,function(P,K){return Bn(function(){return be.trans=R,B(P,K,R)})}).then(function(P){if(A==="readwrite")try{R.idbtrans.commit()}catch{}return A==="readonly"?P:R._completion.then(function(){return P})})}if(F._state.openComplete)return rt(new me.DatabaseClosed(F._state.dbOpenError));if(!F._state.isBeingOpened){if(!F._state.autoOpen)return rt(new me.DatabaseClosed);F.open().catch(Te)}return F._state.dbReadyPromise.then(function(){return q(F,A,M,B)})}(this.db,s,[this.name],w);return g&&(D._consoleTask=g,D=D.catch(function(q){return console.trace(q),rt(q)})),D}finally{C&&Rr()}},$e.prototype.get=function(s,l){var d=this;return s&&s.constructor===Object?this.where(s).first(l):s==null?rt(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return d.core.get({trans:f,key:s}).then(function(m){return d.hook.reading.fire(m)})}).then(l)},$e.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(h(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var l=u(s);if(l.length===1)return this.where(l[0]).equals(s[l[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(C){if(C.compound&&l.every(function(q){return 0<=C.keyPath.indexOf(q)})){for(var D=0;D<l.length;++D)if(l.indexOf(C.keyPath[D])===-1)return!1;return!0}return!1}).sort(function(C,D){return C.keyPath.length-D.keyPath.length})[0];if(d&&this.db._maxKey!==dr)return w=d.keyPath.slice(0,l.length),this.where(w).equals(w.map(function(C){return s[C]}));!d&&ge&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function m(C,D){return _e(C,D)===0}var w=l.reduce(function(F,D){var q=F[0],F=F[1],A=f[D],M=s[D];return[q||A,q||!A?fr(F,A&&A.multi?function(B){return B=z(B,D),h(B)&&B.some(function(R){return m(M,R)})}:function(B){return m(M,z(B,D))}):F]},[null,null]),g=w[0],w=w[1];return g?this.where(g.name).equals(s[g.keyPath]).filter(w):d?this.filter(w):this.where(l).equals("")},$e.prototype.filter=function(s){return this.toCollection().and(s)},$e.prototype.count=function(s){return this.toCollection().count(s)},$e.prototype.offset=function(s){return this.toCollection().offset(s)},$e.prototype.limit=function(s){return this.toCollection().limit(s)},$e.prototype.each=function(s){return this.toCollection().each(s)},$e.prototype.toArray=function(s){return this.toCollection().toArray(s)},$e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$e.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,h(s)?"[".concat(s.join("+"),"]"):s))},$e.prototype.reverse=function(){return this.toCollection().reverse()},$e.prototype.mapToClass=function(s){for(var l=this.db,d=this.name,f=((this.schema.mappedClass=s).prototype instanceof Eu&&(s=(w=>{var C=F,D=w;if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function q(){this.constructor=C}function F(){return w!==null&&w.apply(this,arguments)||this}return n(C,D),C.prototype=D===null?Object.create(D):(q.prototype=D.prototype,new q),Object.defineProperty(F.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),F.prototype.table=function(){return d},F})(s)),new Set),m=s.prototype;m;m=y(m))Object.getOwnPropertyNames(m).forEach(function(w){return f.add(w)});function g(w){if(!w)return w;var C,D=Object.create(s.prototype);for(C in w)if(!f.has(C))try{D[C]=w[C]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),s},$e.prototype.defineClass=function(){return this.mapToClass(function(s){p(this,s)})},$e.prototype.add=function(s,l){var d=this,f=this.schema.primKey,m=f.auto,g=f.keyPath,w=s;return g&&m&&(w=Ps(g)(s)),this._trans("readwrite",function(C){return d.core.mutate({trans:C,type:"add",keys:l!=null?[l]:null,values:[w]})}).then(function(C){return C.numFailures?de.reject(C.failures[0]):C.lastResult}).then(function(C){if(g)try{N(s,g,C)}catch{}return C})},$e.prototype.upsert=function(s,l){var d=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(m){return d.core.get({trans:m,key:s}).then(function(g){var w=g??{};return _u(w,l),f&&N(w,f,s),d.core.mutate({trans:m,type:"put",values:[w],keys:[s],upsert:!0,updates:{keys:[s],changeSpecs:[l]}}).then(function(C){return C.numFailures?de.reject(C.failures[0]):!!g})})})},$e.prototype.update=function(s,l){return typeof s!="object"||h(s)?this.where(":id").equals(s).modify(l):(s=z(s,this.schema.primKey.keyPath))===void 0?rt(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(l)},$e.prototype.put=function(s,l){var d=this,f=this.schema.primKey,m=f.auto,g=f.keyPath,w=s;return g&&m&&(w=Ps(g)(s)),this._trans("readwrite",function(C){return d.core.mutate({trans:C,type:"put",values:[w],keys:l!=null?[l]:null})}).then(function(C){return C.numFailures?de.reject(C.failures[0]):C.lastResult}).then(function(C){if(g)try{N(s,g,C)}catch{}return C})},$e.prototype.delete=function(s){var l=this;return this._trans("readwrite",function(d){return l.core.mutate({trans:d,type:"delete",keys:[s]}).then(function(f){return _s(l,[s],f)}).then(function(f){return f.numFailures?de.reject(f.failures[0]):void 0})})},$e.prototype.clear=function(){var s=this;return this._trans("readwrite",function(l){return s.core.mutate({trans:l,type:"deleteRange",range:Tu}).then(function(d){return _s(s,null,d)})}).then(function(l){return l.numFailures?de.reject(l.failures[0]):void 0})},$e.prototype.bulkGet=function(s){var l=this;return this._trans("readonly",function(d){return l.core.getMany({keys:s,trans:d}).then(function(f){return f.map(function(m){return l.hook.reading.fire(m)})})})},$e.prototype.bulkAdd=function(s,l,d){var f=this,m=Array.isArray(l)?l:void 0,g=(d=d||(m?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(w){var C=f.schema.primKey,q=C.auto,C=C.keyPath;if(C&&m)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==s.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var D=s.length,q=C&&q?s.map(Ps(C)):s;return f.core.mutate({trans:w,type:"add",keys:m,values:q,wantResults:g}).then(function(F){var A=F.numFailures,M=F.failures;if(A===0)return g?F.results:F.lastResult;throw new Je("".concat(f.name,".bulkAdd(): ").concat(A," of ").concat(D," operations failed"),M)})})},$e.prototype.bulkPut=function(s,l,d){var f=this,m=Array.isArray(l)?l:void 0,g=(d=d||(m?void 0:l))?d.allKeys:void 0;return this._trans("readwrite",function(w){var C=f.schema.primKey,q=C.auto,C=C.keyPath;if(C&&m)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==s.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var D=s.length,q=C&&q?s.map(Ps(C)):s;return f.core.mutate({trans:w,type:"put",keys:m,values:q,wantResults:g}).then(function(F){var A=F.numFailures,M=F.failures;if(A===0)return g?F.results:F.lastResult;throw new Je("".concat(f.name,".bulkPut(): ").concat(A," of ").concat(D," operations failed"),M)})})},$e.prototype.bulkUpdate=function(s){var l=this,d=this.core,f=s.map(function(w){return w.key}),m=s.map(function(w){return w.changes}),g=[];return this._trans("readwrite",function(w){return d.getMany({trans:w,keys:f,cache:"clone"}).then(function(C){var D=[],q=[],F=(s.forEach(function(A,M){var B=A.key,R=A.changes,P=C[M];if(P){for(var K=0,Y=Object.keys(R);K<Y.length;K++){var U=Y[K],J=R[U];if(U===l.schema.primKey.keyPath){if(_e(J,B)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else N(P,U,J)}g.push(M),D.push(B),q.push(P)}}),D.length);return d.mutate({trans:w,type:"put",keys:D,values:q,updates:{keys:f,changeSpecs:m}}).then(function(A){var M=A.numFailures,B=A.failures;if(M===0)return F;for(var R=0,P=Object.keys(B);R<P.length;R++){var K,Y=P[R],U=g[Number(Y)];U!=null&&(K=B[Y],delete B[Y],B[U]=K)}throw new Je("".concat(l.name,".bulkUpdate(): ").concat(M," of ").concat(F," operations failed"),B)})})})},$e.prototype.bulkDelete=function(s){var l=this,d=s.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:s}).then(function(m){return _s(l,s,m)})}).then(function(f){var m=f.numFailures,g=f.failures;if(m===0)return f.lastResult;throw new Je("".concat(l.name,".bulkDelete(): ").concat(m," of ").concat(d," operations failed"),g)})};var Du=$e;function $e(){}function ki(s){function l(w,C){if(C){for(var D=arguments.length,q=new Array(D-1);--D;)q[D-1]=arguments[D];return d[w].subscribe.apply(null,q),s}if(typeof w=="string")return d[w]}var d={};l.addEventType=g;for(var f=1,m=arguments.length;f<m;++f)g(arguments[f]);return l;function g(w,C,D){var q,F;if(typeof w!="object")return C=C||je,F={subscribers:[],fire:D=D||Te,subscribe:function(A){F.subscribers.indexOf(A)===-1&&(F.subscribers.push(A),F.fire=C(F.fire,A))},unsubscribe:function(A){F.subscribers=F.subscribers.filter(function(M){return M!==A}),F.fire=F.subscribers.reduce(C,D)}},d[w]=l[w]=F;u(q=w).forEach(function(A){var M=q[A];if(h(M))g(A,q[A][0],q[A][1]);else{if(M!=="asap")throw new me.InvalidArgument("Invalid event config");var B=g(A,xt,function(){for(var R=arguments.length,P=new Array(R);R--;)P[R]=arguments[R];B.subscribers.forEach(function(K){G(function(){K.apply(null,P)})})})}})}}function Ci(s,l){return I(l).from({prototype:s}),l}function Ir(s,l){return!(s.filter||s.algorithm||s.or)&&(l?s.justLimit:!s.replayFilter)}function _o(s,l){s.filter=fr(s.filter,l)}function Do(s,l,d){var f=s.replayFilter;s.replayFilter=f?function(){return fr(f(),l())}:l,s.justLimit=d&&!f}function Ds(s,l){if(s.isPrimKey)return l.primaryKey;var d=l.getIndexByKeyPath(s.index);if(d)return d;throw new me.Schema("KeyPath "+s.index+" on object store "+l.name+" is not indexed")}function Fu(s,l,d){var f=Ds(s,l.schema);return l.openCursor({trans:d,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:f,range:s.range}})}function Fs(s,l,d,f){var m,g,w=s.replayFilter?fr(s.filter,s.replayFilter()):s.filter;return s.or?(m={},g=function(C,D,q){var F,A;w&&!w(D,q,function(M){return D.stop(M)},function(M){return D.fail(M)})||((A=""+(F=D.primaryKey))=="[object ArrayBuffer]"&&(A=""+new Uint8Array(F)),S(m,A))||(m[A]=!0,l(C,D,q))},Promise.all([s.or._iterate(g,d),Ru(Fu(s,f,d),s.algorithm,g,!s.keysOnly&&s.valueMapper)])):Ru(Fu(s,f,d),fr(s.algorithm,w),l,!s.keysOnly&&s.valueMapper)}function Ru(s,l,d,f){var m=qe(f?function(g,w,C){return d(f(g),w,C)}:d);return s.then(function(g){if(g)return g.start(function(){var w=function(){return g.continue()};l&&!l(g,function(C){return w=C},function(C){g.stop(C),w=Te},function(C){g.fail(C),w=Te})||m(g.value,g,function(C){return w=C}),w()})})}Me.prototype._read=function(s,l){var d=this._ctx;return d.error?d.table._trans(null,rt.bind(null,d.error)):d.table._trans("readonly",s).then(l)},Me.prototype._write=function(s){var l=this._ctx;return l.error?l.table._trans(null,rt.bind(null,l.error)):l.table._trans("readwrite",s,"locked")},Me.prototype._addAlgorithm=function(s){var l=this._ctx;l.algorithm=fr(l.algorithm,s)},Me.prototype._iterate=function(s,l){return Fs(this._ctx,s,l,this._ctx.table.core)},Me.prototype.clone=function(s){var l=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return s&&p(d,s),l._ctx=d,l},Me.prototype.raw=function(){return this._ctx.valueMapper=null,this},Me.prototype.each=function(s){var l=this._ctx;return this._read(function(d){return Fs(l,s,d,l.table.core)})},Me.prototype.count=function(s){var l=this;return this._read(function(d){var f,m=l._ctx,g=m.table.core;return Ir(m,!0)?g.count({trans:d,query:{index:Ds(m,g.schema),range:m.range}}).then(function(w){return Math.min(w,m.limit)}):(f=0,Fs(m,function(){return++f,!1},d,g).then(function(){return f}))}).then(s)},Me.prototype.sortBy=function(s,l){var d=s.split(".").reverse(),f=d[0],m=d.length-1;function g(D,q){return q?g(D[d[q]],q-1):D[f]}var w=this._ctx.dir==="next"?1:-1;function C(D,q){return _e(g(D,m),g(q,m))*w}return this.toArray(function(D){return D.sort(C)}).then(l)},Me.prototype.toArray=function(s){var l=this;return this._read(function(d){var f,m,g,w=l._ctx;return w.dir==="next"&&Ir(w,!0)&&0<w.limit?(f=w.valueMapper,m=Ds(w,w.table.core.schema),w.table.core.query({trans:d,limit:w.limit,values:!0,query:{index:m,range:w.range}}).then(function(C){return C=C.result,f?C.map(f):C})):(g=[],Fs(w,function(C){return g.push(C)},d,w.table.core).then(function(){return g}))},s)},Me.prototype.offset=function(s){var l=this._ctx;return s<=0||(l.offset+=s,Ir(l)?Do(l,function(){var d=s;return function(f,m){return d===0||(d===1?--d:m(function(){f.advance(d),d=0}),!1)}}):Do(l,function(){var d=s;return function(){return--d<0}})),this},Me.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Do(this._ctx,function(){var l=s;return function(d,f,m){return--l<=0&&f(m),0<=l}},!0),this},Me.prototype.until=function(s,l){return _o(this._ctx,function(d,f,m){return!s(d.value)||(f(m),l)}),this},Me.prototype.first=function(s){return this.limit(1).toArray(function(l){return l[0]}).then(s)},Me.prototype.last=function(s){return this.reverse().first(s)},Me.prototype.filter=function(s){var l;return _o(this._ctx,function(d){return s(d.value)}),(l=this._ctx).isMatch=fr(l.isMatch,s),this},Me.prototype.and=function(s){return this.filter(s)},Me.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},Me.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Me.prototype.desc=function(){return this.reverse()},Me.prototype.eachKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){s(f.key,f)})},Me.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},Me.prototype.eachPrimaryKey=function(s){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(d,f){s(f.primaryKey,f)})},Me.prototype.keys=function(s){var l=this._ctx,d=(l.keysOnly=!l.isMatch,[]);return this.each(function(f,m){d.push(m.key)}).then(function(){return d}).then(s)},Me.prototype.primaryKeys=function(s){var l=this._ctx;if(l.dir==="next"&&Ir(l,!0)&&0<l.limit)return this._read(function(f){var m=Ds(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:m,range:l.range}})}).then(function(f){return f.result}).then(s);l.keysOnly=!l.isMatch;var d=[];return this.each(function(f,m){d.push(m.primaryKey)}).then(function(){return d}).then(s)},Me.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},Me.prototype.firstKey=function(s){return this.limit(1).keys(function(l){return l[0]}).then(s)},Me.prototype.lastKey=function(s){return this.reverse().firstKey(s)},Me.prototype.distinct=function(){var s,l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];return l&&l.multi&&(s={},_o(this._ctx,function(f){var f=f.primaryKey.toString(),m=S(s,f);return s[f]=!0,!m})),this},Me.prototype.modify=function(s){var l=this,d=this._ctx;return this._write(function(f){function m(P,K){var Y=K.failures;M+=P-K.numFailures;for(var U=0,J=u(Y);U<J.length;U++){var ne=J[U];A.push(Y[ne])}}var g=typeof s=="function"?s:function(P){return _u(P,s)},w=d.table.core,F=w.schema.primaryKey,C=F.outbound,D=F.extractKey,q=200,F=l.db._options.modifyChunkSize,A=(F&&(q=typeof F=="object"?F[w.name]||F["*"]||200:F),[]),M=0,B=[],R=s===Mu;return l.clone().primaryKeys().then(function(P){function K(U){var J=Math.min(q,P.length-U),ne=P.slice(U,U+J);return(R?Promise.resolve([]):w.getMany({trans:f,keys:ne,cache:"immutable"})).then(function(ce){var ue=[],re=[],pe=C?[]:null,fe=R?ne:[];if(!R)for(var ae=0;ae<J;++ae){var ye=ce[ae],Fe={value:te(ye),primKey:P[U+ae]};g.call(Fe,Fe.value,Fe)!==!1&&(Fe.value==null?fe.push(P[U+ae]):C||_e(D(ye),D(Fe.value))===0?(re.push(Fe.value),C&&pe.push(P[U+ae])):(fe.push(P[U+ae]),ue.push(Fe.value)))}return Promise.resolve(0<ue.length&&w.mutate({trans:f,type:"add",values:ue}).then(function(Be){for(var Ce in Be.failures)fe.splice(parseInt(Ce),1);m(ue.length,Be)})).then(function(){return(0<re.length||Y&&typeof s=="object")&&w.mutate({trans:f,type:"put",keys:pe,values:re,criteria:Y,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<U}).then(function(Be){return m(re.length,Be)})}).then(function(){return(0<fe.length||Y&&R)&&w.mutate({trans:f,type:"delete",keys:fe,criteria:Y,isAdditionalChunk:0<U}).then(function(Be){return _s(d.table,fe,Be)}).then(function(Be){return m(fe.length,Be)})}).then(function(){return P.length>U+J&&K(U+q)})})}var Y=Ir(d)&&d.limit===1/0&&(typeof s!="function"||R)&&{index:d.index,range:d.range};return K(0).then(function(){if(0<A.length)throw new Ie("Error modifying one or more objects",A,M,B);return P.length})})})},Me.prototype.delete=function(){var s=this._ctx,l=s.range;return!Ir(s)||s.table.schema.yProps||!s.isPrimKey&&l.type!==3?this.modify(Mu):this._write(function(d){var f=s.table.core.schema.primaryKey,m=l;return s.table.core.count({trans:d,query:{index:f,range:m}}).then(function(g){return s.table.core.mutate({trans:d,type:"deleteRange",range:m}).then(function(D){var C=D.failures,D=D.numFailures;if(D)throw new Ie("Could not delete some values",Object.keys(C).map(function(q){return C[q]}),g-D);return g-D})})})};var im=Me;function Me(){}var Mu=function(s,l){return l.value=null};function sm(s,l){return s<l?-1:s===l?0:1}function am(s,l){return l<s?-1:s===l?0:1}function Vt(s,l,d){return s=s instanceof Iu?new s.Collection(s):s,s._ctx.error=new(d||TypeError)(l),s}function Or(s){return new s.Collection(s,function(){return Bu("")}).limit(0)}function Rs(B,l,d,f){var m,g,w,C,D,q,F,A=d.length;if(!d.every(function(P){return typeof P=="string"}))return Vt(B,ju);function M(P){m=P==="next"?function(Y){return Y.toUpperCase()}:function(Y){return Y.toLowerCase()},g=P==="next"?function(Y){return Y.toLowerCase()}:function(Y){return Y.toUpperCase()},w=P==="next"?sm:am;var K=d.map(function(Y){return{lower:g(Y),upper:m(Y)}}).sort(function(Y,U){return w(Y.lower,U.lower)});C=K.map(function(Y){return Y.upper}),D=K.map(function(Y){return Y.lower}),F=(q=P)==="next"?"":f}M("next");var B=new B.Collection(B,function(){return zn(C[0],D[A-1]+f)}),R=(B._ondirectionchange=function(P){M(P)},0);return B._addAlgorithm(function(P,K,Y){var U=P.key;if(typeof U=="string"){var J=g(U);if(l(J,D,R))return!0;for(var ne=null,ce=R;ce<A;++ce){var ue=((re,pe,fe,ae,ye,Fe)=>{for(var Be=Math.min(re.length,ae.length),Ce=-1,Ee=0;Ee<Be;++Ee){var He=pe[Ee];if(He!==ae[Ee])return ye(re[Ee],fe[Ee])<0?re.substr(0,Ee)+fe[Ee]+fe.substr(Ee+1):ye(re[Ee],ae[Ee])<0?re.substr(0,Ee)+ae[Ee]+fe.substr(Ee+1):0<=Ce?re.substr(0,Ce)+pe[Ce]+fe.substr(Ce+1):null;ye(re[Ee],He)<0&&(Ce=Ee)}return Be<ae.length&&Fe==="next"?re+fe.substr(re.length):Be<re.length&&Fe==="prev"?re.substr(0,fe.length):Ce<0?null:re.substr(0,Ce)+ae[Ce]+fe.substr(Ce+1)})(U,J,C[ce],D[ce],w,q);ue===null&&ne===null?R=ce+1:(ne===null||0<w(ne,ue))&&(ne=ue)}K(ne!==null?function(){P.continue(ne+F)}:Y)}return!1}),B}function zn(s,l,d,f){return{type:2,lower:s,upper:l,lowerOpen:d,upperOpen:f}}function Bu(s){return{type:1,lower:s,upper:s}}Object.defineProperty(ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ft.prototype.between=function(s,l,d,f){d=d!==!1,f=f===!0;try{return 0<this._cmp(s,l)||this._cmp(s,l)===0&&(d||f)&&(!d||!f)?Or(this):new this.Collection(this,function(){return zn(s,l,!d,!f)})}catch{return Vt(this,kn)}},ft.prototype.equals=function(s){return s==null?Vt(this,kn):new this.Collection(this,function(){return Bu(s)})},ft.prototype.above=function(s){return s==null?Vt(this,kn):new this.Collection(this,function(){return zn(s,void 0,!0)})},ft.prototype.aboveOrEqual=function(s){return s==null?Vt(this,kn):new this.Collection(this,function(){return zn(s,void 0,!1)})},ft.prototype.below=function(s){return s==null?Vt(this,kn):new this.Collection(this,function(){return zn(void 0,s,!1,!0)})},ft.prototype.belowOrEqual=function(s){return s==null?Vt(this,kn):new this.Collection(this,function(){return zn(void 0,s)})},ft.prototype.startsWith=function(s){return typeof s!="string"?Vt(this,ju):this.between(s,s+dr,!0,!0)},ft.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Rs(this,function(l,d){return l.indexOf(d[0])===0},[s],dr)},ft.prototype.equalsIgnoreCase=function(s){return Rs(this,function(l,d){return l===d[0]},[s],"")},ft.prototype.anyOfIgnoreCase=function(){var s=Z.apply(ee,arguments);return s.length===0?Or(this):Rs(this,function(l,d){return d.indexOf(l)!==-1},s,"")},ft.prototype.startsWithAnyOfIgnoreCase=function(){var s=Z.apply(ee,arguments);return s.length===0?Or(this):Rs(this,function(l,d){return d.some(function(f){return l.indexOf(f)===0})},s,dr)},ft.prototype.anyOf=function(){var s,l,d=this,f=Z.apply(ee,arguments),m=this._cmp;try{f.sort(m)}catch{return Vt(this,kn)}return f.length===0?Or(this):((s=new this.Collection(this,function(){return zn(f[0],f[f.length-1])}))._ondirectionchange=function(g){m=g==="next"?d._ascending:d._descending,f.sort(m)},l=0,s._addAlgorithm(function(g,w,C){for(var D=g.key;0<m(D,f[l]);)if(++l===f.length)return w(C),!1;return m(D,f[l])===0||(w(function(){g.continue(f[l])}),!1)}),s)},ft.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ft.prototype.noneOf=function(){var s=Z.apply(ee,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Vt(this,kn)}var l=s.reduce(function(d,f){return d?d.concat([[d[d.length-1][1],f]]):[[-1/0,f]]},null);return l.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},ft.prototype.inAnyRange=function(s,Y){var d=this,f=this._cmp,m=this._ascending,g=this._descending,w=this._min,C=this._max;if(s.length===0)return Or(this);if(!s.every(function(U){return U[0]!==void 0&&U[1]!==void 0&&m(U[0],U[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var D=!Y||Y.includeLowers!==!1,q=Y&&Y.includeUppers===!0,F,A=m;function M(U,J){return A(U[0],J[0])}try{(F=s.reduce(function(U,J){for(var ne=0,ce=U.length;ne<ce;++ne){var ue=U[ne];if(f(J[0],ue[1])<0&&0<f(J[1],ue[0])){ue[0]=w(ue[0],J[0]),ue[1]=C(ue[1],J[1]);break}}return ne===ce&&U.push(J),U},[])).sort(M)}catch{return Vt(this,kn)}var B=0,R=q?function(U){return 0<m(U,F[B][1])}:function(U){return 0<=m(U,F[B][1])},P=D?function(U){return 0<g(U,F[B][0])}:function(U){return 0<=g(U,F[B][0])},K=R,Y=new this.Collection(this,function(){return zn(F[0][0],F[F.length-1][1],!D,!q)});return Y._ondirectionchange=function(U){A=U==="next"?(K=R,m):(K=P,g),F.sort(M)},Y._addAlgorithm(function(U,J,ne){for(var ce,ue=U.key;K(ue);)if(++B===F.length)return J(ne),!1;return!R(ce=ue)&&!P(ce)||(d._cmp(ue,F[B][1])===0||d._cmp(ue,F[B][0])===0||J(function(){A===m?U.continue(F[B][0]):U.continue(F[B][1])}),!1)}),Y},ft.prototype.startsWithAnyOf=function(){var s=Z.apply(ee,arguments);return s.every(function(l){return typeof l=="string"})?s.length===0?Or(this):this.inAnyRange(s.map(function(l){return[l,l+dr]})):Vt(this,"startsWithAnyOf() only works with strings")};var Iu=ft;function ft(){}function mn(s){return qe(function(l){return Si(l),s(l.target.error),!1})}function Si(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var ji="storagemutated",Fo="x-storagemutated-1",Ln=ki(null,ji),om=(gn.prototype._lock=function(){return _(!be.global),++this._reculock,this._reculock!==1||be.global||(be.lockOwnerFor=this),this},gn.prototype._unlock=function(){if(_(!be.global),--this._reculock==0)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{ur(s[1],s[0])}catch{}}return this},gn.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},gn.prototype.create=function(s){var l=this;if(this.mode){var d=this.db.idbdb,f=this.db._state.dbOpenError;if(_(!this.idbtrans),!s&&!d)switch(f&&f.name){case"DatabaseClosedError":throw new me.DatabaseClosed(f);case"MissingAPIError":throw new me.MissingAPI(f.message,f);default:throw new me.OpenFailed(f)}if(!this.active)throw new me.TransactionInactive;_(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=qe(function(m){Si(m),l._reject(s.error)}),s.onabort=qe(function(m){Si(m),l.active&&l._reject(new me.Abort(s.error)),l.active=!1,l.on("abort").fire(m)}),s.oncomplete=qe(function(){l.active=!1,l._resolve(),"mutatedParts"in s&&Ln.storagemutated.fire(s.mutatedParts)})}return this},gn.prototype._promise=function(s,l,d){var f,m=this;return s==="readwrite"&&this.mode!=="readwrite"?rt(new me.ReadOnly("Transaction is readonly")):this.active?this._locked()?new de(function(g,w){m._blockedFuncs.push([function(){m._promise(s,l,d).then(g,w)},be])}):d?Bn(function(){var g=new de(function(w,C){m._lock();var D=l(w,C,m);D&&D.then&&D.then(w,C)});return g.finally(function(){return m._unlock()}),g._lib=!0,g}):((f=new de(function(g,w){var C=l(g,w,m);C&&C.then&&C.then(g,w)}))._lib=!0,f):rt(new me.TransactionInactive)},gn.prototype._root=function(){return this.parent?this.parent._root():this},gn.prototype.waitFor=function(s){var l,d=this._root(),f=de.resolve(s),m=(d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return f}):(d._waitingFor=f,d._waitingQueue=[],l=d.idbtrans.objectStore(d.storeNames[0]),function g(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(l.get(-1/0).onsuccess=g)}()),d._waitingFor);return new de(function(g,w){f.then(function(C){return d._waitingQueue.push(qe(g.bind(null,C)))},function(C){return d._waitingQueue.push(qe(w.bind(null,C)))}).finally(function(){d._waitingFor===m&&(d._waitingFor=null)})})},gn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},gn.prototype.table=function(s){var l=this._memoizedTables||(this._memoizedTables={});if(S(l,s))return l[s];var d=this.schema[s];if(d)return(d=new this.db.Table(s,d,this)).core=this.db.core.table(s),l[s]=d;throw new me.NotFound("Table "+s+" not part of transaction")},gn);function gn(){}function Ro(s,l,d,f,m,g,w,C){return{name:s,keyPath:l,unique:d,multi:f,auto:m,compound:g,src:(d&&!w?"&":"")+(f?"*":"")+(m?"++":"")+Ou(l),type:C}}function Ou(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Mo(s,l,d){return{name:s,primKey:l,indexes:d,mappedClass:null,idxByName:(f=function(m){return[m.name,m]},d.reduce(function(m,g,w){return g=f(g,w),g&&(m[g[0]]=g[1]),m},{}))};var f}var Ti=function(s){try{return s.only([[]]),Ti=function(){return[[]]},[[]]}catch{return Ti=function(){return dr},dr}};function Bo(s){return s==null?function(){}:typeof s=="string"?(l=s).split(".").length===1?function(d){return d[l]}:function(d){return z(d,l)}:function(d){return z(d,s)};var l}function zu(s){return[].slice.call(s)}var lm=0;function Ei(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function cm(s,l,D){function f(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=R.lower,M=R.upper,B=R.lowerOpen,R=R.upperOpen;return A===void 0?M===void 0?null:l.upperBound(M,!!R):M===void 0?l.lowerBound(A,!!B):l.bound(A,M,!!B,!!R)}function m(F){var A,M=F.name;return{name:M,schema:F,mutate:function(B){var R=B.trans,P=B.type,K=B.keys,Y=B.values,U=B.range;return new Promise(function(J,ne){J=qe(J);var ce=R.objectStore(M),ue=ce.keyPath==null,re=P==="put"||P==="add";if(!re&&P!=="delete"&&P!=="deleteRange")throw new Error("Invalid operation type: "+P);var pe,fe=(K||Y||{length:1}).length;if(K&&Y&&K.length!==Y.length)throw new Error("Given keys array must have same length as given values array.");if(fe===0)return J({numFailures:0,failures:{},results:[],lastResult:void 0});function ae(et){++Be,Si(et)}var ye=[],Fe=[],Be=0;if(P==="deleteRange"){if(U.type===4)return J({numFailures:Be,failures:Fe,results:[],lastResult:void 0});U.type===3?ye.push(pe=ce.clear()):ye.push(pe=ce.delete(f(U)))}else{var ue=re?ue?[Y,K]:[Y,null]:[K,null],Ce=ue[0],Ee=ue[1];if(re)for(var He=0;He<fe;++He)ye.push(pe=Ee&&Ee[He]!==void 0?ce[P](Ce[He],Ee[He]):ce[P](Ce[He])),pe.onerror=ae;else for(He=0;He<fe;++He)ye.push(pe=ce[P](Ce[He])),pe.onerror=ae}function Yt(et){et=et.target.result,ye.forEach(function(mr,el){return mr.error!=null&&(Fe[el]=mr.error)}),J({numFailures:Be,failures:Fe,results:P==="delete"?K:ye.map(function(mr){return mr.result}),lastResult:et})}pe.onerror=function(et){ae(et),Yt(et)},pe.onsuccess=Yt})},getMany:function(B){var R=B.trans,P=B.keys;return new Promise(function(K,Y){K=qe(K);for(var U,J=R.objectStore(M),ne=P.length,ce=new Array(ne),ue=0,re=0,pe=function(ye){ye=ye.target,ce[ye._pos]=ye.result,++re===ue&&K(ce)},fe=mn(Y),ae=0;ae<ne;++ae)P[ae]!=null&&((U=J.get(P[ae]))._pos=ae,U.onsuccess=pe,U.onerror=fe,++ue);ue===0&&K(ce)})},get:function(B){var R=B.trans,P=B.key;return new Promise(function(K,Y){K=qe(K);var U=R.objectStore(M).get(P);U.onsuccess=function(J){return K(J.target.result)},U.onerror=mn(Y)})},query:(A=C,function(B){return new Promise(function(R,P){R=qe(R);var K,Y,U,re=B.trans,J=B.values,ne=B.limit,ue=B.query,ce=ne===1/0?void 0:ne,pe=ue.index,ue=ue.range,re=re.objectStore(M),re=pe.isPrimaryKey?re:re.index(pe.name),pe=f(ue);if(ne===0)return R({result:[]});A?((ue=J?re.getAll(pe,ce):re.getAllKeys(pe,ce)).onsuccess=function(fe){return R({result:fe.target.result})},ue.onerror=mn(P)):(K=0,Y=!J&&"openKeyCursor"in re?re.openKeyCursor(pe):re.openCursor(pe),U=[],Y.onsuccess=function(fe){var ae=Y.result;return!ae||(U.push(J?ae.value:ae.primaryKey),++K===ne)?R({result:U}):void ae.continue()},Y.onerror=mn(P))})}),openCursor:function(B){var R=B.trans,P=B.values,K=B.query,Y=B.reverse,U=B.unique;return new Promise(function(J,ne){J=qe(J);var re=K.index,ce=K.range,ue=R.objectStore(M),ue=re.isPrimaryKey?ue:ue.index(re.name),re=Y?U?"prevunique":"prev":U?"nextunique":"next",pe=!P&&"openKeyCursor"in ue?ue.openKeyCursor(f(ce),re):ue.openCursor(f(ce),re);pe.onerror=mn(ne),pe.onsuccess=qe(function(fe){var ae,ye,Fe,Be,Ce=pe.result;Ce?(Ce.___id=++lm,Ce.done=!1,ae=Ce.continue.bind(Ce),ye=(ye=Ce.continuePrimaryKey)&&ye.bind(Ce),Fe=Ce.advance.bind(Ce),Be=function(){throw new Error("Cursor not stopped")},Ce.trans=R,Ce.stop=Ce.continue=Ce.continuePrimaryKey=Ce.advance=function(){throw new Error("Cursor not started")},Ce.fail=qe(ne),Ce.next=function(){var Ee=this,He=1;return this.start(function(){return He--?Ee.continue():Ee.stop()}).then(function(){return Ee})},Ce.start=function(Ee){function He(){if(pe.result)try{Ee()}catch(et){Ce.fail(et)}else Ce.done=!0,Ce.start=function(){throw new Error("Cursor behind last entry")},Ce.stop()}var Yt=new Promise(function(et,mr){et=qe(et),pe.onerror=mn(mr),Ce.fail=mr,Ce.stop=function(el){Ce.stop=Ce.continue=Ce.continuePrimaryKey=Ce.advance=Be,et(el)}});return pe.onsuccess=qe(function(et){pe.onsuccess=He,He()}),Ce.continue=ae,Ce.continuePrimaryKey=ye,Ce.advance=Fe,He(),Yt},J(Ce)):J(null)},ne)})},count:function(B){var R=B.query,P=B.trans,K=R.index,Y=R.range;return new Promise(function(U,J){var ne=P.objectStore(M),ne=K.isPrimaryKey?ne:ne.index(K.name),ce=f(Y),ce=ce?ne.count(ce):ne.count();ce.onsuccess=qe(function(ue){return U(ue.target.result)}),ce.onerror=mn(J)})}}}g=D,w=zu((D=s).objectStoreNames);var g,D={schema:{name:D.name,tables:w.map(function(F){return g.objectStore(F)}).map(function(F){var A=F.keyPath,M=F.autoIncrement,R=h(A),B={},R={name:F.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A==null,compound:R,keyPath:A,autoIncrement:M,unique:!0,extractKey:Bo(A)},indexes:zu(F.indexNames).map(function(P){return F.index(P)}).map(function(U){var J=U.name,K=U.unique,Y=U.multiEntry,U=U.keyPath,J={name:J,compound:h(U),keyPath:U,unique:K,multiEntry:Y,extractKey:Bo(U)};return B[Ei(U)]=J}),getIndexByKeyPath:function(P){return B[Ei(P)]}};return B[":id"]=R.primaryKey,A!=null&&(B[Ei(A)]=R.primaryKey),R})},hasGetAll:0<w.length&&"getAll"in g.objectStore(w[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},w=D.schema,C=D.hasGetAll,D=w.tables.map(m),q={};return D.forEach(function(F){return q[F.name]=F}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(F){if(q[F])return q[F];throw new Error("Table '".concat(F,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ti(l),schema:w}}function um(s,l,d,f){return d=d.IDBKeyRange,l=cm(l,d,f),{dbcore:s.dbcore.reduce(function(m,g){return g=g.create,r(r({},m),g(m))},l)}}function Ms(s,l){var d=l.db,d=um(s._middlewares,d,s._deps,l);s.core=d.dbcore,s.tables.forEach(function(f){var m=f.name;s.core.schema.tables.some(function(g){return g.name===m})&&(f.core=s.core.table(m),s[m]instanceof s.Table)&&(s[m].core=f.core)})}function Bs(s,l,d,f){d.forEach(function(m){var g=f[m];l.forEach(function(w){var C=function D(q,F){return V(q,F)||(q=y(q))&&D(q,F)}(w,m);(!C||"value"in C&&C.value===void 0)&&(w===s.Transaction.prototype||w instanceof s.Transaction?$(w,m,{get:function(){return this.table(m)},set:function(D){W(this,m,{value:D,writable:!0,configurable:!0,enumerable:!0})}}):w[m]=new s.Table(m,g))})})}function Io(s,l){l.forEach(function(d){for(var f in d)d[f]instanceof s.Table&&delete d[f]})}function dm(s,l){return s._cfg.version-l._cfg.version}function fm(s,l,d,f){var m=s._dbSchema,g=(d.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=Mo("$meta",$u("")[0],[]),s._storeNames.push("$meta")),s._createTransaction("readwrite",s._storeNames,m)),w=(g.create(d),g._completion.catch(f),g._reject.bind(g)),C=be.transless||be;Bn(function(){if(be.trans=g,be.transless=C,l!==0)return Ms(s,d),q=l,((D=g).storeNames.includes("$meta")?D.table("$meta").get("version").then(function(F){return F??q}):de.resolve(q)).then(function(K){var A=s,M=K,B=g,R=d,P=[],K=A._versions,Y=A._dbSchema=Os(0,A.idbdb,R);return(K=K.filter(function(U){return U._cfg.version>=M})).length===0?de.resolve():(K.forEach(function(U){P.push(function(){var J,ne,ce,ue=Y,re=U._cfg.dbschema,pe=(zs(A,ue,R),zs(A,re,R),Y=A._dbSchema=re,Oo(ue,re)),fe=(pe.add.forEach(function(ae){zo(R,ae[0],ae[1].primKey,ae[1].indexes)}),pe.change.forEach(function(ae){if(ae.recreate)throw new me.Upgrade("Not yet support for changing primary key");var ye=R.objectStore(ae.name);ae.add.forEach(function(Fe){return Is(ye,Fe)}),ae.change.forEach(function(Fe){ye.deleteIndex(Fe.name),Is(ye,Fe)}),ae.del.forEach(function(Fe){return ye.deleteIndex(Fe)})}),U._cfg.contentUpgrade);if(fe&&U._cfg.version>M)return Ms(A,R),B._memoizedTables={},J=L(re),pe.del.forEach(function(ae){J[ae]=ue[ae]}),Io(A,[A.Transaction.prototype]),Bs(A,[A.Transaction.prototype],u(J),J),B.schema=J,(ne=he(fe))&&Mr(),re=de.follow(function(){var ae;(ce=fe(B))&&ne&&(ae=In.bind(null,null),ce.then(ae,ae))}),ce&&typeof ce.then=="function"?de.resolve(ce):re.then(function(){return ce})}),P.push(function(J){var ne,ce,ue=U._cfg.dbschema;ne=ue,ce=J,[].slice.call(ce.db.objectStoreNames).forEach(function(re){return ne[re]==null&&ce.db.deleteObjectStore(re)}),Io(A,[A.Transaction.prototype]),Bs(A,[A.Transaction.prototype],A._storeNames,A._dbSchema),B.schema=A._dbSchema}),P.push(function(J){A.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(A.idbdb.version/10)===U._cfg.version?(A.idbdb.deleteObjectStore("$meta"),delete A._dbSchema.$meta,A._storeNames=A._storeNames.filter(function(ne){return ne!=="$meta"})):J.objectStore("$meta").put(U._cfg.version,"version"))})}),function U(){return P.length?de.resolve(P.shift()(B.idbtrans)).then(U):de.resolve()}().then(function(){Lu(Y,R)}))}).catch(w);var D,q;u(m).forEach(function(F){zo(d,F,m[F].primKey,m[F].indexes)}),Ms(s,d),de.follow(function(){return s.on.populate.fire(g)}).catch(w)})}function hm(s,l){Lu(s._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var d=Os(0,s.idbdb,l);zs(s,s._dbSchema,l);for(var f=0,m=Oo(d,s._dbSchema).change;f<m.length;f++){var g=(w=>{if(w.change.length||w.recreate)return console.warn("Unable to patch indexes of table ".concat(w.name," because it has changes on the type of index or primary key.")),{value:void 0};var C=l.objectStore(w.name);w.add.forEach(function(D){ge&&console.debug("Dexie upgrade patch: Creating missing index ".concat(w.name,".").concat(D.src)),Is(C,D)})})(m[f]);if(typeof g=="object")return g.value}}function Oo(s,l){var d,f={del:[],add:[],change:[]};for(d in s)l[d]||f.del.push(d);for(d in l){var m=s[d],g=l[d];if(m){var w={name:d,def:g,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(g.primKey.keyPath||"")||m.primKey.auto!==g.primKey.auto)w.recreate=!0,f.change.push(w);else{var C=m.idxByName,D=g.idxByName,q=void 0;for(q in C)D[q]||w.del.push(q);for(q in D){var F=C[q],A=D[q];F?F.src!==A.src&&w.change.push(A):w.add.push(A)}(0<w.del.length||0<w.add.length||0<w.change.length)&&f.change.push(w)}}else f.add.push([d,g])}return f}function zo(s,l,d,f){var m=s.db.createObjectStore(l,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});f.forEach(function(g){return Is(m,g)})}function Lu(s,l){u(s).forEach(function(d){l.db.objectStoreNames.contains(d)||(ge&&console.debug("Dexie: Creating missing table",d),zo(l,d,s[d].primKey,s[d].indexes))})}function Is(s,l){s.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function Os(s,l,d){var f={};return v(l.objectStoreNames,0).forEach(function(m){for(var g=d.objectStore(m),w=Ro(Ou(q=g.keyPath),q||"",!0,!1,!!g.autoIncrement,q&&typeof q!="string",!0),C=[],D=0;D<g.indexNames.length;++D){var F=g.index(g.indexNames[D]),q=F.keyPath,F=Ro(F.name,q,!!F.unique,!!F.multiEntry,!1,q&&typeof q!="string",!1);C.push(F)}f[m]=Mo(m,w,C)}),f}function zs(s,l,d){for(var f=d.db.objectStoreNames,m=0;m<f.length;++m){var g=f[m],w=d.objectStore(g);s._hasGetAll="getAll"in w;for(var C=0;C<w.indexNames.length;++C){var D,q=w.indexNames[C],F=w.index(q).keyPath,F=typeof F=="string"?F:"["+v(F).join("+")+"]";l[g]&&(D=l[g].idxByName[F])&&(D.name=q,delete l[g].idxByName[F],l[g].idxByName[q]=D)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function $u(s){return s.split(",").map(function(l,d){var m=l.split(":"),f=(f=m[1])==null?void 0:f.trim(),m=(l=m[0].trim()).replace(/([&*]|\+\+)/g,""),g=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return Ro(m,g||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),h(g),d===0,f)})}zr.prototype._createTableSchema=Mo,zr.prototype._parseIndexSyntax=$u,zr.prototype._parseStoresSpec=function(s,l){var d=this;u(s).forEach(function(f){if(s[f]!==null){var m=d._parseIndexSyntax(s[f]),g=m.shift();if(!g)throw new me.Schema("Invalid schema for table "+f+": "+s[f]);if(g.unique=!0,g.multi)throw new me.Schema("Primary key cannot be multiEntry*");m.forEach(function(w){if(w.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!w.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),g=d._createTableSchema(f,g,m),l[f]=g}})},zr.prototype.stores=function(d){var l=this.db,d=(this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,d):d,l._versions),f={},m={};return d.forEach(function(g){p(f,g._cfg.storesSource),m=g._cfg.dbschema={},g._parseStoresSpec(f,m)}),l._dbSchema=m,Io(l,[l._allTables,l,l.Transaction.prototype]),Bs(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],u(m),m),l._storeNames=u(m),this},zr.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Pe(this._cfg.contentUpgrade||Te,s),this};var pm=zr;function zr(){}function Lo(s,l){var d=s._dbNamesDB;return d||(d=s._dbNamesDB=new Cn(As,{addons:[],indexedDB:s,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function $o(s){return s&&typeof s.databases=="function"}function Vo(s){return Bn(function(){return be.letThrough=!0,s()})}function Go(s){return!("from"in s)}var wt=function(s,l){var d;if(!this)return d=new wt,s&&"d"in s&&p(d,s),d;p(this,arguments.length?{d:1,from:s,to:1<arguments.length?l:s}:{d:0})};function Ni(s,l,d){var f=_e(l,d);if(!isNaN(f)){if(0<f)throw RangeError();if(Go(s))return p(s,{from:l,to:d,d:1});var f=s.l,m=s.r;if(_e(d,s.from)<0)return f?Ni(f,l,d):s.l={from:l,to:d,d:1,l:null,r:null},Gu(s);if(0<_e(l,s.to))return m?Ni(m,l,d):s.r={from:l,to:d,d:1,l:null,r:null},Gu(s);_e(l,s.from)<0&&(s.from=l,s.l=null,s.d=m?m.d+1:1),0<_e(d,s.to)&&(s.to=d,s.r=null,s.d=s.l?s.l.d+1:1),l=!s.r,f&&!s.l&&Ai(s,f),m&&l&&Ai(s,m)}}function Ai(s,l){Go(l)||function d(f,m){var g=m.from,w=m.l,C=m.r;Ni(f,g,m.to),w&&d(f,w),C&&d(f,C)}(s,l)}function Vu(s,l){var d=Ls(l),f=d.next();if(!f.done)for(var m=f.value,g=Ls(s),w=g.next(m.from),C=w.value;!f.done&&!w.done;){if(_e(C.from,m.to)<=0&&0<=_e(C.to,m.from))return!0;_e(m.from,C.from)<0?m=(f=d.next(C.from)).value:C=(w=g.next(m.from)).value}return!1}function Ls(s){var l=Go(s)?null:{s:0,n:s};return{next:function(d){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&_e(d,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||_e(d,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Gu(s){var l,d,f,m=(((m=s.r)==null?void 0:m.d)||0)-(((m=s.l)==null?void 0:m.d)||0),m=1<m?"r":m<-1?"l":"";m&&(l=m=="r"?"l":"r",d=r({},s),f=s[m],s.from=f.from,s.to=f.to,s[m]=f[m],d[m]=f[l],(s[l]=d).d=Wu(d)),s.d=Wu(s)}function Wu(d){var l=d.r,d=d.l;return(l?d?Math.max(l.d,d.d):l.d:d?d.d:0)+1}function $s(s,l){return u(l).forEach(function(d){s[d]?Ai(s[d],l[d]):s[d]=function f(m){var g,w,C={};for(g in m)S(m,g)&&(w=m[g],C[g]=!w||typeof w!="object"||T.has(w.constructor)?w:f(w));return C}(l[d])}),s}function Wo(s,l){return s.all||l.all||Object.keys(s).some(function(d){return l[d]&&Vu(l[d],s[d])})}E(wt.prototype,((lt={add:function(s){return Ai(this,s),this},addKey:function(s){return Ni(this,s,s),this},addKeys:function(s){var l=this;return s.forEach(function(d){return Ni(l,d,d)}),this},hasKey:function(s){var l=Ls(this).next(s).value;return l&&_e(l.from,s)<=0&&0<=_e(l.to,s)}})[we]=function(){return Ls(this)},lt));var hr={},Uo={},qo=!1;function Vs(s){$s(Uo,s),qo||(qo=!0,setTimeout(function(){qo=!1,Ko(Uo,!(Uo={}))},0))}function Ko(s,l){l===void 0&&(l=!1);var d=new Set;if(s.all)for(var f=0,m=Object.values(hr);f<m.length;f++)Uu(C=m[f],s,d,l);else for(var g in s){var w,C,g=/^idb\:\/\/(.*)\/(.*)\//.exec(g);g&&(w=g[1],g=g[2],C=hr["idb://".concat(w,"/").concat(g)])&&Uu(C,s,d,l)}d.forEach(function(D){return D()})}function Uu(s,l,d,f){for(var m=[],g=0,w=Object.entries(s.queries.query);g<w.length;g++){for(var C=w[g],D=C[0],q=[],F=0,A=C[1];F<A.length;F++){var M=A[F];Wo(l,M.obsSet)?M.subscribers.forEach(function(K){return d.add(K)}):f&&q.push(M)}f&&m.push([D,q])}if(f)for(var B=0,R=m;B<R.length;B++){var P=R[B],D=P[0],q=P[1];s.queries.query[D]=q}}function mm(s){var l=s._state,d=s._deps.indexedDB;if(l.isBeingOpened||s.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?rt(l.dbOpenError):s});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,m=Math.round(10*s.verno),g=!1;function w(){if(l.openCanceller!==f)throw new me.DatabaseClosed("db.open() was cancelled")}function C(){return new de(function(M,B){if(w(),!d)throw new me.MissingAPI;var R=s.name,P=l.autoSchema||!m?d.open(R):d.open(R,m);if(!P)throw new me.MissingAPI;P.onerror=mn(B),P.onblocked=qe(s._fireOnBlocked),P.onupgradeneeded=qe(function(K){var Y;F=P.transaction,l.autoSchema&&!s._options.allowEmptyDB?(P.onerror=Si,F.abort(),P.result.close(),(Y=d.deleteDatabase(R)).onsuccess=Y.onerror=qe(function(){B(new me.NoSuchDatabase("Database ".concat(R," doesnt exist")))})):(F.onerror=mn(B),Y=K.oldVersion>Math.pow(2,62)?0:K.oldVersion,A=Y<1,s.idbdb=P.result,g&&hm(s,F),fm(s,Y/10,F,B))},B),P.onsuccess=qe(function(){F=null;var K,Y,U,J,ne,ce,ue=s.idbdb=P.result,re=v(ue.objectStoreNames);if(0<re.length)try{var pe=ue.transaction((ne=re).length===1?ne[0]:ne,"readonly");if(l.autoSchema)ce=ue,J=pe,(U=s).verno=ce.version/10,J=U._dbSchema=Os(0,ce,J),U._storeNames=v(ce.objectStoreNames,0),Bs(U,[U._allTables],u(J),J);else if(zs(s,s._dbSchema,pe),Y=pe,((Y=Oo(Os(0,(K=s).idbdb,Y),K._dbSchema)).add.length||Y.change.some(function(fe){return fe.add.length||fe.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ue.close(),m=ue.version+1,g=!0,M(C());Ms(s,pe)}catch{}Br.push(s),ue.onversionchange=qe(function(fe){l.vcFired=!0,s.on("versionchange").fire(fe)}),ue.onclose=qe(function(){s.close({disableAutoOpen:!1})}),A&&(re=s._deps,ne=R,$o(ce=re.indexedDB)||ne===As||Lo(ce,re.IDBKeyRange).put({name:ne}).catch(Te)),M()},B)}).catch(function(M){switch(M==null?void 0:M.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),C();break;case"VersionError":if(0<m)return m=0,C()}return de.reject(M)})}var D,q=l.dbReadyResolve,F=null,A=!1;return de.race([f,(typeof navigator>"u"?de.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(M){function B(){return indexedDB.databases().finally(M)}D=setInterval(B,100),B()}).finally(function(){return clearInterval(D)}):Promise.resolve()).then(C)]).then(function(){return w(),l.onReadyBeingFired=[],de.resolve(Vo(function(){return s.on.ready.fire(s.vip)})).then(function M(){var B;if(0<l.onReadyBeingFired.length)return B=l.onReadyBeingFired.reduce(Pe,Te),l.onReadyBeingFired=[],de.resolve(Vo(function(){return B(s.vip)})).then(M)})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(M){l.dbOpenError=M;try{F&&F.abort()}catch{}return f===l.openCanceller&&s._close(),rt(M)}).finally(function(){l.openComplete=!0,q()}).then(function(){var M;return A&&(M={},s.tables.forEach(function(B){B.schema.indexes.forEach(function(R){R.name&&(M["idb://".concat(s.name,"/").concat(B.name,"/").concat(R.name)]=new wt(-1/0,[[[]]]))}),M["idb://".concat(s.name,"/").concat(B.name,"/")]=M["idb://".concat(s.name,"/").concat(B.name,"/:dels")]=new wt(-1/0,[[[]]])}),Ln(ji).fire(M),Ko(M,!0)),s})}function Ho(s){function l(g){return s.next(g)}var d=m(l),f=m(function(g){return s.throw(g)});function m(g){return function(C){var C=g(C),D=C.value;return C.done?D:D&&typeof D.then=="function"?D.then(d,f):h(D)?Promise.all(D).then(d,f):d(D)}}return m(l)()}function Gs(s,l,d){for(var f=h(s)?s.slice():[s],m=0;m<d;++m)f.push(l);return f}var gm={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(f){var d=s.table(f),f=d.schema,m={},g=[];function w(M,B,R){var U=Ei(M),P=m[U]=m[U]||[],K=M==null?0:typeof M=="string"?1:M.length,Y=0<B,U=r(r({},R),{name:Y?"".concat(U,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:Y,keyTail:B,keyLength:K,extractKey:Bo(M),unique:!Y&&R.unique});return P.push(U),U.isPrimaryKey||g.push(U),1<K&&w(K===2?M[0]:M.slice(0,K-1),B+1,R),P.sort(function(J,ne){return J.keyTail-ne.keyTail}),U}var C=w(f.primaryKey.keyPath,0,f.primaryKey);m[":id"]=[C];for(var D=0,q=f.indexes;D<q.length;D++){var F=q[D];w(F.keyPath,0,F)}function A(M){var B,R=M.query.index;return R.isVirtual?r(r({},M),{query:{index:R.lowLevelIndex,range:(B=M.query.range,R=R.keyTail,{type:B.type===1?2:B.type,lower:Gs(B.lower,B.lowerOpen?s.MAX_KEY:s.MIN_KEY,R),lowerOpen:!0,upper:Gs(B.upper,B.upperOpen?s.MIN_KEY:s.MAX_KEY,R),upperOpen:!0})}}):M}return r(r({},d),{schema:r(r({},f),{primaryKey:C,indexes:g,getIndexByKeyPath:function(M){return(M=m[Ei(M)])&&M[0]}}),count:function(M){return d.count(A(M))},query:function(M){return d.query(A(M))},openCursor:function(M){var B=M.query.index,R=B.keyTail,P=B.keyLength;return B.isVirtual?d.openCursor(A(M)).then(function(Y){return Y&&K(Y)}):d.openCursor(M);function K(Y){return Object.create(Y,{continue:{value:function(U){U!=null?Y.continue(Gs(U,M.reverse?s.MAX_KEY:s.MIN_KEY,R)):M.unique?Y.continue(Y.key.slice(0,P).concat(M.reverse?s.MIN_KEY:s.MAX_KEY,R)):Y.continue()}},continuePrimaryKey:{value:function(U,J){Y.continuePrimaryKey(Gs(U,s.MAX_KEY,R),J)}},primaryKey:{get:function(){return Y.primaryKey}},key:{get:function(){var U=Y.key;return P===1?U[0]:U.slice(0,P)}},value:{get:function(){return Y.value}}})}}})}})}};function Yo(s,l,d,f){return d=d||{},f=f||"",u(s).forEach(function(m){var g,w,C;S(l,m)?(g=s[m],w=l[m],typeof g=="object"&&typeof w=="object"&&g&&w?(C=xe(g))!==xe(w)?d[f+m]=l[m]:C==="Object"?Yo(g,w,d,f+m+"."):g!==w&&(d[f+m]=l[m]):g!==w&&(d[f+m]=l[m])):d[f+m]=void 0}),u(l).forEach(function(m){S(s,m)||(d[f+m]=l[m])}),d}function Qo(s,l){return l.type==="delete"?l.keys:l.keys||l.values.map(s.extractKey)}var ym={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(l){var d=s.table(l),f=d.schema.primaryKey;return r(r({},d),{mutate:function(m){var g=be.trans,w=g.table(l).hook,C=w.deleting,D=w.creating,q=w.updating;switch(m.type){case"add":if(D.fire===Te)break;return g._promise("readwrite",function(){return F(m)},!0);case"put":if(D.fire===Te&&q.fire===Te)break;return g._promise("readwrite",function(){return F(m)},!0);case"delete":if(C.fire===Te)break;return g._promise("readwrite",function(){return F(m)},!0);case"deleteRange":if(C.fire===Te)break;return g._promise("readwrite",function(){return function A(M,B,R){return d.query({trans:M,values:!1,query:{index:f,range:B},limit:R}).then(function(P){var K=P.result;return F({type:"delete",keys:K,trans:M}).then(function(Y){return 0<Y.numFailures?Promise.reject(Y.failures[0]):K.length<R?{failures:[],numFailures:0,lastResult:void 0}:A(M,r(r({},B),{lower:K[K.length-1],lowerOpen:!0}),R)})})}(m.trans,m.range,1e4)},!0)}return d.mutate(m);function F(A){var M,B,R,P=be.trans,K=A.keys||Qo(f,A);if(K)return(A=A.type==="add"||A.type==="put"?r(r({},A),{keys:K}):r({},A)).type!=="delete"&&(A.values=a([],A.values)),A.keys&&(A.keys=a([],A.keys)),M=d,R=K,((B=A).type==="add"?Promise.resolve([]):M.getMany({trans:B.trans,keys:R,cache:"immutable"})).then(function(Y){var U=K.map(function(J,ne){var ce,ue,re,pe=Y[ne],fe={onerror:null,onsuccess:null};return A.type==="delete"?C.fire.call(fe,J,pe,P):A.type==="add"||pe===void 0?(ce=D.fire.call(fe,J,A.values[ne],P),J==null&&ce!=null&&(A.keys[ne]=J=ce,f.outbound||N(A.values[ne],f.keyPath,J))):(ce=Yo(pe,A.values[ne]),(ue=q.fire.call(fe,ce,J,pe,P))&&(re=A.values[ne],Object.keys(ue).forEach(function(ae){S(re,ae)?re[ae]=ue[ae]:N(re,ae,ue[ae])}))),fe});return d.mutate(A).then(function(J){for(var ne=J.failures,ce=J.results,ue=J.numFailures,J=J.lastResult,re=0;re<K.length;++re){var pe=(ce||K)[re],fe=U[re];pe==null?fe.onerror&&fe.onerror(ne[re]):fe.onsuccess&&fe.onsuccess(A.type==="put"&&Y[re]?A.values[re]:pe)}return{failures:ne,results:ce,numFailures:ue,lastResult:J}}).catch(function(J){return U.forEach(function(ne){return ne.onerror&&ne.onerror(J)}),Promise.reject(J)})});throw new Error("Keys missing")}}})}})}};function qu(s,l,d){try{if(!l||l.keys.length<s.length)return null;for(var f=[],m=0,g=0;m<l.keys.length&&g<s.length;++m)_e(l.keys[m],s[g])===0&&(f.push(d?te(l.values[m]):l.values[m]),++g);return f.length===s.length?f:null}catch{return null}}var vm={stack:"dbcore",level:-1,create:function(s){return{table:function(l){var d=s.table(l);return r(r({},d),{getMany:function(f){var m;return f.cache?(m=qu(f.keys,f.trans._cache,f.cache==="clone"))?de.resolve(m):d.getMany(f).then(function(g){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?te(g):g},g}):d.getMany(f)},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),d.mutate(f)}})}}}};function Ku(s,l){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Hu(s,l){switch(s){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var xm={stack:"dbcore",level:0,name:"Observability",create:function(s){var l=s.schema.name,d=new wt(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(f,m,g){if(be.subscr&&m!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return s.transaction(f,m,g)},table:function(f){function m(K){var P,K=K.query;return[P=K.index,new wt((P=(K=K.range).lower)!=null?P:s.MIN_KEY,(P=K.upper)!=null?P:s.MAX_KEY)]}var g=s.table(f),w=g.schema,C=w.primaryKey,D=w.indexes,q=C.extractKey,F=C.outbound,A=C.autoIncrement&&D.filter(function(R){return R.compound&&R.keyPath.includes(C.keyPath)}),M=r(r({},g),{mutate:function(R){function P(ye){return ye="idb://".concat(l,"/").concat(f,"/").concat(ye),ne[ye]||(ne[ye]=new wt)}var K,Y,U,J=R.trans,ne=R.mutatedParts||(R.mutatedParts={}),ce=P(""),ue=P(":dels"),re=R.type,fe=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[Qo(C,R).filter(function(ye){return ye}),R.values]:[],pe=fe[0],fe=fe[1],ae=R.trans._cache;return h(pe)?(ce.addKeys(pe),(re=re==="delete"||pe.length===fe.length?qu(pe,ae):null)||ue.addKeys(pe),(re||fe)&&(K=P,Y=re,U=fe,w.indexes.forEach(function(ye){var Fe=K(ye.name||"");function Be(Ee){return Ee!=null?ye.extractKey(Ee):null}function Ce(Ee){ye.multiEntry&&h(Ee)?Ee.forEach(function(He){return Fe.addKey(He)}):Fe.addKey(Ee)}(Y||U).forEach(function(Ee,et){var Yt=Y&&Be(Y[et]),et=U&&Be(U[et]);_e(Yt,et)!==0&&(Yt!=null&&Ce(Yt),et!=null)&&Ce(et)})}))):pe?(fe={from:(ae=pe.lower)!=null?ae:s.MIN_KEY,to:(re=pe.upper)!=null?re:s.MAX_KEY},ue.add(fe),ce.add(fe)):(ce.add(d),ue.add(d),w.indexes.forEach(function(ye){return P(ye.name).add(d)})),g.mutate(R).then(function(ye){return!pe||R.type!=="add"&&R.type!=="put"||(ce.addKeys(ye.results),A&&A.forEach(function(Fe){for(var Be=R.values.map(function(Yt){return Fe.extractKey(Yt)}),Ce=Fe.keyPath.findIndex(function(Yt){return Yt===C.keyPath}),Ee=0,He=ye.results.length;Ee<He;++Ee)Be[Ee][Ce]=ye.results[Ee];P(Fe.name).addKeys(Be)})),J.mutatedParts=$s(J.mutatedParts||{},ne),ye})}}),B={get:function(R){return[C,new wt(R.key)]},getMany:function(R){return[C,new wt().addKeys(R.keys)]},count:m,query:m,openCursor:m};return u(B).forEach(function(R){M[R]=function(P){var K=be.subscr,Y=!!K,U=Ku(be,g)&&Hu(R,P)?P.obsSet={}:K;if(Y){var J,K=function(fe){return fe="idb://".concat(l,"/").concat(f,"/").concat(fe),U[fe]||(U[fe]=new wt)},ne=K(""),ce=K(":dels"),Y=B[R](P),ue=Y[0],Y=Y[1];if((R==="query"&&ue.isPrimaryKey&&!P.values?ce:K(ue.name||"")).add(Y),!ue.isPrimaryKey){if(R!=="count")return J=R==="query"&&F&&P.values&&g.query(r(r({},P),{values:!1})),g[R].apply(this,arguments).then(function(fe){if(R==="query"){if(F&&P.values)return J.then(function(Be){return Be=Be.result,ne.addKeys(Be),fe});var ae=P.values?fe.result.map(q):fe.result;(P.values?ne:ce).addKeys(ae)}else{var ye,Fe;if(R==="openCursor")return Fe=P.values,(ye=fe)&&Object.create(ye,{key:{get:function(){return ce.addKey(ye.primaryKey),ye.key}},primaryKey:{get:function(){var Be=ye.primaryKey;return ce.addKey(Be),Be}},value:{get:function(){return Fe&&ne.addKey(ye.primaryKey),ye.value}}})}return fe});ce.add(d)}}return g[R].apply(this,arguments)}}),M}})}};function Yu(s,l,d){var f;return d.numFailures===0?l:l.type==="deleteRange"||(f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1,d.numFailures===f)?null:(f=r({},l),h(f.keys)&&(f.keys=f.keys.filter(function(m,g){return!(g in d.failures)})),"values"in f&&h(f.values)&&(f.values=f.values.filter(function(m,g){return!(g in d.failures)})),f)}function Xo(s,l){return d=s,((f=l).lower===void 0||(f.lowerOpen?0<_e(d,f.lower):0<=_e(d,f.lower)))&&(d=s,(f=l).upper===void 0||(f.upperOpen?_e(d,f.upper)<0:_e(d,f.upper)<=0));var d,f}function Qu(s,l,d,f,m,g){var w,C,D,q,F,A;return!d||d.length===0||(w=l.query.index,C=w.multiEntry,D=l.query.range,q=f.schema.primaryKey.extractKey,F=w.extractKey,A=(w.lowLevelIndex||w).extractKey,(f=d.reduce(function(M,B){var R=M,P=[];if(B.type==="add"||B.type==="put")for(var K=new wt,Y=B.values.length-1;0<=Y;--Y){var U,J=B.values[Y],ne=q(J);!K.hasKey(ne)&&(U=F(J),C&&h(U)?U.some(function(fe){return Xo(fe,D)}):Xo(U,D))&&(K.addKey(ne),P.push(J))}switch(B.type){case"add":var ce=new wt().addKeys(l.values?M.map(function(ae){return q(ae)}):M),R=M.concat(l.values?P.filter(function(ae){return ae=q(ae),!ce.hasKey(ae)&&(ce.addKey(ae),!0)}):P.map(function(ae){return q(ae)}).filter(function(ae){return!ce.hasKey(ae)&&(ce.addKey(ae),!0)}));break;case"put":var ue=new wt().addKeys(B.values.map(function(ae){return q(ae)}));R=M.filter(function(ae){return!ue.hasKey(l.values?q(ae):ae)}).concat(l.values?P:P.map(function(ae){return q(ae)}));break;case"delete":var re=new wt().addKeys(B.keys);R=M.filter(function(ae){return!re.hasKey(l.values?q(ae):ae)});break;case"deleteRange":var pe=B.range;R=M.filter(function(ae){return!Xo(q(ae),pe)})}return R},s))===s)?s:(f.sort(function(M,B){return _e(A(M),A(B))||_e(q(M),q(B))}),l.limit&&l.limit<1/0&&(f.length>l.limit?f.length=l.limit:s.length===l.limit&&f.length<l.limit&&(m.dirty=!0)),g?Object.freeze(f):f)}function Xu(s,l){return _e(s.lower,l.lower)===0&&_e(s.upper,l.upper)===0&&!!s.lowerOpen==!!l.lowerOpen&&!!s.upperOpen==!!l.upperOpen}function wm(s,l){return((d,f,m,g)=>{if(d===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((d=_e(d,f))===0){if(m&&g)return 0;if(m)return 1;if(g)return-1}return d})(s.lower,l.lower,s.lowerOpen,l.lowerOpen)<=0&&0<=((d,f,m,g)=>{if(d===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((d=_e(d,f))===0){if(m&&g)return 0;if(m)return-1;if(g)return 1}return d})(s.upper,l.upper,s.upperOpen,l.upperOpen)}function bm(s,l,d,f){s.subscribers.add(d),f.addEventListener("abort",function(){var m,g;s.subscribers.delete(d),s.subscribers.size===0&&(m=s,g=l,setTimeout(function(){m.subscribers.size===0&&Q(g,m)},3e3))})}var km={stack:"dbcore",level:0,name:"Cache",create:function(s){var l=s.schema.name;return r(r({},s),{transaction:function(d,f,m){var g,w,C=s.transaction(d,f,m);return f==="readwrite"&&(m=(g=new AbortController).signal,C.addEventListener("abort",(w=function(D){return function(){if(g.abort(),f==="readwrite"){for(var q=new Set,F=0,A=d;F<A.length;F++){var M=A[F],B=hr["idb://".concat(l,"/").concat(M)];if(B){var R=s.table(M),P=B.optimisticOps.filter(function(ye){return ye.trans===C});if(C._explicit&&D&&C.mutatedParts)for(var K=0,Y=Object.values(B.queries.query);K<Y.length;K++)for(var U=0,J=(ue=Y[K]).slice();U<J.length;U++)Wo((re=J[U]).obsSet,C.mutatedParts)&&(Q(ue,re),re.subscribers.forEach(function(ye){return q.add(ye)}));else if(0<P.length){B.optimisticOps=B.optimisticOps.filter(function(ye){return ye.trans!==C});for(var ne=0,ce=Object.values(B.queries.query);ne<ce.length;ne++)for(var ue,re,pe,fe=0,ae=(ue=ce[ne]).slice();fe<ae.length;fe++)(re=ae[fe]).res!=null&&C.mutatedParts&&(D&&!re.dirty?(pe=Object.isFrozen(re.res),pe=Qu(re.res,re.req,P,R,re,pe),re.dirty?(Q(ue,re),re.subscribers.forEach(function(ye){return q.add(ye)})):pe!==re.res&&(re.res=pe,re.promise=de.resolve({result:pe}))):(re.dirty&&Q(ue,re),re.subscribers.forEach(function(ye){return q.add(ye)})))}}}q.forEach(function(ye){return ye()})}}})(!1),{signal:m}),C.addEventListener("error",w(!1),{signal:m}),C.addEventListener("complete",w(!0),{signal:m})),C},table:function(d){var f=s.table(d),m=f.schema.primaryKey;return r(r({},f),{mutate:function(g){var w,C=be.trans;return!m.outbound&&C.db._options.cache!=="disabled"&&!C.explicit&&C.idbtrans.mode==="readwrite"&&(w=hr["idb://".concat(l,"/").concat(d)])?(C=f.mutate(g),g.type!=="add"&&g.type!=="put"||!(50<=g.values.length||Qo(m,g).some(function(D){return D==null}))?(w.optimisticOps.push(g),g.mutatedParts&&Vs(g.mutatedParts),C.then(function(D){0<D.numFailures&&(Q(w.optimisticOps,g),(D=Yu(0,g,D))&&w.optimisticOps.push(D),g.mutatedParts)&&Vs(g.mutatedParts)}),C.catch(function(){Q(w.optimisticOps,g),g.mutatedParts&&Vs(g.mutatedParts)})):C.then(function(D){var q=Yu(0,r(r({},g),{values:g.values.map(function(F,A){var M;return D.failures[A]?F:(N(M=(M=m.keyPath)!=null&&M.includes(".")?te(F):r({},F),m.keyPath,D.results[A]),M)})}),D);w.optimisticOps.push(q),queueMicrotask(function(){return g.mutatedParts&&Vs(g.mutatedParts)})}),C):f.mutate(g)},query:function(g){var w,C,D,q,F,A,M;return Ku(be,f)&&Hu("query",g)?(w=((D=be.trans)==null?void 0:D.db._options.cache)==="immutable",C=(D=be).requery,D=D.signal,A=((B,R,P,K)=>{var Y=hr["idb://".concat(B,"/").concat(R)];if(!Y)return[];if(!(B=Y.queries[P]))return[null,!1,Y,null];var U=B[(K.query?K.query.index.name:null)||""];if(!U)return[null,!1,Y,null];switch(P){case"query":var J=U.find(function(ne){return ne.req.limit===K.limit&&ne.req.values===K.values&&Xu(ne.req.query.range,K.query.range)});return J?[J,!0,Y,U]:[U.find(function(ne){return("limit"in ne.req?ne.req.limit:1/0)>=K.limit&&(!K.values||ne.req.values)&&wm(ne.req.query.range,K.query.range)}),!1,Y,U];case"count":return J=U.find(function(ne){return Xu(ne.req.query.range,K.query.range)}),[J,!!J,Y,U]}})(l,d,"query",g),M=A[0],q=A[2],F=A[3],M&&A[1]?M.obsSet=g.obsSet:(A=f.query(g).then(function(B){var R=B.result;if(M&&(M.res=R),w){for(var P=0,K=R.length;P<K;++P)Object.freeze(R[P]);Object.freeze(R)}else B.result=te(R);return B}).catch(function(B){return F&&M&&Q(F,M),Promise.reject(B)}),M={obsSet:g.obsSet,promise:A,subscribers:new Set,type:"query",req:g,dirty:!1},F?F.push(M):(F=[M],(q=q||(hr["idb://".concat(l,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[g.query.index.name||""]=F)),bm(M,F,C,D),M.promise.then(function(B){return{result:Qu(B.result,g,q==null?void 0:q.optimisticOps,f,M,w)}})):f.query(g)}})}})}};function Ws(s,l){return new Proxy(s,{get:function(d,f,m){return f==="db"?l:Reflect.get(d,f,m)}})}it.prototype.version=function(s){if(isNaN(s)||s<.1)throw new me.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var l=this._versions,d=l.filter(function(f){return f._cfg.version===s})[0];return d||(d=new this.Version(s),l.push(d),l.sort(dm),d.stores({}),this._state.autoSchema=!1),d},it.prototype._whenReady=function(s){var l=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?s():new de(function(d,f){if(l._state.openComplete)return f(new me.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new me.DatabaseClosed);l.open().catch(Te)}l._state.dbReadyPromise.then(d,f)}).then(s)},it.prototype.use=function(m){var l=m.stack,d=m.create,f=m.level,m=m.name,g=(m&&this.unuse({stack:l,name:m}),this._middlewares[l]||(this._middlewares[l]=[]));return g.push({stack:l,create:d,level:f??10,name:m}),g.sort(function(w,C){return w.level-C.level}),this},it.prototype.unuse=function(s){var l=s.stack,d=s.name,f=s.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(m){return f?m.create!==f:!!d&&m.name!==d})),this},it.prototype.open=function(){var s=this;return ur(Mn,function(){return mm(s)})},it.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,l=Br.indexOf(this);if(0<=l&&Br.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new de(function(d){s.dbReadyResolve=d}),s.openCanceller=new de(function(d,f){s.cancelOpen=f}))},it.prototype.close=function(l){var l=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,d=this._state;l?(d.isBeingOpened&&d.cancelOpen(new me.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new me.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},it.prototype.delete=function(s){var l=this,d=(s===void 0&&(s={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),f=this._state;return new de(function(m,g){function w(){l.close(s);var C=l._deps.indexedDB.deleteDatabase(l.name);C.onsuccess=qe(function(){var D,q,F;D=l._deps,q=l.name,$o(F=D.indexedDB)||q===As||Lo(F,D.IDBKeyRange).delete(q).catch(Te),m()}),C.onerror=mn(g),C.onblocked=l._fireOnBlocked}if(d)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(w):w()})},it.prototype.backendDB=function(){return this.idbdb},it.prototype.isOpen=function(){return this.idbdb!==null},it.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},it.prototype.hasFailed=function(){return this._state.dbOpenError!==null},it.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(it.prototype,"tables",{get:function(){var s=this;return u(this._allTables).map(function(l){return s._allTables[l]})},enumerable:!1,configurable:!0}),it.prototype.transaction=function(){var s=(function(l,d,f){var m=arguments.length;if(m<2)throw new me.InvalidArgument("Too few arguments");for(var g=new Array(m-1);--m;)g[m-1]=arguments[m];return f=g.pop(),[l,O(g),f]}).apply(this,arguments);return this._transaction.apply(this,s)},it.prototype._transaction=function(s,l,d){var f,m,g=this,w=be.trans,C=(w&&w.db===this&&s.indexOf("!")===-1||(w=null),s.indexOf("?")!==-1);s=s.replace("!","").replace("?","");try{if(m=l.map(function(q){if(q=q instanceof g.Table?q.name:q,typeof q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return q}),s=="r"||s===Ao)f=Ao;else{if(s!="rw"&&s!=Po)throw new me.InvalidArgument("Invalid transaction mode: "+s);f=Po}if(w){if(w.mode===Ao&&f===Po){if(!C)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");w=null}w&&m.forEach(function(q){if(w&&w.storeNames.indexOf(q)===-1){if(!C)throw new me.SubTransaction("Table "+q+" not included in parent transaction.");w=null}}),C&&w&&!w.active&&(w=null)}}catch(q){return w?w._promise(null,function(F,A){A(q)}):rt(q)}var D=(function q(F,A,M,B,R){return de.resolve().then(function(){var U=be.transless||be,P=F._createTransaction(A,M,F._dbSchema,B),U=(P.explicit=!0,{trans:P,transless:U});if(B)P.idbtrans=B.idbtrans;else try{P.create(),P.idbtrans._explicit=!0,F._state.PR1398_maxLoop=3}catch(J){return J.name===$t.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return q(F,A,M,null,R)})):rt(J)}var K,Y=he(R),U=(Y&&Mr(),de.follow(function(){var J;(K=R.call(P,P))&&(Y?(J=In.bind(null,null),K.then(J,J)):typeof K.next=="function"&&typeof K.throw=="function"&&(K=Ho(K)))},U));return(K&&typeof K.then=="function"?de.resolve(K).then(function(J){return P.active?J:rt(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):U.then(function(){return K})).then(function(J){return B&&P._resolve(),P._completion.then(function(){return J})}).catch(function(J){return P._reject(J),rt(J)})})}).bind(null,this,f,m,w,d);return w?w._promise(f,D,"lock"):be.trans?ur(be.transless,function(){return g._whenReady(D)}):this._whenReady(D)},it.prototype.table=function(s){if(S(this._allTables,s))return this._allTables[s];throw new me.InvalidTable("Table ".concat(s," does not exist"))};var Cn=it;function it(s,l){var d,f,m,g,w,C=this,D=(this._middlewares={},this.verno=0,it.dependencies),D=(this._options=l=r({addons:it.addons,autoOpen:!0,indexedDB:D.indexedDB,IDBKeyRange:D.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},l.addons),q=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Te,dbReadyPromise:null,cancelOpen:Te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen}),F=(q.dbReadyPromise=new de(function(A){q.dbReadyResolve=A}),q.openCanceller=new de(function(A,M){q.cancelOpen=M}),this._state=q,this.name=s,this.on=ki(this,"populate","blocked","versionchange","close",{ready:[Pe,Te]}),this.once=function(A,M){var B=function(){for(var R=[],P=0;P<arguments.length;P++)R[P]=arguments[P];C.on(A).unsubscribe(B),M.apply(C,R)};return C.on(A,B)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(A){return function(M,B){it.vip(function(){var R,P=C._state;P.openComplete?(P.dbOpenError||de.resolve().then(M),B&&A(M)):P.onReadyBeingFired?(P.onReadyBeingFired.push(M),B&&A(M)):(A(M),R=C,B||A(function K(){R.on.ready.unsubscribe(M),R.on.ready.unsubscribe(K)}))})}}),this.Collection=(d=this,Ci(im.prototype,function(K,P){this.db=d;var B=Tu,R=null;if(P)try{B=P()}catch(U){R=U}var P=K._ctx,K=P.table,Y=K.hook.reading.fire;this._ctx={table:K,index:P.index,isPrimKey:!P.index||K.schema.primKey.keyPath&&P.index===K.schema.primKey.name,range:B,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:R,or:P.or,valueMapper:Y!==xt?Y:null}})),this.Table=(f=this,Ci(Du.prototype,function(A,M,B){this.db=f,this._tx=B,this.name=A,this.schema=M,this.hook=f._allTables[A]?f._allTables[A].hook:ki(null,{creating:[Rt,Te],reading:[nt,xt],updating:[Se,Te],deleting:[ie,Te]})})),this.Transaction=(m=this,Ci(om.prototype,function(A,M,B,R,P){var K=this;A!=="readonly"&&M.forEach(function(Y){Y=(Y=B[Y])==null?void 0:Y.yProps,Y&&(M=M.concat(Y.map(function(U){return U.updatesTable})))}),this.db=m,this.mode=A,this.storeNames=M,this.schema=B,this.chromeTransactionDurability=R,this.idbtrans=null,this.on=ki(this,"complete","error","abort"),this.parent=P||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new de(function(Y,U){K._resolve=Y,K._reject=U}),this._completion.then(function(){K.active=!1,K.on.complete.fire()},function(Y){var U=K.active;return K.active=!1,K.on.error.fire(Y),K.parent?K.parent._reject(Y):U&&K.idbtrans&&K.idbtrans.abort(),rt(Y)})})),this.Version=(g=this,Ci(pm.prototype,function(A){this.db=g,this._cfg={version:A,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(w=this,Ci(Iu.prototype,function(A,M,B){if(this.db=w,this._ctx={table:A,index:M===":id"?null:M,or:B},this._cmp=this._ascending=_e,this._descending=function(R,P){return _e(P,R)},this._max=function(R,P){return 0<_e(R,P)?R:P},this._min=function(R,P){return _e(R,P)<0?R:P},this._IDBKeyRange=w._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(A){0<A.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(A){!A.newVersion||A.newVersion<A.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(A.oldVersion/10))}),this._maxKey=Ti(l.IDBKeyRange),this._createTransaction=function(A,M,B,R){return new C.Transaction(A,M,B,C._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(A){C.on("blocked").fire(A),Br.filter(function(M){return M.name===C.name&&M!==C&&!M._state.vcFired}).map(function(M){return M.on("versionchange").fire(A)})},this.use(vm),this.use(km),this.use(xm),this.use(gm),this.use(ym),new Proxy(this,{get:function(A,M,B){var R;return M==="_vip"||(M==="table"?function(P){return Ws(C.table(P),F)}:(R=Reflect.get(A,M,B))instanceof Du?Ws(R,F):M==="tables"?R.map(function(P){return Ws(P,F)}):M==="_createTransaction"?function(){return Ws(R.apply(this,arguments),F)}:R)}}));this.vip=F,D.forEach(function(A){return A(C)})}var Us,Lr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Cm=(Zo.prototype.subscribe=function(s,l,d){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:l,complete:d})},Zo.prototype[Lr]=function(){return this},Zo);function Zo(s){this._subscribe=s}try{Us={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Us={indexedDB:null,IDBKeyRange:null}}function Zu(s){var l,d=!1,f=new Cm(function(m){var g=he(s),w,C=!1,D={},q={},F={get closed(){return C},unsubscribe:function(){C||(C=!0,w&&w.abort(),A&&Ln.storagemutated.unsubscribe(B))}},A=(m.start&&m.start(F),!1),M=function(){return No(R)},B=function(P){$s(D,P),Wo(q,D)&&M()},R=function(){var P,K,Y;!C&&Us.indexedDB&&(D={},P={},w&&w.abort(),w=new AbortController,Y=(U=>{var J=Fr();try{g&&Mr();var ne=Bn(s,U);return ne=g?ne.finally(In):ne}finally{J&&Rr()}})(K={subscr:P,signal:w.signal,requery:M,querier:s,trans:null}),Promise.resolve(Y).then(function(U){d=!0,l=U,C||K.signal.aborted||(D={},(J=>{for(var ne in J)if(S(J,ne))return;return 1})(q=P)||A||(Ln(ji,B),A=!0),No(function(){return!C&&m.next&&m.next(U)}))},function(U){d=!1,["DatabaseClosedError","AbortError"].includes(U==null?void 0:U.name)||C||No(function(){C||m.error&&m.error(U)})}))};return setTimeout(M,0),F});return f.hasValue=function(){return d},f.getValue=function(){return l},f}var pr=Cn;function Jo(s){var l=$n;try{$n=!0,Ln.storagemutated.fire(s),Ko(s,!0)}finally{$n=l}}E(pr,r(r({},ke),{delete:function(s){return new pr(s,{addons:[]}).delete()},exists:function(s){return new pr(s,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return l=pr.dependencies,d=l.indexedDB,l=l.IDBKeyRange,($o(d)?Promise.resolve(d.databases()).then(function(f){return f.map(function(m){return m.name}).filter(function(m){return m!==As})}):Lo(d,l).toCollection().primaryKeys()).then(s)}catch{return rt(new me.MissingAPI)}var l,d},defineClass:function(){return function(s){p(this,s)}},ignoreTransaction:function(s){return be.trans?ur(be.transless,s):s()},vip:Vo,async:function(s){return function(){try{var l=Ho(s.apply(this,arguments));return l&&typeof l.then=="function"?l:de.resolve(l)}catch(d){return rt(d)}}},spawn:function(s,l,d){try{var f=Ho(s.apply(d,l||[]));return f&&typeof f.then=="function"?f:de.resolve(f)}catch(m){return rt(m)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(s,l){return s=de.resolve(typeof s=="function"?pr.ignoreTransaction(s):s).timeout(l||6e4),be.trans?be.trans.waitFor(s):s},Promise:de,debug:{get:function(){return ge},set:function(s){De(s)}},derive:I,extend:p,props:E,override:b,Events:ki,on:Ln,liveQuery:Zu,extendObservabilitySet:$s,getByKeyPath:z,setByKeyPath:N,delByKeyPath:function(s,l){typeof l=="string"?N(s,l,void 0):"length"in l&&[].map.call(l,function(d){N(s,d,void 0)})},shallowClone:L,deepClone:te,getObjectDiff:Yo,cmp:_e,asap:G,minKey:-1/0,addons:[],connections:Br,errnames:$t,dependencies:Us,cache:hr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,l,d){return s+l/Math.pow(10,2*d)})})),pr.maxKey=Ti(pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ln(ji,function(s){$n||(s=new CustomEvent(Fo,{detail:s}),$n=!0,dispatchEvent(s),$n=!1)}),addEventListener(Fo,function(s){s=s.detail,$n||Jo(s)}));var $r,$n=!1,Ju=function(){};return typeof BroadcastChannel<"u"&&((Ju=function(){($r=new BroadcastChannel(Fo)).onmessage=function(s){return s.data&&Jo(s.data)}})(),typeof $r.unref=="function"&&$r.unref(),Ln(ji,function(s){$n||$r.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Cn.disableBfCache&&s.persisted){ge&&console.debug("Dexie: handling persisted pagehide"),$r!=null&&$r.close();for(var l=0,d=Br;l<d.length;l++)d[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Cn.disableBfCache&&s.persisted&&(ge&&console.debug("Dexie: handling persisted pageshow"),Ju(),Jo({all:new wt(-1/0,[[]])}))})),de.rejectionMapper=function(s,l){return!s||s instanceof Ae||s instanceof TypeError||s instanceof SyntaxError||!s.name||!ot[s.name]?s:(l=new ot[s.name](l||s.message,s),"stack"in s&&$(l,"stack",{get:function(){return this.inner.stack}}),l)},De(ge),r(Cn,Object.freeze({__proto__:null,Dexie:Cn,Entity:Eu,PropModification:bi,RangeSet:wt,add:function(s){return new bi({add:s})},cmp:_e,default:Cn,liveQuery:Zu,mergeRanges:Ai,rangesOverlap:Vu,remove:function(s){return new bi({remove:s})},replacePrefix:function(s,l){return new bi({replacePrefix:[s,l]})}}),{default:Cn}),Cn})})(Qp);var qy=Qp.exports;const Cc=Tm(qy),xf=Symbol.for("Dexie"),no=globalThis[xf]||(globalThis[xf]=Cc);if(Cc.semVer!==no.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Cc.semVer} and ${no.semVer}`);const{liveQuery:Cv,mergeRanges:Sv,rangesOverlap:jv,RangeSet:Tv,cmp:Ev,Entity:Nv,PropModification:Av,replacePrefix:Pv,add:_v,remove:Dv,DexieYProvider:Fv}=no,Sc="sparkle-brush-current-profile";class Ky extends no{constructor(){super("SparkleBrushDB");Nt(this,"sessions");Nt(this,"userProgress");Nt(this,"photos");Nt(this,"profiles");this.version(2).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"}),this.version(3).stores({sessions:"id, date, profileId",userProgress:"id, profileId",photos:"id, sessionId, createdAt",profiles:"id, name, createdAt"}).upgrade(n=>n.table("userProgress").toCollection().modify(r=>{const a=r;a.unlockedHats&&!r.unlockedBuddies&&(r.unlockedBuddies=a.unlockedHats,delete a.unlockedHats),a.selectedHatId!==void 0&&r.selectedBuddyId===void 0&&(r.selectedBuddyId=a.selectedHatId,delete a.selectedHatId),r.unlockedBuddies||(r.unlockedBuddies=[])}))}}const en=new Ky,El=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];let _a=null;function Dr(){if(_a)return _a;const e=localStorage.getItem(Sc);return _a=e,e}function xu(e){_a=e,e?localStorage.setItem(Sc,e):localStorage.removeItem(Sc)}async function wu(){return en.profiles.orderBy("createdAt").toArray()}async function Hy(e){return en.profiles.get(e)}async function Xp(e){const t=await wu(),n=new Set(t.map(u=>u.avatarColor)),r=El.find(u=>!n.has(u))||El[Math.floor(Math.random()*El.length)],a={id:`profile-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),avatarColor:r,createdAt:new Date};await en.profiles.add(a);const o={id:`progress-${a.id}`,profileId:a.id,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedBuddies:[]};return await en.userProgress.add(o),a}async function Yy(e){await en.profiles.delete(e),await en.userProgress.where("profileId").equals(e).delete(),await en.sessions.where("profileId").equals(e).delete(),Dr()===e&&xu(null)}async function xi(e){const t=e||Dr();if(!t)throw new Error("No profile selected");let n=await en.userProgress.where("profileId").equals(t).first();if(!n)n={id:`progress-${t}`,profileId:t,totalSessions:0,currentStreak:0,longestStreak:0,capturedCreatures:[],unlockedBuddies:[]},await en.userProgress.add(n);else{const r=n;r.unlockedHats&&!n.unlockedBuddies&&(n.unlockedBuddies=r.unlockedHats),r.selectedHatId!==void 0&&n.selectedBuddyId===void 0&&(n.selectedBuddyId=r.selectedHatId),n.unlockedBuddies||(n.unlockedBuddies=[])}return n}async function bo(e,t){const n=t||Dr();if(!n)throw new Error("No profile selected");const r=await xi(n);await en.userProgress.update(r.id,e)}async function Qy(e){const t=Dr();if(!t)throw new Error("No profile selected");const n={...e,profileId:t};await en.sessions.add(n);const r=await xi(t),a=new Date;a.setHours(0,0,0,0);let o=r.currentStreak;if(r.lastSessionDate){const u=new Date(r.lastSessionDate);u.setHours(0,0,0,0);const h=Math.floor((a.getTime()-u.getTime())/(1e3*60*60*24));h===1?o+=1:h>1&&(o=1)}else o=1;await bo({totalSessions:r.totalSessions+1,currentStreak:o,longestStreak:Math.max(r.longestStreak,o),lastSessionDate:new Date},t)}async function Xy(e){const t=Dr();if(!t)throw new Error("No profile selected");const n=await xi(t);n.capturedCreatures.some(a=>a.id===e.id)||await bo({capturedCreatures:[...n.capturedCreatures,e]},t)}async function Zy(e){const t=Dr();if(!t)throw new Error("No profile selected");const n=await xi(t);n.unlockedBuddies.some(a=>a.id===e.id)||await bo({unlockedBuddies:[...n.unlockedBuddies,e]},t)}async function Jy(){if((await wu()).length>0)return;const t=await en.userProgress.get("default-user");if(t&&(t.totalSessions>0||t.capturedCreatures.length>0)){const n=await Xp("Player 1");await bo({totalSessions:t.totalSessions,currentStreak:t.currentStreak,longestStreak:t.longestStreak,lastSessionDate:t.lastSessionDate,capturedCreatures:t.capturedCreatures,unlockedBuddies:t.unlockedBuddies,selectedBuddyId:t.selectedBuddyId},n.id),xu(n.id)}}const ev={red:{gradient:"from-red-500 to-red-700",border:"border-white",stripe:"bg-white",center:"bg-red-500",centerBorder:"border-white"},blue:{gradient:"from-blue-500 to-blue-700",border:"border-red-500",stripe:"bg-red-500",center:"bg-blue-500",centerBorder:"border-red-400"},bee:{gradient:"from-yellow-400 to-yellow-500",border:"border-black",stripe:"bg-black",center:"bg-yellow-400",centerBorder:"border-black"},white:{gradient:"from-white to-gray-200",border:"border-red-500",stripe:"bg-red-500",center:"bg-white",centerBorder:"border-red-400"},master:{gradient:"from-purple-500 via-purple-600 to-purple-800",border:"border-yellow-400",stripe:"bg-yellow-400",center:"bg-purple-400",centerBorder:"border-yellow-300",glow:"shadow-[0_0_20px_rgba(168,85,247,0.7)]"}};function Nl({type:e,size:t,showSparkle:n=!1,className:r=""}){const a=ev[e],o={small:"w-12 h-12",medium:"w-16 h-16",large:"w-20 h-20"},u={small:"w-2 h-2",medium:"w-3 h-3",large:"w-4 h-4"},h={small:"h-0.5",medium:"h-1",large:"h-1"},p=e==="bee";return c.jsxs("div",{className:`relative ${r}`,children:[c.jsxs("div",{className:`
        ${o[t]} rounded-full bg-gradient-to-br ${a.gradient}
        border-4 ${a.border} shadow-xl
        flex items-center justify-center
        ${a.glow||""}
      `,children:[p?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`w-full ${h[t]} bg-black absolute`,style:{top:"30%"}}),c.jsx("div",{className:`w-full ${h[t]} bg-black absolute`,style:{top:"50%"}}),c.jsx("div",{className:`w-full ${h[t]} bg-black absolute`,style:{top:"70%"}})]}):c.jsx("div",{className:`w-full ${h[t]} ${a.stripe} absolute`}),c.jsx("div",{className:`${u[t]} rounded-full ${a.center} border-2 ${a.centerBorder} absolute`})]}),n&&c.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-sparkle",children:""}),e==="master"&&c.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-yellow-400/20"})]})}function tv({cleaningPercentage:e,userProgress:t,region:n,preSelectedCreature:r,onComplete:a}){const[o,u]=k.useState("intro"),[h,p]=k.useState(r||null),[y,j]=k.useState(0),[S,E]=k.useState("red"),[W,$]=k.useState(!1),[I,V]=k.useState({x:50,y:85,scale:1,rotation:0}),[x,v]=k.useState({count:0,maxWobbles:3,currentWobble:0,direction:1}),[b,_]=k.useState(!1),[G,z]=k.useState(!1),[N,L]=k.useState(0),H=k.useRef(null),O=k.useRef(y),T=k.useRef(h);O.current=y,T.current=h,k.useEffect(()=>{if(!r){const le=t.capturedCreatures.map(ee=>ee.id),Q=Op(e,le,n);p(Q)}return()=>{H.current&&cancelAnimationFrame(H.current)}},[e,t.capturedCreatures,n,r]),k.useEffect(()=>{if(h){const le=hy(e,h.rarity);j(le),E(py(e));const Q=h.rarity==="mythic"?6+Math.floor(Math.random()*2):h.rarity==="legendary"?4+Math.floor(Math.random()*2):h.rarity==="rare"?3+Math.floor(Math.random()*2):2+Math.floor(Math.random()*2);v(Z=>({...Z,maxWobbles:Q}));const ee=setTimeout(()=>u("ready"),2e3);return()=>clearTimeout(ee)}},[h,e]);const X=k.useCallback(()=>{let le=0;const Q=40,ee=()=>{le++;const Z=le/Q,he=1-Math.pow(1-Z,3),ke=Math.sin(Z*Math.PI)*30;V({x:50,y:85-he*55-ke,scale:1-Z*.3,rotation:Z*720}),le<Q?H.current=requestAnimationFrame(ee):(u("impact"),z(!0),((h==null?void 0:h.rarity)==="legendary"||(h==null?void 0:h.rarity)==="mythic")&&_(!0),Tn("capture"),setTimeout(()=>{z(!1),_(!1),te()},300))};H.current=requestAnimationFrame(ee)},[h]),te=k.useCallback(()=>{u("wobble");let le=0;const Q=x.maxWobbles,ee=()=>{le++,v(Le=>({...Le,currentWobble:le})),Tn("wobble");let Z=0;const he=30,ke=()=>{Z++;const Le=Z/he,Ae=Math.sin(Le*Math.PI*4)*(1-Le)*15;if(V(Ue=>({...Ue,x:50+Ae,rotation:Ae*2})),Z<he)H.current=requestAnimationFrame(ke);else{V(Ie=>({...Ie,x:50,rotation:0}));const Ue=400+Math.random()*400;le<Q?setTimeout(ee,Ue):setTimeout(()=>{u("suspense"),oe()},Ue)}};H.current=requestAnimationFrame(ke)};setTimeout(ee,500)},[x.maxWobbles]),oe=k.useCallback(()=>{let le=0;const Q=()=>{le+=.02,L(Math.min(le,.5)),le<.5&&(H.current=requestAnimationFrame(Q))};H.current=requestAnimationFrame(Q);const ee=T.current,Z=O.current,he=(ee==null?void 0:ee.rarity)==="mythic"?3500:(ee==null?void 0:ee.rarity)==="legendary"?2500:(ee==null?void 0:ee.rarity)==="rare"?1800:1200;console.log("[CaptureGame] Starting suspense with capture rate:",Z),setTimeout(()=>{const ke=Math.random(),Le=ke<Z;if(console.log("[CaptureGame] Capture roll:",ke,"rate:",Z,"success:",Le),$(Le),L(0),u("result"),Le){if(Tn("click"),setTimeout(()=>Tn("success"),250),ee){const Ae={...ee,capturedAt:new Date};Xy(Ae)}}else Tn("fail")},he)},[]),xe=k.useCallback(()=>{o!=="ready"||!h||(u("throwing"),X())},[o,h,X]),we=k.useCallback(()=>{a(W?h:null)},[W,h,a]);return h?c.jsxs("div",{className:`relative flex flex-col h-full overflow-hidden ${b?"animate-shake":""}`,children:[c.jsx("div",{className:"absolute inset-0",children:c.jsx(Pa,{region:n})}),G&&c.jsx("div",{className:"absolute inset-0 bg-white z-50 animate-flash"}),N>0&&c.jsx("div",{className:"absolute inset-0 bg-black z-20 pointer-events-none transition-opacity",style:{opacity:N}}),c.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-center p-6 z-10",children:[o==="intro"&&c.jsxs("div",{className:"text-center animate-bounce-gentle",children:[c.jsx("div",{className:"text-xl text-white mb-2 drop-shadow-lg",children:"A wild creature appeared!"}),c.jsxs("div",{className:"relative inline-block",children:[c.jsx(un,{creature:h,size:150,animated:!0}),(h.rarity==="legendary"||h.rarity==="mythic")&&c.jsx("div",{className:"absolute inset-0 animate-pulse",children:c.jsx("div",{className:`absolute inset-0 ${h.rarity==="mythic"?"bg-orange-400/30":"bg-yellow-400/20"} rounded-full blur-xl`})})]}),c.jsx("div",{className:"text-2xl font-bold text-white mt-3 drop-shadow-lg",children:h.name}),c.jsx("div",{className:`text-lg mt-1 font-semibold ${h.rarity==="mythic"?"text-orange-400 animate-pulse":h.rarity==="legendary"?"text-yellow-400 animate-pulse":h.rarity==="rare"?"text-purple-400":"text-gray-300"}`,children:h.rarity.toUpperCase()}),c.jsx("div",{className:"text-sm text-purple-200 mt-2 max-w-xs mx-auto",children:h.description})]}),(o==="ready"||o==="throwing"||o==="impact"||o==="wobble"||o==="suspense")&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`absolute top-1/4 left-1/2 -translate-x-1/2 ${o==="impact"?"animate-shake":"animate-float"}`,children:o!=="impact"&&o!=="wobble"&&o!=="suspense"?c.jsx(un,{creature:h,size:120,animated:!0}):c.jsxs("div",{className:"relative",children:[c.jsx("div",{style:{transform:`translateX(${I.x-50}px) rotate(${I.rotation}deg)`},children:c.jsx(Nl,{type:S,size:"large"})}),o==="wobble"&&c.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 flex gap-1",children:[...Array(x.maxWobbles)].map((le,Q)=>c.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${Q<x.currentWobble?"bg-yellow-400 scale-100":"bg-gray-600 scale-75"}`},Q))}),o==="suspense"&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-yellow-400/50 animate-ping"})})]})}),o==="throwing"&&c.jsx("div",{className:"absolute transition-none",style:{left:`${I.x}%`,top:`${I.y}%`,transform:`translate(-50%, -50%) scale(${I.scale}) rotate(${I.rotation}deg)`},children:c.jsx(Nl,{type:S,size:"medium"})}),o==="ready"&&c.jsxs("div",{className:"absolute bottom-20 text-center",children:[c.jsxs("div",{className:"text-lg text-white mb-2 drop-shadow-lg",children:["Capture chance: ",c.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round(y*100),"%"]})]}),c.jsx("div",{className:"text-3xl font-bold text-white mb-3 drop-shadow-lg animate-pulse",children:"THROW!"}),c.jsx("button",{onClick:xe,className:"active:scale-90 transition-transform hover:scale-110","aria-label":"Throw ball",children:c.jsx(Nl,{type:S,size:"large",showSparkle:!0,className:"animate-bounce-gentle"})})]}),(o==="wobble"||o==="suspense")&&c.jsx("div",{className:"absolute bottom-24 text-center",children:c.jsx("div",{className:"text-xl text-white animate-pulse drop-shadow-lg",children:o==="wobble"?"...":"Please work..."})})]}),o==="result"&&c.jsx("div",{className:"text-center z-30 bg-purple-900/90 backdrop-blur-sm rounded-3xl p-6 mx-4 border border-purple-500/30 shadow-2xl",children:W?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-4xl text-yellow-400 font-bold mb-4 animate-bounce-gentle drop-shadow-lg",children:"CAUGHT!"}),c.jsxs("div",{className:"relative inline-block",children:[c.jsx(un,{creature:h,size:150,animated:!0}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[...Array(8)].map((le,Q)=>c.jsx("div",{className:"absolute text-3xl animate-sparkle",style:{left:`${20+Q%4*20}%`,top:`${20+Math.floor(Q/4)*40}%`,animationDelay:`${Q*.1}s`},children:""},Q))})]}),c.jsx("div",{className:"text-2xl font-bold text-white mt-4",children:h.name}),c.jsx("div",{className:"text-purple-200 mt-2 max-w-xs mx-auto",children:h.description}),c.jsx("div",{className:"text-4xl mt-4",children:""})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-3xl text-red-400 font-bold mb-4",children:"Oh no! It escaped!"}),c.jsx("div",{className:"opacity-50 inline-block",children:c.jsx(un,{creature:h,size:120,animated:!1})}),c.jsx("div",{className:"text-xl text-purple-200 mt-4 max-w-xs mx-auto",children:"Keep brushing well and try again tomorrow!"}),c.jsx("div",{className:"text-4xl mt-4",children:""})]})})]}),o==="result"&&c.jsx("div",{className:"relative z-30 p-6",children:c.jsx("button",{onClick:we,className:"w-full py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-lg",children:"Continue"})}),c.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
        @keyframes flash {
          0% { opacity: 1; }
          100% { opacity: 0; }
        }
        .animate-flash {
          animation: flash 0.3s ease-out forwards;
        }
      `})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("div",{className:"text-xl text-center text-purple-200",children:"You've caught all the creatures in this region!"}),c.jsx("button",{onClick:()=>a(null),className:"mt-8 px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Continue"})]})}function nv({photos:e,capturedCreature:t,onSelectPhoto:n,onSkip:r}){return e.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"No Photos"}),c.jsx("p",{className:"text-purple-200 mb-6",children:"No photos were captured during this session."}),c.jsx("button",{onClick:r,className:"px-8 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:"Go Home"})]}):c.jsxs("div",{className:"flex flex-col h-full p-4",children:[c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Your Photos!"}),c.jsx("p",{className:"text-purple-200 text-sm",children:"Tap a photo to decorate it with stickers!"}),t&&c.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-yellow-900/30 px-3 py-1 rounded-full",children:[c.jsx(un,{creature:t,size:24,animated:!1}),c.jsx("span",{className:"text-sm text-yellow-300",children:"New sticker unlocked!"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.map((a,o)=>c.jsx("button",{onClick:()=>n(a),className:"aspect-[3/4] rounded-2xl overflow-hidden bg-purple-900/50 active:scale-95 transition-transform shadow-lg",children:c.jsx("img",{src:a,alt:`Photo ${o+1}`,className:"w-full h-full object-cover"})},o))})}),c.jsx("button",{onClick:r,className:"w-full mt-4 py-3 text-lg text-purple-300 bg-purple-800/50 rounded-xl",children:"Skip for now"})]})}const ua=[{id:"none",name:"Squeaky Clean",imageUrl:""},{id:"rainbow",name:"Unicorn Burp",imageUrl:"linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff)"},{id:"purple",name:"Grape Soda Pop",imageUrl:"linear-gradient(135deg, #667eea, #764ba2)"},{id:"sunset",name:"Peachy Keen",imageUrl:"linear-gradient(135deg, #fa709a, #fee140)"},{id:"ocean",name:"Mermaid Splash",imageUrl:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{id:"forest",name:"Froggy Pond",imageUrl:"linear-gradient(135deg, #11998e, #38ef7d)"},{id:"candy",name:"Bubblegum Blast",imageUrl:"linear-gradient(135deg, #f093fb, #f5576c)"},{id:"night",name:"Sleepy Time",imageUrl:"linear-gradient(135deg, #0f0c29, #302b63, #24243e)"},{id:"gold",name:"Cheesy Grin",imageUrl:"linear-gradient(135deg, #f7971e, #ffd200)"},{id:"mint",name:"Mint Fresh",imageUrl:"linear-gradient(135deg, #00b09b, #96c93d)"},{id:"crystal",name:"Crystal Cave",imageUrl:"linear-gradient(135deg, #667db6, #0082c8, #00dfa2)"},{id:"slime",name:"Slime Valley",imageUrl:"linear-gradient(135deg, #56ab2f, #a8e063, #7cfc00)"},{id:"prehistoric",name:"Dino World",imageUrl:"linear-gradient(135deg, #8b4513, #d2691e, #ff8c00)"},{id:"phantom",name:"Ghost Realm",imageUrl:"linear-gradient(135deg, #2c3e50, #4a6572, #7f8c8d)"}];var mt=[];for(var Al=0;Al<256;++Al)mt.push((Al+256).toString(16).slice(1));function rv(e,t=0){return(mt[e[t+0]]+mt[e[t+1]]+mt[e[t+2]]+mt[e[t+3]]+"-"+mt[e[t+4]]+mt[e[t+5]]+"-"+mt[e[t+6]]+mt[e[t+7]]+"-"+mt[e[t+8]]+mt[e[t+9]]+"-"+mt[e[t+10]]+mt[e[t+11]]+mt[e[t+12]]+mt[e[t+13]]+mt[e[t+14]]+mt[e[t+15]]).toLowerCase()}var da,iv=new Uint8Array(16);function sv(){if(!da&&(da=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!da))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return da(iv)}var av=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const wf={randomUUID:av};function ov(e,t,n){if(wf.randomUUID&&!e)return wf.randomUUID();e=e||{};var r=e.random||(e.rng||sv)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,rv(r)}const Pl=[{label:"S",scale:.75},{label:"M",scale:1},{label:"L",scale:1.5},{label:"XL",scale:2}],fa=80,bf=2e3,lv=30,ha=5;function Zp({photo:e,capturedCreatures:t,onDone:n,onBack:r,debugMode:a=!1}){const[o,u]=k.useState([]),[h,p]=k.useState(ua[0]),[y,j]=k.useState(null),[S,E]=k.useState(null),[W,$]=k.useState(!1),[I,V]=k.useState(null),[x,v]=k.useState(0),[b,_]=k.useState(!1),[G,z]=k.useState(!1),[N,L]=k.useState([]),H=k.useRef(null),[O,T]=k.useState(!1),[X,te]=k.useState(!1),[oe,xe]=k.useState(null),we=k.useRef(null),le=k.useRef(0),Q=k.useRef(null),ee=a?999:lv,Z=k.useCallback(ie=>{if(o.length>=ee)return;const Se=o.length%10,je=50+Se*ha-5*ha/2,Pe=50+Se*ha-5*ha/2,ge=Math.max(10,Math.min(90,je)),De=Math.max(10,Math.min(90,Pe)),Tt={id:ov(),stickerId:ie.id,creatureId:ie.id,imageUrl:`/vibe-brushing/creatures/${ie.id}.png`,x:ge,y:De,scale:1,rotation:0};u(Mt=>[...Mt,Tt]),V(ie.id),$(!1),E(Tt.id)},[o.length]),he=k.useCallback((ie,Se)=>{Se.stopPropagation(),j(ie),E(ie)},[]),ke=k.useCallback(ie=>{if(!y||!H.current)return;const Se=H.current.getBoundingClientRect();let je,Pe;"touches"in ie?(je=ie.touches[0].clientX,Pe=ie.touches[0].clientY):(je=ie.clientX,Pe=ie.clientY);const ge=(je-Se.left)/Se.width*100,De=(Pe-Se.top)/Se.height*100;u(Tt=>Tt.map(Mt=>Mt.id===y?{...Mt,x:Math.max(0,Math.min(100,ge)),y:Math.max(0,Math.min(100,De))}:Mt))},[y]),Le=k.useCallback(ie=>{u(Se=>Se.filter(je=>je.id!==ie)),S===ie&&E(null)},[S]),Ae=k.useCallback(ie=>{u(Se=>Se.map(je=>{if(je.id!==ie)return je;const ge=(Pl.findIndex(De=>Math.abs(De.scale-je.scale)<.01)+1)%Pl.length;return{...je,scale:Pl[ge].scale}}))},[]),Ue=k.useCallback((ie,Se)=>{Se.stopPropagation(),E(ie)},[]),Ie=k.useCallback(()=>{E(null)},[]),Je=k.useCallback(()=>{const Se=(ua.findIndex(Pe=>Pe.id===h.id)+1)%ua.length,je=ua[Se];p(je),xe(je.name),Q.current&&clearTimeout(Q.current),Q.current=window.setTimeout(()=>{xe(null)},1500)},[h]),$t=k.useCallback(()=>{S&&Ae(S)},[S,Ae]),Oe=k.useCallback(ie=>{u(Se=>Se.map(je=>je.id!==ie?je:{...je,rotation:(je.rotation+45)%360}))},[]),me=k.useCallback(()=>{S&&Oe(S)},[S,Oe]),ot=k.useCallback(()=>{z(!0),v(0),_(!1);const ie=["","","","","","",""],Se=Array.from({length:16},(je,Pe)=>({id:Pe,x:50,y:50,angle:Pe*360/16,emoji:ie[Math.floor(Math.random()*ie.length)]}));L(Se),setTimeout(()=>{u([]),E(null),z(!1),L([])},600)},[]),Te=k.useCallback(()=>{ot()},[ot]),xt=k.useCallback(()=>{_(!0),le.current=Date.now();const ie=()=>{const Se=Date.now()-le.current,je=Math.min(Se/bf,1);v(je),je>=1?Te():we.current=requestAnimationFrame(ie)};we.current=requestAnimationFrame(ie)},[Te]),nt=k.useCallback(()=>{_(!1),v(0),we.current&&(cancelAnimationFrame(we.current),we.current=null)},[]),Ft=k.useCallback(async()=>{T(!0);try{const ie=document.createElement("canvas"),Se=ie.getContext("2d");if(!Se)return;const je=new Image;je.crossOrigin="anonymous",await new Promise((Et,lt)=>{je.onload=()=>Et(),je.onerror=lt,je.src=e}),ie.width=je.width,ie.height=je.height,h.imageUrl&&(Se.fillStyle="#000",Se.fillRect(0,0,ie.width,ie.height)),Se.drawImage(je,0,0);const Pe=Math.min(ie.width,ie.height)/4,ge=o.map(Et=>new Promise((lt,rn)=>{const sn=new Image;sn.crossOrigin="anonymous",sn.onload=()=>lt({sticker:Et,img:sn}),sn.onerror=rn,sn.src=Et.imageUrl}));(await Promise.all(ge)).forEach(({sticker:Et,img:lt})=>{const rn=Et.x/100*ie.width,sn=Et.y/100*ie.height,pn=Pe*Et.scale;Se.save(),Se.translate(rn,sn),Se.rotate(Et.rotation*Math.PI/180),Se.drawImage(lt,-pn/2,-pn/2,pn,pn),Se.restore()});const Tt=ie.toDataURL("image/png"),Mt=document.createElement("a");Mt.download=`sparkle-brush-${Date.now()}.png`,Mt.href=Tt,Mt.click(),setTimeout(n,500)}catch(ie){console.error("Failed to save image:",ie),T(!1)}},[e,o,h,n]);k.useEffect(()=>{const ie=()=>{j(null),nt()},Se=()=>{j(null),nt()};return window.addEventListener("mouseup",ie),window.addEventListener("touchend",Se),()=>{window.removeEventListener("mouseup",ie),window.removeEventListener("touchend",Se),we.current&&cancelAnimationFrame(we.current),Q.current&&clearTimeout(Q.current)}},[nt]);const Rt=t.find(ie=>ie.id===I);return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-900/50",children:[c.jsx("button",{onClick:r,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg",children:" Back"}),c.jsx("h1",{className:"text-lg font-bold",children:"Decorate!"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>te(!0),disabled:O,className:"px-3 py-1 text-purple-300 bg-purple-800/50 rounded-lg disabled:opacity-50",children:"Skip"}),c.jsx("button",{onClick:Ft,disabled:O,className:"px-4 py-1 text-white bg-green-600 rounded-lg disabled:opacity-50",children:O?"...":"Save"})]})]}),c.jsxs("div",{ref:H,className:"flex-1 relative overflow-hidden m-3 rounded-2xl",style:{background:h.imageUrl||"transparent"},onMouseMove:ke,onTouchMove:ke,onClick:Ie,children:[c.jsx("img",{src:e,alt:"Your photo",className:"w-full h-full object-contain",draggable:!1}),o.map(ie=>{const Se=S===ie.id,je=y===ie.id;return c.jsx("div",{className:`absolute cursor-move select-none ${je?"z-20":Se?"z-10":""}`,style:{left:`${ie.x}%`,top:`${ie.y}%`,transform:"translate(-50%, -50%)",transition:je?"none":"transform 0.1s"},onMouseDown:Pe=>he(ie.id,Pe),onTouchStart:Pe=>he(ie.id,Pe),onClick:Pe=>Ue(ie.id,Pe),children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`relative ${Se?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-transparent rounded-lg":""}`,style:{transform:`scale(${ie.scale}) rotate(${ie.rotation}deg)`,transition:je?"none":"transform 0.15s"},children:c.jsx("img",{src:ie.imageUrl,alt:"Sticker",className:"pointer-events-none",style:{width:fa,height:fa,objectFit:"contain"},draggable:!1})}),Se&&c.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),Le(ie.id)},onMouseDown:Pe=>Pe.stopPropagation(),onTouchStart:Pe=>Pe.stopPropagation(),className:"absolute w-7 h-7 bg-red-600 rounded-full flex items-center justify-center text-white text-sm shadow-lg hover:bg-red-500 active:scale-90 transition-transform z-10",style:{top:`${-(fa*ie.scale)/2-4}px`,right:`${-(fa*ie.scale)/2-4}px`},children:""})]})},ie.id)}),o.length===0&&!W&&!G&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:c.jsx("div",{className:"bg-black/50 rounded-xl px-4 py-2 text-sm text-white text-center",children:"Tap the + button to add creature stickers!"})}),G&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute inset-0 bg-orange-500/30 animate-explosion-flash pointer-events-none z-30"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-40",children:c.jsx("div",{className:"text-8xl animate-explosion-center",children:""})}),N.map(ie=>c.jsx("div",{className:"absolute text-3xl pointer-events-none z-40 animate-explosion-particle",style:{left:"50%",top:"50%","--particle-angle":`${ie.angle}deg`},children:ie.emoji},ie.id))]}),oe&&c.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 pointer-events-none z-50 animate-toast-fade",children:c.jsx("div",{className:"bg-black/80 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:oe})})]}),c.jsx("div",{className:"bg-purple-900/50 p-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>$(!0),disabled:o.length>=ee,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg relative ${o.length>=ee?"bg-gray-600 opacity-50 cursor-not-allowed":"bg-purple-600"}`,children:Rt?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:`/vibe-brushing/creatures/${Rt.id}.png`,alt:Rt.name,className:"w-10 h-10 object-contain"}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center text-xs font-bold text-white shadow",children:"+"})]}):c.jsx("span",{className:"text-2xl",children:"+"})}),c.jsx("button",{onClick:Je,className:"w-12 h-12 flex-shrink-0 bg-purple-800/50 rounded-xl flex items-center justify-center active:scale-95 transition-transform",children:c.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-white/30",style:{background:h.imageUrl||"#1E1B4B"}})}),c.jsx("div",{className:"flex-1"}),S&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:$t,className:"w-12 h-12 flex-shrink-0 bg-blue-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:c.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),c.jsx("button",{onClick:me,className:"w-12 h-12 flex-shrink-0 bg-orange-600 rounded-xl flex items-center justify-center active:scale-95 transition-transform shadow-lg",children:c.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 12a9 9 0 1 1-9-9"}),c.jsx("path",{d:"M21 3v9h-9"})]})})]}),c.jsx("div",{className:"flex-1"}),o.length>0&&c.jsxs("button",{onMouseDown:xt,onTouchStart:xt,onMouseUp:nt,onTouchEnd:nt,onMouseLeave:nt,className:`w-14 h-14 flex-shrink-0 rounded-xl flex items-center justify-center text-2xl transition-all relative overflow-hidden ${b?"bg-red-600 scale-105":"bg-red-900/70"}`,style:{animation:b?"bomb-shake 0.1s infinite":"none"},children:[c.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[c.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"4"}),c.jsx("circle",{cx:"18",cy:"18",r:"15",fill:"none",stroke:"#fbbf24",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:`${x*94.2} 94.2`,style:{filter:"drop-shadow(0 0 4px #fbbf24)"}})]}),b&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("span",{className:"text-white font-bold text-lg drop-shadow-lg",children:Math.ceil((1-x)*(bf/1e3))})}),c.jsx("span",{className:`relative z-10 transition-all ${b?"scale-75 opacity-50":""}`,children:""}),c.jsx("style",{children:`
                @keyframes bomb-shake {
                  0%, 100% { transform: translateX(0); }
                  25% { transform: translateX(-2px) rotate(-2deg); }
                  75% { transform: translateX(2px) rotate(2deg); }
                }
                @keyframes explosion-flash {
                  0% { opacity: 0; }
                  20% { opacity: 1; }
                  100% { opacity: 0; }
                }
                @keyframes explosion-center {
                  0% { transform: scale(0) rotate(0deg); opacity: 1; }
                  50% { transform: scale(2) rotate(180deg); opacity: 1; }
                  100% { transform: scale(3) rotate(360deg); opacity: 0; }
                }
                @keyframes explosion-particle {
                  0% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(0) scale(1);
                    opacity: 1;
                  }
                  100% { 
                    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateX(150px) scale(0);
                    opacity: 0;
                  }
                }
                .animate-explosion-flash {
                  animation: explosion-flash 0.6s ease-out forwards;
                }
                .animate-explosion-center {
                  animation: explosion-center 0.6s ease-out forwards;
                }
                .animate-explosion-particle {
                  animation: explosion-particle 0.6s ease-out forwards;
                }
                @keyframes toast-fade {
                  0% { opacity: 0; transform: translate(-50%, 10px); }
                  15% { opacity: 1; transform: translate(-50%, 0); }
                  85% { opacity: 1; transform: translate(-50%, 0); }
                  100% { opacity: 0; transform: translate(-50%, -10px); }
                }
                .animate-toast-fade {
                  animation: toast-fade 1.5s ease-in-out forwards;
                }
              `})]})]})}),W&&c.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>$(!1),children:c.jsxs("div",{className:"bg-purple-900 rounded-2xl p-4 m-4 max-w-md max-h-[80vh] overflow-auto",onClick:ie=>ie.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Add Creature Sticker"}),c.jsx("button",{onClick:()=>$(!1),className:"w-8 h-8 bg-purple-800 rounded-full flex items-center justify-center text-purple-300 hover:bg-purple-700",children:""})]}),t.length===0?c.jsxs("div",{className:"text-center py-8 text-purple-300",children:[c.jsx("p",{children:"No creatures captured yet!"}),c.jsx("p",{className:"text-sm mt-2",children:"Complete brushing sessions to catch creatures."})]}):c.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(ie=>c.jsxs("button",{onClick:()=>Z(ie),className:"aspect-square bg-purple-800/50 rounded-xl p-2 flex flex-col items-center justify-center gap-1 hover:bg-purple-700/50 active:scale-95 transition-all",children:[c.jsx("img",{src:`/vibe-brushing/creatures/${ie.id}.png`,alt:ie.name,className:"w-16 h-16 object-contain"}),c.jsx("span",{className:"text-xs text-purple-200 truncate w-full text-center",children:ie.name})]},ie.id))})]})}),X&&c.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>te(!1),children:c.jsxs("div",{className:"bg-purple-900 rounded-2xl p-6 m-4 max-w-sm text-center",onClick:ie=>ie.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold mb-2",children:"Skip Decorating?"}),c.jsx("p",{className:"text-purple-300 mb-6",children:"Your photo won't be saved. Are you sure you want to skip?"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-3 bg-purple-800 rounded-xl font-semibold hover:bg-purple-700 active:scale-95 transition-all",children:"Cancel"}),c.jsx("button",{onClick:()=>{te(!1),n()},className:"flex-1 py-3 bg-red-600 rounded-xl font-semibold hover:bg-red-500 active:scale-95 transition-all",children:"Skip"})]})]})})]})}const pa={1:{name:"Series 1",subtitle:"Original Collection",icon:"",color:"from-purple-600 to-blue-600"},2:{name:"Series 2",subtitle:"Crystal Caverns",icon:"",color:"from-cyan-500 to-emerald-500"},3:{name:"Series 3",subtitle:"Prehistoric Tech",icon:"",color:"from-orange-500 to-red-500"}};function cv({userProgress:e,onBack:t}){const[n,r]=k.useState(null),[a,o]=k.useState(1),u=new Set(e.capturedCreatures.map(V=>V.id)),h=Ip(Array.from(u)),p=Aa(a),y=Ct.find(V=>V.rarity==="mythic"),j={mythic:a===1&&y?[y]:[],legendary:p.filter(V=>V.rarity==="legendary"),rare:p.filter(V=>V.rarity==="rare"),common:p.filter(V=>V.rarity==="common")},S=p.filter(V=>u.has(V.id)).length,E=Array.from(u).length,W=Ct.length,$=V=>{u.has(V.id)&&r(V)},I=V=>!h.includes(V);return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),c.jsx("h1",{className:"text-xl font-bold",children:"My Collection"}),c.jsxs("div",{className:"text-sm text-purple-300",children:[E,"/",W]})]}),c.jsx("div",{className:"flex gap-2 px-4 pt-3 pb-2 bg-purple-900/30",children:[1,2,3].map(V=>{const x=pa[V],v=I(V),b=a===V,_=Cr(V,Array.from(u)),G=Aa(V).length,z=Aa(V).filter(N=>u.has(N.id)).length;return c.jsx("button",{onClick:()=>!v&&o(V),disabled:v,className:`flex-1 py-2 px-3 rounded-xl transition-all relative overflow-hidden ${b?`bg-gradient-to-r ${x.color} text-white shadow-lg`:v?"bg-gray-800/50 text-gray-500 cursor-not-allowed":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:c.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[c.jsx("span",{className:"text-lg",children:v?"":x.icon}),c.jsx("span",{className:"text-xs font-bold",children:x.name}),!v&&c.jsxs("span",{className:"text-[10px] opacity-75",children:[z,"/",G,_&&" "]})]})},V)})}),c.jsx("div",{className:"px-4 py-2 bg-gradient-to-r from-purple-900/50 to-purple-800/50 border-b border-purple-700/30",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:pa[a].icon}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-white",children:pa[a].name}),c.jsx("p",{className:"text-xs text-purple-300",children:pa[a].subtitle})]}),c.jsxs("div",{className:"ml-auto text-sm text-purple-300",children:[S,"/",p.length]})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a===1&&j.mythic.length>0&&c.jsx(ma,{title:" Mythic",creatures:j.mythic,capturedIds:u,color:"rainbow",onCreatureClick:$}),c.jsx(ma,{title:" Legendary",creatures:j.legendary,capturedIds:u,color:"yellow",onCreatureClick:$}),c.jsx(ma,{title:" Rare",creatures:j.rare,capturedIds:u,color:"purple",onCreatureClick:$}),c.jsx(ma,{title:" Common",creatures:j.common,capturedIds:u,color:"gray",onCreatureClick:$})]}),c.jsx("div",{className:"p-4 bg-purple-900/50",children:c.jsxs("div",{className:"flex justify-around text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.currentStreak}),c.jsx("div",{className:"text-xs text-purple-300",children:"Day Streak"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.totalSessions}),c.jsx("div",{className:"text-xs text-purple-300",children:"Total Sessions"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-pink-400",children:e.longestStreak}),c.jsx("div",{className:"text-xs text-purple-300",children:"Best Streak"})]})]})}),n&&c.jsx(uv,{creature:n,capturedCreatures:e.capturedCreatures,onClose:()=>r(null)})]})}function ma({title:e,creatures:t,capturedIds:n,color:r,onCreatureClick:a}){const o=t.filter(h=>n.has(h.id)).length,u={rainbow:"border-orange-500/50 bg-gradient-to-r from-orange-900/20 via-red-900/20 to-yellow-900/20",yellow:"border-yellow-500/30 bg-yellow-900/10",purple:"border-purple-500/30 bg-purple-900/10",gray:"border-gray-500/30 bg-gray-900/10"};return t.length===0?null:c.jsxs("div",{className:`mb-6 p-4 rounded-2xl border ${u[r]}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("h2",{className:"text-lg font-bold",children:e}),c.jsxs("span",{className:"text-sm text-purple-300",children:[o,"/",t.length]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(h=>{const p=n.has(h.id);return c.jsxs("button",{onClick:()=>a(h),disabled:!p,className:`aspect-square rounded-xl flex flex-col items-center justify-center p-2 transition-all ${p?"bg-purple-800/50 hover:bg-purple-700/50 cursor-pointer active:scale-95":"bg-purple-900/30 opacity-50 cursor-default"}`,children:[c.jsx("div",{className:`${p?"animate-float":"grayscale opacity-50"}`,children:p?c.jsx(un,{creature:h,size:48,animated:!1}):c.jsx("div",{className:"w-12 h-12 flex items-center justify-center text-2xl",children:""})}),c.jsx("div",{className:"text-xs text-center mt-1 truncate w-full",children:p?h.name:"???"})]},h.id)})})]})}function uv({creature:e,capturedCreatures:t,onClose:n}){const r=t.filter(y=>y.id===e.id).length,a=ay(e.region),o={Nature:"bg-green-600",Water:"bg-blue-600",Fire:"bg-orange-600",Electric:"bg-yellow-500",Air:"bg-cyan-500",Cosmic:"bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500"},u={common:"text-gray-300",rare:"text-purple-400",legendary:"text-yellow-400",mythic:"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-400 to-yellow-400"},h=y=>y>=100?`${(y/100).toFixed(1)}m`:`${y}cm`,p=y=>y>=1e3?`${(y/1e3).toFixed(1)}t`:y<1?`${(y*1e3).toFixed(0)}g`:`${y}kg`;return c.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:n,children:c.jsxs("div",{className:"bg-purple-900/95 rounded-3xl max-w-sm w-full overflow-hidden shadow-2xl border border-purple-500/30",onClick:y=>y.stopPropagation(),children:[c.jsxs("div",{className:"relative bg-gradient-to-b from-purple-800/50 to-transparent p-6 flex flex-col items-center",children:[c.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-purple-800/80 flex items-center justify-center text-purple-300 hover:bg-purple-700/80 transition-colors",children:""}),c.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 rounded-full bg-purple-800/80 text-xs text-purple-300",children:["Series ",e.series]}),c.jsx("div",{className:"animate-float",children:c.jsx(un,{creature:e,size:120,animated:!0})}),c.jsx("h2",{className:`text-2xl font-bold mt-4 ${u[e.rarity]}`,children:e.name}),c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium text-white ${o[a]}`,children:a}),c.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-700/60 text-purple-200 capitalize",children:e.rarity})]})]}),c.jsxs("div",{className:"px-6 pb-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[c.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[c.jsx("div",{className:"text-lg font-bold text-white",children:h(e.height)}),c.jsx("div",{className:"text-xs text-purple-300",children:"Height"})]}),c.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[c.jsx("div",{className:"text-lg font-bold text-white",children:p(e.weight)}),c.jsx("div",{className:"text-xs text-purple-300",children:"Weight"})]}),c.jsxs("div",{className:"bg-purple-800/40 rounded-xl p-3 text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:["",r]}),c.jsx("div",{className:"text-xs text-purple-300",children:"Caught"})]})]}),c.jsx("div",{className:"bg-purple-800/30 rounded-xl p-4",children:c.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:e.description})})]})]})})}const dv="2.0.0";function fv({onBack:e,onBuddyDebug:t,onGraphicsDebug:n,onPhotoDebug:r}){const[a,o]=k.useState(qp);k.useEffect(()=>{Ey(a)},[a]);const u=p=>{o(y=>({...y,sessionDurationSeconds:p}))},h=[{value:60,label:"1 Minute",description:"Quick brush"},{value:90,label:"1:30",description:"Standard brush"},{value:120,label:"2 Minutes",description:"Recommended"}];return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-900/50",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),c.jsx("h1",{className:"text-xl font-bold",children:"Settings"}),c.jsx("div",{className:"w-20"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[c.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[c.jsx("h2",{className:"text-lg font-bold mb-1",children:"Brushing Duration"}),c.jsx("p",{className:"text-sm text-purple-300 mb-4",children:"How long should each brushing session last?"}),c.jsx("div",{className:"space-y-2",children:h.map(p=>c.jsxs("button",{onClick:()=>u(p.value),className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${a.sessionDurationSeconds===p.value?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-purple-800/50 text-purple-200 hover:bg-purple-700/50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${a.sessionDurationSeconds===p.value?"border-white bg-white":"border-purple-400"}`,children:a.sessionDurationSeconds===p.value&&c.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-bold",children:p.label}),c.jsx("div",{className:`text-xs ${a.sessionDurationSeconds===p.value?"text-white/80":"text-purple-400"}`,children:p.description})]})]}),p.value===120&&c.jsx("span",{className:"text-xs bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full font-bold",children:" Best"})]},p.value))})]}),c.jsxs("div",{className:"bg-purple-900/30 rounded-2xl p-4 mb-4",children:[c.jsx("h2",{className:"text-lg font-bold mb-2",children:"About Sparkle"}),c.jsx("p",{className:"text-sm text-purple-300",children:"Sparkle makes tooth brushing fun! Brush your teeth to clean creatures, catch them, and build your collection."}),c.jsxs("div",{className:"mt-4 text-center text-xs text-purple-500",children:["Version ",dv]})]}),(t||n||r)&&c.jsxs("div",{className:"bg-gray-900/50 rounded-2xl p-4 border border-gray-700",children:[c.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-300",children:"Developer Tools"}),c.jsxs("div",{className:"space-y-2",children:[n&&c.jsxs("button",{onClick:n,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[c.jsx("div",{className:"font-bold text-purple-400",children:"Graphics Debug Menu"}),c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Preview all creatures and buddy graphics in a gallery view"})]}),t&&c.jsxs("button",{onClick:t,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[c.jsx("div",{className:"font-bold text-green-400",children:"Buddy Debug Mode"}),c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test buddy animation with activity level simulation"})]}),r&&c.jsxs("button",{onClick:r,className:"w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-xl text-left transition-colors",children:[c.jsx("div",{className:"font-bold text-pink-400",children:"Photo Editor Debug"}),c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test photo editing with all stickers unlocked and no limits"})]})]})]})]})]})}function hv({onProfileSelected:e}){const[t,n]=k.useState([]),[r,a]=k.useState(!0),[o,u]=k.useState(!1),[h,p]=k.useState(""),[y,j]=k.useState(null);k.useEffect(()=>{S()},[]);async function S(){a(!0);try{await Jy();const I=await wu(),V=await Promise.all(I.map(async x=>{try{const v=await xi(x.id);return{...x,progress:v}}catch{return x}}));n(V)}catch(I){console.error("Failed to load profiles:",I)}a(!1)}async function E(){if(h.trim())try{const I=await Xp(h);p(""),u(!1),await S(),W(I)}catch(I){console.error("Failed to create profile:",I)}}function W(I){xu(I.id),e(I)}async function $(I){try{await Yy(I),j(null),await S()}catch(V){console.error("Failed to delete profile:",V)}}return r?c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 flex items-center justify-center",children:c.jsx("div",{className:"text-white text-xl",children:"Loading profiles..."})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-purple-800 to-indigo-900 p-6",children:c.jsxs("div",{className:"max-w-md mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"text-5xl mb-4",children:""}),c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Sparkle Brush"}),c.jsx("p",{className:"text-purple-200",children:"Who's brushing today?"})]}),c.jsx("div",{className:"space-y-4 mb-8",children:t.map(I=>c.jsx("div",{className:"relative bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:y===I.id?c.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[c.jsxs("p",{className:"text-white text-center",children:["Delete ",I.name,"'s profile?"]}),c.jsx("p",{className:"text-red-300 text-sm text-center",children:"This will delete all their creatures and progress!"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>$(I.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold",children:"Delete"}),c.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 bg-gray-500 text-white rounded-lg font-bold",children:"Cancel"})]})]}):c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>W(I),className:"flex-1 flex items-center gap-4",children:[c.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg",style:{backgroundColor:I.avatarColor},children:I.name.charAt(0).toUpperCase()}),c.jsxs("div",{className:"flex-1 text-left",children:[c.jsx("div",{className:"text-white font-bold text-lg",children:I.name}),I.progress&&c.jsxs("div",{className:"text-purple-200 text-sm flex gap-3",children:[c.jsxs("span",{children:[" ",I.progress.currentStreak," streak"]}),c.jsxs("span",{children:[" ",I.progress.capturedCreatures.length," creatures"]})]})]})]}),c.jsx("button",{onClick:V=>{V.stopPropagation(),j(I.id)},className:"p-2 text-red-400 hover:text-red-300 transition-colors","aria-label":"Delete profile",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},I.id))}),o?c.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-purple-200 text-sm mb-2",children:"Profile Name"}),c.jsx("input",{type:"text",value:h,onChange:I=>p(I.target.value),placeholder:"Enter name...",className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0,maxLength:20,onKeyDown:I=>{I.key==="Enter"&&E(),I.key==="Escape"&&u(!1)}})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:E,disabled:!h.trim(),className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Profile"}),c.jsx("button",{onClick:()=>{u(!1),p("")},className:"px-4 py-3 bg-gray-500/50 text-white rounded-xl font-bold",children:"Cancel"})]})]}):c.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-bold text-lg shadow-lg flex items-center justify-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:"+"}),c.jsx("span",{children:"Add New Profile"})]}),t.length===0&&!o&&c.jsxs("div",{className:"text-center mt-8 text-purple-200",children:[c.jsx("p",{children:"No profiles yet!"}),c.jsx("p",{className:"text-sm mt-1",children:"Create a profile to start brushing"})]})]})})}const kf=[{id:"cowboy",name:"Cowboy Hat",imageUrl:"",unlockCondition:"starter"},{id:"crown",name:"Royal Crown",imageUrl:"",unlockCondition:"streak",unlockThreshold:7},{id:"tophat",name:"Top Hat",imageUrl:"",unlockCondition:"sessions",unlockThreshold:10},{id:"wizard",name:"Wizard Hat",imageUrl:"",unlockCondition:"creature"},{id:"cap",name:"Baseball Cap",imageUrl:"",unlockCondition:"starter"}];function pv({onBack:e}){const{isReady:t,error:n,registerVideoElement:r,startCamera:a}=wo(),{facePosition:o,isLoading:u,startTracking:h,stopTracking:p}=Gp(),{motionResults:y,startDetection:j,stopDetection:S,setFaceRegion:E,setDebugMode:W,getDebugInfo:$}=Vp({targetCleaningTime:25}),I=k.useRef(null),V=k.useRef(null),[x,v]=k.useState(kf[0]),[b,_]=k.useState({width:0,height:0}),[G,z]=k.useState({width:640,height:480}),[N,L]=k.useState(!0),[H,O]=k.useState(!1),[T,X]=k.useState(0);k.useEffect(()=>{a()},[a]),k.useEffect(()=>{E(o?{x:o.x,y:o.y,width:o.width,height:o.height}:null)},[o,E]);const te=k.useCallback(()=>{O(Z=>{const he=!Z;return W(he),he})},[W]),oe=k.useCallback(Z=>{I.current=Z,Z&&r(Z)},[r]);k.useEffect(()=>{const Z=I.current;if(!Z||!t)return;const he=()=>{Z.readyState>=2&&Z.videoWidth>0&&(z({width:Z.videoWidth,height:Z.videoHeight}),h(Z),j(Z))},ke=setInterval(he,100);return he(),()=>{clearInterval(ke),p(),S()}},[t,h,p,j,S]),k.useEffect(()=>{const Z=V.current;if(!Z)return;const he=()=>{_({width:Z.clientWidth,height:Z.clientHeight})};he();const ke=new ResizeObserver(he);return ke.observe(Z),()=>ke.disconnect()},[]);const xe=b.width/G.width,we=b.height/G.height,le=o?{x:(b.width-o.width*xe)/2,y:o.y*we,width:o.width*xe,height:o.height*we}:null,Q=y.reduce((Z,he)=>Z+he.motionLevel,0)/Math.max(y.length,1),ee=T>0?T:Q;return c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-indigo-900 to-purple-800 p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg text-white",children:" Back"}),c.jsx("h1",{className:"text-2xl font-bold text-white",children:"Buddy Debug Mode"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:te,className:`px-4 py-2 rounded-lg text-white ${H?"bg-yellow-600":"bg-gray-600"}`,children:" Brush"}),c.jsx("button",{onClick:()=>L(!N),className:`px-4 py-2 rounded-lg text-white ${N?"bg-green-600":"bg-gray-600"}`,children:N?"Debug ON":"Debug OFF"})]})]}),c.jsxs("div",{ref:V,className:"relative w-full aspect-[4/3] bg-black rounded-2xl overflow-hidden mb-4",children:[c.jsx("video",{ref:oe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain transform scale-x-[-1]"}),!t&&!n&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-purple-900/70",children:c.jsx("div",{className:"text-purple-200 text-center p-4 animate-pulse",children:"Connecting to camera..."})}),n&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/70",children:c.jsx("div",{className:"text-red-200 text-center p-4",children:n})}),u&&c.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500/80 px-3 py-1 rounded text-sm",children:"Loading face detection..."}),N&&le&&c.jsx("div",{className:"absolute border-2 border-green-400 pointer-events-none",style:{left:`${le.x}px`,top:`${le.y}px`,width:`${le.width}px`,height:`${le.height}px`},children:c.jsxs("div",{className:"absolute -top-6 left-0 bg-green-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:["Face: ",o==null?void 0:o.x.toFixed(0),", ",o==null?void 0:o.y.toFixed(0)," | ",o==null?void 0:o.width.toFixed(0),"x",o==null?void 0:o.height.toFixed(0)]})}),x&&t&&b.width>0&&c.jsx(Hp,{buddy:x,containerWidth:b.width,containerHeight:b.height,activityScore:ee}),H&&b.width>0&&c.jsx(Yp,{getDebugInfo:$,containerWidth:b.width,containerHeight:b.height,videoWidth:G.width,videoHeight:G.height}),H&&c.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center",children:c.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${y.some(Z=>Z.hasMotion)?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:y.some(Z=>Z.hasMotion)?" BRUSHING DETECTED":" No brushing motion"})}),c.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 px-3 py-2 rounded-lg text-white text-sm",children:["Activity: ",ee.toFixed(0),"%"]})]}),c.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[c.jsx("h2",{className:"text-white font-semibold mb-3",children:"Select Buddy"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:kf.map(Z=>c.jsx("button",{onClick:()=>v(Z),className:`px-4 py-2 rounded-lg transition-all ${x.id===Z.id?"bg-yellow-500 text-black font-bold":"bg-purple-600 text-white hover:bg-purple-500"}`,children:Z.name},Z.id))})]}),c.jsxs("div",{className:"bg-purple-800/50 rounded-xl p-4 mb-4",children:[c.jsx("h2",{className:"text-white font-semibold mb-3",children:"Simulate Activity Level"}),c.jsx("input",{type:"range",min:"0",max:"100",value:T,onChange:Z=>X(Number(Z.target.value)),className:"w-full"}),c.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mt-1",children:[c.jsx("span",{children:"Auto (from motion)"}),c.jsxs("span",{children:[T,"%"]}),c.jsx("span",{children:"Max Activity"})]})]}),N&&c.jsxs("div",{className:"bg-gray-900/80 rounded-xl p-4 font-mono text-sm text-green-400",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-400 mb-1",children:"Video Size:"}),c.jsxs("div",{children:[G.width," x ",G.height]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-400 mb-1",children:"Container Size:"}),c.jsxs("div",{children:[b.width.toFixed(0)," x ",b.height.toFixed(0)]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-400 mb-1",children:"Face Position (video coords):"}),c.jsx("div",{children:o?`x: ${o.x.toFixed(1)}, y: ${o.y.toFixed(1)}`:"Not detected"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-gray-400 mb-1",children:"Activity Score:"}),c.jsxs("div",{children:[ee.toFixed(1),"%"]})]})]}),H&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"border-t border-gray-700 mt-4 pt-4",children:[c.jsx("div",{className:"text-gray-400 mb-2",children:"Motion Detection Zones:"}),c.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs",children:y.map(Z=>c.jsxs("div",{className:`px-2 py-1 rounded ${Z.hasMotion?"bg-green-600":"bg-gray-700"}`,children:[Z.zoneId,": ",Z.motionLevel.toFixed(0),"%"]},Z.zoneId))})]})}),c.jsxs("div",{className:"mt-4 text-gray-500 text-xs",children:["Buddy bounces around the screen | Speed and spin increase with activity",H&&" | Green dashed = brushing region"]})]})]})})}const Cf=["grassland","coastal","lava","city","sky"];function ga(e){const t=e.monsterType.toLowerCase(),n=e.id.toLowerCase();return t.includes("slime")||t.includes("blob")||t.includes("jelly")||t.includes("ghost")?"blobkins":t.includes("cat")||t.includes("fox")||t.includes("raccoon")||t.includes("tanuki")||t.includes("spirit")||t.includes("kappa")||t.includes("owl")||n.includes("yokai")||n.includes("spirit")?"mystlings":t.includes("dragon")||t.includes("drake")||t.includes("mecha")||t.includes("robo")||t.includes("cyber")||t.includes("dino")||n.includes("gear")||n.includes("mecha")||n.includes("cyber")||n.includes("robo")||n.includes("volt")||n.includes("data")?"mechazoids":"sparklings"}const zi={sparklings:{label:"Sparklings",icon:"",color:"bg-yellow-500",description:"Clean, elemental, iconic"},mechazoids:{label:"Mechazoids",icon:"",color:"bg-blue-600",description:"Digital, robotic, tech"},mystlings:{label:"Mystlings",icon:"",color:"bg-purple-600",description:"Spiritual, mystical, Japanese"},blobkins:{label:"Blobkins",icon:"",color:"bg-lime-500",description:"Bouncy, happy, DQ style"}},Gr={grassland:{bg:"bg-green-600",text:"text-green-100",border:"border-green-400"},coastal:{bg:"bg-blue-600",text:"text-blue-100",border:"border-blue-400"},lava:{bg:"bg-orange-600",text:"text-orange-100",border:"border-orange-400"},city:{bg:"bg-purple-600",text:"text-purple-100",border:"border-purple-400"},sky:{bg:"bg-cyan-600",text:"text-cyan-100",border:"border-cyan-400"},all:{bg:"bg-gradient-to-r from-orange-500 to-red-500",text:"text-white",border:"border-orange-400"}},Wr={common:{bg:"bg-gray-700",text:"text-gray-200",glow:""},rare:{bg:"bg-blue-800",text:"text-blue-200",glow:"shadow-blue-500/50 shadow-lg"},legendary:{bg:"bg-gradient-to-br from-amber-800 via-amber-700 to-orange-900",text:"text-amber-100",glow:"shadow-amber-400/70 shadow-2xl ring-2 ring-amber-500/50"},mythic:{bg:"bg-gradient-to-br from-orange-600 via-red-600 to-orange-700",text:"text-orange-100",glow:"shadow-orange-400/80 shadow-2xl ring-4 ring-orange-500/60 animate-pulse"}},mv=["gear-bunny","mecha-moth","vine-droid","robo-squirrel","buzzer-bee","pixel-fawn","sprocket-snail","flutter-bot","thunder-stag","bloom-guardian","prism-fox","echo-owl","natura-prime","leaf-kong","turbo-turtle","crank-crab","wave-bot","pearl-pup","coral-crawler","shell-shock","foam-flounder","anchor-pony","storm-ray","kraken-kit","siren-synth","tide-titan","ocean-emperor","magma-core","pyro-gecko","ember-mech","forge-hound","cinder-snake","slag-slime","coal-critter","blast-bat","volcano-drake","obsidian-knight","inferno-djinn","molten-mammoth","infernal-titan","neon-rat","holo-hound","glitch-cat","drone-pigeon","trash-panda-bot","pixel-roach","subway-worm","vending-mimic","cyber-sphinx","neon-dragon","billboard-beast","data-phantom","metro-mind","propeller-pup","cloud-crawler","zephyr-bunny","nimbus-kitten","glider-squirrel","breeze-bird","balloon-jellyfish","kite-ray","thunder-hawk","aurora-serpent","star-whale","wind-djinn","celestial-phoenix","binsters-claymars"],gv=["gear-bunny","mecha-moth","turbo-turtle","crank-crab","pyro-gecko","slag-slime","glitch-cat","neon-rat","propeller-pup","nimbus-kitten"];function yv({onBack:e}){const[t,n]=k.useState("creatures"),[r,a]=k.useState("all"),[o,u]=k.useState("all"),[h,p]=k.useState("all"),[y,j]=k.useState(!0),[S,E]=k.useState(!1),[W,$]=k.useState(50),[I,V]=k.useState(null),[x,v]=k.useState(120),[b,_]=k.useState(100),[G,z]=k.useState(!0),N=Ct.filter(T=>!(r!=="all"&&T.region!==r||o!=="all"&&T.rarity!==o||h!=="all"&&ga(T)!==h)),L=["sparklings","mechazoids","mystlings","blobkins"],H=L.reduce((T,X)=>(T[X]=Ct.filter(te=>ga(te)===X).length,T),{}),O={byRegion:Cf.reduce((T,X)=>({...T,[X]:Ct.filter(te=>te.region===X).length}),{}),byRarity:{common:Ct.filter(T=>T.rarity==="common").length,rare:Ct.filter(T=>T.rarity==="rare").length,legendary:Ct.filter(T=>T.rarity==="legendary").length,mythic:Ct.filter(T=>T.rarity==="mythic").length}};return c.jsxs("div",{className:"h-screen overflow-y-auto bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900",children:[c.jsx("div",{className:"sticky top-0 z-20 bg-slate-900/95 backdrop-blur border-b border-slate-700",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white flex items-center gap-2",children:" Back"}),c.jsx("h1",{className:"text-2xl font-bold text-white",children:"Graphics Debug Menu"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>n("creatures"),className:`px-4 py-2 rounded-lg transition-all ${t==="creatures"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Creatures (",Ct.length,")"]}),c.jsxs("button",{onClick:()=>n("buddies"),className:`px-4 py-2 rounded-lg transition-all ${t==="buddies"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["Buddies (",Sr.length,")"]})]})]})})}),t==="creatures"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[c.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Region:"}),c.jsx("button",{onClick:()=>a("all"),className:`px-3 py-1 rounded text-sm ${r==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),Cf.map(T=>c.jsxs("button",{onClick:()=>a(T),className:`px-3 py-1 rounded text-sm capitalize ${r===T?`${Gr[T].bg} ${Gr[T].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[T," (",O.byRegion[T],")"]},T))]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[c.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Rarity:"}),c.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1 rounded text-sm ${o==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),["common","rare","legendary","mythic"].map(T=>c.jsxs("button",{onClick:()=>u(T),className:`px-3 py-1 rounded text-sm capitalize ${o===T?`${Wr[T].bg} ${Wr[T].text} font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[T," (",O.byRarity[T],")"]},T))]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[c.jsx("span",{className:"text-slate-400 text-sm py-1",children:"Style:"}),c.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded text-sm ${h==="all"?"bg-white text-slate-900 font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"All"}),L.map(T=>c.jsxs("button",{onClick:()=>p(T),className:`px-3 py-1 rounded text-sm flex items-center gap-1 ${h===T?`${zi[T].color} text-white font-bold`:"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[c.jsx("span",{children:zi[T].icon}),zi[T].label," (",H[T],")"]},T))]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:T=>j(T.target.checked),className:"w-4 h-4"}),"Animated"]}),c.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[c.jsx("input",{type:"checkbox",checked:G,onChange:T=>z(T.target.checked),className:"w-4 h-4"}),"Show Style"]}),c.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:T=>E(T.target.checked),className:"w-4 h-4"}),"Show Gunk"]}),S&&c.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Gunk Level:",c.jsx("input",{type:"range",min:"0",max:"100",value:W,onChange:T=>$(Number(T.target.value)),className:"w-24"}),c.jsxs("span",{className:"w-8",children:[W,"%"]})]}),c.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",c.jsx("input",{type:"range",min:"60",max:"200",value:x,onChange:T=>v(Number(T.target.value)),className:"w-24"}),c.jsxs("span",{className:"w-10",children:[x,"px"]})]})]})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 pb-32",children:[c.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing ",N.length," of ",Ct.length," creatures"]}),c.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${x+40}px, 1fr))`},children:N.map(T=>c.jsxs("div",{onClick:()=>V((I==null?void 0:I.id)===T.id?null:T),className:`relative flex flex-col items-center p-3 rounded-xl cursor-pointer transition-all ${Wr[T.rarity].bg} ${Wr[T.rarity].glow} ${(I==null?void 0:I.id)===T.id?"ring-2 ring-white scale-105":"hover:scale-102"}`,children:[c.jsx("div",{className:`absolute top-1 left-1 px-2 py-0.5 rounded text-xs ${Gr[T.region].bg} ${Gr[T.region].text}`,children:T.region}),T.rarity==="mythic"&&c.jsx("div",{className:"absolute top-1 right-1 text-orange-300 text-xl animate-pulse",title:"Mythic - Ultimate Boss",children:""}),T.rarity==="legendary"&&c.jsx("div",{className:"absolute top-1 right-1 text-amber-300 text-lg",title:"Legendary Dragon",children:""}),mv.includes(T.id)&&c.jsxs("div",{className:"absolute bottom-1 right-1 flex gap-0.5",children:[c.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-green-500 text-white font-bold",title:"HD Raster Image",children:"HD"}),gv.includes(T.id)&&c.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] bg-red-600 text-white font-bold",title:"Has Possessed Variant",children:""})]}),c.jsx(un,{creature:T,size:x,animated:y,showGunk:S,gunkLevel:W}),c.jsxs("div",{className:"mt-2 text-center",children:[c.jsx("div",{className:"text-white font-medium text-sm truncate max-w-full",children:T.name}),c.jsxs("div",{className:"text-slate-400 text-xs capitalize mb-1",children:[T.rarity,"  ",T.monsterType]}),G&&(()=>{if(T.rarity==="mythic")return c.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:c.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold animate-pulse",children:" MYTHIC ULTIMATE"})});if(T.rarity==="legendary")return c.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:c.jsx("span",{className:"px-2 py-0.5 rounded text-[9px] text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold",children:" LEGENDARY DRAGON"})});const X=ga(T),te=zi[X];return c.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:c.jsxs("span",{className:`px-2 py-0.5 rounded text-[9px] text-white ${te.color} font-medium`,children:[te.icon," ",te.label]})})})()]})]},T.id))})]}),I&&c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-900/95 backdrop-blur border-t border-slate-700 p-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-6",children:[c.jsx(un,{creature:I,size:100,animated:y,showGunk:S,gunkLevel:W}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:I.name}),c.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Gr[I.region].bg} ${Gr[I.region].text}`,children:I.region}),c.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${Wr[I.rarity].bg} ${Wr[I.rarity].text}`,children:I.rarity})]}),c.jsx("p",{className:"text-slate-400 text-sm mb-2",children:I.description}),(()=>{if(I.rarity==="mythic")return c.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[c.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-orange-500 to-red-600 font-bold flex items-center gap-2 animate-pulse",children:" MYTHIC ULTIMATE BOSS"}),c.jsx("span",{className:"text-orange-400 text-xs",children:"The five-headed dragon of perfect dental hygiene - only appears after catching all other creatures!"})]});if(I.rarity==="legendary")return c.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[c.jsx("span",{className:"px-3 py-1 rounded text-sm text-white bg-gradient-to-r from-amber-600 to-orange-600 font-bold flex items-center gap-2",children:" LEGENDARY DRAGON FORM"}),c.jsx("span",{className:"text-amber-400 text-xs",children:"Unique dragon-style graphics with wings, horns, and magical aura"})]});const T=ga(I),X=zi[T];return c.jsxs("div",{className:"flex gap-3 mb-2 items-center",children:[c.jsxs("span",{className:`px-3 py-1 rounded text-sm text-white ${X.color} font-medium flex items-center gap-2`,children:[X.icon," ",X.label," Style"]}),c.jsx("span",{className:"text-slate-400 text-xs",children:X.description})]})})(),c.jsxs("div",{className:"flex gap-4 text-xs text-slate-500",children:[c.jsxs("span",{children:["ID: ",I.id]}),c.jsxs("span",{children:["Type: ",I.monsterType]})]})]}),c.jsx("button",{onClick:()=>V(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white",children:"Close"})]})})]}),t==="buddies"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"sticky top-[64px] z-10 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:c.jsx("div",{className:"flex flex-wrap items-center gap-4",children:c.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:["Size:",c.jsx("input",{type:"range",min:"60",max:"200",value:b,onChange:T=>_(Number(T.target.value)),className:"w-24"}),c.jsxs("span",{className:"w-10",children:[b,"px"]})]})})})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 pb-20",children:[c.jsxs("div",{className:"text-slate-400 mb-4",children:["Showing all ",Sr.length," buddies"]}),c.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${b+60}px, 1fr))`},children:Sr.map(T=>c.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-gradient-to-b from-purple-800 to-purple-900 hover:from-purple-700 hover:to-purple-800 transition-all",children:[c.jsx("div",{className:"bg-purple-950/50 rounded-lg p-2 mb-2",children:c.jsx(Lp,{buddyId:T.id,size:b})}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white font-medium text-sm",children:T.name}),c.jsxs("div",{className:"text-purple-300 text-xs capitalize",children:[T.unlockCondition,T.unlockThreshold&&` (${T.unlockThreshold})`]}),c.jsxs("div",{className:"text-purple-400 text-xs mt-1",children:["ID: ",T.id]})]})]},T.id))})]})]})]})}const vv=Ct.map(e=>({...e,capturedAt:new Date}));function xv({onBack:e}){const[t,n]=k.useState(null),[r,a]=k.useState(null),o=k.useRef(null),u=k.useRef(null),h=k.useCallback(async()=>{try{const j=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});u.current=j,o.current&&(o.current.srcObject=j)}catch(j){console.error("Camera error:",j),a("Could not access camera")}},[]),p=k.useCallback(()=>{u.current&&(u.current.getTracks().forEach(j=>j.stop()),u.current=null)},[]),y=k.useCallback(()=>{if(!o.current)return;const j=document.createElement("canvas");j.width=o.current.videoWidth,j.height=o.current.videoHeight;const S=j.getContext("2d");if(!S)return;S.drawImage(o.current,0,0);const E=j.toDataURL("image/jpeg",.9);n(E),p()},[p]);return k.useEffect(()=>(t||h(),()=>{p()}),[t,h,p]),t?c.jsx(Zp,{photo:t,capturedCreatures:vv,onDone:e,onBack:()=>n(null),debugMode:!0}):c.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-4 bg-purple-900/50 z-10",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-purple-300 bg-purple-800/50 rounded-xl",children:" Back"}),c.jsx("h1",{className:"text-xl font-bold",children:"Photo Debug"}),c.jsx("div",{className:"w-20"})]}),c.jsx("div",{className:"flex-1 relative bg-black overflow-hidden min-h-0",children:r?c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-400 mb-4",children:r}),c.jsx("button",{onClick:h,className:"px-4 py-2 bg-purple-600 rounded-xl",children:"Retry"})]})}):c.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover",style:{transform:"scaleX(-1)"}})}),c.jsxs("div",{className:"flex-shrink-0 p-4 bg-purple-900/50 z-10",children:[c.jsx("button",{onClick:y,disabled:!!r,className:"w-full py-4 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl font-bold text-lg disabled:opacity-50",children:"Take Photo"}),c.jsxs("p",{className:"text-center text-purple-300 text-sm mt-2",children:["All ",Ct.length," creatures will be available as stickers"]})]})]})}function wv(){const[e,t]=k.useState("profile-select"),[n,r]=k.useState(null),[a,o]=k.useState(null),[u,h]=k.useState(null),[p,y]=k.useState(null),[j,S]=k.useState(null),[E,W]=k.useState(null);k.useEffect(()=>{$()},[]);async function $(){const le=Dr();if(le){const Q=await Hy(le);if(Q){r(Q),await x(),t("home");return}}t("profile-select")}async function I(le){r(le),await x(),t("home")}function V(){t("profile-select"),o(null),r(null)}async function x(){try{const le=await xi();o(le)}catch(le){console.error("Failed to load user progress:",le),t("profile-select")}}async function v(le){await Zy(le),await x()}function b(){t("camera-check")}function _(){t("buddy-select")}function G(le){h(le),t("brushing")}async function z(le){y(le),t("results");const Q={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:new Date,duration:Kp(),cleaningPercentage:le.cleaningPercentage,zoneProgress:le.zoneProgress,photos:le.photos};try{await Qy(Q),await x()}catch(ee){console.error("Failed to save session:",ee)}}function N(){t("capture")}function L(le){S(le),t("photos")}function H(le){W(le),t("editor")}function O(){W(null),t("home"),x()}function T(){t("home"),y(null),S(null),W(null),x()}function X(){t("collection")}function te(){t("settings")}function oe(){t("buddy-debug")}function xe(){t("graphics-debug")}function we(){t("photo-debug")}return e==="profile-select"?c.jsx("div",{className:"h-full w-full overflow-hidden",children:c.jsx(hv,{onProfileSelected:I})}):!a||!n?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("div",{className:"text-2xl animate-pulse",children:"Loading..."})}):c.jsxs("div",{className:"h-full w-full overflow-hidden",children:[e==="home"&&c.jsx(yy,{userProgress:a,currentProfile:n,onStartBrushing:b,onViewCollection:X,onViewSettings:te,onSwitchProfile:V,onUnlockSecretBuddy:v}),e==="settings"&&c.jsx(fv,{onBack:T,onBuddyDebug:oe,onGraphicsDebug:xe,onPhotoDebug:we}),e==="camera-check"&&c.jsx(xy,{onConfirm:_,onCancel:T}),e==="buddy-select"&&c.jsx(wy,{userProgress:a,onSelect:G,onBack:T}),e==="brushing"&&c.jsx(Gy,{selectedBuddy:u,capturedCreatureIds:a.capturedCreatures.map(le=>le.id),onComplete:z,onCancel:T}),e==="results"&&p&&c.jsx(Wy,{cleaningPercentage:p.cleaningPercentage,zoneProgress:p.zoneProgress,onContinue:N}),e==="capture"&&p&&c.jsx(tv,{cleaningPercentage:p.cleaningPercentage,userProgress:a,region:p.region,preSelectedCreature:p.creature,onComplete:L}),e==="photos"&&p&&c.jsx(nv,{photos:p.photos,capturedCreature:j,onSelectPhoto:H,onSkip:T}),e==="editor"&&E&&c.jsx(Zp,{photo:E,capturedCreatures:j&&!a.capturedCreatures.some(le=>le.id===j.id)?[{...j,capturedAt:new Date},...a.capturedCreatures]:a.capturedCreatures,onDone:O,onBack:()=>t("photos")}),e==="collection"&&c.jsx(cv,{userProgress:a,onBack:T}),e==="buddy-debug"&&c.jsx(pv,{onBack:T}),e==="graphics-debug"&&c.jsx(yv,{onBack:T}),e==="photo-debug"&&c.jsx(xv,{onBack:T})]})}Bp(document.getElementById("root")).render(c.jsx(k.StrictMode,{children:c.jsx(vy,{children:c.jsx(wv,{})})}));export{kv as a,ed as c,Tm as g};
